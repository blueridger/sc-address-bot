{"version":3,"sources":["webpack://sourcecred/webpack/bootstrap","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/deep-freeze/index.js","webpack://sourcecred/external \"path\"","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/json-stable-stringify/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/big-integer/BigInteger.js","webpack://sourcecred/external \"stream\"","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/graceful-fs/graceful-fs.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/universalify/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/cross-fetch/dist/node-ponyfill.js","webpack://sourcecred/(webpack)/buildin/module.js","webpack://sourcecred/./node_modules/fs-extra/lib/mkdirs/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/lodash.isequal/index.js","webpack://sourcecred/external \"util\"","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/commonmark/lib/common.js","webpack://sourcecred/./node_modules/fs-extra/lib/index.js","webpack://sourcecred/external \"fs\"","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/domhandler/lib/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/bottleneck/lib/parser.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/out/utils/index.js","webpack://sourcecred/external \"zlib\"","webpack://sourcecred/./node_modules/fs-extra/lib/path-exists/index.js","webpack://sourcecred/external \"better-sqlite3\"","webpack://sourcecred/./node_modules/fs-extra/lib/fs/index.js","webpack://sourcecred/./node_modules/fs-extra/lib/util/stat.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/bottleneck/lib/Events.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/@nodelib/fs.stat/out/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/entities/lib/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/isomorphic-fetch/fetch-npm-node.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/base-64/base64.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/bottleneck/lib/BottleneckError.js","webpack://sourcecred/external \"os\"","webpack://sourcecred/./node_modules/fs-extra/lib/remove/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/domelementtype/lib/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/picomatch/lib/utils.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/picomatch/lib/constants.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/lodash.findlast/index.js","webpack://sourcecred/external \"url\"","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/underscore/underscore.js","webpack://sourcecred/external \"buffer\"","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/bn.js/lib/bn.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/jsonfile/utils.js","webpack://sourcecred/./node_modules/fs-extra/lib/output/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/commonmark/lib/node.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/commonmark/lib/render/renderer.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/bottleneck/lib/RedisConnection.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/bottleneck/lib/Scripts.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/bottleneck/lib/IORedisConnection.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/braces/lib/stringify.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/braces/lib/utils.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/@nodelib/fs.scandir/out/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/@nodelib/fs.walk/out/readers/common.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/out/providers/provider.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/web3-utils/lib/index.js","webpack://sourcecred/external \"http\"","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/commonmark/lib/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/entities/lib/decode.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/entities/lib/decode_codepoint.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/entities/lib/encode.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/number-to-bn/src/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/web3-utils/lib/utils.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/node-fetch/lib/index.mjs","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/color-convert/conversions.js","webpack://sourcecred/external \"assert\"","webpack://sourcecred/./node_modules/fs-extra/lib/copy-sync/index.js","webpack://sourcecred/./node_modules/fs-extra/lib/util/utimes.js","webpack://sourcecred/./node_modules/fs-extra/lib/copy/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/commonmark/node_modules/entities/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/htmlparser2/lib/Parser.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/htmlparser2/lib/Tokenizer.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/domhandler/lib/node.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/htmlparser2/lib/FeedHandler.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/domutils/lib/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/domutils/lib/querying.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/bottleneck/lib/Bottleneck.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/bottleneck/lib/DLList.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/merge2/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/out/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fill-range/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/picomatch/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/out/readers/stream.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/@nodelib/fs.walk/out/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/@nodelib/fs.walk/out/readers/async.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/@nodelib/fs.scandir/out/constants.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/@nodelib/fs.scandir/out/utils/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/@nodelib/fs.scandir/out/providers/common.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/@nodelib/fs.walk/out/readers/reader.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/out/readers/reader.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/lodash.clonedeep/index.js","webpack://sourcecred/external \"https\"","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/lodash.sortedindex/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/lodash.findlastindex/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/lodash.differenceby/index.js","webpack://sourcecred/../grainIntegration-csv/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/bottleneck/lib/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/globby/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/jsonify/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/jsonify/lib/parse.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/jsonify/lib/stringify.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/ethjs-unit/lib/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/ethjs-unit/node_modules/bn.js/lib/bn.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/number-to-bn/node_modules/bn.js/lib/bn.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/strip-hex-prefix/src/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/is-hex-prefixed/src/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/utf8/utf8.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/eth-lib/lib/hash.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/ethereum-bloom-filters/dist/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/ethereum-bloom-filters/dist/utils.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/js-sha3/src/sha3.js","webpack://sourcecred/(webpack)/buildin/amd-options.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/web3-utils/lib/soliditySha3.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/randombytes/index.js","webpack://sourcecred/external \"crypto\"","webpack://sourcecred/./src/util sync","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/chalk/source/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/ansi-styles/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/color-convert/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/color-name/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/color-convert/route.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/supports-color/index.js","webpack://sourcecred/external \"tty\"","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/supports-color/node_modules/has-flag/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/chalk/source/util.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/chalk/source/templates.js","webpack://sourcecred/../grainIntegration-csv/distributionToCsv.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/graceful-fs/polyfills.js","webpack://sourcecred/external \"constants\"","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/graceful-fs/legacy-streams.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/graceful-fs/clone.js","webpack://sourcecred/./node_modules/fs-extra/lib/copy-sync/copy-sync.js","webpack://sourcecred/./node_modules/fs-extra/lib/mkdirs/make-dir.js","webpack://sourcecred/./node_modules/fs-extra/lib/mkdirs/utils.js","webpack://sourcecred/./node_modules/fs-extra/lib/copy/copy.js","webpack://sourcecred/./node_modules/fs-extra/lib/empty/index.js","webpack://sourcecred/./node_modules/fs-extra/lib/remove/rimraf.js","webpack://sourcecred/./node_modules/fs-extra/lib/ensure/index.js","webpack://sourcecred/./node_modules/fs-extra/lib/ensure/file.js","webpack://sourcecred/./node_modules/fs-extra/lib/ensure/link.js","webpack://sourcecred/./node_modules/fs-extra/lib/ensure/symlink.js","webpack://sourcecred/./node_modules/fs-extra/lib/ensure/symlink-paths.js","webpack://sourcecred/./node_modules/fs-extra/lib/ensure/symlink-type.js","webpack://sourcecred/./node_modules/fs-extra/lib/json/index.js","webpack://sourcecred/./node_modules/fs-extra/lib/json/jsonfile.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/jsonfile/index.js","webpack://sourcecred/./node_modules/fs-extra/lib/json/output-json.js","webpack://sourcecred/./node_modules/fs-extra/lib/json/output-json-sync.js","webpack://sourcecred/./node_modules/fs-extra/lib/move-sync/index.js","webpack://sourcecred/./node_modules/fs-extra/lib/move-sync/move-sync.js","webpack://sourcecred/./node_modules/fs-extra/lib/move/index.js","webpack://sourcecred/./node_modules/fs-extra/lib/move/move.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/commonmark/lib/blocks.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/mdurl/encode.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/commonmark/node_modules/entities/lib/encode.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/commonmark/node_modules/entities/lib/decode.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/commonmark/node_modules/entities/lib/decode_codepoint.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/commonmark/lib/inlines.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/commonmark/lib/normalize-reference.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/commonmark/lib/from-code-point.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/string.prototype.repeat/repeat.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/commonmark/lib/render/html.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/commonmark/lib/render/xml.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/htmlparser2/lib/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/domutils/lib/stringify.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/domutils/node_modules/dom-serializer/lib/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/domutils/node_modules/dom-serializer/lib/foreignNames.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/domutils/lib/traversal.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/domutils/lib/manipulation.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/domutils/lib/legacy.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/domutils/lib/helpers.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/bottleneck/lib/Queues.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/bottleneck/lib/Job.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/bottleneck/lib/LocalDatastore.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/bottleneck/lib/RedisDatastore.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/bottleneck/lib/States.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/bottleneck/lib/Sync.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/bottleneck/lib/Group.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/bottleneck/lib/Batcher.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/array-union/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/out/managers/tasks.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/out/utils/array.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/out/utils/errno.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/out/utils/fs.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/out/utils/path.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/out/utils/pattern.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/glob-parent/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/is-glob/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/is-extglob/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/node_modules/micromatch/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/braces/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/braces/lib/compile.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/to-regex-range/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/to-regex-range/node_modules/is-number/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/braces/lib/expand.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/braces/lib/parse.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/braces/lib/constants.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/picomatch/lib/picomatch.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/picomatch/lib/scan.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/picomatch/lib/parse.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/out/utils/stream.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/out/utils/string.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/out/providers/async.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/@nodelib/fs.stat/out/providers/async.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/@nodelib/fs.stat/out/providers/sync.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/@nodelib/fs.stat/out/settings.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/@nodelib/fs.stat/out/adapters/fs.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/@nodelib/fs.walk/out/providers/async.js","webpack://sourcecred/external \"events\"","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/@nodelib/fs.scandir/out/providers/async.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/run-parallel/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/queue-microtask/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/@nodelib/fs.scandir/out/utils/fs.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/@nodelib/fs.scandir/out/providers/sync.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/@nodelib/fs.scandir/out/settings.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/@nodelib/fs.scandir/out/adapters/fs.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fastq/queue.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/reusify/reusify.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/@nodelib/fs.walk/out/providers/stream.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/@nodelib/fs.walk/out/providers/sync.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/@nodelib/fs.walk/out/readers/sync.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/@nodelib/fs.walk/out/settings.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/out/providers/filters/deep.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/out/providers/matchers/partial.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/out/providers/matchers/matcher.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/out/providers/filters/entry.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/out/providers/filters/error.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/out/providers/transformers/entry.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/out/providers/stream.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/out/providers/sync.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/out/readers/sync.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/fast-glob/out/settings.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/dir-glob/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/path-type/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/globby/gitignore.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/globby/node_modules/ignore/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/slash/index.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/globby/stream-utils.js","webpack://sourcecred/./src/util/map.js","webpack://sourcecred/./src/util/combo.js","webpack://sourcecred/./src/core/address.js","webpack://sourcecred/./src/util/compat.js","webpack://sourcecred/./src/util/null.js","webpack://sourcecred/./src/core/graph.js","webpack://sourcecred/./src/plugins/discourse/declaration.js","webpack://sourcecred/./src/plugins/discourse/address.js","webpack://sourcecred/./src/plugins/discord/declaration.js","webpack://sourcecred/./src/plugins/discord/models.js","webpack://sourcecred/./src/util/dedent.js","webpack://sourcecred/./src/plugins/discord/mirrorRepository.js","webpack://sourcecred/./src/core/weights.js","webpack://sourcecred/./src/plugins/discord/reactionWeights.js","webpack://sourcecred/./src/plugins/discord/createGraph.js","webpack://sourcecred/./src/core/identity/name.js","webpack://sourcecred/./src/plugins/discord/createIdentities.js","webpack://sourcecred/./src/plugins/discord/utils.js","webpack://sourcecred/./src/plugins/initiatives/declaration.js","webpack://sourcecred/./src/plugins/github/bots.js","webpack://sourcecred/./src/plugins/github/nodes.js","webpack://sourcecred/./src/plugins/git/nodes.js","webpack://sourcecred/./src/plugins/github/graphqlTypes.js","webpack://sourcecred/./src/plugins/github/edges.js","webpack://sourcecred/./src/plugins/github/declaration.js","webpack://sourcecred/./src/plugins/ethereum/declaration.js","webpack://sourcecred/./src/util/jsonLog.js","webpack://sourcecred/./src/plugins/ethereum/ethAddressNode.js","webpack://sourcecred/./src/plugins/ethereum/createIdentities.js","webpack://sourcecred/./src/plugins/ethereum/ethAddress.js","webpack://sourcecred/./src/plugins/ethereum/utils.js","webpack://sourcecred/./src/analysis/types.js","webpack://sourcecred/./src/analysis/pluginDeclaration.js","webpack://sourcecred/./src/util/uuid.js","webpack://sourcecred/./src/util/getRandomValues.js","webpack://sourcecred/./src/core/identity/id.js","webpack://sourcecred/./src/core/identity/alias.js","webpack://sourcecred/./src/core/identity/identityType.js","webpack://sourcecred/./src/core/identity/identity.js","webpack://sourcecred/./src/core/ledger/currency.js","webpack://sourcecred/./src/api/currencyConfig.js","webpack://sourcecred/./src/core/ledger/grain.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/d3-array/src/sum.js","webpack://sourcecred/./src/core/ledger/nonnegativeGrain.js","webpack://sourcecred/./src/core/ledger/policies/balanced.js","webpack://sourcecred/./src/core/ledger/policies/immediate.js","webpack://sourcecred/./src/core/ledger/policies/recent.js","webpack://sourcecred/./src/core/ledger/policies/special.js","webpack://sourcecred/./src/core/ledger/policies/index.js","webpack://sourcecred/./src/core/ledger/grainAllocation.js","webpack://sourcecred/./src/core/ledger/distribution.js","webpack://sourcecred/./src/core/ledger/ledger.js","webpack://sourcecred/./src/core/ledger/identityProposal.js","webpack://sourcecred/./src/core/weightedGraph.js","webpack://sourcecred/./src/core/storage/textEncoding.js","webpack://sourcecred/./src/util/storage.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/pako/dist/pako.esm.mjs","webpack://sourcecred/./src/core/storage/zip.js","webpack://sourcecred/./src/core/storage/networkStorage.js","webpack://sourcecred/./src/api/pluginId.js","webpack://sourcecred/./src/plugins/external/defaultDeclaration.js","webpack://sourcecred/./src/plugins/external/plugin.js","webpack://sourcecred/./src/core/algorithm/graphToMarkovChain.js","webpack://sourcecred/./src/core/algorithm/distribution.js","webpack://sourcecred/./src/core/algorithm/markovChain.js","webpack://sourcecred/./src/core/trie.js","webpack://sourcecred/./src/core/algorithm/weightEvaluator.js","webpack://sourcecred/./src/util/sortBy.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/d3-time/src/interval.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/d3-time/src/utcWeek.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/d3-time/src/duration.js","webpack://sourcecred/./src/core/interval.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/d3-array/src/min.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/d3-array/src/max.js","webpack://sourcecred/./src/core/credrank/personalAttribution.js","webpack://sourcecred/./src/core/credrank/markovNode.js","webpack://sourcecred/./src/core/credrank/markovEdge.js","webpack://sourcecred/./src/core/credrank/nodeGadgets.js","webpack://sourcecred/./src/core/credrank/edgeGadgets.js","webpack://sourcecred/./src/core/credrank/markovProcessGraph.js","webpack://sourcecred/./src/core/credrank/credGraph.js","webpack://sourcecred/./src/core/credGrainView.js","webpack://sourcecred/./src/core/ledger/computeDistribution.js","webpack://sourcecred/./src/core/ledger/applyDistributions.js","webpack://sourcecred/./src/core/ledger/credAccounts.js","webpack://sourcecred/./src/core/ledger/diffLedger.js","webpack://sourcecred/./src/core/ledger/utils.js","webpack://sourcecred/./src/api/ledgerManager.js","webpack://sourcecred/./src/plugins/github/repoId.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/@aws-sdk/util-base64-browser/dist-es/index.js","webpack://sourcecred/./src/core/storage/github.js","webpack://sourcecred/./src/util/timestamp.js","webpack://sourcecred/./src/api/dependenciesConfig.js","webpack://sourcecred/./src/core/bonusMinting.js","webpack://sourcecred/./src/core/mintBudget.js","webpack://sourcecred/./src/core/credrank/compute.js","webpack://sourcecred/./src/api/config/personalAttributionsConfig.js","webpack://sourcecred/./src/api/main/credrank.js","webpack://sourcecred/./src/util/taskReporter.js","webpack://sourcecred/./src/core/references/cascadingReferenceDetector.js","webpack://sourcecred/./src/api/main/graph.js","webpack://sourcecred/./src/core/ledger/distributionSummary/distributionSummary.js","webpack://sourcecred/./src/core/ledger/grainIntegration.js","webpack://sourcecred/./src/api/main/grain.js","webpack://sourcecred/./src/util/batch.js","webpack://sourcecred//Users/hz/Documents/dev/hz/sourcecred/node_modules/json2csv/dist/json2csv.esm.js","webpack://sourcecred/./src/api/main/analysisUtils/neo4j.js","webpack://sourcecred/./src/api/main/analysis.js","webpack://sourcecred/./src/api/bundledDeclarations.js","webpack://sourcecred/./src/api/pluginBudgetConfig.js","webpack://sourcecred/./src/api/rawInstanceConfig.js","webpack://sourcecred/./src/util/pathNormalize.js","webpack://sourcecred/./src/core/storage/originStorage.js","webpack://sourcecred/./src/api/bundledGrainIntegrations.js","webpack://sourcecred/./src/api/grainConfig.js","webpack://sourcecred/./src/api/instance/readInstance.js","webpack://sourcecred/./src/api/lib/base.js","webpack://sourcecred/./src/util/disk.js","webpack://sourcecred/./src/graphql/schema.js","webpack://sourcecred/./src/graphql/queries.js","webpack://sourcecred/./src/graphql/mirror.js","webpack://sourcecred/./src/plugins/github/schema.js","webpack://sourcecred/./src/plugins/github/cacheId.js","webpack://sourcecred/./src/util/retry.js","webpack://sourcecred/./src/plugins/github/fetchGithubRepo.js","webpack://sourcecred/./src/plugins/github/parseMarkdown.js","webpack://sourcecred/./src/plugins/github/parseReferences.js","webpack://sourcecred/./src/plugins/github/urlIdParse.js","webpack://sourcecred/./src/plugins/github/relationalView.js","webpack://sourcecred/./src/plugins/github/createGraph.js","webpack://sourcecred/./src/core/references/mappedReferenceDetector.js","webpack://sourcecred/./src/plugins/github/referenceDetector.js","webpack://sourcecred/./src/plugins/github/config.js","webpack://sourcecred/./src/plugins/github/createIdentities.js","webpack://sourcecred/./src/core/storage/disk.js","webpack://sourcecred/./src/plugins/github/plugin.js","webpack://sourcecred/./src/plugins/github/token.js","webpack://sourcecred/./src/plugins/discourse/references.js","webpack://sourcecred/./src/plugins/discourse/nodesAndEdges.js","webpack://sourcecred/./src/plugins/discourse/weights.js","webpack://sourcecred/./src/plugins/discourse/createGraph.js","webpack://sourcecred/./src/plugins/discourse/mirrorRepository.js","webpack://sourcecred/./src/plugins/discourse/mirror.js","webpack://sourcecred/./src/plugins/discourse/config.js","webpack://sourcecred/./src/plugins/discourse/fetch.js","webpack://sourcecred/./src/plugins/discourse/referenceDetector.js","webpack://sourcecred/./src/plugins/discourse/createIdentities.js","webpack://sourcecred/./src/plugins/discourse/plugin.js","webpack://sourcecred/./src/plugins/discord/config.js","webpack://sourcecred/./src/plugins/discord/fetcher.js","webpack://sourcecred/./src/plugins/discord/mirror.js","webpack://sourcecred/./src/plugins/discord/plugin.js","webpack://sourcecred/./src/plugins/initiatives/nodeEntry.js","webpack://sourcecred/./src/plugins/initiatives/edgeSpec.js","webpack://sourcecred/./src/util/findDuplicates.js","webpack://sourcecred/./src/plugins/initiatives/initiative.js","webpack://sourcecred/./src/plugins/initiatives/initiativeFile.js","webpack://sourcecred/./src/plugins/initiatives/parseInitiative.js","webpack://sourcecred/./src/plugins/initiatives/initiativesDirectory.js","webpack://sourcecred/./src/plugins/initiatives/config.js","webpack://sourcecred/./src/plugins/initiatives/createGraph.js","webpack://sourcecred/./src/plugins/initiatives/plugin.js","webpack://sourcecred/./src/plugins/ethereum/plugin.js","webpack://sourcecred/./src/api/bundledPlugins.js","webpack://sourcecred/./src/api/instanceConfig.js","webpack://sourcecred/./src/api/instance/localInstance.js","webpack://sourcecred/./src/api/lib/node.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","deepFreeze","freeze","getOwnPropertyNames","forEach","prop","isFrozen","require","json","JSON","obj","opts","cmp","space","Array","join","f","cycles","replacer","node","a","b","aobj","bobj","seen","stringify","parent","level","indent","colonSeparator","toJSON","undefined","isArray","out","length","item","push","indexOf","TypeError","keys","objectKeys","sort","keyValue","splice","x","toString","has","BASE","MAX_INT","MAX_INT_ARR","smallToArray","supportsNativeBigInt","BigInt","Integer","v","radix","alphabet","caseSensitive","parseBase","parseValue","BigInteger","sign","this","isSmall","SmallInteger","NativeBigInt","isPrecise","Math","floor","arrayToSmall","arr","trim","compareAbs","createArray","truncate","ceil","add","sum","l_a","l_b","carry","base","addAny","addSmall","subtract","difference","a_l","b_l","borrow","subtractSmall","multiplyLong","product","a_i","j","multiplySmall","shiftLeft","concat","multiplySmallAndArray","square","divModSmall","lambda","q","remainder","divisor","quotient","divModAny","self","Error","negate","abs","comparison","quotientDigit","shift","result","divisorMostSignificantDigit","divMod1","guess","xlen","highx","highy","check","part","unshift","reverse","divMod2","qSign","mod","mSign","isBasicPrime","isUnit","equals","isEven","isDivisibleBy","lesser","millerRabinTest","nPrev","prev","divide","next","bigInt","modPow","plus","subtractAny","minus","small","multiply","l1","l2","multiplyKaratsuba","y","max","slice","ac","bd","abcd","times","_multiplyBySmall","divmod","over","pow","_0","_1","_2","isNegative","exp","isZero","modInv","isPositive","isOdd","compare","Infinity","compareTo","eq","notEquals","neq","greater","gt","lt","greaterOrEquals","geq","lesserOrEquals","leq","isPrime","strict","bits","bitLength","logN","log","toJSNumber","isProbablePrime","iterations","rng","randBetween","lastT","lastR","zero","newT","one","newR","powersOfTwo","powers2Length","highestPower2","shift_isSmall","bitwise","fn","xSign","ySign","xRem","not","yRem","xDigit","yDigit","xDivMod","yDivMod","String","shiftRight","remQuo","and","or","xor","roughLOB","min","gcd","integerLogarithm","tmp","e","text","toLowerCase","absBase","alphabetValues","digits","start","parseBaseFromArray","val","toBase","apply","map","valueOf","neg","Number","left","digit","toBaseString","parseStringValue","split","decimalPlace","test","parseNumberValue","toArray","str","parseInt","minusOne","lcm","isInstance","usedRNG","random","low","range","restricted","top","fromArray","gracefulQueue","previousSymbol","fs","polyfills","legacy","clone","util","publishQueue","context","queue","for","debug","debuglog","process","env","NODE_DEBUG","format","arguments","console","error","global","close","fs$close","fd","cb","err","retry","closeSync","fs$closeSync","on","equal","patch","gracefulify","createReadStream","path","options","ReadStream","createWriteStream","WriteStream","fs$readFile","readFile","go$readFile","code","enqueue","fs$writeFile","writeFile","data","go$writeFile","fs$appendFile","appendFile","go$appendFile","fs$copyFile","copyFile","src","dest","flags","fs$readdir","readdir","go$readdir","args","files","version","substr","legStreams","fs$ReadStream","open","that","autoClose","destroy","emit","read","fs$WriteStream","set","configurable","FileReadStream","FileWriteStream","fs$open","go$open","elem","TEST_GRACEFUL_FS_GLOBAL_PATCH","__patched","fromCallback","Promise","resolve","reject","res","fromPromise","then","nodeFetch","realFetch","default","fetch","url","ponyfill","Headers","Request","Response","webpackPolyfill","deprecate","paths","children","u","makeDir","_makeDir","makeDirSync","mkdirs","mkdirsSync","mkdirp","mkdirpSync","ensureDir","ensureDirSync","argsTag","mapTag","objectTag","setTag","reIsHostCtor","reIsUint","typedArrayTags","freeGlobal","freeSelf","root","Function","freeExports","nodeType","freeModule","moduleExports","freeProcess","nodeUtil","binding","nodeIsTypedArray","isTypedArray","arraySome","array","predicate","index","mapToArray","size","setToArray","uid","func","transform","arrayProto","funcProto","objectProto","coreJsData","funcToString","maskSrcKey","exec","IE_PROTO","nativeObjectToString","reIsNative","RegExp","replace","Buffer","Uint8Array","propertyIsEnumerable","symToStringTag","nativeGetSymbols","getOwnPropertySymbols","nativeIsBuffer","isBuffer","nativeKeys","arg","DataView","getNative","Map","Set","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","Hash","entries","clear","entry","ListCache","MapCache","SetCache","values","__data__","Stack","arrayLikeKeys","inherited","isArr","isArg","isArguments","isBuff","isType","skipIndexes","iteratee","baseTimes","isIndex","assocIndexOf","baseGetTag","isOwn","tag","unmasked","getRawTag","objectToString","baseIsArguments","isObjectLike","baseIsEqual","other","bitmask","customizer","stack","equalFunc","objIsArr","othIsArr","objTag","getTag","othTag","objIsObj","othIsObj","isSameTag","equalArrays","byteLength","byteOffset","buffer","message","convert","isPartial","stacked","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","objProps","getAllKeys","objLength","othLength","skipCtor","objValue","othValue","compared","objCtor","constructor","othCtor","equalObjects","baseIsEqualDeep","baseIsNative","isObject","isMasked","isFunction","baseKeys","Ctor","proto","arrLength","arrValue","othIndex","keysFunc","symbolsFunc","offset","arrayPush","baseGetAllKeys","getSymbols","getMapData","type","getValue","pop","pairs","LARGE_ARRAY_SIZE","resIndex","arrayFilter","symbol","ArrayBuffer","ctorString","isLength","baseUnary","encode","decodeHTML","ENTITY","OPENTAG","CLOSETAG","reHtmlTag","reBackslashOrAmp","ESCAPABLE","reEntityOrEscapedChar","reXmlSpecial","unescapeChar","charCodeAt","charAt","replaceUnsafeChar","unescapeString","normalizeURI","uri","escapeXml","__createBinding","k","k2","__exportStar","DomHandler","domelementtype_1","node_1","reWhitespace","defaultOpts","normalizeWhitespace","withStartIndices","withEndIndices","callback","elementCB","dom","Document","done","tagStack","lastNode","parser","onparserinit","onreset","_a","onend","handleCallback","onerror","onclosetag","endIndex","onopentag","attribs","xmlMode","ElementType","Tag","element","Element","addNode","ontext","Text","oncomment","Comment","oncommentend","oncdatastart","NodeWithChildren","CDATA","oncdataend","onprocessinginstruction","ProcessingInstruction","previousSibling","startIndex","load","received","defaults","onto","ref","overwrite","string","stream","pattern","errno","pathExists","access","catch","pathExistsSync","existsSync","api","filter","assign","method","realpath","native","exists","filename","position","bytesRead","write","bytesWritten","writev","buffers","getStats","statFunc","dereference","file","stat","bigint","lstat","all","srcStat","destStat","areIdentical","ino","dev","isSrcSubdir","srcArr","sep","destArr","reduce","acc","cur","errMsg","funcName","checkPaths","callbackify","stats","srcBaseName","basename","destBaseName","isChangingCase","isDirectory","checkPathsSync","statSync","lstatSync","getStatsSync","checkParentPaths","srcParent","dirname","destParent","parse","checkParentPathsSync","asyncGeneratorStep","gen","_next","_throw","info","_asyncToGenerator","Events","instance","_events","once","removeAllListeners","_addListener","status","_this","promises","trigger","listener","_ref","returned","_x","find","Settings","async","sync","settings_1","getSettings","settingsOrOptions","optionsOrSettingsOrCallback","optionsOrSettings","settings","decodeXMLStrict","decodeHTML5Strict","decodeHTML4Strict","decodeHTML5","decodeHTML4","decodeHTMLStrict","decodeXML","encodeHTML5","encodeHTML4","escapeUTF8","escape","encodeNonAsciiHTML","encodeHTML","encodeXML","decodeStrict","decode","decode_1","encode_1","encode_2","decode_2","window","InvalidCharacterError","TABLE","REGEX_SPACE_CHARACTERS","base64","input","padding","output","bitStorage","bitCounter","fromCharCode","BottleneckError","rimraf","remove","rm","recursive","force","removeSync","rmSync","Doctype","Style","Script","Directive","Root","isTag","win32","platform","REGEX_BACKSLASH","REGEX_REMOVE_BACKSLASH","REGEX_SPECIAL_CHARS","REGEX_SPECIAL_CHARS_GLOBAL","hasRegexChars","isRegexChar","escapeRegex","toPosixSlashes","removeBackslashes","match","supportsLookbehinds","segs","isWindows","windows","escapeLast","char","lastIdx","idx","lastIndexOf","removePrefix","state","startsWith","prefix","wrapOutput","contains","negated","POSIX_CHARS","DOT_LITERAL","PLUS_LITERAL","QMARK_LITERAL","SLASH_LITERAL","ONE_CHAR","QMARK","END_ANCHOR","DOTS_SLASH","NO_DOT","NO_DOTS","NO_DOT_SLASH","NO_DOTS_SLASH","QMARK_NO_DOT","STAR","START_ANCHOR","WINDOWS_CHARS","MAX_LENGTH","POSIX_REGEX_SOURCE","alnum","alpha","ascii","blank","cntrl","graph","lower","print","punct","upper","word","xdigit","REGEX_NON_SPECIAL_CHARS","REGEX_SPECIAL_CHARS_BACKREF","REPLACEMENTS","CHAR_0","CHAR_9","CHAR_UPPERCASE_A","CHAR_LOWERCASE_A","CHAR_UPPERCASE_Z","CHAR_LOWERCASE_Z","CHAR_LEFT_PARENTHESES","CHAR_RIGHT_PARENTHESES","CHAR_ASTERISK","CHAR_AMPERSAND","CHAR_AT","CHAR_BACKWARD_SLASH","CHAR_CARRIAGE_RETURN","CHAR_CIRCUMFLEX_ACCENT","CHAR_COLON","CHAR_COMMA","CHAR_DOT","CHAR_DOUBLE_QUOTE","CHAR_EQUAL","CHAR_EXCLAMATION_MARK","CHAR_FORM_FEED","CHAR_FORWARD_SLASH","CHAR_GRAVE_ACCENT","CHAR_HASH","CHAR_HYPHEN_MINUS","CHAR_LEFT_ANGLE_BRACKET","CHAR_LEFT_CURLY_BRACE","CHAR_LEFT_SQUARE_BRACKET","CHAR_LINE_FEED","CHAR_NO_BREAK_SPACE","CHAR_PERCENT","CHAR_PLUS","CHAR_QUESTION_MARK","CHAR_RIGHT_ANGLE_BRACKET","CHAR_RIGHT_CURLY_BRACE","CHAR_RIGHT_SQUARE_BRACKET","CHAR_SEMICOLON","CHAR_SINGLE_QUOTE","CHAR_SPACE","CHAR_TAB","CHAR_UNDERSCORE","CHAR_VERTICAL_LINE","CHAR_ZERO_WIDTH_NOBREAK_SPACE","SEP","extglobChars","chars","globChars","reIsDeepProp","reIsPlainProp","reLeadingDot","rePropName","reTrim","reEscapeChar","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","isHostObject","nativeMax","nativeMin","symbolToString","baseGet","isKey","castPath","toKey","baseHasIn","baseIteratee","identity","srcValue","isStrictComparable","matchesStrictComparable","defaultValue","hasFunc","hasPath","hasIn","UNORDERED_COMPARE_FLAG","baseMatchesProperty","source","matchData","getMatchData","noCustomizer","baseIsMatch","baseMatches","basePropertyDeep","stringToPath","cache","isSymbol","memoize","baseToString","number","quote","findIndexFunc","findLast","fromIndex","isBinary","toNumber","toFinite","fromRight","baseFindIndex","collection","iterable","isArrayLike","resolver","memoized","Cache","isArrayLikeObject","previousUnderscore","_","ArrayProto","ObjProto","SymbolProto","nativeIsArray","_wrapped","VERSION","builtinIteratee","optimizeCb","argCount","accumulator","matcher","restArguments","rest","baseCreate","shallowProperty","deepGet","MAX_ARRAY_INDEX","getLength","each","collect","results","currentKey","createReduce","dir","reducer","memo","initial","foldl","inject","reduceRight","foldr","detect","findIndex","findKey","select","list","every","some","any","includes","include","guard","invoke","contextPath","pluck","where","attrs","findWhere","computed","lastComputed","shuffle","sample","last","rand","temp","sortBy","criteria","right","group","behavior","partition","groupBy","indexBy","countBy","reStrSymbol","isString","pass","first","head","take","tail","drop","compact","Boolean","flatten","shallow","len","without","otherArrays","uniq","unique","isSorted","isBoolean","union","arrays","intersection","argsLength","unzip","zip","createPredicateIndexFinder","findLastIndex","sortedIndex","high","mid","createIndexFinder","predicateFind","isNaN","stop","step","chunk","count","executeBound","sourceFunc","boundFunc","callingContext","bound","callArgs","partial","boundArgs","placeholder","bindAll","hasher","address","delay","wait","setTimeout","defer","throttle","timeout","previous","later","leading","now","throttled","remaining","clearTimeout","trailing","cancel","debounce","immediate","debounced","callNow","wrap","wrapper","compose","after","before","hasEnumBug","nonEnumerableProps","collectNonEnumProps","nonEnumIdx","allKeys","mapObject","invert","functions","methods","names","createAssigner","extend","extendOwn","deepEq","keyInObj","pick","omit","props","tap","interceptor","isMatch","aStack","bStack","className","areArrays","aCtor","bCtor","isEqual","isEmpty","isElement","nodelist","document","childNodes","Int8Array","isFinite","parseFloat","isNumber","isNull","isUndefined","noConflict","constant","noop","propertyOf","matches","accum","Date","getTime","escapeMap","unescapeMap","createEscaper","escaper","testRegexp","replaceRegexp","unescape","fallback","idCounter","uniqueId","id","templateSettings","evaluate","interpolate","noMatch","escapes","escapeRegExp","escapeChar","template","oldSettings","render","variable","argument","chain","_chain","chainResult","mixin","assert","msg","inherits","ctor","superCtor","super_","TempCtor","BN","endian","isBN","negative","words","red","_init","wordSize","parseHex4Bits","parseHexByte","lowerBound","end","mul","num","_initNumber","_initArray","_parseHex","_parseBase","w","off","strip","limbLen","limbPow","total","imuln","_iaddn","copy","_expand","_normSign","inspect","zeros","groupSizes","groupBases","smallMulTo","lo","ncarry","rword","maxJ","groupSize","groupBase","modn","idivn","ret","toBuffer","toArrayLike","ArrayType","reqLength","littleEndian","andln","iushrn","clz32","_countBits","_zeroBits","hi","zeroBits","toTwos","width","inotn","iaddn","fromTwos","testn","notn","ineg","isNeg","iuor","ior","uor","iuand","iand","uand","iuxor","ixor","uxor","bytesNeeded","bitsLeft","setn","bit","wbit","iadd","isub","sub","comb10MulTo","a0","al0","ah0","a1","al1","ah1","a2","al2","ah2","a3","al3","ah3","a4","al4","ah4","a5","al5","ah5","a6","al6","ah6","a7","al7","ah7","a8","al8","ah8","a9","al9","ah9","b0","bl0","bh0","b1","bl1","bh1","b2","bl2","bh2","b3","bl3","bh3","b4","bl4","bh4","b5","bl5","bh5","b6","bl6","bh6","b7","bl7","bh7","b8","bl8","bh8","b9","bl9","bh9","w0","imul","w1","w2","w3","w4","w5","w6","w7","w8","w9","w10","w11","w12","w13","w14","w15","w16","w17","w18","jumboMulTo","FFTM","mulp","mulTo","hncarry","bigMulTo","makeRBT","N","revBin","rb","permute","rbt","rws","iws","rtws","itws","rtwdf","cos","PI","itwdf","sin","rtwdf_","itwdf_","re","ie","ro","io","rx","guessLen13b","odd","conjugate","normalize13b","ws","round","convert13b","stub","ph","rwst","iwst","nrws","nrwst","niwst","rmws","mulf","muln","sqr","isqr","toBitArray","iushln","carryMask","newCarry","ishln","hint","extended","h","mask","maskedWords","ishrn","shln","ushln","shrn","ushrn","imaskn","maskn","isubn","addn","subn","iabs","_ishlnsubmul","_wordDiv","bhi","diff","qj","div","positive","divn","umod","divRound","dm","half","r2","egcd","A","B","C","D","g","yp","xp","im","jm","_invmp","x1","x2","delta","cmpn","invm","bincn","ucmp","gtn","gten","gte","ltn","lten","lte","eqn","Red","toRed","ctx","convertTo","_forceRed","fromRed","convertFrom","forceRed","redAdd","redIAdd","redSub","redISub","redShl","shl","redMul","_verify2","redIMul","redSqr","_verify1","redISqr","redSqrt","sqrt","redInvm","redNeg","redPow","primes","k256","p224","p192","p25519","MPrime","_tmp","K256","P224","P192","P25519","prime","_prime","Mont","imod","rinv","minv","ireduce","rlen","imulK","_strip","outLen","mod3","nOne","lpow","z","inv","wnd","current","currentLen","mont","EOL","finalEOL","spaces","EOF","stripBom","content","mkdir","outputFile","encoding","itDoes","outputFileSync","writeFileSync","isContainer","_type","resumeAt","entering","container","_firstChild","_parent","NodeWalker","Node","sourcepos","_lastChild","_prev","_sourcepos","_lastLineBlank","_lastLineChecked","_open","_string_content","_literal","_listData","_info","_destination","_title","_isFenced","_fenceChar","_fenceLength","_fenceOffset","_level","_onEnter","_onExit","tight","delimiter","delim","appendChild","child","unlink","prependChild","insertAfter","sibling","insertBefore","walker","Renderer","ast","event","lastOut","lit","cr","esc","RedisConnection","Scripts","Redis","eval","terminated","client","createClient","clientOptions","subscriber","duplicate","limiters","shas","ready","_setup","_loadScripts","setMaxListeners","channel","_store","onMessage","payload","multi","replies","_loadScript","cmd","exec_atomic","channel_client","handler","chan","removeListener","subscribe","_this2","unsubscribe","evalsha","flush","clearInterval","heartbeat","datastore","headers","lua","templates","refs","validate_keys","validate_client","refresh_expiration","process_tick","conditions_check","get_time","init","group_check","register_client","blacklist_client","update_settings","running","queued","submit","register","free","current_reservoir","increment_reservoir","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","_arr","_n","_d","_e","_s","_i","iterator","IORedisConnection","clusterNodes","Cluster","startupNodes","defineCommand","_ref2","pipeline","_ref2$","_ref3","quit","disconnect","utils","invalidBlock","escapeInvalid","isInvalidBrace","invalidNode","invalid","isOpenOrClose","nodes","isInteger","exceedsLimit","limit","escapeNode","block","escaped","encloseBrace","commas","ranges","dollar","flat","ele","scandirSync","scandir","joinPathSegments","replacePathSegmentSeparator","isAppliedFilter","isFatalError","errorFilter","filepath","separator","endsWith","deep_1","entry_1","error_1","entry_2","_settings","entryFilter","_getMicromatchOptions","deepFilter","entryTransformer","task","cwd","basePath","pathSegmentSeparator","concurrency","getFilter","followSymbolicLinks","throwErrorOnBrokenSymbolicLink","getTransformer","dot","matchBase","baseNameMatch","nobrace","braceExpansion","nocase","caseSensitiveMatch","noext","extglob","noglobstar","globstar","posix","strictSlashes","ethjsUnit","soliditySha3","randombytes","_flattenTypes","includeTuple","puts","types","param","components","substring","suffix","arrayBracket","hexToAscii","hex","isHexStrict","asciiToHex","getUnitValue","unit","unitMap","_fireError","emitter","optionalData","listeners","_jsonInterfaceMethodToString","inputs","randomHex","isBigNumber","isHex","sha3","sha3Raw","keccak256","soliditySha3Raw","encodePacked","isAddress","checkAddressChecksum","toChecksumAddress","addressHash","checksumAddress","toUpperCase","toHex","toBN","bytesToHex","hexToBytes","hexToNumberString","hexToNumber","toDecimal","numberToHex","fromDecimal","hexToUtf8","hexToString","toUtf8","stripHexPrefix","utf8ToHex","stringToHex","fromUtf8","toAscii","fromAscii","toWei","fromWei","padLeft","leftPad","padRight","rightPad","toTwosComplement","isBloom","isUserEthereumAddressInBloom","isContractAddressInBloom","isTopic","isTopicInBloom","isInBloom","compareBlockNumbers","bnA","bnB","Parser","HtmlRenderer","XmlRenderer","__importDefault","entities_json_1","legacy_json_1","xml_json_1","decode_codepoint_1","strictEntityRe","getStrictDecoder","getReplacer","sorter","secondChar","decode_json_1","fromCodePoint","codePoint","inverseXML","getInverseObj","xmlReplacer","getInverseReplacer","getASCIIEncoder","inverse","inverseHTML","htmlReplacer","single","multiple","reNonASCII","singleCharReplacer","getCodePoint","codePointAt","reEscapeChars","multiplier","formattedString","isHexPrefixed","stringArg","dividedToIntegerBy","numberToBN","utf8","ethereumBloomFilters","bytes","SHA3_NULL_S","returnValue","_Hash","bloom","ethereumAddress","contractAddress","topic","returnType","hasPrefix","Readable","BUFFER","TYPE","Blob","blobParts","isView","from","buf","ab","readable","_read","relativeStart","relativeEnd","span","slicedBuffer","blob","FetchError","systemError","captureStackTrace","defineProperties","writable","INTERNALS","PassThrough","Body","body","_ref$size","_ref$timeout","isURLSearchParams","isBlob","disturbed","consumeBody","_this4","alloc","accumBytes","abort","resTimeout","append","delete","getAll","arrayBuffer","p1","p2","bodyUsed","getBoundary","pipe","extractContentType","getTotalBytes","getLengthSync","_lengthRetrievers","hasKnownLength","ct","_this3","charset","convertBody","mixIn","desc","getOwnPropertyDescriptor","invalidTokenRegex","invalidHeaderCharRegex","validateName","validateValue","MAP","rawHeaders","raw","headerNames","headerName","pair","thisArg","getHeaders","_pairs$i","createHeadersIterator","kind","INTERNAL","target","HeadersIteratorPrototype","setPrototypeOf","getPrototypeOf","_INTERNAL","exportNodeCompatibleHeaders","__proto__","hostHeaderKey","INTERNALS$1","STATUS_CODES","contentType","statusText","counter","ok","redirected","INTERNALS$2","parse_url","format_url","streamDestructionSupported","isRequest","parsedURL","href","inputBody","signal","isAbortSignal","redirect","follow","compress","agent","AbortError","PassThrough$1","resolve_url","request","protocol","hostname","contentLengthValue","totalBytes","getNodeRequestOptions","send","response","aborted","abortAndFinalize","finalize","req","reqTimeout","removeEventListener","addEventListener","socket","createHeadersLenient","isRedirect","statusCode","location","locationURL","requestOpts","response_options","statusMessage","codings","zlibOptions","Z_SYNC_FLUSH","finishFlush","createGunzip","createBrotliDecompress","createInflate","createInflateRaw","writeToStream","cssKeywords","reverseKeywords","rgb","channels","labels","hsl","hsv","hwb","cmyk","xyz","lab","lch","keyword","ansi16","ansi256","hcg","apple","gray","model","rdif","gdif","bdif","diffc","reversed","currentClosestKeyword","currentClosestDistance","distance","t2","t3","t1","smin","lmin","vmin","sl","wh","bl","ratio","y2","z2","atan2","hr","saturation","ansi","color","mult","rem","colorString","integer","chroma","grayscale","hue","pure","mg","copySync","utimesMillis","atime","mtime","futimes","futimesErr","closeErr","utimesMillisSync","openSync","futimesSync","XML","HTML","HTMLStrict","Tokenizer_1","formTags","pTag","openImpliesClose","tr","th","td","li","h1","h2","h3","h4","h5","h6","button","datalist","textarea","option","optgroup","dd","dt","article","aside","blockquote","details","dl","fieldset","figcaption","figure","footer","form","header","main","nav","ol","pre","section","table","ul","rt","rp","tbody","tfoot","voidElements","foreignContextElements","htmlIntegrationElements","reNameEnd","cbs","_b","_c","tagname","attribname","attribvalue","foreignContext","lowerCaseTagNames","lowerCaseTags","lowerCaseAttributeNames","tokenizer","Tokenizer","updatePosition","initialOffset","sectionStart","getAbsoluteIndex","onopentagname","el","onopentagend","closeCurrentTag","pos","onselfclosingtag","recognizeSelfClosing","onattribname","onattribdata","onattribend","onattribute","getInstructionName","search","ondeclaration","name_1","name_2","oncdata","_f","recognizeCDATA","reset","parseComplete","pause","resume","parseChunk","whitespace","isASCIIAlpha","ifElseState","SUCCESS","FAILURE","_state","_index","consumeSpecialNameChar","NEXT_STATE","stateBeforeCdata1","stateBeforeCdata2","stateBeforeCdata3","stateBeforeCdata4","stateBeforeCdata5","stateBeforeScript1","stateBeforeScript2","stateBeforeScript3","stateBeforeScript4","stateAfterScript1","stateAfterScript2","stateAfterScript3","stateAfterScript4","stateBeforeStyle1","stateBeforeStyle2","stateBeforeStyle3","stateAfterStyle1","stateAfterStyle2","stateAfterStyle3","stateBeforeSpecialT","stateBeforeTitle1","stateBeforeTitle2","stateBeforeTitle3","stateAfterSpecialTEnd","stateAfterTitle1","stateAfterTitle2","stateAfterTitle3","stateBeforeEntity","stateBeforeNumericEntity","bufferOffset","baseState","special","ended","decodeEntities","finish","stateText","getSection","isTagStartChar","stateBeforeTagName","stateInTagName","emitToken","stateBeforeClosingTagName","stateInClosingTagName","stateAfterClosingTagName","stateBeforeAttributeName","stateInSelfClosingTag","stateInAttributeName","stateAfterAttributeName","stateBeforeAttributeValue","handleInAttributeValue","stateInAttributeValueDoubleQuotes","stateInAttributeValueSingleQuotes","stateInAttributeValueNoQuotes","stateBeforeDeclaration","stateInDeclaration","stateInProcessingInstruction","stateBeforeComment","stateInComment","stateInSpecialComment","stateAfterComment1","stateAfterComment2","stateBeforeCdata6","stateInCdata","stateAfterCdata1","stateAfterCdata2","stateBeforeSpecialS","stateBeforeSpecialSEnd","stateBeforeSpecialLast","stateAfterSpecialLast","sectionStartOffset","parseFixedEntity","entity","emitPartial","parseLegacyEntity","stateInNamedEntity","decodeNumericEntity","parsed","stateInNumericEntity","stateInHexEntity","cleanup","handleTrailingData","extendStatics","__extends","__","__assign","cloneNode","hasChildren","isDocument","isDirective","isComment","isText","isCDATA","DataNode","nodeTypes","_super","namespace","cloneChildren","clone_1","clone_2","clone_3","instruction","childs","__setModuleDefault","__importStar","parseFeed","FeedHandler","FeedItemMediaMedium","FeedItemMediaExpression","domhandler_1","DomUtils","Parser_1","feedRoot","getOneElement","isValidFeed","feed","addConditionally","getAttribute","link","updated","items","getElements","description","pubDate","media","getMediaElements","medium","isDefault","fileSize","expression","bitrate","framerate","samplingrate","duration","height","lang","tagName","getElementsByTagName","recurse","getText","what","findAll","existsOne","findOne","findOneChild","nodes_1","checked","_toArray","iter","_iterableToArray","Bottleneck","Job","LocalDatastore","Queues","RedisDatastore","States","Sync","storeInstanceOptions","storeOptions","_addToQueue","_validateOptions","instanceDefaults","_queues","_scheduled","_states","trackDoneStatus","_limiter","_submitLock","_registerLock","storeDefaults","connection","redisStoreDefaults","localStoreDefaults","unref","clients","clientId","__publish__","__disconnect__","priority","__queued__","__running__","__done__","jobStatus","statusJobs","statusCounts","weight","__check__","expiration","job","eventInfo","__free__","empty","error1","clearGlobalState","run","doRun","_clearGlobalState","_run","_free","doExecute","doExpire","capacity","schedule","getFirst","_next2","_randomIndex","__register__","success","reservoir","_drainOne","drained","newCapacity","_drainAll","shiftAll","doDrop","waitForExecuting","stopDefaults","at","finished","counts","dropWaitingJobs","dropErrorMessage","_dropAllQueued","NUM_PRIORITIES","_receive","_reject","enqueueErrorMessage","blocked","reachedHWM","shifted","strategy","__submit__","LEAK","shiftLastFrom","OVERFLOW_PRIORITY","OVERFLOW","doQueue","doReceive","_ref4","_splice$call2","_ref6","_splice$call4","jobDefaults","rejectOnDrop","promise","_args2","_args4","wrapped","withOptions","__updateSettings__","__currentReservoir__","incr","__incrementReservoir__","BLOCK","Group","Batcher","maxConcurrent","minTime","highWater","penalty","reservoirRefreshInterval","reservoirRefreshAmount","reservoirIncreaseInterval","reservoirIncreaseAmount","reservoirIncreaseMaximum","heartbeatInterval","clientTimeout","clearDatastore","DLList","decr","_first","_last","ref1","ref2","pauseStreams","streams","_readableState","streamsQueue","merging","doEnd","doPipeError","pipeError","objectMode","highWaterMark","mergedStream","addStream","mergeStream","nextTick","endStream","pipesCount","endEmitted","taskManager","async_1","stream_1","sync_1","FastGlob","assertPatternsInput","works","getWorks","_Provider","patterns","tasks","generate","provider","merge","generateTasks","isDynamicPattern","escapePath","toRegexRange","isValidValue","pad","maxLength","dash","padStart","toMaxLen","toRange","isNumbers","toRegex","capture","rangeError","RangeError","invalidRange","strictRanges","fillNumbers","descending","startString","endString","stepString","padded","maxLen","parts","negatives","positives","toSequence","fill","fillLetters","invalidStep","fsStat","fsWalk","reader_1","ReaderStream","super","_walkStream","walkStream","_stat","filepaths","_getFullEntryPath","_write","_enc","_getEntry","_getStat","_makeEntry","_fsStatSettings","walkSync","walk","directory","events_1","fsScandir","fastq","common","AsyncReader","_root","_scandir","_emitter","EventEmitter","_queue","_worker","_isFatalError","_isDestroyed","drain","setImmediate","_pushToQueue","killAndDrain","queueItem","_handleError","fsScandirSettings","_handleEntry","fullpath","_emitEntry","dirent","IS_SUPPORT_READDIR_WITH_FILE_TYPES","NODE_PROCESS_VERSION_PARTS","versions","MAJOR_VERSION","MINOR_VERSION","IS_MATCHED_BY_MAJOR","IS_MATCHED_BY_MAJOR_AND_MINOR","followSymbolicLink","createDirentFromStats","isEnoentCodeError","suppressErrors","funcTag","genTag","reFlags","cloneableTags","addMapEntry","addSetEntry","arrayReduce","initAccum","overArg","getPrototype","objectCreate","assignValue","baseClone","isDeep","isFull","initCloneArray","copyArray","isFunc","cloneBuffer","isPrototype","initCloneObject","copyObject","copySymbols","baseAssign","cloneFunc","cloneArrayBuffer","dataView","cloneDataView","typedArray","cloneTypedArray","cloneMap","regexp","lastIndex","cloneRegExp","cloneSet","initCloneByTag","arrayEach","subValue","newValue","nativeFloor","baseSortedIndex","retHighest","MAX_ARRAY_LENGTH","valIsNaN","valIsNull","valIsSymbol","valIsUndefined","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","setLow","baseSortedIndexBy","arrayIncludes","baseIsNaN","baseIndexOf","arrayIncludesWith","comparator","cacheHas","spreadableSymbol","isConcatSpreadable","baseDifference","isCommon","valuesLength","arrayMap","outer","valuesIndex","isFlattenable","differenceBy","otherArgs","baseRest","baseFlatten","depth","isStrict","payoutDistributionToCsv","csvIntegration","payoutDistributions","_unused_config","csvString","transferredGrain","fileName","arrayUnion","merge2","fastGlob","dirGlob","gitignore","FilterStream","UniqueStream","DEFAULT_FILTER","generateGlobTasks","taskOptions","checkCwdOption","globTasks","ignore","expandDirectories","getPattern","globDirs","getFilterSync","globToTask","glob","globs","getTasks","path_","Stats","newTask","filterStream","uniqueStream","hasMagic","ch","escapee","uffff","white","reviver","holder","gap","rep","escapable","meta","mind","negative1","getValueOfUnit","unitInput","unitValue","numberToString","toPrecision","weiInput","optionsInput","wei","baseLength","fraction","whole","commify","etherInput","ether","comps","parseHex","byteArray","byteCount","byteIndex","stringFromCharCode","ucs2decode","extra","checkScalarValue","createByte","encodeCodePoint","readContinuationByte","continuationByte","decodeSymbol","byte1","codePoints","byteString","ucs2encode","HEX_CHARS","KECCAK_PADDING","SHIFT","RC","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","b10","b11","b12","b13","b14","b15","b16","b17","b18","b19","b20","b21","b22","b23","b24","b25","b26","b27","b28","b29","b30","b31","b32","b33","b34","b35","b36","b37","b38","b39","b40","b41","b42","b43","b44","b45","b46","b47","b48","b49","keccak","blocks","blockCount","outputBlocks","lastByteIndex","update","Keccak","keccak512","keccak256s","keccak512s","utils_1","hash","bitpos","codePointToInt","toByteArray","addSlice","isByteArray","keccak_256","INPUT_ERROR","WINDOW","JS_SHA3_NO_WINDOW","WEB_WORKER","JS_SHA3_NO_NODE_JS","COMMON_JS","JS_SHA3_NO_COMMON_JS","AMD","ARRAY_BUFFER","JS_SHA3_NO_ARRAY_BUFFER","CSHAKE_PADDING","BITS","SHAKE_BITS","OUTPUT_TYPES","CSHAKE_BYTEPAD","JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW","createOutputMethod","outputType","createShakeOutputMethod","outputBits","createCshakeOutputMethod","createKmacOutputMethod","createOutputMethods","createMethod","algorithms","bytepad","Kmac","methodNames","algorithm","methodName","newMethodName","finalized","extraBytes","notString","encodeString","strs","paddingBytes","Uint32Array","digest","__webpack_amd_options__","_parseNumber","_solidityPack","arraySize","typesize","_parseTypeN","_processSolidityEncodePackedArgs","_parseTypeNArray","hexArgs","randomBytes","webpackEmptyContext","ansiStyles","stdout","stdoutColor","stderr","stderrColor","stringReplaceAll","stringEncaseCRLFWithFirstIndex","levelMapping","styles","ChalkClass","chalkFactory","chalk","colorLevel","applyOptions","arguments_","chalkTag","Chalk","Instance","styleName","style","builder","createBuilder","createStyler","_styler","_isEmpty","visible","usedModels","styler","bgColor","_generator","openAll","closeAll","applyStyle","lfIndex","strings","firstString","supportsColor","wrapAnsi16","wrapAnsi256","wrapAnsi16m","ansi2ansi","rgb2rgb","setLazyProperty","colorConvert","makeDynamicStyles","targetSpace","isBackground","sourceSpace","suite","codes","modifier","bold","dim","italic","underline","hidden","strikethrough","black","green","yellow","blue","magenta","cyan","blackBright","redBright","greenBright","yellowBright","blueBright","magentaBright","cyanBright","whiteBright","bgBlack","bgRed","bgGreen","bgYellow","bgBlue","bgMagenta","bgCyan","bgWhite","bgBlackBright","bgRedBright","bgGreenBright","bgYellowBright","bgBlueBright","bgMagentaBright","bgCyanBright","bgWhiteBright","bgGray","grey","bgGrey","groupName","conversions","route","fromModel","routes","toModel","wrappedFn","arg0","conversion","wrapRounded","wrapRaw","deriveBFS","models","buildGraph","adjacents","adjacent","to","wrapConversion","os","tty","hasFlag","forceColor","translateLevel","hasBasic","has256","has16m","haveStream","streamIsTTY","TERM","osRelease","release","CI_NAME","TEAMCITY_VERSION","COLORTERM","TERM_PROGRAM_VERSION","TERM_PROGRAM","FORCE_COLOR","isTTY","isatty","flag","argv","terminatorPosition","substringLength","postfix","gotCR","TEMPLATE_REGEX","STYLE_REGEX","STRING_REGEX","ESCAPE_REGEX","ESCAPES","bracket","parseArguments","chunks","character","parseStyle","buildStyle","enabled","layer","temporary","escapeCharacter","errMessage","payoutAddress","amount","constants","origCwd","GRACEFUL_FS_PLATFORM","er","chdir","lchmod","O_WRONLY","O_SYMLINK","fchmod","err2","lchmodSync","threw","fchmodSync","patchLchmod","lutimes","mt","er2","lutimesSync","patchLutimes","chown","chownFix","fchown","lchown","chmod","chmodFix","chownSync","chownFixSync","fchownSync","lchownSync","chmodSync","chmodFixSync","statFix","fstat","statFixSync","fstatSync","gid","rename","fs$rename","backoff","CB","stater","st","orig","chownErOk","getuid","fs$read","callback_","eagCounter","readSync","fs$readSync","Stream","paused","bufferSize","setEncoding","busy","copyDir","srcMode","mkdirSync","setDestMode","mkDirAndCopy","onDir","isFile","isCharacterDevice","isBlockDevice","unlinkSync","errorOnExist","mayCopyFile","onFile","isSymbolicLink","resolvedSrc","readlinkSync","resolvedDest","symlinkSync","copyLink","onLink","isSocket","isFIFO","copyFileSync","preserveTimestamps","fileIsNotWritable","makeFileWritable","updatedSrcStat","setDestTimestamps","handleTimestamps","readdirSync","srcItem","destItem","startCopy","copyDirItem","clobber","arch","warn","handleFilterAndCopy","checkPath","getMode","pth","checkParentDir","dirExists","handleFilter","onInclude","setDestTimestampsAndMode","handleTimestampsAndMode","copyDirItems","readlink","symlink","emptyDir","emptyDirSync","emptydirSync","emptydir","maxBusyTries","busyTries","strictEqual","rimraf_","fixWinEPERM","rmdir","er3","fixWinEPERMSync","rmdirSync","originalEr","errState","rmkids","rimrafSync","startTime","rmkidsSync","createFile","createFileSync","ensureFile","ensureFileSync","createLink","createLinkSync","ensureLink","ensureLinkSync","createSymlink","createSymlinkSync","ensureSymlink","ensureSymlinkSync","makeFile","srcpath","dstpath","makeLink","dstStat","linkSync","_mkdirs","_symlinkPaths","symlinkPaths","symlinkPathsSync","_symlinkType","symlinkType","symlinkTypeSync","_createSymlink","relative","toDst","toCwd","isAbsolute","dstdir","relativeToDst","jsonFile","outputJson","outputJsonSync","outputJSON","outputJSONSync","writeJSON","writeJson","writeJSONSync","writeJsonSync","readJSON","readJson","readJSONSync","readJsonSync","readFileSync","_fs","universalify","jsonfile","shouldThrow","throws","moveSync","renameSync","moveAcrossDevice","isParentRoot","doRename","move","destExists","InlineParser","reHtmlBlockOpen","reHtmlBlockClose","reThematicBreak","reMaybeSpecial","reNonSpace","reBulletListMarker","reOrderedListMarker","reATXHeadingMarker","reCodeFence","reClosingCodeFence","reSetextHeadingLine","reLineEnding","isSpaceOrTab","peek","ln","endsWithBlankLine","addLine","partiallyConsumedTab","charsToTab","column","tip","repeat","currentLine","addChild","canContain","lineNumber","column_number","newBlock","closeUnmatchedBlocks","allClosed","oldtip","lastMatchedContainer","continue","acceptsLines","subitem","block_quote","indented","nextNonspace","advanceNextNonspace","advanceOffset","markerOffset","heading","thematic_break","code_block","lastLineLength","newlinePos","firstLine","html_block","_htmlBlockType","paragraph","hasReferenceDefs","inlineParser","parseReference","refmap","blockStarts","fenceLength","blockType","list_data","item_data","nextc","spacesStartCol","spacesStartOffset","bulletChar","blank_item","spaces_after_marker","parseListMarker","columns","charsToAdvance","nextNonspaceColumn","findNextNonspace","cols","incorporateLine","lastChild","all_matched","doc","matchedLeaf","starts","startsLen","lastLineBlank","cont","above","processInlines","time","lines","timeEnd","encodeCache","exclude","keepEscaped","nextCode","defaultChars","getEncodeCache","encodeURIComponent","componentChars","getInverse","re_nonASCII","re_astralSymbols","astralReplacer","re_xmlChars","entityMap","legacyMap","xmlMap","decodeCodePoint","decodeMap","normalizeReference","ESCAPED_CHAR","rePunctuation","reLinkTitle","reLinkDestinationBraces","reEscapable","reEntityHere","reTicks","reTicksHere","reEllipses","reDash","reEmailAutolink","reAutolink","reSpnl","reWhitespaceChar","reUnicodeWhitespaceChar","reFinalSpace","reInitialSpace","reSpaceAtEndOfLine","reLinkLabel","reMain","subject","spnl","parseBackticks","ticks","matched","contents","afterOpenTicks","parseBackslash","subj","parseAutolink","parseHtmlTag","scanDelims","cc","char_before","char_after","cc_after","left_flanking","right_flanking","can_open","can_close","after_is_whitespace","after_is_punctuation","before_is_whitespace","before_is_punctuation","numdelims","startpos","handleDelim","smart","delimiters","origdelims","removeDelimiter","processEmphasis","stack_bottom","opener","closer","old_closer","opener_inl","closer_inl","tempstack","use_delims","opener_found","bottom","openers_bottom","odd_match","closercc","emph","literal","parseLinkTitle","title","parseLinkDestination","savepos","openparens","parseLinkLabel","parseOpenBracket","addBracket","parseBang","parseCloseBracket","is_image","reflabel","brackets","active","removeBracket","image","beforelabel","bracketAfter","destination","previousDelimiter","parseEntity","parseString","enCount","emCount","parseNewline","lastc","hardbreak","rawlabel","matchChars","beforetitle","atLineEnd","normlabel","parseInline","parseInlines","regex","$0","highSurrogate","lowSurrogate","MAX_SIZE","codeUnits","$defineProperty","reUnsafeProtocol","reSafeDataProtocol","potentiallyUnsafe","softbreak","disableTags","html_inline","safe","linebreak","strong","grandparent","listTight","info_words","listType","listStart","custom_inline","onEnter","onExit","custom_block","selfclosing","attrib","att","reXMLTag","indentLevel","selfClosing","nodetype","listDelimiter","delimword","RssHandler","DefaultHandler","createDomStream","parseDOM","parseDocument","elementCb","FeedHandler_1","getInnerHTML","getOuterHTML","dom_serializer_1","entities_1","foreignNames_1","unencodedElements","singleTag","cheerio","renderNode","renderComment","renderCdata","elementNames","foreignModeIntegrationPoints","foreignElements","attributes","attributeNames","emptyAttrs","formatAttributes","selfClosingTags","renderTag","renderText","prevElementSibling","nextElementSibling","getName","hasAttrib","getAttributeValue","getSiblings","getParent","getChildren","emptyArray","siblings","removeElement","prepend","replaceElement","replacement","currNext","getElementsByTagType","getElementById","testElement","querying_1","Checks","tag_name","tag_type","tag_contains","getAttribCheck","combineFuncs","compileTest","funcs","uniqueSort","compareDocumentPosition","removeSubsets","nodeA","nodeB","aParents","bParents","maxIdx","sharedParent","aSibling","bSibling","ancestor","num_priorities","_length","_lists","forEachShift","_sanitizePriority","_resolve","retryCount","sProperty","expected","_assertStatus","chained","passed","doDone","_onFailure","retryAfter","_nextRequest","_lastReservoirRefresh","_lastReservoirIncrease","_running","_done","_unblockTime","_startHeartbeat","setInterval","maximum","computeCapacity","_this$storeOptions","yieldLoop","_this5","_this6","_this7","_this$storeOptions2","_this8","_this9","conditionsCheck","_this10","_this11","queueLength","_this12","strategyIsBlock","isBlocked","computePenalty","_this13","originalId","capacityPriorityCounters","sharedConnection","runScript","prepareInitSettings","__addLimiter__","publish","priorityClient","rawCapacity","_data$split2","__removeLimiter__","all_args","__scriptArgs__","__scriptFn__","prepareObject","groupTimeout","convertBool","prepareArray","_ref5","_ref7","_e$message$split2","status1","_jobs","_this$_queue$shift","_tryToRun","limiterOptions","deleteKey","instances","_startAutoCleanup","limiter","deleted","__runCommand__","cursor","found","interval","__groupCheck__","_resetPromise","_lastFlush","_promise","rej","_timeout","maxSize","_flush","maxTime","convertPatternGroupToTask","convertPatternGroupsToTasks","groupPatternsByBaseDirectory","getNegativePatternsAsPositive","getPositivePatterns","convertPatternsToTasks","dynamic","positivePatternsGroup","getNegativePatterns","convertToPositivePattern","getBaseDirectory","convertToNegativePattern","positivePatterns","negativePatterns","staticPatterns","isStaticPattern","dynamicPatterns","staticTasks","dynamicTasks","splitWhen","groupIndex","DirentFromStats","removeLeadingDotSegment","makeAbsolute","unixify","UNESCAPED_GLOB_SYMBOLS_RE","secondCharactery","matchAny","convertPatternsToRe","makeRe","getPatternParts","expandBraceExpansion","expandPatternsWithBraceExpansion","isAffectDepthOfReadingPattern","endsWithSlashGlobStar","hasGlobStar","isPositivePattern","isNegativePattern","globParent","micromatch","picomatch","COMMON_GLOB_SYMBOLS_RE","REGEX_CHARACTER_CLASS_SYMBOLS_RE","REGEX_GROUP_SYMBOLS_RE","GLOB_EXTENSION_SYMBOLS_RE","BRACE_EXPANSIONS_SYMBOLS_RE","braces","expand","nodupes","flipBackslashes","scan","patternsRe","patternRe","isGlob","pathPosixDirname","isWin32","backslash","enclosure","globby","isExtglob","strictRegex","relaxedRegex","isEmptyString","keep","onResult","negatedExtglob","failglob","nonull","nullglob","matchKeys","braceExpand","compile","noempty","isOpen","isClose","relaxZeros","strictZeros","cacheKey","shorthand","isPadded","hasPadding","splitToPatterns","onlyNegative","filterPatterns","onlyPositive","intersected","collatePatterns","rangeToPattern","zipped","startDigit","stopDigit","toCharacterClass","tok","nines","countNines","stops","countZeros","splitToRanges","tokens","padZeros","toQuantifier","relax","clearCache","stash","enclose","rangeLimit","CHAR_BACKSLASH","CHAR_BACKTICK","SyntaxError","advance","keepQuotes","keepEscaping","CHAR_DOLLAR","returnState","fns","isState","compileRe","isIgnored","ignoreOpts","onMatch","returnObject","onIgnore","fastpaths","returnOutput","isPathSeparator","token","isPrefix","isGlobstar","scanToEnd","slashes","isBrace","isBracket","braceEscaped","backslashes","eos","nonegate","noparen","maxDepth","prevIndex","expandRange","ex","syntaxError","bos","PLATFORM_CHARS","EXTGLOB_CHARS","nodot","qmarkNoDot","star","bash","noextglob","consumed","backtrack","parens","quotes","extglobs","consume","increment","decrement","inner","extglobOpen","conditions","extglobClose","extglobStar","strictBrackets","nobracket","prevValue","literalBrackets","outputIndex","tokensIndex","brace","dots","comma","toks","prior","isStart","afterStar","slashDot","propagateCloseEventToSources","provider_1","ProviderAsync","_reader","_getRootDirectory","_getReaderOptions","static","callFailureCallback","callSuccessCallback","lstatError","statError","markSymbolicLink","_options","_getValue","createFileSystemAdapter","FILE_SYSTEM_ADAPTER","fsMethods","_storage","onError","onEntry","onEnd","readdirWithFileTypes","rpl","constants_1","withFileTypes","readdirError","dirents","makeRplTaskEntry","rplError","rplEntries","fsStatSettings","pending","isSync","queueMicrotask","entryPath","reusify","fastqueue","worker","Task","queueHead","queueTail","errorHandler","saturated","worked","idle","getQueue","kill","pushCb","unshiftCb","Constructor","_stream","isDestroyed","SyncReader","_handleQueue","_handleDirectory","_pushToStorage","partial_1","_micromatchOptions","_getMatcher","negativeRe","_getNegativePatternsRe","_filter","affectDepthOfReadingPatterns","_isSkippedByDeep","_isSkippedSymbolicLink","_isSkippedByPositivePatterns","_isSkippedByNegativePatterns","deep","_getEntryLevel","entryPathDepth","matcher_1","PartialMatcher","levels","complete","segments","sections","segment","_patterns","_fillStorage","_getPatternSegments","_splitSegmentsIntoSections","positiveRe","_isDuplicateEntry","_onlyFileFilter","_onlyDirectoryFilter","_isSkippedByAbsoluteNegativePatterns","isMatched","_isMatchToPatterns","_createIndexRecord","onlyFiles","onlyDirectories","absolute","_isNonFatalError","_transform","markDirectories","stream_2","ProviderStream","ProviderSync","ReaderSync","_walkSync","_statSync","DEFAULT_FILE_SYSTEM_ADAPTER","CPU_COUNT","cpus","_getFileSystemMethods","pathType","getExtensions","extensions","getPath","getGlob","extname","isDirectorySync","promisify","fsStatType","statsMethodName","filePath","isTypeSync","isSymlink","isFileSync","isSymlinkSync","gitIgnore","slash","DEFAULT_IGNORE","readFileP","parseGitIgnore","line","mapGitIgnorePatternTo","reduceIgnore","ignores","getIsIgnoredPredecate","ensureAbsolutePathForCwd","normalizeOptions","getFile","getFileSync","makeArray","REGEX_TEST_BLANK_LINE","REGEX_REPLACE_LEADING_EXCAPED_EXCLAMATION","REGEX_REPLACE_LEADING_EXCAPED_HASH","REGEX_SPLITALL_CRLF","REGEX_TEST_INVALID_PATH","KEY_IGNORE","REGEX_REGEXP_RANGE","REPLACERS","leadEscape","endEscape","cleanRangeBackSlash","sanitizeRange","regexCache","IgnoreRule","origin","createRule","ignorecase","makeRegex","throwError","originalPath","doThrow","isNotRelative","Ignore","_rules","_ignorecase","_initCache","_ignoreCache","_testCache","_added","checkPattern","rule","splitPattern","_addPattern","checkUnignored","ignored","unignored","slices","_t","_testOne","_test","createFilter","factory","returnFalse","isPathValid","IGNORE_TEST_WIN32","makePosix","REGIX_IS_WINDOWS_PATH_ABSOLUTE","isExtendedLengthPath","hasNonAscii","Transform","ObjectTransform","_pushed","toObject","fromObject","pushValue","parseOrThrow","fmap","failure","typename","boolean","null_","exactly","ts","maybeT","emptyArrayReplacer","orElse","parsers","errorFn","errors","spacer","oldKey","RenameFieldImpl","requiredFields","optionalFields","newKeysSeen","fields","fieldsets","inputFields","required","newKey","shape","tuple","ps","dict","valueParser","keyParser","rawKeys","rawKey","parsedKey","oldRawKey","rawValue","parsedValue","delimited","makeAddressModule","nonce","otherNonces","nonceWithSeparator","otherNoncesWithSeparators","outK","MapUtil","otherNonce","assertValid","assertValidParts","nullDelimited","fromParts","toParts","fromRaw","otherNonceWithSeparator","otherName","toCompat","compatInfo","fromCompat","expectedCompatInfo","handlers","expectedType","expectedVersion","wrappedParser","compatibleParser","wrapResult","parseResult","errorMessage","NodeAddress","EdgeAddress","COMPAT_INFO","Direction","IN","OUT","ANY","Graph","_modificationCount","_invariantsLastChecked","when","_cachedOrder","nodeOrder","edgeOrder","modificationCount","_nodes","_edges","_incidentEdges","_maybeCheckInvariants","_checkForComodification","since","_markModification","MAX_SAFE_INTEGER","_reference","inEdges","outEdges","_unreference","incidence","_getOrder","existingNode","deepEqual","strNode","nodeToString","strExisting","removeNode","hasNode","_nodesIterator","initialModificationCount","NullUtil","addEdge","edge","dst","existingEdge","timestampMs","strEdge","edgeToString","removeEdge","edges","strAddress","hasEdge","isDanglingEdge","showDangling","addressPrefix","srcPrefix","dstPrefix","_edgesIterator","neighbors","_neighbors","direction","adjacencies","adjacency","neighborNodeAddress","neighborNode","nodePrefix","edgePrefix","sortedNodeAddresses","nodeAddressToSortedIndex","indexedEdges","srcIndex","dstIndex","indexedNodes","rawJSON","compatJson","nodesJSON","edgesJSON","sortedNodeAddressesJSON","graphs","contractNodes","contractions","remap","replacements","contracted","old","addr","newEdge","checkInvariants","_checkInvariants","referencedNodesEncountered","inEdgesSeen","outEdgesSeen","incidentEntries","baseNodeAccessor","vs","expectedBase","timestamp","edgeToStrings","edgeToParts","addressParts","srcParts","dstParts","compareGraphs","firstGraph","secondGraph","nodeDiffs","edgeDiffs","graphsAreEqual","firstNode","secondNode","second","firstEdge","secondEdge","topicNodeType","pluralName","defaultWeight","postNodeType","userNodeType","likeNodeType","topicContainsPostEdgeType","forwardName","backwardName","forwards","backwards","topicHasLikedPostEdgeType","postRepliesEdgeType","authorsTopicEdgeType","authorsPostEdgeType","createsLikeEdgeType","likesEdgeType","referencesPostEdgeType","referencesTopicEdgeType","referencesUserEdgeType","declaration","edgeTypes","userTypes","topicAddress","serverUrl","postAddress","userAddress","username","likeAddress","like","postId","memberNodeType","messageNodeType","reactionNodeType","authorsMessageEdgeType","addsReactionEdgeType","reactsToEdgeType","mentionsEdgeType","propsEdgeType","channelTypeFromId","emojiToRef","refToEmoji","dedent","lineLengths","trimLeft","trimAmount","trimmed","SqliteMirrorRepository","db","guild","_db","_transaction","_initialize","queries","inTransaction","prepare","config","existingConfig","tables","sql","members","user","user_id","discriminator","bot","nick","roles","memberRoles","role","parentId","parent_id","messages","channel_id","channelId","authorId","author_id","nonUserAuthor","non_user_author","timestamp_ms","reactionEmoji","mentions","nthMessageFromTail","message_id","userId","Model","emoji","reactions","messageId","addChannel","addMessage","mention","addMention","addReaction","reaction","addMember","member","addMemberRole","edgeWeightParser","nodeWeights","edgeWeights","resolvers","nodeResolver","_unused_a","_unused_b","edgeResolver","weights","existing","Parse_0_2_0","serialize_0_2_0","fromJSON","compareWeights","firstWeights","secondWeights","nodeWeightDiffs","edgeWeightDiffs","nodeAddresses","edgeAddresses","weightsAreEqual","reactionWeight","reactingMember","propsChannels","channelParentId","roleMultipliedReactingMembers","emojiWeights","applyAveraging","_roleWeight","roleWeights","confidenceDampener","averagingMultiplier","channelWeight","channelWeights","_emojiWeight","matchingWeight","messageUrl","memberAddress","messageAddress","reactionAddress","memberNode","messageNode","channelName","partialMessage","authorsMessageEdge","author","reactionNode","msgUrl","reactionStr","addsReactionEdge","reactsToEdge","mentionsEdge","propsEdge","createGraph","repo","wg","emptyWeights","guildId","graphMessage","messageWeight","simplifyGraph","_createGraphFromMessages","memberMap","mentionedMember","findGraphMessages","NAME_PATTERN","nameFromString","COERCE_PATTERN","coerce","createIdentity","alias","pluginName","createIdentities","initiativeNodeType","_formatNodeEntryField","field","nodeEntryType","displayField","nodeEntryTypes","CONTRIBUTION","DEPENDENCY","REFERENCE","contributionEntryType","dependencyEntryType","referenceEntryType","dependsOnEdgeType","referencesEdgeType","contributesToEdgeType","contributesToEntryEdgeType","championsEdgeType","botSet","GITHUB_PREFIX","_githubAddress","REPO_TYPE","ISSUE_TYPE","PULL_TYPE","REVIEW_TYPE","COMMENT_TYPE","COMMIT_TYPE","USERLIKE_TYPE","USER_SUBTYPE","BOT_SUBTYPE","Prefix","issue","pull","review","comment","commit","userlike","reviewComment","issueComment","pullComment","loginAddress","fail","_unused_sc","_unused_gh","owner","pullNumber","subkind","subrest","issueNumber","reviewFragment","subtype","login","toRaw","GIT_PREFIX","_gitAddress","ReactionContent$Values","AUTHORS_TYPE","MERGED_AS_TYPE","HAS_PARENT_TYPE","REFERENCES_TYPE","REACTS_TYPE","CORRESPONDS_TO_COMMIT_TYPE","githubEdgeAddress","authors","mergedAs","references","hasParent","reacts","reactsThumbsUp","Reactions","THUMBS_UP","reactsHeart","HEART","reactsHooray","HOORAY","reactsRocket","ROCKET","correspondsToCommit","createEdge","GithubNode","githubCommit","gitCommit","GitNode","referrer","referent","reactionType","reactable","lengthEncode","lengthDecode","lengthString","allParts","multiLengthDecode","partses","authorParts","contentParts","pullParts","childParts","referrerParts","referentParts","rawReactionType","rest2","userParts","reactableParts","repoNodeType","issueNodeType","pullNodeType","reviewNodeType","commentNodeType","commitNodeType","botNodeType","authorsEdgeType","E","hasParentEdgeType","mergedAsEdgeType","reactsHeartEdgeType","reactsThumbsUpEdgeType","reactsHoorayEdgeType","reactsRocketEdgeType","correspondsToCommitEdgeType","ethAddressEntryType","JsonLog","_items","trimRight","_extractLogLines","nodeAddressForEthAddress","ethAddresses","parseAddress","ethAddressParser","truncateEthAddress","nodeTypeParser","G","edgeTypeParser","declarationParser","weightsForDeclaration","dec","Weights","_RE_UNCLEAN","isClean","randomUuidUnchecked","crypto","getRandomValues","msCrypto","nodeCrypto","__non_webpack_require__","base64Encode","fromString","base64Decode","delimitedUuidParser","identityIdParser","delimitedIdentityIdParser","IdentityTypes","USER","PROJECT","ORGANIZATION","BOT","IDENTITY_PREFIX","newIdentity","randomUuid","identityTypeParser","aliases","graphNode","identities","uuidParser","nameParser","aliasParser","protocolSymbolParser","evmChainParser","evmParser","chainId","tokenAddress","protocolParser","currencyParser","getCurrencyKey","currency","buildCurrency","defaultCurrencyConfig","decimals","currencyName","currencySuffix","decimalsToDisplay","integrationCurrency","integrationCurrencyParser","ZERO","DECIMAL_PRECISION","ONE","grain","integerDigits","numCommasToInsert","formatAndTrim","multiplyFloat","floatProduct","divideFloat","dividend","fromInteger","fromFloatString","precision","paddedDecimal","padEnd","toFloatString","fromApproximateFloat","toFloatRatio","numerator","denominator","splitBudget","budget","scores","totalScore","scoreRemaining","budgetRemaining","pieces","piece","xs","P","valueof","fromGrain","grainParser","numberOrFloatStringParser","balancedRawParser","policyType","numIntervalsLookback","balancedConfigParser","balancedPolicyParser","policy","immediateRawParser","immediateConfigParser","immediatePolicyParser","recentRawParser","discount","toDiscount","exclusions","recentConfigParser","recentPolicyParser","specialReceipts","recipient","specialRawParser","specialConfigParser","specialPolicyParser","allocationConfigParser","policyConfigParser","allocationPolicyParser","_validatePolicy","_validateAllocationBudget","amt","receipts","credGrainView","effectiveTimestamp","timeLimitedParticipants","withTimeScopeFromLookback","activeParticipants","shortTermCredPerIdentity","cred","amounts","immediateReceipts","participant","decayedCredPerIdentity","credPerInterval","recentReceipts","totalCred","targetGrainPerCred","grainEarned","floatUnderpayment","lookbackCred","grainAmounts","balancedReceipts","grainReceiptParser","allocationParser","Uuid","allocations","credTimestamp","Ledger","_ledgerEventLog","_nameToId","_lowercaseNames","_aliasAddressToIdentity","_accounts","_allocations","_distributions","_allocationsToDistributions","_grainIntegrationStatuses","accounts","account","_mutableAccount","nameAvailable","accountByAddress","identityId","accountByName","allocation","distribution","distributions","distributionByAllocationId","allocationId","distributionId","action","_createAndProcessEvent","_createIdentity","balance","paid","allocationHistory","payoutAddresses","mergedIdentityIds","mergeIdentities","_mergeIdentities","baseAccount","targetAccount","baseIdentity","targetIdentity","updatedAliases","transferAlias","innateAlias","updatedIdentity","credTimestampMs","renameIdentity","newName","_renameIdentity","existingIdentity","existingName","lowerCased","addAlias","_addAlias","activate","deactivate","_toggleActivation","distributeGrain","_distributeGrain","distributionParser","grainReceipt","_allocateGrain","_lastDistributionTimestamp","_shouldTrackGrainIntegration","transferGrain","_transferGrain","fromAccount","toAccount","changeIdentityType","newType","_changeIdentityType","setPayoutAddress","_setPayoutAddress","currencyResult","enableIntegrationTracking","disableIntegrationTracking","_enableGrainIntegrationTracking","_disableGrainIntegrationTracking","markDistributionExecuted","_markDistributionExecuted","trackedDistributions","isGrainIntegrationExecuted","eventLog","ledger","_processEvent","serialize","jsonLog","ledgerEventParser","fromEventLog","lastDistributionTimestamp","_processAction","ledgerTimestamp","_latestTimestamp","ledgerEvent","_getTimestamp","uuid","params","createIdentityParser","identityParser","renameIdentityParser","changeIdentityTypeParser","addAliasParser","mergeIdentitiesParser","toggleActivationParser","distributeGrainParser","setPayoutAddressParser","transferGrainParser","actionParser","identityProposalsParser","ensureIdentityExists","proposal","existingAccount","checkAvailability","withPluginDiscriminator","withNumericDiscriminator","_chooseIdentityName","graphJSON","weightsJSON","overrideWeights","overrides","encoder","decoder","TextEncoder","TextDecoder","importedTextDecoder","globalThis","importedTextEncoder","notFound","loadJson","storage","loadJsonWithDefault","def","extra_lbits","extra_dbits","extra_blbits","bl_order","static_ltree","static_dtree","D_CODES","_dist_code","_length_code","MAX_MATCH","base_length","base_dist","StaticTreeDesc","static_tree","extra_bits","extra_base","elems","max_length","has_stree","static_l_desc","static_d_desc","static_bl_desc","TreeDesc","dyn_tree","stat_desc","max_code","d_code","dist","put_short","pending_buf","send_bits","bi_valid","bi_buf","send_code","tree","bi_reverse","gen_codes","bl_count","next_code","MAX_BITS","init_block","LITERALS","dyn_ltree","dyn_dtree","bl_tree","END_BLOCK","opt_len","static_len","last_lit","bi_windup","smaller","_n2","_m2","pqdownheap","heap","heap_len","compress_block","ltree","dtree","lc","lx","d_buf","l_buf","build_tree","stree","heap_max","xbits","overflow","gen_bitlen","scan_tree","curlen","prevlen","nextlen","max_count","min_count","REP_3_6","REPZ_3_10","REPZ_11_138","send_tree","static_init_done","_tr_stored_block","stored_len","subarray","copy_block","trees","_tr_init","LENGTH_CODES","L_CODES","tr_static_init","l_desc","d_desc","bl_desc","_tr_flush_block","opt_lenb","static_lenb","max_blindex","strm","data_type","black_mask","detect_data_type","BL_CODES","build_bl_tree","lcodes","dcodes","blcodes","rank","send_all_trees","_tr_tally","lit_bufsize","_tr_align","STATIC_TREES","bi_flush","adler32_1","adler","s1","s2","crcTable","makeTable","crc32_1","crc","2","1","0","Z_NO_FLUSH","Z_PARTIAL_FLUSH","Z_FULL_FLUSH","Z_FINISH","Z_BLOCK","Z_TREES","Z_OK","Z_STREAM_END","Z_NEED_DICT","Z_ERRNO","Z_STREAM_ERROR","Z_DATA_ERROR","Z_MEM_ERROR","Z_BUF_ERROR","Z_NO_COMPRESSION","Z_BEST_SPEED","Z_BEST_COMPRESSION","Z_DEFAULT_COMPRESSION","Z_FILTERED","Z_HUFFMAN_ONLY","Z_RLE","Z_FIXED","Z_DEFAULT_STRATEGY","Z_BINARY","Z_TEXT","Z_UNKNOWN","Z_DEFLATED","_tr_init$1","_tr_stored_block$1","_tr_flush_block$1","_tr_tally$1","_tr_align$1","Z_FIXED$1","Z_UNKNOWN$1","errorCode","zero$1","HASH","hash_shift","hash_mask","flush_pending","avail_out","pending_out","next_out","total_out","flush_block_only","block_start","strstart","put_byte","putShortMSB","read_buf","avail_in","next_in","total_in","longest_match","cur_match","chain_length","max_chain_length","best_len","prev_length","nice_match","w_size","_win","wmask","w_mask","strend","scan_end1","scan_end","good_match","lookahead","match_start","fill_window","_w_size","more","window_size","hash_size","insert","ins_h","deflate_fast","hash_head","bflush","match_length","max_lazy_match","MIN_MATCH$1","deflate_slow","max_insert","prev_match","match_available","Config","good_length","max_lazy","nice_length","max_chain","configuration_table","max_block_size","pending_buf_size","max_start","DeflateState","gzhead","gzindex","last_flush","w_bits","hash_bits","Uint16Array","HEAP_SIZE$1","MAX_BITS$1","deflateResetKeep","deflateReset","deflateInit2","windowBits","memLevel","deflate_1","deflateInit","deflateSetHeader","deflate","beg","old_flush","hcrc","level_flags","bstate","deflate_huff","deflate_rle","deflateEnd","deflateSetDictionary","dictionary","dictLength","tmpDict","avail","deflateInfo","_has","sources","STR_APPLY_UIA_OK","_utf8len","m_pos","str_len","buf_len","utf16buf","c_len","buf2binstring","zstream","Z_NO_FLUSH$1","Z_FULL_FLUSH$1","Z_FINISH$1","Z_OK$1","Z_STREAM_END$1","Z_DEFAULT_COMPRESSION$1","Z_DEFAULT_STRATEGY$1","Z_DEFLATED$1","Deflate","chunkSize","opt","gzip","_dict_set","deflate$1","deflator","flush_mode","_flush_mode","onData","deflate_1$1","deflateRaw","inffast","_in","_out","dmax","wsize","whave","wnext","s_window","hold","lcode","dcode","lmask","dmask","here","op","from_source","lencode","distcode","lenbits","distbits","dolen","dodist","sane","lbase","lext","dbase","dext","inftrees","lens","lens_index","table_index","work","sym","curr","used","huff","base_index","MAXBITS","offs","here_bits","here_op","here_val","extra_index","Z_FINISH$2","Z_BLOCK$1","Z_OK$2","Z_STREAM_END$2","Z_STREAM_ERROR$1","Z_DATA_ERROR$1","Z_BUF_ERROR$1","Z_DEFLATED$2","zswap32","InflateState","havedict","wbits","ncode","nlen","ndist","have","lendyn","distdyn","back","was","inflateResetKeep","Int32Array","inflateReset","inflateReset2","inflateInit2","lenfix","distfix","virgin","fixedtables","updatewindow","inflate_1","inflateInit","inflate","put","last_bits","last_op","last_val","hbuf","order","inf_leave","xflags","extra_len","inflateEnd","inflateGetHeader","inflateSetDictionary","dictid","inflateInfo","gzheader","toString$1","Z_NO_FLUSH$2","Z_FINISH$3","Z_OK$3","Z_STREAM_END$3","Z_NEED_DICT$1","Z_STREAM_ERROR$2","Z_DATA_ERROR$2","Z_MEM_ERROR$1","Inflate","inflate$1","inflator","last_avail_out","next_out_utf8","utf8str","inflate_1$1","inflateRaw","ungzip","Deflate$1","deflate$2","deflateRaw$1","gzip$1","Inflate$1","inflate$2","inflateRaw$1","ungzip$1","deflate_1$2","inflate_1$2","ZipStorage","baseStorage","_baseStorage","WritableZipStorage","NetworkStorage","_base","resource","URL","getPluginOwner","getPluginName","contributionNodeType","participantNodeType","participatedInEdgeType","FileNames","GRAPH","GRAPH_ZIP","DECLARATION","IDENTITIES","configParser","graphUrl","declarationUrl","identityProposalsUrl","ExternalPlugin","pluginId","defaultConfigDirectory","configDirectory","pathJoin","cacheDirectory","getConfig","getStorage","defaultDeclaration","_unused_ctx","_unused_reporter","_unused_rd","zipResult","weightedGraphFromJSON","Combo","declarationWeights","mergeWeights","addressFromUrl","adjacencySource","createConnections","edgeWeight","syntheticLoopWeight","totalOutWeight","processConnection","priorOutWeight","connections","normalization","newWeight","createNodeAddressMarkovChain","ntc","inNeighbors","createOrderedSparseMarkovChain","addressToIndex","theseNeighbors","neighbor","Float64Array","nodeAddressMarkovChainToOrderedSparseMarkovChain","newOrder","newIndices","oldIndices","newChain","oldNeighbors","newNeighbors","oldIndex","normalizeNeighbors","normalize","distributionToNodeDistribution","pi","probability","uniformDistribution","computeDelta","pi0","pi1","maxDelta","sparseMarkovChainFromTransitionMatrix","matrix","row","rowsum","sparseMarkovChainActionInto","seed","inDegree","sparseMarkovChainAction","findStationaryDistribution","scratch","nIterations","maxIterations","verbose","convergenceDelta","convergenceThreshold","findStationaryDistributionGenerator","_unused_reject","yieldAfterMs","tick","EMPTY_ENTRY_SYMBOL","BaseTrie","addressModule","tmpEntry","getLast","NodeTrie","EdgeTrie","nodeWeightEvaluator","nodeTrie","pluckArgs","plucks","sortByCompare","valA","valB","t0","utcWeekday","newInterval","floori","offseti","date","d0","d1","setTime","setUTCDate","getUTCDate","getUTCDay","setUTCHours","durationDay","utcSunday","utcMonday","utcTuesday","utcWednesday","utcThursday","utcFriday","utcSaturday","intervalSequence","intervals","lastEndTime","startTimeMs","endTimeMs","intervalSequenceParser","partitionGraph","sortedNodes","sortedEdges","graphIntervals","nodeIndex","edgeIndex","nodeTimestamps","edgeTimestamps","allTimestamps","startMs","endMs","utcWeek","boundaries","weekIntervals","personalAttributionsParser","fromParticipantId","recipients","toParticipantId","proportions","proportionValue","IndexedPersonalAttributions","personalAttributions","epochStarts","pa","ar","proportion","validatePersonalAttributions","_getIndexFromList","_validateIndex","personalAttribution","recipientsIndex","attributionRecipient","epochStart","_getSumProportionValue","toPersonalAttributions","recipientsForEpochAndParticipant","_getProportionValue","getProportionValue","relevantProportion","getSumProportionValue","attributionRecipients","proportionValues","mint","MarkovEdgeAddress","markovEdgeAddress","edgeAddress","markovEdgeAddressFromMarkovEdge","GADGET_NODE_PREFIX","seedGadget","accumulatorGadget","prefixLength","epochGadget","epochPrefixLength","uuidFromString","makeSeedGadget","seedIsSrc","markovEdge","transitionProbability","targetAddress","GADGET_EDGE_PREFIX","radiationGadget","seedMintGadget","payoutGadget","webbingEdgePrefix","forwardWebbingGadget","thisStart","lastStart","thisEpoch","lastEpoch","backwardWebbingGadget","personalAttributionGadget","participantParser","parametersParser","beta","gammaForward","gammaBackward","indexedEdgeParser","MarkovProcessGraph","participants","lastEpochEndMs","parameters","mintTransitionProbabilities","radiationTransitionProbabilities","indexedPersonalAttributions","_epochStarts","_lastEpochEndMs","_participants","_parameters","_radiationTransitionProbabilties","_mintTransitionProbabilties","_nodeIndex","_nodeOrder","_edgeIndex","virtualizedMarkovEdgeAddresses","_indexedPersonalAttributions","weightedGraph","_scoringAddressToId","_scoringAddresses","_nodeOutMasses","epochTransitionRemainder","valid","mae","recordTransitionProbability","pr","nwe","lastEpochStart","webbingAddress","totalNodeWeight","positiveNodeWeights","rewriteEpochNode","edgeTimestampMs","epochEndIndex","epochTimestampMs","unidirectionalGraphEdges","ewe","edgeTrie","edgeWeightEvaluator","srcNodes","graphEdge","datum","totalOutPr","outEdge","nodeAddress","virtualizedNodeAddresses","virtualizedNode","realAndVirtualNodes","es","markovNode","virtualizedMarkovEdge","toMarkovChain","nodeOutMasses","outMass","discrepancy","indexedMints","sumOfPersonalAttributions","personalAttributionAddress","jsonParser","markovNodeParser","CredGraph","markovProcessGraph","_mpg","_scores","_cred","_credFlow","credFlow","epochs","payoutMarkovEdge","mpg","markovProcessGraphJSONParser","credGrainViewParser","grainEarnedPerInterval","CredGrainView","_intervals","_credTotals","_grainTotals","allocationIndex","validateForGrainAllocation","totalCredPerInterval","withTimeScope","TimeScopedCredGrainView","intervalsBeforeEffective","totalGrainPerInterval","credGraph","graphParticipants","graphParticipant","_calculateGrainEarnedPerInterval","originalIntervals","inclusiveStartIndex","exclusiveEndIndex","computeDistribution","policies","validatedPolicy","computeAllocation","applyDistributions","currentTimestamp","allowMultipleDistributionsPerInterval","credIntervals","maxSimultaneousDistributions","completeIntervals","undistributedIntervals","sequence","_chooseDistributionIntervals","fromCredGraphAndLedger","allocationPolicies","computeCredAccounts","grainAccounts","userlikeInfo","noIntervals","aliasAddresses","accountAddresses","unclaimedAliases","credAccount","_computeCredAccounts","diffLedger","diffBy","LedgerManager","_path","_ledger","initLogs","_getLocalChanges","remoteLedger","_getRemoteChanges","preWriteReloadRes","reloadLedger","postWriteReloadRes","localChanges","_getLedger","remoteChanges","encodedLedger","stringToRepoId","validOwner","validRepo","makeRepoId","repoIdToString","alphabetByEncoding","alphabetByValue","toBase64","bitClusterCount","GithubStorage","_token","apiToken","_repoId","_branch","branch","Authorization","query","variables","ENDPOINT","blobSha","repository","oid","contentBlobRes","_getRepoEndpoint","contentDataBase64","rawContent","WritableGithubStorage","targetBranchResult","baseCommit","sha","createBlobResult","createBlobSha","uploadBlobResult","base_tree","uploadContentBlobTree","commitContentResult","parents","email","newCommit","toISO","timestampLike","validateTimestampMs","toISOString","fromISO","timestampISO","asNumber","timestampISOParser","mintPeriodParser","dependencyConfigParser","periods","autoActivateOnIdentityCreation","autoInjectStartingPeriodWeight","computeBonusMinting","mintIntervals","totalMint","_computeMintIntervals","bonusIntervals","_bonusIntervals","nextIndex","BONUS_NODE_PREFIX","bonusNodeAddress","bonusNode","BONUS_EDGE_PREFIX","BONUS_EDGE_WEIGHT","bonusEdgeAddress","bonusEdge","intervalLengthParser","applyBudget","addresses","_anyCommonPrefixes","intervalLength","reweighting","newWeights","existingWeight","_reweightGraph","evaluator","reweightingsForEachBudget","inSortedOrder","budgetValue","_findCurrentBudgetValue","filteredAddresses","normalizer","_computeWeightNormalizer","_reweightingForEntry","_computeReweighting","currentPeriod","period","aws","totalWeight","aw","markovProcessGraphPagerank","defaultOptions","osmc","distributionResult","matchingScore","proportionParser","personalAttributionsConfigParser","fromParticipantName","toParticipantName","startDate","decimalProportion","credrank","pluginGraphs","weightOverrides","dependenciesWithIds","dependencies","dep","depId","contractedGraph","identityContractions","pluginsBudget","bonusMints","createBonusGraph","toBonusPolicy","updatedPersonalAttributionsConfig","markovProcessGraphParameters","pagerankOptions","defaultParameters","new","computeCredrank","SilentTaskReporter","_activeTasks","_entries","taskId","activeTasks","CascadingReferenceDetector","scope","taskReporter","rds","plugin","directoryContext","plugins","rd","referenceDetector","_hackyIdentityNameReferenceDetector","identityProposal","usernameToAddress","potentialUsername","prepped","getDistributionBalances","distributionBalances","buildDistributionIndexes","currencyId","payoutDistributionMap","payoutAddressToId","balances","grainConfig","executeGrainIntegrationsFromGrainInput","grainInput","currencyDetails","grainIntegration","integration","ledgerResult","processDistributions","sink","accountingEnabled","recipientId","distributionCredTimestamp","executeGrainIntegration","function","nextLedger","batchIterator","batchSize","itemsCompletedInCurrentBatch","hasNext","batchesCompleted","numBatchesCompleted","_typeof","_classCallCheck","_defineProperties","descriptor","_createClass","protoProps","staticProps","_inherits","subClass","superClass","_setPrototypeOf","_getPrototypeOf","_possibleConstructorReturn","ReferenceError","_assertThisInitialized","_toConsumableArray","arr2","_arrayWithoutHoles","_nonIterableSpread","commonjsGlobal","Symbol$1","lodash_get","isFirst","getProp$1","fastJoin$1","flattenReducer$1","JSON2CSVBase_1","JSON2CSVBase","preprocessOpts","processedOpts","transforms","eol","escapedQuote","includeEmptyRows","withBOM","fieldInfo","label","processValue","rows","processedRow","processCell","valueType","excelStrings","fastJoin$2","flattenReducer$2","JSON2CSVParser_1","_JSON2CSVBase","JSON2CSVParser","preprocessFieldsInfo","processedData","preprocessData","getHeader","processData","preprocessRow","processRow","LEFT_BRACE","RIGHT_BRACE","LEFT_BRACKET","RIGHT_BRACKET","COLON","COMMA","TRUE","FALSE","NULL","STRING","NUMBER","START","STOP","TRUE1","TRUE2","TRUE3","FALSE1","FALSE2","FALSE3","FALSE4","NULL1","NULL2","NULL3","NUMBER1","NUMBER3","STRING1","STRING2","STRING3","STRING4","STRING5","STRING6","VALUE","KEY","OBJECT","ARRAY","BACK_SLASH","FORWARD_SLASH","BACKSPACE","FORM_FEED","NEWLINE","CARRIAGE_RETURN","TAB","tState","stringBuffer","stringBufferOffset","unicode","bytes_remaining","bytes_in_sequence","temp_buffs","toknam","charError","appendStringChar","appendStringBuf","onToken","intVal","parseError","onValue","jsonparse","reformatNodeAddress","partsToInclude","reformatEdgeAddress","getNodeDescription","toDateString","generatorToCountingIterator","generator","countingGenerator","iterationsCompleted","analysis","neo4j","featureFlags","batchedNodes","formattedNodes","serializeAsCsv","nodesCsvGenerator","batchedEdges","formattedEdges","edgesCsvGenerator","computeNeo4jData","getPluginDeclaration","mapping","githubDeclaration","discourseDeclaration","discordDeclaration","initiativesDeclaration","ethereumDeclaration","rawPeriodParser","rawParser","pluginIdParser","upgradeRawPeriod","bundledPlugins","assertPath","trailingSeparator","allowAboveRoot","lastSegmentLength","lastSlash","lastSlashIndex","normalizeString","isPosixPathSeparator","OriginStorage","allowedDeclarations","bundledGrainIntegrations","integrationKey","sinkIdentity","bundledGrainIntegrationParser","getNetworkReadInstance","ReadInstance","getRawGithubReadInstance","organization","getOriginReadInstance","DEPENDENCIES_PATH","WEIGHT_OVERRIDES_PATH","BUDGET_PATH","GRAIN_PATH","CURRENCY_PATH","PERSONAL_ATTRIBUTIONS_PATH","RAW_INSTANCE_CONFIG_PATH","LEDGER_PATH","CREDGRAPH_PATH","CREDGRAINVIEW_PATH","GRAPHS_DIRECTORY","GRAPHS_PATH","_zipStorage","readPluginGraphs","readLedger","readWeightOverrides","readDependencies","readPluginsBudget","readPersonalAttributions","readCredGraph","readGrainConfig","readCurrencyDetails","outputPath","createPluginGraphDirectory","credGraphPath","credGraphParser","ledgerPath","loadFileWithDefault","grainConfigPath","grainConfigParser","currencyDetailsPath","currencyConfigParser","pluginsConfigPath","rawConfigParser","pluginNames","readRawInstanceConfig","outputDir","createPluginDirectory","weightsPath","weightsParser","dependenciesPath","dependenciesParser","budgetPath","pluginBudgetParser","pluginIdFromString","pluginBudgetUpgrader","idParts","pluginOwner","pathComponents","graphApi","grainApi","readInstance","core","markovChain","graphToMarkovChain","ledgerUtils","manager","ConstructorPlugin","_weightedGraph","emptyWeightedGraph","_identityProposals","identityProposals","_declaration","github","githubEdges","githubNodes","ethereum","ethereumUtils","discourse","discourseAddress","discord","discordUtils","initiatives","coerceNameFromString","mkdirx","faithful","unfaithful","actualTypenames","actualTypenamesObject","schema","assertKind","elementTypename","validKinds","isFidelity","elementType","validateFidelity","fidelity","representation","fieldname","annotation","eggName","eggs","egg","clause","clauses","clauseType","scalar","enum_","valuesObject","clausesMap","primitive","nonNull","nullable","nested","build","selections","fragment","typeCondition","newAlias","fragmentSpread","fragmentName","inlineFragment","enumLiteral","inlineLayout","atom","formatList","subformatter","ls","formatObject","definition","queryDefinition","fragmentDefinition","paramsPart","parameter","selectionsPart","selection","aliasPart","argsPart","typeConditionPart","variableValue","literalValue","enumValue","listValue","objectValue","Mirror","fullOptions","blacklistedIds","guessTypename","_schema","_schemaInfo","objectTypes","unionTypes","nestedFields","primitiveFieldNames","linkFieldNames","connectionFieldNames","nestedFieldNames","nestedFieldData","primitives","eggFieldname","eggField","_buildSchemaInfo","_blacklistedIds","_guessTypename","transaction","existingBlob","_createUpdate","updateTimestamp","lastInsertRowid","registerObject","_nontransactionallyRegisterObject","guessMismatchMessage","existingTypename","_makeSingleUpdateFunction","addPrimitive","addLink","addConnection","objectType","parentFieldname","childFieldname","_nontransactionallyRegisterNodeFieldResult","__typename","_findOutdated","typenames","objects","timeEpochMillisThreshold","neverUpdated","endCursor","_isUpToDate","queryPlan","_queryFromPlan","fetchTypenamesFor","typenamesLimit","typenameBatches","nodesOfTypeLimit","objectsByType","nodesLimit","paginatedObjectsByType","allIds","ids","connectionsByObject","connectionLimit","objectId","objectTypename","Queries","_FIELD_PREFIXES","TYPENAMES","_queryTypename","OWN_DATA","_queryOwnData","NODE_CONNECTIONS","_queryConnection","connectionPageSize","_updateData","updateId","queryResult","_nontransactionallyUpdateData","topLevelKey","updateRecord","_nontransactionallyUpdateTypenames","_nontransactionallyUpdateOwnData","_nontransactionallyUpdateConnection","_logRequest","queryParameters","requestTimestamp","_logResponse","rowid","jsonResponse","saveResponse","responseTimestamp","_logRequestUpdateId","saveUpdateId","postQuery","querySelections","requestRowId","_updateStep","_queryShallow","typenameQuery","_getEndCursor","initialized","connectionArguments","_updateConnection","connectionId","totalCount","hasNextPage","pageInfo","addEntry","childId","childField","_updateOwnData","checkTypename","hasTypename","setLastUpdate","parameterNameFor","topLevelField","nestedField","nestFieldname","updatePrimitive","jsonValue","topLevelNested","eggFields","updateLink","childFields","_updateTypenames","extract","rootId","neverUpdatedEntry","missingData","allObjects","getObjects","iterate","getPrimitives","nestName","getLinks","getConnectionData","hasContents","stmt","reader","changes","Schema","DateTime","GitObjectID","GitTimestamp","Int","URI","PullRequestReviewState","enum","ReactionContent","Repository","issues","pullRequests","defaultBranchRef","createdAt","Issue","comments","PullRequest","mergeCommit","additions","deletions","reviews","baseRefName","IssueComment","PullRequestReview","PullRequestReviewComment","Reaction","Ref","GitObject","Commit","authoredDate","Tree","Actor","RepositoryOwner","User","Bot","Organization","cacheIdForRepoId","repoId","realIo","sleepMs","ms","rollJitter","fetchGithubRepoFromCache","resolvedId","resolveRepositoryGraphqlId","database","fetchGithubRepo","postQueryWithToken","mirror","ttlSeconds","GITHUB_ID_TYPENAME_PATTERN","tryGithubFetch","postBody","fetchOptions","errorDisposition","nominalRefreshTime","dateString","rateLimit","resetAt","quotaRefreshAt","refreshTime","delayMs","minDelayMs","maxDelayMs","newDelayMs","_resolveRefreshTime","until","refreshError","retryGithubFetch","retryResult","attempt","fullPolicy","initialDelayMs","backoffRatio","jitterRatio","maxRetries","maxWaits","nextRetryDelayMs","retries","waits","outcome","fmt","toFixed","errAny","textBlocks","htmlDepth","reOpenCodeTag","reOpenTag","reCloseTag","firstChild","deformat","firstTextNode","coalesceText","parseReferences","parseReferencesFromRawString","textBlock","findNumericReferences","findRepoNumericReferences","findGithubUrlReferences","findUsernameReferences","findCommitReferences","findAllMatches","refType","pairedWithPattern","basicPattern","pairedWithRefs","basicRefs","basicRefIndexToRemove","hashReferences","urlsAndHashes","idxToRemove","urlReferences","repoUrl","reviewUrlToId","RelationalView","_repos","_issues","_pulls","_comments","_commits","_reviews","_userlikes","_mapReferences","_mapReferencedBy","addRepository","_addRepo","_addReferences","compressByRemovingBody","post","compressedPost","Repo","Pull","Review","Userlike","repos","pulls","commits","userlikes","referencedBy","rv","expectAllNonNull","_addIssue","_addPull","_addCommitHistory","_addCommit","_addComment","_addNullableAuthor","_addReaction","commitStack","originalAddress","rawAddress","_addReview","issueCommentUrlToId","pullCommentUrlToId","reviewCommentUrlToId","authorAddresses","urlReferenceMap","refToAddress","referentEntities","textContentEntities","srcAddress","refAddress","_addReference","_addExtraAuthor","srcRaw","referencesForSrc","dstRaw","referencedByForDst","extraAuthor","existingAuthor","_entry","_Entity","view","_view","assertExists","_referencedBy","getAuthors","_references","shortHash","headline","GraphCreator","addData","entities","childEntities","addHasParent","authored","authoredEntities","addAuthors","commitTimestamp","gitCommitAddress","reactableEntities","MappedReferenceDetector","GithubReferenceDetector","repoIds","chooseType","DiskStorage","_basePath","validPath","_checkPathPrefix","fullPath","loadConfig","dirContext","CacheProviderImpl","_dirContext","Database","getTokenFromEnv","rawToken","hexCode","validateToken","GithubPlugin","reporter","repoString","repositories","mergeWeightedGraph","creator","pluginDefaultWeights","rvs","views","referenceDetectorFromRelationalViews","htmlparser2","linksToReferences","links","topicRegex","postRegex","userRegex","decoded","decodeURI","topicId","postIndex","topicHasLikedPostEdge","serializedWeightsConfigParser","defaultCategoryWeight","defaultTagWeight","categoryWeights","tagWeights","weightsConfigParser","either","likeWeight","category","tags","trustLevel","DEFAULT_TRUST_LEVEL_TO_WEIGHT","_trustLevelWeight","_categoryWeight","tagId","_weightFromTags","_createGraphData","users","NE","topicIdToCategory","topicIdToTags","topics","categoryId","hasAuthor","authorUsername","findPostInTopic","postIdToDescription","posts","topicById","topicTitle","indexWithinTopic","_manualLinks","cookedHtml","httpRegex","parseLinks","cooked","reference","_referenceEdge","_createReferenceEdges","postReplies","replyToPostIndex","basePostId","topicContains","postIdToLikeWeight","likes","postDescription","createsLike","findUser","postById","topicHasLikedPosts","_graphFromData","referredPostId","toAddResult","syncHeads","DEFINITION_CHECK_KEY","definitionCheckMs","definition_check","topicBumpMs","max_topic_bump","category_id","bumpedMs","bumped_ms","author_username","idToTags","topic_id","trust_level","index_within_topic","reply_to_post_index","post_id","bumpDefinitionTopicCheck","addLike","addUserIfNotExists","replaceTopicTransaction","addTopic","addPost","deleteUnexpectedPosts","bumpedMsForTopic","addOrReplaceUser","addTag","optionsParserFields","recheckCategoryDefinitionsAfterMs","optionsShapeParser","sortTopicByBumpedMs","fetcher","_repo","_fetcher","_serverUrl","_updateTopicsV2","_updateLikes","lastLocalTopicBumpMs","lastDefinitionCheckMs","shouldCheckDefinitions","bumpedTopics","topicsBumpedSince","topicBumpsById","existingTopics","definitionTopicIds","categoryDefinitionTopicIds","topicLoadQueue","tid","topicWithPosts","mergedTopic","doneWithUser","possiblePageSize","upToDate","likeActions","likesByUser","serializedParser","mirrorOptions","Fetcher","fetchImplementation","minTimeMs","unlimitedFetch","_fetchImplementation","fullUrl","tries","_fetch","endpoint","_fetchWithRetryOn520","Accept","topicIdRE","urls","categoriesWithSubcategories","failIfMissing","failForNotOk","categories","rootCategories","category_list","cat","topic_url","subcategory_ids","rootCatId","subResponse","subCategories","posts_count","postCount","post_stream","parsePost","created_at","created_by","page","resNext","subPosts","parseUser","targetUsername","user_actions","parseLike","sinceMs","lastUnpinnedTimestamp","morePages","topic_list","topicList","per_page","jsonTopic","parseLatestTopic","pinned","bumped_at","post_number","reply_to_post_number","target_username","DiscourseReferenceDetector","guessUserType","DiscoursePlugin","reactionWeightConfig","roleWeightConfig","channelWeightConfig","includeNsfwChannels","defaultReactionWeights","defaultRoleWeights","defaultChannelWeights","fetcherDefaults","apiUrl","requestOptions","currentTime","restartDate","waitTime","toLocaleString","_checkRateLimit","rateLimitRemaining","rateLimitReset","_wait","_fetchJson","permissions","nsfw","doneLoading","allMembers","newMembers","system","webhook_id","matchAll","allReactingUsers","emojiRef","newReactingUsers","_api","validateGuildId","addMembers","addTextChannels","addMessages","guilds","messageLimit","loadStart","DiscordPlugin","configs","mergeGraphs","combinedWeights","_titleSlug","normalizeEdgeSpec","spec","defaultTimestampMs","duplicates","duplicateKeys","encountered","findDuplicates","_findDuplicatesByKey","dupeList","_validateEdgeSpec","timestampIso","Timestamp","contributors","normalizeNodeEntry","addressFromId","upgradeFrom010","contributions","initiativeFileURL","initiativeFilePrefix","remoteUrl","initiativeFileId","subType","requiredId","createId","URLParser","_validateUrl","TimestampParser","CommonFields","incomplete","completed","NodeEntryParser","EdgeSpecParser","Parse_020","champions","Parse_010","loadDirectory","localPath","absPath","_validatePath","validatedDir","fileNames","_findFiles","initiativeFile","partialInitiativeFile","initiative","_convertToInitiatives","sortedFileNames","initiativeParser","_readFiles","refMap","_createReferenceMap","initiativeAddress","initiativeNode","nodeFromEntry","addressForNodeEntry","initiativeWeight","edgeFactory","fromInitiative","iAddr","depedencyEdge","referenceEdge","contributionEdge","championEdge","getDirectoryFromContext","InitiativesPlugin","_loadDirectory","WeightedGraph","urlHandler","edgeSpecHandler","entryNode","contributor","createWeightedGraph","EthereumPlugin","ethJsonParser","loadEthJson","getPlugin","INSTANCE_CONFIG_PATH","ACCOUNTS_PATH","NEO4J_DIRECTORY","GRAIN_INTEGRATION_DIRECTORY","cloneDeep","LocalInstance","baseDirectory","_writableStorage","_baseDirectory","_writableZipStorage","instanceConfig","readInstanceConfig","pluginDirectoryContext","graphOutput","shouldZip","writeLedger","writePluginGraph","credrankOutput","writeCredGraph","writeCredGrainView","writeDependenciesConfig","writePersonalAttributionsConfig","analysisOutput","writeCredAccounts","writeNeo4jOutput","credDateString","grainIntegrationPath","pc","cacheDir","configDir","cgJson","serializedGraph","weightedGraphToJSON","dependenciesConfig","credAccounts","accountsPath","neo4jOutput","writeFromIterator"],"mappings":"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AAO,IAAO,IAAO,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAO,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAI,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAI,IAAS,IAAO,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,IAAS,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,KAAe,IAAO,KAAK,IAAS,KAAU,IAAS,KAAU,IAAS,KAAU,IAAS,MAAqB,IAAS,MAAqB,IAAS,KAAe,IAAS,KAAU,IAAS,KAAU,IAAS,KAAU,IAAS,KAAU,IAAS,KAAU,IAAS,KAAK,IAAS,KAAe,IAAS,MAAqB,IAAS,MAAqB,IAAS,MAAqB,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,IAAS,KAAe,I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","file":"api.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 247);\n","module.exports = function deepFreeze (o) {\n  Object.freeze(o);\n\n  Object.getOwnPropertyNames(o).forEach(function (prop) {\n    if (o.hasOwnProperty(prop)\n    && o[prop] !== null\n    && (typeof o[prop] === \"object\" || typeof o[prop] === \"function\")\n    && !Object.isFrozen(o[prop])) {\n      deepFreeze(o[prop]);\n    }\n  });\n  \n  return o;\n};\n","module.exports = require(\"path\");","var json = typeof JSON !== 'undefined' ? JSON : require('jsonify');\n\nmodule.exports = function (obj, opts) {\n    if (!opts) opts = {};\n    if (typeof opts === 'function') opts = { cmp: opts };\n    var space = opts.space || '';\n    if (typeof space === 'number') space = Array(space+1).join(' ');\n    var cycles = (typeof opts.cycles === 'boolean') ? opts.cycles : false;\n    var replacer = opts.replacer || function(key, value) { return value; };\n\n    var cmp = opts.cmp && (function (f) {\n        return function (node) {\n            return function (a, b) {\n                var aobj = { key: a, value: node[a] };\n                var bobj = { key: b, value: node[b] };\n                return f(aobj, bobj);\n            };\n        };\n    })(opts.cmp);\n\n    var seen = [];\n    return (function stringify (parent, key, node, level) {\n        var indent = space ? ('\\n' + new Array(level + 1).join(space)) : '';\n        var colonSeparator = space ? ': ' : ':';\n\n        if (node && node.toJSON && typeof node.toJSON === 'function') {\n            node = node.toJSON();\n        }\n\n        node = replacer.call(parent, key, node);\n\n        if (node === undefined) {\n            return;\n        }\n        if (typeof node !== 'object' || node === null) {\n            return json.stringify(node);\n        }\n        if (isArray(node)) {\n            var out = [];\n            for (var i = 0; i < node.length; i++) {\n                var item = stringify(node, i, node[i], level+1) || json.stringify(null);\n                out.push(indent + space + item);\n            }\n            return '[' + out.join(',') + indent + ']';\n        }\n        else {\n            if (seen.indexOf(node) !== -1) {\n                if (cycles) return json.stringify('__cycle__');\n                throw new TypeError('Converting circular structure to JSON');\n            }\n            else seen.push(node);\n\n            var keys = objectKeys(node).sort(cmp && cmp(node));\n            var out = [];\n            for (var i = 0; i < keys.length; i++) {\n                var key = keys[i];\n                var value = stringify(node, key, node[key], level+1);\n\n                if(!value) continue;\n\n                var keyValue = json.stringify(key)\n                    + colonSeparator\n                    + value;\n                ;\n                out.push(indent + space + keyValue);\n            }\n            seen.splice(seen.indexOf(node), 1);\n            return '{' + out.join(',') + indent + '}';\n        }\n    })({ '': obj }, '', obj, 0);\n};\n\nvar isArray = Array.isArray || function (x) {\n    return {}.toString.call(x) === '[object Array]';\n};\n\nvar objectKeys = Object.keys || function (obj) {\n    var has = Object.prototype.hasOwnProperty || function () { return true };\n    var keys = [];\n    for (var key in obj) {\n        if (has.call(obj, key)) keys.push(key);\n    }\n    return keys;\n};\n","var bigInt = (function (undefined) {\r\n    \"use strict\";\r\n\r\n    var BASE = 1e7,\r\n        LOG_BASE = 7,\r\n        MAX_INT = 9007199254740992,\r\n        MAX_INT_ARR = smallToArray(MAX_INT),\r\n        DEFAULT_ALPHABET = \"0123456789abcdefghijklmnopqrstuvwxyz\";\r\n\r\n    var supportsNativeBigInt = typeof BigInt === \"function\";\r\n\r\n    function Integer(v, radix, alphabet, caseSensitive) {\r\n        if (typeof v === \"undefined\") return Integer[0];\r\n        if (typeof radix !== \"undefined\") return +radix === 10 && !alphabet ? parseValue(v) : parseBase(v, radix, alphabet, caseSensitive);\r\n        return parseValue(v);\r\n    }\r\n\r\n    function BigInteger(value, sign) {\r\n        this.value = value;\r\n        this.sign = sign;\r\n        this.isSmall = false;\r\n    }\r\n    BigInteger.prototype = Object.create(Integer.prototype);\r\n\r\n    function SmallInteger(value) {\r\n        this.value = value;\r\n        this.sign = value < 0;\r\n        this.isSmall = true;\r\n    }\r\n    SmallInteger.prototype = Object.create(Integer.prototype);\r\n\r\n    function NativeBigInt(value) {\r\n        this.value = value;\r\n    }\r\n    NativeBigInt.prototype = Object.create(Integer.prototype);\r\n\r\n    function isPrecise(n) {\r\n        return -MAX_INT < n && n < MAX_INT;\r\n    }\r\n\r\n    function smallToArray(n) { // For performance reasons doesn't reference BASE, need to change this function if BASE changes\r\n        if (n < 1e7)\r\n            return [n];\r\n        if (n < 1e14)\r\n            return [n % 1e7, Math.floor(n / 1e7)];\r\n        return [n % 1e7, Math.floor(n / 1e7) % 1e7, Math.floor(n / 1e14)];\r\n    }\r\n\r\n    function arrayToSmall(arr) { // If BASE changes this function may need to change\r\n        trim(arr);\r\n        var length = arr.length;\r\n        if (length < 4 && compareAbs(arr, MAX_INT_ARR) < 0) {\r\n            switch (length) {\r\n                case 0: return 0;\r\n                case 1: return arr[0];\r\n                case 2: return arr[0] + arr[1] * BASE;\r\n                default: return arr[0] + (arr[1] + arr[2] * BASE) * BASE;\r\n            }\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    function trim(v) {\r\n        var i = v.length;\r\n        while (v[--i] === 0);\r\n        v.length = i + 1;\r\n    }\r\n\r\n    function createArray(length) { // function shamelessly stolen from Yaffle's library https://github.com/Yaffle/BigInteger\r\n        var x = new Array(length);\r\n        var i = -1;\r\n        while (++i < length) {\r\n            x[i] = 0;\r\n        }\r\n        return x;\r\n    }\r\n\r\n    function truncate(n) {\r\n        if (n > 0) return Math.floor(n);\r\n        return Math.ceil(n);\r\n    }\r\n\r\n    function add(a, b) { // assumes a and b are arrays with a.length >= b.length\r\n        var l_a = a.length,\r\n            l_b = b.length,\r\n            r = new Array(l_a),\r\n            carry = 0,\r\n            base = BASE,\r\n            sum, i;\r\n        for (i = 0; i < l_b; i++) {\r\n            sum = a[i] + b[i] + carry;\r\n            carry = sum >= base ? 1 : 0;\r\n            r[i] = sum - carry * base;\r\n        }\r\n        while (i < l_a) {\r\n            sum = a[i] + carry;\r\n            carry = sum === base ? 1 : 0;\r\n            r[i++] = sum - carry * base;\r\n        }\r\n        if (carry > 0) r.push(carry);\r\n        return r;\r\n    }\r\n\r\n    function addAny(a, b) {\r\n        if (a.length >= b.length) return add(a, b);\r\n        return add(b, a);\r\n    }\r\n\r\n    function addSmall(a, carry) { // assumes a is array, carry is number with 0 <= carry < MAX_INT\r\n        var l = a.length,\r\n            r = new Array(l),\r\n            base = BASE,\r\n            sum, i;\r\n        for (i = 0; i < l; i++) {\r\n            sum = a[i] - base + carry;\r\n            carry = Math.floor(sum / base);\r\n            r[i] = sum - carry * base;\r\n            carry += 1;\r\n        }\r\n        while (carry > 0) {\r\n            r[i++] = carry % base;\r\n            carry = Math.floor(carry / base);\r\n        }\r\n        return r;\r\n    }\r\n\r\n    BigInteger.prototype.add = function (v) {\r\n        var n = parseValue(v);\r\n        if (this.sign !== n.sign) {\r\n            return this.subtract(n.negate());\r\n        }\r\n        var a = this.value, b = n.value;\r\n        if (n.isSmall) {\r\n            return new BigInteger(addSmall(a, Math.abs(b)), this.sign);\r\n        }\r\n        return new BigInteger(addAny(a, b), this.sign);\r\n    };\r\n    BigInteger.prototype.plus = BigInteger.prototype.add;\r\n\r\n    SmallInteger.prototype.add = function (v) {\r\n        var n = parseValue(v);\r\n        var a = this.value;\r\n        if (a < 0 !== n.sign) {\r\n            return this.subtract(n.negate());\r\n        }\r\n        var b = n.value;\r\n        if (n.isSmall) {\r\n            if (isPrecise(a + b)) return new SmallInteger(a + b);\r\n            b = smallToArray(Math.abs(b));\r\n        }\r\n        return new BigInteger(addSmall(b, Math.abs(a)), a < 0);\r\n    };\r\n    SmallInteger.prototype.plus = SmallInteger.prototype.add;\r\n\r\n    NativeBigInt.prototype.add = function (v) {\r\n        return new NativeBigInt(this.value + parseValue(v).value);\r\n    }\r\n    NativeBigInt.prototype.plus = NativeBigInt.prototype.add;\r\n\r\n    function subtract(a, b) { // assumes a and b are arrays with a >= b\r\n        var a_l = a.length,\r\n            b_l = b.length,\r\n            r = new Array(a_l),\r\n            borrow = 0,\r\n            base = BASE,\r\n            i, difference;\r\n        for (i = 0; i < b_l; i++) {\r\n            difference = a[i] - borrow - b[i];\r\n            if (difference < 0) {\r\n                difference += base;\r\n                borrow = 1;\r\n            } else borrow = 0;\r\n            r[i] = difference;\r\n        }\r\n        for (i = b_l; i < a_l; i++) {\r\n            difference = a[i] - borrow;\r\n            if (difference < 0) difference += base;\r\n            else {\r\n                r[i++] = difference;\r\n                break;\r\n            }\r\n            r[i] = difference;\r\n        }\r\n        for (; i < a_l; i++) {\r\n            r[i] = a[i];\r\n        }\r\n        trim(r);\r\n        return r;\r\n    }\r\n\r\n    function subtractAny(a, b, sign) {\r\n        var value;\r\n        if (compareAbs(a, b) >= 0) {\r\n            value = subtract(a, b);\r\n        } else {\r\n            value = subtract(b, a);\r\n            sign = !sign;\r\n        }\r\n        value = arrayToSmall(value);\r\n        if (typeof value === \"number\") {\r\n            if (sign) value = -value;\r\n            return new SmallInteger(value);\r\n        }\r\n        return new BigInteger(value, sign);\r\n    }\r\n\r\n    function subtractSmall(a, b, sign) { // assumes a is array, b is number with 0 <= b < MAX_INT\r\n        var l = a.length,\r\n            r = new Array(l),\r\n            carry = -b,\r\n            base = BASE,\r\n            i, difference;\r\n        for (i = 0; i < l; i++) {\r\n            difference = a[i] + carry;\r\n            carry = Math.floor(difference / base);\r\n            difference %= base;\r\n            r[i] = difference < 0 ? difference + base : difference;\r\n        }\r\n        r = arrayToSmall(r);\r\n        if (typeof r === \"number\") {\r\n            if (sign) r = -r;\r\n            return new SmallInteger(r);\r\n        } return new BigInteger(r, sign);\r\n    }\r\n\r\n    BigInteger.prototype.subtract = function (v) {\r\n        var n = parseValue(v);\r\n        if (this.sign !== n.sign) {\r\n            return this.add(n.negate());\r\n        }\r\n        var a = this.value, b = n.value;\r\n        if (n.isSmall)\r\n            return subtractSmall(a, Math.abs(b), this.sign);\r\n        return subtractAny(a, b, this.sign);\r\n    };\r\n    BigInteger.prototype.minus = BigInteger.prototype.subtract;\r\n\r\n    SmallInteger.prototype.subtract = function (v) {\r\n        var n = parseValue(v);\r\n        var a = this.value;\r\n        if (a < 0 !== n.sign) {\r\n            return this.add(n.negate());\r\n        }\r\n        var b = n.value;\r\n        if (n.isSmall) {\r\n            return new SmallInteger(a - b);\r\n        }\r\n        return subtractSmall(b, Math.abs(a), a >= 0);\r\n    };\r\n    SmallInteger.prototype.minus = SmallInteger.prototype.subtract;\r\n\r\n    NativeBigInt.prototype.subtract = function (v) {\r\n        return new NativeBigInt(this.value - parseValue(v).value);\r\n    }\r\n    NativeBigInt.prototype.minus = NativeBigInt.prototype.subtract;\r\n\r\n    BigInteger.prototype.negate = function () {\r\n        return new BigInteger(this.value, !this.sign);\r\n    };\r\n    SmallInteger.prototype.negate = function () {\r\n        var sign = this.sign;\r\n        var small = new SmallInteger(-this.value);\r\n        small.sign = !sign;\r\n        return small;\r\n    };\r\n    NativeBigInt.prototype.negate = function () {\r\n        return new NativeBigInt(-this.value);\r\n    }\r\n\r\n    BigInteger.prototype.abs = function () {\r\n        return new BigInteger(this.value, false);\r\n    };\r\n    SmallInteger.prototype.abs = function () {\r\n        return new SmallInteger(Math.abs(this.value));\r\n    };\r\n    NativeBigInt.prototype.abs = function () {\r\n        return new NativeBigInt(this.value >= 0 ? this.value : -this.value);\r\n    }\r\n\r\n\r\n    function multiplyLong(a, b) {\r\n        var a_l = a.length,\r\n            b_l = b.length,\r\n            l = a_l + b_l,\r\n            r = createArray(l),\r\n            base = BASE,\r\n            product, carry, i, a_i, b_j;\r\n        for (i = 0; i < a_l; ++i) {\r\n            a_i = a[i];\r\n            for (var j = 0; j < b_l; ++j) {\r\n                b_j = b[j];\r\n                product = a_i * b_j + r[i + j];\r\n                carry = Math.floor(product / base);\r\n                r[i + j] = product - carry * base;\r\n                r[i + j + 1] += carry;\r\n            }\r\n        }\r\n        trim(r);\r\n        return r;\r\n    }\r\n\r\n    function multiplySmall(a, b) { // assumes a is array, b is number with |b| < BASE\r\n        var l = a.length,\r\n            r = new Array(l),\r\n            base = BASE,\r\n            carry = 0,\r\n            product, i;\r\n        for (i = 0; i < l; i++) {\r\n            product = a[i] * b + carry;\r\n            carry = Math.floor(product / base);\r\n            r[i] = product - carry * base;\r\n        }\r\n        while (carry > 0) {\r\n            r[i++] = carry % base;\r\n            carry = Math.floor(carry / base);\r\n        }\r\n        return r;\r\n    }\r\n\r\n    function shiftLeft(x, n) {\r\n        var r = [];\r\n        while (n-- > 0) r.push(0);\r\n        return r.concat(x);\r\n    }\r\n\r\n    function multiplyKaratsuba(x, y) {\r\n        var n = Math.max(x.length, y.length);\r\n\r\n        if (n <= 30) return multiplyLong(x, y);\r\n        n = Math.ceil(n / 2);\r\n\r\n        var b = x.slice(n),\r\n            a = x.slice(0, n),\r\n            d = y.slice(n),\r\n            c = y.slice(0, n);\r\n\r\n        var ac = multiplyKaratsuba(a, c),\r\n            bd = multiplyKaratsuba(b, d),\r\n            abcd = multiplyKaratsuba(addAny(a, b), addAny(c, d));\r\n\r\n        var product = addAny(addAny(ac, shiftLeft(subtract(subtract(abcd, ac), bd), n)), shiftLeft(bd, 2 * n));\r\n        trim(product);\r\n        return product;\r\n    }\r\n\r\n    // The following function is derived from a surface fit of a graph plotting the performance difference\r\n    // between long multiplication and karatsuba multiplication versus the lengths of the two arrays.\r\n    function useKaratsuba(l1, l2) {\r\n        return -0.012 * l1 - 0.012 * l2 + 0.000015 * l1 * l2 > 0;\r\n    }\r\n\r\n    BigInteger.prototype.multiply = function (v) {\r\n        var n = parseValue(v),\r\n            a = this.value, b = n.value,\r\n            sign = this.sign !== n.sign,\r\n            abs;\r\n        if (n.isSmall) {\r\n            if (b === 0) return Integer[0];\r\n            if (b === 1) return this;\r\n            if (b === -1) return this.negate();\r\n            abs = Math.abs(b);\r\n            if (abs < BASE) {\r\n                return new BigInteger(multiplySmall(a, abs), sign);\r\n            }\r\n            b = smallToArray(abs);\r\n        }\r\n        if (useKaratsuba(a.length, b.length)) // Karatsuba is only faster for certain array sizes\r\n            return new BigInteger(multiplyKaratsuba(a, b), sign);\r\n        return new BigInteger(multiplyLong(a, b), sign);\r\n    };\r\n\r\n    BigInteger.prototype.times = BigInteger.prototype.multiply;\r\n\r\n    function multiplySmallAndArray(a, b, sign) { // a >= 0\r\n        if (a < BASE) {\r\n            return new BigInteger(multiplySmall(b, a), sign);\r\n        }\r\n        return new BigInteger(multiplyLong(b, smallToArray(a)), sign);\r\n    }\r\n    SmallInteger.prototype._multiplyBySmall = function (a) {\r\n        if (isPrecise(a.value * this.value)) {\r\n            return new SmallInteger(a.value * this.value);\r\n        }\r\n        return multiplySmallAndArray(Math.abs(a.value), smallToArray(Math.abs(this.value)), this.sign !== a.sign);\r\n    };\r\n    BigInteger.prototype._multiplyBySmall = function (a) {\r\n        if (a.value === 0) return Integer[0];\r\n        if (a.value === 1) return this;\r\n        if (a.value === -1) return this.negate();\r\n        return multiplySmallAndArray(Math.abs(a.value), this.value, this.sign !== a.sign);\r\n    };\r\n    SmallInteger.prototype.multiply = function (v) {\r\n        return parseValue(v)._multiplyBySmall(this);\r\n    };\r\n    SmallInteger.prototype.times = SmallInteger.prototype.multiply;\r\n\r\n    NativeBigInt.prototype.multiply = function (v) {\r\n        return new NativeBigInt(this.value * parseValue(v).value);\r\n    }\r\n    NativeBigInt.prototype.times = NativeBigInt.prototype.multiply;\r\n\r\n    function square(a) {\r\n        //console.assert(2 * BASE * BASE < MAX_INT);\r\n        var l = a.length,\r\n            r = createArray(l + l),\r\n            base = BASE,\r\n            product, carry, i, a_i, a_j;\r\n        for (i = 0; i < l; i++) {\r\n            a_i = a[i];\r\n            carry = 0 - a_i * a_i;\r\n            for (var j = i; j < l; j++) {\r\n                a_j = a[j];\r\n                product = 2 * (a_i * a_j) + r[i + j] + carry;\r\n                carry = Math.floor(product / base);\r\n                r[i + j] = product - carry * base;\r\n            }\r\n            r[i + l] = carry;\r\n        }\r\n        trim(r);\r\n        return r;\r\n    }\r\n\r\n    BigInteger.prototype.square = function () {\r\n        return new BigInteger(square(this.value), false);\r\n    };\r\n\r\n    SmallInteger.prototype.square = function () {\r\n        var value = this.value * this.value;\r\n        if (isPrecise(value)) return new SmallInteger(value);\r\n        return new BigInteger(square(smallToArray(Math.abs(this.value))), false);\r\n    };\r\n\r\n    NativeBigInt.prototype.square = function (v) {\r\n        return new NativeBigInt(this.value * this.value);\r\n    }\r\n\r\n    function divMod1(a, b) { // Left over from previous version. Performs faster than divMod2 on smaller input sizes.\r\n        var a_l = a.length,\r\n            b_l = b.length,\r\n            base = BASE,\r\n            result = createArray(b.length),\r\n            divisorMostSignificantDigit = b[b_l - 1],\r\n            // normalization\r\n            lambda = Math.ceil(base / (2 * divisorMostSignificantDigit)),\r\n            remainder = multiplySmall(a, lambda),\r\n            divisor = multiplySmall(b, lambda),\r\n            quotientDigit, shift, carry, borrow, i, l, q;\r\n        if (remainder.length <= a_l) remainder.push(0);\r\n        divisor.push(0);\r\n        divisorMostSignificantDigit = divisor[b_l - 1];\r\n        for (shift = a_l - b_l; shift >= 0; shift--) {\r\n            quotientDigit = base - 1;\r\n            if (remainder[shift + b_l] !== divisorMostSignificantDigit) {\r\n                quotientDigit = Math.floor((remainder[shift + b_l] * base + remainder[shift + b_l - 1]) / divisorMostSignificantDigit);\r\n            }\r\n            // quotientDigit <= base - 1\r\n            carry = 0;\r\n            borrow = 0;\r\n            l = divisor.length;\r\n            for (i = 0; i < l; i++) {\r\n                carry += quotientDigit * divisor[i];\r\n                q = Math.floor(carry / base);\r\n                borrow += remainder[shift + i] - (carry - q * base);\r\n                carry = q;\r\n                if (borrow < 0) {\r\n                    remainder[shift + i] = borrow + base;\r\n                    borrow = -1;\r\n                } else {\r\n                    remainder[shift + i] = borrow;\r\n                    borrow = 0;\r\n                }\r\n            }\r\n            while (borrow !== 0) {\r\n                quotientDigit -= 1;\r\n                carry = 0;\r\n                for (i = 0; i < l; i++) {\r\n                    carry += remainder[shift + i] - base + divisor[i];\r\n                    if (carry < 0) {\r\n                        remainder[shift + i] = carry + base;\r\n                        carry = 0;\r\n                    } else {\r\n                        remainder[shift + i] = carry;\r\n                        carry = 1;\r\n                    }\r\n                }\r\n                borrow += carry;\r\n            }\r\n            result[shift] = quotientDigit;\r\n        }\r\n        // denormalization\r\n        remainder = divModSmall(remainder, lambda)[0];\r\n        return [arrayToSmall(result), arrayToSmall(remainder)];\r\n    }\r\n\r\n    function divMod2(a, b) { // Implementation idea shamelessly stolen from Silent Matt's library http://silentmatt.com/biginteger/\r\n        // Performs faster than divMod1 on larger input sizes.\r\n        var a_l = a.length,\r\n            b_l = b.length,\r\n            result = [],\r\n            part = [],\r\n            base = BASE,\r\n            guess, xlen, highx, highy, check;\r\n        while (a_l) {\r\n            part.unshift(a[--a_l]);\r\n            trim(part);\r\n            if (compareAbs(part, b) < 0) {\r\n                result.push(0);\r\n                continue;\r\n            }\r\n            xlen = part.length;\r\n            highx = part[xlen - 1] * base + part[xlen - 2];\r\n            highy = b[b_l - 1] * base + b[b_l - 2];\r\n            if (xlen > b_l) {\r\n                highx = (highx + 1) * base;\r\n            }\r\n            guess = Math.ceil(highx / highy);\r\n            do {\r\n                check = multiplySmall(b, guess);\r\n                if (compareAbs(check, part) <= 0) break;\r\n                guess--;\r\n            } while (guess);\r\n            result.push(guess);\r\n            part = subtract(part, check);\r\n        }\r\n        result.reverse();\r\n        return [arrayToSmall(result), arrayToSmall(part)];\r\n    }\r\n\r\n    function divModSmall(value, lambda) {\r\n        var length = value.length,\r\n            quotient = createArray(length),\r\n            base = BASE,\r\n            i, q, remainder, divisor;\r\n        remainder = 0;\r\n        for (i = length - 1; i >= 0; --i) {\r\n            divisor = remainder * base + value[i];\r\n            q = truncate(divisor / lambda);\r\n            remainder = divisor - q * lambda;\r\n            quotient[i] = q | 0;\r\n        }\r\n        return [quotient, remainder | 0];\r\n    }\r\n\r\n    function divModAny(self, v) {\r\n        var value, n = parseValue(v);\r\n        if (supportsNativeBigInt) {\r\n            return [new NativeBigInt(self.value / n.value), new NativeBigInt(self.value % n.value)];\r\n        }\r\n        var a = self.value, b = n.value;\r\n        var quotient;\r\n        if (b === 0) throw new Error(\"Cannot divide by zero\");\r\n        if (self.isSmall) {\r\n            if (n.isSmall) {\r\n                return [new SmallInteger(truncate(a / b)), new SmallInteger(a % b)];\r\n            }\r\n            return [Integer[0], self];\r\n        }\r\n        if (n.isSmall) {\r\n            if (b === 1) return [self, Integer[0]];\r\n            if (b == -1) return [self.negate(), Integer[0]];\r\n            var abs = Math.abs(b);\r\n            if (abs < BASE) {\r\n                value = divModSmall(a, abs);\r\n                quotient = arrayToSmall(value[0]);\r\n                var remainder = value[1];\r\n                if (self.sign) remainder = -remainder;\r\n                if (typeof quotient === \"number\") {\r\n                    if (self.sign !== n.sign) quotient = -quotient;\r\n                    return [new SmallInteger(quotient), new SmallInteger(remainder)];\r\n                }\r\n                return [new BigInteger(quotient, self.sign !== n.sign), new SmallInteger(remainder)];\r\n            }\r\n            b = smallToArray(abs);\r\n        }\r\n        var comparison = compareAbs(a, b);\r\n        if (comparison === -1) return [Integer[0], self];\r\n        if (comparison === 0) return [Integer[self.sign === n.sign ? 1 : -1], Integer[0]];\r\n\r\n        // divMod1 is faster on smaller input sizes\r\n        if (a.length + b.length <= 200)\r\n            value = divMod1(a, b);\r\n        else value = divMod2(a, b);\r\n\r\n        quotient = value[0];\r\n        var qSign = self.sign !== n.sign,\r\n            mod = value[1],\r\n            mSign = self.sign;\r\n        if (typeof quotient === \"number\") {\r\n            if (qSign) quotient = -quotient;\r\n            quotient = new SmallInteger(quotient);\r\n        } else quotient = new BigInteger(quotient, qSign);\r\n        if (typeof mod === \"number\") {\r\n            if (mSign) mod = -mod;\r\n            mod = new SmallInteger(mod);\r\n        } else mod = new BigInteger(mod, mSign);\r\n        return [quotient, mod];\r\n    }\r\n\r\n    BigInteger.prototype.divmod = function (v) {\r\n        var result = divModAny(this, v);\r\n        return {\r\n            quotient: result[0],\r\n            remainder: result[1]\r\n        };\r\n    };\r\n    NativeBigInt.prototype.divmod = SmallInteger.prototype.divmod = BigInteger.prototype.divmod;\r\n\r\n\r\n    BigInteger.prototype.divide = function (v) {\r\n        return divModAny(this, v)[0];\r\n    };\r\n    NativeBigInt.prototype.over = NativeBigInt.prototype.divide = function (v) {\r\n        return new NativeBigInt(this.value / parseValue(v).value);\r\n    };\r\n    SmallInteger.prototype.over = SmallInteger.prototype.divide = BigInteger.prototype.over = BigInteger.prototype.divide;\r\n\r\n    BigInteger.prototype.mod = function (v) {\r\n        return divModAny(this, v)[1];\r\n    };\r\n    NativeBigInt.prototype.mod = NativeBigInt.prototype.remainder = function (v) {\r\n        return new NativeBigInt(this.value % parseValue(v).value);\r\n    };\r\n    SmallInteger.prototype.remainder = SmallInteger.prototype.mod = BigInteger.prototype.remainder = BigInteger.prototype.mod;\r\n\r\n    BigInteger.prototype.pow = function (v) {\r\n        var n = parseValue(v),\r\n            a = this.value,\r\n            b = n.value,\r\n            value, x, y;\r\n        if (b === 0) return Integer[1];\r\n        if (a === 0) return Integer[0];\r\n        if (a === 1) return Integer[1];\r\n        if (a === -1) return n.isEven() ? Integer[1] : Integer[-1];\r\n        if (n.sign) {\r\n            return Integer[0];\r\n        }\r\n        if (!n.isSmall) throw new Error(\"The exponent \" + n.toString() + \" is too large.\");\r\n        if (this.isSmall) {\r\n            if (isPrecise(value = Math.pow(a, b)))\r\n                return new SmallInteger(truncate(value));\r\n        }\r\n        x = this;\r\n        y = Integer[1];\r\n        while (true) {\r\n            if (b & 1 === 1) {\r\n                y = y.times(x);\r\n                --b;\r\n            }\r\n            if (b === 0) break;\r\n            b /= 2;\r\n            x = x.square();\r\n        }\r\n        return y;\r\n    };\r\n    SmallInteger.prototype.pow = BigInteger.prototype.pow;\r\n\r\n    NativeBigInt.prototype.pow = function (v) {\r\n        var n = parseValue(v);\r\n        var a = this.value, b = n.value;\r\n        var _0 = BigInt(0), _1 = BigInt(1), _2 = BigInt(2);\r\n        if (b === _0) return Integer[1];\r\n        if (a === _0) return Integer[0];\r\n        if (a === _1) return Integer[1];\r\n        if (a === BigInt(-1)) return n.isEven() ? Integer[1] : Integer[-1];\r\n        if (n.isNegative()) return new NativeBigInt(_0);\r\n        var x = this;\r\n        var y = Integer[1];\r\n        while (true) {\r\n            if ((b & _1) === _1) {\r\n                y = y.times(x);\r\n                --b;\r\n            }\r\n            if (b === _0) break;\r\n            b /= _2;\r\n            x = x.square();\r\n        }\r\n        return y;\r\n    }\r\n\r\n    BigInteger.prototype.modPow = function (exp, mod) {\r\n        exp = parseValue(exp);\r\n        mod = parseValue(mod);\r\n        if (mod.isZero()) throw new Error(\"Cannot take modPow with modulus 0\");\r\n        var r = Integer[1],\r\n            base = this.mod(mod);\r\n        if (exp.isNegative()) {\r\n            exp = exp.multiply(Integer[-1]);\r\n            base = base.modInv(mod);\r\n        }\r\n        while (exp.isPositive()) {\r\n            if (base.isZero()) return Integer[0];\r\n            if (exp.isOdd()) r = r.multiply(base).mod(mod);\r\n            exp = exp.divide(2);\r\n            base = base.square().mod(mod);\r\n        }\r\n        return r;\r\n    };\r\n    NativeBigInt.prototype.modPow = SmallInteger.prototype.modPow = BigInteger.prototype.modPow;\r\n\r\n    function compareAbs(a, b) {\r\n        if (a.length !== b.length) {\r\n            return a.length > b.length ? 1 : -1;\r\n        }\r\n        for (var i = a.length - 1; i >= 0; i--) {\r\n            if (a[i] !== b[i]) return a[i] > b[i] ? 1 : -1;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    BigInteger.prototype.compareAbs = function (v) {\r\n        var n = parseValue(v),\r\n            a = this.value,\r\n            b = n.value;\r\n        if (n.isSmall) return 1;\r\n        return compareAbs(a, b);\r\n    };\r\n    SmallInteger.prototype.compareAbs = function (v) {\r\n        var n = parseValue(v),\r\n            a = Math.abs(this.value),\r\n            b = n.value;\r\n        if (n.isSmall) {\r\n            b = Math.abs(b);\r\n            return a === b ? 0 : a > b ? 1 : -1;\r\n        }\r\n        return -1;\r\n    };\r\n    NativeBigInt.prototype.compareAbs = function (v) {\r\n        var a = this.value;\r\n        var b = parseValue(v).value;\r\n        a = a >= 0 ? a : -a;\r\n        b = b >= 0 ? b : -b;\r\n        return a === b ? 0 : a > b ? 1 : -1;\r\n    }\r\n\r\n    BigInteger.prototype.compare = function (v) {\r\n        // See discussion about comparison with Infinity:\r\n        // https://github.com/peterolson/BigInteger.js/issues/61\r\n        if (v === Infinity) {\r\n            return -1;\r\n        }\r\n        if (v === -Infinity) {\r\n            return 1;\r\n        }\r\n\r\n        var n = parseValue(v),\r\n            a = this.value,\r\n            b = n.value;\r\n        if (this.sign !== n.sign) {\r\n            return n.sign ? 1 : -1;\r\n        }\r\n        if (n.isSmall) {\r\n            return this.sign ? -1 : 1;\r\n        }\r\n        return compareAbs(a, b) * (this.sign ? -1 : 1);\r\n    };\r\n    BigInteger.prototype.compareTo = BigInteger.prototype.compare;\r\n\r\n    SmallInteger.prototype.compare = function (v) {\r\n        if (v === Infinity) {\r\n            return -1;\r\n        }\r\n        if (v === -Infinity) {\r\n            return 1;\r\n        }\r\n\r\n        var n = parseValue(v),\r\n            a = this.value,\r\n            b = n.value;\r\n        if (n.isSmall) {\r\n            return a == b ? 0 : a > b ? 1 : -1;\r\n        }\r\n        if (a < 0 !== n.sign) {\r\n            return a < 0 ? -1 : 1;\r\n        }\r\n        return a < 0 ? 1 : -1;\r\n    };\r\n    SmallInteger.prototype.compareTo = SmallInteger.prototype.compare;\r\n\r\n    NativeBigInt.prototype.compare = function (v) {\r\n        if (v === Infinity) {\r\n            return -1;\r\n        }\r\n        if (v === -Infinity) {\r\n            return 1;\r\n        }\r\n        var a = this.value;\r\n        var b = parseValue(v).value;\r\n        return a === b ? 0 : a > b ? 1 : -1;\r\n    }\r\n    NativeBigInt.prototype.compareTo = NativeBigInt.prototype.compare;\r\n\r\n    BigInteger.prototype.equals = function (v) {\r\n        return this.compare(v) === 0;\r\n    };\r\n    NativeBigInt.prototype.eq = NativeBigInt.prototype.equals = SmallInteger.prototype.eq = SmallInteger.prototype.equals = BigInteger.prototype.eq = BigInteger.prototype.equals;\r\n\r\n    BigInteger.prototype.notEquals = function (v) {\r\n        return this.compare(v) !== 0;\r\n    };\r\n    NativeBigInt.prototype.neq = NativeBigInt.prototype.notEquals = SmallInteger.prototype.neq = SmallInteger.prototype.notEquals = BigInteger.prototype.neq = BigInteger.prototype.notEquals;\r\n\r\n    BigInteger.prototype.greater = function (v) {\r\n        return this.compare(v) > 0;\r\n    };\r\n    NativeBigInt.prototype.gt = NativeBigInt.prototype.greater = SmallInteger.prototype.gt = SmallInteger.prototype.greater = BigInteger.prototype.gt = BigInteger.prototype.greater;\r\n\r\n    BigInteger.prototype.lesser = function (v) {\r\n        return this.compare(v) < 0;\r\n    };\r\n    NativeBigInt.prototype.lt = NativeBigInt.prototype.lesser = SmallInteger.prototype.lt = SmallInteger.prototype.lesser = BigInteger.prototype.lt = BigInteger.prototype.lesser;\r\n\r\n    BigInteger.prototype.greaterOrEquals = function (v) {\r\n        return this.compare(v) >= 0;\r\n    };\r\n    NativeBigInt.prototype.geq = NativeBigInt.prototype.greaterOrEquals = SmallInteger.prototype.geq = SmallInteger.prototype.greaterOrEquals = BigInteger.prototype.geq = BigInteger.prototype.greaterOrEquals;\r\n\r\n    BigInteger.prototype.lesserOrEquals = function (v) {\r\n        return this.compare(v) <= 0;\r\n    };\r\n    NativeBigInt.prototype.leq = NativeBigInt.prototype.lesserOrEquals = SmallInteger.prototype.leq = SmallInteger.prototype.lesserOrEquals = BigInteger.prototype.leq = BigInteger.prototype.lesserOrEquals;\r\n\r\n    BigInteger.prototype.isEven = function () {\r\n        return (this.value[0] & 1) === 0;\r\n    };\r\n    SmallInteger.prototype.isEven = function () {\r\n        return (this.value & 1) === 0;\r\n    };\r\n    NativeBigInt.prototype.isEven = function () {\r\n        return (this.value & BigInt(1)) === BigInt(0);\r\n    }\r\n\r\n    BigInteger.prototype.isOdd = function () {\r\n        return (this.value[0] & 1) === 1;\r\n    };\r\n    SmallInteger.prototype.isOdd = function () {\r\n        return (this.value & 1) === 1;\r\n    };\r\n    NativeBigInt.prototype.isOdd = function () {\r\n        return (this.value & BigInt(1)) === BigInt(1);\r\n    }\r\n\r\n    BigInteger.prototype.isPositive = function () {\r\n        return !this.sign;\r\n    };\r\n    SmallInteger.prototype.isPositive = function () {\r\n        return this.value > 0;\r\n    };\r\n    NativeBigInt.prototype.isPositive = SmallInteger.prototype.isPositive;\r\n\r\n    BigInteger.prototype.isNegative = function () {\r\n        return this.sign;\r\n    };\r\n    SmallInteger.prototype.isNegative = function () {\r\n        return this.value < 0;\r\n    };\r\n    NativeBigInt.prototype.isNegative = SmallInteger.prototype.isNegative;\r\n\r\n    BigInteger.prototype.isUnit = function () {\r\n        return false;\r\n    };\r\n    SmallInteger.prototype.isUnit = function () {\r\n        return Math.abs(this.value) === 1;\r\n    };\r\n    NativeBigInt.prototype.isUnit = function () {\r\n        return this.abs().value === BigInt(1);\r\n    }\r\n\r\n    BigInteger.prototype.isZero = function () {\r\n        return false;\r\n    };\r\n    SmallInteger.prototype.isZero = function () {\r\n        return this.value === 0;\r\n    };\r\n    NativeBigInt.prototype.isZero = function () {\r\n        return this.value === BigInt(0);\r\n    }\r\n\r\n    BigInteger.prototype.isDivisibleBy = function (v) {\r\n        var n = parseValue(v);\r\n        if (n.isZero()) return false;\r\n        if (n.isUnit()) return true;\r\n        if (n.compareAbs(2) === 0) return this.isEven();\r\n        return this.mod(n).isZero();\r\n    };\r\n    NativeBigInt.prototype.isDivisibleBy = SmallInteger.prototype.isDivisibleBy = BigInteger.prototype.isDivisibleBy;\r\n\r\n    function isBasicPrime(v) {\r\n        var n = v.abs();\r\n        if (n.isUnit()) return false;\r\n        if (n.equals(2) || n.equals(3) || n.equals(5)) return true;\r\n        if (n.isEven() || n.isDivisibleBy(3) || n.isDivisibleBy(5)) return false;\r\n        if (n.lesser(49)) return true;\r\n        // we don't know if it's prime: let the other functions figure it out\r\n    }\r\n\r\n    function millerRabinTest(n, a) {\r\n        var nPrev = n.prev(),\r\n            b = nPrev,\r\n            r = 0,\r\n            d, t, i, x;\r\n        while (b.isEven()) b = b.divide(2), r++;\r\n        next: for (i = 0; i < a.length; i++) {\r\n            if (n.lesser(a[i])) continue;\r\n            x = bigInt(a[i]).modPow(b, n);\r\n            if (x.isUnit() || x.equals(nPrev)) continue;\r\n            for (d = r - 1; d != 0; d--) {\r\n                x = x.square().mod(n);\r\n                if (x.isUnit()) return false;\r\n                if (x.equals(nPrev)) continue next;\r\n            }\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    // Set \"strict\" to true to force GRH-supported lower bound of 2*log(N)^2\r\n    BigInteger.prototype.isPrime = function (strict) {\r\n        var isPrime = isBasicPrime(this);\r\n        if (isPrime !== undefined) return isPrime;\r\n        var n = this.abs();\r\n        var bits = n.bitLength();\r\n        if (bits <= 64)\r\n            return millerRabinTest(n, [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37]);\r\n        var logN = Math.log(2) * bits.toJSNumber();\r\n        var t = Math.ceil((strict === true) ? (2 * Math.pow(logN, 2)) : logN);\r\n        for (var a = [], i = 0; i < t; i++) {\r\n            a.push(bigInt(i + 2));\r\n        }\r\n        return millerRabinTest(n, a);\r\n    };\r\n    NativeBigInt.prototype.isPrime = SmallInteger.prototype.isPrime = BigInteger.prototype.isPrime;\r\n\r\n    BigInteger.prototype.isProbablePrime = function (iterations, rng) {\r\n        var isPrime = isBasicPrime(this);\r\n        if (isPrime !== undefined) return isPrime;\r\n        var n = this.abs();\r\n        var t = iterations === undefined ? 5 : iterations;\r\n        for (var a = [], i = 0; i < t; i++) {\r\n            a.push(bigInt.randBetween(2, n.minus(2), rng));\r\n        }\r\n        return millerRabinTest(n, a);\r\n    };\r\n    NativeBigInt.prototype.isProbablePrime = SmallInteger.prototype.isProbablePrime = BigInteger.prototype.isProbablePrime;\r\n\r\n    BigInteger.prototype.modInv = function (n) {\r\n        var t = bigInt.zero, newT = bigInt.one, r = parseValue(n), newR = this.abs(), q, lastT, lastR;\r\n        while (!newR.isZero()) {\r\n            q = r.divide(newR);\r\n            lastT = t;\r\n            lastR = r;\r\n            t = newT;\r\n            r = newR;\r\n            newT = lastT.subtract(q.multiply(newT));\r\n            newR = lastR.subtract(q.multiply(newR));\r\n        }\r\n        if (!r.isUnit()) throw new Error(this.toString() + \" and \" + n.toString() + \" are not co-prime\");\r\n        if (t.compare(0) === -1) {\r\n            t = t.add(n);\r\n        }\r\n        if (this.isNegative()) {\r\n            return t.negate();\r\n        }\r\n        return t;\r\n    };\r\n\r\n    NativeBigInt.prototype.modInv = SmallInteger.prototype.modInv = BigInteger.prototype.modInv;\r\n\r\n    BigInteger.prototype.next = function () {\r\n        var value = this.value;\r\n        if (this.sign) {\r\n            return subtractSmall(value, 1, this.sign);\r\n        }\r\n        return new BigInteger(addSmall(value, 1), this.sign);\r\n    };\r\n    SmallInteger.prototype.next = function () {\r\n        var value = this.value;\r\n        if (value + 1 < MAX_INT) return new SmallInteger(value + 1);\r\n        return new BigInteger(MAX_INT_ARR, false);\r\n    };\r\n    NativeBigInt.prototype.next = function () {\r\n        return new NativeBigInt(this.value + BigInt(1));\r\n    }\r\n\r\n    BigInteger.prototype.prev = function () {\r\n        var value = this.value;\r\n        if (this.sign) {\r\n            return new BigInteger(addSmall(value, 1), true);\r\n        }\r\n        return subtractSmall(value, 1, this.sign);\r\n    };\r\n    SmallInteger.prototype.prev = function () {\r\n        var value = this.value;\r\n        if (value - 1 > -MAX_INT) return new SmallInteger(value - 1);\r\n        return new BigInteger(MAX_INT_ARR, true);\r\n    };\r\n    NativeBigInt.prototype.prev = function () {\r\n        return new NativeBigInt(this.value - BigInt(1));\r\n    }\r\n\r\n    var powersOfTwo = [1];\r\n    while (2 * powersOfTwo[powersOfTwo.length - 1] <= BASE) powersOfTwo.push(2 * powersOfTwo[powersOfTwo.length - 1]);\r\n    var powers2Length = powersOfTwo.length, highestPower2 = powersOfTwo[powers2Length - 1];\r\n\r\n    function shift_isSmall(n) {\r\n        return Math.abs(n) <= BASE;\r\n    }\r\n\r\n    BigInteger.prototype.shiftLeft = function (v) {\r\n        var n = parseValue(v).toJSNumber();\r\n        if (!shift_isSmall(n)) {\r\n            throw new Error(String(n) + \" is too large for shifting.\");\r\n        }\r\n        if (n < 0) return this.shiftRight(-n);\r\n        var result = this;\r\n        if (result.isZero()) return result;\r\n        while (n >= powers2Length) {\r\n            result = result.multiply(highestPower2);\r\n            n -= powers2Length - 1;\r\n        }\r\n        return result.multiply(powersOfTwo[n]);\r\n    };\r\n    NativeBigInt.prototype.shiftLeft = SmallInteger.prototype.shiftLeft = BigInteger.prototype.shiftLeft;\r\n\r\n    BigInteger.prototype.shiftRight = function (v) {\r\n        var remQuo;\r\n        var n = parseValue(v).toJSNumber();\r\n        if (!shift_isSmall(n)) {\r\n            throw new Error(String(n) + \" is too large for shifting.\");\r\n        }\r\n        if (n < 0) return this.shiftLeft(-n);\r\n        var result = this;\r\n        while (n >= powers2Length) {\r\n            if (result.isZero() || (result.isNegative() && result.isUnit())) return result;\r\n            remQuo = divModAny(result, highestPower2);\r\n            result = remQuo[1].isNegative() ? remQuo[0].prev() : remQuo[0];\r\n            n -= powers2Length - 1;\r\n        }\r\n        remQuo = divModAny(result, powersOfTwo[n]);\r\n        return remQuo[1].isNegative() ? remQuo[0].prev() : remQuo[0];\r\n    };\r\n    NativeBigInt.prototype.shiftRight = SmallInteger.prototype.shiftRight = BigInteger.prototype.shiftRight;\r\n\r\n    function bitwise(x, y, fn) {\r\n        y = parseValue(y);\r\n        var xSign = x.isNegative(), ySign = y.isNegative();\r\n        var xRem = xSign ? x.not() : x,\r\n            yRem = ySign ? y.not() : y;\r\n        var xDigit = 0, yDigit = 0;\r\n        var xDivMod = null, yDivMod = null;\r\n        var result = [];\r\n        while (!xRem.isZero() || !yRem.isZero()) {\r\n            xDivMod = divModAny(xRem, highestPower2);\r\n            xDigit = xDivMod[1].toJSNumber();\r\n            if (xSign) {\r\n                xDigit = highestPower2 - 1 - xDigit; // two's complement for negative numbers\r\n            }\r\n\r\n            yDivMod = divModAny(yRem, highestPower2);\r\n            yDigit = yDivMod[1].toJSNumber();\r\n            if (ySign) {\r\n                yDigit = highestPower2 - 1 - yDigit; // two's complement for negative numbers\r\n            }\r\n\r\n            xRem = xDivMod[0];\r\n            yRem = yDivMod[0];\r\n            result.push(fn(xDigit, yDigit));\r\n        }\r\n        var sum = fn(xSign ? 1 : 0, ySign ? 1 : 0) !== 0 ? bigInt(-1) : bigInt(0);\r\n        for (var i = result.length - 1; i >= 0; i -= 1) {\r\n            sum = sum.multiply(highestPower2).add(bigInt(result[i]));\r\n        }\r\n        return sum;\r\n    }\r\n\r\n    BigInteger.prototype.not = function () {\r\n        return this.negate().prev();\r\n    };\r\n    NativeBigInt.prototype.not = SmallInteger.prototype.not = BigInteger.prototype.not;\r\n\r\n    BigInteger.prototype.and = function (n) {\r\n        return bitwise(this, n, function (a, b) { return a & b; });\r\n    };\r\n    NativeBigInt.prototype.and = SmallInteger.prototype.and = BigInteger.prototype.and;\r\n\r\n    BigInteger.prototype.or = function (n) {\r\n        return bitwise(this, n, function (a, b) { return a | b; });\r\n    };\r\n    NativeBigInt.prototype.or = SmallInteger.prototype.or = BigInteger.prototype.or;\r\n\r\n    BigInteger.prototype.xor = function (n) {\r\n        return bitwise(this, n, function (a, b) { return a ^ b; });\r\n    };\r\n    NativeBigInt.prototype.xor = SmallInteger.prototype.xor = BigInteger.prototype.xor;\r\n\r\n    var LOBMASK_I = 1 << 30, LOBMASK_BI = (BASE & -BASE) * (BASE & -BASE) | LOBMASK_I;\r\n    function roughLOB(n) { // get lowestOneBit (rough)\r\n        // SmallInteger: return Min(lowestOneBit(n), 1 << 30)\r\n        // BigInteger: return Min(lowestOneBit(n), 1 << 14) [BASE=1e7]\r\n        var v = n.value,\r\n            x = typeof v === \"number\" ? v | LOBMASK_I :\r\n                typeof v === \"bigint\" ? v | BigInt(LOBMASK_I) :\r\n                    v[0] + v[1] * BASE | LOBMASK_BI;\r\n        return x & -x;\r\n    }\r\n\r\n    function integerLogarithm(value, base) {\r\n        if (base.compareTo(value) <= 0) {\r\n            var tmp = integerLogarithm(value, base.square(base));\r\n            var p = tmp.p;\r\n            var e = tmp.e;\r\n            var t = p.multiply(base);\r\n            return t.compareTo(value) <= 0 ? { p: t, e: e * 2 + 1 } : { p: p, e: e * 2 };\r\n        }\r\n        return { p: bigInt(1), e: 0 };\r\n    }\r\n\r\n    BigInteger.prototype.bitLength = function () {\r\n        var n = this;\r\n        if (n.compareTo(bigInt(0)) < 0) {\r\n            n = n.negate().subtract(bigInt(1));\r\n        }\r\n        if (n.compareTo(bigInt(0)) === 0) {\r\n            return bigInt(0);\r\n        }\r\n        return bigInt(integerLogarithm(n, bigInt(2)).e).add(bigInt(1));\r\n    }\r\n    NativeBigInt.prototype.bitLength = SmallInteger.prototype.bitLength = BigInteger.prototype.bitLength;\r\n\r\n    function max(a, b) {\r\n        a = parseValue(a);\r\n        b = parseValue(b);\r\n        return a.greater(b) ? a : b;\r\n    }\r\n    function min(a, b) {\r\n        a = parseValue(a);\r\n        b = parseValue(b);\r\n        return a.lesser(b) ? a : b;\r\n    }\r\n    function gcd(a, b) {\r\n        a = parseValue(a).abs();\r\n        b = parseValue(b).abs();\r\n        if (a.equals(b)) return a;\r\n        if (a.isZero()) return b;\r\n        if (b.isZero()) return a;\r\n        var c = Integer[1], d, t;\r\n        while (a.isEven() && b.isEven()) {\r\n            d = min(roughLOB(a), roughLOB(b));\r\n            a = a.divide(d);\r\n            b = b.divide(d);\r\n            c = c.multiply(d);\r\n        }\r\n        while (a.isEven()) {\r\n            a = a.divide(roughLOB(a));\r\n        }\r\n        do {\r\n            while (b.isEven()) {\r\n                b = b.divide(roughLOB(b));\r\n            }\r\n            if (a.greater(b)) {\r\n                t = b; b = a; a = t;\r\n            }\r\n            b = b.subtract(a);\r\n        } while (!b.isZero());\r\n        return c.isUnit() ? a : a.multiply(c);\r\n    }\r\n    function lcm(a, b) {\r\n        a = parseValue(a).abs();\r\n        b = parseValue(b).abs();\r\n        return a.divide(gcd(a, b)).multiply(b);\r\n    }\r\n    function randBetween(a, b, rng) {\r\n        a = parseValue(a);\r\n        b = parseValue(b);\r\n        var usedRNG = rng || Math.random;\r\n        var low = min(a, b), high = max(a, b);\r\n        var range = high.subtract(low).add(1);\r\n        if (range.isSmall) return low.add(Math.floor(usedRNG() * range));\r\n        var digits = toBase(range, BASE).value;\r\n        var result = [], restricted = true;\r\n        for (var i = 0; i < digits.length; i++) {\r\n            var top = restricted ? digits[i] : BASE;\r\n            var digit = truncate(usedRNG() * top);\r\n            result.push(digit);\r\n            if (digit < top) restricted = false;\r\n        }\r\n        return low.add(Integer.fromArray(result, BASE, false));\r\n    }\r\n\r\n    var parseBase = function (text, base, alphabet, caseSensitive) {\r\n        alphabet = alphabet || DEFAULT_ALPHABET;\r\n        text = String(text);\r\n        if (!caseSensitive) {\r\n            text = text.toLowerCase();\r\n            alphabet = alphabet.toLowerCase();\r\n        }\r\n        var length = text.length;\r\n        var i;\r\n        var absBase = Math.abs(base);\r\n        var alphabetValues = {};\r\n        for (i = 0; i < alphabet.length; i++) {\r\n            alphabetValues[alphabet[i]] = i;\r\n        }\r\n        for (i = 0; i < length; i++) {\r\n            var c = text[i];\r\n            if (c === \"-\") continue;\r\n            if (c in alphabetValues) {\r\n                if (alphabetValues[c] >= absBase) {\r\n                    if (c === \"1\" && absBase === 1) continue;\r\n                    throw new Error(c + \" is not a valid digit in base \" + base + \".\");\r\n                }\r\n            }\r\n        }\r\n        base = parseValue(base);\r\n        var digits = [];\r\n        var isNegative = text[0] === \"-\";\r\n        for (i = isNegative ? 1 : 0; i < text.length; i++) {\r\n            var c = text[i];\r\n            if (c in alphabetValues) digits.push(parseValue(alphabetValues[c]));\r\n            else if (c === \"<\") {\r\n                var start = i;\r\n                do { i++; } while (text[i] !== \">\" && i < text.length);\r\n                digits.push(parseValue(text.slice(start + 1, i)));\r\n            }\r\n            else throw new Error(c + \" is not a valid character\");\r\n        }\r\n        return parseBaseFromArray(digits, base, isNegative);\r\n    };\r\n\r\n    function parseBaseFromArray(digits, base, isNegative) {\r\n        var val = Integer[0], pow = Integer[1], i;\r\n        for (i = digits.length - 1; i >= 0; i--) {\r\n            val = val.add(digits[i].times(pow));\r\n            pow = pow.times(base);\r\n        }\r\n        return isNegative ? val.negate() : val;\r\n    }\r\n\r\n    function stringify(digit, alphabet) {\r\n        alphabet = alphabet || DEFAULT_ALPHABET;\r\n        if (digit < alphabet.length) {\r\n            return alphabet[digit];\r\n        }\r\n        return \"<\" + digit + \">\";\r\n    }\r\n\r\n    function toBase(n, base) {\r\n        base = bigInt(base);\r\n        if (base.isZero()) {\r\n            if (n.isZero()) return { value: [0], isNegative: false };\r\n            throw new Error(\"Cannot convert nonzero numbers to base 0.\");\r\n        }\r\n        if (base.equals(-1)) {\r\n            if (n.isZero()) return { value: [0], isNegative: false };\r\n            if (n.isNegative())\r\n                return {\r\n                    value: [].concat.apply([], Array.apply(null, Array(-n.toJSNumber()))\r\n                        .map(Array.prototype.valueOf, [1, 0])\r\n                    ),\r\n                    isNegative: false\r\n                };\r\n\r\n            var arr = Array.apply(null, Array(n.toJSNumber() - 1))\r\n                .map(Array.prototype.valueOf, [0, 1]);\r\n            arr.unshift([1]);\r\n            return {\r\n                value: [].concat.apply([], arr),\r\n                isNegative: false\r\n            };\r\n        }\r\n\r\n        var neg = false;\r\n        if (n.isNegative() && base.isPositive()) {\r\n            neg = true;\r\n            n = n.abs();\r\n        }\r\n        if (base.isUnit()) {\r\n            if (n.isZero()) return { value: [0], isNegative: false };\r\n\r\n            return {\r\n                value: Array.apply(null, Array(n.toJSNumber()))\r\n                    .map(Number.prototype.valueOf, 1),\r\n                isNegative: neg\r\n            };\r\n        }\r\n        var out = [];\r\n        var left = n, divmod;\r\n        while (left.isNegative() || left.compareAbs(base) >= 0) {\r\n            divmod = left.divmod(base);\r\n            left = divmod.quotient;\r\n            var digit = divmod.remainder;\r\n            if (digit.isNegative()) {\r\n                digit = base.minus(digit).abs();\r\n                left = left.next();\r\n            }\r\n            out.push(digit.toJSNumber());\r\n        }\r\n        out.push(left.toJSNumber());\r\n        return { value: out.reverse(), isNegative: neg };\r\n    }\r\n\r\n    function toBaseString(n, base, alphabet) {\r\n        var arr = toBase(n, base);\r\n        return (arr.isNegative ? \"-\" : \"\") + arr.value.map(function (x) {\r\n            return stringify(x, alphabet);\r\n        }).join('');\r\n    }\r\n\r\n    BigInteger.prototype.toArray = function (radix) {\r\n        return toBase(this, radix);\r\n    };\r\n\r\n    SmallInteger.prototype.toArray = function (radix) {\r\n        return toBase(this, radix);\r\n    };\r\n\r\n    NativeBigInt.prototype.toArray = function (radix) {\r\n        return toBase(this, radix);\r\n    };\r\n\r\n    BigInteger.prototype.toString = function (radix, alphabet) {\r\n        if (radix === undefined) radix = 10;\r\n        if (radix !== 10) return toBaseString(this, radix, alphabet);\r\n        var v = this.value, l = v.length, str = String(v[--l]), zeros = \"0000000\", digit;\r\n        while (--l >= 0) {\r\n            digit = String(v[l]);\r\n            str += zeros.slice(digit.length) + digit;\r\n        }\r\n        var sign = this.sign ? \"-\" : \"\";\r\n        return sign + str;\r\n    };\r\n\r\n    SmallInteger.prototype.toString = function (radix, alphabet) {\r\n        if (radix === undefined) radix = 10;\r\n        if (radix != 10) return toBaseString(this, radix, alphabet);\r\n        return String(this.value);\r\n    };\r\n\r\n    NativeBigInt.prototype.toString = SmallInteger.prototype.toString;\r\n\r\n    NativeBigInt.prototype.toJSON = BigInteger.prototype.toJSON = SmallInteger.prototype.toJSON = function () { return this.toString(); }\r\n\r\n    BigInteger.prototype.valueOf = function () {\r\n        return parseInt(this.toString(), 10);\r\n    };\r\n    BigInteger.prototype.toJSNumber = BigInteger.prototype.valueOf;\r\n\r\n    SmallInteger.prototype.valueOf = function () {\r\n        return this.value;\r\n    };\r\n    SmallInteger.prototype.toJSNumber = SmallInteger.prototype.valueOf;\r\n    NativeBigInt.prototype.valueOf = NativeBigInt.prototype.toJSNumber = function () {\r\n        return parseInt(this.toString(), 10);\r\n    }\r\n\r\n    function parseStringValue(v) {\r\n        if (isPrecise(+v)) {\r\n            var x = +v;\r\n            if (x === truncate(x))\r\n                return supportsNativeBigInt ? new NativeBigInt(BigInt(x)) : new SmallInteger(x);\r\n            throw new Error(\"Invalid integer: \" + v);\r\n        }\r\n        var sign = v[0] === \"-\";\r\n        if (sign) v = v.slice(1);\r\n        var split = v.split(/e/i);\r\n        if (split.length > 2) throw new Error(\"Invalid integer: \" + split.join(\"e\"));\r\n        if (split.length === 2) {\r\n            var exp = split[1];\r\n            if (exp[0] === \"+\") exp = exp.slice(1);\r\n            exp = +exp;\r\n            if (exp !== truncate(exp) || !isPrecise(exp)) throw new Error(\"Invalid integer: \" + exp + \" is not a valid exponent.\");\r\n            var text = split[0];\r\n            var decimalPlace = text.indexOf(\".\");\r\n            if (decimalPlace >= 0) {\r\n                exp -= text.length - decimalPlace - 1;\r\n                text = text.slice(0, decimalPlace) + text.slice(decimalPlace + 1);\r\n            }\r\n            if (exp < 0) throw new Error(\"Cannot include negative exponent part for integers\");\r\n            text += (new Array(exp + 1)).join(\"0\");\r\n            v = text;\r\n        }\r\n        var isValid = /^([0-9][0-9]*)$/.test(v);\r\n        if (!isValid) throw new Error(\"Invalid integer: \" + v);\r\n        if (supportsNativeBigInt) {\r\n            return new NativeBigInt(BigInt(sign ? \"-\" + v : v));\r\n        }\r\n        var r = [], max = v.length, l = LOG_BASE, min = max - l;\r\n        while (max > 0) {\r\n            r.push(+v.slice(min, max));\r\n            min -= l;\r\n            if (min < 0) min = 0;\r\n            max -= l;\r\n        }\r\n        trim(r);\r\n        return new BigInteger(r, sign);\r\n    }\r\n\r\n    function parseNumberValue(v) {\r\n        if (supportsNativeBigInt) {\r\n            return new NativeBigInt(BigInt(v));\r\n        }\r\n        if (isPrecise(v)) {\r\n            if (v !== truncate(v)) throw new Error(v + \" is not an integer.\");\r\n            return new SmallInteger(v);\r\n        }\r\n        return parseStringValue(v.toString());\r\n    }\r\n\r\n    function parseValue(v) {\r\n        if (typeof v === \"number\") {\r\n            return parseNumberValue(v);\r\n        }\r\n        if (typeof v === \"string\") {\r\n            return parseStringValue(v);\r\n        }\r\n        if (typeof v === \"bigint\") {\r\n            return new NativeBigInt(v);\r\n        }\r\n        return v;\r\n    }\r\n    // Pre-define numbers in range [-999,999]\r\n    for (var i = 0; i < 1000; i++) {\r\n        Integer[i] = parseValue(i);\r\n        if (i > 0) Integer[-i] = parseValue(-i);\r\n    }\r\n    // Backwards compatibility\r\n    Integer.one = Integer[1];\r\n    Integer.zero = Integer[0];\r\n    Integer.minusOne = Integer[-1];\r\n    Integer.max = max;\r\n    Integer.min = min;\r\n    Integer.gcd = gcd;\r\n    Integer.lcm = lcm;\r\n    Integer.isInstance = function (x) { return x instanceof BigInteger || x instanceof SmallInteger || x instanceof NativeBigInt; };\r\n    Integer.randBetween = randBetween;\r\n\r\n    Integer.fromArray = function (digits, base, isNegative) {\r\n        return parseBaseFromArray(digits.map(parseValue), parseValue(base || 10), isNegative);\r\n    };\r\n\r\n    return Integer;\r\n})();\r\n\r\n// Node.js check\r\nif (typeof module !== \"undefined\" && module.hasOwnProperty(\"exports\")) {\r\n    module.exports = bigInt;\r\n}\r\n\r\n//amd check\r\nif (typeof define === \"function\" && define.amd) {\r\n    define( function () {\r\n        return bigInt;\r\n    });\r\n}\r\n","module.exports = require(\"stream\");","var fs = require('fs')\nvar polyfills = require('./polyfills.js')\nvar legacy = require('./legacy-streams.js')\nvar clone = require('./clone.js')\n\nvar util = require('util')\n\n/* istanbul ignore next - node 0.x polyfill */\nvar gracefulQueue\nvar previousSymbol\n\n/* istanbul ignore else - node 0.x polyfill */\nif (typeof Symbol === 'function' && typeof Symbol.for === 'function') {\n  gracefulQueue = Symbol.for('graceful-fs.queue')\n  // This is used in testing by future versions\n  previousSymbol = Symbol.for('graceful-fs.previous')\n} else {\n  gracefulQueue = '___graceful-fs.queue'\n  previousSymbol = '___graceful-fs.previous'\n}\n\nfunction noop () {}\n\nfunction publishQueue(context, queue) {\n  Object.defineProperty(context, gracefulQueue, {\n    get: function() {\n      return queue\n    }\n  })\n}\n\nvar debug = noop\nif (util.debuglog)\n  debug = util.debuglog('gfs4')\nelse if (/\\bgfs4\\b/i.test(process.env.NODE_DEBUG || ''))\n  debug = function() {\n    var m = util.format.apply(util, arguments)\n    m = 'GFS4: ' + m.split(/\\n/).join('\\nGFS4: ')\n    console.error(m)\n  }\n\n// Once time initialization\nif (!fs[gracefulQueue]) {\n  // This queue can be shared by multiple loaded instances\n  var queue = global[gracefulQueue] || []\n  publishQueue(fs, queue)\n\n  // Patch fs.close/closeSync to shared queue version, because we need\n  // to retry() whenever a close happens *anywhere* in the program.\n  // This is essential when multiple graceful-fs instances are\n  // in play at the same time.\n  fs.close = (function (fs$close) {\n    function close (fd, cb) {\n      return fs$close.call(fs, fd, function (err) {\n        // This function uses the graceful-fs shared queue\n        if (!err) {\n          retry()\n        }\n\n        if (typeof cb === 'function')\n          cb.apply(this, arguments)\n      })\n    }\n\n    Object.defineProperty(close, previousSymbol, {\n      value: fs$close\n    })\n    return close\n  })(fs.close)\n\n  fs.closeSync = (function (fs$closeSync) {\n    function closeSync (fd) {\n      // This function uses the graceful-fs shared queue\n      fs$closeSync.apply(fs, arguments)\n      retry()\n    }\n\n    Object.defineProperty(closeSync, previousSymbol, {\n      value: fs$closeSync\n    })\n    return closeSync\n  })(fs.closeSync)\n\n  if (/\\bgfs4\\b/i.test(process.env.NODE_DEBUG || '')) {\n    process.on('exit', function() {\n      debug(fs[gracefulQueue])\n      require('assert').equal(fs[gracefulQueue].length, 0)\n    })\n  }\n}\n\nif (!global[gracefulQueue]) {\n  publishQueue(global, fs[gracefulQueue]);\n}\n\nmodule.exports = patch(clone(fs))\nif (process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH && !fs.__patched) {\n    module.exports = patch(fs)\n    fs.__patched = true;\n}\n\nfunction patch (fs) {\n  // Everything that references the open() function needs to be in here\n  polyfills(fs)\n  fs.gracefulify = patch\n\n  fs.createReadStream = createReadStream\n  fs.createWriteStream = createWriteStream\n  var fs$readFile = fs.readFile\n  fs.readFile = readFile\n  function readFile (path, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$readFile(path, options, cb)\n\n    function go$readFile (path, options, cb) {\n      return fs$readFile(path, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$readFile, [path, options, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  var fs$writeFile = fs.writeFile\n  fs.writeFile = writeFile\n  function writeFile (path, data, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$writeFile(path, data, options, cb)\n\n    function go$writeFile (path, data, options, cb) {\n      return fs$writeFile(path, data, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$writeFile, [path, data, options, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  var fs$appendFile = fs.appendFile\n  if (fs$appendFile)\n    fs.appendFile = appendFile\n  function appendFile (path, data, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$appendFile(path, data, options, cb)\n\n    function go$appendFile (path, data, options, cb) {\n      return fs$appendFile(path, data, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$appendFile, [path, data, options, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  var fs$copyFile = fs.copyFile\n  if (fs$copyFile)\n    fs.copyFile = copyFile\n  function copyFile (src, dest, flags, cb) {\n    if (typeof flags === 'function') {\n      cb = flags\n      flags = 0\n    }\n    return fs$copyFile(src, dest, flags, function (err) {\n      if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n        enqueue([fs$copyFile, [src, dest, flags, cb]])\n      else {\n        if (typeof cb === 'function')\n          cb.apply(this, arguments)\n        retry()\n      }\n    })\n  }\n\n  var fs$readdir = fs.readdir\n  fs.readdir = readdir\n  function readdir (path, options, cb) {\n    var args = [path]\n    if (typeof options !== 'function') {\n      args.push(options)\n    } else {\n      cb = options\n    }\n    args.push(go$readdir$cb)\n\n    return go$readdir(args)\n\n    function go$readdir$cb (err, files) {\n      if (files && files.sort)\n        files.sort()\n\n      if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n        enqueue([go$readdir, [args]])\n\n      else {\n        if (typeof cb === 'function')\n          cb.apply(this, arguments)\n        retry()\n      }\n    }\n  }\n\n  function go$readdir (args) {\n    return fs$readdir.apply(fs, args)\n  }\n\n  if (process.version.substr(0, 4) === 'v0.8') {\n    var legStreams = legacy(fs)\n    ReadStream = legStreams.ReadStream\n    WriteStream = legStreams.WriteStream\n  }\n\n  var fs$ReadStream = fs.ReadStream\n  if (fs$ReadStream) {\n    ReadStream.prototype = Object.create(fs$ReadStream.prototype)\n    ReadStream.prototype.open = ReadStream$open\n  }\n\n  var fs$WriteStream = fs.WriteStream\n  if (fs$WriteStream) {\n    WriteStream.prototype = Object.create(fs$WriteStream.prototype)\n    WriteStream.prototype.open = WriteStream$open\n  }\n\n  Object.defineProperty(fs, 'ReadStream', {\n    get: function () {\n      return ReadStream\n    },\n    set: function (val) {\n      ReadStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n  Object.defineProperty(fs, 'WriteStream', {\n    get: function () {\n      return WriteStream\n    },\n    set: function (val) {\n      WriteStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n\n  // legacy names\n  var FileReadStream = ReadStream\n  Object.defineProperty(fs, 'FileReadStream', {\n    get: function () {\n      return FileReadStream\n    },\n    set: function (val) {\n      FileReadStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n  var FileWriteStream = WriteStream\n  Object.defineProperty(fs, 'FileWriteStream', {\n    get: function () {\n      return FileWriteStream\n    },\n    set: function (val) {\n      FileWriteStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n\n  function ReadStream (path, options) {\n    if (this instanceof ReadStream)\n      return fs$ReadStream.apply(this, arguments), this\n    else\n      return ReadStream.apply(Object.create(ReadStream.prototype), arguments)\n  }\n\n  function ReadStream$open () {\n    var that = this\n    open(that.path, that.flags, that.mode, function (err, fd) {\n      if (err) {\n        if (that.autoClose)\n          that.destroy()\n\n        that.emit('error', err)\n      } else {\n        that.fd = fd\n        that.emit('open', fd)\n        that.read()\n      }\n    })\n  }\n\n  function WriteStream (path, options) {\n    if (this instanceof WriteStream)\n      return fs$WriteStream.apply(this, arguments), this\n    else\n      return WriteStream.apply(Object.create(WriteStream.prototype), arguments)\n  }\n\n  function WriteStream$open () {\n    var that = this\n    open(that.path, that.flags, that.mode, function (err, fd) {\n      if (err) {\n        that.destroy()\n        that.emit('error', err)\n      } else {\n        that.fd = fd\n        that.emit('open', fd)\n      }\n    })\n  }\n\n  function createReadStream (path, options) {\n    return new fs.ReadStream(path, options)\n  }\n\n  function createWriteStream (path, options) {\n    return new fs.WriteStream(path, options)\n  }\n\n  var fs$open = fs.open\n  fs.open = open\n  function open (path, flags, mode, cb) {\n    if (typeof mode === 'function')\n      cb = mode, mode = null\n\n    return go$open(path, flags, mode, cb)\n\n    function go$open (path, flags, mode, cb) {\n      return fs$open(path, flags, mode, function (err, fd) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$open, [path, flags, mode, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  return fs\n}\n\nfunction enqueue (elem) {\n  debug('ENQUEUE', elem[0].name, elem[1])\n  fs[gracefulQueue].push(elem)\n}\n\nfunction retry () {\n  var elem = fs[gracefulQueue].shift()\n  if (elem) {\n    debug('RETRY', elem[0].name, elem[1])\n    elem[0].apply(null, elem[1])\n  }\n}\n","'use strict'\n\nexports.fromCallback = function (fn) {\n  return Object.defineProperty(function (...args) {\n    if (typeof args[args.length - 1] === 'function') fn.apply(this, args)\n    else {\n      return new Promise((resolve, reject) => {\n        fn.call(\n          this,\n          ...args,\n          (err, res) => (err != null) ? reject(err) : resolve(res)\n        )\n      })\n    }\n  }, 'name', { value: fn.name })\n}\n\nexports.fromPromise = function (fn) {\n  return Object.defineProperty(function (...args) {\n    const cb = args[args.length - 1]\n    if (typeof cb !== 'function') return fn.apply(this, args)\n    else fn.apply(this, args.slice(0, -1)).then(r => cb(null, r), cb)\n  }, 'name', { value: fn.name })\n}\n","const nodeFetch = require('node-fetch')\nconst realFetch = nodeFetch.default || nodeFetch\n\nconst fetch = function (url, options) {\n  // Support schemaless URIs on the server for parity with the browser.\n  // Ex: //github.com/ -> https://github.com/\n  if (/^\\/\\//.test(url)) {\n    url = 'https:' + url\n  }\n  return realFetch.call(this, url, options)\n}\n\nfetch.ponyfill = true\n\nmodule.exports = exports = fetch\nexports.fetch = fetch\nexports.Headers = nodeFetch.Headers\nexports.Request = nodeFetch.Request\nexports.Response = nodeFetch.Response\n\n// Needed for TypeScript consumers without esModuleInterop.\nexports.default = fetch\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","'use strict'\nconst u = require('universalify').fromPromise\nconst { makeDir: _makeDir, makeDirSync } = require('./make-dir')\nconst makeDir = u(_makeDir)\n\nmodule.exports = {\n  mkdirs: makeDir,\n  mkdirsSync: makeDirSync,\n  // alias\n  mkdirp: makeDir,\n  mkdirpSync: makeDirSync,\n  ensureDir: makeDir,\n  ensureDirSync: makeDirSync\n}\n","/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEqual;\n","module.exports = require(\"util\");","\"use strict\";\n\nvar encode = require('mdurl/encode');\n\nvar C_BACKSLASH = 92;\n\nvar decodeHTML = require('entities').decodeHTML;\n\nvar ENTITY = \"&(?:#x[a-f0-9]{1,6}|#[0-9]{1,7}|[a-z][a-z0-9]{1,31});\";\n\nvar TAGNAME = '[A-Za-z][A-Za-z0-9-]*';\nvar ATTRIBUTENAME = '[a-zA-Z_:][a-zA-Z0-9:._-]*';\nvar UNQUOTEDVALUE = \"[^\\\"'=<>`\\\\x00-\\\\x20]+\";\nvar SINGLEQUOTEDVALUE = \"'[^']*'\";\nvar DOUBLEQUOTEDVALUE = '\"[^\"]*\"';\nvar ATTRIBUTEVALUE = \"(?:\" + UNQUOTEDVALUE + \"|\" + SINGLEQUOTEDVALUE + \"|\" + DOUBLEQUOTEDVALUE + \")\";\nvar ATTRIBUTEVALUESPEC = \"(?:\" + \"\\\\s*=\" + \"\\\\s*\" + ATTRIBUTEVALUE + \")\";\nvar ATTRIBUTE = \"(?:\" + \"\\\\s+\" + ATTRIBUTENAME + ATTRIBUTEVALUESPEC + \"?)\";\nvar OPENTAG = \"<\" + TAGNAME + ATTRIBUTE + \"*\" + \"\\\\s*/?>\";\nvar CLOSETAG = \"</\" + TAGNAME + \"\\\\s*[>]\";\nvar HTMLCOMMENT = \"<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->\";\nvar PROCESSINGINSTRUCTION = \"[<][?].*?[?][>]\";\nvar DECLARATION = \"<![A-Z]+\" + \"\\\\s+[^>]*>\";\nvar CDATA = \"<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>\";\nvar HTMLTAG = \"(?:\" + OPENTAG + \"|\" + CLOSETAG + \"|\" + HTMLCOMMENT + \"|\" +\n        PROCESSINGINSTRUCTION + \"|\" + DECLARATION + \"|\" + CDATA + \")\";\nvar reHtmlTag = new RegExp('^' + HTMLTAG, 'i');\n\nvar reBackslashOrAmp = /[\\\\&]/;\n\nvar ESCAPABLE = '[!\"#$%&\\'()*+,./:;<=>?@[\\\\\\\\\\\\]^_`{|}~-]';\n\nvar reEntityOrEscapedChar = new RegExp('\\\\\\\\' + ESCAPABLE + '|' + ENTITY, 'gi');\n\nvar XMLSPECIAL = '[&<>\"]';\n\nvar reXmlSpecial = new RegExp(XMLSPECIAL, 'g');\n\nvar unescapeChar = function(s) {\n    if (s.charCodeAt(0) === C_BACKSLASH) {\n        return s.charAt(1);\n    } else {\n        return decodeHTML(s);\n    }\n};\n\n// Replace entities and backslash escapes with literal characters.\nvar unescapeString = function(s) {\n    if (reBackslashOrAmp.test(s)) {\n        return s.replace(reEntityOrEscapedChar, unescapeChar);\n    } else {\n        return s;\n    }\n};\n\nvar normalizeURI = function(uri) {\n    try {\n        return encode(uri);\n    }\n    catch(err) {\n        return uri;\n    }\n};\n\nvar replaceUnsafeChar = function(s) {\n    switch (s) {\n    case '&':\n        return '&amp;';\n    case '<':\n        return '&lt;';\n    case '>':\n        return '&gt;';\n    case '\"':\n        return '&quot;';\n    default:\n        return s;\n    }\n};\n\nvar escapeXml = function(s) {\n    if (reXmlSpecial.test(s)) {\n        return s.replace(reXmlSpecial, replaceUnsafeChar);\n    } else {\n        return s;\n    }\n};\n\nmodule.exports = { unescapeString: unescapeString,\n                   normalizeURI: normalizeURI,\n                   escapeXml: escapeXml,\n                   reHtmlTag: reHtmlTag,\n                   OPENTAG: OPENTAG,\n                   CLOSETAG: CLOSETAG,\n                   ENTITY: ENTITY,\n                   ESCAPABLE: ESCAPABLE\n                 };\n","'use strict'\n\nmodule.exports = {\n  // Export promiseified graceful-fs:\n  ...require('./fs'),\n  // Export extra methods:\n  ...require('./copy-sync'),\n  ...require('./copy'),\n  ...require('./empty'),\n  ...require('./ensure'),\n  ...require('./json'),\n  ...require('./mkdirs'),\n  ...require('./move-sync'),\n  ...require('./move'),\n  ...require('./output'),\n  ...require('./path-exists'),\n  ...require('./remove')\n}\n","module.exports = require(\"fs\");","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DomHandler = void 0;\nvar domelementtype_1 = require(\"domelementtype\");\nvar node_1 = require(\"./node\");\n__exportStar(require(\"./node\"), exports);\nvar reWhitespace = /\\s+/g;\n// Default options\nvar defaultOpts = {\n    normalizeWhitespace: false,\n    withStartIndices: false,\n    withEndIndices: false,\n};\nvar DomHandler = /** @class */ (function () {\n    /**\n     * @param callback Called once parsing has completed.\n     * @param options Settings for the handler.\n     * @param elementCB Callback whenever a tag is closed.\n     */\n    function DomHandler(callback, options, elementCB) {\n        /** The elements of the DOM */\n        this.dom = [];\n        /** The root element for the DOM */\n        this.root = new node_1.Document(this.dom);\n        /** Indicated whether parsing has been completed. */\n        this.done = false;\n        /** Stack of open tags. */\n        this.tagStack = [this.root];\n        /** A data node that is still being written to. */\n        this.lastNode = null;\n        /** Reference to the parser instance. Used for location information. */\n        this.parser = null;\n        // Make it possible to skip arguments, for backwards-compatibility\n        if (typeof options === \"function\") {\n            elementCB = options;\n            options = defaultOpts;\n        }\n        if (typeof callback === \"object\") {\n            options = callback;\n            callback = undefined;\n        }\n        this.callback = callback !== null && callback !== void 0 ? callback : null;\n        this.options = options !== null && options !== void 0 ? options : defaultOpts;\n        this.elementCB = elementCB !== null && elementCB !== void 0 ? elementCB : null;\n    }\n    DomHandler.prototype.onparserinit = function (parser) {\n        this.parser = parser;\n    };\n    // Resets the handler back to starting state\n    DomHandler.prototype.onreset = function () {\n        var _a;\n        this.dom = [];\n        this.root = new node_1.Document(this.dom);\n        this.done = false;\n        this.tagStack = [this.root];\n        this.lastNode = null;\n        this.parser = (_a = this.parser) !== null && _a !== void 0 ? _a : null;\n    };\n    // Signals the handler that parsing is done\n    DomHandler.prototype.onend = function () {\n        if (this.done)\n            return;\n        this.done = true;\n        this.parser = null;\n        this.handleCallback(null);\n    };\n    DomHandler.prototype.onerror = function (error) {\n        this.handleCallback(error);\n    };\n    DomHandler.prototype.onclosetag = function () {\n        this.lastNode = null;\n        var elem = this.tagStack.pop();\n        if (this.options.withEndIndices) {\n            elem.endIndex = this.parser.endIndex;\n        }\n        if (this.elementCB)\n            this.elementCB(elem);\n    };\n    DomHandler.prototype.onopentag = function (name, attribs) {\n        var type = this.options.xmlMode ? domelementtype_1.ElementType.Tag : undefined;\n        var element = new node_1.Element(name, attribs, undefined, type);\n        this.addNode(element);\n        this.tagStack.push(element);\n    };\n    DomHandler.prototype.ontext = function (data) {\n        var normalizeWhitespace = this.options.normalizeWhitespace;\n        var lastNode = this.lastNode;\n        if (lastNode && lastNode.type === domelementtype_1.ElementType.Text) {\n            if (normalizeWhitespace) {\n                lastNode.data = (lastNode.data + data).replace(reWhitespace, \" \");\n            }\n            else {\n                lastNode.data += data;\n            }\n        }\n        else {\n            if (normalizeWhitespace) {\n                data = data.replace(reWhitespace, \" \");\n            }\n            var node = new node_1.Text(data);\n            this.addNode(node);\n            this.lastNode = node;\n        }\n    };\n    DomHandler.prototype.oncomment = function (data) {\n        if (this.lastNode && this.lastNode.type === domelementtype_1.ElementType.Comment) {\n            this.lastNode.data += data;\n            return;\n        }\n        var node = new node_1.Comment(data);\n        this.addNode(node);\n        this.lastNode = node;\n    };\n    DomHandler.prototype.oncommentend = function () {\n        this.lastNode = null;\n    };\n    DomHandler.prototype.oncdatastart = function () {\n        var text = new node_1.Text(\"\");\n        var node = new node_1.NodeWithChildren(domelementtype_1.ElementType.CDATA, [text]);\n        this.addNode(node);\n        text.parent = node;\n        this.lastNode = text;\n    };\n    DomHandler.prototype.oncdataend = function () {\n        this.lastNode = null;\n    };\n    DomHandler.prototype.onprocessinginstruction = function (name, data) {\n        var node = new node_1.ProcessingInstruction(name, data);\n        this.addNode(node);\n    };\n    DomHandler.prototype.handleCallback = function (error) {\n        if (typeof this.callback === \"function\") {\n            this.callback(error, this.dom);\n        }\n        else if (error) {\n            throw error;\n        }\n    };\n    DomHandler.prototype.addNode = function (node) {\n        var parent = this.tagStack[this.tagStack.length - 1];\n        var previousSibling = parent.children[parent.children.length - 1];\n        if (this.options.withStartIndices) {\n            node.startIndex = this.parser.startIndex;\n        }\n        if (this.options.withEndIndices) {\n            node.endIndex = this.parser.endIndex;\n        }\n        parent.children.push(node);\n        if (previousSibling) {\n            node.prev = previousSibling;\n            previousSibling.next = node;\n        }\n        node.parent = parent;\n        this.lastNode = null;\n    };\n    return DomHandler;\n}());\nexports.DomHandler = DomHandler;\nexports.default = DomHandler;\n","\"use strict\";\n\nexports.load = function (received, defaults, onto = {}) {\n  var k, ref, v;\n\n  for (k in defaults) {\n    v = defaults[k];\n    onto[k] = (ref = received[k]) != null ? ref : v;\n  }\n\n  return onto;\n};\n\nexports.overwrite = function (received, defaults, onto = {}) {\n  var k, v;\n\n  for (k in received) {\n    v = received[k];\n\n    if (defaults[k] !== void 0) {\n      onto[k] = v;\n    }\n  }\n\n  return onto;\n};","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.string = exports.stream = exports.pattern = exports.path = exports.fs = exports.errno = exports.array = void 0;\r\nconst array = require(\"./array\");\r\nexports.array = array;\r\nconst errno = require(\"./errno\");\r\nexports.errno = errno;\r\nconst fs = require(\"./fs\");\r\nexports.fs = fs;\r\nconst path = require(\"./path\");\r\nexports.path = path;\r\nconst pattern = require(\"./pattern\");\r\nexports.pattern = pattern;\r\nconst stream = require(\"./stream\");\r\nexports.stream = stream;\r\nconst string = require(\"./string\");\r\nexports.string = string;\r\n","module.exports = require(\"zlib\");","'use strict'\nconst u = require('universalify').fromPromise\nconst fs = require('../fs')\n\nfunction pathExists (path) {\n  return fs.access(path).then(() => true).catch(() => false)\n}\n\nmodule.exports = {\n  pathExists: u(pathExists),\n  pathExistsSync: fs.existsSync\n}\n","module.exports = require(\"better-sqlite3\");","'use strict'\n// This is adapted from https://github.com/normalize/mz\n// Copyright (c) 2014-2016 Jonathan Ong me@jongleberry.com and Contributors\nconst u = require('universalify').fromCallback\nconst fs = require('graceful-fs')\n\nconst api = [\n  'access',\n  'appendFile',\n  'chmod',\n  'chown',\n  'close',\n  'copyFile',\n  'fchmod',\n  'fchown',\n  'fdatasync',\n  'fstat',\n  'fsync',\n  'ftruncate',\n  'futimes',\n  'lchmod',\n  'lchown',\n  'link',\n  'lstat',\n  'mkdir',\n  'mkdtemp',\n  'open',\n  'opendir',\n  'readdir',\n  'readFile',\n  'readlink',\n  'realpath',\n  'rename',\n  'rm',\n  'rmdir',\n  'stat',\n  'symlink',\n  'truncate',\n  'unlink',\n  'utimes',\n  'writeFile'\n].filter(key => {\n  // Some commands are not available on some systems. Ex:\n  // fs.opendir was added in Node.js v12.12.0\n  // fs.rm was added in Node.js v14.14.0\n  // fs.lchown is not available on at least some Linux\n  return typeof fs[key] === 'function'\n})\n\n// Export cloned fs:\nObject.assign(exports, fs)\n\n// Universalify async methods:\napi.forEach(method => {\n  exports[method] = u(fs[method])\n})\nexports.realpath.native = u(fs.realpath.native)\n\n// We differ from mz/fs in that we still ship the old, broken, fs.exists()\n// since we are a drop-in replacement for the native module\nexports.exists = function (filename, callback) {\n  if (typeof callback === 'function') {\n    return fs.exists(filename, callback)\n  }\n  return new Promise(resolve => {\n    return fs.exists(filename, resolve)\n  })\n}\n\n// fs.read(), fs.write(), & fs.writev() need special treatment due to multiple callback args\n\nexports.read = function (fd, buffer, offset, length, position, callback) {\n  if (typeof callback === 'function') {\n    return fs.read(fd, buffer, offset, length, position, callback)\n  }\n  return new Promise((resolve, reject) => {\n    fs.read(fd, buffer, offset, length, position, (err, bytesRead, buffer) => {\n      if (err) return reject(err)\n      resolve({ bytesRead, buffer })\n    })\n  })\n}\n\n// Function signature can be\n// fs.write(fd, buffer[, offset[, length[, position]]], callback)\n// OR\n// fs.write(fd, string[, position[, encoding]], callback)\n// We need to handle both cases, so we use ...args\nexports.write = function (fd, buffer, ...args) {\n  if (typeof args[args.length - 1] === 'function') {\n    return fs.write(fd, buffer, ...args)\n  }\n\n  return new Promise((resolve, reject) => {\n    fs.write(fd, buffer, ...args, (err, bytesWritten, buffer) => {\n      if (err) return reject(err)\n      resolve({ bytesWritten, buffer })\n    })\n  })\n}\n\n// fs.writev only available in Node v12.9.0+\nif (typeof fs.writev === 'function') {\n  // Function signature is\n  // s.writev(fd, buffers[, position], callback)\n  // We need to handle the optional arg, so we use ...args\n  exports.writev = function (fd, buffers, ...args) {\n    if (typeof args[args.length - 1] === 'function') {\n      return fs.writev(fd, buffers, ...args)\n    }\n\n    return new Promise((resolve, reject) => {\n      fs.writev(fd, buffers, ...args, (err, bytesWritten, buffers) => {\n        if (err) return reject(err)\n        resolve({ bytesWritten, buffers })\n      })\n    })\n  }\n}\n","'use strict'\n\nconst fs = require('../fs')\nconst path = require('path')\nconst util = require('util')\n\nfunction getStats (src, dest, opts) {\n  const statFunc = opts.dereference\n    ? (file) => fs.stat(file, { bigint: true })\n    : (file) => fs.lstat(file, { bigint: true })\n  return Promise.all([\n    statFunc(src),\n    statFunc(dest).catch(err => {\n      if (err.code === 'ENOENT') return null\n      throw err\n    })\n  ]).then(([srcStat, destStat]) => ({ srcStat, destStat }))\n}\n\nfunction getStatsSync (src, dest, opts) {\n  let destStat\n  const statFunc = opts.dereference\n    ? (file) => fs.statSync(file, { bigint: true })\n    : (file) => fs.lstatSync(file, { bigint: true })\n  const srcStat = statFunc(src)\n  try {\n    destStat = statFunc(dest)\n  } catch (err) {\n    if (err.code === 'ENOENT') return { srcStat, destStat: null }\n    throw err\n  }\n  return { srcStat, destStat }\n}\n\nfunction checkPaths (src, dest, funcName, opts, cb) {\n  util.callbackify(getStats)(src, dest, opts, (err, stats) => {\n    if (err) return cb(err)\n    const { srcStat, destStat } = stats\n\n    if (destStat) {\n      if (areIdentical(srcStat, destStat)) {\n        const srcBaseName = path.basename(src)\n        const destBaseName = path.basename(dest)\n        if (funcName === 'move' &&\n          srcBaseName !== destBaseName &&\n          srcBaseName.toLowerCase() === destBaseName.toLowerCase()) {\n          return cb(null, { srcStat, destStat, isChangingCase: true })\n        }\n        return cb(new Error('Source and destination must not be the same.'))\n      }\n      if (srcStat.isDirectory() && !destStat.isDirectory()) {\n        return cb(new Error(`Cannot overwrite non-directory '${dest}' with directory '${src}'.`))\n      }\n      if (!srcStat.isDirectory() && destStat.isDirectory()) {\n        return cb(new Error(`Cannot overwrite directory '${dest}' with non-directory '${src}'.`))\n      }\n    }\n\n    if (srcStat.isDirectory() && isSrcSubdir(src, dest)) {\n      return cb(new Error(errMsg(src, dest, funcName)))\n    }\n    return cb(null, { srcStat, destStat })\n  })\n}\n\nfunction checkPathsSync (src, dest, funcName, opts) {\n  const { srcStat, destStat } = getStatsSync(src, dest, opts)\n\n  if (destStat) {\n    if (areIdentical(srcStat, destStat)) {\n      const srcBaseName = path.basename(src)\n      const destBaseName = path.basename(dest)\n      if (funcName === 'move' &&\n        srcBaseName !== destBaseName &&\n        srcBaseName.toLowerCase() === destBaseName.toLowerCase()) {\n        return { srcStat, destStat, isChangingCase: true }\n      }\n      throw new Error('Source and destination must not be the same.')\n    }\n    if (srcStat.isDirectory() && !destStat.isDirectory()) {\n      throw new Error(`Cannot overwrite non-directory '${dest}' with directory '${src}'.`)\n    }\n    if (!srcStat.isDirectory() && destStat.isDirectory()) {\n      throw new Error(`Cannot overwrite directory '${dest}' with non-directory '${src}'.`)\n    }\n  }\n\n  if (srcStat.isDirectory() && isSrcSubdir(src, dest)) {\n    throw new Error(errMsg(src, dest, funcName))\n  }\n  return { srcStat, destStat }\n}\n\n// recursively check if dest parent is a subdirectory of src.\n// It works for all file types including symlinks since it\n// checks the src and dest inodes. It starts from the deepest\n// parent and stops once it reaches the src parent or the root path.\nfunction checkParentPaths (src, srcStat, dest, funcName, cb) {\n  const srcParent = path.resolve(path.dirname(src))\n  const destParent = path.resolve(path.dirname(dest))\n  if (destParent === srcParent || destParent === path.parse(destParent).root) return cb()\n  fs.stat(destParent, { bigint: true }, (err, destStat) => {\n    if (err) {\n      if (err.code === 'ENOENT') return cb()\n      return cb(err)\n    }\n    if (areIdentical(srcStat, destStat)) {\n      return cb(new Error(errMsg(src, dest, funcName)))\n    }\n    return checkParentPaths(src, srcStat, destParent, funcName, cb)\n  })\n}\n\nfunction checkParentPathsSync (src, srcStat, dest, funcName) {\n  const srcParent = path.resolve(path.dirname(src))\n  const destParent = path.resolve(path.dirname(dest))\n  if (destParent === srcParent || destParent === path.parse(destParent).root) return\n  let destStat\n  try {\n    destStat = fs.statSync(destParent, { bigint: true })\n  } catch (err) {\n    if (err.code === 'ENOENT') return\n    throw err\n  }\n  if (areIdentical(srcStat, destStat)) {\n    throw new Error(errMsg(src, dest, funcName))\n  }\n  return checkParentPathsSync(src, srcStat, destParent, funcName)\n}\n\nfunction areIdentical (srcStat, destStat) {\n  return destStat.ino && destStat.dev && destStat.ino === srcStat.ino && destStat.dev === srcStat.dev\n}\n\n// return true if dest is a subdir of src, otherwise false.\n// It only checks the path strings.\nfunction isSrcSubdir (src, dest) {\n  const srcArr = path.resolve(src).split(path.sep).filter(i => i)\n  const destArr = path.resolve(dest).split(path.sep).filter(i => i)\n  return srcArr.reduce((acc, cur, i) => acc && destArr[i] === cur, true)\n}\n\nfunction errMsg (src, dest, funcName) {\n  return `Cannot ${funcName} '${src}' to a subdirectory of itself, '${dest}'.`\n}\n\nmodule.exports = {\n  checkPaths,\n  checkPathsSync,\n  checkParentPaths,\n  checkParentPathsSync,\n  isSrcSubdir,\n  areIdentical\n}\n","\"use strict\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar Events;\nEvents = class Events {\n  constructor(instance) {\n    this.instance = instance;\n    this._events = {};\n\n    if (this.instance.on != null || this.instance.once != null || this.instance.removeAllListeners != null) {\n      throw new Error(\"An Emitter already exists for this object\");\n    }\n\n    this.instance.on = (name, cb) => {\n      return this._addListener(name, \"many\", cb);\n    };\n\n    this.instance.once = (name, cb) => {\n      return this._addListener(name, \"once\", cb);\n    };\n\n    this.instance.removeAllListeners = (name = null) => {\n      if (name != null) {\n        return delete this._events[name];\n      } else {\n        return this._events = {};\n      }\n    };\n  }\n\n  _addListener(name, status, cb) {\n    var base;\n\n    if ((base = this._events)[name] == null) {\n      base[name] = [];\n    }\n\n    this._events[name].push({\n      cb,\n      status\n    });\n\n    return this.instance;\n  }\n\n  listenerCount(name) {\n    if (this._events[name] != null) {\n      return this._events[name].length;\n    } else {\n      return 0;\n    }\n  }\n\n  trigger(name, ...args) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      var e, promises;\n\n      try {\n        if (name !== \"debug\") {\n          _this.trigger(\"debug\", `Event triggered: ${name}`, args);\n        }\n\n        if (_this._events[name] == null) {\n          return;\n        }\n\n        _this._events[name] = _this._events[name].filter(function (listener) {\n          return listener.status !== \"none\";\n        });\n        promises = _this._events[name].map(\n        /*#__PURE__*/\n        function () {\n          var _ref = _asyncToGenerator(function* (listener) {\n            var e, returned;\n\n            if (listener.status === \"none\") {\n              return;\n            }\n\n            if (listener.status === \"once\") {\n              listener.status = \"none\";\n            }\n\n            try {\n              returned = typeof listener.cb === \"function\" ? listener.cb(...args) : void 0;\n\n              if (typeof (returned != null ? returned.then : void 0) === \"function\") {\n                return yield returned;\n              } else {\n                return returned;\n              }\n            } catch (error) {\n              e = error;\n\n              if (\"name\" !== \"error\") {\n                _this.trigger(\"error\", e);\n              }\n\n              return null;\n            }\n          });\n\n          return function (_x) {\n            return _ref.apply(this, arguments);\n          };\n        }());\n        return (yield Promise.all(promises)).find(function (x) {\n          return x != null;\n        });\n      } catch (error) {\n        e = error;\n\n        if (\"name\" !== \"error\") {\n          _this.trigger(\"error\", e);\n        }\n\n        return null;\n      }\n    })();\n  }\n\n};\nmodule.exports = Events;","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.statSync = exports.stat = exports.Settings = void 0;\r\nconst async = require(\"./providers/async\");\r\nconst sync = require(\"./providers/sync\");\r\nconst settings_1 = require(\"./settings\");\r\nexports.Settings = settings_1.default;\r\nfunction stat(path, optionsOrSettingsOrCallback, callback) {\r\n    if (typeof optionsOrSettingsOrCallback === 'function') {\r\n        return async.read(path, getSettings(), optionsOrSettingsOrCallback);\r\n    }\r\n    async.read(path, getSettings(optionsOrSettingsOrCallback), callback);\r\n}\r\nexports.stat = stat;\r\nfunction statSync(path, optionsOrSettings) {\r\n    const settings = getSettings(optionsOrSettings);\r\n    return sync.read(path, settings);\r\n}\r\nexports.statSync = statSync;\r\nfunction getSettings(settingsOrOptions = {}) {\r\n    if (settingsOrOptions instanceof settings_1.default) {\r\n        return settingsOrOptions;\r\n    }\r\n    return new settings_1.default(settingsOrOptions);\r\n}\r\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decodeXMLStrict = exports.decodeHTML5Strict = exports.decodeHTML4Strict = exports.decodeHTML5 = exports.decodeHTML4 = exports.decodeHTMLStrict = exports.decodeHTML = exports.decodeXML = exports.encodeHTML5 = exports.encodeHTML4 = exports.escapeUTF8 = exports.escape = exports.encodeNonAsciiHTML = exports.encodeHTML = exports.encodeXML = exports.encode = exports.decodeStrict = exports.decode = void 0;\nvar decode_1 = require(\"./decode\");\nvar encode_1 = require(\"./encode\");\n/**\n * Decodes a string with entities.\n *\n * @param data String to decode.\n * @param level Optional level to decode at. 0 = XML, 1 = HTML. Default is 0.\n * @deprecated Use `decodeXML` or `decodeHTML` directly.\n */\nfunction decode(data, level) {\n    return (!level || level <= 0 ? decode_1.decodeXML : decode_1.decodeHTML)(data);\n}\nexports.decode = decode;\n/**\n * Decodes a string with entities. Does not allow missing trailing semicolons for entities.\n *\n * @param data String to decode.\n * @param level Optional level to decode at. 0 = XML, 1 = HTML. Default is 0.\n * @deprecated Use `decodeHTMLStrict` or `decodeXML` directly.\n */\nfunction decodeStrict(data, level) {\n    return (!level || level <= 0 ? decode_1.decodeXML : decode_1.decodeHTMLStrict)(data);\n}\nexports.decodeStrict = decodeStrict;\n/**\n * Encodes a string with entities.\n *\n * @param data String to encode.\n * @param level Optional level to encode at. 0 = XML, 1 = HTML. Default is 0.\n * @deprecated Use `encodeHTML`, `encodeXML` or `encodeNonAsciiHTML` directly.\n */\nfunction encode(data, level) {\n    return (!level || level <= 0 ? encode_1.encodeXML : encode_1.encodeHTML)(data);\n}\nexports.encode = encode;\nvar encode_2 = require(\"./encode\");\nObject.defineProperty(exports, \"encodeXML\", { enumerable: true, get: function () { return encode_2.encodeXML; } });\nObject.defineProperty(exports, \"encodeHTML\", { enumerable: true, get: function () { return encode_2.encodeHTML; } });\nObject.defineProperty(exports, \"encodeNonAsciiHTML\", { enumerable: true, get: function () { return encode_2.encodeNonAsciiHTML; } });\nObject.defineProperty(exports, \"escape\", { enumerable: true, get: function () { return encode_2.escape; } });\nObject.defineProperty(exports, \"escapeUTF8\", { enumerable: true, get: function () { return encode_2.escapeUTF8; } });\n// Legacy aliases (deprecated)\nObject.defineProperty(exports, \"encodeHTML4\", { enumerable: true, get: function () { return encode_2.encodeHTML; } });\nObject.defineProperty(exports, \"encodeHTML5\", { enumerable: true, get: function () { return encode_2.encodeHTML; } });\nvar decode_2 = require(\"./decode\");\nObject.defineProperty(exports, \"decodeXML\", { enumerable: true, get: function () { return decode_2.decodeXML; } });\nObject.defineProperty(exports, \"decodeHTML\", { enumerable: true, get: function () { return decode_2.decodeHTML; } });\nObject.defineProperty(exports, \"decodeHTMLStrict\", { enumerable: true, get: function () { return decode_2.decodeHTMLStrict; } });\n// Legacy aliases (deprecated)\nObject.defineProperty(exports, \"decodeHTML4\", { enumerable: true, get: function () { return decode_2.decodeHTML; } });\nObject.defineProperty(exports, \"decodeHTML5\", { enumerable: true, get: function () { return decode_2.decodeHTML; } });\nObject.defineProperty(exports, \"decodeHTML4Strict\", { enumerable: true, get: function () { return decode_2.decodeHTMLStrict; } });\nObject.defineProperty(exports, \"decodeHTML5Strict\", { enumerable: true, get: function () { return decode_2.decodeHTMLStrict; } });\nObject.defineProperty(exports, \"decodeXMLStrict\", { enumerable: true, get: function () { return decode_2.decodeXML; } });\n","\"use strict\";\n\nvar realFetch = require('node-fetch');\nmodule.exports = function(url, options) {\n\tif (/^\\/\\//.test(url)) {\n\t\turl = 'https:' + url;\n\t}\n\treturn realFetch.call(this, url, options);\n};\n\nif (!global.fetch) {\n\tglobal.fetch = module.exports;\n\tglobal.Response = realFetch.Response;\n\tglobal.Headers = realFetch.Headers;\n\tglobal.Request = realFetch.Request;\n}\n","/*! https://mths.be/base64 v1.0.0 by @mathias | MIT license */\n;(function(root) {\n\n\t// Detect free variables `exports`.\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`.\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code, and use\n\t// it as `root`.\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar InvalidCharacterError = function(message) {\n\t\tthis.message = message;\n\t};\n\tInvalidCharacterError.prototype = new Error;\n\tInvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\n\tvar error = function(message) {\n\t\t// Note: the error messages used throughout this file match those used by\n\t\t// the native `atob`/`btoa` implementation in Chromium.\n\t\tthrow new InvalidCharacterError(message);\n\t};\n\n\tvar TABLE = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\t// http://whatwg.org/html/common-microsyntaxes.html#space-character\n\tvar REGEX_SPACE_CHARACTERS = /[\\t\\n\\f\\r ]/g;\n\n\t// `decode` is designed to be fully compatible with `atob` as described in the\n\t// HTML Standard. http://whatwg.org/html/webappapis.html#dom-windowbase64-atob\n\t// The optimized base64-decoding algorithm used is based on @atks excellent\n\t// implementation. https://gist.github.com/atk/1020396\n\tvar decode = function(input) {\n\t\tinput = String(input)\n\t\t\t.replace(REGEX_SPACE_CHARACTERS, '');\n\t\tvar length = input.length;\n\t\tif (length % 4 == 0) {\n\t\t\tinput = input.replace(/==?$/, '');\n\t\t\tlength = input.length;\n\t\t}\n\t\tif (\n\t\t\tlength % 4 == 1 ||\n\t\t\t// http://whatwg.org/C#alphanumeric-ascii-characters\n\t\t\t/[^+a-zA-Z0-9/]/.test(input)\n\t\t) {\n\t\t\terror(\n\t\t\t\t'Invalid character: the string to be decoded is not correctly encoded.'\n\t\t\t);\n\t\t}\n\t\tvar bitCounter = 0;\n\t\tvar bitStorage;\n\t\tvar buffer;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\twhile (++position < length) {\n\t\t\tbuffer = TABLE.indexOf(input.charAt(position));\n\t\t\tbitStorage = bitCounter % 4 ? bitStorage * 64 + buffer : buffer;\n\t\t\t// Unless this is the first of a group of 4 characters\n\t\t\tif (bitCounter++ % 4) {\n\t\t\t\t// convert the first 8 bits to a single ASCII character.\n\t\t\t\toutput += String.fromCharCode(\n\t\t\t\t\t0xFF & bitStorage >> (-2 * bitCounter & 6)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t};\n\n\t// `encode` is designed to be fully compatible with `btoa` as described in the\n\t// HTML Standard: http://whatwg.org/html/webappapis.html#dom-windowbase64-btoa\n\tvar encode = function(input) {\n\t\tinput = String(input);\n\t\tif (/[^\\0-\\xFF]/.test(input)) {\n\t\t\t// Note: no need to special-case astral symbols here, as surrogates are\n\t\t\t// matched, and the input is supposed to only contain ASCII anyway.\n\t\t\terror(\n\t\t\t\t'The string to be encoded contains characters outside of the ' +\n\t\t\t\t'Latin1 range.'\n\t\t\t);\n\t\t}\n\t\tvar padding = input.length % 3;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\tvar a;\n\t\tvar b;\n\t\tvar c;\n\t\tvar buffer;\n\t\t// Make sure any padding is handled outside of the loop.\n\t\tvar length = input.length - padding;\n\n\t\twhile (++position < length) {\n\t\t\t// Read three bytes, i.e. 24 bits.\n\t\t\ta = input.charCodeAt(position) << 16;\n\t\t\tb = input.charCodeAt(++position) << 8;\n\t\t\tc = input.charCodeAt(++position);\n\t\t\tbuffer = a + b + c;\n\t\t\t// Turn the 24 bits into four chunks of 6 bits each, and append the\n\t\t\t// matching character for each of them to the output.\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 18 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 12 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 6 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer & 0x3F)\n\t\t\t);\n\t\t}\n\n\t\tif (padding == 2) {\n\t\t\ta = input.charCodeAt(position) << 8;\n\t\t\tb = input.charCodeAt(++position);\n\t\t\tbuffer = a + b;\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 10) +\n\t\t\t\tTABLE.charAt((buffer >> 4) & 0x3F) +\n\t\t\t\tTABLE.charAt((buffer << 2) & 0x3F) +\n\t\t\t\t'='\n\t\t\t);\n\t\t} else if (padding == 1) {\n\t\t\tbuffer = input.charCodeAt(position);\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 2) +\n\t\t\t\tTABLE.charAt((buffer << 4) & 0x3F) +\n\t\t\t\t'=='\n\t\t\t);\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tvar base64 = {\n\t\t'encode': encode,\n\t\t'decode': decode,\n\t\t'version': '1.0.0'\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn base64;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = base64;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (var key in base64) {\n\t\t\t\tbase64.hasOwnProperty(key) && (freeExports[key] = base64[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.base64 = base64;\n\t}\n\n}(this));\n","\"use strict\";\n\nvar BottleneckError;\nBottleneckError = class BottleneckError extends Error {};\nmodule.exports = BottleneckError;","module.exports = require(\"os\");","'use strict'\n\nconst fs = require('graceful-fs')\nconst u = require('universalify').fromCallback\nconst rimraf = require('./rimraf')\n\nfunction remove (path, callback) {\n  // Node 14.14.0+\n  if (fs.rm) return fs.rm(path, { recursive: true, force: true }, callback)\n  rimraf(path, callback)\n}\n\nfunction removeSync (path) {\n  // Node 14.14.0+\n  if (fs.rmSync) return fs.rmSync(path, { recursive: true, force: true })\n  rimraf.sync(path)\n}\n\nmodule.exports = {\n  remove: u(remove),\n  removeSync\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Doctype = exports.CDATA = exports.Tag = exports.Style = exports.Script = exports.Comment = exports.Directive = exports.Text = exports.Root = exports.isTag = exports.ElementType = void 0;\n/** Types of elements found in htmlparser2's DOM */\nvar ElementType;\n(function (ElementType) {\n    /** Type for the root element of a document */\n    ElementType[\"Root\"] = \"root\";\n    /** Type for Text */\n    ElementType[\"Text\"] = \"text\";\n    /** Type for <? ... ?> */\n    ElementType[\"Directive\"] = \"directive\";\n    /** Type for <!-- ... --> */\n    ElementType[\"Comment\"] = \"comment\";\n    /** Type for <script> tags */\n    ElementType[\"Script\"] = \"script\";\n    /** Type for <style> tags */\n    ElementType[\"Style\"] = \"style\";\n    /** Type for Any tag */\n    ElementType[\"Tag\"] = \"tag\";\n    /** Type for <![CDATA[ ... ]]> */\n    ElementType[\"CDATA\"] = \"cdata\";\n    /** Type for <!doctype ...> */\n    ElementType[\"Doctype\"] = \"doctype\";\n})(ElementType = exports.ElementType || (exports.ElementType = {}));\n/**\n * Tests whether an element is a tag or not.\n *\n * @param elem Element to test\n */\nfunction isTag(elem) {\n    return (elem.type === ElementType.Tag ||\n        elem.type === ElementType.Script ||\n        elem.type === ElementType.Style);\n}\nexports.isTag = isTag;\n// Exports for backwards compatibility\n/** Type for the root element of a document */\nexports.Root = ElementType.Root;\n/** Type for Text */\nexports.Text = ElementType.Text;\n/** Type for <? ... ?> */\nexports.Directive = ElementType.Directive;\n/** Type for <!-- ... --> */\nexports.Comment = ElementType.Comment;\n/** Type for <script> tags */\nexports.Script = ElementType.Script;\n/** Type for <style> tags */\nexports.Style = ElementType.Style;\n/** Type for Any tag */\nexports.Tag = ElementType.Tag;\n/** Type for <![CDATA[ ... ]]> */\nexports.CDATA = ElementType.CDATA;\n/** Type for <!doctype ...> */\nexports.Doctype = ElementType.Doctype;\n","'use strict';\n\nconst path = require('path');\nconst win32 = process.platform === 'win32';\nconst {\n  REGEX_BACKSLASH,\n  REGEX_REMOVE_BACKSLASH,\n  REGEX_SPECIAL_CHARS,\n  REGEX_SPECIAL_CHARS_GLOBAL\n} = require('./constants');\n\nexports.isObject = val => val !== null && typeof val === 'object' && !Array.isArray(val);\nexports.hasRegexChars = str => REGEX_SPECIAL_CHARS.test(str);\nexports.isRegexChar = str => str.length === 1 && exports.hasRegexChars(str);\nexports.escapeRegex = str => str.replace(REGEX_SPECIAL_CHARS_GLOBAL, '\\\\$1');\nexports.toPosixSlashes = str => str.replace(REGEX_BACKSLASH, '/');\n\nexports.removeBackslashes = str => {\n  return str.replace(REGEX_REMOVE_BACKSLASH, match => {\n    return match === '\\\\' ? '' : match;\n  });\n};\n\nexports.supportsLookbehinds = () => {\n  const segs = process.version.slice(1).split('.').map(Number);\n  if (segs.length === 3 && segs[0] >= 9 || (segs[0] === 8 && segs[1] >= 10)) {\n    return true;\n  }\n  return false;\n};\n\nexports.isWindows = options => {\n  if (options && typeof options.windows === 'boolean') {\n    return options.windows;\n  }\n  return win32 === true || path.sep === '\\\\';\n};\n\nexports.escapeLast = (input, char, lastIdx) => {\n  const idx = input.lastIndexOf(char, lastIdx);\n  if (idx === -1) return input;\n  if (input[idx - 1] === '\\\\') return exports.escapeLast(input, char, idx - 1);\n  return `${input.slice(0, idx)}\\\\${input.slice(idx)}`;\n};\n\nexports.removePrefix = (input, state = {}) => {\n  let output = input;\n  if (output.startsWith('./')) {\n    output = output.slice(2);\n    state.prefix = './';\n  }\n  return output;\n};\n\nexports.wrapOutput = (input, state = {}, options = {}) => {\n  const prepend = options.contains ? '' : '^';\n  const append = options.contains ? '' : '$';\n\n  let output = `${prepend}(?:${input})${append}`;\n  if (state.negated === true) {\n    output = `(?:^(?!${output}).*$)`;\n  }\n  return output;\n};\n","'use strict';\n\nconst path = require('path');\nconst WIN_SLASH = '\\\\\\\\/';\nconst WIN_NO_SLASH = `[^${WIN_SLASH}]`;\n\n/**\n * Posix glob regex\n */\n\nconst DOT_LITERAL = '\\\\.';\nconst PLUS_LITERAL = '\\\\+';\nconst QMARK_LITERAL = '\\\\?';\nconst SLASH_LITERAL = '\\\\/';\nconst ONE_CHAR = '(?=.)';\nconst QMARK = '[^/]';\nconst END_ANCHOR = `(?:${SLASH_LITERAL}|$)`;\nconst START_ANCHOR = `(?:^|${SLASH_LITERAL})`;\nconst DOTS_SLASH = `${DOT_LITERAL}{1,2}${END_ANCHOR}`;\nconst NO_DOT = `(?!${DOT_LITERAL})`;\nconst NO_DOTS = `(?!${START_ANCHOR}${DOTS_SLASH})`;\nconst NO_DOT_SLASH = `(?!${DOT_LITERAL}{0,1}${END_ANCHOR})`;\nconst NO_DOTS_SLASH = `(?!${DOTS_SLASH})`;\nconst QMARK_NO_DOT = `[^.${SLASH_LITERAL}]`;\nconst STAR = `${QMARK}*?`;\n\nconst POSIX_CHARS = {\n  DOT_LITERAL,\n  PLUS_LITERAL,\n  QMARK_LITERAL,\n  SLASH_LITERAL,\n  ONE_CHAR,\n  QMARK,\n  END_ANCHOR,\n  DOTS_SLASH,\n  NO_DOT,\n  NO_DOTS,\n  NO_DOT_SLASH,\n  NO_DOTS_SLASH,\n  QMARK_NO_DOT,\n  STAR,\n  START_ANCHOR\n};\n\n/**\n * Windows glob regex\n */\n\nconst WINDOWS_CHARS = {\n  ...POSIX_CHARS,\n\n  SLASH_LITERAL: `[${WIN_SLASH}]`,\n  QMARK: WIN_NO_SLASH,\n  STAR: `${WIN_NO_SLASH}*?`,\n  DOTS_SLASH: `${DOT_LITERAL}{1,2}(?:[${WIN_SLASH}]|$)`,\n  NO_DOT: `(?!${DOT_LITERAL})`,\n  NO_DOTS: `(?!(?:^|[${WIN_SLASH}])${DOT_LITERAL}{1,2}(?:[${WIN_SLASH}]|$))`,\n  NO_DOT_SLASH: `(?!${DOT_LITERAL}{0,1}(?:[${WIN_SLASH}]|$))`,\n  NO_DOTS_SLASH: `(?!${DOT_LITERAL}{1,2}(?:[${WIN_SLASH}]|$))`,\n  QMARK_NO_DOT: `[^.${WIN_SLASH}]`,\n  START_ANCHOR: `(?:^|[${WIN_SLASH}])`,\n  END_ANCHOR: `(?:[${WIN_SLASH}]|$)`\n};\n\n/**\n * POSIX Bracket Regex\n */\n\nconst POSIX_REGEX_SOURCE = {\n  alnum: 'a-zA-Z0-9',\n  alpha: 'a-zA-Z',\n  ascii: '\\\\x00-\\\\x7F',\n  blank: ' \\\\t',\n  cntrl: '\\\\x00-\\\\x1F\\\\x7F',\n  digit: '0-9',\n  graph: '\\\\x21-\\\\x7E',\n  lower: 'a-z',\n  print: '\\\\x20-\\\\x7E ',\n  punct: '\\\\-!\"#$%&\\'()\\\\*+,./:;<=>?@[\\\\]^_`{|}~',\n  space: ' \\\\t\\\\r\\\\n\\\\v\\\\f',\n  upper: 'A-Z',\n  word: 'A-Za-z0-9_',\n  xdigit: 'A-Fa-f0-9'\n};\n\nmodule.exports = {\n  MAX_LENGTH: 1024 * 64,\n  POSIX_REGEX_SOURCE,\n\n  // regular expressions\n  REGEX_BACKSLASH: /\\\\(?![*+?^${}(|)[\\]])/g,\n  REGEX_NON_SPECIAL_CHARS: /^[^@![\\].,$*+?^{}()|\\\\/]+/,\n  REGEX_SPECIAL_CHARS: /[-*+?.^${}(|)[\\]]/,\n  REGEX_SPECIAL_CHARS_BACKREF: /(\\\\?)((\\W)(\\3*))/g,\n  REGEX_SPECIAL_CHARS_GLOBAL: /([-*+?.^${}(|)[\\]])/g,\n  REGEX_REMOVE_BACKSLASH: /(?:\\[.*?[^\\\\]\\]|\\\\(?=.))/g,\n\n  // Replace globs with equivalent patterns to reduce parsing time.\n  REPLACEMENTS: {\n    '***': '*',\n    '**/**': '**',\n    '**/**/**': '**'\n  },\n\n  // Digits\n  CHAR_0: 48, /* 0 */\n  CHAR_9: 57, /* 9 */\n\n  // Alphabet chars.\n  CHAR_UPPERCASE_A: 65, /* A */\n  CHAR_LOWERCASE_A: 97, /* a */\n  CHAR_UPPERCASE_Z: 90, /* Z */\n  CHAR_LOWERCASE_Z: 122, /* z */\n\n  CHAR_LEFT_PARENTHESES: 40, /* ( */\n  CHAR_RIGHT_PARENTHESES: 41, /* ) */\n\n  CHAR_ASTERISK: 42, /* * */\n\n  // Non-alphabetic chars.\n  CHAR_AMPERSAND: 38, /* & */\n  CHAR_AT: 64, /* @ */\n  CHAR_BACKWARD_SLASH: 92, /* \\ */\n  CHAR_CARRIAGE_RETURN: 13, /* \\r */\n  CHAR_CIRCUMFLEX_ACCENT: 94, /* ^ */\n  CHAR_COLON: 58, /* : */\n  CHAR_COMMA: 44, /* , */\n  CHAR_DOT: 46, /* . */\n  CHAR_DOUBLE_QUOTE: 34, /* \" */\n  CHAR_EQUAL: 61, /* = */\n  CHAR_EXCLAMATION_MARK: 33, /* ! */\n  CHAR_FORM_FEED: 12, /* \\f */\n  CHAR_FORWARD_SLASH: 47, /* / */\n  CHAR_GRAVE_ACCENT: 96, /* ` */\n  CHAR_HASH: 35, /* # */\n  CHAR_HYPHEN_MINUS: 45, /* - */\n  CHAR_LEFT_ANGLE_BRACKET: 60, /* < */\n  CHAR_LEFT_CURLY_BRACE: 123, /* { */\n  CHAR_LEFT_SQUARE_BRACKET: 91, /* [ */\n  CHAR_LINE_FEED: 10, /* \\n */\n  CHAR_NO_BREAK_SPACE: 160, /* \\u00A0 */\n  CHAR_PERCENT: 37, /* % */\n  CHAR_PLUS: 43, /* + */\n  CHAR_QUESTION_MARK: 63, /* ? */\n  CHAR_RIGHT_ANGLE_BRACKET: 62, /* > */\n  CHAR_RIGHT_CURLY_BRACE: 125, /* } */\n  CHAR_RIGHT_SQUARE_BRACKET: 93, /* ] */\n  CHAR_SEMICOLON: 59, /* ; */\n  CHAR_SINGLE_QUOTE: 39, /* ' */\n  CHAR_SPACE: 32, /*   */\n  CHAR_TAB: 9, /* \\t */\n  CHAR_UNDERSCORE: 95, /* _ */\n  CHAR_VERTICAL_LINE: 124, /* | */\n  CHAR_ZERO_WIDTH_NOBREAK_SPACE: 65279, /* \\uFEFF */\n\n  SEP: path.sep,\n\n  /**\n   * Create EXTGLOB_CHARS\n   */\n\n  extglobChars(chars) {\n    return {\n      '!': { type: 'negate', open: '(?:(?!(?:', close: `))${chars.STAR})` },\n      '?': { type: 'qmark', open: '(?:', close: ')?' },\n      '+': { type: 'plus', open: '(?:', close: ')+' },\n      '*': { type: 'star', open: '(?:', close: ')*' },\n      '@': { type: 'at', open: '(?:', close: ')' }\n    };\n  },\n\n  /**\n   * Create GLOB_CHARS\n   */\n\n  globChars(win32) {\n    return win32 === true ? WINDOWS_CHARS : POSIX_CHARS;\n  }\n};\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for comparison styles. */\nvar UNORDERED_COMPARE_FLAG = 1,\n    PARTIAL_COMPARE_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991,\n    MAX_INTEGER = 1.7976931348623157e+308,\n    NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/,\n    reLeadingDot = /^\\./,\n    rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object),\n    nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {boolean} [bitmask] The bitmask of comparison flags.\n *  The bitmask may be composed of the following flags:\n *     1 - Unordered comparison\n *     2 - Partial comparison\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, customizer, bitmask, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObject(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, baseIsEqual, customizer, bitmask, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {number} [bitmask] The bitmask of comparison flags. See `baseIsEqual`\n *  for more details.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, equalFunc, customizer, bitmask, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = arrayTag,\n      othTag = arrayTag;\n\n  if (!objIsArr) {\n    objTag = getTag(object);\n    objTag = objTag == argsTag ? objectTag : objTag;\n  }\n  if (!othIsArr) {\n    othTag = getTag(other);\n    othTag = othTag == argsTag ? objectTag : othTag;\n  }\n  var objIsObj = objTag == objectTag && !isHostObject(object),\n      othIsObj = othTag == objectTag && !isHostObject(other),\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, equalFunc, customizer, bitmask, stack)\n      : equalByTag(object, other, objTag, equalFunc, customizer, bitmask, stack);\n  }\n  if (!(bitmask & PARTIAL_COMPARE_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, customizer, bitmask, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, equalFunc, customizer, bitmask, stack);\n}\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, customizer, UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[objectToString.call(value)];\n}\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, undefined, UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG);\n  };\n}\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value) {\n  return isArray(value) ? value : stringToPath(value);\n}\n\n/**\n * Creates a `_.find` or `_.findLast` function.\n *\n * @private\n * @param {Function} findIndexFunc The function to find the collection index.\n * @returns {Function} Returns the new find function.\n */\nfunction createFind(findIndexFunc) {\n  return function(collection, predicate, fromIndex) {\n    var iterable = Object(collection);\n    if (!isArrayLike(collection)) {\n      var iteratee = baseIteratee(predicate, 3);\n      collection = keys(collection);\n      predicate = function(key) { return iteratee(iterable[key], key, iterable); };\n    }\n    var index = findIndexFunc(collection, predicate, fromIndex);\n    return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;\n  };\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual`\n *  for more details.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, equalFunc, customizer, bitmask, stack) {\n  var isPartial = bitmask & PARTIAL_COMPARE_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & UNORDERED_COMPARE_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!seen.has(othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, customizer, bitmask, stack))) {\n              return seen.add(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, customizer, bitmask, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual`\n *  for more details.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, equalFunc, customizer, bitmask, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & PARTIAL_COMPARE_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= UNORDERED_COMPARE_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), equalFunc, customizer, bitmask, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual`\n *  for more details.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, equalFunc, customizer, bitmask, stack) {\n  var isPartial = bitmask & PARTIAL_COMPARE_FLAG,\n      objProps = keys(object),\n      objLength = objProps.length,\n      othProps = keys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, customizer, bitmask, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var result,\n      index = -1,\n      length = path.length;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result) {\n    return result;\n  }\n  var length = object ? object.length : 0;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\n/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoize(function(string) {\n  string = toString(string);\n\n  var result = [];\n  if (reLeadingDot.test(string)) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.findIndex` except that it iterates over elements\n * of `collection` from right to left.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [predicate=_.identity]\n *  The function invoked per iteration.\n * @param {number} [fromIndex=array.length-1] The index to search from.\n * @returns {number} Returns the index of the found element, else `-1`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': true },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': false }\n * ];\n *\n * _.findLastIndex(users, function(o) { return o.user == 'pebbles'; });\n * // => 2\n *\n * // The `_.matches` iteratee shorthand.\n * _.findLastIndex(users, { 'user': 'barney', 'active': true });\n * // => 0\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.findLastIndex(users, ['active', false]);\n * // => 2\n *\n * // The `_.property` iteratee shorthand.\n * _.findLastIndex(users, 'active');\n * // => 0\n */\nfunction findLastIndex(array, predicate, fromIndex) {\n  var length = array ? array.length : 0;\n  if (!length) {\n    return -1;\n  }\n  var index = length - 1;\n  if (fromIndex !== undefined) {\n    index = toInteger(fromIndex);\n    index = fromIndex < 0\n      ? nativeMax(length + index, 0)\n      : nativeMin(index, length - 1);\n  }\n  return baseFindIndex(array, baseIteratee(predicate, 3), index, true);\n}\n\n/**\n * This method is like `_.find` except that it iterates over elements of\n * `collection` from right to left.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to inspect.\n * @param {Function} [predicate=_.identity]\n *  The function invoked per iteration.\n * @param {number} [fromIndex=collection.length-1] The index to search from.\n * @returns {*} Returns the matched element, else `undefined`.\n * @example\n *\n * _.findLast([1, 2, 3, 4], function(n) {\n *   return n % 2 == 1;\n * });\n * // => 3\n */\nvar findLast = createFind(findLastIndex);\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result);\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Assign cache to `_.memoize`.\nmemoize.Cache = MapCache;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = findLast;\n","module.exports = require(\"url\");","//     Underscore.js 1.9.1\n//     http://underscorejs.org\n//     (c) 2009-2018 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Underscore may be freely distributed under the MIT license.\n\n(function() {\n\n  // Baseline setup\n  // --------------\n\n  // Establish the root object, `window` (`self`) in the browser, `global`\n  // on the server, or `this` in some virtual machines. We use `self`\n  // instead of `window` for `WebWorker` support.\n  var root = typeof self == 'object' && self.self === self && self ||\n            typeof global == 'object' && global.global === global && global ||\n            this ||\n            {};\n\n  // Save the previous value of the `_` variable.\n  var previousUnderscore = root._;\n\n  // Save bytes in the minified (but not gzipped) version:\n  var ArrayProto = Array.prototype, ObjProto = Object.prototype;\n  var SymbolProto = typeof Symbol !== 'undefined' ? Symbol.prototype : null;\n\n  // Create quick reference variables for speed access to core prototypes.\n  var push = ArrayProto.push,\n      slice = ArrayProto.slice,\n      toString = ObjProto.toString,\n      hasOwnProperty = ObjProto.hasOwnProperty;\n\n  // All **ECMAScript 5** native function implementations that we hope to use\n  // are declared here.\n  var nativeIsArray = Array.isArray,\n      nativeKeys = Object.keys,\n      nativeCreate = Object.create;\n\n  // Naked function reference for surrogate-prototype-swapping.\n  var Ctor = function(){};\n\n  // Create a safe reference to the Underscore object for use below.\n  var _ = function(obj) {\n    if (obj instanceof _) return obj;\n    if (!(this instanceof _)) return new _(obj);\n    this._wrapped = obj;\n  };\n\n  // Export the Underscore object for **Node.js**, with\n  // backwards-compatibility for their old module API. If we're in\n  // the browser, add `_` as a global object.\n  // (`nodeType` is checked to ensure that `module`\n  // and `exports` are not HTML elements.)\n  if (typeof exports != 'undefined' && !exports.nodeType) {\n    if (typeof module != 'undefined' && !module.nodeType && module.exports) {\n      exports = module.exports = _;\n    }\n    exports._ = _;\n  } else {\n    root._ = _;\n  }\n\n  // Current version.\n  _.VERSION = '1.9.1';\n\n  // Internal function that returns an efficient (for current engines) version\n  // of the passed-in callback, to be repeatedly applied in other Underscore\n  // functions.\n  var optimizeCb = function(func, context, argCount) {\n    if (context === void 0) return func;\n    switch (argCount == null ? 3 : argCount) {\n      case 1: return function(value) {\n        return func.call(context, value);\n      };\n      // The 2-argument case is omitted because were not using it.\n      case 3: return function(value, index, collection) {\n        return func.call(context, value, index, collection);\n      };\n      case 4: return function(accumulator, value, index, collection) {\n        return func.call(context, accumulator, value, index, collection);\n      };\n    }\n    return function() {\n      return func.apply(context, arguments);\n    };\n  };\n\n  var builtinIteratee;\n\n  // An internal function to generate callbacks that can be applied to each\n  // element in a collection, returning the desired result  either `identity`,\n  // an arbitrary callback, a property matcher, or a property accessor.\n  var cb = function(value, context, argCount) {\n    if (_.iteratee !== builtinIteratee) return _.iteratee(value, context);\n    if (value == null) return _.identity;\n    if (_.isFunction(value)) return optimizeCb(value, context, argCount);\n    if (_.isObject(value) && !_.isArray(value)) return _.matcher(value);\n    return _.property(value);\n  };\n\n  // External wrapper for our callback generator. Users may customize\n  // `_.iteratee` if they want additional predicate/iteratee shorthand styles.\n  // This abstraction hides the internal-only argCount argument.\n  _.iteratee = builtinIteratee = function(value, context) {\n    return cb(value, context, Infinity);\n  };\n\n  // Some functions take a variable number of arguments, or a few expected\n  // arguments at the beginning and then a variable number of values to operate\n  // on. This helper accumulates all remaining arguments past the functions\n  // argument length (or an explicit `startIndex`), into an array that becomes\n  // the last argument. Similar to ES6s \"rest parameter\".\n  var restArguments = function(func, startIndex) {\n    startIndex = startIndex == null ? func.length - 1 : +startIndex;\n    return function() {\n      var length = Math.max(arguments.length - startIndex, 0),\n          rest = Array(length),\n          index = 0;\n      for (; index < length; index++) {\n        rest[index] = arguments[index + startIndex];\n      }\n      switch (startIndex) {\n        case 0: return func.call(this, rest);\n        case 1: return func.call(this, arguments[0], rest);\n        case 2: return func.call(this, arguments[0], arguments[1], rest);\n      }\n      var args = Array(startIndex + 1);\n      for (index = 0; index < startIndex; index++) {\n        args[index] = arguments[index];\n      }\n      args[startIndex] = rest;\n      return func.apply(this, args);\n    };\n  };\n\n  // An internal function for creating a new object that inherits from another.\n  var baseCreate = function(prototype) {\n    if (!_.isObject(prototype)) return {};\n    if (nativeCreate) return nativeCreate(prototype);\n    Ctor.prototype = prototype;\n    var result = new Ctor;\n    Ctor.prototype = null;\n    return result;\n  };\n\n  var shallowProperty = function(key) {\n    return function(obj) {\n      return obj == null ? void 0 : obj[key];\n    };\n  };\n\n  var has = function(obj, path) {\n    return obj != null && hasOwnProperty.call(obj, path);\n  }\n\n  var deepGet = function(obj, path) {\n    var length = path.length;\n    for (var i = 0; i < length; i++) {\n      if (obj == null) return void 0;\n      obj = obj[path[i]];\n    }\n    return length ? obj : void 0;\n  };\n\n  // Helper for collection methods to determine whether a collection\n  // should be iterated as an array or as an object.\n  // Related: http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n  // Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\n  var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n  var getLength = shallowProperty('length');\n  var isArrayLike = function(collection) {\n    var length = getLength(collection);\n    return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\n  };\n\n  // Collection Functions\n  // --------------------\n\n  // The cornerstone, an `each` implementation, aka `forEach`.\n  // Handles raw objects in addition to array-likes. Treats all\n  // sparse array-likes as if they were dense.\n  _.each = _.forEach = function(obj, iteratee, context) {\n    iteratee = optimizeCb(iteratee, context);\n    var i, length;\n    if (isArrayLike(obj)) {\n      for (i = 0, length = obj.length; i < length; i++) {\n        iteratee(obj[i], i, obj);\n      }\n    } else {\n      var keys = _.keys(obj);\n      for (i = 0, length = keys.length; i < length; i++) {\n        iteratee(obj[keys[i]], keys[i], obj);\n      }\n    }\n    return obj;\n  };\n\n  // Return the results of applying the iteratee to each element.\n  _.map = _.collect = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length,\n        results = Array(length);\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      results[index] = iteratee(obj[currentKey], currentKey, obj);\n    }\n    return results;\n  };\n\n  // Create a reducing function iterating left or right.\n  var createReduce = function(dir) {\n    // Wrap code that reassigns argument variables in a separate function than\n    // the one that accesses `arguments.length` to avoid a perf hit. (#1991)\n    var reducer = function(obj, iteratee, memo, initial) {\n      var keys = !isArrayLike(obj) && _.keys(obj),\n          length = (keys || obj).length,\n          index = dir > 0 ? 0 : length - 1;\n      if (!initial) {\n        memo = obj[keys ? keys[index] : index];\n        index += dir;\n      }\n      for (; index >= 0 && index < length; index += dir) {\n        var currentKey = keys ? keys[index] : index;\n        memo = iteratee(memo, obj[currentKey], currentKey, obj);\n      }\n      return memo;\n    };\n\n    return function(obj, iteratee, memo, context) {\n      var initial = arguments.length >= 3;\n      return reducer(obj, optimizeCb(iteratee, context, 4), memo, initial);\n    };\n  };\n\n  // **Reduce** builds up a single result from a list of values, aka `inject`,\n  // or `foldl`.\n  _.reduce = _.foldl = _.inject = createReduce(1);\n\n  // The right-associative version of reduce, also known as `foldr`.\n  _.reduceRight = _.foldr = createReduce(-1);\n\n  // Return the first value which passes a truth test. Aliased as `detect`.\n  _.find = _.detect = function(obj, predicate, context) {\n    var keyFinder = isArrayLike(obj) ? _.findIndex : _.findKey;\n    var key = keyFinder(obj, predicate, context);\n    if (key !== void 0 && key !== -1) return obj[key];\n  };\n\n  // Return all the elements that pass a truth test.\n  // Aliased as `select`.\n  _.filter = _.select = function(obj, predicate, context) {\n    var results = [];\n    predicate = cb(predicate, context);\n    _.each(obj, function(value, index, list) {\n      if (predicate(value, index, list)) results.push(value);\n    });\n    return results;\n  };\n\n  // Return all the elements for which a truth test fails.\n  _.reject = function(obj, predicate, context) {\n    return _.filter(obj, _.negate(cb(predicate)), context);\n  };\n\n  // Determine whether all of the elements match a truth test.\n  // Aliased as `all`.\n  _.every = _.all = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (!predicate(obj[currentKey], currentKey, obj)) return false;\n    }\n    return true;\n  };\n\n  // Determine if at least one element in the object matches a truth test.\n  // Aliased as `any`.\n  _.some = _.any = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (predicate(obj[currentKey], currentKey, obj)) return true;\n    }\n    return false;\n  };\n\n  // Determine if the array or object contains a given item (using `===`).\n  // Aliased as `includes` and `include`.\n  _.contains = _.includes = _.include = function(obj, item, fromIndex, guard) {\n    if (!isArrayLike(obj)) obj = _.values(obj);\n    if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n    return _.indexOf(obj, item, fromIndex) >= 0;\n  };\n\n  // Invoke a method (with arguments) on every item in a collection.\n  _.invoke = restArguments(function(obj, path, args) {\n    var contextPath, func;\n    if (_.isFunction(path)) {\n      func = path;\n    } else if (_.isArray(path)) {\n      contextPath = path.slice(0, -1);\n      path = path[path.length - 1];\n    }\n    return _.map(obj, function(context) {\n      var method = func;\n      if (!method) {\n        if (contextPath && contextPath.length) {\n          context = deepGet(context, contextPath);\n        }\n        if (context == null) return void 0;\n        method = context[path];\n      }\n      return method == null ? method : method.apply(context, args);\n    });\n  });\n\n  // Convenience version of a common use case of `map`: fetching a property.\n  _.pluck = function(obj, key) {\n    return _.map(obj, _.property(key));\n  };\n\n  // Convenience version of a common use case of `filter`: selecting only objects\n  // containing specific `key:value` pairs.\n  _.where = function(obj, attrs) {\n    return _.filter(obj, _.matcher(attrs));\n  };\n\n  // Convenience version of a common use case of `find`: getting the first object\n  // containing specific `key:value` pairs.\n  _.findWhere = function(obj, attrs) {\n    return _.find(obj, _.matcher(attrs));\n  };\n\n  // Return the maximum element (or element-based computation).\n  _.max = function(obj, iteratee, context) {\n    var result = -Infinity, lastComputed = -Infinity,\n        value, computed;\n    if (iteratee == null || typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value != null && value > result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(v, index, list) {\n        computed = iteratee(v, index, list);\n        if (computed > lastComputed || computed === -Infinity && result === -Infinity) {\n          result = v;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Return the minimum element (or element-based computation).\n  _.min = function(obj, iteratee, context) {\n    var result = Infinity, lastComputed = Infinity,\n        value, computed;\n    if (iteratee == null || typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value != null && value < result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(v, index, list) {\n        computed = iteratee(v, index, list);\n        if (computed < lastComputed || computed === Infinity && result === Infinity) {\n          result = v;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Shuffle a collection.\n  _.shuffle = function(obj) {\n    return _.sample(obj, Infinity);\n  };\n\n  // Sample **n** random values from a collection using the modern version of the\n  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/FisherYates_shuffle).\n  // If **n** is not specified, returns a single random element.\n  // The internal `guard` argument allows it to work with `map`.\n  _.sample = function(obj, n, guard) {\n    if (n == null || guard) {\n      if (!isArrayLike(obj)) obj = _.values(obj);\n      return obj[_.random(obj.length - 1)];\n    }\n    var sample = isArrayLike(obj) ? _.clone(obj) : _.values(obj);\n    var length = getLength(sample);\n    n = Math.max(Math.min(n, length), 0);\n    var last = length - 1;\n    for (var index = 0; index < n; index++) {\n      var rand = _.random(index, last);\n      var temp = sample[index];\n      sample[index] = sample[rand];\n      sample[rand] = temp;\n    }\n    return sample.slice(0, n);\n  };\n\n  // Sort the object's values by a criterion produced by an iteratee.\n  _.sortBy = function(obj, iteratee, context) {\n    var index = 0;\n    iteratee = cb(iteratee, context);\n    return _.pluck(_.map(obj, function(value, key, list) {\n      return {\n        value: value,\n        index: index++,\n        criteria: iteratee(value, key, list)\n      };\n    }).sort(function(left, right) {\n      var a = left.criteria;\n      var b = right.criteria;\n      if (a !== b) {\n        if (a > b || a === void 0) return 1;\n        if (a < b || b === void 0) return -1;\n      }\n      return left.index - right.index;\n    }), 'value');\n  };\n\n  // An internal function used for aggregate \"group by\" operations.\n  var group = function(behavior, partition) {\n    return function(obj, iteratee, context) {\n      var result = partition ? [[], []] : {};\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index) {\n        var key = iteratee(value, index, obj);\n        behavior(result, value, key);\n      });\n      return result;\n    };\n  };\n\n  // Groups the object's values by a criterion. Pass either a string attribute\n  // to group by, or a function that returns the criterion.\n  _.groupBy = group(function(result, value, key) {\n    if (has(result, key)) result[key].push(value); else result[key] = [value];\n  });\n\n  // Indexes the object's values by a criterion, similar to `groupBy`, but for\n  // when you know that your index values will be unique.\n  _.indexBy = group(function(result, value, key) {\n    result[key] = value;\n  });\n\n  // Counts instances of an object that group by a certain criterion. Pass\n  // either a string attribute to count by, or a function that returns the\n  // criterion.\n  _.countBy = group(function(result, value, key) {\n    if (has(result, key)) result[key]++; else result[key] = 1;\n  });\n\n  var reStrSymbol = /[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]/g;\n  // Safely create a real, live array from anything iterable.\n  _.toArray = function(obj) {\n    if (!obj) return [];\n    if (_.isArray(obj)) return slice.call(obj);\n    if (_.isString(obj)) {\n      // Keep surrogate pair characters together\n      return obj.match(reStrSymbol);\n    }\n    if (isArrayLike(obj)) return _.map(obj, _.identity);\n    return _.values(obj);\n  };\n\n  // Return the number of elements in an object.\n  _.size = function(obj) {\n    if (obj == null) return 0;\n    return isArrayLike(obj) ? obj.length : _.keys(obj).length;\n  };\n\n  // Split a collection into two arrays: one whose elements all satisfy the given\n  // predicate, and one whose elements all do not satisfy the predicate.\n  _.partition = group(function(result, value, pass) {\n    result[pass ? 0 : 1].push(value);\n  }, true);\n\n  // Array Functions\n  // ---------------\n\n  // Get the first element of an array. Passing **n** will return the first N\n  // values in the array. Aliased as `head` and `take`. The **guard** check\n  // allows it to work with `_.map`.\n  _.first = _.head = _.take = function(array, n, guard) {\n    if (array == null || array.length < 1) return n == null ? void 0 : [];\n    if (n == null || guard) return array[0];\n    return _.initial(array, array.length - n);\n  };\n\n  // Returns everything but the last entry of the array. Especially useful on\n  // the arguments object. Passing **n** will return all the values in\n  // the array, excluding the last N.\n  _.initial = function(array, n, guard) {\n    return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n  };\n\n  // Get the last element of an array. Passing **n** will return the last N\n  // values in the array.\n  _.last = function(array, n, guard) {\n    if (array == null || array.length < 1) return n == null ? void 0 : [];\n    if (n == null || guard) return array[array.length - 1];\n    return _.rest(array, Math.max(0, array.length - n));\n  };\n\n  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.\n  // Especially useful on the arguments object. Passing an **n** will return\n  // the rest N values in the array.\n  _.rest = _.tail = _.drop = function(array, n, guard) {\n    return slice.call(array, n == null || guard ? 1 : n);\n  };\n\n  // Trim out all falsy values from an array.\n  _.compact = function(array) {\n    return _.filter(array, Boolean);\n  };\n\n  // Internal implementation of a recursive `flatten` function.\n  var flatten = function(input, shallow, strict, output) {\n    output = output || [];\n    var idx = output.length;\n    for (var i = 0, length = getLength(input); i < length; i++) {\n      var value = input[i];\n      if (isArrayLike(value) && (_.isArray(value) || _.isArguments(value))) {\n        // Flatten current level of array or arguments object.\n        if (shallow) {\n          var j = 0, len = value.length;\n          while (j < len) output[idx++] = value[j++];\n        } else {\n          flatten(value, shallow, strict, output);\n          idx = output.length;\n        }\n      } else if (!strict) {\n        output[idx++] = value;\n      }\n    }\n    return output;\n  };\n\n  // Flatten out an array, either recursively (by default), or just one level.\n  _.flatten = function(array, shallow) {\n    return flatten(array, shallow, false);\n  };\n\n  // Return a version of the array that does not contain the specified value(s).\n  _.without = restArguments(function(array, otherArrays) {\n    return _.difference(array, otherArrays);\n  });\n\n  // Produce a duplicate-free version of the array. If the array has already\n  // been sorted, you have the option of using a faster algorithm.\n  // The faster algorithm will not work with an iteratee if the iteratee\n  // is not a one-to-one function, so providing an iteratee will disable\n  // the faster algorithm.\n  // Aliased as `unique`.\n  _.uniq = _.unique = function(array, isSorted, iteratee, context) {\n    if (!_.isBoolean(isSorted)) {\n      context = iteratee;\n      iteratee = isSorted;\n      isSorted = false;\n    }\n    if (iteratee != null) iteratee = cb(iteratee, context);\n    var result = [];\n    var seen = [];\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var value = array[i],\n          computed = iteratee ? iteratee(value, i, array) : value;\n      if (isSorted && !iteratee) {\n        if (!i || seen !== computed) result.push(value);\n        seen = computed;\n      } else if (iteratee) {\n        if (!_.contains(seen, computed)) {\n          seen.push(computed);\n          result.push(value);\n        }\n      } else if (!_.contains(result, value)) {\n        result.push(value);\n      }\n    }\n    return result;\n  };\n\n  // Produce an array that contains the union: each distinct element from all of\n  // the passed-in arrays.\n  _.union = restArguments(function(arrays) {\n    return _.uniq(flatten(arrays, true, true));\n  });\n\n  // Produce an array that contains every item shared between all the\n  // passed-in arrays.\n  _.intersection = function(array) {\n    var result = [];\n    var argsLength = arguments.length;\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var item = array[i];\n      if (_.contains(result, item)) continue;\n      var j;\n      for (j = 1; j < argsLength; j++) {\n        if (!_.contains(arguments[j], item)) break;\n      }\n      if (j === argsLength) result.push(item);\n    }\n    return result;\n  };\n\n  // Take the difference between one array and a number of other arrays.\n  // Only the elements present in just the first array will remain.\n  _.difference = restArguments(function(array, rest) {\n    rest = flatten(rest, true, true);\n    return _.filter(array, function(value){\n      return !_.contains(rest, value);\n    });\n  });\n\n  // Complement of _.zip. Unzip accepts an array of arrays and groups\n  // each array's elements on shared indices.\n  _.unzip = function(array) {\n    var length = array && _.max(array, getLength).length || 0;\n    var result = Array(length);\n\n    for (var index = 0; index < length; index++) {\n      result[index] = _.pluck(array, index);\n    }\n    return result;\n  };\n\n  // Zip together multiple lists into a single array -- elements that share\n  // an index go together.\n  _.zip = restArguments(_.unzip);\n\n  // Converts lists into objects. Pass either a single array of `[key, value]`\n  // pairs, or two parallel arrays of the same length -- one of keys, and one of\n  // the corresponding values. Passing by pairs is the reverse of _.pairs.\n  _.object = function(list, values) {\n    var result = {};\n    for (var i = 0, length = getLength(list); i < length; i++) {\n      if (values) {\n        result[list[i]] = values[i];\n      } else {\n        result[list[i][0]] = list[i][1];\n      }\n    }\n    return result;\n  };\n\n  // Generator function to create the findIndex and findLastIndex functions.\n  var createPredicateIndexFinder = function(dir) {\n    return function(array, predicate, context) {\n      predicate = cb(predicate, context);\n      var length = getLength(array);\n      var index = dir > 0 ? 0 : length - 1;\n      for (; index >= 0 && index < length; index += dir) {\n        if (predicate(array[index], index, array)) return index;\n      }\n      return -1;\n    };\n  };\n\n  // Returns the first index on an array-like that passes a predicate test.\n  _.findIndex = createPredicateIndexFinder(1);\n  _.findLastIndex = createPredicateIndexFinder(-1);\n\n  // Use a comparator function to figure out the smallest index at which\n  // an object should be inserted so as to maintain order. Uses binary search.\n  _.sortedIndex = function(array, obj, iteratee, context) {\n    iteratee = cb(iteratee, context, 1);\n    var value = iteratee(obj);\n    var low = 0, high = getLength(array);\n    while (low < high) {\n      var mid = Math.floor((low + high) / 2);\n      if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n    }\n    return low;\n  };\n\n  // Generator function to create the indexOf and lastIndexOf functions.\n  var createIndexFinder = function(dir, predicateFind, sortedIndex) {\n    return function(array, item, idx) {\n      var i = 0, length = getLength(array);\n      if (typeof idx == 'number') {\n        if (dir > 0) {\n          i = idx >= 0 ? idx : Math.max(idx + length, i);\n        } else {\n          length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n        }\n      } else if (sortedIndex && idx && length) {\n        idx = sortedIndex(array, item);\n        return array[idx] === item ? idx : -1;\n      }\n      if (item !== item) {\n        idx = predicateFind(slice.call(array, i, length), _.isNaN);\n        return idx >= 0 ? idx + i : -1;\n      }\n      for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n        if (array[idx] === item) return idx;\n      }\n      return -1;\n    };\n  };\n\n  // Return the position of the first occurrence of an item in an array,\n  // or -1 if the item is not included in the array.\n  // If the array is large and already in sort order, pass `true`\n  // for **isSorted** to use binary search.\n  _.indexOf = createIndexFinder(1, _.findIndex, _.sortedIndex);\n  _.lastIndexOf = createIndexFinder(-1, _.findLastIndex);\n\n  // Generate an integer Array containing an arithmetic progression. A port of\n  // the native Python `range()` function. See\n  // [the Python documentation](http://docs.python.org/library/functions.html#range).\n  _.range = function(start, stop, step) {\n    if (stop == null) {\n      stop = start || 0;\n      start = 0;\n    }\n    if (!step) {\n      step = stop < start ? -1 : 1;\n    }\n\n    var length = Math.max(Math.ceil((stop - start) / step), 0);\n    var range = Array(length);\n\n    for (var idx = 0; idx < length; idx++, start += step) {\n      range[idx] = start;\n    }\n\n    return range;\n  };\n\n  // Chunk a single array into multiple arrays, each containing `count` or fewer\n  // items.\n  _.chunk = function(array, count) {\n    if (count == null || count < 1) return [];\n    var result = [];\n    var i = 0, length = array.length;\n    while (i < length) {\n      result.push(slice.call(array, i, i += count));\n    }\n    return result;\n  };\n\n  // Function (ahem) Functions\n  // ------------------\n\n  // Determines whether to execute a function as a constructor\n  // or a normal function with the provided arguments.\n  var executeBound = function(sourceFunc, boundFunc, context, callingContext, args) {\n    if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n    var self = baseCreate(sourceFunc.prototype);\n    var result = sourceFunc.apply(self, args);\n    if (_.isObject(result)) return result;\n    return self;\n  };\n\n  // Create a function bound to a given object (assigning `this`, and arguments,\n  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if\n  // available.\n  _.bind = restArguments(function(func, context, args) {\n    if (!_.isFunction(func)) throw new TypeError('Bind must be called on a function');\n    var bound = restArguments(function(callArgs) {\n      return executeBound(func, bound, context, this, args.concat(callArgs));\n    });\n    return bound;\n  });\n\n  // Partially apply a function by creating a version that has had some of its\n  // arguments pre-filled, without changing its dynamic `this` context. _ acts\n  // as a placeholder by default, allowing any combination of arguments to be\n  // pre-filled. Set `_.partial.placeholder` for a custom placeholder argument.\n  _.partial = restArguments(function(func, boundArgs) {\n    var placeholder = _.partial.placeholder;\n    var bound = function() {\n      var position = 0, length = boundArgs.length;\n      var args = Array(length);\n      for (var i = 0; i < length; i++) {\n        args[i] = boundArgs[i] === placeholder ? arguments[position++] : boundArgs[i];\n      }\n      while (position < arguments.length) args.push(arguments[position++]);\n      return executeBound(func, bound, this, this, args);\n    };\n    return bound;\n  });\n\n  _.partial.placeholder = _;\n\n  // Bind a number of an object's methods to that object. Remaining arguments\n  // are the method names to be bound. Useful for ensuring that all callbacks\n  // defined on an object belong to it.\n  _.bindAll = restArguments(function(obj, keys) {\n    keys = flatten(keys, false, false);\n    var index = keys.length;\n    if (index < 1) throw new Error('bindAll must be passed function names');\n    while (index--) {\n      var key = keys[index];\n      obj[key] = _.bind(obj[key], obj);\n    }\n  });\n\n  // Memoize an expensive function by storing its results.\n  _.memoize = function(func, hasher) {\n    var memoize = function(key) {\n      var cache = memoize.cache;\n      var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n      if (!has(cache, address)) cache[address] = func.apply(this, arguments);\n      return cache[address];\n    };\n    memoize.cache = {};\n    return memoize;\n  };\n\n  // Delays a function for the given number of milliseconds, and then calls\n  // it with the arguments supplied.\n  _.delay = restArguments(function(func, wait, args) {\n    return setTimeout(function() {\n      return func.apply(null, args);\n    }, wait);\n  });\n\n  // Defers a function, scheduling it to run after the current call stack has\n  // cleared.\n  _.defer = _.partial(_.delay, _, 1);\n\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n  _.throttle = function(func, wait, options) {\n    var timeout, context, args, result;\n    var previous = 0;\n    if (!options) options = {};\n\n    var later = function() {\n      previous = options.leading === false ? 0 : _.now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    };\n\n    var throttled = function() {\n      var now = _.now();\n      if (!previous && options.leading === false) previous = now;\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0 || remaining > wait) {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n        previous = now;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n\n    throttled.cancel = function() {\n      clearTimeout(timeout);\n      previous = 0;\n      timeout = context = args = null;\n    };\n\n    return throttled;\n  };\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds. If `immediate` is passed, trigger the function on the\n  // leading edge, instead of the trailing.\n  _.debounce = function(func, wait, immediate) {\n    var timeout, result;\n\n    var later = function(context, args) {\n      timeout = null;\n      if (args) result = func.apply(context, args);\n    };\n\n    var debounced = restArguments(function(args) {\n      if (timeout) clearTimeout(timeout);\n      if (immediate) {\n        var callNow = !timeout;\n        timeout = setTimeout(later, wait);\n        if (callNow) result = func.apply(this, args);\n      } else {\n        timeout = _.delay(later, wait, this, args);\n      }\n\n      return result;\n    });\n\n    debounced.cancel = function() {\n      clearTimeout(timeout);\n      timeout = null;\n    };\n\n    return debounced;\n  };\n\n  // Returns the first function passed as an argument to the second,\n  // allowing you to adjust arguments, run code before and after, and\n  // conditionally execute the original function.\n  _.wrap = function(func, wrapper) {\n    return _.partial(wrapper, func);\n  };\n\n  // Returns a negated version of the passed-in predicate.\n  _.negate = function(predicate) {\n    return function() {\n      return !predicate.apply(this, arguments);\n    };\n  };\n\n  // Returns a function that is the composition of a list of functions, each\n  // consuming the return value of the function that follows.\n  _.compose = function() {\n    var args = arguments;\n    var start = args.length - 1;\n    return function() {\n      var i = start;\n      var result = args[start].apply(this, arguments);\n      while (i--) result = args[i].call(this, result);\n      return result;\n    };\n  };\n\n  // Returns a function that will only be executed on and after the Nth call.\n  _.after = function(times, func) {\n    return function() {\n      if (--times < 1) {\n        return func.apply(this, arguments);\n      }\n    };\n  };\n\n  // Returns a function that will only be executed up to (but not including) the Nth call.\n  _.before = function(times, func) {\n    var memo;\n    return function() {\n      if (--times > 0) {\n        memo = func.apply(this, arguments);\n      }\n      if (times <= 1) func = null;\n      return memo;\n    };\n  };\n\n  // Returns a function that will be executed at most one time, no matter how\n  // often you call it. Useful for lazy initialization.\n  _.once = _.partial(_.before, 2);\n\n  _.restArguments = restArguments;\n\n  // Object Functions\n  // ----------------\n\n  // Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\n  var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\n  var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n    'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n  var collectNonEnumProps = function(obj, keys) {\n    var nonEnumIdx = nonEnumerableProps.length;\n    var constructor = obj.constructor;\n    var proto = _.isFunction(constructor) && constructor.prototype || ObjProto;\n\n    // Constructor is a special case.\n    var prop = 'constructor';\n    if (has(obj, prop) && !_.contains(keys, prop)) keys.push(prop);\n\n    while (nonEnumIdx--) {\n      prop = nonEnumerableProps[nonEnumIdx];\n      if (prop in obj && obj[prop] !== proto[prop] && !_.contains(keys, prop)) {\n        keys.push(prop);\n      }\n    }\n  };\n\n  // Retrieve the names of an object's own properties.\n  // Delegates to **ECMAScript 5**'s native `Object.keys`.\n  _.keys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    if (nativeKeys) return nativeKeys(obj);\n    var keys = [];\n    for (var key in obj) if (has(obj, key)) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve all the property names of an object.\n  _.allKeys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    var keys = [];\n    for (var key in obj) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve the values of an object's properties.\n  _.values = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var values = Array(length);\n    for (var i = 0; i < length; i++) {\n      values[i] = obj[keys[i]];\n    }\n    return values;\n  };\n\n  // Returns the results of applying the iteratee to each element of the object.\n  // In contrast to _.map it returns an object.\n  _.mapObject = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys = _.keys(obj),\n        length = keys.length,\n        results = {};\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys[index];\n      results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n    }\n    return results;\n  };\n\n  // Convert an object into a list of `[key, value]` pairs.\n  // The opposite of _.object.\n  _.pairs = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var pairs = Array(length);\n    for (var i = 0; i < length; i++) {\n      pairs[i] = [keys[i], obj[keys[i]]];\n    }\n    return pairs;\n  };\n\n  // Invert the keys and values of an object. The values must be serializable.\n  _.invert = function(obj) {\n    var result = {};\n    var keys = _.keys(obj);\n    for (var i = 0, length = keys.length; i < length; i++) {\n      result[obj[keys[i]]] = keys[i];\n    }\n    return result;\n  };\n\n  // Return a sorted list of the function names available on the object.\n  // Aliased as `methods`.\n  _.functions = _.methods = function(obj) {\n    var names = [];\n    for (var key in obj) {\n      if (_.isFunction(obj[key])) names.push(key);\n    }\n    return names.sort();\n  };\n\n  // An internal function for creating assigner functions.\n  var createAssigner = function(keysFunc, defaults) {\n    return function(obj) {\n      var length = arguments.length;\n      if (defaults) obj = Object(obj);\n      if (length < 2 || obj == null) return obj;\n      for (var index = 1; index < length; index++) {\n        var source = arguments[index],\n            keys = keysFunc(source),\n            l = keys.length;\n        for (var i = 0; i < l; i++) {\n          var key = keys[i];\n          if (!defaults || obj[key] === void 0) obj[key] = source[key];\n        }\n      }\n      return obj;\n    };\n  };\n\n  // Extend a given object with all the properties in passed-in object(s).\n  _.extend = createAssigner(_.allKeys);\n\n  // Assigns a given object with all the own properties in the passed-in object(s).\n  // (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\n  _.extendOwn = _.assign = createAssigner(_.keys);\n\n  // Returns the first key on an object that passes a predicate test.\n  _.findKey = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = _.keys(obj), key;\n    for (var i = 0, length = keys.length; i < length; i++) {\n      key = keys[i];\n      if (predicate(obj[key], key, obj)) return key;\n    }\n  };\n\n  // Internal pick helper function to determine if `obj` has key `key`.\n  var keyInObj = function(value, key, obj) {\n    return key in obj;\n  };\n\n  // Return a copy of the object only containing the whitelisted properties.\n  _.pick = restArguments(function(obj, keys) {\n    var result = {}, iteratee = keys[0];\n    if (obj == null) return result;\n    if (_.isFunction(iteratee)) {\n      if (keys.length > 1) iteratee = optimizeCb(iteratee, keys[1]);\n      keys = _.allKeys(obj);\n    } else {\n      iteratee = keyInObj;\n      keys = flatten(keys, false, false);\n      obj = Object(obj);\n    }\n    for (var i = 0, length = keys.length; i < length; i++) {\n      var key = keys[i];\n      var value = obj[key];\n      if (iteratee(value, key, obj)) result[key] = value;\n    }\n    return result;\n  });\n\n  // Return a copy of the object without the blacklisted properties.\n  _.omit = restArguments(function(obj, keys) {\n    var iteratee = keys[0], context;\n    if (_.isFunction(iteratee)) {\n      iteratee = _.negate(iteratee);\n      if (keys.length > 1) context = keys[1];\n    } else {\n      keys = _.map(flatten(keys, false, false), String);\n      iteratee = function(value, key) {\n        return !_.contains(keys, key);\n      };\n    }\n    return _.pick(obj, iteratee, context);\n  });\n\n  // Fill in a given object with default properties.\n  _.defaults = createAssigner(_.allKeys, true);\n\n  // Creates an object that inherits from the given prototype object.\n  // If additional properties are provided then they will be added to the\n  // created object.\n  _.create = function(prototype, props) {\n    var result = baseCreate(prototype);\n    if (props) _.extendOwn(result, props);\n    return result;\n  };\n\n  // Create a (shallow-cloned) duplicate of an object.\n  _.clone = function(obj) {\n    if (!_.isObject(obj)) return obj;\n    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);\n  };\n\n  // Invokes interceptor with the obj, and then returns obj.\n  // The primary purpose of this method is to \"tap into\" a method chain, in\n  // order to perform operations on intermediate results within the chain.\n  _.tap = function(obj, interceptor) {\n    interceptor(obj);\n    return obj;\n  };\n\n  // Returns whether an object has a given set of `key:value` pairs.\n  _.isMatch = function(object, attrs) {\n    var keys = _.keys(attrs), length = keys.length;\n    if (object == null) return !length;\n    var obj = Object(object);\n    for (var i = 0; i < length; i++) {\n      var key = keys[i];\n      if (attrs[key] !== obj[key] || !(key in obj)) return false;\n    }\n    return true;\n  };\n\n\n  // Internal recursive comparison function for `isEqual`.\n  var eq, deepEq;\n  eq = function(a, b, aStack, bStack) {\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\n    if (a === b) return a !== 0 || 1 / a === 1 / b;\n    // `null` or `undefined` only equal to itself (strict comparison).\n    if (a == null || b == null) return false;\n    // `NaN`s are equivalent, but non-reflexive.\n    if (a !== a) return b !== b;\n    // Exhaust primitive checks\n    var type = typeof a;\n    if (type !== 'function' && type !== 'object' && typeof b != 'object') return false;\n    return deepEq(a, b, aStack, bStack);\n  };\n\n  // Internal recursive comparison function for `isEqual`.\n  deepEq = function(a, b, aStack, bStack) {\n    // Unwrap any wrapped objects.\n    if (a instanceof _) a = a._wrapped;\n    if (b instanceof _) b = b._wrapped;\n    // Compare `[[Class]]` names.\n    var className = toString.call(a);\n    if (className !== toString.call(b)) return false;\n    switch (className) {\n      // Strings, numbers, regular expressions, dates, and booleans are compared by value.\n      case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n      case '[object String]':\n        // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n        // equivalent to `new String(\"5\")`.\n        return '' + a === '' + b;\n      case '[object Number]':\n        // `NaN`s are equivalent, but non-reflexive.\n        // Object(NaN) is equivalent to NaN.\n        if (+a !== +a) return +b !== +b;\n        // An `egal` comparison is performed for other numeric values.\n        return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n      case '[object Date]':\n      case '[object Boolean]':\n        // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n        // millisecond representations. Note that invalid dates with millisecond representations\n        // of `NaN` are not equivalent.\n        return +a === +b;\n      case '[object Symbol]':\n        return SymbolProto.valueOf.call(a) === SymbolProto.valueOf.call(b);\n    }\n\n    var areArrays = className === '[object Array]';\n    if (!areArrays) {\n      if (typeof a != 'object' || typeof b != 'object') return false;\n\n      // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n      // from different frames are.\n      var aCtor = a.constructor, bCtor = b.constructor;\n      if (aCtor !== bCtor && !(_.isFunction(aCtor) && aCtor instanceof aCtor &&\n                               _.isFunction(bCtor) && bCtor instanceof bCtor)\n                          && ('constructor' in a && 'constructor' in b)) {\n        return false;\n      }\n    }\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n    // Initializing stack of traversed objects.\n    // It's done here since we only need them for objects and arrays comparison.\n    aStack = aStack || [];\n    bStack = bStack || [];\n    var length = aStack.length;\n    while (length--) {\n      // Linear search. Performance is inversely proportional to the number of\n      // unique nested structures.\n      if (aStack[length] === a) return bStack[length] === b;\n    }\n\n    // Add the first object to the stack of traversed objects.\n    aStack.push(a);\n    bStack.push(b);\n\n    // Recursively compare objects and arrays.\n    if (areArrays) {\n      // Compare array lengths to determine if a deep comparison is necessary.\n      length = a.length;\n      if (length !== b.length) return false;\n      // Deep compare the contents, ignoring non-numeric properties.\n      while (length--) {\n        if (!eq(a[length], b[length], aStack, bStack)) return false;\n      }\n    } else {\n      // Deep compare objects.\n      var keys = _.keys(a), key;\n      length = keys.length;\n      // Ensure that both objects contain the same number of properties before comparing deep equality.\n      if (_.keys(b).length !== length) return false;\n      while (length--) {\n        // Deep compare each member\n        key = keys[length];\n        if (!(has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n      }\n    }\n    // Remove the first object from the stack of traversed objects.\n    aStack.pop();\n    bStack.pop();\n    return true;\n  };\n\n  // Perform a deep comparison to check if two objects are equal.\n  _.isEqual = function(a, b) {\n    return eq(a, b);\n  };\n\n  // Is a given array, string, or object empty?\n  // An \"empty\" object has no enumerable own-properties.\n  _.isEmpty = function(obj) {\n    if (obj == null) return true;\n    if (isArrayLike(obj) && (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))) return obj.length === 0;\n    return _.keys(obj).length === 0;\n  };\n\n  // Is a given value a DOM element?\n  _.isElement = function(obj) {\n    return !!(obj && obj.nodeType === 1);\n  };\n\n  // Is a given value an array?\n  // Delegates to ECMA5's native Array.isArray\n  _.isArray = nativeIsArray || function(obj) {\n    return toString.call(obj) === '[object Array]';\n  };\n\n  // Is a given variable an object?\n  _.isObject = function(obj) {\n    var type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n  };\n\n  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp, isError, isMap, isWeakMap, isSet, isWeakSet.\n  _.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp', 'Error', 'Symbol', 'Map', 'WeakMap', 'Set', 'WeakSet'], function(name) {\n    _['is' + name] = function(obj) {\n      return toString.call(obj) === '[object ' + name + ']';\n    };\n  });\n\n  // Define a fallback version of the method in browsers (ahem, IE < 9), where\n  // there isn't any inspectable \"Arguments\" type.\n  if (!_.isArguments(arguments)) {\n    _.isArguments = function(obj) {\n      return has(obj, 'callee');\n    };\n  }\n\n  // Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,\n  // IE 11 (#1621), Safari 8 (#1929), and PhantomJS (#2236).\n  var nodelist = root.document && root.document.childNodes;\n  if (typeof /./ != 'function' && typeof Int8Array != 'object' && typeof nodelist != 'function') {\n    _.isFunction = function(obj) {\n      return typeof obj == 'function' || false;\n    };\n  }\n\n  // Is a given object a finite number?\n  _.isFinite = function(obj) {\n    return !_.isSymbol(obj) && isFinite(obj) && !isNaN(parseFloat(obj));\n  };\n\n  // Is the given value `NaN`?\n  _.isNaN = function(obj) {\n    return _.isNumber(obj) && isNaN(obj);\n  };\n\n  // Is a given value a boolean?\n  _.isBoolean = function(obj) {\n    return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n  };\n\n  // Is a given value equal to null?\n  _.isNull = function(obj) {\n    return obj === null;\n  };\n\n  // Is a given variable undefined?\n  _.isUndefined = function(obj) {\n    return obj === void 0;\n  };\n\n  // Shortcut function for checking if an object has a given property directly\n  // on itself (in other words, not on a prototype).\n  _.has = function(obj, path) {\n    if (!_.isArray(path)) {\n      return has(obj, path);\n    }\n    var length = path.length;\n    for (var i = 0; i < length; i++) {\n      var key = path[i];\n      if (obj == null || !hasOwnProperty.call(obj, key)) {\n        return false;\n      }\n      obj = obj[key];\n    }\n    return !!length;\n  };\n\n  // Utility Functions\n  // -----------------\n\n  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its\n  // previous owner. Returns a reference to the Underscore object.\n  _.noConflict = function() {\n    root._ = previousUnderscore;\n    return this;\n  };\n\n  // Keep the identity function around for default iteratees.\n  _.identity = function(value) {\n    return value;\n  };\n\n  // Predicate-generating functions. Often useful outside of Underscore.\n  _.constant = function(value) {\n    return function() {\n      return value;\n    };\n  };\n\n  _.noop = function(){};\n\n  // Creates a function that, when passed an object, will traverse that objects\n  // properties down the given `path`, specified as an array of keys or indexes.\n  _.property = function(path) {\n    if (!_.isArray(path)) {\n      return shallowProperty(path);\n    }\n    return function(obj) {\n      return deepGet(obj, path);\n    };\n  };\n\n  // Generates a function for a given object that returns a given property.\n  _.propertyOf = function(obj) {\n    if (obj == null) {\n      return function(){};\n    }\n    return function(path) {\n      return !_.isArray(path) ? obj[path] : deepGet(obj, path);\n    };\n  };\n\n  // Returns a predicate for checking whether an object has a given set of\n  // `key:value` pairs.\n  _.matcher = _.matches = function(attrs) {\n    attrs = _.extendOwn({}, attrs);\n    return function(obj) {\n      return _.isMatch(obj, attrs);\n    };\n  };\n\n  // Run a function **n** times.\n  _.times = function(n, iteratee, context) {\n    var accum = Array(Math.max(0, n));\n    iteratee = optimizeCb(iteratee, context, 1);\n    for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n    return accum;\n  };\n\n  // Return a random integer between min and max (inclusive).\n  _.random = function(min, max) {\n    if (max == null) {\n      max = min;\n      min = 0;\n    }\n    return min + Math.floor(Math.random() * (max - min + 1));\n  };\n\n  // A (possibly faster) way to get the current timestamp as an integer.\n  _.now = Date.now || function() {\n    return new Date().getTime();\n  };\n\n  // List of HTML entities for escaping.\n  var escapeMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;',\n    '`': '&#x60;'\n  };\n  var unescapeMap = _.invert(escapeMap);\n\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\n  var createEscaper = function(map) {\n    var escaper = function(match) {\n      return map[match];\n    };\n    // Regexes for identifying a key that needs to be escaped.\n    var source = '(?:' + _.keys(map).join('|') + ')';\n    var testRegexp = RegExp(source);\n    var replaceRegexp = RegExp(source, 'g');\n    return function(string) {\n      string = string == null ? '' : '' + string;\n      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n    };\n  };\n  _.escape = createEscaper(escapeMap);\n  _.unescape = createEscaper(unescapeMap);\n\n  // Traverses the children of `obj` along `path`. If a child is a function, it\n  // is invoked with its parent as context. Returns the value of the final\n  // child, or `fallback` if any child is undefined.\n  _.result = function(obj, path, fallback) {\n    if (!_.isArray(path)) path = [path];\n    var length = path.length;\n    if (!length) {\n      return _.isFunction(fallback) ? fallback.call(obj) : fallback;\n    }\n    for (var i = 0; i < length; i++) {\n      var prop = obj == null ? void 0 : obj[path[i]];\n      if (prop === void 0) {\n        prop = fallback;\n        i = length; // Ensure we don't continue iterating.\n      }\n      obj = _.isFunction(prop) ? prop.call(obj) : prop;\n    }\n    return obj;\n  };\n\n  // Generate a unique integer id (unique within the entire client session).\n  // Useful for temporary DOM ids.\n  var idCounter = 0;\n  _.uniqueId = function(prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n  };\n\n  // By default, Underscore uses ERB-style template delimiters, change the\n  // following template settings to use alternative delimiters.\n  _.templateSettings = {\n    evaluate: /<%([\\s\\S]+?)%>/g,\n    interpolate: /<%=([\\s\\S]+?)%>/g,\n    escape: /<%-([\\s\\S]+?)%>/g\n  };\n\n  // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n  var noMatch = /(.)^/;\n\n  // Certain characters need to be escaped so that they can be put into a\n  // string literal.\n  var escapes = {\n    \"'\": \"'\",\n    '\\\\': '\\\\',\n    '\\r': 'r',\n    '\\n': 'n',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  var escapeRegExp = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\n  var escapeChar = function(match) {\n    return '\\\\' + escapes[match];\n  };\n\n  // JavaScript micro-templating, similar to John Resig's implementation.\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\n  // and correctly escapes quotes within interpolated code.\n  // NB: `oldSettings` only exists for backwards compatibility.\n  _.template = function(text, settings, oldSettings) {\n    if (!settings && oldSettings) settings = oldSettings;\n    settings = _.defaults({}, settings, _.templateSettings);\n\n    // Combine delimiters into one regular expression via alternation.\n    var matcher = RegExp([\n      (settings.escape || noMatch).source,\n      (settings.interpolate || noMatch).source,\n      (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n\n    // Compile the template source, escaping string literals appropriately.\n    var index = 0;\n    var source = \"__p+='\";\n    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n      source += text.slice(index, offset).replace(escapeRegExp, escapeChar);\n      index = offset + match.length;\n\n      if (escape) {\n        source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n      } else if (interpolate) {\n        source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n      } else if (evaluate) {\n        source += \"';\\n\" + evaluate + \"\\n__p+='\";\n      }\n\n      // Adobe VMs need the match returned to produce the correct offset.\n      return match;\n    });\n    source += \"';\\n\";\n\n    // If a variable is not specified, place data values in local scope.\n    if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\n\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\n      \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n      source + 'return __p;\\n';\n\n    var render;\n    try {\n      render = new Function(settings.variable || 'obj', '_', source);\n    } catch (e) {\n      e.source = source;\n      throw e;\n    }\n\n    var template = function(data) {\n      return render.call(this, data, _);\n    };\n\n    // Provide the compiled source as a convenience for precompilation.\n    var argument = settings.variable || 'obj';\n    template.source = 'function(' + argument + '){\\n' + source + '}';\n\n    return template;\n  };\n\n  // Add a \"chain\" function. Start chaining a wrapped Underscore object.\n  _.chain = function(obj) {\n    var instance = _(obj);\n    instance._chain = true;\n    return instance;\n  };\n\n  // OOP\n  // ---------------\n  // If Underscore is called as a function, it returns a wrapped object that\n  // can be used OO-style. This wrapper holds altered versions of all the\n  // underscore functions. Wrapped objects may be chained.\n\n  // Helper function to continue chaining intermediate results.\n  var chainResult = function(instance, obj) {\n    return instance._chain ? _(obj).chain() : obj;\n  };\n\n  // Add your own custom functions to the Underscore object.\n  _.mixin = function(obj) {\n    _.each(_.functions(obj), function(name) {\n      var func = _[name] = obj[name];\n      _.prototype[name] = function() {\n        var args = [this._wrapped];\n        push.apply(args, arguments);\n        return chainResult(this, func.apply(_, args));\n      };\n    });\n    return _;\n  };\n\n  // Add all of the Underscore functions to the wrapper object.\n  _.mixin(_);\n\n  // Add all mutator Array functions to the wrapper.\n  _.each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      var obj = this._wrapped;\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) delete obj[0];\n      return chainResult(this, obj);\n    };\n  });\n\n  // Add all accessor Array functions to the wrapper.\n  _.each(['concat', 'join', 'slice'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      return chainResult(this, method.apply(this._wrapped, arguments));\n    };\n  });\n\n  // Extracts the result from a wrapped and chained object.\n  _.prototype.value = function() {\n    return this._wrapped;\n  };\n\n  // Provide unwrapping proxy for some methods used in engine operations\n  // such as arithmetic and JSON stringification.\n  _.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n  _.prototype.toString = function() {\n    return String(this._wrapped);\n  };\n\n  // AMD registration happens at the end for compatibility with AMD loaders\n  // that may not enforce next-turn semantics on modules. Even though general\n  // practice for AMD registration is to be anonymous, underscore registers\n  // as a named module because, like jQuery, it is a base library that is\n  // popular enough to be bundled in a third party lib, but not be part of\n  // an AMD load request. Those cases could generate an error when an\n  // anonymous define() is called outside of a loader request.\n  if (typeof define == 'function' && define.amd) {\n    define('underscore', [], function() {\n      return _;\n    });\n  }\n}());\n","module.exports = require(\"buffer\");","(function (module, exports) {\n  'use strict';\n\n  // Utils\n  function assert (val, msg) {\n    if (!val) throw new Error(msg || 'Assertion failed');\n  }\n\n  // Could use `inherits` module, but don't want to move from single file\n  // architecture yet.\n  function inherits (ctor, superCtor) {\n    ctor.super_ = superCtor;\n    var TempCtor = function () {};\n    TempCtor.prototype = superCtor.prototype;\n    ctor.prototype = new TempCtor();\n    ctor.prototype.constructor = ctor;\n  }\n\n  // BN\n\n  function BN (number, base, endian) {\n    if (BN.isBN(number)) {\n      return number;\n    }\n\n    this.negative = 0;\n    this.words = null;\n    this.length = 0;\n\n    // Reduction context\n    this.red = null;\n\n    if (number !== null) {\n      if (base === 'le' || base === 'be') {\n        endian = base;\n        base = 10;\n      }\n\n      this._init(number || 0, base || 10, endian || 'be');\n    }\n  }\n  if (typeof module === 'object') {\n    module.exports = BN;\n  } else {\n    exports.BN = BN;\n  }\n\n  BN.BN = BN;\n  BN.wordSize = 26;\n\n  var Buffer;\n  try {\n    if (typeof window !== 'undefined' && typeof window.Buffer !== 'undefined') {\n      Buffer = window.Buffer;\n    } else {\n      Buffer = require('buffer').Buffer;\n    }\n  } catch (e) {\n  }\n\n  BN.isBN = function isBN (num) {\n    if (num instanceof BN) {\n      return true;\n    }\n\n    return num !== null && typeof num === 'object' &&\n      num.constructor.wordSize === BN.wordSize && Array.isArray(num.words);\n  };\n\n  BN.max = function max (left, right) {\n    if (left.cmp(right) > 0) return left;\n    return right;\n  };\n\n  BN.min = function min (left, right) {\n    if (left.cmp(right) < 0) return left;\n    return right;\n  };\n\n  BN.prototype._init = function init (number, base, endian) {\n    if (typeof number === 'number') {\n      return this._initNumber(number, base, endian);\n    }\n\n    if (typeof number === 'object') {\n      return this._initArray(number, base, endian);\n    }\n\n    if (base === 'hex') {\n      base = 16;\n    }\n    assert(base === (base | 0) && base >= 2 && base <= 36);\n\n    number = number.toString().replace(/\\s+/g, '');\n    var start = 0;\n    if (number[0] === '-') {\n      start++;\n      this.negative = 1;\n    }\n\n    if (start < number.length) {\n      if (base === 16) {\n        this._parseHex(number, start, endian);\n      } else {\n        this._parseBase(number, base, start);\n        if (endian === 'le') {\n          this._initArray(this.toArray(), base, endian);\n        }\n      }\n    }\n  };\n\n  BN.prototype._initNumber = function _initNumber (number, base, endian) {\n    if (number < 0) {\n      this.negative = 1;\n      number = -number;\n    }\n    if (number < 0x4000000) {\n      this.words = [ number & 0x3ffffff ];\n      this.length = 1;\n    } else if (number < 0x10000000000000) {\n      this.words = [\n        number & 0x3ffffff,\n        (number / 0x4000000) & 0x3ffffff\n      ];\n      this.length = 2;\n    } else {\n      assert(number < 0x20000000000000); // 2 ^ 53 (unsafe)\n      this.words = [\n        number & 0x3ffffff,\n        (number / 0x4000000) & 0x3ffffff,\n        1\n      ];\n      this.length = 3;\n    }\n\n    if (endian !== 'le') return;\n\n    // Reverse the bytes\n    this._initArray(this.toArray(), base, endian);\n  };\n\n  BN.prototype._initArray = function _initArray (number, base, endian) {\n    // Perhaps a Uint8Array\n    assert(typeof number.length === 'number');\n    if (number.length <= 0) {\n      this.words = [ 0 ];\n      this.length = 1;\n      return this;\n    }\n\n    this.length = Math.ceil(number.length / 3);\n    this.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      this.words[i] = 0;\n    }\n\n    var j, w;\n    var off = 0;\n    if (endian === 'be') {\n      for (i = number.length - 1, j = 0; i >= 0; i -= 3) {\n        w = number[i] | (number[i - 1] << 8) | (number[i - 2] << 16);\n        this.words[j] |= (w << off) & 0x3ffffff;\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\n        off += 24;\n        if (off >= 26) {\n          off -= 26;\n          j++;\n        }\n      }\n    } else if (endian === 'le') {\n      for (i = 0, j = 0; i < number.length; i += 3) {\n        w = number[i] | (number[i + 1] << 8) | (number[i + 2] << 16);\n        this.words[j] |= (w << off) & 0x3ffffff;\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\n        off += 24;\n        if (off >= 26) {\n          off -= 26;\n          j++;\n        }\n      }\n    }\n    return this.strip();\n  };\n\n  function parseHex4Bits (string, index) {\n    var c = string.charCodeAt(index);\n    // 'A' - 'F'\n    if (c >= 65 && c <= 70) {\n      return c - 55;\n    // 'a' - 'f'\n    } else if (c >= 97 && c <= 102) {\n      return c - 87;\n    // '0' - '9'\n    } else {\n      return (c - 48) & 0xf;\n    }\n  }\n\n  function parseHexByte (string, lowerBound, index) {\n    var r = parseHex4Bits(string, index);\n    if (index - 1 >= lowerBound) {\n      r |= parseHex4Bits(string, index - 1) << 4;\n    }\n    return r;\n  }\n\n  BN.prototype._parseHex = function _parseHex (number, start, endian) {\n    // Create possibly bigger array to ensure that it fits the number\n    this.length = Math.ceil((number.length - start) / 6);\n    this.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      this.words[i] = 0;\n    }\n\n    // 24-bits chunks\n    var off = 0;\n    var j = 0;\n\n    var w;\n    if (endian === 'be') {\n      for (i = number.length - 1; i >= start; i -= 2) {\n        w = parseHexByte(number, start, i) << off;\n        this.words[j] |= w & 0x3ffffff;\n        if (off >= 18) {\n          off -= 18;\n          j += 1;\n          this.words[j] |= w >>> 26;\n        } else {\n          off += 8;\n        }\n      }\n    } else {\n      var parseLength = number.length - start;\n      for (i = parseLength % 2 === 0 ? start + 1 : start; i < number.length; i += 2) {\n        w = parseHexByte(number, start, i) << off;\n        this.words[j] |= w & 0x3ffffff;\n        if (off >= 18) {\n          off -= 18;\n          j += 1;\n          this.words[j] |= w >>> 26;\n        } else {\n          off += 8;\n        }\n      }\n    }\n\n    this.strip();\n  };\n\n  function parseBase (str, start, end, mul) {\n    var r = 0;\n    var len = Math.min(str.length, end);\n    for (var i = start; i < len; i++) {\n      var c = str.charCodeAt(i) - 48;\n\n      r *= mul;\n\n      // 'a'\n      if (c >= 49) {\n        r += c - 49 + 0xa;\n\n      // 'A'\n      } else if (c >= 17) {\n        r += c - 17 + 0xa;\n\n      // '0' - '9'\n      } else {\n        r += c;\n      }\n    }\n    return r;\n  }\n\n  BN.prototype._parseBase = function _parseBase (number, base, start) {\n    // Initialize as zero\n    this.words = [ 0 ];\n    this.length = 1;\n\n    // Find length of limb in base\n    for (var limbLen = 0, limbPow = 1; limbPow <= 0x3ffffff; limbPow *= base) {\n      limbLen++;\n    }\n    limbLen--;\n    limbPow = (limbPow / base) | 0;\n\n    var total = number.length - start;\n    var mod = total % limbLen;\n    var end = Math.min(total, total - mod) + start;\n\n    var word = 0;\n    for (var i = start; i < end; i += limbLen) {\n      word = parseBase(number, i, i + limbLen, base);\n\n      this.imuln(limbPow);\n      if (this.words[0] + word < 0x4000000) {\n        this.words[0] += word;\n      } else {\n        this._iaddn(word);\n      }\n    }\n\n    if (mod !== 0) {\n      var pow = 1;\n      word = parseBase(number, i, number.length, base);\n\n      for (i = 0; i < mod; i++) {\n        pow *= base;\n      }\n\n      this.imuln(pow);\n      if (this.words[0] + word < 0x4000000) {\n        this.words[0] += word;\n      } else {\n        this._iaddn(word);\n      }\n    }\n\n    this.strip();\n  };\n\n  BN.prototype.copy = function copy (dest) {\n    dest.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      dest.words[i] = this.words[i];\n    }\n    dest.length = this.length;\n    dest.negative = this.negative;\n    dest.red = this.red;\n  };\n\n  BN.prototype.clone = function clone () {\n    var r = new BN(null);\n    this.copy(r);\n    return r;\n  };\n\n  BN.prototype._expand = function _expand (size) {\n    while (this.length < size) {\n      this.words[this.length++] = 0;\n    }\n    return this;\n  };\n\n  // Remove leading `0` from `this`\n  BN.prototype.strip = function strip () {\n    while (this.length > 1 && this.words[this.length - 1] === 0) {\n      this.length--;\n    }\n    return this._normSign();\n  };\n\n  BN.prototype._normSign = function _normSign () {\n    // -0 = 0\n    if (this.length === 1 && this.words[0] === 0) {\n      this.negative = 0;\n    }\n    return this;\n  };\n\n  BN.prototype.inspect = function inspect () {\n    return (this.red ? '<BN-R: ' : '<BN: ') + this.toString(16) + '>';\n  };\n\n  /*\n\n  var zeros = [];\n  var groupSizes = [];\n  var groupBases = [];\n\n  var s = '';\n  var i = -1;\n  while (++i < BN.wordSize) {\n    zeros[i] = s;\n    s += '0';\n  }\n  groupSizes[0] = 0;\n  groupSizes[1] = 0;\n  groupBases[0] = 0;\n  groupBases[1] = 0;\n  var base = 2 - 1;\n  while (++base < 36 + 1) {\n    var groupSize = 0;\n    var groupBase = 1;\n    while (groupBase < (1 << BN.wordSize) / base) {\n      groupBase *= base;\n      groupSize += 1;\n    }\n    groupSizes[base] = groupSize;\n    groupBases[base] = groupBase;\n  }\n\n  */\n\n  var zeros = [\n    '',\n    '0',\n    '00',\n    '000',\n    '0000',\n    '00000',\n    '000000',\n    '0000000',\n    '00000000',\n    '000000000',\n    '0000000000',\n    '00000000000',\n    '000000000000',\n    '0000000000000',\n    '00000000000000',\n    '000000000000000',\n    '0000000000000000',\n    '00000000000000000',\n    '000000000000000000',\n    '0000000000000000000',\n    '00000000000000000000',\n    '000000000000000000000',\n    '0000000000000000000000',\n    '00000000000000000000000',\n    '000000000000000000000000',\n    '0000000000000000000000000'\n  ];\n\n  var groupSizes = [\n    0, 0,\n    25, 16, 12, 11, 10, 9, 8,\n    8, 7, 7, 7, 7, 6, 6,\n    6, 6, 6, 6, 6, 5, 5,\n    5, 5, 5, 5, 5, 5, 5,\n    5, 5, 5, 5, 5, 5, 5\n  ];\n\n  var groupBases = [\n    0, 0,\n    33554432, 43046721, 16777216, 48828125, 60466176, 40353607, 16777216,\n    43046721, 10000000, 19487171, 35831808, 62748517, 7529536, 11390625,\n    16777216, 24137569, 34012224, 47045881, 64000000, 4084101, 5153632,\n    6436343, 7962624, 9765625, 11881376, 14348907, 17210368, 20511149,\n    24300000, 28629151, 33554432, 39135393, 45435424, 52521875, 60466176\n  ];\n\n  BN.prototype.toString = function toString (base, padding) {\n    base = base || 10;\n    padding = padding | 0 || 1;\n\n    var out;\n    if (base === 16 || base === 'hex') {\n      out = '';\n      var off = 0;\n      var carry = 0;\n      for (var i = 0; i < this.length; i++) {\n        var w = this.words[i];\n        var word = (((w << off) | carry) & 0xffffff).toString(16);\n        carry = (w >>> (24 - off)) & 0xffffff;\n        if (carry !== 0 || i !== this.length - 1) {\n          out = zeros[6 - word.length] + word + out;\n        } else {\n          out = word + out;\n        }\n        off += 2;\n        if (off >= 26) {\n          off -= 26;\n          i--;\n        }\n      }\n      if (carry !== 0) {\n        out = carry.toString(16) + out;\n      }\n      while (out.length % padding !== 0) {\n        out = '0' + out;\n      }\n      if (this.negative !== 0) {\n        out = '-' + out;\n      }\n      return out;\n    }\n\n    if (base === (base | 0) && base >= 2 && base <= 36) {\n      // var groupSize = Math.floor(BN.wordSize * Math.LN2 / Math.log(base));\n      var groupSize = groupSizes[base];\n      // var groupBase = Math.pow(base, groupSize);\n      var groupBase = groupBases[base];\n      out = '';\n      var c = this.clone();\n      c.negative = 0;\n      while (!c.isZero()) {\n        var r = c.modn(groupBase).toString(base);\n        c = c.idivn(groupBase);\n\n        if (!c.isZero()) {\n          out = zeros[groupSize - r.length] + r + out;\n        } else {\n          out = r + out;\n        }\n      }\n      if (this.isZero()) {\n        out = '0' + out;\n      }\n      while (out.length % padding !== 0) {\n        out = '0' + out;\n      }\n      if (this.negative !== 0) {\n        out = '-' + out;\n      }\n      return out;\n    }\n\n    assert(false, 'Base should be between 2 and 36');\n  };\n\n  BN.prototype.toNumber = function toNumber () {\n    var ret = this.words[0];\n    if (this.length === 2) {\n      ret += this.words[1] * 0x4000000;\n    } else if (this.length === 3 && this.words[2] === 0x01) {\n      // NOTE: at this stage it is known that the top bit is set\n      ret += 0x10000000000000 + (this.words[1] * 0x4000000);\n    } else if (this.length > 2) {\n      assert(false, 'Number can only safely store up to 53 bits');\n    }\n    return (this.negative !== 0) ? -ret : ret;\n  };\n\n  BN.prototype.toJSON = function toJSON () {\n    return this.toString(16);\n  };\n\n  BN.prototype.toBuffer = function toBuffer (endian, length) {\n    assert(typeof Buffer !== 'undefined');\n    return this.toArrayLike(Buffer, endian, length);\n  };\n\n  BN.prototype.toArray = function toArray (endian, length) {\n    return this.toArrayLike(Array, endian, length);\n  };\n\n  BN.prototype.toArrayLike = function toArrayLike (ArrayType, endian, length) {\n    var byteLength = this.byteLength();\n    var reqLength = length || Math.max(1, byteLength);\n    assert(byteLength <= reqLength, 'byte array longer than desired length');\n    assert(reqLength > 0, 'Requested array length <= 0');\n\n    this.strip();\n    var littleEndian = endian === 'le';\n    var res = new ArrayType(reqLength);\n\n    var b, i;\n    var q = this.clone();\n    if (!littleEndian) {\n      // Assume big-endian\n      for (i = 0; i < reqLength - byteLength; i++) {\n        res[i] = 0;\n      }\n\n      for (i = 0; !q.isZero(); i++) {\n        b = q.andln(0xff);\n        q.iushrn(8);\n\n        res[reqLength - i - 1] = b;\n      }\n    } else {\n      for (i = 0; !q.isZero(); i++) {\n        b = q.andln(0xff);\n        q.iushrn(8);\n\n        res[i] = b;\n      }\n\n      for (; i < reqLength; i++) {\n        res[i] = 0;\n      }\n    }\n\n    return res;\n  };\n\n  if (Math.clz32) {\n    BN.prototype._countBits = function _countBits (w) {\n      return 32 - Math.clz32(w);\n    };\n  } else {\n    BN.prototype._countBits = function _countBits (w) {\n      var t = w;\n      var r = 0;\n      if (t >= 0x1000) {\n        r += 13;\n        t >>>= 13;\n      }\n      if (t >= 0x40) {\n        r += 7;\n        t >>>= 7;\n      }\n      if (t >= 0x8) {\n        r += 4;\n        t >>>= 4;\n      }\n      if (t >= 0x02) {\n        r += 2;\n        t >>>= 2;\n      }\n      return r + t;\n    };\n  }\n\n  BN.prototype._zeroBits = function _zeroBits (w) {\n    // Short-cut\n    if (w === 0) return 26;\n\n    var t = w;\n    var r = 0;\n    if ((t & 0x1fff) === 0) {\n      r += 13;\n      t >>>= 13;\n    }\n    if ((t & 0x7f) === 0) {\n      r += 7;\n      t >>>= 7;\n    }\n    if ((t & 0xf) === 0) {\n      r += 4;\n      t >>>= 4;\n    }\n    if ((t & 0x3) === 0) {\n      r += 2;\n      t >>>= 2;\n    }\n    if ((t & 0x1) === 0) {\n      r++;\n    }\n    return r;\n  };\n\n  // Return number of used bits in a BN\n  BN.prototype.bitLength = function bitLength () {\n    var w = this.words[this.length - 1];\n    var hi = this._countBits(w);\n    return (this.length - 1) * 26 + hi;\n  };\n\n  function toBitArray (num) {\n    var w = new Array(num.bitLength());\n\n    for (var bit = 0; bit < w.length; bit++) {\n      var off = (bit / 26) | 0;\n      var wbit = bit % 26;\n\n      w[bit] = (num.words[off] & (1 << wbit)) >>> wbit;\n    }\n\n    return w;\n  }\n\n  // Number of trailing zero bits\n  BN.prototype.zeroBits = function zeroBits () {\n    if (this.isZero()) return 0;\n\n    var r = 0;\n    for (var i = 0; i < this.length; i++) {\n      var b = this._zeroBits(this.words[i]);\n      r += b;\n      if (b !== 26) break;\n    }\n    return r;\n  };\n\n  BN.prototype.byteLength = function byteLength () {\n    return Math.ceil(this.bitLength() / 8);\n  };\n\n  BN.prototype.toTwos = function toTwos (width) {\n    if (this.negative !== 0) {\n      return this.abs().inotn(width).iaddn(1);\n    }\n    return this.clone();\n  };\n\n  BN.prototype.fromTwos = function fromTwos (width) {\n    if (this.testn(width - 1)) {\n      return this.notn(width).iaddn(1).ineg();\n    }\n    return this.clone();\n  };\n\n  BN.prototype.isNeg = function isNeg () {\n    return this.negative !== 0;\n  };\n\n  // Return negative clone of `this`\n  BN.prototype.neg = function neg () {\n    return this.clone().ineg();\n  };\n\n  BN.prototype.ineg = function ineg () {\n    if (!this.isZero()) {\n      this.negative ^= 1;\n    }\n\n    return this;\n  };\n\n  // Or `num` with `this` in-place\n  BN.prototype.iuor = function iuor (num) {\n    while (this.length < num.length) {\n      this.words[this.length++] = 0;\n    }\n\n    for (var i = 0; i < num.length; i++) {\n      this.words[i] = this.words[i] | num.words[i];\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.ior = function ior (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuor(num);\n  };\n\n  // Or `num` with `this`\n  BN.prototype.or = function or (num) {\n    if (this.length > num.length) return this.clone().ior(num);\n    return num.clone().ior(this);\n  };\n\n  BN.prototype.uor = function uor (num) {\n    if (this.length > num.length) return this.clone().iuor(num);\n    return num.clone().iuor(this);\n  };\n\n  // And `num` with `this` in-place\n  BN.prototype.iuand = function iuand (num) {\n    // b = min-length(num, this)\n    var b;\n    if (this.length > num.length) {\n      b = num;\n    } else {\n      b = this;\n    }\n\n    for (var i = 0; i < b.length; i++) {\n      this.words[i] = this.words[i] & num.words[i];\n    }\n\n    this.length = b.length;\n\n    return this.strip();\n  };\n\n  BN.prototype.iand = function iand (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuand(num);\n  };\n\n  // And `num` with `this`\n  BN.prototype.and = function and (num) {\n    if (this.length > num.length) return this.clone().iand(num);\n    return num.clone().iand(this);\n  };\n\n  BN.prototype.uand = function uand (num) {\n    if (this.length > num.length) return this.clone().iuand(num);\n    return num.clone().iuand(this);\n  };\n\n  // Xor `num` with `this` in-place\n  BN.prototype.iuxor = function iuxor (num) {\n    // a.length > b.length\n    var a;\n    var b;\n    if (this.length > num.length) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    for (var i = 0; i < b.length; i++) {\n      this.words[i] = a.words[i] ^ b.words[i];\n    }\n\n    if (this !== a) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    this.length = a.length;\n\n    return this.strip();\n  };\n\n  BN.prototype.ixor = function ixor (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuxor(num);\n  };\n\n  // Xor `num` with `this`\n  BN.prototype.xor = function xor (num) {\n    if (this.length > num.length) return this.clone().ixor(num);\n    return num.clone().ixor(this);\n  };\n\n  BN.prototype.uxor = function uxor (num) {\n    if (this.length > num.length) return this.clone().iuxor(num);\n    return num.clone().iuxor(this);\n  };\n\n  // Not ``this`` with ``width`` bitwidth\n  BN.prototype.inotn = function inotn (width) {\n    assert(typeof width === 'number' && width >= 0);\n\n    var bytesNeeded = Math.ceil(width / 26) | 0;\n    var bitsLeft = width % 26;\n\n    // Extend the buffer with leading zeroes\n    this._expand(bytesNeeded);\n\n    if (bitsLeft > 0) {\n      bytesNeeded--;\n    }\n\n    // Handle complete words\n    for (var i = 0; i < bytesNeeded; i++) {\n      this.words[i] = ~this.words[i] & 0x3ffffff;\n    }\n\n    // Handle the residue\n    if (bitsLeft > 0) {\n      this.words[i] = ~this.words[i] & (0x3ffffff >> (26 - bitsLeft));\n    }\n\n    // And remove leading zeroes\n    return this.strip();\n  };\n\n  BN.prototype.notn = function notn (width) {\n    return this.clone().inotn(width);\n  };\n\n  // Set `bit` of `this`\n  BN.prototype.setn = function setn (bit, val) {\n    assert(typeof bit === 'number' && bit >= 0);\n\n    var off = (bit / 26) | 0;\n    var wbit = bit % 26;\n\n    this._expand(off + 1);\n\n    if (val) {\n      this.words[off] = this.words[off] | (1 << wbit);\n    } else {\n      this.words[off] = this.words[off] & ~(1 << wbit);\n    }\n\n    return this.strip();\n  };\n\n  // Add `num` to `this` in-place\n  BN.prototype.iadd = function iadd (num) {\n    var r;\n\n    // negative + positive\n    if (this.negative !== 0 && num.negative === 0) {\n      this.negative = 0;\n      r = this.isub(num);\n      this.negative ^= 1;\n      return this._normSign();\n\n    // positive + negative\n    } else if (this.negative === 0 && num.negative !== 0) {\n      num.negative = 0;\n      r = this.isub(num);\n      num.negative = 1;\n      return r._normSign();\n    }\n\n    // a.length > b.length\n    var a, b;\n    if (this.length > num.length) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    var carry = 0;\n    for (var i = 0; i < b.length; i++) {\n      r = (a.words[i] | 0) + (b.words[i] | 0) + carry;\n      this.words[i] = r & 0x3ffffff;\n      carry = r >>> 26;\n    }\n    for (; carry !== 0 && i < a.length; i++) {\n      r = (a.words[i] | 0) + carry;\n      this.words[i] = r & 0x3ffffff;\n      carry = r >>> 26;\n    }\n\n    this.length = a.length;\n    if (carry !== 0) {\n      this.words[this.length] = carry;\n      this.length++;\n    // Copy the rest of the words\n    } else if (a !== this) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    return this;\n  };\n\n  // Add `num` to `this`\n  BN.prototype.add = function add (num) {\n    var res;\n    if (num.negative !== 0 && this.negative === 0) {\n      num.negative = 0;\n      res = this.sub(num);\n      num.negative ^= 1;\n      return res;\n    } else if (num.negative === 0 && this.negative !== 0) {\n      this.negative = 0;\n      res = num.sub(this);\n      this.negative = 1;\n      return res;\n    }\n\n    if (this.length > num.length) return this.clone().iadd(num);\n\n    return num.clone().iadd(this);\n  };\n\n  // Subtract `num` from `this` in-place\n  BN.prototype.isub = function isub (num) {\n    // this - (-num) = this + num\n    if (num.negative !== 0) {\n      num.negative = 0;\n      var r = this.iadd(num);\n      num.negative = 1;\n      return r._normSign();\n\n    // -this - num = -(this + num)\n    } else if (this.negative !== 0) {\n      this.negative = 0;\n      this.iadd(num);\n      this.negative = 1;\n      return this._normSign();\n    }\n\n    // At this point both numbers are positive\n    var cmp = this.cmp(num);\n\n    // Optimization - zeroify\n    if (cmp === 0) {\n      this.negative = 0;\n      this.length = 1;\n      this.words[0] = 0;\n      return this;\n    }\n\n    // a > b\n    var a, b;\n    if (cmp > 0) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    var carry = 0;\n    for (var i = 0; i < b.length; i++) {\n      r = (a.words[i] | 0) - (b.words[i] | 0) + carry;\n      carry = r >> 26;\n      this.words[i] = r & 0x3ffffff;\n    }\n    for (; carry !== 0 && i < a.length; i++) {\n      r = (a.words[i] | 0) + carry;\n      carry = r >> 26;\n      this.words[i] = r & 0x3ffffff;\n    }\n\n    // Copy rest of the words\n    if (carry === 0 && i < a.length && a !== this) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    this.length = Math.max(this.length, i);\n\n    if (a !== this) {\n      this.negative = 1;\n    }\n\n    return this.strip();\n  };\n\n  // Subtract `num` from `this`\n  BN.prototype.sub = function sub (num) {\n    return this.clone().isub(num);\n  };\n\n  function smallMulTo (self, num, out) {\n    out.negative = num.negative ^ self.negative;\n    var len = (self.length + num.length) | 0;\n    out.length = len;\n    len = (len - 1) | 0;\n\n    // Peel one iteration (compiler can't do it, because of code complexity)\n    var a = self.words[0] | 0;\n    var b = num.words[0] | 0;\n    var r = a * b;\n\n    var lo = r & 0x3ffffff;\n    var carry = (r / 0x4000000) | 0;\n    out.words[0] = lo;\n\n    for (var k = 1; k < len; k++) {\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\n      // note that ncarry could be >= 0x3ffffff\n      var ncarry = carry >>> 26;\n      var rword = carry & 0x3ffffff;\n      var maxJ = Math.min(k, num.length - 1);\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\n        var i = (k - j) | 0;\n        a = self.words[i] | 0;\n        b = num.words[j] | 0;\n        r = a * b + rword;\n        ncarry += (r / 0x4000000) | 0;\n        rword = r & 0x3ffffff;\n      }\n      out.words[k] = rword | 0;\n      carry = ncarry | 0;\n    }\n    if (carry !== 0) {\n      out.words[k] = carry | 0;\n    } else {\n      out.length--;\n    }\n\n    return out.strip();\n  }\n\n  // TODO(indutny): it may be reasonable to omit it for users who don't need\n  // to work with 256-bit numbers, otherwise it gives 20% improvement for 256-bit\n  // multiplication (like elliptic secp256k1).\n  var comb10MulTo = function comb10MulTo (self, num, out) {\n    var a = self.words;\n    var b = num.words;\n    var o = out.words;\n    var c = 0;\n    var lo;\n    var mid;\n    var hi;\n    var a0 = a[0] | 0;\n    var al0 = a0 & 0x1fff;\n    var ah0 = a0 >>> 13;\n    var a1 = a[1] | 0;\n    var al1 = a1 & 0x1fff;\n    var ah1 = a1 >>> 13;\n    var a2 = a[2] | 0;\n    var al2 = a2 & 0x1fff;\n    var ah2 = a2 >>> 13;\n    var a3 = a[3] | 0;\n    var al3 = a3 & 0x1fff;\n    var ah3 = a3 >>> 13;\n    var a4 = a[4] | 0;\n    var al4 = a4 & 0x1fff;\n    var ah4 = a4 >>> 13;\n    var a5 = a[5] | 0;\n    var al5 = a5 & 0x1fff;\n    var ah5 = a5 >>> 13;\n    var a6 = a[6] | 0;\n    var al6 = a6 & 0x1fff;\n    var ah6 = a6 >>> 13;\n    var a7 = a[7] | 0;\n    var al7 = a7 & 0x1fff;\n    var ah7 = a7 >>> 13;\n    var a8 = a[8] | 0;\n    var al8 = a8 & 0x1fff;\n    var ah8 = a8 >>> 13;\n    var a9 = a[9] | 0;\n    var al9 = a9 & 0x1fff;\n    var ah9 = a9 >>> 13;\n    var b0 = b[0] | 0;\n    var bl0 = b0 & 0x1fff;\n    var bh0 = b0 >>> 13;\n    var b1 = b[1] | 0;\n    var bl1 = b1 & 0x1fff;\n    var bh1 = b1 >>> 13;\n    var b2 = b[2] | 0;\n    var bl2 = b2 & 0x1fff;\n    var bh2 = b2 >>> 13;\n    var b3 = b[3] | 0;\n    var bl3 = b3 & 0x1fff;\n    var bh3 = b3 >>> 13;\n    var b4 = b[4] | 0;\n    var bl4 = b4 & 0x1fff;\n    var bh4 = b4 >>> 13;\n    var b5 = b[5] | 0;\n    var bl5 = b5 & 0x1fff;\n    var bh5 = b5 >>> 13;\n    var b6 = b[6] | 0;\n    var bl6 = b6 & 0x1fff;\n    var bh6 = b6 >>> 13;\n    var b7 = b[7] | 0;\n    var bl7 = b7 & 0x1fff;\n    var bh7 = b7 >>> 13;\n    var b8 = b[8] | 0;\n    var bl8 = b8 & 0x1fff;\n    var bh8 = b8 >>> 13;\n    var b9 = b[9] | 0;\n    var bl9 = b9 & 0x1fff;\n    var bh9 = b9 >>> 13;\n\n    out.negative = self.negative ^ num.negative;\n    out.length = 19;\n    /* k = 0 */\n    lo = Math.imul(al0, bl0);\n    mid = Math.imul(al0, bh0);\n    mid = (mid + Math.imul(ah0, bl0)) | 0;\n    hi = Math.imul(ah0, bh0);\n    var w0 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w0 >>> 26)) | 0;\n    w0 &= 0x3ffffff;\n    /* k = 1 */\n    lo = Math.imul(al1, bl0);\n    mid = Math.imul(al1, bh0);\n    mid = (mid + Math.imul(ah1, bl0)) | 0;\n    hi = Math.imul(ah1, bh0);\n    lo = (lo + Math.imul(al0, bl1)) | 0;\n    mid = (mid + Math.imul(al0, bh1)) | 0;\n    mid = (mid + Math.imul(ah0, bl1)) | 0;\n    hi = (hi + Math.imul(ah0, bh1)) | 0;\n    var w1 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w1 >>> 26)) | 0;\n    w1 &= 0x3ffffff;\n    /* k = 2 */\n    lo = Math.imul(al2, bl0);\n    mid = Math.imul(al2, bh0);\n    mid = (mid + Math.imul(ah2, bl0)) | 0;\n    hi = Math.imul(ah2, bh0);\n    lo = (lo + Math.imul(al1, bl1)) | 0;\n    mid = (mid + Math.imul(al1, bh1)) | 0;\n    mid = (mid + Math.imul(ah1, bl1)) | 0;\n    hi = (hi + Math.imul(ah1, bh1)) | 0;\n    lo = (lo + Math.imul(al0, bl2)) | 0;\n    mid = (mid + Math.imul(al0, bh2)) | 0;\n    mid = (mid + Math.imul(ah0, bl2)) | 0;\n    hi = (hi + Math.imul(ah0, bh2)) | 0;\n    var w2 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w2 >>> 26)) | 0;\n    w2 &= 0x3ffffff;\n    /* k = 3 */\n    lo = Math.imul(al3, bl0);\n    mid = Math.imul(al3, bh0);\n    mid = (mid + Math.imul(ah3, bl0)) | 0;\n    hi = Math.imul(ah3, bh0);\n    lo = (lo + Math.imul(al2, bl1)) | 0;\n    mid = (mid + Math.imul(al2, bh1)) | 0;\n    mid = (mid + Math.imul(ah2, bl1)) | 0;\n    hi = (hi + Math.imul(ah2, bh1)) | 0;\n    lo = (lo + Math.imul(al1, bl2)) | 0;\n    mid = (mid + Math.imul(al1, bh2)) | 0;\n    mid = (mid + Math.imul(ah1, bl2)) | 0;\n    hi = (hi + Math.imul(ah1, bh2)) | 0;\n    lo = (lo + Math.imul(al0, bl3)) | 0;\n    mid = (mid + Math.imul(al0, bh3)) | 0;\n    mid = (mid + Math.imul(ah0, bl3)) | 0;\n    hi = (hi + Math.imul(ah0, bh3)) | 0;\n    var w3 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w3 >>> 26)) | 0;\n    w3 &= 0x3ffffff;\n    /* k = 4 */\n    lo = Math.imul(al4, bl0);\n    mid = Math.imul(al4, bh0);\n    mid = (mid + Math.imul(ah4, bl0)) | 0;\n    hi = Math.imul(ah4, bh0);\n    lo = (lo + Math.imul(al3, bl1)) | 0;\n    mid = (mid + Math.imul(al3, bh1)) | 0;\n    mid = (mid + Math.imul(ah3, bl1)) | 0;\n    hi = (hi + Math.imul(ah3, bh1)) | 0;\n    lo = (lo + Math.imul(al2, bl2)) | 0;\n    mid = (mid + Math.imul(al2, bh2)) | 0;\n    mid = (mid + Math.imul(ah2, bl2)) | 0;\n    hi = (hi + Math.imul(ah2, bh2)) | 0;\n    lo = (lo + Math.imul(al1, bl3)) | 0;\n    mid = (mid + Math.imul(al1, bh3)) | 0;\n    mid = (mid + Math.imul(ah1, bl3)) | 0;\n    hi = (hi + Math.imul(ah1, bh3)) | 0;\n    lo = (lo + Math.imul(al0, bl4)) | 0;\n    mid = (mid + Math.imul(al0, bh4)) | 0;\n    mid = (mid + Math.imul(ah0, bl4)) | 0;\n    hi = (hi + Math.imul(ah0, bh4)) | 0;\n    var w4 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w4 >>> 26)) | 0;\n    w4 &= 0x3ffffff;\n    /* k = 5 */\n    lo = Math.imul(al5, bl0);\n    mid = Math.imul(al5, bh0);\n    mid = (mid + Math.imul(ah5, bl0)) | 0;\n    hi = Math.imul(ah5, bh0);\n    lo = (lo + Math.imul(al4, bl1)) | 0;\n    mid = (mid + Math.imul(al4, bh1)) | 0;\n    mid = (mid + Math.imul(ah4, bl1)) | 0;\n    hi = (hi + Math.imul(ah4, bh1)) | 0;\n    lo = (lo + Math.imul(al3, bl2)) | 0;\n    mid = (mid + Math.imul(al3, bh2)) | 0;\n    mid = (mid + Math.imul(ah3, bl2)) | 0;\n    hi = (hi + Math.imul(ah3, bh2)) | 0;\n    lo = (lo + Math.imul(al2, bl3)) | 0;\n    mid = (mid + Math.imul(al2, bh3)) | 0;\n    mid = (mid + Math.imul(ah2, bl3)) | 0;\n    hi = (hi + Math.imul(ah2, bh3)) | 0;\n    lo = (lo + Math.imul(al1, bl4)) | 0;\n    mid = (mid + Math.imul(al1, bh4)) | 0;\n    mid = (mid + Math.imul(ah1, bl4)) | 0;\n    hi = (hi + Math.imul(ah1, bh4)) | 0;\n    lo = (lo + Math.imul(al0, bl5)) | 0;\n    mid = (mid + Math.imul(al0, bh5)) | 0;\n    mid = (mid + Math.imul(ah0, bl5)) | 0;\n    hi = (hi + Math.imul(ah0, bh5)) | 0;\n    var w5 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w5 >>> 26)) | 0;\n    w5 &= 0x3ffffff;\n    /* k = 6 */\n    lo = Math.imul(al6, bl0);\n    mid = Math.imul(al6, bh0);\n    mid = (mid + Math.imul(ah6, bl0)) | 0;\n    hi = Math.imul(ah6, bh0);\n    lo = (lo + Math.imul(al5, bl1)) | 0;\n    mid = (mid + Math.imul(al5, bh1)) | 0;\n    mid = (mid + Math.imul(ah5, bl1)) | 0;\n    hi = (hi + Math.imul(ah5, bh1)) | 0;\n    lo = (lo + Math.imul(al4, bl2)) | 0;\n    mid = (mid + Math.imul(al4, bh2)) | 0;\n    mid = (mid + Math.imul(ah4, bl2)) | 0;\n    hi = (hi + Math.imul(ah4, bh2)) | 0;\n    lo = (lo + Math.imul(al3, bl3)) | 0;\n    mid = (mid + Math.imul(al3, bh3)) | 0;\n    mid = (mid + Math.imul(ah3, bl3)) | 0;\n    hi = (hi + Math.imul(ah3, bh3)) | 0;\n    lo = (lo + Math.imul(al2, bl4)) | 0;\n    mid = (mid + Math.imul(al2, bh4)) | 0;\n    mid = (mid + Math.imul(ah2, bl4)) | 0;\n    hi = (hi + Math.imul(ah2, bh4)) | 0;\n    lo = (lo + Math.imul(al1, bl5)) | 0;\n    mid = (mid + Math.imul(al1, bh5)) | 0;\n    mid = (mid + Math.imul(ah1, bl5)) | 0;\n    hi = (hi + Math.imul(ah1, bh5)) | 0;\n    lo = (lo + Math.imul(al0, bl6)) | 0;\n    mid = (mid + Math.imul(al0, bh6)) | 0;\n    mid = (mid + Math.imul(ah0, bl6)) | 0;\n    hi = (hi + Math.imul(ah0, bh6)) | 0;\n    var w6 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w6 >>> 26)) | 0;\n    w6 &= 0x3ffffff;\n    /* k = 7 */\n    lo = Math.imul(al7, bl0);\n    mid = Math.imul(al7, bh0);\n    mid = (mid + Math.imul(ah7, bl0)) | 0;\n    hi = Math.imul(ah7, bh0);\n    lo = (lo + Math.imul(al6, bl1)) | 0;\n    mid = (mid + Math.imul(al6, bh1)) | 0;\n    mid = (mid + Math.imul(ah6, bl1)) | 0;\n    hi = (hi + Math.imul(ah6, bh1)) | 0;\n    lo = (lo + Math.imul(al5, bl2)) | 0;\n    mid = (mid + Math.imul(al5, bh2)) | 0;\n    mid = (mid + Math.imul(ah5, bl2)) | 0;\n    hi = (hi + Math.imul(ah5, bh2)) | 0;\n    lo = (lo + Math.imul(al4, bl3)) | 0;\n    mid = (mid + Math.imul(al4, bh3)) | 0;\n    mid = (mid + Math.imul(ah4, bl3)) | 0;\n    hi = (hi + Math.imul(ah4, bh3)) | 0;\n    lo = (lo + Math.imul(al3, bl4)) | 0;\n    mid = (mid + Math.imul(al3, bh4)) | 0;\n    mid = (mid + Math.imul(ah3, bl4)) | 0;\n    hi = (hi + Math.imul(ah3, bh4)) | 0;\n    lo = (lo + Math.imul(al2, bl5)) | 0;\n    mid = (mid + Math.imul(al2, bh5)) | 0;\n    mid = (mid + Math.imul(ah2, bl5)) | 0;\n    hi = (hi + Math.imul(ah2, bh5)) | 0;\n    lo = (lo + Math.imul(al1, bl6)) | 0;\n    mid = (mid + Math.imul(al1, bh6)) | 0;\n    mid = (mid + Math.imul(ah1, bl6)) | 0;\n    hi = (hi + Math.imul(ah1, bh6)) | 0;\n    lo = (lo + Math.imul(al0, bl7)) | 0;\n    mid = (mid + Math.imul(al0, bh7)) | 0;\n    mid = (mid + Math.imul(ah0, bl7)) | 0;\n    hi = (hi + Math.imul(ah0, bh7)) | 0;\n    var w7 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w7 >>> 26)) | 0;\n    w7 &= 0x3ffffff;\n    /* k = 8 */\n    lo = Math.imul(al8, bl0);\n    mid = Math.imul(al8, bh0);\n    mid = (mid + Math.imul(ah8, bl0)) | 0;\n    hi = Math.imul(ah8, bh0);\n    lo = (lo + Math.imul(al7, bl1)) | 0;\n    mid = (mid + Math.imul(al7, bh1)) | 0;\n    mid = (mid + Math.imul(ah7, bl1)) | 0;\n    hi = (hi + Math.imul(ah7, bh1)) | 0;\n    lo = (lo + Math.imul(al6, bl2)) | 0;\n    mid = (mid + Math.imul(al6, bh2)) | 0;\n    mid = (mid + Math.imul(ah6, bl2)) | 0;\n    hi = (hi + Math.imul(ah6, bh2)) | 0;\n    lo = (lo + Math.imul(al5, bl3)) | 0;\n    mid = (mid + Math.imul(al5, bh3)) | 0;\n    mid = (mid + Math.imul(ah5, bl3)) | 0;\n    hi = (hi + Math.imul(ah5, bh3)) | 0;\n    lo = (lo + Math.imul(al4, bl4)) | 0;\n    mid = (mid + Math.imul(al4, bh4)) | 0;\n    mid = (mid + Math.imul(ah4, bl4)) | 0;\n    hi = (hi + Math.imul(ah4, bh4)) | 0;\n    lo = (lo + Math.imul(al3, bl5)) | 0;\n    mid = (mid + Math.imul(al3, bh5)) | 0;\n    mid = (mid + Math.imul(ah3, bl5)) | 0;\n    hi = (hi + Math.imul(ah3, bh5)) | 0;\n    lo = (lo + Math.imul(al2, bl6)) | 0;\n    mid = (mid + Math.imul(al2, bh6)) | 0;\n    mid = (mid + Math.imul(ah2, bl6)) | 0;\n    hi = (hi + Math.imul(ah2, bh6)) | 0;\n    lo = (lo + Math.imul(al1, bl7)) | 0;\n    mid = (mid + Math.imul(al1, bh7)) | 0;\n    mid = (mid + Math.imul(ah1, bl7)) | 0;\n    hi = (hi + Math.imul(ah1, bh7)) | 0;\n    lo = (lo + Math.imul(al0, bl8)) | 0;\n    mid = (mid + Math.imul(al0, bh8)) | 0;\n    mid = (mid + Math.imul(ah0, bl8)) | 0;\n    hi = (hi + Math.imul(ah0, bh8)) | 0;\n    var w8 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w8 >>> 26)) | 0;\n    w8 &= 0x3ffffff;\n    /* k = 9 */\n    lo = Math.imul(al9, bl0);\n    mid = Math.imul(al9, bh0);\n    mid = (mid + Math.imul(ah9, bl0)) | 0;\n    hi = Math.imul(ah9, bh0);\n    lo = (lo + Math.imul(al8, bl1)) | 0;\n    mid = (mid + Math.imul(al8, bh1)) | 0;\n    mid = (mid + Math.imul(ah8, bl1)) | 0;\n    hi = (hi + Math.imul(ah8, bh1)) | 0;\n    lo = (lo + Math.imul(al7, bl2)) | 0;\n    mid = (mid + Math.imul(al7, bh2)) | 0;\n    mid = (mid + Math.imul(ah7, bl2)) | 0;\n    hi = (hi + Math.imul(ah7, bh2)) | 0;\n    lo = (lo + Math.imul(al6, bl3)) | 0;\n    mid = (mid + Math.imul(al6, bh3)) | 0;\n    mid = (mid + Math.imul(ah6, bl3)) | 0;\n    hi = (hi + Math.imul(ah6, bh3)) | 0;\n    lo = (lo + Math.imul(al5, bl4)) | 0;\n    mid = (mid + Math.imul(al5, bh4)) | 0;\n    mid = (mid + Math.imul(ah5, bl4)) | 0;\n    hi = (hi + Math.imul(ah5, bh4)) | 0;\n    lo = (lo + Math.imul(al4, bl5)) | 0;\n    mid = (mid + Math.imul(al4, bh5)) | 0;\n    mid = (mid + Math.imul(ah4, bl5)) | 0;\n    hi = (hi + Math.imul(ah4, bh5)) | 0;\n    lo = (lo + Math.imul(al3, bl6)) | 0;\n    mid = (mid + Math.imul(al3, bh6)) | 0;\n    mid = (mid + Math.imul(ah3, bl6)) | 0;\n    hi = (hi + Math.imul(ah3, bh6)) | 0;\n    lo = (lo + Math.imul(al2, bl7)) | 0;\n    mid = (mid + Math.imul(al2, bh7)) | 0;\n    mid = (mid + Math.imul(ah2, bl7)) | 0;\n    hi = (hi + Math.imul(ah2, bh7)) | 0;\n    lo = (lo + Math.imul(al1, bl8)) | 0;\n    mid = (mid + Math.imul(al1, bh8)) | 0;\n    mid = (mid + Math.imul(ah1, bl8)) | 0;\n    hi = (hi + Math.imul(ah1, bh8)) | 0;\n    lo = (lo + Math.imul(al0, bl9)) | 0;\n    mid = (mid + Math.imul(al0, bh9)) | 0;\n    mid = (mid + Math.imul(ah0, bl9)) | 0;\n    hi = (hi + Math.imul(ah0, bh9)) | 0;\n    var w9 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w9 >>> 26)) | 0;\n    w9 &= 0x3ffffff;\n    /* k = 10 */\n    lo = Math.imul(al9, bl1);\n    mid = Math.imul(al9, bh1);\n    mid = (mid + Math.imul(ah9, bl1)) | 0;\n    hi = Math.imul(ah9, bh1);\n    lo = (lo + Math.imul(al8, bl2)) | 0;\n    mid = (mid + Math.imul(al8, bh2)) | 0;\n    mid = (mid + Math.imul(ah8, bl2)) | 0;\n    hi = (hi + Math.imul(ah8, bh2)) | 0;\n    lo = (lo + Math.imul(al7, bl3)) | 0;\n    mid = (mid + Math.imul(al7, bh3)) | 0;\n    mid = (mid + Math.imul(ah7, bl3)) | 0;\n    hi = (hi + Math.imul(ah7, bh3)) | 0;\n    lo = (lo + Math.imul(al6, bl4)) | 0;\n    mid = (mid + Math.imul(al6, bh4)) | 0;\n    mid = (mid + Math.imul(ah6, bl4)) | 0;\n    hi = (hi + Math.imul(ah6, bh4)) | 0;\n    lo = (lo + Math.imul(al5, bl5)) | 0;\n    mid = (mid + Math.imul(al5, bh5)) | 0;\n    mid = (mid + Math.imul(ah5, bl5)) | 0;\n    hi = (hi + Math.imul(ah5, bh5)) | 0;\n    lo = (lo + Math.imul(al4, bl6)) | 0;\n    mid = (mid + Math.imul(al4, bh6)) | 0;\n    mid = (mid + Math.imul(ah4, bl6)) | 0;\n    hi = (hi + Math.imul(ah4, bh6)) | 0;\n    lo = (lo + Math.imul(al3, bl7)) | 0;\n    mid = (mid + Math.imul(al3, bh7)) | 0;\n    mid = (mid + Math.imul(ah3, bl7)) | 0;\n    hi = (hi + Math.imul(ah3, bh7)) | 0;\n    lo = (lo + Math.imul(al2, bl8)) | 0;\n    mid = (mid + Math.imul(al2, bh8)) | 0;\n    mid = (mid + Math.imul(ah2, bl8)) | 0;\n    hi = (hi + Math.imul(ah2, bh8)) | 0;\n    lo = (lo + Math.imul(al1, bl9)) | 0;\n    mid = (mid + Math.imul(al1, bh9)) | 0;\n    mid = (mid + Math.imul(ah1, bl9)) | 0;\n    hi = (hi + Math.imul(ah1, bh9)) | 0;\n    var w10 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w10 >>> 26)) | 0;\n    w10 &= 0x3ffffff;\n    /* k = 11 */\n    lo = Math.imul(al9, bl2);\n    mid = Math.imul(al9, bh2);\n    mid = (mid + Math.imul(ah9, bl2)) | 0;\n    hi = Math.imul(ah9, bh2);\n    lo = (lo + Math.imul(al8, bl3)) | 0;\n    mid = (mid + Math.imul(al8, bh3)) | 0;\n    mid = (mid + Math.imul(ah8, bl3)) | 0;\n    hi = (hi + Math.imul(ah8, bh3)) | 0;\n    lo = (lo + Math.imul(al7, bl4)) | 0;\n    mid = (mid + Math.imul(al7, bh4)) | 0;\n    mid = (mid + Math.imul(ah7, bl4)) | 0;\n    hi = (hi + Math.imul(ah7, bh4)) | 0;\n    lo = (lo + Math.imul(al6, bl5)) | 0;\n    mid = (mid + Math.imul(al6, bh5)) | 0;\n    mid = (mid + Math.imul(ah6, bl5)) | 0;\n    hi = (hi + Math.imul(ah6, bh5)) | 0;\n    lo = (lo + Math.imul(al5, bl6)) | 0;\n    mid = (mid + Math.imul(al5, bh6)) | 0;\n    mid = (mid + Math.imul(ah5, bl6)) | 0;\n    hi = (hi + Math.imul(ah5, bh6)) | 0;\n    lo = (lo + Math.imul(al4, bl7)) | 0;\n    mid = (mid + Math.imul(al4, bh7)) | 0;\n    mid = (mid + Math.imul(ah4, bl7)) | 0;\n    hi = (hi + Math.imul(ah4, bh7)) | 0;\n    lo = (lo + Math.imul(al3, bl8)) | 0;\n    mid = (mid + Math.imul(al3, bh8)) | 0;\n    mid = (mid + Math.imul(ah3, bl8)) | 0;\n    hi = (hi + Math.imul(ah3, bh8)) | 0;\n    lo = (lo + Math.imul(al2, bl9)) | 0;\n    mid = (mid + Math.imul(al2, bh9)) | 0;\n    mid = (mid + Math.imul(ah2, bl9)) | 0;\n    hi = (hi + Math.imul(ah2, bh9)) | 0;\n    var w11 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w11 >>> 26)) | 0;\n    w11 &= 0x3ffffff;\n    /* k = 12 */\n    lo = Math.imul(al9, bl3);\n    mid = Math.imul(al9, bh3);\n    mid = (mid + Math.imul(ah9, bl3)) | 0;\n    hi = Math.imul(ah9, bh3);\n    lo = (lo + Math.imul(al8, bl4)) | 0;\n    mid = (mid + Math.imul(al8, bh4)) | 0;\n    mid = (mid + Math.imul(ah8, bl4)) | 0;\n    hi = (hi + Math.imul(ah8, bh4)) | 0;\n    lo = (lo + Math.imul(al7, bl5)) | 0;\n    mid = (mid + Math.imul(al7, bh5)) | 0;\n    mid = (mid + Math.imul(ah7, bl5)) | 0;\n    hi = (hi + Math.imul(ah7, bh5)) | 0;\n    lo = (lo + Math.imul(al6, bl6)) | 0;\n    mid = (mid + Math.imul(al6, bh6)) | 0;\n    mid = (mid + Math.imul(ah6, bl6)) | 0;\n    hi = (hi + Math.imul(ah6, bh6)) | 0;\n    lo = (lo + Math.imul(al5, bl7)) | 0;\n    mid = (mid + Math.imul(al5, bh7)) | 0;\n    mid = (mid + Math.imul(ah5, bl7)) | 0;\n    hi = (hi + Math.imul(ah5, bh7)) | 0;\n    lo = (lo + Math.imul(al4, bl8)) | 0;\n    mid = (mid + Math.imul(al4, bh8)) | 0;\n    mid = (mid + Math.imul(ah4, bl8)) | 0;\n    hi = (hi + Math.imul(ah4, bh8)) | 0;\n    lo = (lo + Math.imul(al3, bl9)) | 0;\n    mid = (mid + Math.imul(al3, bh9)) | 0;\n    mid = (mid + Math.imul(ah3, bl9)) | 0;\n    hi = (hi + Math.imul(ah3, bh9)) | 0;\n    var w12 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w12 >>> 26)) | 0;\n    w12 &= 0x3ffffff;\n    /* k = 13 */\n    lo = Math.imul(al9, bl4);\n    mid = Math.imul(al9, bh4);\n    mid = (mid + Math.imul(ah9, bl4)) | 0;\n    hi = Math.imul(ah9, bh4);\n    lo = (lo + Math.imul(al8, bl5)) | 0;\n    mid = (mid + Math.imul(al8, bh5)) | 0;\n    mid = (mid + Math.imul(ah8, bl5)) | 0;\n    hi = (hi + Math.imul(ah8, bh5)) | 0;\n    lo = (lo + Math.imul(al7, bl6)) | 0;\n    mid = (mid + Math.imul(al7, bh6)) | 0;\n    mid = (mid + Math.imul(ah7, bl6)) | 0;\n    hi = (hi + Math.imul(ah7, bh6)) | 0;\n    lo = (lo + Math.imul(al6, bl7)) | 0;\n    mid = (mid + Math.imul(al6, bh7)) | 0;\n    mid = (mid + Math.imul(ah6, bl7)) | 0;\n    hi = (hi + Math.imul(ah6, bh7)) | 0;\n    lo = (lo + Math.imul(al5, bl8)) | 0;\n    mid = (mid + Math.imul(al5, bh8)) | 0;\n    mid = (mid + Math.imul(ah5, bl8)) | 0;\n    hi = (hi + Math.imul(ah5, bh8)) | 0;\n    lo = (lo + Math.imul(al4, bl9)) | 0;\n    mid = (mid + Math.imul(al4, bh9)) | 0;\n    mid = (mid + Math.imul(ah4, bl9)) | 0;\n    hi = (hi + Math.imul(ah4, bh9)) | 0;\n    var w13 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w13 >>> 26)) | 0;\n    w13 &= 0x3ffffff;\n    /* k = 14 */\n    lo = Math.imul(al9, bl5);\n    mid = Math.imul(al9, bh5);\n    mid = (mid + Math.imul(ah9, bl5)) | 0;\n    hi = Math.imul(ah9, bh5);\n    lo = (lo + Math.imul(al8, bl6)) | 0;\n    mid = (mid + Math.imul(al8, bh6)) | 0;\n    mid = (mid + Math.imul(ah8, bl6)) | 0;\n    hi = (hi + Math.imul(ah8, bh6)) | 0;\n    lo = (lo + Math.imul(al7, bl7)) | 0;\n    mid = (mid + Math.imul(al7, bh7)) | 0;\n    mid = (mid + Math.imul(ah7, bl7)) | 0;\n    hi = (hi + Math.imul(ah7, bh7)) | 0;\n    lo = (lo + Math.imul(al6, bl8)) | 0;\n    mid = (mid + Math.imul(al6, bh8)) | 0;\n    mid = (mid + Math.imul(ah6, bl8)) | 0;\n    hi = (hi + Math.imul(ah6, bh8)) | 0;\n    lo = (lo + Math.imul(al5, bl9)) | 0;\n    mid = (mid + Math.imul(al5, bh9)) | 0;\n    mid = (mid + Math.imul(ah5, bl9)) | 0;\n    hi = (hi + Math.imul(ah5, bh9)) | 0;\n    var w14 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w14 >>> 26)) | 0;\n    w14 &= 0x3ffffff;\n    /* k = 15 */\n    lo = Math.imul(al9, bl6);\n    mid = Math.imul(al9, bh6);\n    mid = (mid + Math.imul(ah9, bl6)) | 0;\n    hi = Math.imul(ah9, bh6);\n    lo = (lo + Math.imul(al8, bl7)) | 0;\n    mid = (mid + Math.imul(al8, bh7)) | 0;\n    mid = (mid + Math.imul(ah8, bl7)) | 0;\n    hi = (hi + Math.imul(ah8, bh7)) | 0;\n    lo = (lo + Math.imul(al7, bl8)) | 0;\n    mid = (mid + Math.imul(al7, bh8)) | 0;\n    mid = (mid + Math.imul(ah7, bl8)) | 0;\n    hi = (hi + Math.imul(ah7, bh8)) | 0;\n    lo = (lo + Math.imul(al6, bl9)) | 0;\n    mid = (mid + Math.imul(al6, bh9)) | 0;\n    mid = (mid + Math.imul(ah6, bl9)) | 0;\n    hi = (hi + Math.imul(ah6, bh9)) | 0;\n    var w15 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w15 >>> 26)) | 0;\n    w15 &= 0x3ffffff;\n    /* k = 16 */\n    lo = Math.imul(al9, bl7);\n    mid = Math.imul(al9, bh7);\n    mid = (mid + Math.imul(ah9, bl7)) | 0;\n    hi = Math.imul(ah9, bh7);\n    lo = (lo + Math.imul(al8, bl8)) | 0;\n    mid = (mid + Math.imul(al8, bh8)) | 0;\n    mid = (mid + Math.imul(ah8, bl8)) | 0;\n    hi = (hi + Math.imul(ah8, bh8)) | 0;\n    lo = (lo + Math.imul(al7, bl9)) | 0;\n    mid = (mid + Math.imul(al7, bh9)) | 0;\n    mid = (mid + Math.imul(ah7, bl9)) | 0;\n    hi = (hi + Math.imul(ah7, bh9)) | 0;\n    var w16 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w16 >>> 26)) | 0;\n    w16 &= 0x3ffffff;\n    /* k = 17 */\n    lo = Math.imul(al9, bl8);\n    mid = Math.imul(al9, bh8);\n    mid = (mid + Math.imul(ah9, bl8)) | 0;\n    hi = Math.imul(ah9, bh8);\n    lo = (lo + Math.imul(al8, bl9)) | 0;\n    mid = (mid + Math.imul(al8, bh9)) | 0;\n    mid = (mid + Math.imul(ah8, bl9)) | 0;\n    hi = (hi + Math.imul(ah8, bh9)) | 0;\n    var w17 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w17 >>> 26)) | 0;\n    w17 &= 0x3ffffff;\n    /* k = 18 */\n    lo = Math.imul(al9, bl9);\n    mid = Math.imul(al9, bh9);\n    mid = (mid + Math.imul(ah9, bl9)) | 0;\n    hi = Math.imul(ah9, bh9);\n    var w18 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w18 >>> 26)) | 0;\n    w18 &= 0x3ffffff;\n    o[0] = w0;\n    o[1] = w1;\n    o[2] = w2;\n    o[3] = w3;\n    o[4] = w4;\n    o[5] = w5;\n    o[6] = w6;\n    o[7] = w7;\n    o[8] = w8;\n    o[9] = w9;\n    o[10] = w10;\n    o[11] = w11;\n    o[12] = w12;\n    o[13] = w13;\n    o[14] = w14;\n    o[15] = w15;\n    o[16] = w16;\n    o[17] = w17;\n    o[18] = w18;\n    if (c !== 0) {\n      o[19] = c;\n      out.length++;\n    }\n    return out;\n  };\n\n  // Polyfill comb\n  if (!Math.imul) {\n    comb10MulTo = smallMulTo;\n  }\n\n  function bigMulTo (self, num, out) {\n    out.negative = num.negative ^ self.negative;\n    out.length = self.length + num.length;\n\n    var carry = 0;\n    var hncarry = 0;\n    for (var k = 0; k < out.length - 1; k++) {\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\n      // note that ncarry could be >= 0x3ffffff\n      var ncarry = hncarry;\n      hncarry = 0;\n      var rword = carry & 0x3ffffff;\n      var maxJ = Math.min(k, num.length - 1);\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\n        var i = k - j;\n        var a = self.words[i] | 0;\n        var b = num.words[j] | 0;\n        var r = a * b;\n\n        var lo = r & 0x3ffffff;\n        ncarry = (ncarry + ((r / 0x4000000) | 0)) | 0;\n        lo = (lo + rword) | 0;\n        rword = lo & 0x3ffffff;\n        ncarry = (ncarry + (lo >>> 26)) | 0;\n\n        hncarry += ncarry >>> 26;\n        ncarry &= 0x3ffffff;\n      }\n      out.words[k] = rword;\n      carry = ncarry;\n      ncarry = hncarry;\n    }\n    if (carry !== 0) {\n      out.words[k] = carry;\n    } else {\n      out.length--;\n    }\n\n    return out.strip();\n  }\n\n  function jumboMulTo (self, num, out) {\n    var fftm = new FFTM();\n    return fftm.mulp(self, num, out);\n  }\n\n  BN.prototype.mulTo = function mulTo (num, out) {\n    var res;\n    var len = this.length + num.length;\n    if (this.length === 10 && num.length === 10) {\n      res = comb10MulTo(this, num, out);\n    } else if (len < 63) {\n      res = smallMulTo(this, num, out);\n    } else if (len < 1024) {\n      res = bigMulTo(this, num, out);\n    } else {\n      res = jumboMulTo(this, num, out);\n    }\n\n    return res;\n  };\n\n  // Cooley-Tukey algorithm for FFT\n  // slightly revisited to rely on looping instead of recursion\n\n  function FFTM (x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  FFTM.prototype.makeRBT = function makeRBT (N) {\n    var t = new Array(N);\n    var l = BN.prototype._countBits(N) - 1;\n    for (var i = 0; i < N; i++) {\n      t[i] = this.revBin(i, l, N);\n    }\n\n    return t;\n  };\n\n  // Returns binary-reversed representation of `x`\n  FFTM.prototype.revBin = function revBin (x, l, N) {\n    if (x === 0 || x === N - 1) return x;\n\n    var rb = 0;\n    for (var i = 0; i < l; i++) {\n      rb |= (x & 1) << (l - i - 1);\n      x >>= 1;\n    }\n\n    return rb;\n  };\n\n  // Performs \"tweedling\" phase, therefore 'emulating'\n  // behaviour of the recursive algorithm\n  FFTM.prototype.permute = function permute (rbt, rws, iws, rtws, itws, N) {\n    for (var i = 0; i < N; i++) {\n      rtws[i] = rws[rbt[i]];\n      itws[i] = iws[rbt[i]];\n    }\n  };\n\n  FFTM.prototype.transform = function transform (rws, iws, rtws, itws, N, rbt) {\n    this.permute(rbt, rws, iws, rtws, itws, N);\n\n    for (var s = 1; s < N; s <<= 1) {\n      var l = s << 1;\n\n      var rtwdf = Math.cos(2 * Math.PI / l);\n      var itwdf = Math.sin(2 * Math.PI / l);\n\n      for (var p = 0; p < N; p += l) {\n        var rtwdf_ = rtwdf;\n        var itwdf_ = itwdf;\n\n        for (var j = 0; j < s; j++) {\n          var re = rtws[p + j];\n          var ie = itws[p + j];\n\n          var ro = rtws[p + j + s];\n          var io = itws[p + j + s];\n\n          var rx = rtwdf_ * ro - itwdf_ * io;\n\n          io = rtwdf_ * io + itwdf_ * ro;\n          ro = rx;\n\n          rtws[p + j] = re + ro;\n          itws[p + j] = ie + io;\n\n          rtws[p + j + s] = re - ro;\n          itws[p + j + s] = ie - io;\n\n          /* jshint maxdepth : false */\n          if (j !== l) {\n            rx = rtwdf * rtwdf_ - itwdf * itwdf_;\n\n            itwdf_ = rtwdf * itwdf_ + itwdf * rtwdf_;\n            rtwdf_ = rx;\n          }\n        }\n      }\n    }\n  };\n\n  FFTM.prototype.guessLen13b = function guessLen13b (n, m) {\n    var N = Math.max(m, n) | 1;\n    var odd = N & 1;\n    var i = 0;\n    for (N = N / 2 | 0; N; N = N >>> 1) {\n      i++;\n    }\n\n    return 1 << i + 1 + odd;\n  };\n\n  FFTM.prototype.conjugate = function conjugate (rws, iws, N) {\n    if (N <= 1) return;\n\n    for (var i = 0; i < N / 2; i++) {\n      var t = rws[i];\n\n      rws[i] = rws[N - i - 1];\n      rws[N - i - 1] = t;\n\n      t = iws[i];\n\n      iws[i] = -iws[N - i - 1];\n      iws[N - i - 1] = -t;\n    }\n  };\n\n  FFTM.prototype.normalize13b = function normalize13b (ws, N) {\n    var carry = 0;\n    for (var i = 0; i < N / 2; i++) {\n      var w = Math.round(ws[2 * i + 1] / N) * 0x2000 +\n        Math.round(ws[2 * i] / N) +\n        carry;\n\n      ws[i] = w & 0x3ffffff;\n\n      if (w < 0x4000000) {\n        carry = 0;\n      } else {\n        carry = w / 0x4000000 | 0;\n      }\n    }\n\n    return ws;\n  };\n\n  FFTM.prototype.convert13b = function convert13b (ws, len, rws, N) {\n    var carry = 0;\n    for (var i = 0; i < len; i++) {\n      carry = carry + (ws[i] | 0);\n\n      rws[2 * i] = carry & 0x1fff; carry = carry >>> 13;\n      rws[2 * i + 1] = carry & 0x1fff; carry = carry >>> 13;\n    }\n\n    // Pad with zeroes\n    for (i = 2 * len; i < N; ++i) {\n      rws[i] = 0;\n    }\n\n    assert(carry === 0);\n    assert((carry & ~0x1fff) === 0);\n  };\n\n  FFTM.prototype.stub = function stub (N) {\n    var ph = new Array(N);\n    for (var i = 0; i < N; i++) {\n      ph[i] = 0;\n    }\n\n    return ph;\n  };\n\n  FFTM.prototype.mulp = function mulp (x, y, out) {\n    var N = 2 * this.guessLen13b(x.length, y.length);\n\n    var rbt = this.makeRBT(N);\n\n    var _ = this.stub(N);\n\n    var rws = new Array(N);\n    var rwst = new Array(N);\n    var iwst = new Array(N);\n\n    var nrws = new Array(N);\n    var nrwst = new Array(N);\n    var niwst = new Array(N);\n\n    var rmws = out.words;\n    rmws.length = N;\n\n    this.convert13b(x.words, x.length, rws, N);\n    this.convert13b(y.words, y.length, nrws, N);\n\n    this.transform(rws, _, rwst, iwst, N, rbt);\n    this.transform(nrws, _, nrwst, niwst, N, rbt);\n\n    for (var i = 0; i < N; i++) {\n      var rx = rwst[i] * nrwst[i] - iwst[i] * niwst[i];\n      iwst[i] = rwst[i] * niwst[i] + iwst[i] * nrwst[i];\n      rwst[i] = rx;\n    }\n\n    this.conjugate(rwst, iwst, N);\n    this.transform(rwst, iwst, rmws, _, N, rbt);\n    this.conjugate(rmws, _, N);\n    this.normalize13b(rmws, N);\n\n    out.negative = x.negative ^ y.negative;\n    out.length = x.length + y.length;\n    return out.strip();\n  };\n\n  // Multiply `this` by `num`\n  BN.prototype.mul = function mul (num) {\n    var out = new BN(null);\n    out.words = new Array(this.length + num.length);\n    return this.mulTo(num, out);\n  };\n\n  // Multiply employing FFT\n  BN.prototype.mulf = function mulf (num) {\n    var out = new BN(null);\n    out.words = new Array(this.length + num.length);\n    return jumboMulTo(this, num, out);\n  };\n\n  // In-place Multiplication\n  BN.prototype.imul = function imul (num) {\n    return this.clone().mulTo(num, this);\n  };\n\n  BN.prototype.imuln = function imuln (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n\n    // Carry\n    var carry = 0;\n    for (var i = 0; i < this.length; i++) {\n      var w = (this.words[i] | 0) * num;\n      var lo = (w & 0x3ffffff) + (carry & 0x3ffffff);\n      carry >>= 26;\n      carry += (w / 0x4000000) | 0;\n      // NOTE: lo is 27bit maximum\n      carry += lo >>> 26;\n      this.words[i] = lo & 0x3ffffff;\n    }\n\n    if (carry !== 0) {\n      this.words[i] = carry;\n      this.length++;\n    }\n\n    return this;\n  };\n\n  BN.prototype.muln = function muln (num) {\n    return this.clone().imuln(num);\n  };\n\n  // `this` * `this`\n  BN.prototype.sqr = function sqr () {\n    return this.mul(this);\n  };\n\n  // `this` * `this` in-place\n  BN.prototype.isqr = function isqr () {\n    return this.imul(this.clone());\n  };\n\n  // Math.pow(`this`, `num`)\n  BN.prototype.pow = function pow (num) {\n    var w = toBitArray(num);\n    if (w.length === 0) return new BN(1);\n\n    // Skip leading zeroes\n    var res = this;\n    for (var i = 0; i < w.length; i++, res = res.sqr()) {\n      if (w[i] !== 0) break;\n    }\n\n    if (++i < w.length) {\n      for (var q = res.sqr(); i < w.length; i++, q = q.sqr()) {\n        if (w[i] === 0) continue;\n\n        res = res.mul(q);\n      }\n    }\n\n    return res;\n  };\n\n  // Shift-left in-place\n  BN.prototype.iushln = function iushln (bits) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var r = bits % 26;\n    var s = (bits - r) / 26;\n    var carryMask = (0x3ffffff >>> (26 - r)) << (26 - r);\n    var i;\n\n    if (r !== 0) {\n      var carry = 0;\n\n      for (i = 0; i < this.length; i++) {\n        var newCarry = this.words[i] & carryMask;\n        var c = ((this.words[i] | 0) - newCarry) << r;\n        this.words[i] = c | carry;\n        carry = newCarry >>> (26 - r);\n      }\n\n      if (carry) {\n        this.words[i] = carry;\n        this.length++;\n      }\n    }\n\n    if (s !== 0) {\n      for (i = this.length - 1; i >= 0; i--) {\n        this.words[i + s] = this.words[i];\n      }\n\n      for (i = 0; i < s; i++) {\n        this.words[i] = 0;\n      }\n\n      this.length += s;\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.ishln = function ishln (bits) {\n    // TODO(indutny): implement me\n    assert(this.negative === 0);\n    return this.iushln(bits);\n  };\n\n  // Shift-right in-place\n  // NOTE: `hint` is a lowest bit before trailing zeroes\n  // NOTE: if `extended` is present - it will be filled with destroyed bits\n  BN.prototype.iushrn = function iushrn (bits, hint, extended) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var h;\n    if (hint) {\n      h = (hint - (hint % 26)) / 26;\n    } else {\n      h = 0;\n    }\n\n    var r = bits % 26;\n    var s = Math.min((bits - r) / 26, this.length);\n    var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\n    var maskedWords = extended;\n\n    h -= s;\n    h = Math.max(0, h);\n\n    // Extended mode, copy masked part\n    if (maskedWords) {\n      for (var i = 0; i < s; i++) {\n        maskedWords.words[i] = this.words[i];\n      }\n      maskedWords.length = s;\n    }\n\n    if (s === 0) {\n      // No-op, we should not move anything at all\n    } else if (this.length > s) {\n      this.length -= s;\n      for (i = 0; i < this.length; i++) {\n        this.words[i] = this.words[i + s];\n      }\n    } else {\n      this.words[0] = 0;\n      this.length = 1;\n    }\n\n    var carry = 0;\n    for (i = this.length - 1; i >= 0 && (carry !== 0 || i >= h); i--) {\n      var word = this.words[i] | 0;\n      this.words[i] = (carry << (26 - r)) | (word >>> r);\n      carry = word & mask;\n    }\n\n    // Push carried bits as a mask\n    if (maskedWords && carry !== 0) {\n      maskedWords.words[maskedWords.length++] = carry;\n    }\n\n    if (this.length === 0) {\n      this.words[0] = 0;\n      this.length = 1;\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.ishrn = function ishrn (bits, hint, extended) {\n    // TODO(indutny): implement me\n    assert(this.negative === 0);\n    return this.iushrn(bits, hint, extended);\n  };\n\n  // Shift-left\n  BN.prototype.shln = function shln (bits) {\n    return this.clone().ishln(bits);\n  };\n\n  BN.prototype.ushln = function ushln (bits) {\n    return this.clone().iushln(bits);\n  };\n\n  // Shift-right\n  BN.prototype.shrn = function shrn (bits) {\n    return this.clone().ishrn(bits);\n  };\n\n  BN.prototype.ushrn = function ushrn (bits) {\n    return this.clone().iushrn(bits);\n  };\n\n  // Test if n bit is set\n  BN.prototype.testn = function testn (bit) {\n    assert(typeof bit === 'number' && bit >= 0);\n    var r = bit % 26;\n    var s = (bit - r) / 26;\n    var q = 1 << r;\n\n    // Fast case: bit is much higher than all existing words\n    if (this.length <= s) return false;\n\n    // Check bit and return\n    var w = this.words[s];\n\n    return !!(w & q);\n  };\n\n  // Return only lowers bits of number (in-place)\n  BN.prototype.imaskn = function imaskn (bits) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var r = bits % 26;\n    var s = (bits - r) / 26;\n\n    assert(this.negative === 0, 'imaskn works only with positive numbers');\n\n    if (this.length <= s) {\n      return this;\n    }\n\n    if (r !== 0) {\n      s++;\n    }\n    this.length = Math.min(s, this.length);\n\n    if (r !== 0) {\n      var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\n      this.words[this.length - 1] &= mask;\n    }\n\n    return this.strip();\n  };\n\n  // Return only lowers bits of number\n  BN.prototype.maskn = function maskn (bits) {\n    return this.clone().imaskn(bits);\n  };\n\n  // Add plain number `num` to `this`\n  BN.prototype.iaddn = function iaddn (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n    if (num < 0) return this.isubn(-num);\n\n    // Possible sign change\n    if (this.negative !== 0) {\n      if (this.length === 1 && (this.words[0] | 0) < num) {\n        this.words[0] = num - (this.words[0] | 0);\n        this.negative = 0;\n        return this;\n      }\n\n      this.negative = 0;\n      this.isubn(num);\n      this.negative = 1;\n      return this;\n    }\n\n    // Add without checks\n    return this._iaddn(num);\n  };\n\n  BN.prototype._iaddn = function _iaddn (num) {\n    this.words[0] += num;\n\n    // Carry\n    for (var i = 0; i < this.length && this.words[i] >= 0x4000000; i++) {\n      this.words[i] -= 0x4000000;\n      if (i === this.length - 1) {\n        this.words[i + 1] = 1;\n      } else {\n        this.words[i + 1]++;\n      }\n    }\n    this.length = Math.max(this.length, i + 1);\n\n    return this;\n  };\n\n  // Subtract plain number `num` from `this`\n  BN.prototype.isubn = function isubn (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n    if (num < 0) return this.iaddn(-num);\n\n    if (this.negative !== 0) {\n      this.negative = 0;\n      this.iaddn(num);\n      this.negative = 1;\n      return this;\n    }\n\n    this.words[0] -= num;\n\n    if (this.length === 1 && this.words[0] < 0) {\n      this.words[0] = -this.words[0];\n      this.negative = 1;\n    } else {\n      // Carry\n      for (var i = 0; i < this.length && this.words[i] < 0; i++) {\n        this.words[i] += 0x4000000;\n        this.words[i + 1] -= 1;\n      }\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.addn = function addn (num) {\n    return this.clone().iaddn(num);\n  };\n\n  BN.prototype.subn = function subn (num) {\n    return this.clone().isubn(num);\n  };\n\n  BN.prototype.iabs = function iabs () {\n    this.negative = 0;\n\n    return this;\n  };\n\n  BN.prototype.abs = function abs () {\n    return this.clone().iabs();\n  };\n\n  BN.prototype._ishlnsubmul = function _ishlnsubmul (num, mul, shift) {\n    var len = num.length + shift;\n    var i;\n\n    this._expand(len);\n\n    var w;\n    var carry = 0;\n    for (i = 0; i < num.length; i++) {\n      w = (this.words[i + shift] | 0) + carry;\n      var right = (num.words[i] | 0) * mul;\n      w -= right & 0x3ffffff;\n      carry = (w >> 26) - ((right / 0x4000000) | 0);\n      this.words[i + shift] = w & 0x3ffffff;\n    }\n    for (; i < this.length - shift; i++) {\n      w = (this.words[i + shift] | 0) + carry;\n      carry = w >> 26;\n      this.words[i + shift] = w & 0x3ffffff;\n    }\n\n    if (carry === 0) return this.strip();\n\n    // Subtraction overflow\n    assert(carry === -1);\n    carry = 0;\n    for (i = 0; i < this.length; i++) {\n      w = -(this.words[i] | 0) + carry;\n      carry = w >> 26;\n      this.words[i] = w & 0x3ffffff;\n    }\n    this.negative = 1;\n\n    return this.strip();\n  };\n\n  BN.prototype._wordDiv = function _wordDiv (num, mode) {\n    var shift = this.length - num.length;\n\n    var a = this.clone();\n    var b = num;\n\n    // Normalize\n    var bhi = b.words[b.length - 1] | 0;\n    var bhiBits = this._countBits(bhi);\n    shift = 26 - bhiBits;\n    if (shift !== 0) {\n      b = b.ushln(shift);\n      a.iushln(shift);\n      bhi = b.words[b.length - 1] | 0;\n    }\n\n    // Initialize quotient\n    var m = a.length - b.length;\n    var q;\n\n    if (mode !== 'mod') {\n      q = new BN(null);\n      q.length = m + 1;\n      q.words = new Array(q.length);\n      for (var i = 0; i < q.length; i++) {\n        q.words[i] = 0;\n      }\n    }\n\n    var diff = a.clone()._ishlnsubmul(b, 1, m);\n    if (diff.negative === 0) {\n      a = diff;\n      if (q) {\n        q.words[m] = 1;\n      }\n    }\n\n    for (var j = m - 1; j >= 0; j--) {\n      var qj = (a.words[b.length + j] | 0) * 0x4000000 +\n        (a.words[b.length + j - 1] | 0);\n\n      // NOTE: (qj / bhi) is (0x3ffffff * 0x4000000 + 0x3ffffff) / 0x2000000 max\n      // (0x7ffffff)\n      qj = Math.min((qj / bhi) | 0, 0x3ffffff);\n\n      a._ishlnsubmul(b, qj, j);\n      while (a.negative !== 0) {\n        qj--;\n        a.negative = 0;\n        a._ishlnsubmul(b, 1, j);\n        if (!a.isZero()) {\n          a.negative ^= 1;\n        }\n      }\n      if (q) {\n        q.words[j] = qj;\n      }\n    }\n    if (q) {\n      q.strip();\n    }\n    a.strip();\n\n    // Denormalize\n    if (mode !== 'div' && shift !== 0) {\n      a.iushrn(shift);\n    }\n\n    return {\n      div: q || null,\n      mod: a\n    };\n  };\n\n  // NOTE: 1) `mode` can be set to `mod` to request mod only,\n  //       to `div` to request div only, or be absent to\n  //       request both div & mod\n  //       2) `positive` is true if unsigned mod is requested\n  BN.prototype.divmod = function divmod (num, mode, positive) {\n    assert(!num.isZero());\n\n    if (this.isZero()) {\n      return {\n        div: new BN(0),\n        mod: new BN(0)\n      };\n    }\n\n    var div, mod, res;\n    if (this.negative !== 0 && num.negative === 0) {\n      res = this.neg().divmod(num, mode);\n\n      if (mode !== 'mod') {\n        div = res.div.neg();\n      }\n\n      if (mode !== 'div') {\n        mod = res.mod.neg();\n        if (positive && mod.negative !== 0) {\n          mod.iadd(num);\n        }\n      }\n\n      return {\n        div: div,\n        mod: mod\n      };\n    }\n\n    if (this.negative === 0 && num.negative !== 0) {\n      res = this.divmod(num.neg(), mode);\n\n      if (mode !== 'mod') {\n        div = res.div.neg();\n      }\n\n      return {\n        div: div,\n        mod: res.mod\n      };\n    }\n\n    if ((this.negative & num.negative) !== 0) {\n      res = this.neg().divmod(num.neg(), mode);\n\n      if (mode !== 'div') {\n        mod = res.mod.neg();\n        if (positive && mod.negative !== 0) {\n          mod.isub(num);\n        }\n      }\n\n      return {\n        div: res.div,\n        mod: mod\n      };\n    }\n\n    // Both numbers are positive at this point\n\n    // Strip both numbers to approximate shift value\n    if (num.length > this.length || this.cmp(num) < 0) {\n      return {\n        div: new BN(0),\n        mod: this\n      };\n    }\n\n    // Very short reduction\n    if (num.length === 1) {\n      if (mode === 'div') {\n        return {\n          div: this.divn(num.words[0]),\n          mod: null\n        };\n      }\n\n      if (mode === 'mod') {\n        return {\n          div: null,\n          mod: new BN(this.modn(num.words[0]))\n        };\n      }\n\n      return {\n        div: this.divn(num.words[0]),\n        mod: new BN(this.modn(num.words[0]))\n      };\n    }\n\n    return this._wordDiv(num, mode);\n  };\n\n  // Find `this` / `num`\n  BN.prototype.div = function div (num) {\n    return this.divmod(num, 'div', false).div;\n  };\n\n  // Find `this` % `num`\n  BN.prototype.mod = function mod (num) {\n    return this.divmod(num, 'mod', false).mod;\n  };\n\n  BN.prototype.umod = function umod (num) {\n    return this.divmod(num, 'mod', true).mod;\n  };\n\n  // Find Round(`this` / `num`)\n  BN.prototype.divRound = function divRound (num) {\n    var dm = this.divmod(num);\n\n    // Fast case - exact division\n    if (dm.mod.isZero()) return dm.div;\n\n    var mod = dm.div.negative !== 0 ? dm.mod.isub(num) : dm.mod;\n\n    var half = num.ushrn(1);\n    var r2 = num.andln(1);\n    var cmp = mod.cmp(half);\n\n    // Round down\n    if (cmp < 0 || r2 === 1 && cmp === 0) return dm.div;\n\n    // Round up\n    return dm.div.negative !== 0 ? dm.div.isubn(1) : dm.div.iaddn(1);\n  };\n\n  BN.prototype.modn = function modn (num) {\n    assert(num <= 0x3ffffff);\n    var p = (1 << 26) % num;\n\n    var acc = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      acc = (p * acc + (this.words[i] | 0)) % num;\n    }\n\n    return acc;\n  };\n\n  // In-place division by number\n  BN.prototype.idivn = function idivn (num) {\n    assert(num <= 0x3ffffff);\n\n    var carry = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      var w = (this.words[i] | 0) + carry * 0x4000000;\n      this.words[i] = (w / num) | 0;\n      carry = w % num;\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.divn = function divn (num) {\n    return this.clone().idivn(num);\n  };\n\n  BN.prototype.egcd = function egcd (p) {\n    assert(p.negative === 0);\n    assert(!p.isZero());\n\n    var x = this;\n    var y = p.clone();\n\n    if (x.negative !== 0) {\n      x = x.umod(p);\n    } else {\n      x = x.clone();\n    }\n\n    // A * x + B * y = x\n    var A = new BN(1);\n    var B = new BN(0);\n\n    // C * x + D * y = y\n    var C = new BN(0);\n    var D = new BN(1);\n\n    var g = 0;\n\n    while (x.isEven() && y.isEven()) {\n      x.iushrn(1);\n      y.iushrn(1);\n      ++g;\n    }\n\n    var yp = y.clone();\n    var xp = x.clone();\n\n    while (!x.isZero()) {\n      for (var i = 0, im = 1; (x.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\n      if (i > 0) {\n        x.iushrn(i);\n        while (i-- > 0) {\n          if (A.isOdd() || B.isOdd()) {\n            A.iadd(yp);\n            B.isub(xp);\n          }\n\n          A.iushrn(1);\n          B.iushrn(1);\n        }\n      }\n\n      for (var j = 0, jm = 1; (y.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\n      if (j > 0) {\n        y.iushrn(j);\n        while (j-- > 0) {\n          if (C.isOdd() || D.isOdd()) {\n            C.iadd(yp);\n            D.isub(xp);\n          }\n\n          C.iushrn(1);\n          D.iushrn(1);\n        }\n      }\n\n      if (x.cmp(y) >= 0) {\n        x.isub(y);\n        A.isub(C);\n        B.isub(D);\n      } else {\n        y.isub(x);\n        C.isub(A);\n        D.isub(B);\n      }\n    }\n\n    return {\n      a: C,\n      b: D,\n      gcd: y.iushln(g)\n    };\n  };\n\n  // This is reduced incarnation of the binary EEA\n  // above, designated to invert members of the\n  // _prime_ fields F(p) at a maximal speed\n  BN.prototype._invmp = function _invmp (p) {\n    assert(p.negative === 0);\n    assert(!p.isZero());\n\n    var a = this;\n    var b = p.clone();\n\n    if (a.negative !== 0) {\n      a = a.umod(p);\n    } else {\n      a = a.clone();\n    }\n\n    var x1 = new BN(1);\n    var x2 = new BN(0);\n\n    var delta = b.clone();\n\n    while (a.cmpn(1) > 0 && b.cmpn(1) > 0) {\n      for (var i = 0, im = 1; (a.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\n      if (i > 0) {\n        a.iushrn(i);\n        while (i-- > 0) {\n          if (x1.isOdd()) {\n            x1.iadd(delta);\n          }\n\n          x1.iushrn(1);\n        }\n      }\n\n      for (var j = 0, jm = 1; (b.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\n      if (j > 0) {\n        b.iushrn(j);\n        while (j-- > 0) {\n          if (x2.isOdd()) {\n            x2.iadd(delta);\n          }\n\n          x2.iushrn(1);\n        }\n      }\n\n      if (a.cmp(b) >= 0) {\n        a.isub(b);\n        x1.isub(x2);\n      } else {\n        b.isub(a);\n        x2.isub(x1);\n      }\n    }\n\n    var res;\n    if (a.cmpn(1) === 0) {\n      res = x1;\n    } else {\n      res = x2;\n    }\n\n    if (res.cmpn(0) < 0) {\n      res.iadd(p);\n    }\n\n    return res;\n  };\n\n  BN.prototype.gcd = function gcd (num) {\n    if (this.isZero()) return num.abs();\n    if (num.isZero()) return this.abs();\n\n    var a = this.clone();\n    var b = num.clone();\n    a.negative = 0;\n    b.negative = 0;\n\n    // Remove common factor of two\n    for (var shift = 0; a.isEven() && b.isEven(); shift++) {\n      a.iushrn(1);\n      b.iushrn(1);\n    }\n\n    do {\n      while (a.isEven()) {\n        a.iushrn(1);\n      }\n      while (b.isEven()) {\n        b.iushrn(1);\n      }\n\n      var r = a.cmp(b);\n      if (r < 0) {\n        // Swap `a` and `b` to make `a` always bigger than `b`\n        var t = a;\n        a = b;\n        b = t;\n      } else if (r === 0 || b.cmpn(1) === 0) {\n        break;\n      }\n\n      a.isub(b);\n    } while (true);\n\n    return b.iushln(shift);\n  };\n\n  // Invert number in the field F(num)\n  BN.prototype.invm = function invm (num) {\n    return this.egcd(num).a.umod(num);\n  };\n\n  BN.prototype.isEven = function isEven () {\n    return (this.words[0] & 1) === 0;\n  };\n\n  BN.prototype.isOdd = function isOdd () {\n    return (this.words[0] & 1) === 1;\n  };\n\n  // And first word and num\n  BN.prototype.andln = function andln (num) {\n    return this.words[0] & num;\n  };\n\n  // Increment at the bit position in-line\n  BN.prototype.bincn = function bincn (bit) {\n    assert(typeof bit === 'number');\n    var r = bit % 26;\n    var s = (bit - r) / 26;\n    var q = 1 << r;\n\n    // Fast case: bit is much higher than all existing words\n    if (this.length <= s) {\n      this._expand(s + 1);\n      this.words[s] |= q;\n      return this;\n    }\n\n    // Add bit and propagate, if needed\n    var carry = q;\n    for (var i = s; carry !== 0 && i < this.length; i++) {\n      var w = this.words[i] | 0;\n      w += carry;\n      carry = w >>> 26;\n      w &= 0x3ffffff;\n      this.words[i] = w;\n    }\n    if (carry !== 0) {\n      this.words[i] = carry;\n      this.length++;\n    }\n    return this;\n  };\n\n  BN.prototype.isZero = function isZero () {\n    return this.length === 1 && this.words[0] === 0;\n  };\n\n  BN.prototype.cmpn = function cmpn (num) {\n    var negative = num < 0;\n\n    if (this.negative !== 0 && !negative) return -1;\n    if (this.negative === 0 && negative) return 1;\n\n    this.strip();\n\n    var res;\n    if (this.length > 1) {\n      res = 1;\n    } else {\n      if (negative) {\n        num = -num;\n      }\n\n      assert(num <= 0x3ffffff, 'Number is too big');\n\n      var w = this.words[0] | 0;\n      res = w === num ? 0 : w < num ? -1 : 1;\n    }\n    if (this.negative !== 0) return -res | 0;\n    return res;\n  };\n\n  // Compare two numbers and return:\n  // 1 - if `this` > `num`\n  // 0 - if `this` == `num`\n  // -1 - if `this` < `num`\n  BN.prototype.cmp = function cmp (num) {\n    if (this.negative !== 0 && num.negative === 0) return -1;\n    if (this.negative === 0 && num.negative !== 0) return 1;\n\n    var res = this.ucmp(num);\n    if (this.negative !== 0) return -res | 0;\n    return res;\n  };\n\n  // Unsigned comparison\n  BN.prototype.ucmp = function ucmp (num) {\n    // At this point both numbers have the same sign\n    if (this.length > num.length) return 1;\n    if (this.length < num.length) return -1;\n\n    var res = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      var a = this.words[i] | 0;\n      var b = num.words[i] | 0;\n\n      if (a === b) continue;\n      if (a < b) {\n        res = -1;\n      } else if (a > b) {\n        res = 1;\n      }\n      break;\n    }\n    return res;\n  };\n\n  BN.prototype.gtn = function gtn (num) {\n    return this.cmpn(num) === 1;\n  };\n\n  BN.prototype.gt = function gt (num) {\n    return this.cmp(num) === 1;\n  };\n\n  BN.prototype.gten = function gten (num) {\n    return this.cmpn(num) >= 0;\n  };\n\n  BN.prototype.gte = function gte (num) {\n    return this.cmp(num) >= 0;\n  };\n\n  BN.prototype.ltn = function ltn (num) {\n    return this.cmpn(num) === -1;\n  };\n\n  BN.prototype.lt = function lt (num) {\n    return this.cmp(num) === -1;\n  };\n\n  BN.prototype.lten = function lten (num) {\n    return this.cmpn(num) <= 0;\n  };\n\n  BN.prototype.lte = function lte (num) {\n    return this.cmp(num) <= 0;\n  };\n\n  BN.prototype.eqn = function eqn (num) {\n    return this.cmpn(num) === 0;\n  };\n\n  BN.prototype.eq = function eq (num) {\n    return this.cmp(num) === 0;\n  };\n\n  //\n  // A reduce context, could be using montgomery or something better, depending\n  // on the `m` itself.\n  //\n  BN.red = function red (num) {\n    return new Red(num);\n  };\n\n  BN.prototype.toRed = function toRed (ctx) {\n    assert(!this.red, 'Already a number in reduction context');\n    assert(this.negative === 0, 'red works only with positives');\n    return ctx.convertTo(this)._forceRed(ctx);\n  };\n\n  BN.prototype.fromRed = function fromRed () {\n    assert(this.red, 'fromRed works only with numbers in reduction context');\n    return this.red.convertFrom(this);\n  };\n\n  BN.prototype._forceRed = function _forceRed (ctx) {\n    this.red = ctx;\n    return this;\n  };\n\n  BN.prototype.forceRed = function forceRed (ctx) {\n    assert(!this.red, 'Already a number in reduction context');\n    return this._forceRed(ctx);\n  };\n\n  BN.prototype.redAdd = function redAdd (num) {\n    assert(this.red, 'redAdd works only with red numbers');\n    return this.red.add(this, num);\n  };\n\n  BN.prototype.redIAdd = function redIAdd (num) {\n    assert(this.red, 'redIAdd works only with red numbers');\n    return this.red.iadd(this, num);\n  };\n\n  BN.prototype.redSub = function redSub (num) {\n    assert(this.red, 'redSub works only with red numbers');\n    return this.red.sub(this, num);\n  };\n\n  BN.prototype.redISub = function redISub (num) {\n    assert(this.red, 'redISub works only with red numbers');\n    return this.red.isub(this, num);\n  };\n\n  BN.prototype.redShl = function redShl (num) {\n    assert(this.red, 'redShl works only with red numbers');\n    return this.red.shl(this, num);\n  };\n\n  BN.prototype.redMul = function redMul (num) {\n    assert(this.red, 'redMul works only with red numbers');\n    this.red._verify2(this, num);\n    return this.red.mul(this, num);\n  };\n\n  BN.prototype.redIMul = function redIMul (num) {\n    assert(this.red, 'redMul works only with red numbers');\n    this.red._verify2(this, num);\n    return this.red.imul(this, num);\n  };\n\n  BN.prototype.redSqr = function redSqr () {\n    assert(this.red, 'redSqr works only with red numbers');\n    this.red._verify1(this);\n    return this.red.sqr(this);\n  };\n\n  BN.prototype.redISqr = function redISqr () {\n    assert(this.red, 'redISqr works only with red numbers');\n    this.red._verify1(this);\n    return this.red.isqr(this);\n  };\n\n  // Square root over p\n  BN.prototype.redSqrt = function redSqrt () {\n    assert(this.red, 'redSqrt works only with red numbers');\n    this.red._verify1(this);\n    return this.red.sqrt(this);\n  };\n\n  BN.prototype.redInvm = function redInvm () {\n    assert(this.red, 'redInvm works only with red numbers');\n    this.red._verify1(this);\n    return this.red.invm(this);\n  };\n\n  // Return negative clone of `this` % `red modulo`\n  BN.prototype.redNeg = function redNeg () {\n    assert(this.red, 'redNeg works only with red numbers');\n    this.red._verify1(this);\n    return this.red.neg(this);\n  };\n\n  BN.prototype.redPow = function redPow (num) {\n    assert(this.red && !num.red, 'redPow(normalNum)');\n    this.red._verify1(this);\n    return this.red.pow(this, num);\n  };\n\n  // Prime numbers with efficient reduction\n  var primes = {\n    k256: null,\n    p224: null,\n    p192: null,\n    p25519: null\n  };\n\n  // Pseudo-Mersenne prime\n  function MPrime (name, p) {\n    // P = 2 ^ N - K\n    this.name = name;\n    this.p = new BN(p, 16);\n    this.n = this.p.bitLength();\n    this.k = new BN(1).iushln(this.n).isub(this.p);\n\n    this.tmp = this._tmp();\n  }\n\n  MPrime.prototype._tmp = function _tmp () {\n    var tmp = new BN(null);\n    tmp.words = new Array(Math.ceil(this.n / 13));\n    return tmp;\n  };\n\n  MPrime.prototype.ireduce = function ireduce (num) {\n    // Assumes that `num` is less than `P^2`\n    // num = HI * (2 ^ N - K) + HI * K + LO = HI * K + LO (mod P)\n    var r = num;\n    var rlen;\n\n    do {\n      this.split(r, this.tmp);\n      r = this.imulK(r);\n      r = r.iadd(this.tmp);\n      rlen = r.bitLength();\n    } while (rlen > this.n);\n\n    var cmp = rlen < this.n ? -1 : r.ucmp(this.p);\n    if (cmp === 0) {\n      r.words[0] = 0;\n      r.length = 1;\n    } else if (cmp > 0) {\n      r.isub(this.p);\n    } else {\n      if (r.strip !== undefined) {\n        // r is BN v4 instance\n        r.strip();\n      } else {\n        // r is BN v5 instance\n        r._strip();\n      }\n    }\n\n    return r;\n  };\n\n  MPrime.prototype.split = function split (input, out) {\n    input.iushrn(this.n, 0, out);\n  };\n\n  MPrime.prototype.imulK = function imulK (num) {\n    return num.imul(this.k);\n  };\n\n  function K256 () {\n    MPrime.call(\n      this,\n      'k256',\n      'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f');\n  }\n  inherits(K256, MPrime);\n\n  K256.prototype.split = function split (input, output) {\n    // 256 = 9 * 26 + 22\n    var mask = 0x3fffff;\n\n    var outLen = Math.min(input.length, 9);\n    for (var i = 0; i < outLen; i++) {\n      output.words[i] = input.words[i];\n    }\n    output.length = outLen;\n\n    if (input.length <= 9) {\n      input.words[0] = 0;\n      input.length = 1;\n      return;\n    }\n\n    // Shift by 9 limbs\n    var prev = input.words[9];\n    output.words[output.length++] = prev & mask;\n\n    for (i = 10; i < input.length; i++) {\n      var next = input.words[i] | 0;\n      input.words[i - 10] = ((next & mask) << 4) | (prev >>> 22);\n      prev = next;\n    }\n    prev >>>= 22;\n    input.words[i - 10] = prev;\n    if (prev === 0 && input.length > 10) {\n      input.length -= 10;\n    } else {\n      input.length -= 9;\n    }\n  };\n\n  K256.prototype.imulK = function imulK (num) {\n    // K = 0x1000003d1 = [ 0x40, 0x3d1 ]\n    num.words[num.length] = 0;\n    num.words[num.length + 1] = 0;\n    num.length += 2;\n\n    // bounded at: 0x40 * 0x3ffffff + 0x3d0 = 0x100000390\n    var lo = 0;\n    for (var i = 0; i < num.length; i++) {\n      var w = num.words[i] | 0;\n      lo += w * 0x3d1;\n      num.words[i] = lo & 0x3ffffff;\n      lo = w * 0x40 + ((lo / 0x4000000) | 0);\n    }\n\n    // Fast length reduction\n    if (num.words[num.length - 1] === 0) {\n      num.length--;\n      if (num.words[num.length - 1] === 0) {\n        num.length--;\n      }\n    }\n    return num;\n  };\n\n  function P224 () {\n    MPrime.call(\n      this,\n      'p224',\n      'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001');\n  }\n  inherits(P224, MPrime);\n\n  function P192 () {\n    MPrime.call(\n      this,\n      'p192',\n      'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff');\n  }\n  inherits(P192, MPrime);\n\n  function P25519 () {\n    // 2 ^ 255 - 19\n    MPrime.call(\n      this,\n      '25519',\n      '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed');\n  }\n  inherits(P25519, MPrime);\n\n  P25519.prototype.imulK = function imulK (num) {\n    // K = 0x13\n    var carry = 0;\n    for (var i = 0; i < num.length; i++) {\n      var hi = (num.words[i] | 0) * 0x13 + carry;\n      var lo = hi & 0x3ffffff;\n      hi >>>= 26;\n\n      num.words[i] = lo;\n      carry = hi;\n    }\n    if (carry !== 0) {\n      num.words[num.length++] = carry;\n    }\n    return num;\n  };\n\n  // Exported mostly for testing purposes, use plain name instead\n  BN._prime = function prime (name) {\n    // Cached version of prime\n    if (primes[name]) return primes[name];\n\n    var prime;\n    if (name === 'k256') {\n      prime = new K256();\n    } else if (name === 'p224') {\n      prime = new P224();\n    } else if (name === 'p192') {\n      prime = new P192();\n    } else if (name === 'p25519') {\n      prime = new P25519();\n    } else {\n      throw new Error('Unknown prime ' + name);\n    }\n    primes[name] = prime;\n\n    return prime;\n  };\n\n  //\n  // Base reduction engine\n  //\n  function Red (m) {\n    if (typeof m === 'string') {\n      var prime = BN._prime(m);\n      this.m = prime.p;\n      this.prime = prime;\n    } else {\n      assert(m.gtn(1), 'modulus must be greater than 1');\n      this.m = m;\n      this.prime = null;\n    }\n  }\n\n  Red.prototype._verify1 = function _verify1 (a) {\n    assert(a.negative === 0, 'red works only with positives');\n    assert(a.red, 'red works only with red numbers');\n  };\n\n  Red.prototype._verify2 = function _verify2 (a, b) {\n    assert((a.negative | b.negative) === 0, 'red works only with positives');\n    assert(a.red && a.red === b.red,\n      'red works only with red numbers');\n  };\n\n  Red.prototype.imod = function imod (a) {\n    if (this.prime) return this.prime.ireduce(a)._forceRed(this);\n    return a.umod(this.m)._forceRed(this);\n  };\n\n  Red.prototype.neg = function neg (a) {\n    if (a.isZero()) {\n      return a.clone();\n    }\n\n    return this.m.sub(a)._forceRed(this);\n  };\n\n  Red.prototype.add = function add (a, b) {\n    this._verify2(a, b);\n\n    var res = a.add(b);\n    if (res.cmp(this.m) >= 0) {\n      res.isub(this.m);\n    }\n    return res._forceRed(this);\n  };\n\n  Red.prototype.iadd = function iadd (a, b) {\n    this._verify2(a, b);\n\n    var res = a.iadd(b);\n    if (res.cmp(this.m) >= 0) {\n      res.isub(this.m);\n    }\n    return res;\n  };\n\n  Red.prototype.sub = function sub (a, b) {\n    this._verify2(a, b);\n\n    var res = a.sub(b);\n    if (res.cmpn(0) < 0) {\n      res.iadd(this.m);\n    }\n    return res._forceRed(this);\n  };\n\n  Red.prototype.isub = function isub (a, b) {\n    this._verify2(a, b);\n\n    var res = a.isub(b);\n    if (res.cmpn(0) < 0) {\n      res.iadd(this.m);\n    }\n    return res;\n  };\n\n  Red.prototype.shl = function shl (a, num) {\n    this._verify1(a);\n    return this.imod(a.ushln(num));\n  };\n\n  Red.prototype.imul = function imul (a, b) {\n    this._verify2(a, b);\n    return this.imod(a.imul(b));\n  };\n\n  Red.prototype.mul = function mul (a, b) {\n    this._verify2(a, b);\n    return this.imod(a.mul(b));\n  };\n\n  Red.prototype.isqr = function isqr (a) {\n    return this.imul(a, a.clone());\n  };\n\n  Red.prototype.sqr = function sqr (a) {\n    return this.mul(a, a);\n  };\n\n  Red.prototype.sqrt = function sqrt (a) {\n    if (a.isZero()) return a.clone();\n\n    var mod3 = this.m.andln(3);\n    assert(mod3 % 2 === 1);\n\n    // Fast case\n    if (mod3 === 3) {\n      var pow = this.m.add(new BN(1)).iushrn(2);\n      return this.pow(a, pow);\n    }\n\n    // Tonelli-Shanks algorithm (Totally unoptimized and slow)\n    //\n    // Find Q and S, that Q * 2 ^ S = (P - 1)\n    var q = this.m.subn(1);\n    var s = 0;\n    while (!q.isZero() && q.andln(1) === 0) {\n      s++;\n      q.iushrn(1);\n    }\n    assert(!q.isZero());\n\n    var one = new BN(1).toRed(this);\n    var nOne = one.redNeg();\n\n    // Find quadratic non-residue\n    // NOTE: Max is such because of generalized Riemann hypothesis.\n    var lpow = this.m.subn(1).iushrn(1);\n    var z = this.m.bitLength();\n    z = new BN(2 * z * z).toRed(this);\n\n    while (this.pow(z, lpow).cmp(nOne) !== 0) {\n      z.redIAdd(nOne);\n    }\n\n    var c = this.pow(z, q);\n    var r = this.pow(a, q.addn(1).iushrn(1));\n    var t = this.pow(a, q);\n    var m = s;\n    while (t.cmp(one) !== 0) {\n      var tmp = t;\n      for (var i = 0; tmp.cmp(one) !== 0; i++) {\n        tmp = tmp.redSqr();\n      }\n      assert(i < m);\n      var b = this.pow(c, new BN(1).iushln(m - i - 1));\n\n      r = r.redMul(b);\n      c = b.redSqr();\n      t = t.redMul(c);\n      m = i;\n    }\n\n    return r;\n  };\n\n  Red.prototype.invm = function invm (a) {\n    var inv = a._invmp(this.m);\n    if (inv.negative !== 0) {\n      inv.negative = 0;\n      return this.imod(inv).redNeg();\n    } else {\n      return this.imod(inv);\n    }\n  };\n\n  Red.prototype.pow = function pow (a, num) {\n    if (num.isZero()) return new BN(1).toRed(this);\n    if (num.cmpn(1) === 0) return a.clone();\n\n    var windowSize = 4;\n    var wnd = new Array(1 << windowSize);\n    wnd[0] = new BN(1).toRed(this);\n    wnd[1] = a;\n    for (var i = 2; i < wnd.length; i++) {\n      wnd[i] = this.mul(wnd[i - 1], a);\n    }\n\n    var res = wnd[0];\n    var current = 0;\n    var currentLen = 0;\n    var start = num.bitLength() % 26;\n    if (start === 0) {\n      start = 26;\n    }\n\n    for (i = num.length - 1; i >= 0; i--) {\n      var word = num.words[i];\n      for (var j = start - 1; j >= 0; j--) {\n        var bit = (word >> j) & 1;\n        if (res !== wnd[0]) {\n          res = this.sqr(res);\n        }\n\n        if (bit === 0 && current === 0) {\n          currentLen = 0;\n          continue;\n        }\n\n        current <<= 1;\n        current |= bit;\n        currentLen++;\n        if (currentLen !== windowSize && (i !== 0 || j !== 0)) continue;\n\n        res = this.mul(res, wnd[current]);\n        currentLen = 0;\n        current = 0;\n      }\n      start = 26;\n    }\n\n    return res;\n  };\n\n  Red.prototype.convertTo = function convertTo (num) {\n    var r = num.umod(this.m);\n\n    return r === num ? r.clone() : r;\n  };\n\n  Red.prototype.convertFrom = function convertFrom (num) {\n    var res = num.clone();\n    res.red = null;\n    return res;\n  };\n\n  //\n  // Montgomery method engine\n  //\n\n  BN.mont = function mont (num) {\n    return new Mont(num);\n  };\n\n  function Mont (m) {\n    Red.call(this, m);\n\n    this.shift = this.m.bitLength();\n    if (this.shift % 26 !== 0) {\n      this.shift += 26 - (this.shift % 26);\n    }\n\n    this.r = new BN(1).iushln(this.shift);\n    this.r2 = this.imod(this.r.sqr());\n    this.rinv = this.r._invmp(this.m);\n\n    this.minv = this.rinv.mul(this.r).isubn(1).div(this.m);\n    this.minv = this.minv.umod(this.r);\n    this.minv = this.r.sub(this.minv);\n  }\n  inherits(Mont, Red);\n\n  Mont.prototype.convertTo = function convertTo (num) {\n    return this.imod(num.ushln(this.shift));\n  };\n\n  Mont.prototype.convertFrom = function convertFrom (num) {\n    var r = this.imod(num.mul(this.rinv));\n    r.red = null;\n    return r;\n  };\n\n  Mont.prototype.imul = function imul (a, b) {\n    if (a.isZero() || b.isZero()) {\n      a.words[0] = 0;\n      a.length = 1;\n      return a;\n    }\n\n    var t = a.imul(b);\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\n    var u = t.isub(c).iushrn(this.shift);\n    var res = u;\n\n    if (u.cmp(this.m) >= 0) {\n      res = u.isub(this.m);\n    } else if (u.cmpn(0) < 0) {\n      res = u.iadd(this.m);\n    }\n\n    return res._forceRed(this);\n  };\n\n  Mont.prototype.mul = function mul (a, b) {\n    if (a.isZero() || b.isZero()) return new BN(0)._forceRed(this);\n\n    var t = a.mul(b);\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\n    var u = t.isub(c).iushrn(this.shift);\n    var res = u;\n    if (u.cmp(this.m) >= 0) {\n      res = u.isub(this.m);\n    } else if (u.cmpn(0) < 0) {\n      res = u.iadd(this.m);\n    }\n\n    return res._forceRed(this);\n  };\n\n  Mont.prototype.invm = function invm (a) {\n    // (AR)^-1 * R^2 = (A^-1 * R^-1) * R^2 = A^-1 * R\n    var res = this.imod(a._invmp(this.m).mul(this.r2));\n    return res._forceRed(this);\n  };\n})(typeof module === 'undefined' || module, this);\n","function stringify (obj, { EOL = '\\n', finalEOL = true, replacer = null, spaces } = {}) {\n  const EOF = finalEOL ? EOL : ''\n  const str = JSON.stringify(obj, replacer, spaces)\n\n  return str.replace(/\\n/g, EOL) + EOF\n}\n\nfunction stripBom (content) {\n  // we do this because JSON.parse would convert it to a utf8 string if encoding wasn't specified\n  if (Buffer.isBuffer(content)) content = content.toString('utf8')\n  return content.replace(/^\\uFEFF/, '')\n}\n\nmodule.exports = { stringify, stripBom }\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst mkdir = require('../mkdirs')\nconst pathExists = require('../path-exists').pathExists\n\nfunction outputFile (file, data, encoding, callback) {\n  if (typeof encoding === 'function') {\n    callback = encoding\n    encoding = 'utf8'\n  }\n\n  const dir = path.dirname(file)\n  pathExists(dir, (err, itDoes) => {\n    if (err) return callback(err)\n    if (itDoes) return fs.writeFile(file, data, encoding, callback)\n\n    mkdir.mkdirs(dir, err => {\n      if (err) return callback(err)\n\n      fs.writeFile(file, data, encoding, callback)\n    })\n  })\n}\n\nfunction outputFileSync (file, ...args) {\n  const dir = path.dirname(file)\n  if (fs.existsSync(dir)) {\n    return fs.writeFileSync(file, ...args)\n  }\n  mkdir.mkdirsSync(dir)\n  fs.writeFileSync(file, ...args)\n}\n\nmodule.exports = {\n  outputFile: u(outputFile),\n  outputFileSync\n}\n","\"use strict\";\n\nfunction isContainer(node) {\n    switch (node._type) {\n    case 'document':\n    case 'block_quote':\n    case 'list':\n    case 'item':\n    case 'paragraph':\n    case 'heading':\n    case 'emph':\n    case 'strong':\n    case 'link':\n    case 'image':\n    case 'custom_inline':\n    case 'custom_block':\n        return true;\n    default:\n        return false;\n    }\n}\n\nvar resumeAt = function(node, entering) {\n    this.current = node;\n    this.entering = (entering === true);\n};\n\nvar next = function(){\n    var cur = this.current;\n    var entering = this.entering;\n\n    if (cur === null) {\n        return null;\n    }\n\n    var container = isContainer(cur);\n\n    if (entering && container) {\n        if (cur._firstChild) {\n            this.current = cur._firstChild;\n            this.entering = true;\n        } else {\n            // stay on node but exit\n            this.entering = false;\n        }\n\n    } else if (cur === this.root) {\n        this.current = null;\n\n    } else if (cur._next === null) {\n        this.current = cur._parent;\n        this.entering = false;\n\n    } else {\n        this.current = cur._next;\n        this.entering = true;\n    }\n\n    return {entering: entering, node: cur};\n};\n\nvar NodeWalker = function(root) {\n    return { current: root,\n             root: root,\n             entering: true,\n             next: next,\n             resumeAt: resumeAt };\n};\n\nvar Node = function(nodeType, sourcepos) {\n    this._type = nodeType;\n    this._parent = null;\n    this._firstChild = null;\n    this._lastChild = null;\n    this._prev = null;\n    this._next = null;\n    this._sourcepos = sourcepos;\n    this._lastLineBlank = false;\n    this._lastLineChecked = false;\n    this._open = true;\n    this._string_content = null;\n    this._literal = null;\n    this._listData = {};\n    this._info = null;\n    this._destination = null;\n    this._title = null;\n    this._isFenced = false;\n    this._fenceChar = null;\n    this._fenceLength = 0;\n    this._fenceOffset = null;\n    this._level = null;\n    this._onEnter = null;\n    this._onExit = null;\n};\n\nvar proto = Node.prototype;\n\nObject.defineProperty(proto, 'isContainer', {\n    get: function () { return isContainer(this); }\n});\n\nObject.defineProperty(proto, 'type', {\n    get: function() { return this._type; }\n});\n\nObject.defineProperty(proto, 'firstChild', {\n    get: function() { return this._firstChild; }\n});\n\nObject.defineProperty(proto, 'lastChild', {\n    get: function() { return this._lastChild; }\n});\n\nObject.defineProperty(proto, 'next', {\n    get: function() { return this._next; }\n});\n\nObject.defineProperty(proto, 'prev', {\n    get: function() { return this._prev; }\n});\n\nObject.defineProperty(proto, 'parent', {\n    get: function() { return this._parent; }\n});\n\nObject.defineProperty(proto, 'sourcepos', {\n    get: function() { return this._sourcepos; }\n});\n\nObject.defineProperty(proto, 'literal', {\n    get: function() { return this._literal; },\n    set: function(s) { this._literal = s; }\n});\n\nObject.defineProperty(proto, 'destination', {\n    get: function() { return this._destination; },\n    set: function(s) { this._destination = s; }\n});\n\nObject.defineProperty(proto, 'title', {\n    get: function() { return this._title; },\n    set: function(s) { this._title = s; }\n});\n\nObject.defineProperty(proto, 'info', {\n    get: function() { return this._info; },\n    set: function(s) { this._info = s; }\n});\n\nObject.defineProperty(proto, 'level', {\n    get: function() { return this._level; },\n    set: function(s) { this._level = s; }\n});\n\nObject.defineProperty(proto, 'listType', {\n    get: function() { return this._listData.type; },\n    set: function(t) { this._listData.type = t; }\n});\n\nObject.defineProperty(proto, 'listTight', {\n    get: function() { return this._listData.tight; },\n    set: function(t) { this._listData.tight = t; }\n});\n\nObject.defineProperty(proto, 'listStart', {\n    get: function() { return this._listData.start; },\n    set: function(n) { this._listData.start = n; }\n});\n\nObject.defineProperty(proto, 'listDelimiter', {\n    get: function() { return this._listData.delimiter; },\n    set: function(delim) { this._listData.delimiter = delim; }\n});\n\nObject.defineProperty(proto, 'onEnter', {\n    get: function() { return this._onEnter; },\n    set: function(s) { this._onEnter = s; }\n});\n\nObject.defineProperty(proto, 'onExit', {\n    get: function() { return this._onExit; },\n    set: function(s) { this._onExit = s; }\n});\n\nNode.prototype.appendChild = function(child) {\n    child.unlink();\n    child._parent = this;\n    if (this._lastChild) {\n        this._lastChild._next = child;\n        child._prev = this._lastChild;\n        this._lastChild = child;\n    } else {\n        this._firstChild = child;\n        this._lastChild = child;\n    }\n};\n\nNode.prototype.prependChild = function(child) {\n    child.unlink();\n    child._parent = this;\n    if (this._firstChild) {\n        this._firstChild._prev = child;\n        child._next = this._firstChild;\n        this._firstChild = child;\n    } else {\n        this._firstChild = child;\n        this._lastChild = child;\n    }\n};\n\nNode.prototype.unlink = function() {\n    if (this._prev) {\n        this._prev._next = this._next;\n    } else if (this._parent) {\n        this._parent._firstChild = this._next;\n    }\n    if (this._next) {\n        this._next._prev = this._prev;\n    } else if (this._parent) {\n        this._parent._lastChild = this._prev;\n    }\n    this._parent = null;\n    this._next = null;\n    this._prev = null;\n};\n\nNode.prototype.insertAfter = function(sibling) {\n    sibling.unlink();\n    sibling._next = this._next;\n    if (sibling._next) {\n        sibling._next._prev = sibling;\n    }\n    sibling._prev = this;\n    this._next = sibling;\n    sibling._parent = this._parent;\n    if (!sibling._next) {\n        sibling._parent._lastChild = sibling;\n    }\n};\n\nNode.prototype.insertBefore = function(sibling) {\n    sibling.unlink();\n    sibling._prev = this._prev;\n    if (sibling._prev) {\n        sibling._prev._next = sibling;\n    }\n    sibling._next = this;\n    this._prev = sibling;\n    sibling._parent = this._parent;\n    if (!sibling._prev) {\n        sibling._parent._firstChild = sibling;\n    }\n};\n\nNode.prototype.walker = function() {\n    var walker = new NodeWalker(this);\n    return walker;\n};\n\nmodule.exports = Node;\n\n\n/* Example of use of walker:\n\n var walker = w.walker();\n var event;\n\n while (event = walker.next()) {\n console.log(event.entering, event.node.type);\n }\n\n */\n","\"use strict\";\n\nfunction Renderer() {}\n\n/**\n *  Walks the AST and calls member methods for each Node type.\n *\n *  @param ast {Node} The root of the abstract syntax tree.\n */\nfunction render(ast) {\n  var walker = ast.walker()\n    , event\n    , type;\n\n  this.buffer = '';\n  this.lastOut = '\\n';\n\n  while((event = walker.next())) {\n    type = event.node.type;\n    if (this[type]) {\n      this[type](event.node, event.entering);\n    }\n  }\n  return this.buffer;\n}\n\n/**\n *  Concatenate a literal string to the buffer.\n *\n *  @param str {String} The string to concatenate.\n */\nfunction lit(str) {\n  this.buffer += str;\n  this.lastOut = str;\n}\n\n/**\n *  Output a newline to the buffer.\n */\nfunction cr() {\n  if (this.lastOut !== '\\n') {\n    this.lit('\\n');\n  }\n}\n\n/**\n *  Concatenate a string to the buffer possibly escaping the content.\n *\n *  Concrete renderer implementations should override this method.\n *\n *  @param str {String} The string to concatenate.\n */\nfunction out(str) {\n  this.lit(str);\n}\n\n/**\n *  Escape a string for the target renderer.\n *\n *  Abstract function that should be implemented by concrete \n *  renderer implementations.\n *\n *  @param str {String} The string to escape.\n */\nfunction esc(str) {\n  return str;\n}\n\nRenderer.prototype.render = render;\nRenderer.prototype.out = out;\nRenderer.prototype.lit = lit;\nRenderer.prototype.cr  = cr;\nRenderer.prototype.esc  = esc;\n\nmodule.exports = Renderer;\n","\"use strict\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar Events, RedisConnection, Scripts, parser;\nparser = require(\"./parser\");\nEvents = require(\"./Events\");\nScripts = require(\"./Scripts\");\n\nRedisConnection = function () {\n  class RedisConnection {\n    constructor(options = {}) {\n      parser.load(options, this.defaults, this);\n\n      if (this.Redis == null) {\n        this.Redis = eval(\"require\")(\"redis\"); // Obfuscated or else Webpack/Angular will try to inline the optional redis module. To override this behavior: pass the redis module to Bottleneck as the 'Redis' option.\n      }\n\n      if (this.Events == null) {\n        this.Events = new Events(this);\n      }\n\n      this.terminated = false;\n\n      if (this.client == null) {\n        this.client = this.Redis.createClient(this.clientOptions);\n      }\n\n      this.subscriber = this.client.duplicate();\n      this.limiters = {};\n      this.shas = {};\n      this.ready = this.Promise.all([this._setup(this.client, false), this._setup(this.subscriber, true)]).then(() => {\n        return this._loadScripts();\n      }).then(() => {\n        return {\n          client: this.client,\n          subscriber: this.subscriber\n        };\n      });\n    }\n\n    _setup(client, sub) {\n      client.setMaxListeners(0);\n      return new this.Promise((resolve, reject) => {\n        client.on(\"error\", e => {\n          return this.Events.trigger(\"error\", e);\n        });\n\n        if (sub) {\n          client.on(\"message\", (channel, message) => {\n            var ref;\n            return (ref = this.limiters[channel]) != null ? ref._store.onMessage(channel, message) : void 0;\n          });\n        }\n\n        if (client.ready) {\n          return resolve();\n        } else {\n          return client.once(\"ready\", resolve);\n        }\n      });\n    }\n\n    _loadScript(name) {\n      return new this.Promise((resolve, reject) => {\n        var payload;\n        payload = Scripts.payload(name);\n        return this.client.multi([[\"script\", \"load\", payload]]).exec((err, replies) => {\n          if (err != null) {\n            return reject(err);\n          }\n\n          this.shas[name] = replies[0];\n          return resolve(replies[0]);\n        });\n      });\n    }\n\n    _loadScripts() {\n      return this.Promise.all(Scripts.names.map(k => {\n        return this._loadScript(k);\n      }));\n    }\n\n    __runCommand__(cmd) {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        yield _this.ready;\n        return new _this.Promise((resolve, reject) => {\n          return _this.client.multi([cmd]).exec_atomic(function (err, replies) {\n            if (err != null) {\n              return reject(err);\n            } else {\n              return resolve(replies[0]);\n            }\n          });\n        });\n      })();\n    }\n\n    __addLimiter__(instance) {\n      return this.Promise.all([instance.channel(), instance.channel_client()].map(channel => {\n        return new this.Promise((resolve, reject) => {\n          var handler;\n\n          handler = chan => {\n            if (chan === channel) {\n              this.subscriber.removeListener(\"subscribe\", handler);\n              this.limiters[channel] = instance;\n              return resolve();\n            }\n          };\n\n          this.subscriber.on(\"subscribe\", handler);\n          return this.subscriber.subscribe(channel);\n        });\n      }));\n    }\n\n    __removeLimiter__(instance) {\n      var _this2 = this;\n\n      return this.Promise.all([instance.channel(), instance.channel_client()].map(\n      /*#__PURE__*/\n      function () {\n        var _ref = _asyncToGenerator(function* (channel) {\n          if (!_this2.terminated) {\n            yield new _this2.Promise((resolve, reject) => {\n              return _this2.subscriber.unsubscribe(channel, function (err, chan) {\n                if (err != null) {\n                  return reject(err);\n                }\n\n                if (chan === channel) {\n                  return resolve();\n                }\n              });\n            });\n          }\n\n          return delete _this2.limiters[channel];\n        });\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }()));\n    }\n\n    __scriptArgs__(name, id, args, cb) {\n      var keys;\n      keys = Scripts.keys(name, id);\n      return [this.shas[name], keys.length].concat(keys, args, cb);\n    }\n\n    __scriptFn__(name) {\n      return this.client.evalsha.bind(this.client);\n    }\n\n    disconnect(flush = true) {\n      var i, k, len, ref;\n      ref = Object.keys(this.limiters);\n\n      for (i = 0, len = ref.length; i < len; i++) {\n        k = ref[i];\n        clearInterval(this.limiters[k]._store.heartbeat);\n      }\n\n      this.limiters = {};\n      this.terminated = true;\n      this.client.end(flush);\n      this.subscriber.end(flush);\n      return this.Promise.resolve();\n    }\n\n  }\n\n  ;\n  RedisConnection.prototype.datastore = \"redis\";\n  RedisConnection.prototype.defaults = {\n    Redis: null,\n    clientOptions: {},\n    client: null,\n    Promise: Promise,\n    Events: null\n  };\n  return RedisConnection;\n}.call(void 0);\n\nmodule.exports = RedisConnection;","\"use strict\";\n\nvar headers, lua, templates;\nlua = require(\"./lua.json\");\nheaders = {\n  refs: lua[\"refs.lua\"],\n  validate_keys: lua[\"validate_keys.lua\"],\n  validate_client: lua[\"validate_client.lua\"],\n  refresh_expiration: lua[\"refresh_expiration.lua\"],\n  process_tick: lua[\"process_tick.lua\"],\n  conditions_check: lua[\"conditions_check.lua\"],\n  get_time: lua[\"get_time.lua\"]\n};\n\nexports.allKeys = function (id) {\n  return [\n  /*\n  HASH\n  */\n  `b_${id}_settings`,\n  /*\n  HASH\n  job index -> weight\n  */\n  `b_${id}_job_weights`,\n  /*\n  ZSET\n  job index -> expiration\n  */\n  `b_${id}_job_expirations`,\n  /*\n  HASH\n  job index -> client\n  */\n  `b_${id}_job_clients`,\n  /*\n  ZSET\n  client -> sum running\n  */\n  `b_${id}_client_running`,\n  /*\n  HASH\n  client -> num queued\n  */\n  `b_${id}_client_num_queued`,\n  /*\n  ZSET\n  client -> last job registered\n  */\n  `b_${id}_client_last_registered`,\n  /*\n  ZSET\n  client -> last seen\n  */\n  `b_${id}_client_last_seen`];\n};\n\ntemplates = {\n  init: {\n    keys: exports.allKeys,\n    headers: [\"process_tick\"],\n    refresh_expiration: true,\n    code: lua[\"init.lua\"]\n  },\n  group_check: {\n    keys: exports.allKeys,\n    headers: [],\n    refresh_expiration: false,\n    code: lua[\"group_check.lua\"]\n  },\n  register_client: {\n    keys: exports.allKeys,\n    headers: [\"validate_keys\"],\n    refresh_expiration: false,\n    code: lua[\"register_client.lua\"]\n  },\n  blacklist_client: {\n    keys: exports.allKeys,\n    headers: [\"validate_keys\", \"validate_client\"],\n    refresh_expiration: false,\n    code: lua[\"blacklist_client.lua\"]\n  },\n  heartbeat: {\n    keys: exports.allKeys,\n    headers: [\"validate_keys\", \"validate_client\", \"process_tick\"],\n    refresh_expiration: false,\n    code: lua[\"heartbeat.lua\"]\n  },\n  update_settings: {\n    keys: exports.allKeys,\n    headers: [\"validate_keys\", \"validate_client\", \"process_tick\"],\n    refresh_expiration: true,\n    code: lua[\"update_settings.lua\"]\n  },\n  running: {\n    keys: exports.allKeys,\n    headers: [\"validate_keys\", \"validate_client\", \"process_tick\"],\n    refresh_expiration: false,\n    code: lua[\"running.lua\"]\n  },\n  queued: {\n    keys: exports.allKeys,\n    headers: [\"validate_keys\", \"validate_client\"],\n    refresh_expiration: false,\n    code: lua[\"queued.lua\"]\n  },\n  done: {\n    keys: exports.allKeys,\n    headers: [\"validate_keys\", \"validate_client\", \"process_tick\"],\n    refresh_expiration: false,\n    code: lua[\"done.lua\"]\n  },\n  check: {\n    keys: exports.allKeys,\n    headers: [\"validate_keys\", \"validate_client\", \"process_tick\", \"conditions_check\"],\n    refresh_expiration: false,\n    code: lua[\"check.lua\"]\n  },\n  submit: {\n    keys: exports.allKeys,\n    headers: [\"validate_keys\", \"validate_client\", \"process_tick\", \"conditions_check\"],\n    refresh_expiration: true,\n    code: lua[\"submit.lua\"]\n  },\n  register: {\n    keys: exports.allKeys,\n    headers: [\"validate_keys\", \"validate_client\", \"process_tick\", \"conditions_check\"],\n    refresh_expiration: true,\n    code: lua[\"register.lua\"]\n  },\n  free: {\n    keys: exports.allKeys,\n    headers: [\"validate_keys\", \"validate_client\", \"process_tick\"],\n    refresh_expiration: true,\n    code: lua[\"free.lua\"]\n  },\n  current_reservoir: {\n    keys: exports.allKeys,\n    headers: [\"validate_keys\", \"validate_client\", \"process_tick\"],\n    refresh_expiration: false,\n    code: lua[\"current_reservoir.lua\"]\n  },\n  increment_reservoir: {\n    keys: exports.allKeys,\n    headers: [\"validate_keys\", \"validate_client\", \"process_tick\"],\n    refresh_expiration: true,\n    code: lua[\"increment_reservoir.lua\"]\n  }\n};\nexports.names = Object.keys(templates);\n\nexports.keys = function (name, id) {\n  return templates[name].keys(id);\n};\n\nexports.payload = function (name) {\n  var template;\n  template = templates[name];\n  return Array.prototype.concat(headers.refs, template.headers.map(function (h) {\n    return headers[h];\n  }), template.refresh_expiration ? headers.refresh_expiration : \"\", template.code).join(\"\\n\");\n};","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar Events, IORedisConnection, Scripts, parser;\nparser = require(\"./parser\");\nEvents = require(\"./Events\");\nScripts = require(\"./Scripts\");\n\nIORedisConnection = function () {\n  class IORedisConnection {\n    constructor(options = {}) {\n      parser.load(options, this.defaults, this);\n\n      if (this.Redis == null) {\n        this.Redis = eval(\"require\")(\"ioredis\"); // Obfuscated or else Webpack/Angular will try to inline the optional ioredis module. To override this behavior: pass the ioredis module to Bottleneck as the 'Redis' option.\n      }\n\n      if (this.Events == null) {\n        this.Events = new Events(this);\n      }\n\n      this.terminated = false;\n\n      if (this.clusterNodes != null) {\n        this.client = new this.Redis.Cluster(this.clusterNodes, this.clientOptions);\n        this.subscriber = new this.Redis.Cluster(this.clusterNodes, this.clientOptions);\n      } else if (this.client != null && this.client.duplicate == null) {\n        this.subscriber = new this.Redis.Cluster(this.client.startupNodes, this.client.options);\n      } else {\n        if (this.client == null) {\n          this.client = new this.Redis(this.clientOptions);\n        }\n\n        this.subscriber = this.client.duplicate();\n      }\n\n      this.limiters = {};\n      this.ready = this.Promise.all([this._setup(this.client, false), this._setup(this.subscriber, true)]).then(() => {\n        this._loadScripts();\n\n        return {\n          client: this.client,\n          subscriber: this.subscriber\n        };\n      });\n    }\n\n    _setup(client, sub) {\n      client.setMaxListeners(0);\n      return new this.Promise((resolve, reject) => {\n        client.on(\"error\", e => {\n          return this.Events.trigger(\"error\", e);\n        });\n\n        if (sub) {\n          client.on(\"message\", (channel, message) => {\n            var ref;\n            return (ref = this.limiters[channel]) != null ? ref._store.onMessage(channel, message) : void 0;\n          });\n        }\n\n        if (client.status === \"ready\") {\n          return resolve();\n        } else {\n          return client.once(\"ready\", resolve);\n        }\n      });\n    }\n\n    _loadScripts() {\n      return Scripts.names.forEach(name => {\n        return this.client.defineCommand(name, {\n          lua: Scripts.payload(name)\n        });\n      });\n    }\n\n    __runCommand__(cmd) {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        var _, deleted;\n\n        yield _this.ready;\n\n        var _ref = yield _this.client.pipeline([cmd]).exec();\n\n        var _ref2 = _slicedToArray(_ref, 1);\n\n        var _ref2$ = _slicedToArray(_ref2[0], 2);\n\n        _ = _ref2$[0];\n        deleted = _ref2$[1];\n        return deleted;\n      })();\n    }\n\n    __addLimiter__(instance) {\n      return this.Promise.all([instance.channel(), instance.channel_client()].map(channel => {\n        return new this.Promise((resolve, reject) => {\n          return this.subscriber.subscribe(channel, () => {\n            this.limiters[channel] = instance;\n            return resolve();\n          });\n        });\n      }));\n    }\n\n    __removeLimiter__(instance) {\n      var _this2 = this;\n\n      return [instance.channel(), instance.channel_client()].forEach(\n      /*#__PURE__*/\n      function () {\n        var _ref3 = _asyncToGenerator(function* (channel) {\n          if (!_this2.terminated) {\n            yield _this2.subscriber.unsubscribe(channel);\n          }\n\n          return delete _this2.limiters[channel];\n        });\n\n        return function (_x) {\n          return _ref3.apply(this, arguments);\n        };\n      }());\n    }\n\n    __scriptArgs__(name, id, args, cb) {\n      var keys;\n      keys = Scripts.keys(name, id);\n      return [keys.length].concat(keys, args, cb);\n    }\n\n    __scriptFn__(name) {\n      return this.client[name].bind(this.client);\n    }\n\n    disconnect(flush = true) {\n      var i, k, len, ref;\n      ref = Object.keys(this.limiters);\n\n      for (i = 0, len = ref.length; i < len; i++) {\n        k = ref[i];\n        clearInterval(this.limiters[k]._store.heartbeat);\n      }\n\n      this.limiters = {};\n      this.terminated = true;\n\n      if (flush) {\n        return this.Promise.all([this.client.quit(), this.subscriber.quit()]);\n      } else {\n        this.client.disconnect();\n        this.subscriber.disconnect();\n        return this.Promise.resolve();\n      }\n    }\n\n  }\n\n  ;\n  IORedisConnection.prototype.datastore = \"ioredis\";\n  IORedisConnection.prototype.defaults = {\n    Redis: null,\n    clientOptions: {},\n    clusterNodes: null,\n    client: null,\n    Promise: Promise,\n    Events: null\n  };\n  return IORedisConnection;\n}.call(void 0);\n\nmodule.exports = IORedisConnection;","'use strict';\n\nconst utils = require('./utils');\n\nmodule.exports = (ast, options = {}) => {\n  let stringify = (node, parent = {}) => {\n    let invalidBlock = options.escapeInvalid && utils.isInvalidBrace(parent);\n    let invalidNode = node.invalid === true && options.escapeInvalid === true;\n    let output = '';\n\n    if (node.value) {\n      if ((invalidBlock || invalidNode) && utils.isOpenOrClose(node)) {\n        return '\\\\' + node.value;\n      }\n      return node.value;\n    }\n\n    if (node.value) {\n      return node.value;\n    }\n\n    if (node.nodes) {\n      for (let child of node.nodes) {\n        output += stringify(child);\n      }\n    }\n    return output;\n  };\n\n  return stringify(ast);\n};\n\n","'use strict';\n\nexports.isInteger = num => {\n  if (typeof num === 'number') {\n    return Number.isInteger(num);\n  }\n  if (typeof num === 'string' && num.trim() !== '') {\n    return Number.isInteger(Number(num));\n  }\n  return false;\n};\n\n/**\n * Find a node of the given type\n */\n\nexports.find = (node, type) => node.nodes.find(node => node.type === type);\n\n/**\n * Find a node of the given type\n */\n\nexports.exceedsLimit = (min, max, step = 1, limit) => {\n  if (limit === false) return false;\n  if (!exports.isInteger(min) || !exports.isInteger(max)) return false;\n  return ((Number(max) - Number(min)) / Number(step)) >= limit;\n};\n\n/**\n * Escape the given node with '\\\\' before node.value\n */\n\nexports.escapeNode = (block, n = 0, type) => {\n  let node = block.nodes[n];\n  if (!node) return;\n\n  if ((type && node.type === type) || node.type === 'open' || node.type === 'close') {\n    if (node.escaped !== true) {\n      node.value = '\\\\' + node.value;\n      node.escaped = true;\n    }\n  }\n};\n\n/**\n * Returns true if the given brace node should be enclosed in literal braces\n */\n\nexports.encloseBrace = node => {\n  if (node.type !== 'brace') return false;\n  if ((node.commas >> 0 + node.ranges >> 0) === 0) {\n    node.invalid = true;\n    return true;\n  }\n  return false;\n};\n\n/**\n * Returns true if a brace node is invalid.\n */\n\nexports.isInvalidBrace = block => {\n  if (block.type !== 'brace') return false;\n  if (block.invalid === true || block.dollar) return true;\n  if ((block.commas >> 0 + block.ranges >> 0) === 0) {\n    block.invalid = true;\n    return true;\n  }\n  if (block.open !== true || block.close !== true) {\n    block.invalid = true;\n    return true;\n  }\n  return false;\n};\n\n/**\n * Returns true if a node is an open or close node\n */\n\nexports.isOpenOrClose = node => {\n  if (node.type === 'open' || node.type === 'close') {\n    return true;\n  }\n  return node.open === true || node.close === true;\n};\n\n/**\n * Reduce an array of text nodes.\n */\n\nexports.reduce = nodes => nodes.reduce((acc, node) => {\n  if (node.type === 'text') acc.push(node.value);\n  if (node.type === 'range') node.type = 'text';\n  return acc;\n}, []);\n\n/**\n * Flatten an array\n */\n\nexports.flatten = (...args) => {\n  const result = [];\n  const flat = arr => {\n    for (let i = 0; i < arr.length; i++) {\n      let ele = arr[i];\n      Array.isArray(ele) ? flat(ele, result) : ele !== void 0 && result.push(ele);\n    }\n    return result;\n  };\n  flat(args);\n  return result;\n};\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Settings = exports.scandirSync = exports.scandir = void 0;\r\nconst async = require(\"./providers/async\");\r\nconst sync = require(\"./providers/sync\");\r\nconst settings_1 = require(\"./settings\");\r\nexports.Settings = settings_1.default;\r\nfunction scandir(path, optionsOrSettingsOrCallback, callback) {\r\n    if (typeof optionsOrSettingsOrCallback === 'function') {\r\n        return async.read(path, getSettings(), optionsOrSettingsOrCallback);\r\n    }\r\n    async.read(path, getSettings(optionsOrSettingsOrCallback), callback);\r\n}\r\nexports.scandir = scandir;\r\nfunction scandirSync(path, optionsOrSettings) {\r\n    const settings = getSettings(optionsOrSettings);\r\n    return sync.read(path, settings);\r\n}\r\nexports.scandirSync = scandirSync;\r\nfunction getSettings(settingsOrOptions = {}) {\r\n    if (settingsOrOptions instanceof settings_1.default) {\r\n        return settingsOrOptions;\r\n    }\r\n    return new settings_1.default(settingsOrOptions);\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.joinPathSegments = exports.replacePathSegmentSeparator = exports.isAppliedFilter = exports.isFatalError = void 0;\r\nfunction isFatalError(settings, error) {\r\n    if (settings.errorFilter === null) {\r\n        return true;\r\n    }\r\n    return !settings.errorFilter(error);\r\n}\r\nexports.isFatalError = isFatalError;\r\nfunction isAppliedFilter(filter, value) {\r\n    return filter === null || filter(value);\r\n}\r\nexports.isAppliedFilter = isAppliedFilter;\r\nfunction replacePathSegmentSeparator(filepath, separator) {\r\n    return filepath.split(/[/\\\\]/).join(separator);\r\n}\r\nexports.replacePathSegmentSeparator = replacePathSegmentSeparator;\r\nfunction joinPathSegments(a, b, separator) {\r\n    if (a === '') {\r\n        return b;\r\n    }\r\n    /**\r\n     * The correct handling of cases when the first segment is a root (`/`, `C:/`) or UNC path (`//?/C:/`).\r\n     */\r\n    if (a.endsWith(separator)) {\r\n        return a + b;\r\n    }\r\n    return a + separator + b;\r\n}\r\nexports.joinPathSegments = joinPathSegments;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path = require(\"path\");\r\nconst deep_1 = require(\"./filters/deep\");\r\nconst entry_1 = require(\"./filters/entry\");\r\nconst error_1 = require(\"./filters/error\");\r\nconst entry_2 = require(\"./transformers/entry\");\r\nclass Provider {\r\n    constructor(_settings) {\r\n        this._settings = _settings;\r\n        this.errorFilter = new error_1.default(this._settings);\r\n        this.entryFilter = new entry_1.default(this._settings, this._getMicromatchOptions());\r\n        this.deepFilter = new deep_1.default(this._settings, this._getMicromatchOptions());\r\n        this.entryTransformer = new entry_2.default(this._settings);\r\n    }\r\n    _getRootDirectory(task) {\r\n        return path.resolve(this._settings.cwd, task.base);\r\n    }\r\n    _getReaderOptions(task) {\r\n        const basePath = task.base === '.' ? '' : task.base;\r\n        return {\r\n            basePath,\r\n            pathSegmentSeparator: '/',\r\n            concurrency: this._settings.concurrency,\r\n            deepFilter: this.deepFilter.getFilter(basePath, task.positive, task.negative),\r\n            entryFilter: this.entryFilter.getFilter(task.positive, task.negative),\r\n            errorFilter: this.errorFilter.getFilter(),\r\n            followSymbolicLinks: this._settings.followSymbolicLinks,\r\n            fs: this._settings.fs,\r\n            stats: this._settings.stats,\r\n            throwErrorOnBrokenSymbolicLink: this._settings.throwErrorOnBrokenSymbolicLink,\r\n            transform: this.entryTransformer.getTransformer()\r\n        };\r\n    }\r\n    _getMicromatchOptions() {\r\n        return {\r\n            dot: this._settings.dot,\r\n            matchBase: this._settings.baseNameMatch,\r\n            nobrace: !this._settings.braceExpansion,\r\n            nocase: !this._settings.caseSensitiveMatch,\r\n            noext: !this._settings.extglob,\r\n            noglobstar: !this._settings.globstar,\r\n            posix: true,\r\n            strictSlashes: false\r\n        };\r\n    }\r\n}\r\nexports.default = Provider;\r\n","/*\n This file is part of web3.js.\n\n web3.js is free software: you can redistribute it and/or modify\n it under the terms of the GNU Lesser General Public License as published by\n the Free Software Foundation, either version 3 of the License, or\n (at your option) any later version.\n\n web3.js is distributed in the hope that it will be useful,\n but WITHOUT ANY WARRANTY; without even the implied warranty of\n MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n GNU Lesser General Public License for more details.\n\n You should have received a copy of the GNU Lesser General Public License\n along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file utils.js\n * @author Marek Kotewicz <marek@parity.io>\n * @author Fabian Vogelsteller <fabian@ethereum.org>\n * @date 2017\n */\nvar _ = require('underscore');\nvar ethjsUnit = require('ethjs-unit');\nvar utils = require('./utils.js');\nvar soliditySha3 = require('./soliditySha3.js');\nvar randombytes = require('randombytes');\nvar BN = require('bn.js');\n/**\n * Fires an error in an event emitter and callback and returns the eventemitter\n *\n * @method _fireError\n * @param {Object} error a string, a error, or an object with {message, data}\n * @param {Object} emitter\n * @param {Function} reject\n * @param {Function} callback\n * @param {any} optionalData\n * @return {Object} the emitter\n */\nvar _fireError = function (error, emitter, reject, callback, optionalData) {\n    /*jshint maxcomplexity: 10 */\n    // add data if given\n    if (_.isObject(error) && !(error instanceof Error) && error.data) {\n        if (_.isObject(error.data) || _.isArray(error.data)) {\n            error.data = JSON.stringify(error.data, null, 2);\n        }\n        error = error.message + \"\\n\" + error.data;\n    }\n    if (_.isString(error)) {\n        error = new Error(error);\n    }\n    if (_.isFunction(callback)) {\n        callback(error, optionalData);\n    }\n    if (_.isFunction(reject)) {\n        // suppress uncatched error if an error listener is present\n        // OR suppress uncatched error if an callback listener is present\n        if (emitter &&\n            (_.isFunction(emitter.listeners) &&\n                emitter.listeners('error').length) || _.isFunction(callback)) {\n            emitter.catch(function () { });\n        }\n        // reject later, to be able to return emitter\n        setTimeout(function () {\n            reject(error);\n        }, 1);\n    }\n    if (emitter && _.isFunction(emitter.emit)) {\n        // emit later, to be able to return emitter\n        setTimeout(function () {\n            emitter.emit('error', error, optionalData);\n            emitter.removeAllListeners();\n        }, 1);\n    }\n    return emitter;\n};\n/**\n * Should be used to create full function/event name from json abi\n *\n * @method _jsonInterfaceMethodToString\n * @param {Object} json\n * @return {String} full function/event name\n */\nvar _jsonInterfaceMethodToString = function (json) {\n    if (_.isObject(json) && json.name && json.name.indexOf('(') !== -1) {\n        return json.name;\n    }\n    return json.name + '(' + _flattenTypes(false, json.inputs).join(',') + ')';\n};\n/**\n * Should be used to flatten json abi inputs/outputs into an array of type-representing-strings\n *\n * @method _flattenTypes\n * @param {bool} includeTuple\n * @param {Object} puts\n * @return {Array} parameters as strings\n */\nvar _flattenTypes = function (includeTuple, puts) {\n    // console.log(\"entered _flattenTypes. inputs/outputs: \" + puts)\n    var types = [];\n    puts.forEach(function (param) {\n        if (typeof param.components === 'object') {\n            if (param.type.substring(0, 5) !== 'tuple') {\n                throw new Error('components found but type is not tuple; report on GitHub');\n            }\n            var suffix = '';\n            var arrayBracket = param.type.indexOf('[');\n            if (arrayBracket >= 0) {\n                suffix = param.type.substring(arrayBracket);\n            }\n            var result = _flattenTypes(includeTuple, param.components);\n            // console.log(\"result should have things: \" + result)\n            if (_.isArray(result) && includeTuple) {\n                // console.log(\"include tuple word, and its an array. joining...: \" + result.types)\n                types.push('tuple(' + result.join(',') + ')' + suffix);\n            }\n            else if (!includeTuple) {\n                // console.log(\"don't include tuple, but its an array. joining...: \" + result)\n                types.push('(' + result.join(',') + ')' + suffix);\n            }\n            else {\n                // console.log(\"its a single type within a tuple: \" + result.types)\n                types.push('(' + result + ')');\n            }\n        }\n        else {\n            // console.log(\"its a type and not directly in a tuple: \" + param.type)\n            types.push(param.type);\n        }\n    });\n    return types;\n};\n/**\n * Returns a random hex string by the given bytes size\n *\n * @param {Number} size\n * @returns {string}\n */\nvar randomHex = function (size) {\n    return '0x' + randombytes(size).toString('hex');\n};\n/**\n * Should be called to get ascii from it's hex representation\n *\n * @method hexToAscii\n * @param {String} hex\n * @returns {String} ascii string representation of hex value\n */\nvar hexToAscii = function (hex) {\n    if (!utils.isHexStrict(hex))\n        throw new Error('The parameter must be a valid HEX string.');\n    var str = \"\";\n    var i = 0, l = hex.length;\n    if (hex.substring(0, 2) === '0x') {\n        i = 2;\n    }\n    for (; i < l; i += 2) {\n        var code = parseInt(hex.substr(i, 2), 16);\n        str += String.fromCharCode(code);\n    }\n    return str;\n};\n/**\n * Should be called to get hex representation (prefixed by 0x) of ascii string\n *\n * @method asciiToHex\n * @param {String} str\n * @returns {String} hex representation of input string\n */\nvar asciiToHex = function (str) {\n    if (!str)\n        return \"0x00\";\n    var hex = \"\";\n    for (var i = 0; i < str.length; i++) {\n        var code = str.charCodeAt(i);\n        var n = code.toString(16);\n        hex += n.length < 2 ? '0' + n : n;\n    }\n    return \"0x\" + hex;\n};\n/**\n * Returns value of unit in Wei\n *\n * @method getUnitValue\n * @param {String} unit the unit to convert to, default ether\n * @returns {BN} value of the unit (in Wei)\n * @throws error if the unit is not correct:w\n */\nvar getUnitValue = function (unit) {\n    unit = unit ? unit.toLowerCase() : 'ether';\n    if (!ethjsUnit.unitMap[unit]) {\n        throw new Error('This unit \"' + unit + '\" doesn\\'t exist, please use the one of the following units' + JSON.stringify(ethjsUnit.unitMap, null, 2));\n    }\n    return unit;\n};\n/**\n * Takes a number of wei and converts it to any other ether unit.\n *\n * Possible units are:\n *   SI Short   SI Full        Effigy       Other\n * - kwei       femtoether     babbage\n * - mwei       picoether      lovelace\n * - gwei       nanoether      shannon      nano\n * - --         microether     szabo        micro\n * - --         milliether     finney       milli\n * - ether      --             --\n * - kether                    --           grand\n * - mether\n * - gether\n * - tether\n *\n * @method fromWei\n * @param {Number|String} number can be a number, number string or a HEX of a decimal\n * @param {String} unit the unit to convert to, default ether\n * @return {String|Object} When given a BN object it returns one as well, otherwise a number\n */\nvar fromWei = function (number, unit) {\n    unit = getUnitValue(unit);\n    if (!utils.isBN(number) && !_.isString(number)) {\n        throw new Error('Please pass numbers as strings or BN objects to avoid precision errors.');\n    }\n    return utils.isBN(number) ? ethjsUnit.fromWei(number, unit) : ethjsUnit.fromWei(number, unit).toString(10);\n};\n/**\n * Takes a number of a unit and converts it to wei.\n *\n * Possible units are:\n *   SI Short   SI Full        Effigy       Other\n * - kwei       femtoether     babbage\n * - mwei       picoether      lovelace\n * - gwei       nanoether      shannon      nano\n * - --         microether     szabo        micro\n * - --         microether     szabo        micro\n * - --         milliether     finney       milli\n * - ether      --             --\n * - kether                    --           grand\n * - mether\n * - gether\n * - tether\n *\n * @method toWei\n * @param {Number|String|BN} number can be a number, number string or a HEX of a decimal\n * @param {String} unit the unit to convert from, default ether\n * @return {String|Object} When given a BN object it returns one as well, otherwise a number\n */\nvar toWei = function (number, unit) {\n    unit = getUnitValue(unit);\n    if (!utils.isBN(number) && !_.isString(number)) {\n        throw new Error('Please pass numbers as strings or BN objects to avoid precision errors.');\n    }\n    return utils.isBN(number) ? ethjsUnit.toWei(number, unit) : ethjsUnit.toWei(number, unit).toString(10);\n};\n/**\n * Converts to a checksum address\n *\n * @method toChecksumAddress\n * @param {String} address the given HEX address\n * @return {String}\n */\nvar toChecksumAddress = function (address) {\n    if (typeof address === 'undefined')\n        return '';\n    if (!/^(0x)?[0-9a-f]{40}$/i.test(address))\n        throw new Error('Given address \"' + address + '\" is not a valid Ethereum address.');\n    address = address.toLowerCase().replace(/^0x/i, '');\n    var addressHash = utils.sha3(address).replace(/^0x/i, '');\n    var checksumAddress = '0x';\n    for (var i = 0; i < address.length; i++) {\n        // If ith character is 8 to f then make it uppercase\n        if (parseInt(addressHash[i], 16) > 7) {\n            checksumAddress += address[i].toUpperCase();\n        }\n        else {\n            checksumAddress += address[i];\n        }\n    }\n    return checksumAddress;\n};\n/**\n * Returns -1 if a<b, 1 if a>b; 0 if a == b.\n * For more details on this type of function, see\n * developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort\n *\n * @method compareBlockNumbers\n *\n * @param {String|Number|BN} a\n *\n * @param {String|Number|BN} b\n *\n * @returns {Number} -1, 0, or 1\n */\nvar compareBlockNumbers = function (a, b) {\n    if (a == b) {\n        return 0;\n    }\n    else if ((\"genesis\" == a || \"earliest\" == a || 0 == a) && (\"genesis\" == b || \"earliest\" == b || 0 == b)) {\n        return 0;\n    }\n    else if (\"genesis\" == a || \"earliest\" == a) {\n        // b !== a, thus a < b\n        return -1;\n    }\n    else if (\"genesis\" == b || \"earliest\" == b) {\n        // b !== a, thus a > b\n        return 1;\n    }\n    else if (a == \"latest\") {\n        if (b == \"pending\") {\n            return -1;\n        }\n        else {\n            // b !== (\"pending\" OR \"latest\"), thus a > b\n            return 1;\n        }\n    }\n    else if (b === \"latest\") {\n        if (a == \"pending\") {\n            return 1;\n        }\n        else {\n            // b !== (\"pending\" OR \"latest\"), thus a > b\n            return -1;\n        }\n    }\n    else if (a == \"pending\") {\n        // b (== OR <) \"latest\", thus a > b\n        return 1;\n    }\n    else if (b == \"pending\") {\n        return -1;\n    }\n    else {\n        let bnA = new BN(a);\n        let bnB = new BN(b);\n        if (bnA.lt(bnB)) {\n            return -1;\n        }\n        else if (bnA.eq(bnB)) {\n            return 0;\n        }\n        else {\n            return 1;\n        }\n    }\n};\nmodule.exports = {\n    _fireError: _fireError,\n    _jsonInterfaceMethodToString: _jsonInterfaceMethodToString,\n    _flattenTypes: _flattenTypes,\n    // extractDisplayName: extractDisplayName,\n    // extractTypeName: extractTypeName,\n    randomHex: randomHex,\n    _: _,\n    BN: utils.BN,\n    isBN: utils.isBN,\n    isBigNumber: utils.isBigNumber,\n    isHex: utils.isHex,\n    isHexStrict: utils.isHexStrict,\n    sha3: utils.sha3,\n    sha3Raw: utils.sha3Raw,\n    keccak256: utils.sha3,\n    soliditySha3: soliditySha3.soliditySha3,\n    soliditySha3Raw: soliditySha3.soliditySha3Raw,\n    encodePacked: soliditySha3.encodePacked,\n    isAddress: utils.isAddress,\n    checkAddressChecksum: utils.checkAddressChecksum,\n    toChecksumAddress: toChecksumAddress,\n    toHex: utils.toHex,\n    toBN: utils.toBN,\n    bytesToHex: utils.bytesToHex,\n    hexToBytes: utils.hexToBytes,\n    hexToNumberString: utils.hexToNumberString,\n    hexToNumber: utils.hexToNumber,\n    toDecimal: utils.hexToNumber,\n    numberToHex: utils.numberToHex,\n    fromDecimal: utils.numberToHex,\n    hexToUtf8: utils.hexToUtf8,\n    hexToString: utils.hexToUtf8,\n    toUtf8: utils.hexToUtf8,\n    stripHexPrefix: utils.stripHexPrefix,\n    utf8ToHex: utils.utf8ToHex,\n    stringToHex: utils.utf8ToHex,\n    fromUtf8: utils.utf8ToHex,\n    hexToAscii: hexToAscii,\n    toAscii: hexToAscii,\n    asciiToHex: asciiToHex,\n    fromAscii: asciiToHex,\n    unitMap: ethjsUnit.unitMap,\n    toWei: toWei,\n    fromWei: fromWei,\n    padLeft: utils.leftPad,\n    leftPad: utils.leftPad,\n    padRight: utils.rightPad,\n    rightPad: utils.rightPad,\n    toTwosComplement: utils.toTwosComplement,\n    isBloom: utils.isBloom,\n    isUserEthereumAddressInBloom: utils.isUserEthereumAddressInBloom,\n    isContractAddressInBloom: utils.isContractAddressInBloom,\n    isTopic: utils.isTopic,\n    isTopicInBloom: utils.isTopicInBloom,\n    isInBloom: utils.isInBloom,\n    compareBlockNumbers: compareBlockNumbers\n};\n","module.exports = require(\"http\");","\"use strict\";\n\n// commonmark.js - CommomMark in JavaScript\n// Copyright (C) 2014 John MacFarlane\n// License: BSD3.\n\n// Basic usage:\n//\n// var commonmark = require('commonmark');\n// var parser = new commonmark.Parser();\n// var renderer = new commonmark.HtmlRenderer();\n// console.log(renderer.render(parser.parse('Hello *world*')));\n\nmodule.exports.Node = require('./node');\nmodule.exports.Parser = require('./blocks');\nmodule.exports.Renderer = require('./render/renderer');\nmodule.exports.HtmlRenderer = require('./render/html');\nmodule.exports.XmlRenderer = require('./render/xml');\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decodeHTML = exports.decodeHTMLStrict = exports.decodeXML = void 0;\nvar entities_json_1 = __importDefault(require(\"./maps/entities.json\"));\nvar legacy_json_1 = __importDefault(require(\"./maps/legacy.json\"));\nvar xml_json_1 = __importDefault(require(\"./maps/xml.json\"));\nvar decode_codepoint_1 = __importDefault(require(\"./decode_codepoint\"));\nvar strictEntityRe = /&(?:[a-zA-Z0-9]+|#[xX][\\da-fA-F]+|#\\d+);/g;\nexports.decodeXML = getStrictDecoder(xml_json_1.default);\nexports.decodeHTMLStrict = getStrictDecoder(entities_json_1.default);\nfunction getStrictDecoder(map) {\n    var replace = getReplacer(map);\n    return function (str) { return String(str).replace(strictEntityRe, replace); };\n}\nvar sorter = function (a, b) { return (a < b ? 1 : -1); };\nexports.decodeHTML = (function () {\n    var legacy = Object.keys(legacy_json_1.default).sort(sorter);\n    var keys = Object.keys(entities_json_1.default).sort(sorter);\n    for (var i = 0, j = 0; i < keys.length; i++) {\n        if (legacy[j] === keys[i]) {\n            keys[i] += \";?\";\n            j++;\n        }\n        else {\n            keys[i] += \";\";\n        }\n    }\n    var re = new RegExp(\"&(?:\" + keys.join(\"|\") + \"|#[xX][\\\\da-fA-F]+;?|#\\\\d+;?)\", \"g\");\n    var replace = getReplacer(entities_json_1.default);\n    function replacer(str) {\n        if (str.substr(-1) !== \";\")\n            str += \";\";\n        return replace(str);\n    }\n    // TODO consider creating a merged map\n    return function (str) { return String(str).replace(re, replacer); };\n})();\nfunction getReplacer(map) {\n    return function replace(str) {\n        if (str.charAt(1) === \"#\") {\n            var secondChar = str.charAt(2);\n            if (secondChar === \"X\" || secondChar === \"x\") {\n                return decode_codepoint_1.default(parseInt(str.substr(3), 16));\n            }\n            return decode_codepoint_1.default(parseInt(str.substr(2), 10));\n        }\n        // eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing\n        return map[str.slice(1, -1)] || str;\n    };\n}\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar decode_json_1 = __importDefault(require(\"./maps/decode.json\"));\n// Adapted from https://github.com/mathiasbynens/he/blob/master/src/he.js#L94-L119\nvar fromCodePoint = \n// eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\nString.fromCodePoint ||\n    function (codePoint) {\n        var output = \"\";\n        if (codePoint > 0xffff) {\n            codePoint -= 0x10000;\n            output += String.fromCharCode(((codePoint >>> 10) & 0x3ff) | 0xd800);\n            codePoint = 0xdc00 | (codePoint & 0x3ff);\n        }\n        output += String.fromCharCode(codePoint);\n        return output;\n    };\nfunction decodeCodePoint(codePoint) {\n    if ((codePoint >= 0xd800 && codePoint <= 0xdfff) || codePoint > 0x10ffff) {\n        return \"\\uFFFD\";\n    }\n    if (codePoint in decode_json_1.default) {\n        codePoint = decode_json_1.default[codePoint];\n    }\n    return fromCodePoint(codePoint);\n}\nexports.default = decodeCodePoint;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.escapeUTF8 = exports.escape = exports.encodeNonAsciiHTML = exports.encodeHTML = exports.encodeXML = void 0;\nvar xml_json_1 = __importDefault(require(\"./maps/xml.json\"));\nvar inverseXML = getInverseObj(xml_json_1.default);\nvar xmlReplacer = getInverseReplacer(inverseXML);\n/**\n * Encodes all non-ASCII characters, as well as characters not valid in XML\n * documents using XML entities.\n *\n * If a character has no equivalent entity, a\n * numeric hexadecimal reference (eg. `&#xfc;`) will be used.\n */\nexports.encodeXML = getASCIIEncoder(inverseXML);\nvar entities_json_1 = __importDefault(require(\"./maps/entities.json\"));\nvar inverseHTML = getInverseObj(entities_json_1.default);\nvar htmlReplacer = getInverseReplacer(inverseHTML);\n/**\n * Encodes all entities and non-ASCII characters in the input.\n *\n * This includes characters that are valid ASCII characters in HTML documents.\n * For example `#` will be encoded as `&num;`. To get a more compact output,\n * consider using the `encodeNonAsciiHTML` function.\n *\n * If a character has no equivalent entity, a\n * numeric hexadecimal reference (eg. `&#xfc;`) will be used.\n */\nexports.encodeHTML = getInverse(inverseHTML, htmlReplacer);\n/**\n * Encodes all non-ASCII characters, as well as characters not valid in HTML\n * documents using HTML entities.\n *\n * If a character has no equivalent entity, a\n * numeric hexadecimal reference (eg. `&#xfc;`) will be used.\n */\nexports.encodeNonAsciiHTML = getASCIIEncoder(inverseHTML);\nfunction getInverseObj(obj) {\n    return Object.keys(obj)\n        .sort()\n        .reduce(function (inverse, name) {\n        inverse[obj[name]] = \"&\" + name + \";\";\n        return inverse;\n    }, {});\n}\nfunction getInverseReplacer(inverse) {\n    var single = [];\n    var multiple = [];\n    for (var _i = 0, _a = Object.keys(inverse); _i < _a.length; _i++) {\n        var k = _a[_i];\n        if (k.length === 1) {\n            // Add value to single array\n            single.push(\"\\\\\" + k);\n        }\n        else {\n            // Add value to multiple array\n            multiple.push(k);\n        }\n    }\n    // Add ranges to single characters.\n    single.sort();\n    for (var start = 0; start < single.length - 1; start++) {\n        // Find the end of a run of characters\n        var end = start;\n        while (end < single.length - 1 &&\n            single[end].charCodeAt(1) + 1 === single[end + 1].charCodeAt(1)) {\n            end += 1;\n        }\n        var count = 1 + end - start;\n        // We want to replace at least three characters\n        if (count < 3)\n            continue;\n        single.splice(start, count, single[start] + \"-\" + single[end]);\n    }\n    multiple.unshift(\"[\" + single.join(\"\") + \"]\");\n    return new RegExp(multiple.join(\"|\"), \"g\");\n}\n// /[^\\0-\\x7F]/gu\nvar reNonASCII = /(?:[\\x80-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])/g;\nvar getCodePoint = \n// eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\nString.prototype.codePointAt != null\n    ? // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        function (str) { return str.codePointAt(0); }\n    : // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n        function (c) {\n            return (c.charCodeAt(0) - 0xd800) * 0x400 +\n                c.charCodeAt(1) -\n                0xdc00 +\n                0x10000;\n        };\nfunction singleCharReplacer(c) {\n    return \"&#x\" + (c.length > 1 ? getCodePoint(c) : c.charCodeAt(0))\n        .toString(16)\n        .toUpperCase() + \";\";\n}\nfunction getInverse(inverse, re) {\n    return function (data) {\n        return data\n            .replace(re, function (name) { return inverse[name]; })\n            .replace(reNonASCII, singleCharReplacer);\n    };\n}\nvar reEscapeChars = new RegExp(xmlReplacer.source + \"|\" + reNonASCII.source, \"g\");\n/**\n * Encodes all non-ASCII characters, as well as characters not valid in XML\n * documents using numeric hexadecimal reference (eg. `&#xfc;`).\n *\n * Have a look at `escapeUTF8` if you want a more concise output at the expense\n * of reduced transportability.\n *\n * @param data String to escape.\n */\nfunction escape(data) {\n    return data.replace(reEscapeChars, singleCharReplacer);\n}\nexports.escape = escape;\n/**\n * Encodes all characters not valid in XML documents using numeric hexadecimal\n * reference (eg. `&#xfc;`).\n *\n * Note that the output will be character-set dependent.\n *\n * @param data String to escape.\n */\nfunction escapeUTF8(data) {\n    return data.replace(xmlReplacer, singleCharReplacer);\n}\nexports.escapeUTF8 = escapeUTF8;\nfunction getASCIIEncoder(obj) {\n    return function (data) {\n        return data.replace(reEscapeChars, function (c) { return obj[c] || singleCharReplacer(c); });\n    };\n}\n","var BN = require('bn.js');\nvar stripHexPrefix = require('strip-hex-prefix');\n\n/**\n * Returns a BN object, converts a number value to a BN\n * @param {String|Number|Object} `arg` input a string number, hex string number, number, BigNumber or BN object\n * @return {Object} `output` BN object of the number\n * @throws if the argument is not an array, object that isn't a bignumber, not a string number or number\n */\nmodule.exports = function numberToBN(arg) {\n  if (typeof arg === 'string' || typeof arg === 'number') {\n    var multiplier = new BN(1); // eslint-disable-line\n    var formattedString = String(arg).toLowerCase().trim();\n    var isHexPrefixed = formattedString.substr(0, 2) === '0x' || formattedString.substr(0, 3) === '-0x';\n    var stringArg = stripHexPrefix(formattedString); // eslint-disable-line\n    if (stringArg.substr(0, 1) === '-') {\n      stringArg = stripHexPrefix(stringArg.slice(1));\n      multiplier = new BN(-1, 10);\n    }\n    stringArg = stringArg === '' ? '0' : stringArg;\n\n    if ((!stringArg.match(/^-?[0-9]+$/) && stringArg.match(/^[0-9A-Fa-f]+$/))\n      || stringArg.match(/^[a-fA-F]+$/)\n      || (isHexPrefixed === true && stringArg.match(/^[0-9A-Fa-f]+$/))) {\n      return new BN(stringArg, 16).mul(multiplier);\n    }\n\n    if ((stringArg.match(/^-?[0-9]+$/) || stringArg === '') && isHexPrefixed === false) {\n      return new BN(stringArg, 10).mul(multiplier);\n    }\n  } else if (typeof arg === 'object' && arg.toString && (!arg.pop && !arg.push)) {\n    if (arg.toString(10).match(/^-?[0-9]+$/) && (arg.mul || arg.dividedToIntegerBy)) {\n      return new BN(arg.toString(10), 10);\n    }\n  }\n\n  throw new Error('[number-to-bn] while converting number ' + JSON.stringify(arg) + ' to BN.js instance, error: invalid number value. Value must be an integer, hex string, BN or BigNumber instance. Note, decimals are not supported.');\n}\n","/*\n This file is part of web3.js.\n\n web3.js is free software: you can redistribute it and/or modify\n it under the terms of the GNU Lesser General Public License as published by\n the Free Software Foundation, either version 3 of the License, or\n (at your option) any later version.\n\n web3.js is distributed in the hope that it will be useful,\n but WITHOUT ANY WARRANTY; without even the implied warranty of\n MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n GNU Lesser General Public License for more details.\n\n You should have received a copy of the GNU Lesser General Public License\n along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file utils.js\n * @author Fabian Vogelsteller <fabian@ethereum.org>\n * @date 2017\n */\nvar _ = require('underscore');\nvar BN = require('bn.js');\nvar numberToBN = require('number-to-bn');\nvar utf8 = require('utf8');\nvar Hash = require(\"eth-lib/lib/hash\");\nvar ethereumBloomFilters = require('ethereum-bloom-filters');\n/**\n * Returns true if object is BN, otherwise false\n *\n * @method isBN\n * @param {Object} object\n * @return {Boolean}\n */\nvar isBN = function (object) {\n    return BN.isBN(object);\n};\n/**\n * Returns true if object is BigNumber, otherwise false\n *\n * @method isBigNumber\n * @param {Object} object\n * @return {Boolean}\n */\nvar isBigNumber = function (object) {\n    return object && object.constructor && object.constructor.name === 'BigNumber';\n};\n/**\n * Takes an input and transforms it into an BN\n *\n * @method toBN\n * @param {Number|String|BN} number, string, HEX string or BN\n * @return {BN} BN\n */\nvar toBN = function (number) {\n    try {\n        return numberToBN.apply(null, arguments);\n    }\n    catch (e) {\n        throw new Error(e + ' Given value: \"' + number + '\"');\n    }\n};\n/**\n * Takes and input transforms it into BN and if it is negative value, into two's complement\n *\n * @method toTwosComplement\n * @param {Number|String|BN} number\n * @return {String}\n */\nvar toTwosComplement = function (number) {\n    return '0x' + toBN(number).toTwos(256).toString(16, 64);\n};\n/**\n * Checks if the given string is an address\n *\n * @method isAddress\n * @param {String} address the given HEX address\n * @return {Boolean}\n */\nvar isAddress = function (address) {\n    // check if it has the basic requirements of an address\n    if (!/^(0x)?[0-9a-f]{40}$/i.test(address)) {\n        return false;\n        // If it's ALL lowercase or ALL upppercase\n    }\n    else if (/^(0x|0X)?[0-9a-f]{40}$/.test(address) || /^(0x|0X)?[0-9A-F]{40}$/.test(address)) {\n        return true;\n        // Otherwise check each case\n    }\n    else {\n        return checkAddressChecksum(address);\n    }\n};\n/**\n * Checks if the given string is a checksummed address\n *\n * @method checkAddressChecksum\n * @param {String} address the given HEX address\n * @return {Boolean}\n */\nvar checkAddressChecksum = function (address) {\n    // Check each case\n    address = address.replace(/^0x/i, '');\n    var addressHash = sha3(address.toLowerCase()).replace(/^0x/i, '');\n    for (var i = 0; i < 40; i++) {\n        // the nth letter should be uppercase if the nth digit of casemap is 1\n        if ((parseInt(addressHash[i], 16) > 7 && address[i].toUpperCase() !== address[i]) || (parseInt(addressHash[i], 16) <= 7 && address[i].toLowerCase() !== address[i])) {\n            return false;\n        }\n    }\n    return true;\n};\n/**\n * Should be called to pad string to expected length\n *\n * @method leftPad\n * @param {String} string to be padded\n * @param {Number} chars that result string should have\n * @param {String} sign, by default 0\n * @returns {String} right aligned string\n */\nvar leftPad = function (string, chars, sign) {\n    var hasPrefix = /^0x/i.test(string) || typeof string === 'number';\n    string = string.toString(16).replace(/^0x/i, '');\n    var padding = (chars - string.length + 1 >= 0) ? chars - string.length + 1 : 0;\n    return (hasPrefix ? '0x' : '') + new Array(padding).join(sign ? sign : \"0\") + string;\n};\n/**\n * Should be called to pad string to expected length\n *\n * @method rightPad\n * @param {String} string to be padded\n * @param {Number} chars that result string should have\n * @param {String} sign, by default 0\n * @returns {String} right aligned string\n */\nvar rightPad = function (string, chars, sign) {\n    var hasPrefix = /^0x/i.test(string) || typeof string === 'number';\n    string = string.toString(16).replace(/^0x/i, '');\n    var padding = (chars - string.length + 1 >= 0) ? chars - string.length + 1 : 0;\n    return (hasPrefix ? '0x' : '') + string + (new Array(padding).join(sign ? sign : \"0\"));\n};\n/**\n * Should be called to get hex representation (prefixed by 0x) of utf8 string\n *\n * @method utf8ToHex\n * @param {String} str\n * @returns {String} hex representation of input string\n */\nvar utf8ToHex = function (str) {\n    str = utf8.encode(str);\n    var hex = \"\";\n    // remove \\u0000 padding from either side\n    str = str.replace(/^(?:\\u0000)*/, '');\n    str = str.split(\"\").reverse().join(\"\");\n    str = str.replace(/^(?:\\u0000)*/, '');\n    str = str.split(\"\").reverse().join(\"\");\n    for (var i = 0; i < str.length; i++) {\n        var code = str.charCodeAt(i);\n        // if (code !== 0) {\n        var n = code.toString(16);\n        hex += n.length < 2 ? '0' + n : n;\n        // }\n    }\n    return \"0x\" + hex;\n};\n/**\n * Should be called to get utf8 from it's hex representation\n *\n * @method hexToUtf8\n * @param {String} hex\n * @returns {String} ascii string representation of hex value\n */\nvar hexToUtf8 = function (hex) {\n    if (!isHexStrict(hex))\n        throw new Error('The parameter \"' + hex + '\" must be a valid HEX string.');\n    var str = \"\";\n    var code = 0;\n    hex = hex.replace(/^0x/i, '');\n    // remove 00 padding from either side\n    hex = hex.replace(/^(?:00)*/, '');\n    hex = hex.split(\"\").reverse().join(\"\");\n    hex = hex.replace(/^(?:00)*/, '');\n    hex = hex.split(\"\").reverse().join(\"\");\n    var l = hex.length;\n    for (var i = 0; i < l; i += 2) {\n        code = parseInt(hex.substr(i, 2), 16);\n        // if (code !== 0) {\n        str += String.fromCharCode(code);\n        // }\n    }\n    return utf8.decode(str);\n};\n/**\n * Converts value to it's number representation\n *\n * @method hexToNumber\n * @param {String|Number|BN} value\n * @return {String}\n */\nvar hexToNumber = function (value) {\n    if (!value) {\n        return value;\n    }\n    if (_.isString(value) && !isHexStrict(value)) {\n        throw new Error('Given value \"' + value + '\" is not a valid hex string.');\n    }\n    return toBN(value).toNumber();\n};\n/**\n * Converts value to it's decimal representation in string\n *\n * @method hexToNumberString\n * @param {String|Number|BN} value\n * @return {String}\n */\nvar hexToNumberString = function (value) {\n    if (!value)\n        return value;\n    if (_.isString(value) && !isHexStrict(value)) {\n        throw new Error('Given value \"' + value + '\" is not a valid hex string.');\n    }\n    return toBN(value).toString(10);\n};\n/**\n * Converts value to it's hex representation\n *\n * @method numberToHex\n * @param {String|Number|BN} value\n * @return {String}\n */\nvar numberToHex = function (value) {\n    if (_.isNull(value) || _.isUndefined(value)) {\n        return value;\n    }\n    if (!isFinite(value) && !isHexStrict(value)) {\n        throw new Error('Given input \"' + value + '\" is not a number.');\n    }\n    var number = toBN(value);\n    var result = number.toString(16);\n    return number.lt(new BN(0)) ? '-0x' + result.substr(1) : '0x' + result;\n};\n/**\n * Convert a byte array to a hex string\n *\n * Note: Implementation from crypto-js\n *\n * @method bytesToHex\n * @param {Array} bytes\n * @return {String} the hex string\n */\nvar bytesToHex = function (bytes) {\n    for (var hex = [], i = 0; i < bytes.length; i++) {\n        /* jshint ignore:start */\n        hex.push((bytes[i] >>> 4).toString(16));\n        hex.push((bytes[i] & 0xF).toString(16));\n        /* jshint ignore:end */\n    }\n    return '0x' + hex.join(\"\");\n};\n/**\n * Convert a hex string to a byte array\n *\n * Note: Implementation from crypto-js\n *\n * @method hexToBytes\n * @param {string} hex\n * @return {Array} the byte array\n */\nvar hexToBytes = function (hex) {\n    hex = hex.toString(16);\n    if (!isHexStrict(hex)) {\n        throw new Error('Given value \"' + hex + '\" is not a valid hex string.');\n    }\n    hex = hex.replace(/^0x/i, '');\n    for (var bytes = [], c = 0; c < hex.length; c += 2)\n        bytes.push(parseInt(hex.substr(c, 2), 16));\n    return bytes;\n};\n/**\n * Auto converts any given value into it's hex representation.\n *\n * And even stringifys objects before.\n *\n * @method toHex\n * @param {String|Number|BN|Object|Buffer} value\n * @param {Boolean} returnType\n * @return {String}\n */\nvar toHex = function (value, returnType) {\n    /*jshint maxcomplexity: false */\n    if (isAddress(value)) {\n        return returnType ? 'address' : '0x' + value.toLowerCase().replace(/^0x/i, '');\n    }\n    if (_.isBoolean(value)) {\n        return returnType ? 'bool' : value ? '0x01' : '0x00';\n    }\n    if (Buffer.isBuffer(value)) {\n        return '0x' + value.toString('hex');\n    }\n    if (_.isObject(value) && !isBigNumber(value) && !isBN(value)) {\n        return returnType ? 'string' : utf8ToHex(JSON.stringify(value));\n    }\n    // if its a negative number, pass it through numberToHex\n    if (_.isString(value)) {\n        if (value.indexOf('-0x') === 0 || value.indexOf('-0X') === 0) {\n            return returnType ? 'int256' : numberToHex(value);\n        }\n        else if (value.indexOf('0x') === 0 || value.indexOf('0X') === 0) {\n            return returnType ? 'bytes' : value;\n        }\n        else if (!isFinite(value)) {\n            return returnType ? 'string' : utf8ToHex(value);\n        }\n    }\n    return returnType ? (value < 0 ? 'int256' : 'uint256') : numberToHex(value);\n};\n/**\n * Check if string is HEX, requires a 0x in front\n *\n * @method isHexStrict\n * @param {String} hex to be checked\n * @returns {Boolean}\n */\nvar isHexStrict = function (hex) {\n    return ((_.isString(hex) || _.isNumber(hex)) && /^(-)?0x[0-9a-f]*$/i.test(hex));\n};\n/**\n * Check if string is HEX\n *\n * @method isHex\n * @param {String} hex to be checked\n * @returns {Boolean}\n */\nvar isHex = function (hex) {\n    return ((_.isString(hex) || _.isNumber(hex)) && /^(-0x|0x)?[0-9a-f]*$/i.test(hex));\n};\n/**\n * Remove 0x prefix from string\n *\n * @method stripHexPrefix\n * @param {String} str to be checked\n * @returns {String}\n */\nvar stripHexPrefix = function (str) {\n    if (str !== 0 && isHex(str))\n        return str.replace(/^(-)?0x/i, '$1');\n    return str;\n};\n/**\n * Returns true if given string is a valid Ethereum block header bloom.\n *\n * @method isBloom\n * @param {String} bloom encoded bloom filter\n * @return {Boolean}\n */\nvar isBloom = function (bloom) {\n    return ethereumBloomFilters.isBloom(bloom);\n};\n/**\n * Returns true if the ethereum users address is part of the given bloom\n * note: false positives are possible.\n *\n * @method isUserEthereumAddressInBloom\n * @param {String} ethereumAddress encoded bloom filter\n * @param {String} bloom ethereum addresss\n * @return {Boolean}\n */\nvar isUserEthereumAddressInBloom = function (bloom, ethereumAddress) {\n    return ethereumBloomFilters.isUserEthereumAddressInBloom(bloom, ethereumAddress);\n};\n/**\n * Returns true if the contract address is part of the given bloom\n * note: false positives are possible.\n *\n * @method isUserEthereumAddressInBloom\n * @param {String} bloom encoded bloom filter\n * @param {String} contractAddress contract addresss\n * @return {Boolean}\n */\nvar isContractAddressInBloom = function (bloom, contractAddress) {\n    return ethereumBloomFilters.isContractAddressInBloom(bloom, contractAddress);\n};\n/**\n * Returns true if given string is a valid log topic.\n *\n * @method isTopic\n * @param {String} topic encoded topic\n * @return {Boolean}\n */\nvar isTopic = function (topic) {\n    return ethereumBloomFilters.isTopic(topic);\n};\n/**\n * Returns true if the topic is part of the given bloom\n * note: false positives are possible.\n *\n * @method isTopicInBloom\n * @param {String} bloom encoded bloom filter\n * @param {String} topic encoded topic\n * @return {Boolean}\n */\nvar isTopicInBloom = function (bloom, topic) {\n    return ethereumBloomFilters.isTopicInBloom(bloom, topic);\n};\n/**\n * Returns true if the value is part of the given bloom\n * note: false positives are possible.\n *\n * @method isInBloom\n * @param {String} bloom encoded bloom filter\n * @param {String | Uint8Array} topic encoded value\n * @return {Boolean}\n */\nvar isInBloom = function (bloom, topic) {\n    return ethereumBloomFilters.isInBloom(bloom, topic);\n};\n/**\n * Hashes values to a sha3 hash using keccak 256\n *\n * To hash a HEX string the hex must have 0x in front.\n *\n * @method sha3\n * @return {String} the sha3 string\n */\nvar SHA3_NULL_S = '0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470';\nvar sha3 = function (value) {\n    if (isBN(value)) {\n        value = value.toString();\n    }\n    if (isHexStrict(value) && /^0x/i.test((value).toString())) {\n        value = hexToBytes(value);\n    }\n    var returnValue = Hash.keccak256(value); // jshint ignore:line\n    if (returnValue === SHA3_NULL_S) {\n        return null;\n    }\n    else {\n        return returnValue;\n    }\n};\n// expose the under the hood keccak256\nsha3._Hash = Hash;\n/**\n * @method sha3Raw\n *\n * @param value\n *\n * @returns {string}\n */\nvar sha3Raw = function (value) {\n    value = sha3(value);\n    if (value === null) {\n        return SHA3_NULL_S;\n    }\n    return value;\n};\nmodule.exports = {\n    BN: BN,\n    isBN: isBN,\n    isBigNumber: isBigNumber,\n    toBN: toBN,\n    isAddress: isAddress,\n    isBloom: isBloom,\n    isUserEthereumAddressInBloom: isUserEthereumAddressInBloom,\n    isContractAddressInBloom: isContractAddressInBloom,\n    isTopic: isTopic,\n    isTopicInBloom: isTopicInBloom,\n    isInBloom: isInBloom,\n    checkAddressChecksum: checkAddressChecksum,\n    utf8ToHex: utf8ToHex,\n    hexToUtf8: hexToUtf8,\n    hexToNumber: hexToNumber,\n    hexToNumberString: hexToNumberString,\n    numberToHex: numberToHex,\n    toHex: toHex,\n    hexToBytes: hexToBytes,\n    bytesToHex: bytesToHex,\n    isHex: isHex,\n    isHexStrict: isHexStrict,\n    stripHexPrefix: stripHexPrefix,\n    leftPad: leftPad,\n    rightPad: rightPad,\n    toTwosComplement: toTwosComplement,\n    sha3: sha3,\n    sha3Raw: sha3Raw\n};\n","import Stream from 'stream';\nimport http from 'http';\nimport Url from 'url';\nimport https from 'https';\nimport zlib from 'zlib';\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n\n// fix for \"Readable\" isn't a named export issue\nconst Readable = Stream.Readable;\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\t\tlet size = 0;\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tsize += buffer.length;\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\ttext() {\n\t\treturn Promise.resolve(this[BUFFER].toString());\n\t}\n\tarrayBuffer() {\n\t\tconst buf = this[BUFFER];\n\t\tconst ab = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\treturn Promise.resolve(ab);\n\t}\n\tstream() {\n\t\tconst readable = new Readable();\n\t\treadable._read = function () {};\n\t\treadable.push(this[BUFFER]);\n\t\treadable.push(null);\n\t\treturn readable;\n\t}\n\ttoString() {\n\t\treturn '[object Blob]';\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n// fix an issue where \"PassThrough\" isn't a named export for node <10\nconst PassThrough = Stream.PassThrough;\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\tbody = Buffer.from(body.toString());\n\t} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\tbody = Buffer.from(body);\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t} else if (body instanceof Stream) ; else {\n\t\t// none of the above\n\t\t// coerce to string then buffer\n\t\tbody = Buffer.from(String(body));\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\tconst error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t\t_this[INTERNALS].error = error;\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\tlet body = this.body;\n\n\t// body is null\n\tif (body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is blob\n\tif (isBlob(body)) {\n\t\tbody = body.stream();\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn Body.Promise.resolve(body);\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream errors\n\t\tbody.on('error', function (err) {\n\t\t\tif (err.name === 'AbortError') {\n\t\t\t\t// if the request was aborted, reject with this Error\n\t\t\t\tabort = true;\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\t// other errors, such as incorrect content-encoding\n\t\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\n\t\tbody.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\tbody.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum, accumBytes));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\t\tif (!res) {\n\t\t\tres = /<meta[\\s]+?content=(['\"])(.+?)\\1[\\s]+?http-equiv=(['\"])content-type\\3/i.exec(str);\n\t\t\tif (res) {\n\t\t\t\tres.pop(); // drop last quote\n\t\t\t}\n\t\t}\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Check if `obj` is a W3C `Blob` object (which `File` inherits from)\n * @param  {*} obj\n * @return {boolean}\n */\nfunction isBlob(obj) {\n\treturn typeof obj === 'object' && typeof obj.arrayBuffer === 'function' && typeof obj.type === 'string' && typeof obj.stream === 'function' && typeof obj.constructor === 'function' && typeof obj.constructor.name === 'string' && /^(Blob|File)$/.test(obj.constructor.name) && /^(Blob|File)$/.test(obj[Symbol.toStringTag]);\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Any options.body input\n */\nfunction extractContentType(body) {\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (isBlob(body)) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn null;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else if (body instanceof Stream) {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t} else {\n\t\t// Body constructor defaults other things to string\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (isBlob(body)) {\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (isBlob(body)) {\n\t\tbody.stream().pipe(dest);\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name) || name === '') {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) ; else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n// fix an issue where \"STATUS_CODES\" aren't a named export for node <10\nconst STATUS_CODES = http.STATUS_CODES;\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\t\tconst headers = new Headers(opts.headers);\n\n\t\tif (body != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders,\n\t\t\tcounter: opts.counter\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS$1].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tredirected: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nconst INTERNALS$2 = Symbol('Request internals');\n\n// fix an issue where \"format\", \"parse\" aren't a named export for node <10\nconst parse_url = Url.parse;\nconst format_url = Url.format;\n\nconst streamDestructionSupported = 'destroy' in Stream.Readable.prototype;\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\nfunction isAbortSignal(signal) {\n\tconst proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);\n\treturn !!(proto && proto.constructor.name === 'AbortSignal');\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parse_url(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parse_url(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parse_url(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ? input.signal : null;\n\t\tif ('signal' in init) signal = init.signal;\n\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal');\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS$2].signal;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true },\n\tsignal: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\tif (request.signal && request.body instanceof Stream.Readable && !streamDestructionSupported) {\n\t\tthrow new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\n\tlet agent = request.agent;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\tif (!headers.has('Connection') && !agent) {\n\t\theaders.set('Connection', 'close');\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent\n\t});\n}\n\n/**\n * abort-error.js\n *\n * AbortError interface for cancelled requests\n */\n\n/**\n * Create AbortError instance\n *\n * @param   String      message      Error message for human\n * @return  AbortError\n */\nfunction AbortError(message) {\n  Error.call(this, message);\n\n  this.type = 'aborted';\n  this.message = message;\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nAbortError.prototype = Object.create(Error.prototype);\nAbortError.prototype.constructor = AbortError;\nAbortError.prototype.name = 'AbortError';\n\n// fix an issue where \"PassThrough\", \"resolve\" aren't a named export for node <10\nconst PassThrough$1 = Stream.PassThrough;\nconst resolve_url = Url.resolve;\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\t\tconst signal = request.signal;\n\n\t\tlet response = null;\n\n\t\tconst abort = function abort() {\n\t\t\tlet error = new AbortError('The user aborted a request.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\trequest.body.destroy(error);\n\t\t\t}\n\t\t\tif (!response || !response.body) return;\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = function abortAndFinalize() {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\t\t\tfinalize();\n\t\t});\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tconst locationURL = location === null ? null : resolve_url(request.url, location);\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\t// handle corrupted header\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body,\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\ttimeout: request.timeout,\n\t\t\t\t\t\t\tsize: request.size\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tres.once('end', function () {\n\t\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\t});\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout,\n\t\t\t\tcounter: request.counter\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for br\n\t\t\tif (codings == 'br' && typeof zlib.createBrotliDecompress === 'function') {\n\t\t\t\tbody = body.pipe(zlib.createBrotliDecompress());\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresponse = new Response(body, response_options);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nexport default fetch;\nexport { Headers, Request, Response, FetchError };\n","/* MIT license */\n/* eslint-disable no-mixed-operators */\nconst cssKeywords = require('color-name');\n\n// NOTE: conversions should only return primitive values (i.e. arrays, or\n//       values that give correct `typeof` results).\n//       do not use box values types (i.e. Number(), String(), etc.)\n\nconst reverseKeywords = {};\nfor (const key of Object.keys(cssKeywords)) {\n\treverseKeywords[cssKeywords[key]] = key;\n}\n\nconst convert = {\n\trgb: {channels: 3, labels: 'rgb'},\n\thsl: {channels: 3, labels: 'hsl'},\n\thsv: {channels: 3, labels: 'hsv'},\n\thwb: {channels: 3, labels: 'hwb'},\n\tcmyk: {channels: 4, labels: 'cmyk'},\n\txyz: {channels: 3, labels: 'xyz'},\n\tlab: {channels: 3, labels: 'lab'},\n\tlch: {channels: 3, labels: 'lch'},\n\thex: {channels: 1, labels: ['hex']},\n\tkeyword: {channels: 1, labels: ['keyword']},\n\tansi16: {channels: 1, labels: ['ansi16']},\n\tansi256: {channels: 1, labels: ['ansi256']},\n\thcg: {channels: 3, labels: ['h', 'c', 'g']},\n\tapple: {channels: 3, labels: ['r16', 'g16', 'b16']},\n\tgray: {channels: 1, labels: ['gray']}\n};\n\nmodule.exports = convert;\n\n// Hide .channels and .labels properties\nfor (const model of Object.keys(convert)) {\n\tif (!('channels' in convert[model])) {\n\t\tthrow new Error('missing channels property: ' + model);\n\t}\n\n\tif (!('labels' in convert[model])) {\n\t\tthrow new Error('missing channel labels property: ' + model);\n\t}\n\n\tif (convert[model].labels.length !== convert[model].channels) {\n\t\tthrow new Error('channel and label counts mismatch: ' + model);\n\t}\n\n\tconst {channels, labels} = convert[model];\n\tdelete convert[model].channels;\n\tdelete convert[model].labels;\n\tObject.defineProperty(convert[model], 'channels', {value: channels});\n\tObject.defineProperty(convert[model], 'labels', {value: labels});\n}\n\nconvert.rgb.hsl = function (rgb) {\n\tconst r = rgb[0] / 255;\n\tconst g = rgb[1] / 255;\n\tconst b = rgb[2] / 255;\n\tconst min = Math.min(r, g, b);\n\tconst max = Math.max(r, g, b);\n\tconst delta = max - min;\n\tlet h;\n\tlet s;\n\n\tif (max === min) {\n\t\th = 0;\n\t} else if (r === max) {\n\t\th = (g - b) / delta;\n\t} else if (g === max) {\n\t\th = 2 + (b - r) / delta;\n\t} else if (b === max) {\n\t\th = 4 + (r - g) / delta;\n\t}\n\n\th = Math.min(h * 60, 360);\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tconst l = (min + max) / 2;\n\n\tif (max === min) {\n\t\ts = 0;\n\t} else if (l <= 0.5) {\n\t\ts = delta / (max + min);\n\t} else {\n\t\ts = delta / (2 - max - min);\n\t}\n\n\treturn [h, s * 100, l * 100];\n};\n\nconvert.rgb.hsv = function (rgb) {\n\tlet rdif;\n\tlet gdif;\n\tlet bdif;\n\tlet h;\n\tlet s;\n\n\tconst r = rgb[0] / 255;\n\tconst g = rgb[1] / 255;\n\tconst b = rgb[2] / 255;\n\tconst v = Math.max(r, g, b);\n\tconst diff = v - Math.min(r, g, b);\n\tconst diffc = function (c) {\n\t\treturn (v - c) / 6 / diff + 1 / 2;\n\t};\n\n\tif (diff === 0) {\n\t\th = 0;\n\t\ts = 0;\n\t} else {\n\t\ts = diff / v;\n\t\trdif = diffc(r);\n\t\tgdif = diffc(g);\n\t\tbdif = diffc(b);\n\n\t\tif (r === v) {\n\t\t\th = bdif - gdif;\n\t\t} else if (g === v) {\n\t\t\th = (1 / 3) + rdif - bdif;\n\t\t} else if (b === v) {\n\t\t\th = (2 / 3) + gdif - rdif;\n\t\t}\n\n\t\tif (h < 0) {\n\t\t\th += 1;\n\t\t} else if (h > 1) {\n\t\t\th -= 1;\n\t\t}\n\t}\n\n\treturn [\n\t\th * 360,\n\t\ts * 100,\n\t\tv * 100\n\t];\n};\n\nconvert.rgb.hwb = function (rgb) {\n\tconst r = rgb[0];\n\tconst g = rgb[1];\n\tlet b = rgb[2];\n\tconst h = convert.rgb.hsl(rgb)[0];\n\tconst w = 1 / 255 * Math.min(r, Math.min(g, b));\n\n\tb = 1 - 1 / 255 * Math.max(r, Math.max(g, b));\n\n\treturn [h, w * 100, b * 100];\n};\n\nconvert.rgb.cmyk = function (rgb) {\n\tconst r = rgb[0] / 255;\n\tconst g = rgb[1] / 255;\n\tconst b = rgb[2] / 255;\n\n\tconst k = Math.min(1 - r, 1 - g, 1 - b);\n\tconst c = (1 - r - k) / (1 - k) || 0;\n\tconst m = (1 - g - k) / (1 - k) || 0;\n\tconst y = (1 - b - k) / (1 - k) || 0;\n\n\treturn [c * 100, m * 100, y * 100, k * 100];\n};\n\nfunction comparativeDistance(x, y) {\n\t/*\n\t\tSee https://en.m.wikipedia.org/wiki/Euclidean_distance#Squared_Euclidean_distance\n\t*/\n\treturn (\n\t\t((x[0] - y[0]) ** 2) +\n\t\t((x[1] - y[1]) ** 2) +\n\t\t((x[2] - y[2]) ** 2)\n\t);\n}\n\nconvert.rgb.keyword = function (rgb) {\n\tconst reversed = reverseKeywords[rgb];\n\tif (reversed) {\n\t\treturn reversed;\n\t}\n\n\tlet currentClosestDistance = Infinity;\n\tlet currentClosestKeyword;\n\n\tfor (const keyword of Object.keys(cssKeywords)) {\n\t\tconst value = cssKeywords[keyword];\n\n\t\t// Compute comparative distance\n\t\tconst distance = comparativeDistance(rgb, value);\n\n\t\t// Check if its less, if so set as closest\n\t\tif (distance < currentClosestDistance) {\n\t\t\tcurrentClosestDistance = distance;\n\t\t\tcurrentClosestKeyword = keyword;\n\t\t}\n\t}\n\n\treturn currentClosestKeyword;\n};\n\nconvert.keyword.rgb = function (keyword) {\n\treturn cssKeywords[keyword];\n};\n\nconvert.rgb.xyz = function (rgb) {\n\tlet r = rgb[0] / 255;\n\tlet g = rgb[1] / 255;\n\tlet b = rgb[2] / 255;\n\n\t// Assume sRGB\n\tr = r > 0.04045 ? (((r + 0.055) / 1.055) ** 2.4) : (r / 12.92);\n\tg = g > 0.04045 ? (((g + 0.055) / 1.055) ** 2.4) : (g / 12.92);\n\tb = b > 0.04045 ? (((b + 0.055) / 1.055) ** 2.4) : (b / 12.92);\n\n\tconst x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);\n\tconst y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);\n\tconst z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);\n\n\treturn [x * 100, y * 100, z * 100];\n};\n\nconvert.rgb.lab = function (rgb) {\n\tconst xyz = convert.rgb.xyz(rgb);\n\tlet x = xyz[0];\n\tlet y = xyz[1];\n\tlet z = xyz[2];\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? (x ** (1 / 3)) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? (y ** (1 / 3)) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? (z ** (1 / 3)) : (7.787 * z) + (16 / 116);\n\n\tconst l = (116 * y) - 16;\n\tconst a = 500 * (x - y);\n\tconst b = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.hsl.rgb = function (hsl) {\n\tconst h = hsl[0] / 360;\n\tconst s = hsl[1] / 100;\n\tconst l = hsl[2] / 100;\n\tlet t2;\n\tlet t3;\n\tlet val;\n\n\tif (s === 0) {\n\t\tval = l * 255;\n\t\treturn [val, val, val];\n\t}\n\n\tif (l < 0.5) {\n\t\tt2 = l * (1 + s);\n\t} else {\n\t\tt2 = l + s - l * s;\n\t}\n\n\tconst t1 = 2 * l - t2;\n\n\tconst rgb = [0, 0, 0];\n\tfor (let i = 0; i < 3; i++) {\n\t\tt3 = h + 1 / 3 * -(i - 1);\n\t\tif (t3 < 0) {\n\t\t\tt3++;\n\t\t}\n\n\t\tif (t3 > 1) {\n\t\t\tt3--;\n\t\t}\n\n\t\tif (6 * t3 < 1) {\n\t\t\tval = t1 + (t2 - t1) * 6 * t3;\n\t\t} else if (2 * t3 < 1) {\n\t\t\tval = t2;\n\t\t} else if (3 * t3 < 2) {\n\t\t\tval = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n\t\t} else {\n\t\t\tval = t1;\n\t\t}\n\n\t\trgb[i] = val * 255;\n\t}\n\n\treturn rgb;\n};\n\nconvert.hsl.hsv = function (hsl) {\n\tconst h = hsl[0];\n\tlet s = hsl[1] / 100;\n\tlet l = hsl[2] / 100;\n\tlet smin = s;\n\tconst lmin = Math.max(l, 0.01);\n\n\tl *= 2;\n\ts *= (l <= 1) ? l : 2 - l;\n\tsmin *= lmin <= 1 ? lmin : 2 - lmin;\n\tconst v = (l + s) / 2;\n\tconst sv = l === 0 ? (2 * smin) / (lmin + smin) : (2 * s) / (l + s);\n\n\treturn [h, sv * 100, v * 100];\n};\n\nconvert.hsv.rgb = function (hsv) {\n\tconst h = hsv[0] / 60;\n\tconst s = hsv[1] / 100;\n\tlet v = hsv[2] / 100;\n\tconst hi = Math.floor(h) % 6;\n\n\tconst f = h - Math.floor(h);\n\tconst p = 255 * v * (1 - s);\n\tconst q = 255 * v * (1 - (s * f));\n\tconst t = 255 * v * (1 - (s * (1 - f)));\n\tv *= 255;\n\n\tswitch (hi) {\n\t\tcase 0:\n\t\t\treturn [v, t, p];\n\t\tcase 1:\n\t\t\treturn [q, v, p];\n\t\tcase 2:\n\t\t\treturn [p, v, t];\n\t\tcase 3:\n\t\t\treturn [p, q, v];\n\t\tcase 4:\n\t\t\treturn [t, p, v];\n\t\tcase 5:\n\t\t\treturn [v, p, q];\n\t}\n};\n\nconvert.hsv.hsl = function (hsv) {\n\tconst h = hsv[0];\n\tconst s = hsv[1] / 100;\n\tconst v = hsv[2] / 100;\n\tconst vmin = Math.max(v, 0.01);\n\tlet sl;\n\tlet l;\n\n\tl = (2 - s) * v;\n\tconst lmin = (2 - s) * vmin;\n\tsl = s * vmin;\n\tsl /= (lmin <= 1) ? lmin : 2 - lmin;\n\tsl = sl || 0;\n\tl /= 2;\n\n\treturn [h, sl * 100, l * 100];\n};\n\n// http://dev.w3.org/csswg/css-color/#hwb-to-rgb\nconvert.hwb.rgb = function (hwb) {\n\tconst h = hwb[0] / 360;\n\tlet wh = hwb[1] / 100;\n\tlet bl = hwb[2] / 100;\n\tconst ratio = wh + bl;\n\tlet f;\n\n\t// Wh + bl cant be > 1\n\tif (ratio > 1) {\n\t\twh /= ratio;\n\t\tbl /= ratio;\n\t}\n\n\tconst i = Math.floor(6 * h);\n\tconst v = 1 - bl;\n\tf = 6 * h - i;\n\n\tif ((i & 0x01) !== 0) {\n\t\tf = 1 - f;\n\t}\n\n\tconst n = wh + f * (v - wh); // Linear interpolation\n\n\tlet r;\n\tlet g;\n\tlet b;\n\t/* eslint-disable max-statements-per-line,no-multi-spaces */\n\tswitch (i) {\n\t\tdefault:\n\t\tcase 6:\n\t\tcase 0: r = v;  g = n;  b = wh; break;\n\t\tcase 1: r = n;  g = v;  b = wh; break;\n\t\tcase 2: r = wh; g = v;  b = n; break;\n\t\tcase 3: r = wh; g = n;  b = v; break;\n\t\tcase 4: r = n;  g = wh; b = v; break;\n\t\tcase 5: r = v;  g = wh; b = n; break;\n\t}\n\t/* eslint-enable max-statements-per-line,no-multi-spaces */\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.cmyk.rgb = function (cmyk) {\n\tconst c = cmyk[0] / 100;\n\tconst m = cmyk[1] / 100;\n\tconst y = cmyk[2] / 100;\n\tconst k = cmyk[3] / 100;\n\n\tconst r = 1 - Math.min(1, c * (1 - k) + k);\n\tconst g = 1 - Math.min(1, m * (1 - k) + k);\n\tconst b = 1 - Math.min(1, y * (1 - k) + k);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.rgb = function (xyz) {\n\tconst x = xyz[0] / 100;\n\tconst y = xyz[1] / 100;\n\tconst z = xyz[2] / 100;\n\tlet r;\n\tlet g;\n\tlet b;\n\n\tr = (x * 3.2406) + (y * -1.5372) + (z * -0.4986);\n\tg = (x * -0.9689) + (y * 1.8758) + (z * 0.0415);\n\tb = (x * 0.0557) + (y * -0.2040) + (z * 1.0570);\n\n\t// Assume sRGB\n\tr = r > 0.0031308\n\t\t? ((1.055 * (r ** (1.0 / 2.4))) - 0.055)\n\t\t: r * 12.92;\n\n\tg = g > 0.0031308\n\t\t? ((1.055 * (g ** (1.0 / 2.4))) - 0.055)\n\t\t: g * 12.92;\n\n\tb = b > 0.0031308\n\t\t? ((1.055 * (b ** (1.0 / 2.4))) - 0.055)\n\t\t: b * 12.92;\n\n\tr = Math.min(Math.max(0, r), 1);\n\tg = Math.min(Math.max(0, g), 1);\n\tb = Math.min(Math.max(0, b), 1);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.lab = function (xyz) {\n\tlet x = xyz[0];\n\tlet y = xyz[1];\n\tlet z = xyz[2];\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? (x ** (1 / 3)) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? (y ** (1 / 3)) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? (z ** (1 / 3)) : (7.787 * z) + (16 / 116);\n\n\tconst l = (116 * y) - 16;\n\tconst a = 500 * (x - y);\n\tconst b = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.lab.xyz = function (lab) {\n\tconst l = lab[0];\n\tconst a = lab[1];\n\tconst b = lab[2];\n\tlet x;\n\tlet y;\n\tlet z;\n\n\ty = (l + 16) / 116;\n\tx = a / 500 + y;\n\tz = y - b / 200;\n\n\tconst y2 = y ** 3;\n\tconst x2 = x ** 3;\n\tconst z2 = z ** 3;\n\ty = y2 > 0.008856 ? y2 : (y - 16 / 116) / 7.787;\n\tx = x2 > 0.008856 ? x2 : (x - 16 / 116) / 7.787;\n\tz = z2 > 0.008856 ? z2 : (z - 16 / 116) / 7.787;\n\n\tx *= 95.047;\n\ty *= 100;\n\tz *= 108.883;\n\n\treturn [x, y, z];\n};\n\nconvert.lab.lch = function (lab) {\n\tconst l = lab[0];\n\tconst a = lab[1];\n\tconst b = lab[2];\n\tlet h;\n\n\tconst hr = Math.atan2(b, a);\n\th = hr * 360 / 2 / Math.PI;\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tconst c = Math.sqrt(a * a + b * b);\n\n\treturn [l, c, h];\n};\n\nconvert.lch.lab = function (lch) {\n\tconst l = lch[0];\n\tconst c = lch[1];\n\tconst h = lch[2];\n\n\tconst hr = h / 360 * 2 * Math.PI;\n\tconst a = c * Math.cos(hr);\n\tconst b = c * Math.sin(hr);\n\n\treturn [l, a, b];\n};\n\nconvert.rgb.ansi16 = function (args, saturation = null) {\n\tconst [r, g, b] = args;\n\tlet value = saturation === null ? convert.rgb.hsv(args)[2] : saturation; // Hsv -> ansi16 optimization\n\n\tvalue = Math.round(value / 50);\n\n\tif (value === 0) {\n\t\treturn 30;\n\t}\n\n\tlet ansi = 30\n\t\t+ ((Math.round(b / 255) << 2)\n\t\t| (Math.round(g / 255) << 1)\n\t\t| Math.round(r / 255));\n\n\tif (value === 2) {\n\t\tansi += 60;\n\t}\n\n\treturn ansi;\n};\n\nconvert.hsv.ansi16 = function (args) {\n\t// Optimization here; we already know the value and don't need to get\n\t// it converted for us.\n\treturn convert.rgb.ansi16(convert.hsv.rgb(args), args[2]);\n};\n\nconvert.rgb.ansi256 = function (args) {\n\tconst r = args[0];\n\tconst g = args[1];\n\tconst b = args[2];\n\n\t// We use the extended greyscale palette here, with the exception of\n\t// black and white. normal palette only has 4 greyscale shades.\n\tif (r === g && g === b) {\n\t\tif (r < 8) {\n\t\t\treturn 16;\n\t\t}\n\n\t\tif (r > 248) {\n\t\t\treturn 231;\n\t\t}\n\n\t\treturn Math.round(((r - 8) / 247) * 24) + 232;\n\t}\n\n\tconst ansi = 16\n\t\t+ (36 * Math.round(r / 255 * 5))\n\t\t+ (6 * Math.round(g / 255 * 5))\n\t\t+ Math.round(b / 255 * 5);\n\n\treturn ansi;\n};\n\nconvert.ansi16.rgb = function (args) {\n\tlet color = args % 10;\n\n\t// Handle greyscale\n\tif (color === 0 || color === 7) {\n\t\tif (args > 50) {\n\t\t\tcolor += 3.5;\n\t\t}\n\n\t\tcolor = color / 10.5 * 255;\n\n\t\treturn [color, color, color];\n\t}\n\n\tconst mult = (~~(args > 50) + 1) * 0.5;\n\tconst r = ((color & 1) * mult) * 255;\n\tconst g = (((color >> 1) & 1) * mult) * 255;\n\tconst b = (((color >> 2) & 1) * mult) * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.ansi256.rgb = function (args) {\n\t// Handle greyscale\n\tif (args >= 232) {\n\t\tconst c = (args - 232) * 10 + 8;\n\t\treturn [c, c, c];\n\t}\n\n\targs -= 16;\n\n\tlet rem;\n\tconst r = Math.floor(args / 36) / 5 * 255;\n\tconst g = Math.floor((rem = args % 36) / 6) / 5 * 255;\n\tconst b = (rem % 6) / 5 * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hex = function (args) {\n\tconst integer = ((Math.round(args[0]) & 0xFF) << 16)\n\t\t+ ((Math.round(args[1]) & 0xFF) << 8)\n\t\t+ (Math.round(args[2]) & 0xFF);\n\n\tconst string = integer.toString(16).toUpperCase();\n\treturn '000000'.substring(string.length) + string;\n};\n\nconvert.hex.rgb = function (args) {\n\tconst match = args.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);\n\tif (!match) {\n\t\treturn [0, 0, 0];\n\t}\n\n\tlet colorString = match[0];\n\n\tif (match[0].length === 3) {\n\t\tcolorString = colorString.split('').map(char => {\n\t\t\treturn char + char;\n\t\t}).join('');\n\t}\n\n\tconst integer = parseInt(colorString, 16);\n\tconst r = (integer >> 16) & 0xFF;\n\tconst g = (integer >> 8) & 0xFF;\n\tconst b = integer & 0xFF;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hcg = function (rgb) {\n\tconst r = rgb[0] / 255;\n\tconst g = rgb[1] / 255;\n\tconst b = rgb[2] / 255;\n\tconst max = Math.max(Math.max(r, g), b);\n\tconst min = Math.min(Math.min(r, g), b);\n\tconst chroma = (max - min);\n\tlet grayscale;\n\tlet hue;\n\n\tif (chroma < 1) {\n\t\tgrayscale = min / (1 - chroma);\n\t} else {\n\t\tgrayscale = 0;\n\t}\n\n\tif (chroma <= 0) {\n\t\thue = 0;\n\t} else\n\tif (max === r) {\n\t\thue = ((g - b) / chroma) % 6;\n\t} else\n\tif (max === g) {\n\t\thue = 2 + (b - r) / chroma;\n\t} else {\n\t\thue = 4 + (r - g) / chroma;\n\t}\n\n\thue /= 6;\n\thue %= 1;\n\n\treturn [hue * 360, chroma * 100, grayscale * 100];\n};\n\nconvert.hsl.hcg = function (hsl) {\n\tconst s = hsl[1] / 100;\n\tconst l = hsl[2] / 100;\n\n\tconst c = l < 0.5 ? (2.0 * s * l) : (2.0 * s * (1.0 - l));\n\n\tlet f = 0;\n\tif (c < 1.0) {\n\t\tf = (l - 0.5 * c) / (1.0 - c);\n\t}\n\n\treturn [hsl[0], c * 100, f * 100];\n};\n\nconvert.hsv.hcg = function (hsv) {\n\tconst s = hsv[1] / 100;\n\tconst v = hsv[2] / 100;\n\n\tconst c = s * v;\n\tlet f = 0;\n\n\tif (c < 1.0) {\n\t\tf = (v - c) / (1 - c);\n\t}\n\n\treturn [hsv[0], c * 100, f * 100];\n};\n\nconvert.hcg.rgb = function (hcg) {\n\tconst h = hcg[0] / 360;\n\tconst c = hcg[1] / 100;\n\tconst g = hcg[2] / 100;\n\n\tif (c === 0.0) {\n\t\treturn [g * 255, g * 255, g * 255];\n\t}\n\n\tconst pure = [0, 0, 0];\n\tconst hi = (h % 1) * 6;\n\tconst v = hi % 1;\n\tconst w = 1 - v;\n\tlet mg = 0;\n\n\t/* eslint-disable max-statements-per-line */\n\tswitch (Math.floor(hi)) {\n\t\tcase 0:\n\t\t\tpure[0] = 1; pure[1] = v; pure[2] = 0; break;\n\t\tcase 1:\n\t\t\tpure[0] = w; pure[1] = 1; pure[2] = 0; break;\n\t\tcase 2:\n\t\t\tpure[0] = 0; pure[1] = 1; pure[2] = v; break;\n\t\tcase 3:\n\t\t\tpure[0] = 0; pure[1] = w; pure[2] = 1; break;\n\t\tcase 4:\n\t\t\tpure[0] = v; pure[1] = 0; pure[2] = 1; break;\n\t\tdefault:\n\t\t\tpure[0] = 1; pure[1] = 0; pure[2] = w;\n\t}\n\t/* eslint-enable max-statements-per-line */\n\n\tmg = (1.0 - c) * g;\n\n\treturn [\n\t\t(c * pure[0] + mg) * 255,\n\t\t(c * pure[1] + mg) * 255,\n\t\t(c * pure[2] + mg) * 255\n\t];\n};\n\nconvert.hcg.hsv = function (hcg) {\n\tconst c = hcg[1] / 100;\n\tconst g = hcg[2] / 100;\n\n\tconst v = c + g * (1.0 - c);\n\tlet f = 0;\n\n\tif (v > 0.0) {\n\t\tf = c / v;\n\t}\n\n\treturn [hcg[0], f * 100, v * 100];\n};\n\nconvert.hcg.hsl = function (hcg) {\n\tconst c = hcg[1] / 100;\n\tconst g = hcg[2] / 100;\n\n\tconst l = g * (1.0 - c) + 0.5 * c;\n\tlet s = 0;\n\n\tif (l > 0.0 && l < 0.5) {\n\t\ts = c / (2 * l);\n\t} else\n\tif (l >= 0.5 && l < 1.0) {\n\t\ts = c / (2 * (1 - l));\n\t}\n\n\treturn [hcg[0], s * 100, l * 100];\n};\n\nconvert.hcg.hwb = function (hcg) {\n\tconst c = hcg[1] / 100;\n\tconst g = hcg[2] / 100;\n\tconst v = c + g * (1.0 - c);\n\treturn [hcg[0], (v - c) * 100, (1 - v) * 100];\n};\n\nconvert.hwb.hcg = function (hwb) {\n\tconst w = hwb[1] / 100;\n\tconst b = hwb[2] / 100;\n\tconst v = 1 - b;\n\tconst c = v - w;\n\tlet g = 0;\n\n\tif (c < 1) {\n\t\tg = (v - c) / (1 - c);\n\t}\n\n\treturn [hwb[0], c * 100, g * 100];\n};\n\nconvert.apple.rgb = function (apple) {\n\treturn [(apple[0] / 65535) * 255, (apple[1] / 65535) * 255, (apple[2] / 65535) * 255];\n};\n\nconvert.rgb.apple = function (rgb) {\n\treturn [(rgb[0] / 255) * 65535, (rgb[1] / 255) * 65535, (rgb[2] / 255) * 65535];\n};\n\nconvert.gray.rgb = function (args) {\n\treturn [args[0] / 100 * 255, args[0] / 100 * 255, args[0] / 100 * 255];\n};\n\nconvert.gray.hsl = function (args) {\n\treturn [0, 0, args[0]];\n};\n\nconvert.gray.hsv = convert.gray.hsl;\n\nconvert.gray.hwb = function (gray) {\n\treturn [0, 100, gray[0]];\n};\n\nconvert.gray.cmyk = function (gray) {\n\treturn [0, 0, 0, gray[0]];\n};\n\nconvert.gray.lab = function (gray) {\n\treturn [gray[0], 0, 0];\n};\n\nconvert.gray.hex = function (gray) {\n\tconst val = Math.round(gray[0] / 100 * 255) & 0xFF;\n\tconst integer = (val << 16) + (val << 8) + val;\n\n\tconst string = integer.toString(16).toUpperCase();\n\treturn '000000'.substring(string.length) + string;\n};\n\nconvert.rgb.gray = function (rgb) {\n\tconst val = (rgb[0] + rgb[1] + rgb[2]) / 3;\n\treturn [val / 255 * 100];\n};\n","module.exports = require(\"assert\");","'use strict'\n\nmodule.exports = {\n  copySync: require('./copy-sync')\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\n\nfunction utimesMillis (path, atime, mtime, callback) {\n  // if (!HAS_MILLIS_RES) return fs.utimes(path, atime, mtime, callback)\n  fs.open(path, 'r+', (err, fd) => {\n    if (err) return callback(err)\n    fs.futimes(fd, atime, mtime, futimesErr => {\n      fs.close(fd, closeErr => {\n        if (callback) callback(futimesErr || closeErr)\n      })\n    })\n  })\n}\n\nfunction utimesMillisSync (path, atime, mtime) {\n  const fd = fs.openSync(path, 'r+')\n  fs.futimesSync(fd, atime, mtime)\n  return fs.closeSync(fd)\n}\n\nmodule.exports = {\n  utimesMillis,\n  utimesMillisSync\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nmodule.exports = {\n  copy: u(require('./copy'))\n}\n","var encode = require(\"./lib/encode.js\"),\n    decode = require(\"./lib/decode.js\");\n\nexports.decode = function(data, level) {\n    return (!level || level <= 0 ? decode.XML : decode.HTML)(data);\n};\n\nexports.decodeStrict = function(data, level) {\n    return (!level || level <= 0 ? decode.XML : decode.HTMLStrict)(data);\n};\n\nexports.encode = function(data, level) {\n    return (!level || level <= 0 ? encode.XML : encode.HTML)(data);\n};\n\nexports.encodeXML = encode.XML;\n\nexports.encodeHTML4 = exports.encodeHTML5 = exports.encodeHTML = encode.HTML;\n\nexports.decodeXML = exports.decodeXMLStrict = decode.XML;\n\nexports.decodeHTML4 = exports.decodeHTML5 = exports.decodeHTML = decode.HTML;\n\nexports.decodeHTML4Strict = exports.decodeHTML5Strict = exports.decodeHTMLStrict = decode.HTMLStrict;\n\nexports.escape = encode.escape;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Parser = void 0;\nvar Tokenizer_1 = __importDefault(require(\"./Tokenizer\"));\nvar formTags = new Set([\n    \"input\",\n    \"option\",\n    \"optgroup\",\n    \"select\",\n    \"button\",\n    \"datalist\",\n    \"textarea\",\n]);\nvar pTag = new Set([\"p\"]);\nvar openImpliesClose = {\n    tr: new Set([\"tr\", \"th\", \"td\"]),\n    th: new Set([\"th\"]),\n    td: new Set([\"thead\", \"th\", \"td\"]),\n    body: new Set([\"head\", \"link\", \"script\"]),\n    li: new Set([\"li\"]),\n    p: pTag,\n    h1: pTag,\n    h2: pTag,\n    h3: pTag,\n    h4: pTag,\n    h5: pTag,\n    h6: pTag,\n    select: formTags,\n    input: formTags,\n    output: formTags,\n    button: formTags,\n    datalist: formTags,\n    textarea: formTags,\n    option: new Set([\"option\"]),\n    optgroup: new Set([\"optgroup\", \"option\"]),\n    dd: new Set([\"dt\", \"dd\"]),\n    dt: new Set([\"dt\", \"dd\"]),\n    address: pTag,\n    article: pTag,\n    aside: pTag,\n    blockquote: pTag,\n    details: pTag,\n    div: pTag,\n    dl: pTag,\n    fieldset: pTag,\n    figcaption: pTag,\n    figure: pTag,\n    footer: pTag,\n    form: pTag,\n    header: pTag,\n    hr: pTag,\n    main: pTag,\n    nav: pTag,\n    ol: pTag,\n    pre: pTag,\n    section: pTag,\n    table: pTag,\n    ul: pTag,\n    rt: new Set([\"rt\", \"rp\"]),\n    rp: new Set([\"rt\", \"rp\"]),\n    tbody: new Set([\"thead\", \"tbody\"]),\n    tfoot: new Set([\"thead\", \"tbody\"]),\n};\nvar voidElements = new Set([\n    \"area\",\n    \"base\",\n    \"basefont\",\n    \"br\",\n    \"col\",\n    \"command\",\n    \"embed\",\n    \"frame\",\n    \"hr\",\n    \"img\",\n    \"input\",\n    \"isindex\",\n    \"keygen\",\n    \"link\",\n    \"meta\",\n    \"param\",\n    \"source\",\n    \"track\",\n    \"wbr\",\n]);\nvar foreignContextElements = new Set([\"math\", \"svg\"]);\nvar htmlIntegrationElements = new Set([\n    \"mi\",\n    \"mo\",\n    \"mn\",\n    \"ms\",\n    \"mtext\",\n    \"annotation-xml\",\n    \"foreignObject\",\n    \"desc\",\n    \"title\",\n]);\nvar reNameEnd = /\\s|\\//;\nvar Parser = /** @class */ (function () {\n    function Parser(cbs, options) {\n        if (options === void 0) { options = {}; }\n        var _a, _b, _c, _d, _e;\n        /** The start index of the last event. */\n        this.startIndex = 0;\n        /** The end index of the last event. */\n        this.endIndex = null;\n        this.tagname = \"\";\n        this.attribname = \"\";\n        this.attribvalue = \"\";\n        this.attribs = null;\n        this.stack = [];\n        this.foreignContext = [];\n        this.options = options;\n        this.cbs = cbs !== null && cbs !== void 0 ? cbs : {};\n        this.lowerCaseTagNames = (_a = options.lowerCaseTags) !== null && _a !== void 0 ? _a : !options.xmlMode;\n        this.lowerCaseAttributeNames =\n            (_b = options.lowerCaseAttributeNames) !== null && _b !== void 0 ? _b : !options.xmlMode;\n        this.tokenizer = new ((_c = options.Tokenizer) !== null && _c !== void 0 ? _c : Tokenizer_1.default)(this.options, this);\n        (_e = (_d = this.cbs).onparserinit) === null || _e === void 0 ? void 0 : _e.call(_d, this);\n    }\n    Parser.prototype.updatePosition = function (initialOffset) {\n        if (this.endIndex === null) {\n            if (this.tokenizer.sectionStart <= initialOffset) {\n                this.startIndex = 0;\n            }\n            else {\n                this.startIndex = this.tokenizer.sectionStart - initialOffset;\n            }\n        }\n        else {\n            this.startIndex = this.endIndex + 1;\n        }\n        this.endIndex = this.tokenizer.getAbsoluteIndex();\n    };\n    // Tokenizer event handlers\n    Parser.prototype.ontext = function (data) {\n        var _a, _b;\n        this.updatePosition(1);\n        this.endIndex--;\n        (_b = (_a = this.cbs).ontext) === null || _b === void 0 ? void 0 : _b.call(_a, data);\n    };\n    Parser.prototype.onopentagname = function (name) {\n        var _a, _b;\n        if (this.lowerCaseTagNames) {\n            name = name.toLowerCase();\n        }\n        this.tagname = name;\n        if (!this.options.xmlMode &&\n            Object.prototype.hasOwnProperty.call(openImpliesClose, name)) {\n            var el = void 0;\n            while (this.stack.length > 0 &&\n                openImpliesClose[name].has((el = this.stack[this.stack.length - 1]))) {\n                this.onclosetag(el);\n            }\n        }\n        if (this.options.xmlMode || !voidElements.has(name)) {\n            this.stack.push(name);\n            if (foreignContextElements.has(name)) {\n                this.foreignContext.push(true);\n            }\n            else if (htmlIntegrationElements.has(name)) {\n                this.foreignContext.push(false);\n            }\n        }\n        (_b = (_a = this.cbs).onopentagname) === null || _b === void 0 ? void 0 : _b.call(_a, name);\n        if (this.cbs.onopentag)\n            this.attribs = {};\n    };\n    Parser.prototype.onopentagend = function () {\n        var _a, _b;\n        this.updatePosition(1);\n        if (this.attribs) {\n            (_b = (_a = this.cbs).onopentag) === null || _b === void 0 ? void 0 : _b.call(_a, this.tagname, this.attribs);\n            this.attribs = null;\n        }\n        if (!this.options.xmlMode &&\n            this.cbs.onclosetag &&\n            voidElements.has(this.tagname)) {\n            this.cbs.onclosetag(this.tagname);\n        }\n        this.tagname = \"\";\n    };\n    Parser.prototype.onclosetag = function (name) {\n        this.updatePosition(1);\n        if (this.lowerCaseTagNames) {\n            name = name.toLowerCase();\n        }\n        if (foreignContextElements.has(name) ||\n            htmlIntegrationElements.has(name)) {\n            this.foreignContext.pop();\n        }\n        if (this.stack.length &&\n            (this.options.xmlMode || !voidElements.has(name))) {\n            var pos = this.stack.lastIndexOf(name);\n            if (pos !== -1) {\n                if (this.cbs.onclosetag) {\n                    pos = this.stack.length - pos;\n                    while (pos--) {\n                        // We know the stack has sufficient elements.\n                        this.cbs.onclosetag(this.stack.pop());\n                    }\n                }\n                else\n                    this.stack.length = pos;\n            }\n            else if (name === \"p\" && !this.options.xmlMode) {\n                this.onopentagname(name);\n                this.closeCurrentTag();\n            }\n        }\n        else if (!this.options.xmlMode && (name === \"br\" || name === \"p\")) {\n            this.onopentagname(name);\n            this.closeCurrentTag();\n        }\n    };\n    Parser.prototype.onselfclosingtag = function () {\n        if (this.options.xmlMode ||\n            this.options.recognizeSelfClosing ||\n            this.foreignContext[this.foreignContext.length - 1]) {\n            this.closeCurrentTag();\n        }\n        else {\n            this.onopentagend();\n        }\n    };\n    Parser.prototype.closeCurrentTag = function () {\n        var _a, _b;\n        var name = this.tagname;\n        this.onopentagend();\n        /*\n         * Self-closing tags will be on the top of the stack\n         * (cheaper check than in onclosetag)\n         */\n        if (this.stack[this.stack.length - 1] === name) {\n            (_b = (_a = this.cbs).onclosetag) === null || _b === void 0 ? void 0 : _b.call(_a, name);\n            this.stack.pop();\n        }\n    };\n    Parser.prototype.onattribname = function (name) {\n        if (this.lowerCaseAttributeNames) {\n            name = name.toLowerCase();\n        }\n        this.attribname = name;\n    };\n    Parser.prototype.onattribdata = function (value) {\n        this.attribvalue += value;\n    };\n    Parser.prototype.onattribend = function (quote) {\n        var _a, _b;\n        (_b = (_a = this.cbs).onattribute) === null || _b === void 0 ? void 0 : _b.call(_a, this.attribname, this.attribvalue, quote);\n        if (this.attribs &&\n            !Object.prototype.hasOwnProperty.call(this.attribs, this.attribname)) {\n            this.attribs[this.attribname] = this.attribvalue;\n        }\n        this.attribname = \"\";\n        this.attribvalue = \"\";\n    };\n    Parser.prototype.getInstructionName = function (value) {\n        var idx = value.search(reNameEnd);\n        var name = idx < 0 ? value : value.substr(0, idx);\n        if (this.lowerCaseTagNames) {\n            name = name.toLowerCase();\n        }\n        return name;\n    };\n    Parser.prototype.ondeclaration = function (value) {\n        if (this.cbs.onprocessinginstruction) {\n            var name_1 = this.getInstructionName(value);\n            this.cbs.onprocessinginstruction(\"!\" + name_1, \"!\" + value);\n        }\n    };\n    Parser.prototype.onprocessinginstruction = function (value) {\n        if (this.cbs.onprocessinginstruction) {\n            var name_2 = this.getInstructionName(value);\n            this.cbs.onprocessinginstruction(\"?\" + name_2, \"?\" + value);\n        }\n    };\n    Parser.prototype.oncomment = function (value) {\n        var _a, _b, _c, _d;\n        this.updatePosition(4);\n        (_b = (_a = this.cbs).oncomment) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n        (_d = (_c = this.cbs).oncommentend) === null || _d === void 0 ? void 0 : _d.call(_c);\n    };\n    Parser.prototype.oncdata = function (value) {\n        var _a, _b, _c, _d, _e, _f;\n        this.updatePosition(1);\n        if (this.options.xmlMode || this.options.recognizeCDATA) {\n            (_b = (_a = this.cbs).oncdatastart) === null || _b === void 0 ? void 0 : _b.call(_a);\n            (_d = (_c = this.cbs).ontext) === null || _d === void 0 ? void 0 : _d.call(_c, value);\n            (_f = (_e = this.cbs).oncdataend) === null || _f === void 0 ? void 0 : _f.call(_e);\n        }\n        else {\n            this.oncomment(\"[CDATA[\" + value + \"]]\");\n        }\n    };\n    Parser.prototype.onerror = function (err) {\n        var _a, _b;\n        (_b = (_a = this.cbs).onerror) === null || _b === void 0 ? void 0 : _b.call(_a, err);\n    };\n    Parser.prototype.onend = function () {\n        var _a, _b;\n        if (this.cbs.onclosetag) {\n            for (var i = this.stack.length; i > 0; this.cbs.onclosetag(this.stack[--i]))\n                ;\n        }\n        (_b = (_a = this.cbs).onend) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    /**\n     * Resets the parser to a blank state, ready to parse a new HTML document\n     */\n    Parser.prototype.reset = function () {\n        var _a, _b, _c, _d;\n        (_b = (_a = this.cbs).onreset) === null || _b === void 0 ? void 0 : _b.call(_a);\n        this.tokenizer.reset();\n        this.tagname = \"\";\n        this.attribname = \"\";\n        this.attribs = null;\n        this.stack = [];\n        (_d = (_c = this.cbs).onparserinit) === null || _d === void 0 ? void 0 : _d.call(_c, this);\n    };\n    /**\n     * Resets the parser, then parses a complete document and\n     * pushes it to the handler.\n     *\n     * @param data Document to parse.\n     */\n    Parser.prototype.parseComplete = function (data) {\n        this.reset();\n        this.end(data);\n    };\n    /**\n     * Parses a chunk of data and calls the corresponding callbacks.\n     *\n     * @param chunk Chunk to parse.\n     */\n    Parser.prototype.write = function (chunk) {\n        this.tokenizer.write(chunk);\n    };\n    /**\n     * Parses the end of the buffer and clears the stack, calls onend.\n     *\n     * @param chunk Optional final chunk to parse.\n     */\n    Parser.prototype.end = function (chunk) {\n        this.tokenizer.end(chunk);\n    };\n    /**\n     * Pauses parsing. The parser won't emit events until `resume` is called.\n     */\n    Parser.prototype.pause = function () {\n        this.tokenizer.pause();\n    };\n    /**\n     * Resumes parsing after `pause` was called.\n     */\n    Parser.prototype.resume = function () {\n        this.tokenizer.resume();\n    };\n    /**\n     * Alias of `write`, for backwards compatibility.\n     *\n     * @param chunk Chunk to parse.\n     * @deprecated\n     */\n    Parser.prototype.parseChunk = function (chunk) {\n        this.write(chunk);\n    };\n    /**\n     * Alias of `end`, for backwards compatibility.\n     *\n     * @param chunk Optional final chunk to parse.\n     * @deprecated\n     */\n    Parser.prototype.done = function (chunk) {\n        this.end(chunk);\n    };\n    return Parser;\n}());\nexports.Parser = Parser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar decode_codepoint_1 = __importDefault(require(\"entities/lib/decode_codepoint\"));\nvar entities_json_1 = __importDefault(require(\"entities/lib/maps/entities.json\"));\nvar legacy_json_1 = __importDefault(require(\"entities/lib/maps/legacy.json\"));\nvar xml_json_1 = __importDefault(require(\"entities/lib/maps/xml.json\"));\nfunction whitespace(c) {\n    return c === \" \" || c === \"\\n\" || c === \"\\t\" || c === \"\\f\" || c === \"\\r\";\n}\nfunction isASCIIAlpha(c) {\n    return (c >= \"a\" && c <= \"z\") || (c >= \"A\" && c <= \"Z\");\n}\nfunction ifElseState(upper, SUCCESS, FAILURE) {\n    var lower = upper.toLowerCase();\n    if (upper === lower) {\n        return function (t, c) {\n            if (c === lower) {\n                t._state = SUCCESS;\n            }\n            else {\n                t._state = FAILURE;\n                t._index--;\n            }\n        };\n    }\n    return function (t, c) {\n        if (c === lower || c === upper) {\n            t._state = SUCCESS;\n        }\n        else {\n            t._state = FAILURE;\n            t._index--;\n        }\n    };\n}\nfunction consumeSpecialNameChar(upper, NEXT_STATE) {\n    var lower = upper.toLowerCase();\n    return function (t, c) {\n        if (c === lower || c === upper) {\n            t._state = NEXT_STATE;\n        }\n        else {\n            t._state = 3 /* InTagName */;\n            t._index--; // Consume the token again\n        }\n    };\n}\nvar stateBeforeCdata1 = ifElseState(\"C\", 24 /* BeforeCdata2 */, 16 /* InDeclaration */);\nvar stateBeforeCdata2 = ifElseState(\"D\", 25 /* BeforeCdata3 */, 16 /* InDeclaration */);\nvar stateBeforeCdata3 = ifElseState(\"A\", 26 /* BeforeCdata4 */, 16 /* InDeclaration */);\nvar stateBeforeCdata4 = ifElseState(\"T\", 27 /* BeforeCdata5 */, 16 /* InDeclaration */);\nvar stateBeforeCdata5 = ifElseState(\"A\", 28 /* BeforeCdata6 */, 16 /* InDeclaration */);\nvar stateBeforeScript1 = consumeSpecialNameChar(\"R\", 35 /* BeforeScript2 */);\nvar stateBeforeScript2 = consumeSpecialNameChar(\"I\", 36 /* BeforeScript3 */);\nvar stateBeforeScript3 = consumeSpecialNameChar(\"P\", 37 /* BeforeScript4 */);\nvar stateBeforeScript4 = consumeSpecialNameChar(\"T\", 38 /* BeforeScript5 */);\nvar stateAfterScript1 = ifElseState(\"R\", 40 /* AfterScript2 */, 1 /* Text */);\nvar stateAfterScript2 = ifElseState(\"I\", 41 /* AfterScript3 */, 1 /* Text */);\nvar stateAfterScript3 = ifElseState(\"P\", 42 /* AfterScript4 */, 1 /* Text */);\nvar stateAfterScript4 = ifElseState(\"T\", 43 /* AfterScript5 */, 1 /* Text */);\nvar stateBeforeStyle1 = consumeSpecialNameChar(\"Y\", 45 /* BeforeStyle2 */);\nvar stateBeforeStyle2 = consumeSpecialNameChar(\"L\", 46 /* BeforeStyle3 */);\nvar stateBeforeStyle3 = consumeSpecialNameChar(\"E\", 47 /* BeforeStyle4 */);\nvar stateAfterStyle1 = ifElseState(\"Y\", 49 /* AfterStyle2 */, 1 /* Text */);\nvar stateAfterStyle2 = ifElseState(\"L\", 50 /* AfterStyle3 */, 1 /* Text */);\nvar stateAfterStyle3 = ifElseState(\"E\", 51 /* AfterStyle4 */, 1 /* Text */);\nvar stateBeforeSpecialT = consumeSpecialNameChar(\"I\", 54 /* BeforeTitle1 */);\nvar stateBeforeTitle1 = consumeSpecialNameChar(\"T\", 55 /* BeforeTitle2 */);\nvar stateBeforeTitle2 = consumeSpecialNameChar(\"L\", 56 /* BeforeTitle3 */);\nvar stateBeforeTitle3 = consumeSpecialNameChar(\"E\", 57 /* BeforeTitle4 */);\nvar stateAfterSpecialTEnd = ifElseState(\"I\", 58 /* AfterTitle1 */, 1 /* Text */);\nvar stateAfterTitle1 = ifElseState(\"T\", 59 /* AfterTitle2 */, 1 /* Text */);\nvar stateAfterTitle2 = ifElseState(\"L\", 60 /* AfterTitle3 */, 1 /* Text */);\nvar stateAfterTitle3 = ifElseState(\"E\", 61 /* AfterTitle4 */, 1 /* Text */);\nvar stateBeforeEntity = ifElseState(\"#\", 63 /* BeforeNumericEntity */, 64 /* InNamedEntity */);\nvar stateBeforeNumericEntity = ifElseState(\"X\", 66 /* InHexEntity */, 65 /* InNumericEntity */);\nvar Tokenizer = /** @class */ (function () {\n    function Tokenizer(options, cbs) {\n        var _a;\n        /** The current state the tokenizer is in. */\n        this._state = 1 /* Text */;\n        /** The read buffer. */\n        this.buffer = \"\";\n        /** The beginning of the section that is currently being read. */\n        this.sectionStart = 0;\n        /** The index within the buffer that we are currently looking at. */\n        this._index = 0;\n        /**\n         * Data that has already been processed will be removed from the buffer occasionally.\n         * `_bufferOffset` keeps track of how many characters have been removed, to make sure position information is accurate.\n         */\n        this.bufferOffset = 0;\n        /** Some behavior, eg. when decoding entities, is done while we are in another state. This keeps track of the other state type. */\n        this.baseState = 1 /* Text */;\n        /** For special parsing behavior inside of script and style tags. */\n        this.special = 1 /* None */;\n        /** Indicates whether the tokenizer has been paused. */\n        this.running = true;\n        /** Indicates whether the tokenizer has finished running / `.end` has been called. */\n        this.ended = false;\n        this.cbs = cbs;\n        this.xmlMode = !!(options === null || options === void 0 ? void 0 : options.xmlMode);\n        this.decodeEntities = (_a = options === null || options === void 0 ? void 0 : options.decodeEntities) !== null && _a !== void 0 ? _a : true;\n    }\n    Tokenizer.prototype.reset = function () {\n        this._state = 1 /* Text */;\n        this.buffer = \"\";\n        this.sectionStart = 0;\n        this._index = 0;\n        this.bufferOffset = 0;\n        this.baseState = 1 /* Text */;\n        this.special = 1 /* None */;\n        this.running = true;\n        this.ended = false;\n    };\n    Tokenizer.prototype.write = function (chunk) {\n        if (this.ended)\n            this.cbs.onerror(Error(\".write() after done!\"));\n        this.buffer += chunk;\n        this.parse();\n    };\n    Tokenizer.prototype.end = function (chunk) {\n        if (this.ended)\n            this.cbs.onerror(Error(\".end() after done!\"));\n        if (chunk)\n            this.write(chunk);\n        this.ended = true;\n        if (this.running)\n            this.finish();\n    };\n    Tokenizer.prototype.pause = function () {\n        this.running = false;\n    };\n    Tokenizer.prototype.resume = function () {\n        this.running = true;\n        if (this._index < this.buffer.length) {\n            this.parse();\n        }\n        if (this.ended) {\n            this.finish();\n        }\n    };\n    /**\n     * The current index within all of the written data.\n     */\n    Tokenizer.prototype.getAbsoluteIndex = function () {\n        return this.bufferOffset + this._index;\n    };\n    Tokenizer.prototype.stateText = function (c) {\n        if (c === \"<\") {\n            if (this._index > this.sectionStart) {\n                this.cbs.ontext(this.getSection());\n            }\n            this._state = 2 /* BeforeTagName */;\n            this.sectionStart = this._index;\n        }\n        else if (this.decodeEntities &&\n            c === \"&\" &&\n            (this.special === 1 /* None */ || this.special === 4 /* Title */)) {\n            if (this._index > this.sectionStart) {\n                this.cbs.ontext(this.getSection());\n            }\n            this.baseState = 1 /* Text */;\n            this._state = 62 /* BeforeEntity */;\n            this.sectionStart = this._index;\n        }\n    };\n    /**\n     * HTML only allows ASCII alpha characters (a-z and A-Z) at the beginning of a tag name.\n     *\n     * XML allows a lot more characters here (@see https://www.w3.org/TR/REC-xml/#NT-NameStartChar).\n     * We allow anything that wouldn't end the tag.\n     */\n    Tokenizer.prototype.isTagStartChar = function (c) {\n        return (isASCIIAlpha(c) ||\n            (this.xmlMode && !whitespace(c) && c !== \"/\" && c !== \">\"));\n    };\n    Tokenizer.prototype.stateBeforeTagName = function (c) {\n        if (c === \"/\") {\n            this._state = 5 /* BeforeClosingTagName */;\n        }\n        else if (c === \"<\") {\n            this.cbs.ontext(this.getSection());\n            this.sectionStart = this._index;\n        }\n        else if (c === \">\" ||\n            this.special !== 1 /* None */ ||\n            whitespace(c)) {\n            this._state = 1 /* Text */;\n        }\n        else if (c === \"!\") {\n            this._state = 15 /* BeforeDeclaration */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c === \"?\") {\n            this._state = 17 /* InProcessingInstruction */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (!this.isTagStartChar(c)) {\n            this._state = 1 /* Text */;\n        }\n        else {\n            this._state =\n                !this.xmlMode && (c === \"s\" || c === \"S\")\n                    ? 32 /* BeforeSpecialS */\n                    : !this.xmlMode && (c === \"t\" || c === \"T\")\n                        ? 52 /* BeforeSpecialT */\n                        : 3 /* InTagName */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateInTagName = function (c) {\n        if (c === \"/\" || c === \">\" || whitespace(c)) {\n            this.emitToken(\"onopentagname\");\n            this._state = 8 /* BeforeAttributeName */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateBeforeClosingTagName = function (c) {\n        if (whitespace(c)) {\n            // Ignore\n        }\n        else if (c === \">\") {\n            this._state = 1 /* Text */;\n        }\n        else if (this.special !== 1 /* None */) {\n            if (this.special !== 4 /* Title */ && (c === \"s\" || c === \"S\")) {\n                this._state = 33 /* BeforeSpecialSEnd */;\n            }\n            else if (this.special === 4 /* Title */ &&\n                (c === \"t\" || c === \"T\")) {\n                this._state = 53 /* BeforeSpecialTEnd */;\n            }\n            else {\n                this._state = 1 /* Text */;\n                this._index--;\n            }\n        }\n        else if (!this.isTagStartChar(c)) {\n            this._state = 20 /* InSpecialComment */;\n            this.sectionStart = this._index;\n        }\n        else {\n            this._state = 6 /* InClosingTagName */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateInClosingTagName = function (c) {\n        if (c === \">\" || whitespace(c)) {\n            this.emitToken(\"onclosetag\");\n            this._state = 7 /* AfterClosingTagName */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateAfterClosingTagName = function (c) {\n        // Skip everything until \">\"\n        if (c === \">\") {\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n    };\n    Tokenizer.prototype.stateBeforeAttributeName = function (c) {\n        if (c === \">\") {\n            this.cbs.onopentagend();\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c === \"/\") {\n            this._state = 4 /* InSelfClosingTag */;\n        }\n        else if (!whitespace(c)) {\n            this._state = 9 /* InAttributeName */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateInSelfClosingTag = function (c) {\n        if (c === \">\") {\n            this.cbs.onselfclosingtag();\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n            this.special = 1 /* None */; // Reset special state, in case of self-closing special tags\n        }\n        else if (!whitespace(c)) {\n            this._state = 8 /* BeforeAttributeName */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateInAttributeName = function (c) {\n        if (c === \"=\" || c === \"/\" || c === \">\" || whitespace(c)) {\n            this.cbs.onattribname(this.getSection());\n            this.sectionStart = -1;\n            this._state = 10 /* AfterAttributeName */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateAfterAttributeName = function (c) {\n        if (c === \"=\") {\n            this._state = 11 /* BeforeAttributeValue */;\n        }\n        else if (c === \"/\" || c === \">\") {\n            this.cbs.onattribend(undefined);\n            this._state = 8 /* BeforeAttributeName */;\n            this._index--;\n        }\n        else if (!whitespace(c)) {\n            this.cbs.onattribend(undefined);\n            this._state = 9 /* InAttributeName */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateBeforeAttributeValue = function (c) {\n        if (c === '\"') {\n            this._state = 12 /* InAttributeValueDq */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c === \"'\") {\n            this._state = 13 /* InAttributeValueSq */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (!whitespace(c)) {\n            this._state = 14 /* InAttributeValueNq */;\n            this.sectionStart = this._index;\n            this._index--; // Reconsume token\n        }\n    };\n    Tokenizer.prototype.handleInAttributeValue = function (c, quote) {\n        if (c === quote) {\n            this.emitToken(\"onattribdata\");\n            this.cbs.onattribend(quote);\n            this._state = 8 /* BeforeAttributeName */;\n        }\n        else if (this.decodeEntities && c === \"&\") {\n            this.emitToken(\"onattribdata\");\n            this.baseState = this._state;\n            this._state = 62 /* BeforeEntity */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateInAttributeValueDoubleQuotes = function (c) {\n        this.handleInAttributeValue(c, '\"');\n    };\n    Tokenizer.prototype.stateInAttributeValueSingleQuotes = function (c) {\n        this.handleInAttributeValue(c, \"'\");\n    };\n    Tokenizer.prototype.stateInAttributeValueNoQuotes = function (c) {\n        if (whitespace(c) || c === \">\") {\n            this.emitToken(\"onattribdata\");\n            this.cbs.onattribend(null);\n            this._state = 8 /* BeforeAttributeName */;\n            this._index--;\n        }\n        else if (this.decodeEntities && c === \"&\") {\n            this.emitToken(\"onattribdata\");\n            this.baseState = this._state;\n            this._state = 62 /* BeforeEntity */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateBeforeDeclaration = function (c) {\n        this._state =\n            c === \"[\"\n                ? 23 /* BeforeCdata1 */\n                : c === \"-\"\n                    ? 18 /* BeforeComment */\n                    : 16 /* InDeclaration */;\n    };\n    Tokenizer.prototype.stateInDeclaration = function (c) {\n        if (c === \">\") {\n            this.cbs.ondeclaration(this.getSection());\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n    };\n    Tokenizer.prototype.stateInProcessingInstruction = function (c) {\n        if (c === \">\") {\n            this.cbs.onprocessinginstruction(this.getSection());\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n    };\n    Tokenizer.prototype.stateBeforeComment = function (c) {\n        if (c === \"-\") {\n            this._state = 19 /* InComment */;\n            this.sectionStart = this._index + 1;\n        }\n        else {\n            this._state = 16 /* InDeclaration */;\n        }\n    };\n    Tokenizer.prototype.stateInComment = function (c) {\n        if (c === \"-\")\n            this._state = 21 /* AfterComment1 */;\n    };\n    Tokenizer.prototype.stateInSpecialComment = function (c) {\n        if (c === \">\") {\n            this.cbs.oncomment(this.buffer.substring(this.sectionStart, this._index));\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n    };\n    Tokenizer.prototype.stateAfterComment1 = function (c) {\n        if (c === \"-\") {\n            this._state = 22 /* AfterComment2 */;\n        }\n        else {\n            this._state = 19 /* InComment */;\n        }\n    };\n    Tokenizer.prototype.stateAfterComment2 = function (c) {\n        if (c === \">\") {\n            // Remove 2 trailing chars\n            this.cbs.oncomment(this.buffer.substring(this.sectionStart, this._index - 2));\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c !== \"-\") {\n            this._state = 19 /* InComment */;\n        }\n        // Else: stay in AFTER_COMMENT_2 (`--->`)\n    };\n    Tokenizer.prototype.stateBeforeCdata6 = function (c) {\n        if (c === \"[\") {\n            this._state = 29 /* InCdata */;\n            this.sectionStart = this._index + 1;\n        }\n        else {\n            this._state = 16 /* InDeclaration */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateInCdata = function (c) {\n        if (c === \"]\")\n            this._state = 30 /* AfterCdata1 */;\n    };\n    Tokenizer.prototype.stateAfterCdata1 = function (c) {\n        if (c === \"]\")\n            this._state = 31 /* AfterCdata2 */;\n        else\n            this._state = 29 /* InCdata */;\n    };\n    Tokenizer.prototype.stateAfterCdata2 = function (c) {\n        if (c === \">\") {\n            // Remove 2 trailing chars\n            this.cbs.oncdata(this.buffer.substring(this.sectionStart, this._index - 2));\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c !== \"]\") {\n            this._state = 29 /* InCdata */;\n        }\n        // Else: stay in AFTER_CDATA_2 (`]]]>`)\n    };\n    Tokenizer.prototype.stateBeforeSpecialS = function (c) {\n        if (c === \"c\" || c === \"C\") {\n            this._state = 34 /* BeforeScript1 */;\n        }\n        else if (c === \"t\" || c === \"T\") {\n            this._state = 44 /* BeforeStyle1 */;\n        }\n        else {\n            this._state = 3 /* InTagName */;\n            this._index--; // Consume the token again\n        }\n    };\n    Tokenizer.prototype.stateBeforeSpecialSEnd = function (c) {\n        if (this.special === 2 /* Script */ && (c === \"c\" || c === \"C\")) {\n            this._state = 39 /* AfterScript1 */;\n        }\n        else if (this.special === 3 /* Style */ && (c === \"t\" || c === \"T\")) {\n            this._state = 48 /* AfterStyle1 */;\n        }\n        else\n            this._state = 1 /* Text */;\n    };\n    Tokenizer.prototype.stateBeforeSpecialLast = function (c, special) {\n        if (c === \"/\" || c === \">\" || whitespace(c)) {\n            this.special = special;\n        }\n        this._state = 3 /* InTagName */;\n        this._index--; // Consume the token again\n    };\n    Tokenizer.prototype.stateAfterSpecialLast = function (c, sectionStartOffset) {\n        if (c === \">\" || whitespace(c)) {\n            this.special = 1 /* None */;\n            this._state = 6 /* InClosingTagName */;\n            this.sectionStart = this._index - sectionStartOffset;\n            this._index--; // Reconsume the token\n        }\n        else\n            this._state = 1 /* Text */;\n    };\n    // For entities terminated with a semicolon\n    Tokenizer.prototype.parseFixedEntity = function (map) {\n        if (map === void 0) { map = this.xmlMode ? xml_json_1.default : entities_json_1.default; }\n        // Offset = 1\n        if (this.sectionStart + 1 < this._index) {\n            var entity = this.buffer.substring(this.sectionStart + 1, this._index);\n            if (Object.prototype.hasOwnProperty.call(map, entity)) {\n                this.emitPartial(map[entity]);\n                this.sectionStart = this._index + 1;\n            }\n        }\n    };\n    // Parses legacy entities (without trailing semicolon)\n    Tokenizer.prototype.parseLegacyEntity = function () {\n        var start = this.sectionStart + 1;\n        // The max length of legacy entities is 6\n        var limit = Math.min(this._index - start, 6);\n        while (limit >= 2) {\n            // The min length of legacy entities is 2\n            var entity = this.buffer.substr(start, limit);\n            if (Object.prototype.hasOwnProperty.call(legacy_json_1.default, entity)) {\n                this.emitPartial(legacy_json_1.default[entity]);\n                this.sectionStart += limit + 1;\n                return;\n            }\n            limit--;\n        }\n    };\n    Tokenizer.prototype.stateInNamedEntity = function (c) {\n        if (c === \";\") {\n            this.parseFixedEntity();\n            // Retry as legacy entity if entity wasn't parsed\n            if (this.baseState === 1 /* Text */ &&\n                this.sectionStart + 1 < this._index &&\n                !this.xmlMode) {\n                this.parseLegacyEntity();\n            }\n            this._state = this.baseState;\n        }\n        else if ((c < \"0\" || c > \"9\") && !isASCIIAlpha(c)) {\n            if (this.xmlMode || this.sectionStart + 1 === this._index) {\n                // Ignore\n            }\n            else if (this.baseState !== 1 /* Text */) {\n                if (c !== \"=\") {\n                    // Parse as legacy entity, without allowing additional characters.\n                    this.parseFixedEntity(legacy_json_1.default);\n                }\n            }\n            else {\n                this.parseLegacyEntity();\n            }\n            this._state = this.baseState;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.decodeNumericEntity = function (offset, base, strict) {\n        var sectionStart = this.sectionStart + offset;\n        if (sectionStart !== this._index) {\n            // Parse entity\n            var entity = this.buffer.substring(sectionStart, this._index);\n            var parsed = parseInt(entity, base);\n            this.emitPartial(decode_codepoint_1.default(parsed));\n            this.sectionStart = strict ? this._index + 1 : this._index;\n        }\n        this._state = this.baseState;\n    };\n    Tokenizer.prototype.stateInNumericEntity = function (c) {\n        if (c === \";\") {\n            this.decodeNumericEntity(2, 10, true);\n        }\n        else if (c < \"0\" || c > \"9\") {\n            if (!this.xmlMode) {\n                this.decodeNumericEntity(2, 10, false);\n            }\n            else {\n                this._state = this.baseState;\n            }\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateInHexEntity = function (c) {\n        if (c === \";\") {\n            this.decodeNumericEntity(3, 16, true);\n        }\n        else if ((c < \"a\" || c > \"f\") &&\n            (c < \"A\" || c > \"F\") &&\n            (c < \"0\" || c > \"9\")) {\n            if (!this.xmlMode) {\n                this.decodeNumericEntity(3, 16, false);\n            }\n            else {\n                this._state = this.baseState;\n            }\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.cleanup = function () {\n        if (this.sectionStart < 0) {\n            this.buffer = \"\";\n            this.bufferOffset += this._index;\n            this._index = 0;\n        }\n        else if (this.running) {\n            if (this._state === 1 /* Text */) {\n                if (this.sectionStart !== this._index) {\n                    this.cbs.ontext(this.buffer.substr(this.sectionStart));\n                }\n                this.buffer = \"\";\n                this.bufferOffset += this._index;\n                this._index = 0;\n            }\n            else if (this.sectionStart === this._index) {\n                // The section just started\n                this.buffer = \"\";\n                this.bufferOffset += this._index;\n                this._index = 0;\n            }\n            else {\n                // Remove everything unnecessary\n                this.buffer = this.buffer.substr(this.sectionStart);\n                this._index -= this.sectionStart;\n                this.bufferOffset += this.sectionStart;\n            }\n            this.sectionStart = 0;\n        }\n    };\n    /**\n     * Iterates through the buffer, calling the function corresponding to the current state.\n     *\n     * States that are more likely to be hit are higher up, as a performance improvement.\n     */\n    Tokenizer.prototype.parse = function () {\n        while (this._index < this.buffer.length && this.running) {\n            var c = this.buffer.charAt(this._index);\n            if (this._state === 1 /* Text */) {\n                this.stateText(c);\n            }\n            else if (this._state === 12 /* InAttributeValueDq */) {\n                this.stateInAttributeValueDoubleQuotes(c);\n            }\n            else if (this._state === 9 /* InAttributeName */) {\n                this.stateInAttributeName(c);\n            }\n            else if (this._state === 19 /* InComment */) {\n                this.stateInComment(c);\n            }\n            else if (this._state === 20 /* InSpecialComment */) {\n                this.stateInSpecialComment(c);\n            }\n            else if (this._state === 8 /* BeforeAttributeName */) {\n                this.stateBeforeAttributeName(c);\n            }\n            else if (this._state === 3 /* InTagName */) {\n                this.stateInTagName(c);\n            }\n            else if (this._state === 6 /* InClosingTagName */) {\n                this.stateInClosingTagName(c);\n            }\n            else if (this._state === 2 /* BeforeTagName */) {\n                this.stateBeforeTagName(c);\n            }\n            else if (this._state === 10 /* AfterAttributeName */) {\n                this.stateAfterAttributeName(c);\n            }\n            else if (this._state === 13 /* InAttributeValueSq */) {\n                this.stateInAttributeValueSingleQuotes(c);\n            }\n            else if (this._state === 11 /* BeforeAttributeValue */) {\n                this.stateBeforeAttributeValue(c);\n            }\n            else if (this._state === 5 /* BeforeClosingTagName */) {\n                this.stateBeforeClosingTagName(c);\n            }\n            else if (this._state === 7 /* AfterClosingTagName */) {\n                this.stateAfterClosingTagName(c);\n            }\n            else if (this._state === 32 /* BeforeSpecialS */) {\n                this.stateBeforeSpecialS(c);\n            }\n            else if (this._state === 21 /* AfterComment1 */) {\n                this.stateAfterComment1(c);\n            }\n            else if (this._state === 14 /* InAttributeValueNq */) {\n                this.stateInAttributeValueNoQuotes(c);\n            }\n            else if (this._state === 4 /* InSelfClosingTag */) {\n                this.stateInSelfClosingTag(c);\n            }\n            else if (this._state === 16 /* InDeclaration */) {\n                this.stateInDeclaration(c);\n            }\n            else if (this._state === 15 /* BeforeDeclaration */) {\n                this.stateBeforeDeclaration(c);\n            }\n            else if (this._state === 22 /* AfterComment2 */) {\n                this.stateAfterComment2(c);\n            }\n            else if (this._state === 18 /* BeforeComment */) {\n                this.stateBeforeComment(c);\n            }\n            else if (this._state === 33 /* BeforeSpecialSEnd */) {\n                this.stateBeforeSpecialSEnd(c);\n            }\n            else if (this._state === 53 /* BeforeSpecialTEnd */) {\n                stateAfterSpecialTEnd(this, c);\n            }\n            else if (this._state === 39 /* AfterScript1 */) {\n                stateAfterScript1(this, c);\n            }\n            else if (this._state === 40 /* AfterScript2 */) {\n                stateAfterScript2(this, c);\n            }\n            else if (this._state === 41 /* AfterScript3 */) {\n                stateAfterScript3(this, c);\n            }\n            else if (this._state === 34 /* BeforeScript1 */) {\n                stateBeforeScript1(this, c);\n            }\n            else if (this._state === 35 /* BeforeScript2 */) {\n                stateBeforeScript2(this, c);\n            }\n            else if (this._state === 36 /* BeforeScript3 */) {\n                stateBeforeScript3(this, c);\n            }\n            else if (this._state === 37 /* BeforeScript4 */) {\n                stateBeforeScript4(this, c);\n            }\n            else if (this._state === 38 /* BeforeScript5 */) {\n                this.stateBeforeSpecialLast(c, 2 /* Script */);\n            }\n            else if (this._state === 42 /* AfterScript4 */) {\n                stateAfterScript4(this, c);\n            }\n            else if (this._state === 43 /* AfterScript5 */) {\n                this.stateAfterSpecialLast(c, 6);\n            }\n            else if (this._state === 44 /* BeforeStyle1 */) {\n                stateBeforeStyle1(this, c);\n            }\n            else if (this._state === 29 /* InCdata */) {\n                this.stateInCdata(c);\n            }\n            else if (this._state === 45 /* BeforeStyle2 */) {\n                stateBeforeStyle2(this, c);\n            }\n            else if (this._state === 46 /* BeforeStyle3 */) {\n                stateBeforeStyle3(this, c);\n            }\n            else if (this._state === 47 /* BeforeStyle4 */) {\n                this.stateBeforeSpecialLast(c, 3 /* Style */);\n            }\n            else if (this._state === 48 /* AfterStyle1 */) {\n                stateAfterStyle1(this, c);\n            }\n            else if (this._state === 49 /* AfterStyle2 */) {\n                stateAfterStyle2(this, c);\n            }\n            else if (this._state === 50 /* AfterStyle3 */) {\n                stateAfterStyle3(this, c);\n            }\n            else if (this._state === 51 /* AfterStyle4 */) {\n                this.stateAfterSpecialLast(c, 5);\n            }\n            else if (this._state === 52 /* BeforeSpecialT */) {\n                stateBeforeSpecialT(this, c);\n            }\n            else if (this._state === 54 /* BeforeTitle1 */) {\n                stateBeforeTitle1(this, c);\n            }\n            else if (this._state === 55 /* BeforeTitle2 */) {\n                stateBeforeTitle2(this, c);\n            }\n            else if (this._state === 56 /* BeforeTitle3 */) {\n                stateBeforeTitle3(this, c);\n            }\n            else if (this._state === 57 /* BeforeTitle4 */) {\n                this.stateBeforeSpecialLast(c, 4 /* Title */);\n            }\n            else if (this._state === 58 /* AfterTitle1 */) {\n                stateAfterTitle1(this, c);\n            }\n            else if (this._state === 59 /* AfterTitle2 */) {\n                stateAfterTitle2(this, c);\n            }\n            else if (this._state === 60 /* AfterTitle3 */) {\n                stateAfterTitle3(this, c);\n            }\n            else if (this._state === 61 /* AfterTitle4 */) {\n                this.stateAfterSpecialLast(c, 5);\n            }\n            else if (this._state === 17 /* InProcessingInstruction */) {\n                this.stateInProcessingInstruction(c);\n            }\n            else if (this._state === 64 /* InNamedEntity */) {\n                this.stateInNamedEntity(c);\n            }\n            else if (this._state === 23 /* BeforeCdata1 */) {\n                stateBeforeCdata1(this, c);\n            }\n            else if (this._state === 62 /* BeforeEntity */) {\n                stateBeforeEntity(this, c);\n            }\n            else if (this._state === 24 /* BeforeCdata2 */) {\n                stateBeforeCdata2(this, c);\n            }\n            else if (this._state === 25 /* BeforeCdata3 */) {\n                stateBeforeCdata3(this, c);\n            }\n            else if (this._state === 30 /* AfterCdata1 */) {\n                this.stateAfterCdata1(c);\n            }\n            else if (this._state === 31 /* AfterCdata2 */) {\n                this.stateAfterCdata2(c);\n            }\n            else if (this._state === 26 /* BeforeCdata4 */) {\n                stateBeforeCdata4(this, c);\n            }\n            else if (this._state === 27 /* BeforeCdata5 */) {\n                stateBeforeCdata5(this, c);\n            }\n            else if (this._state === 28 /* BeforeCdata6 */) {\n                this.stateBeforeCdata6(c);\n            }\n            else if (this._state === 66 /* InHexEntity */) {\n                this.stateInHexEntity(c);\n            }\n            else if (this._state === 65 /* InNumericEntity */) {\n                this.stateInNumericEntity(c);\n                // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n            }\n            else if (this._state === 63 /* BeforeNumericEntity */) {\n                stateBeforeNumericEntity(this, c);\n            }\n            else {\n                this.cbs.onerror(Error(\"unknown _state\"), this._state);\n            }\n            this._index++;\n        }\n        this.cleanup();\n    };\n    Tokenizer.prototype.finish = function () {\n        // If there is remaining data, emit it in a reasonable way\n        if (this.sectionStart < this._index) {\n            this.handleTrailingData();\n        }\n        this.cbs.onend();\n    };\n    Tokenizer.prototype.handleTrailingData = function () {\n        var data = this.buffer.substr(this.sectionStart);\n        if (this._state === 29 /* InCdata */ ||\n            this._state === 30 /* AfterCdata1 */ ||\n            this._state === 31 /* AfterCdata2 */) {\n            this.cbs.oncdata(data);\n        }\n        else if (this._state === 19 /* InComment */ ||\n            this._state === 21 /* AfterComment1 */ ||\n            this._state === 22 /* AfterComment2 */) {\n            this.cbs.oncomment(data);\n        }\n        else if (this._state === 64 /* InNamedEntity */ && !this.xmlMode) {\n            this.parseLegacyEntity();\n            if (this.sectionStart < this._index) {\n                this._state = this.baseState;\n                this.handleTrailingData();\n            }\n        }\n        else if (this._state === 65 /* InNumericEntity */ && !this.xmlMode) {\n            this.decodeNumericEntity(2, 10, false);\n            if (this.sectionStart < this._index) {\n                this._state = this.baseState;\n                this.handleTrailingData();\n            }\n        }\n        else if (this._state === 66 /* InHexEntity */ && !this.xmlMode) {\n            this.decodeNumericEntity(3, 16, false);\n            if (this.sectionStart < this._index) {\n                this._state = this.baseState;\n                this.handleTrailingData();\n            }\n        }\n        else if (this._state !== 3 /* InTagName */ &&\n            this._state !== 8 /* BeforeAttributeName */ &&\n            this._state !== 11 /* BeforeAttributeValue */ &&\n            this._state !== 10 /* AfterAttributeName */ &&\n            this._state !== 9 /* InAttributeName */ &&\n            this._state !== 13 /* InAttributeValueSq */ &&\n            this._state !== 12 /* InAttributeValueDq */ &&\n            this._state !== 14 /* InAttributeValueNq */ &&\n            this._state !== 6 /* InClosingTagName */) {\n            this.cbs.ontext(data);\n        }\n        /*\n         * Else, ignore remaining data\n         * TODO add a way to remove current tag\n         */\n    };\n    Tokenizer.prototype.getSection = function () {\n        return this.buffer.substring(this.sectionStart, this._index);\n    };\n    Tokenizer.prototype.emitToken = function (name) {\n        this.cbs[name](this.getSection());\n        this.sectionStart = -1;\n    };\n    Tokenizer.prototype.emitPartial = function (value) {\n        if (this.baseState !== 1 /* Text */) {\n            this.cbs.onattribdata(value); // TODO implement the new event\n        }\n        else {\n            this.cbs.ontext(value);\n        }\n    };\n    return Tokenizer;\n}());\nexports.default = Tokenizer;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cloneNode = exports.hasChildren = exports.isDocument = exports.isDirective = exports.isComment = exports.isText = exports.isCDATA = exports.isTag = exports.Element = exports.Document = exports.NodeWithChildren = exports.ProcessingInstruction = exports.Comment = exports.Text = exports.DataNode = exports.Node = void 0;\nvar domelementtype_1 = require(\"domelementtype\");\nvar nodeTypes = new Map([\n    [domelementtype_1.ElementType.Tag, 1],\n    [domelementtype_1.ElementType.Script, 1],\n    [domelementtype_1.ElementType.Style, 1],\n    [domelementtype_1.ElementType.Directive, 1],\n    [domelementtype_1.ElementType.Text, 3],\n    [domelementtype_1.ElementType.CDATA, 4],\n    [domelementtype_1.ElementType.Comment, 8],\n    [domelementtype_1.ElementType.Root, 9],\n]);\n/**\n * This object will be used as the prototype for Nodes when creating a\n * DOM-Level-1-compliant structure.\n */\nvar Node = /** @class */ (function () {\n    /**\n     *\n     * @param type The type of the node.\n     */\n    function Node(type) {\n        this.type = type;\n        /** Parent of the node */\n        this.parent = null;\n        /** Previous sibling */\n        this.prev = null;\n        /** Next sibling */\n        this.next = null;\n        /** The start index of the node. Requires `withStartIndices` on the handler to be `true. */\n        this.startIndex = null;\n        /** The end index of the node. Requires `withEndIndices` on the handler to be `true. */\n        this.endIndex = null;\n    }\n    Object.defineProperty(Node.prototype, \"nodeType\", {\n        // Read-only aliases\n        get: function () {\n            var _a;\n            return (_a = nodeTypes.get(this.type)) !== null && _a !== void 0 ? _a : 1;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"parentNode\", {\n        // Read-write aliases for properties\n        get: function () {\n            return this.parent;\n        },\n        set: function (parent) {\n            this.parent = parent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"previousSibling\", {\n        get: function () {\n            return this.prev;\n        },\n        set: function (prev) {\n            this.prev = prev;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"nextSibling\", {\n        get: function () {\n            return this.next;\n        },\n        set: function (next) {\n            this.next = next;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Clone this node, and optionally its children.\n     *\n     * @param recursive Clone child nodes as well.\n     * @returns A clone of the node.\n     */\n    Node.prototype.cloneNode = function (recursive) {\n        if (recursive === void 0) { recursive = false; }\n        return cloneNode(this, recursive);\n    };\n    return Node;\n}());\nexports.Node = Node;\nvar DataNode = /** @class */ (function (_super) {\n    __extends(DataNode, _super);\n    /**\n     * @param type The type of the node\n     * @param data The content of the data node\n     */\n    function DataNode(type, data) {\n        var _this = _super.call(this, type) || this;\n        _this.data = data;\n        return _this;\n    }\n    Object.defineProperty(DataNode.prototype, \"nodeValue\", {\n        get: function () {\n            return this.data;\n        },\n        set: function (data) {\n            this.data = data;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return DataNode;\n}(Node));\nexports.DataNode = DataNode;\nvar Text = /** @class */ (function (_super) {\n    __extends(Text, _super);\n    function Text(data) {\n        return _super.call(this, domelementtype_1.ElementType.Text, data) || this;\n    }\n    return Text;\n}(DataNode));\nexports.Text = Text;\nvar Comment = /** @class */ (function (_super) {\n    __extends(Comment, _super);\n    function Comment(data) {\n        return _super.call(this, domelementtype_1.ElementType.Comment, data) || this;\n    }\n    return Comment;\n}(DataNode));\nexports.Comment = Comment;\nvar ProcessingInstruction = /** @class */ (function (_super) {\n    __extends(ProcessingInstruction, _super);\n    function ProcessingInstruction(name, data) {\n        var _this = _super.call(this, domelementtype_1.ElementType.Directive, data) || this;\n        _this.name = name;\n        return _this;\n    }\n    return ProcessingInstruction;\n}(DataNode));\nexports.ProcessingInstruction = ProcessingInstruction;\n/**\n * A `Node` that can have children.\n */\nvar NodeWithChildren = /** @class */ (function (_super) {\n    __extends(NodeWithChildren, _super);\n    /**\n     * @param type Type of the node.\n     * @param children Children of the node. Only certain node types can have children.\n     */\n    function NodeWithChildren(type, children) {\n        var _this = _super.call(this, type) || this;\n        _this.children = children;\n        return _this;\n    }\n    Object.defineProperty(NodeWithChildren.prototype, \"firstChild\", {\n        // Aliases\n        get: function () {\n            var _a;\n            return (_a = this.children[0]) !== null && _a !== void 0 ? _a : null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(NodeWithChildren.prototype, \"lastChild\", {\n        get: function () {\n            return this.children.length > 0\n                ? this.children[this.children.length - 1]\n                : null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(NodeWithChildren.prototype, \"childNodes\", {\n        get: function () {\n            return this.children;\n        },\n        set: function (children) {\n            this.children = children;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return NodeWithChildren;\n}(Node));\nexports.NodeWithChildren = NodeWithChildren;\nvar Document = /** @class */ (function (_super) {\n    __extends(Document, _super);\n    function Document(children) {\n        return _super.call(this, domelementtype_1.ElementType.Root, children) || this;\n    }\n    return Document;\n}(NodeWithChildren));\nexports.Document = Document;\nvar Element = /** @class */ (function (_super) {\n    __extends(Element, _super);\n    /**\n     * @param name Name of the tag, eg. `div`, `span`.\n     * @param attribs Object mapping attribute names to attribute values.\n     * @param children Children of the node.\n     */\n    function Element(name, attribs, children, type) {\n        if (children === void 0) { children = []; }\n        if (type === void 0) { type = name === \"script\"\n            ? domelementtype_1.ElementType.Script\n            : name === \"style\"\n                ? domelementtype_1.ElementType.Style\n                : domelementtype_1.ElementType.Tag; }\n        var _this = _super.call(this, type, children) || this;\n        _this.name = name;\n        _this.attribs = attribs;\n        return _this;\n    }\n    Object.defineProperty(Element.prototype, \"tagName\", {\n        // DOM Level 1 aliases\n        get: function () {\n            return this.name;\n        },\n        set: function (name) {\n            this.name = name;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Element.prototype, \"attributes\", {\n        get: function () {\n            var _this = this;\n            return Object.keys(this.attribs).map(function (name) {\n                var _a, _b;\n                return ({\n                    name: name,\n                    value: _this.attribs[name],\n                    namespace: (_a = _this[\"x-attribsNamespace\"]) === null || _a === void 0 ? void 0 : _a[name],\n                    prefix: (_b = _this[\"x-attribsPrefix\"]) === null || _b === void 0 ? void 0 : _b[name],\n                });\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Element;\n}(NodeWithChildren));\nexports.Element = Element;\n/**\n * @param node Node to check.\n * @returns `true` if the node is a `Element`, `false` otherwise.\n */\nfunction isTag(node) {\n    return domelementtype_1.isTag(node);\n}\nexports.isTag = isTag;\n/**\n * @param node Node to check.\n * @returns `true` if the node has the type `CDATA`, `false` otherwise.\n */\nfunction isCDATA(node) {\n    return node.type === domelementtype_1.ElementType.CDATA;\n}\nexports.isCDATA = isCDATA;\n/**\n * @param node Node to check.\n * @returns `true` if the node has the type `Text`, `false` otherwise.\n */\nfunction isText(node) {\n    return node.type === domelementtype_1.ElementType.Text;\n}\nexports.isText = isText;\n/**\n * @param node Node to check.\n * @returns `true` if the node has the type `Comment`, `false` otherwise.\n */\nfunction isComment(node) {\n    return node.type === domelementtype_1.ElementType.Comment;\n}\nexports.isComment = isComment;\n/**\n * @param node Node to check.\n * @returns `true` if the node has the type `ProcessingInstruction`, `false` otherwise.\n */\nfunction isDirective(node) {\n    return node.type === domelementtype_1.ElementType.Directive;\n}\nexports.isDirective = isDirective;\n/**\n * @param node Node to check.\n * @returns `true` if the node has the type `ProcessingInstruction`, `false` otherwise.\n */\nfunction isDocument(node) {\n    return node.type === domelementtype_1.ElementType.Root;\n}\nexports.isDocument = isDocument;\n/**\n * @param node Node to check.\n * @returns `true` if the node is a `NodeWithChildren` (has children), `false` otherwise.\n */\nfunction hasChildren(node) {\n    return Object.prototype.hasOwnProperty.call(node, \"children\");\n}\nexports.hasChildren = hasChildren;\n/**\n * Clone a node, and optionally its children.\n *\n * @param recursive Clone child nodes as well.\n * @returns A clone of the node.\n */\nfunction cloneNode(node, recursive) {\n    if (recursive === void 0) { recursive = false; }\n    var result;\n    if (isText(node)) {\n        result = new Text(node.data);\n    }\n    else if (isComment(node)) {\n        result = new Comment(node.data);\n    }\n    else if (isTag(node)) {\n        var children = recursive ? cloneChildren(node.children) : [];\n        var clone_1 = new Element(node.name, __assign({}, node.attribs), children);\n        children.forEach(function (child) { return (child.parent = clone_1); });\n        if (node[\"x-attribsNamespace\"]) {\n            clone_1[\"x-attribsNamespace\"] = __assign({}, node[\"x-attribsNamespace\"]);\n        }\n        if (node[\"x-attribsPrefix\"]) {\n            clone_1[\"x-attribsPrefix\"] = __assign({}, node[\"x-attribsPrefix\"]);\n        }\n        result = clone_1;\n    }\n    else if (isCDATA(node)) {\n        var children = recursive ? cloneChildren(node.children) : [];\n        var clone_2 = new NodeWithChildren(domelementtype_1.ElementType.CDATA, children);\n        children.forEach(function (child) { return (child.parent = clone_2); });\n        result = clone_2;\n    }\n    else if (isDocument(node)) {\n        var children = recursive ? cloneChildren(node.children) : [];\n        var clone_3 = new Document(children);\n        children.forEach(function (child) { return (child.parent = clone_3); });\n        if (node[\"x-mode\"]) {\n            clone_3[\"x-mode\"] = node[\"x-mode\"];\n        }\n        result = clone_3;\n    }\n    else if (isDirective(node)) {\n        var instruction = new ProcessingInstruction(node.name, node.data);\n        if (node[\"x-name\"] != null) {\n            instruction[\"x-name\"] = node[\"x-name\"];\n            instruction[\"x-publicId\"] = node[\"x-publicId\"];\n            instruction[\"x-systemId\"] = node[\"x-systemId\"];\n        }\n        result = instruction;\n    }\n    else {\n        throw new Error(\"Not implemented yet: \" + node.type);\n    }\n    result.startIndex = node.startIndex;\n    result.endIndex = node.endIndex;\n    return result;\n}\nexports.cloneNode = cloneNode;\nfunction cloneChildren(childs) {\n    var children = childs.map(function (child) { return cloneNode(child, true); });\n    for (var i = 1; i < children.length; i++) {\n        children[i].prev = children[i - 1];\n        children[i - 1].next = children[i];\n    }\n    return children;\n}\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseFeed = exports.FeedHandler = void 0;\nvar domhandler_1 = __importDefault(require(\"domhandler\"));\nvar DomUtils = __importStar(require(\"domutils\"));\nvar Parser_1 = require(\"./Parser\");\nvar FeedItemMediaMedium;\n(function (FeedItemMediaMedium) {\n    FeedItemMediaMedium[FeedItemMediaMedium[\"image\"] = 0] = \"image\";\n    FeedItemMediaMedium[FeedItemMediaMedium[\"audio\"] = 1] = \"audio\";\n    FeedItemMediaMedium[FeedItemMediaMedium[\"video\"] = 2] = \"video\";\n    FeedItemMediaMedium[FeedItemMediaMedium[\"document\"] = 3] = \"document\";\n    FeedItemMediaMedium[FeedItemMediaMedium[\"executable\"] = 4] = \"executable\";\n})(FeedItemMediaMedium || (FeedItemMediaMedium = {}));\nvar FeedItemMediaExpression;\n(function (FeedItemMediaExpression) {\n    FeedItemMediaExpression[FeedItemMediaExpression[\"sample\"] = 0] = \"sample\";\n    FeedItemMediaExpression[FeedItemMediaExpression[\"full\"] = 1] = \"full\";\n    FeedItemMediaExpression[FeedItemMediaExpression[\"nonstop\"] = 2] = \"nonstop\";\n})(FeedItemMediaExpression || (FeedItemMediaExpression = {}));\n// TODO: Consume data as it is coming in\nvar FeedHandler = /** @class */ (function (_super) {\n    __extends(FeedHandler, _super);\n    /**\n     *\n     * @param callback\n     * @param options\n     */\n    function FeedHandler(callback, options) {\n        var _this = this;\n        if (typeof callback === \"object\") {\n            callback = undefined;\n            options = callback;\n        }\n        _this = _super.call(this, callback, options) || this;\n        return _this;\n    }\n    FeedHandler.prototype.onend = function () {\n        var _a, _b;\n        var feedRoot = getOneElement(isValidFeed, this.dom);\n        if (!feedRoot) {\n            this.handleCallback(new Error(\"couldn't find root of feed\"));\n            return;\n        }\n        var feed = {};\n        if (feedRoot.name === \"feed\") {\n            var childs = feedRoot.children;\n            feed.type = \"atom\";\n            addConditionally(feed, \"id\", \"id\", childs);\n            addConditionally(feed, \"title\", \"title\", childs);\n            var href = getAttribute(\"href\", getOneElement(\"link\", childs));\n            if (href) {\n                feed.link = href;\n            }\n            addConditionally(feed, \"description\", \"subtitle\", childs);\n            var updated = fetch(\"updated\", childs);\n            if (updated) {\n                feed.updated = new Date(updated);\n            }\n            addConditionally(feed, \"author\", \"email\", childs, true);\n            feed.items = getElements(\"entry\", childs).map(function (item) {\n                var entry = {};\n                var children = item.children;\n                addConditionally(entry, \"id\", \"id\", children);\n                addConditionally(entry, \"title\", \"title\", children);\n                var href = getAttribute(\"href\", getOneElement(\"link\", children));\n                if (href) {\n                    entry.link = href;\n                }\n                var description = fetch(\"summary\", children) || fetch(\"content\", children);\n                if (description) {\n                    entry.description = description;\n                }\n                var pubDate = fetch(\"updated\", children);\n                if (pubDate) {\n                    entry.pubDate = new Date(pubDate);\n                }\n                entry.media = getMediaElements(children);\n                return entry;\n            });\n        }\n        else {\n            var childs = (_b = (_a = getOneElement(\"channel\", feedRoot.children)) === null || _a === void 0 ? void 0 : _a.children) !== null && _b !== void 0 ? _b : [];\n            feed.type = feedRoot.name.substr(0, 3);\n            feed.id = \"\";\n            addConditionally(feed, \"title\", \"title\", childs);\n            addConditionally(feed, \"link\", \"link\", childs);\n            addConditionally(feed, \"description\", \"description\", childs);\n            var updated = fetch(\"lastBuildDate\", childs);\n            if (updated) {\n                feed.updated = new Date(updated);\n            }\n            addConditionally(feed, \"author\", \"managingEditor\", childs, true);\n            feed.items = getElements(\"item\", feedRoot.children).map(function (item) {\n                var entry = {};\n                var children = item.children;\n                addConditionally(entry, \"id\", \"guid\", children);\n                addConditionally(entry, \"title\", \"title\", children);\n                addConditionally(entry, \"link\", \"link\", children);\n                addConditionally(entry, \"description\", \"description\", children);\n                var pubDate = fetch(\"pubDate\", children);\n                if (pubDate)\n                    entry.pubDate = new Date(pubDate);\n                entry.media = getMediaElements(children);\n                return entry;\n            });\n        }\n        this.feed = feed;\n        this.handleCallback(null);\n    };\n    return FeedHandler;\n}(domhandler_1.default));\nexports.FeedHandler = FeedHandler;\nfunction getMediaElements(where) {\n    return getElements(\"media:content\", where).map(function (elem) {\n        var media = {\n            medium: elem.attribs.medium,\n            isDefault: !!elem.attribs.isDefault,\n        };\n        if (elem.attribs.url) {\n            media.url = elem.attribs.url;\n        }\n        if (elem.attribs.fileSize) {\n            media.fileSize = parseInt(elem.attribs.fileSize, 10);\n        }\n        if (elem.attribs.type) {\n            media.type = elem.attribs.type;\n        }\n        if (elem.attribs.expression) {\n            media.expression = elem.attribs\n                .expression;\n        }\n        if (elem.attribs.bitrate) {\n            media.bitrate = parseInt(elem.attribs.bitrate, 10);\n        }\n        if (elem.attribs.framerate) {\n            media.framerate = parseInt(elem.attribs.framerate, 10);\n        }\n        if (elem.attribs.samplingrate) {\n            media.samplingrate = parseInt(elem.attribs.samplingrate, 10);\n        }\n        if (elem.attribs.channels) {\n            media.channels = parseInt(elem.attribs.channels, 10);\n        }\n        if (elem.attribs.duration) {\n            media.duration = parseInt(elem.attribs.duration, 10);\n        }\n        if (elem.attribs.height) {\n            media.height = parseInt(elem.attribs.height, 10);\n        }\n        if (elem.attribs.width) {\n            media.width = parseInt(elem.attribs.width, 10);\n        }\n        if (elem.attribs.lang) {\n            media.lang = elem.attribs.lang;\n        }\n        return media;\n    });\n}\nfunction getElements(tagName, where) {\n    return DomUtils.getElementsByTagName(tagName, where, true);\n}\nfunction getOneElement(tagName, node) {\n    return DomUtils.getElementsByTagName(tagName, node, true, 1)[0];\n}\nfunction fetch(tagName, where, recurse) {\n    if (recurse === void 0) { recurse = false; }\n    return DomUtils.getText(DomUtils.getElementsByTagName(tagName, where, recurse, 1)).trim();\n}\nfunction getAttribute(name, elem) {\n    if (!elem) {\n        return null;\n    }\n    var attribs = elem.attribs;\n    return attribs[name];\n}\nfunction addConditionally(obj, prop, what, where, recurse) {\n    if (recurse === void 0) { recurse = false; }\n    var tmp = fetch(what, where, recurse);\n    if (tmp)\n        obj[prop] = tmp;\n}\nfunction isValidFeed(value) {\n    return value === \"rss\" || value === \"feed\" || value === \"rdf:RDF\";\n}\n/**\n * Parse a feed.\n *\n * @param feed The feed that should be parsed, as a string.\n * @param options Optionally, options for parsing. When using this option, you should set `xmlMode` to `true`.\n */\nfunction parseFeed(feed, options) {\n    if (options === void 0) { options = { xmlMode: true }; }\n    var handler = new FeedHandler(options);\n    new Parser_1.Parser(handler, options).end(feed);\n    return handler.feed;\n}\nexports.parseFeed = parseFeed;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hasChildren = exports.isDocument = exports.isComment = exports.isText = exports.isCDATA = exports.isTag = void 0;\n__exportStar(require(\"./stringify\"), exports);\n__exportStar(require(\"./traversal\"), exports);\n__exportStar(require(\"./manipulation\"), exports);\n__exportStar(require(\"./querying\"), exports);\n__exportStar(require(\"./legacy\"), exports);\n__exportStar(require(\"./helpers\"), exports);\nvar domhandler_1 = require(\"domhandler\");\nObject.defineProperty(exports, \"isTag\", { enumerable: true, get: function () { return domhandler_1.isTag; } });\nObject.defineProperty(exports, \"isCDATA\", { enumerable: true, get: function () { return domhandler_1.isCDATA; } });\nObject.defineProperty(exports, \"isText\", { enumerable: true, get: function () { return domhandler_1.isText; } });\nObject.defineProperty(exports, \"isComment\", { enumerable: true, get: function () { return domhandler_1.isComment; } });\nObject.defineProperty(exports, \"isDocument\", { enumerable: true, get: function () { return domhandler_1.isDocument; } });\nObject.defineProperty(exports, \"hasChildren\", { enumerable: true, get: function () { return domhandler_1.hasChildren; } });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.findAll = exports.existsOne = exports.findOne = exports.findOneChild = exports.find = exports.filter = void 0;\nvar domhandler_1 = require(\"domhandler\");\n/**\n * Search a node and its children for nodes passing a test function.\n *\n * @param test Function to test nodes on.\n * @param node Node to search. Will be included in the result set if it matches.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes passing `test`.\n */\nfunction filter(test, node, recurse, limit) {\n    if (recurse === void 0) { recurse = true; }\n    if (limit === void 0) { limit = Infinity; }\n    if (!Array.isArray(node))\n        node = [node];\n    return find(test, node, recurse, limit);\n}\nexports.filter = filter;\n/**\n * Search an array of node and its children for nodes passing a test function.\n *\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes passing `test`.\n */\nfunction find(test, nodes, recurse, limit) {\n    var result = [];\n    for (var _i = 0, nodes_1 = nodes; _i < nodes_1.length; _i++) {\n        var elem = nodes_1[_i];\n        if (test(elem)) {\n            result.push(elem);\n            if (--limit <= 0)\n                break;\n        }\n        if (recurse && domhandler_1.hasChildren(elem) && elem.children.length > 0) {\n            var children = find(test, elem.children, recurse, limit);\n            result.push.apply(result, children);\n            limit -= children.length;\n            if (limit <= 0)\n                break;\n        }\n    }\n    return result;\n}\nexports.find = find;\n/**\n * Finds the first element inside of an array that matches a test function.\n *\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @returns The first node in the array that passes `test`.\n */\nfunction findOneChild(test, nodes) {\n    return nodes.find(test);\n}\nexports.findOneChild = findOneChild;\n/**\n * Finds one element in a tree that passes a test.\n *\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @param recurse Also consider child nodes.\n * @returns The first child node that passes `test`.\n */\nfunction findOne(test, nodes, recurse) {\n    if (recurse === void 0) { recurse = true; }\n    var elem = null;\n    for (var i = 0; i < nodes.length && !elem; i++) {\n        var checked = nodes[i];\n        if (!domhandler_1.isTag(checked)) {\n            continue;\n        }\n        else if (test(checked)) {\n            elem = checked;\n        }\n        else if (recurse && checked.children.length > 0) {\n            elem = findOne(test, checked.children);\n        }\n    }\n    return elem;\n}\nexports.findOne = findOne;\n/**\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @returns Whether a tree of nodes contains at least one node passing a test.\n */\nfunction existsOne(test, nodes) {\n    return nodes.some(function (checked) {\n        return domhandler_1.isTag(checked) &&\n            (test(checked) ||\n                (checked.children.length > 0 &&\n                    existsOne(test, checked.children)));\n    });\n}\nexports.existsOne = existsOne;\n/**\n * Search and array of nodes and its children for nodes passing a test function.\n *\n * Same as `find`, only with less options, leading to reduced complexity.\n *\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @returns All nodes passing `test`.\n */\nfunction findAll(test, nodes) {\n    var _a;\n    var result = [];\n    var stack = nodes.filter(domhandler_1.isTag);\n    var elem;\n    while ((elem = stack.shift())) {\n        var children = (_a = elem.children) === null || _a === void 0 ? void 0 : _a.filter(domhandler_1.isTag);\n        if (children && children.length > 0) {\n            stack.unshift.apply(stack, children);\n        }\n        if (test(elem))\n            result.push(elem);\n    }\n    return result;\n}\nexports.findAll = findAll;\n","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _toArray(arr) { return _arrayWithHoles(arr) || _iterableToArray(arr) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar Bottleneck,\n    DEFAULT_PRIORITY,\n    Events,\n    Job,\n    LocalDatastore,\n    NUM_PRIORITIES,\n    Queues,\n    RedisDatastore,\n    States,\n    Sync,\n    parser,\n    splice = [].splice;\nNUM_PRIORITIES = 10;\nDEFAULT_PRIORITY = 5;\nparser = require(\"./parser\");\nQueues = require(\"./Queues\");\nJob = require(\"./Job\");\nLocalDatastore = require(\"./LocalDatastore\");\nRedisDatastore = require(\"./RedisDatastore\");\nEvents = require(\"./Events\");\nStates = require(\"./States\");\nSync = require(\"./Sync\");\n\nBottleneck = function () {\n  class Bottleneck {\n    constructor(options = {}, ...invalid) {\n      var storeInstanceOptions, storeOptions;\n      this._addToQueue = this._addToQueue.bind(this);\n\n      this._validateOptions(options, invalid);\n\n      parser.load(options, this.instanceDefaults, this);\n      this._queues = new Queues(NUM_PRIORITIES);\n      this._scheduled = {};\n      this._states = new States([\"RECEIVED\", \"QUEUED\", \"RUNNING\", \"EXECUTING\"].concat(this.trackDoneStatus ? [\"DONE\"] : []));\n      this._limiter = null;\n      this.Events = new Events(this);\n      this._submitLock = new Sync(\"submit\", this.Promise);\n      this._registerLock = new Sync(\"register\", this.Promise);\n      storeOptions = parser.load(options, this.storeDefaults, {});\n\n      this._store = function () {\n        if (this.datastore === \"redis\" || this.datastore === \"ioredis\" || this.connection != null) {\n          storeInstanceOptions = parser.load(options, this.redisStoreDefaults, {});\n          return new RedisDatastore(this, storeOptions, storeInstanceOptions);\n        } else if (this.datastore === \"local\") {\n          storeInstanceOptions = parser.load(options, this.localStoreDefaults, {});\n          return new LocalDatastore(this, storeOptions, storeInstanceOptions);\n        } else {\n          throw new Bottleneck.prototype.BottleneckError(`Invalid datastore type: ${this.datastore}`);\n        }\n      }.call(this);\n\n      this._queues.on(\"leftzero\", () => {\n        var ref;\n        return (ref = this._store.heartbeat) != null ? typeof ref.ref === \"function\" ? ref.ref() : void 0 : void 0;\n      });\n\n      this._queues.on(\"zero\", () => {\n        var ref;\n        return (ref = this._store.heartbeat) != null ? typeof ref.unref === \"function\" ? ref.unref() : void 0 : void 0;\n      });\n    }\n\n    _validateOptions(options, invalid) {\n      if (!(options != null && typeof options === \"object\" && invalid.length === 0)) {\n        throw new Bottleneck.prototype.BottleneckError(\"Bottleneck v2 takes a single object argument. Refer to https://github.com/SGrondin/bottleneck#upgrading-to-v2 if you're upgrading from Bottleneck v1.\");\n      }\n    }\n\n    ready() {\n      return this._store.ready;\n    }\n\n    clients() {\n      return this._store.clients;\n    }\n\n    channel() {\n      return `b_${this.id}`;\n    }\n\n    channel_client() {\n      return `b_${this.id}_${this._store.clientId}`;\n    }\n\n    publish(message) {\n      return this._store.__publish__(message);\n    }\n\n    disconnect(flush = true) {\n      return this._store.__disconnect__(flush);\n    }\n\n    chain(_limiter) {\n      this._limiter = _limiter;\n      return this;\n    }\n\n    queued(priority) {\n      return this._queues.queued(priority);\n    }\n\n    clusterQueued() {\n      return this._store.__queued__();\n    }\n\n    empty() {\n      return this.queued() === 0 && this._submitLock.isEmpty();\n    }\n\n    running() {\n      return this._store.__running__();\n    }\n\n    done() {\n      return this._store.__done__();\n    }\n\n    jobStatus(id) {\n      return this._states.jobStatus(id);\n    }\n\n    jobs(status) {\n      return this._states.statusJobs(status);\n    }\n\n    counts() {\n      return this._states.statusCounts();\n    }\n\n    _randomIndex() {\n      return Math.random().toString(36).slice(2);\n    }\n\n    check(weight = 1) {\n      return this._store.__check__(weight);\n    }\n\n    _clearGlobalState(index) {\n      if (this._scheduled[index] != null) {\n        clearTimeout(this._scheduled[index].expiration);\n        delete this._scheduled[index];\n        return true;\n      } else {\n        return false;\n      }\n    }\n\n    _free(index, job, options, eventInfo) {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        var e, running;\n\n        try {\n          var _ref = yield _this._store.__free__(index, options.weight);\n\n          running = _ref.running;\n\n          _this.Events.trigger(\"debug\", `Freed ${options.id}`, eventInfo);\n\n          if (running === 0 && _this.empty()) {\n            return _this.Events.trigger(\"idle\");\n          }\n        } catch (error1) {\n          e = error1;\n          return _this.Events.trigger(\"error\", e);\n        }\n      })();\n    }\n\n    _run(index, job, wait) {\n      var clearGlobalState, free, run;\n      job.doRun();\n      clearGlobalState = this._clearGlobalState.bind(this, index);\n      run = this._run.bind(this, index, job);\n      free = this._free.bind(this, index, job);\n      return this._scheduled[index] = {\n        timeout: setTimeout(() => {\n          return job.doExecute(this._limiter, clearGlobalState, run, free);\n        }, wait),\n        expiration: job.options.expiration != null ? setTimeout(function () {\n          return job.doExpire(clearGlobalState, run, free);\n        }, wait + job.options.expiration) : void 0,\n        job: job\n      };\n    }\n\n    _drainOne(capacity) {\n      return this._registerLock.schedule(() => {\n        var args, index, next, options, queue;\n\n        if (this.queued() === 0) {\n          return this.Promise.resolve(null);\n        }\n\n        queue = this._queues.getFirst();\n\n        var _next2 = next = queue.first();\n\n        options = _next2.options;\n        args = _next2.args;\n\n        if (capacity != null && options.weight > capacity) {\n          return this.Promise.resolve(null);\n        }\n\n        this.Events.trigger(\"debug\", `Draining ${options.id}`, {\n          args,\n          options\n        });\n        index = this._randomIndex();\n        return this._store.__register__(index, options.weight, options.expiration).then(({\n          success,\n          wait,\n          reservoir\n        }) => {\n          var empty;\n          this.Events.trigger(\"debug\", `Drained ${options.id}`, {\n            success,\n            args,\n            options\n          });\n\n          if (success) {\n            queue.shift();\n            empty = this.empty();\n\n            if (empty) {\n              this.Events.trigger(\"empty\");\n            }\n\n            if (reservoir === 0) {\n              this.Events.trigger(\"depleted\", empty);\n            }\n\n            this._run(index, next, wait);\n\n            return this.Promise.resolve(options.weight);\n          } else {\n            return this.Promise.resolve(null);\n          }\n        });\n      });\n    }\n\n    _drainAll(capacity, total = 0) {\n      return this._drainOne(capacity).then(drained => {\n        var newCapacity;\n\n        if (drained != null) {\n          newCapacity = capacity != null ? capacity - drained : capacity;\n          return this._drainAll(newCapacity, total + drained);\n        } else {\n          return this.Promise.resolve(total);\n        }\n      }).catch(e => {\n        return this.Events.trigger(\"error\", e);\n      });\n    }\n\n    _dropAllQueued(message) {\n      return this._queues.shiftAll(function (job) {\n        return job.doDrop({\n          message\n        });\n      });\n    }\n\n    stop(options = {}) {\n      var done, waitForExecuting;\n      options = parser.load(options, this.stopDefaults);\n\n      waitForExecuting = at => {\n        var finished;\n\n        finished = () => {\n          var counts;\n          counts = this._states.counts;\n          return counts[0] + counts[1] + counts[2] + counts[3] === at;\n        };\n\n        return new this.Promise((resolve, reject) => {\n          if (finished()) {\n            return resolve();\n          } else {\n            return this.on(\"done\", () => {\n              if (finished()) {\n                this.removeAllListeners(\"done\");\n                return resolve();\n              }\n            });\n          }\n        });\n      };\n\n      done = options.dropWaitingJobs ? (this._run = function (index, next) {\n        return next.doDrop({\n          message: options.dropErrorMessage\n        });\n      }, this._drainOne = () => {\n        return this.Promise.resolve(null);\n      }, this._registerLock.schedule(() => {\n        return this._submitLock.schedule(() => {\n          var k, ref, v;\n          ref = this._scheduled;\n\n          for (k in ref) {\n            v = ref[k];\n\n            if (this.jobStatus(v.job.options.id) === \"RUNNING\") {\n              clearTimeout(v.timeout);\n              clearTimeout(v.expiration);\n              v.job.doDrop({\n                message: options.dropErrorMessage\n              });\n            }\n          }\n\n          this._dropAllQueued(options.dropErrorMessage);\n\n          return waitForExecuting(0);\n        });\n      })) : this.schedule({\n        priority: NUM_PRIORITIES - 1,\n        weight: 0\n      }, () => {\n        return waitForExecuting(1);\n      });\n\n      this._receive = function (job) {\n        return job._reject(new Bottleneck.prototype.BottleneckError(options.enqueueErrorMessage));\n      };\n\n      this.stop = () => {\n        return this.Promise.reject(new Bottleneck.prototype.BottleneckError(\"stop() has already been called\"));\n      };\n\n      return done;\n    }\n\n    _addToQueue(job) {\n      var _this2 = this;\n\n      return _asyncToGenerator(function* () {\n        var args, blocked, error, options, reachedHWM, shifted, strategy;\n        args = job.args;\n        options = job.options;\n\n        try {\n          var _ref2 = yield _this2._store.__submit__(_this2.queued(), options.weight);\n\n          reachedHWM = _ref2.reachedHWM;\n          blocked = _ref2.blocked;\n          strategy = _ref2.strategy;\n        } catch (error1) {\n          error = error1;\n\n          _this2.Events.trigger(\"debug\", `Could not queue ${options.id}`, {\n            args,\n            options,\n            error\n          });\n\n          job.doDrop({\n            error\n          });\n          return false;\n        }\n\n        if (blocked) {\n          job.doDrop();\n          return true;\n        } else if (reachedHWM) {\n          shifted = strategy === Bottleneck.prototype.strategy.LEAK ? _this2._queues.shiftLastFrom(options.priority) : strategy === Bottleneck.prototype.strategy.OVERFLOW_PRIORITY ? _this2._queues.shiftLastFrom(options.priority + 1) : strategy === Bottleneck.prototype.strategy.OVERFLOW ? job : void 0;\n\n          if (shifted != null) {\n            shifted.doDrop();\n          }\n\n          if (shifted == null || strategy === Bottleneck.prototype.strategy.OVERFLOW) {\n            if (shifted == null) {\n              job.doDrop();\n            }\n\n            return reachedHWM;\n          }\n        }\n\n        job.doQueue(reachedHWM, blocked);\n\n        _this2._queues.push(job);\n\n        yield _this2._drainAll();\n        return reachedHWM;\n      })();\n    }\n\n    _receive(job) {\n      if (this._states.jobStatus(job.options.id) != null) {\n        job._reject(new Bottleneck.prototype.BottleneckError(`A job with the same id already exists (id=${job.options.id})`));\n\n        return false;\n      } else {\n        job.doReceive();\n        return this._submitLock.schedule(this._addToQueue, job);\n      }\n    }\n\n    submit(...args) {\n      var cb, fn, job, options, ref, ref1, task;\n\n      if (typeof args[0] === \"function\") {\n        var _ref3, _ref4, _splice$call, _splice$call2;\n\n        ref = args, (_ref3 = ref, _ref4 = _toArray(_ref3), fn = _ref4[0], args = _ref4.slice(1), _ref3), (_splice$call = splice.call(args, -1), _splice$call2 = _slicedToArray(_splice$call, 1), cb = _splice$call2[0], _splice$call);\n        options = parser.load({}, this.jobDefaults);\n      } else {\n        var _ref5, _ref6, _splice$call3, _splice$call4;\n\n        ref1 = args, (_ref5 = ref1, _ref6 = _toArray(_ref5), options = _ref6[0], fn = _ref6[1], args = _ref6.slice(2), _ref5), (_splice$call3 = splice.call(args, -1), _splice$call4 = _slicedToArray(_splice$call3, 1), cb = _splice$call4[0], _splice$call3);\n        options = parser.load(options, this.jobDefaults);\n      }\n\n      task = (...args) => {\n        return new this.Promise(function (resolve, reject) {\n          return fn(...args, function (...args) {\n            return (args[0] != null ? reject : resolve)(args);\n          });\n        });\n      };\n\n      job = new Job(task, args, options, this.jobDefaults, this.rejectOnDrop, this.Events, this._states, this.Promise);\n      job.promise.then(function (args) {\n        return typeof cb === \"function\" ? cb(...args) : void 0;\n      }).catch(function (args) {\n        if (Array.isArray(args)) {\n          return typeof cb === \"function\" ? cb(...args) : void 0;\n        } else {\n          return typeof cb === \"function\" ? cb(args) : void 0;\n        }\n      });\n      return this._receive(job);\n    }\n\n    schedule(...args) {\n      var job, options, task;\n\n      if (typeof args[0] === \"function\") {\n        var _args = args;\n\n        var _args2 = _toArray(_args);\n\n        task = _args2[0];\n        args = _args2.slice(1);\n        options = {};\n      } else {\n        var _args3 = args;\n\n        var _args4 = _toArray(_args3);\n\n        options = _args4[0];\n        task = _args4[1];\n        args = _args4.slice(2);\n      }\n\n      job = new Job(task, args, options, this.jobDefaults, this.rejectOnDrop, this.Events, this._states, this.Promise);\n\n      this._receive(job);\n\n      return job.promise;\n    }\n\n    wrap(fn) {\n      var schedule, wrapped;\n      schedule = this.schedule.bind(this);\n\n      wrapped = function wrapped(...args) {\n        return schedule(fn.bind(this), ...args);\n      };\n\n      wrapped.withOptions = function (options, ...args) {\n        return schedule(options, fn, ...args);\n      };\n\n      return wrapped;\n    }\n\n    updateSettings(options = {}) {\n      var _this3 = this;\n\n      return _asyncToGenerator(function* () {\n        yield _this3._store.__updateSettings__(parser.overwrite(options, _this3.storeDefaults));\n        parser.overwrite(options, _this3.instanceDefaults, _this3);\n        return _this3;\n      })();\n    }\n\n    currentReservoir() {\n      return this._store.__currentReservoir__();\n    }\n\n    incrementReservoir(incr = 0) {\n      return this._store.__incrementReservoir__(incr);\n    }\n\n  }\n\n  ;\n  Bottleneck.default = Bottleneck;\n  Bottleneck.Events = Events;\n  Bottleneck.version = Bottleneck.prototype.version = require(\"./version.json\").version;\n  Bottleneck.strategy = Bottleneck.prototype.strategy = {\n    LEAK: 1,\n    OVERFLOW: 2,\n    OVERFLOW_PRIORITY: 4,\n    BLOCK: 3\n  };\n  Bottleneck.BottleneckError = Bottleneck.prototype.BottleneckError = require(\"./BottleneckError\");\n  Bottleneck.Group = Bottleneck.prototype.Group = require(\"./Group\");\n  Bottleneck.RedisConnection = Bottleneck.prototype.RedisConnection = require(\"./RedisConnection\");\n  Bottleneck.IORedisConnection = Bottleneck.prototype.IORedisConnection = require(\"./IORedisConnection\");\n  Bottleneck.Batcher = Bottleneck.prototype.Batcher = require(\"./Batcher\");\n  Bottleneck.prototype.jobDefaults = {\n    priority: DEFAULT_PRIORITY,\n    weight: 1,\n    expiration: null,\n    id: \"<no-id>\"\n  };\n  Bottleneck.prototype.storeDefaults = {\n    maxConcurrent: null,\n    minTime: 0,\n    highWater: null,\n    strategy: Bottleneck.prototype.strategy.LEAK,\n    penalty: null,\n    reservoir: null,\n    reservoirRefreshInterval: null,\n    reservoirRefreshAmount: null,\n    reservoirIncreaseInterval: null,\n    reservoirIncreaseAmount: null,\n    reservoirIncreaseMaximum: null\n  };\n  Bottleneck.prototype.localStoreDefaults = {\n    Promise: Promise,\n    timeout: null,\n    heartbeatInterval: 250\n  };\n  Bottleneck.prototype.redisStoreDefaults = {\n    Promise: Promise,\n    timeout: null,\n    heartbeatInterval: 5000,\n    clientTimeout: 10000,\n    Redis: null,\n    clientOptions: {},\n    clusterNodes: null,\n    clearDatastore: false,\n    connection: null\n  };\n  Bottleneck.prototype.instanceDefaults = {\n    datastore: \"local\",\n    connection: null,\n    id: \"<no-id>\",\n    rejectOnDrop: true,\n    trackDoneStatus: false,\n    Promise: Promise\n  };\n  Bottleneck.prototype.stopDefaults = {\n    enqueueErrorMessage: \"This limiter has been stopped and cannot accept new jobs.\",\n    dropWaitingJobs: true,\n    dropErrorMessage: \"This limiter has been stopped.\"\n  };\n  return Bottleneck;\n}.call(void 0);\n\nmodule.exports = Bottleneck;","\"use strict\";\n\nvar DLList;\nDLList = class DLList {\n  constructor(incr, decr) {\n    this.incr = incr;\n    this.decr = decr;\n    this._first = null;\n    this._last = null;\n    this.length = 0;\n  }\n\n  push(value) {\n    var node;\n    this.length++;\n\n    if (typeof this.incr === \"function\") {\n      this.incr();\n    }\n\n    node = {\n      value,\n      prev: this._last,\n      next: null\n    };\n\n    if (this._last != null) {\n      this._last.next = node;\n      this._last = node;\n    } else {\n      this._first = this._last = node;\n    }\n\n    return void 0;\n  }\n\n  shift() {\n    var value;\n\n    if (this._first == null) {\n      return;\n    } else {\n      this.length--;\n\n      if (typeof this.decr === \"function\") {\n        this.decr();\n      }\n    }\n\n    value = this._first.value;\n\n    if ((this._first = this._first.next) != null) {\n      this._first.prev = null;\n    } else {\n      this._last = null;\n    }\n\n    return value;\n  }\n\n  first() {\n    if (this._first != null) {\n      return this._first.value;\n    }\n  }\n\n  getArray() {\n    var node, ref, results;\n    node = this._first;\n    results = [];\n\n    while (node != null) {\n      results.push((ref = node, node = node.next, ref.value));\n    }\n\n    return results;\n  }\n\n  forEachShift(cb) {\n    var node;\n    node = this.shift();\n\n    while (node != null) {\n      cb(node), node = this.shift();\n    }\n\n    return void 0;\n  }\n\n  debug() {\n    var node, ref, ref1, ref2, results;\n    node = this._first;\n    results = [];\n\n    while (node != null) {\n      results.push((ref = node, node = node.next, {\n        value: ref.value,\n        prev: (ref1 = ref.prev) != null ? ref1.value : void 0,\n        next: (ref2 = ref.next) != null ? ref2.value : void 0\n      }));\n    }\n\n    return results;\n  }\n\n};\nmodule.exports = DLList;","'use strict'\n/*\n * merge2\n * https://github.com/teambition/merge2\n *\n * Copyright (c) 2014-2020 Teambition\n * Licensed under the MIT license.\n */\nconst Stream = require('stream')\nconst PassThrough = Stream.PassThrough\nconst slice = Array.prototype.slice\n\nmodule.exports = merge2\n\nfunction merge2 () {\n  const streamsQueue = []\n  const args = slice.call(arguments)\n  let merging = false\n  let options = args[args.length - 1]\n\n  if (options && !Array.isArray(options) && options.pipe == null) {\n    args.pop()\n  } else {\n    options = {}\n  }\n\n  const doEnd = options.end !== false\n  const doPipeError = options.pipeError === true\n  if (options.objectMode == null) {\n    options.objectMode = true\n  }\n  if (options.highWaterMark == null) {\n    options.highWaterMark = 64 * 1024\n  }\n  const mergedStream = PassThrough(options)\n\n  function addStream () {\n    for (let i = 0, len = arguments.length; i < len; i++) {\n      streamsQueue.push(pauseStreams(arguments[i], options))\n    }\n    mergeStream()\n    return this\n  }\n\n  function mergeStream () {\n    if (merging) {\n      return\n    }\n    merging = true\n\n    let streams = streamsQueue.shift()\n    if (!streams) {\n      process.nextTick(endStream)\n      return\n    }\n    if (!Array.isArray(streams)) {\n      streams = [streams]\n    }\n\n    let pipesCount = streams.length + 1\n\n    function next () {\n      if (--pipesCount > 0) {\n        return\n      }\n      merging = false\n      mergeStream()\n    }\n\n    function pipe (stream) {\n      function onend () {\n        stream.removeListener('merge2UnpipeEnd', onend)\n        stream.removeListener('end', onend)\n        if (doPipeError) {\n          stream.removeListener('error', onerror)\n        }\n        next()\n      }\n      function onerror (err) {\n        mergedStream.emit('error', err)\n      }\n      // skip ended stream\n      if (stream._readableState.endEmitted) {\n        return next()\n      }\n\n      stream.on('merge2UnpipeEnd', onend)\n      stream.on('end', onend)\n\n      if (doPipeError) {\n        stream.on('error', onerror)\n      }\n\n      stream.pipe(mergedStream, { end: false })\n      // compatible for old stream\n      stream.resume()\n    }\n\n    for (let i = 0; i < streams.length; i++) {\n      pipe(streams[i])\n    }\n\n    next()\n  }\n\n  function endStream () {\n    merging = false\n    // emit 'queueDrain' when all streams merged.\n    mergedStream.emit('queueDrain')\n    if (doEnd) {\n      mergedStream.end()\n    }\n  }\n\n  mergedStream.setMaxListeners(0)\n  mergedStream.add = addStream\n  mergedStream.on('unpipe', function (stream) {\n    stream.emit('merge2UnpipeEnd')\n  })\n\n  if (args.length) {\n    addStream.apply(null, args)\n  }\n  return mergedStream\n}\n\n// check and pause streams for pipe.\nfunction pauseStreams (streams, options) {\n  if (!Array.isArray(streams)) {\n    // Backwards-compat with old-style streams\n    if (!streams._readableState && streams.pipe) {\n      streams = streams.pipe(PassThrough(options))\n    }\n    if (!streams._readableState || !streams.pause || !streams.pipe) {\n      throw new Error('Only readable stream can be merged.')\n    }\n    streams.pause()\n  } else {\n    for (let i = 0, len = streams.length; i < len; i++) {\n      streams[i] = pauseStreams(streams[i], options)\n    }\n  }\n  return streams\n}\n","\"use strict\";\r\nconst taskManager = require(\"./managers/tasks\");\r\nconst async_1 = require(\"./providers/async\");\r\nconst stream_1 = require(\"./providers/stream\");\r\nconst sync_1 = require(\"./providers/sync\");\r\nconst settings_1 = require(\"./settings\");\r\nconst utils = require(\"./utils\");\r\nasync function FastGlob(source, options) {\r\n    assertPatternsInput(source);\r\n    const works = getWorks(source, async_1.default, options);\r\n    const result = await Promise.all(works);\r\n    return utils.array.flatten(result);\r\n}\r\n// https://github.com/typescript-eslint/typescript-eslint/issues/60\r\n// eslint-disable-next-line no-redeclare\r\n(function (FastGlob) {\r\n    function sync(source, options) {\r\n        assertPatternsInput(source);\r\n        const works = getWorks(source, sync_1.default, options);\r\n        return utils.array.flatten(works);\r\n    }\r\n    FastGlob.sync = sync;\r\n    function stream(source, options) {\r\n        assertPatternsInput(source);\r\n        const works = getWorks(source, stream_1.default, options);\r\n        /**\r\n         * The stream returned by the provider cannot work with an asynchronous iterator.\r\n         * To support asynchronous iterators, regardless of the number of tasks, we always multiplex streams.\r\n         * This affects performance (+25%). I don't see best solution right now.\r\n         */\r\n        return utils.stream.merge(works);\r\n    }\r\n    FastGlob.stream = stream;\r\n    function generateTasks(source, options) {\r\n        assertPatternsInput(source);\r\n        const patterns = [].concat(source);\r\n        const settings = new settings_1.default(options);\r\n        return taskManager.generate(patterns, settings);\r\n    }\r\n    FastGlob.generateTasks = generateTasks;\r\n    function isDynamicPattern(source, options) {\r\n        assertPatternsInput(source);\r\n        const settings = new settings_1.default(options);\r\n        return utils.pattern.isDynamicPattern(source, settings);\r\n    }\r\n    FastGlob.isDynamicPattern = isDynamicPattern;\r\n    function escapePath(source) {\r\n        assertPatternsInput(source);\r\n        return utils.path.escape(source);\r\n    }\r\n    FastGlob.escapePath = escapePath;\r\n})(FastGlob || (FastGlob = {}));\r\nfunction getWorks(source, _Provider, options) {\r\n    const patterns = [].concat(source);\r\n    const settings = new settings_1.default(options);\r\n    const tasks = taskManager.generate(patterns, settings);\r\n    const provider = new _Provider(settings);\r\n    return tasks.map(provider.read, provider);\r\n}\r\nfunction assertPatternsInput(input) {\r\n    const source = [].concat(input);\r\n    const isValidSource = source.every((item) => utils.string.isString(item) && !utils.string.isEmpty(item));\r\n    if (!isValidSource) {\r\n        throw new TypeError('Patterns must be a string (non empty) or an array of strings');\r\n    }\r\n}\r\nmodule.exports = FastGlob;\r\n","/*!\n * fill-range <https://github.com/jonschlinkert/fill-range>\n *\n * Copyright (c) 2014-present, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n'use strict';\n\nconst util = require('util');\nconst toRegexRange = require('to-regex-range');\n\nconst isObject = val => val !== null && typeof val === 'object' && !Array.isArray(val);\n\nconst transform = toNumber => {\n  return value => toNumber === true ? Number(value) : String(value);\n};\n\nconst isValidValue = value => {\n  return typeof value === 'number' || (typeof value === 'string' && value !== '');\n};\n\nconst isNumber = num => Number.isInteger(+num);\n\nconst zeros = input => {\n  let value = `${input}`;\n  let index = -1;\n  if (value[0] === '-') value = value.slice(1);\n  if (value === '0') return false;\n  while (value[++index] === '0');\n  return index > 0;\n};\n\nconst stringify = (start, end, options) => {\n  if (typeof start === 'string' || typeof end === 'string') {\n    return true;\n  }\n  return options.stringify === true;\n};\n\nconst pad = (input, maxLength, toNumber) => {\n  if (maxLength > 0) {\n    let dash = input[0] === '-' ? '-' : '';\n    if (dash) input = input.slice(1);\n    input = (dash + input.padStart(dash ? maxLength - 1 : maxLength, '0'));\n  }\n  if (toNumber === false) {\n    return String(input);\n  }\n  return input;\n};\n\nconst toMaxLen = (input, maxLength) => {\n  let negative = input[0] === '-' ? '-' : '';\n  if (negative) {\n    input = input.slice(1);\n    maxLength--;\n  }\n  while (input.length < maxLength) input = '0' + input;\n  return negative ? ('-' + input) : input;\n};\n\nconst toSequence = (parts, options) => {\n  parts.negatives.sort((a, b) => a < b ? -1 : a > b ? 1 : 0);\n  parts.positives.sort((a, b) => a < b ? -1 : a > b ? 1 : 0);\n\n  let prefix = options.capture ? '' : '?:';\n  let positives = '';\n  let negatives = '';\n  let result;\n\n  if (parts.positives.length) {\n    positives = parts.positives.join('|');\n  }\n\n  if (parts.negatives.length) {\n    negatives = `-(${prefix}${parts.negatives.join('|')})`;\n  }\n\n  if (positives && negatives) {\n    result = `${positives}|${negatives}`;\n  } else {\n    result = positives || negatives;\n  }\n\n  if (options.wrap) {\n    return `(${prefix}${result})`;\n  }\n\n  return result;\n};\n\nconst toRange = (a, b, isNumbers, options) => {\n  if (isNumbers) {\n    return toRegexRange(a, b, { wrap: false, ...options });\n  }\n\n  let start = String.fromCharCode(a);\n  if (a === b) return start;\n\n  let stop = String.fromCharCode(b);\n  return `[${start}-${stop}]`;\n};\n\nconst toRegex = (start, end, options) => {\n  if (Array.isArray(start)) {\n    let wrap = options.wrap === true;\n    let prefix = options.capture ? '' : '?:';\n    return wrap ? `(${prefix}${start.join('|')})` : start.join('|');\n  }\n  return toRegexRange(start, end, options);\n};\n\nconst rangeError = (...args) => {\n  return new RangeError('Invalid range arguments: ' + util.inspect(...args));\n};\n\nconst invalidRange = (start, end, options) => {\n  if (options.strictRanges === true) throw rangeError([start, end]);\n  return [];\n};\n\nconst invalidStep = (step, options) => {\n  if (options.strictRanges === true) {\n    throw new TypeError(`Expected step \"${step}\" to be a number`);\n  }\n  return [];\n};\n\nconst fillNumbers = (start, end, step = 1, options = {}) => {\n  let a = Number(start);\n  let b = Number(end);\n\n  if (!Number.isInteger(a) || !Number.isInteger(b)) {\n    if (options.strictRanges === true) throw rangeError([start, end]);\n    return [];\n  }\n\n  // fix negative zero\n  if (a === 0) a = 0;\n  if (b === 0) b = 0;\n\n  let descending = a > b;\n  let startString = String(start);\n  let endString = String(end);\n  let stepString = String(step);\n  step = Math.max(Math.abs(step), 1);\n\n  let padded = zeros(startString) || zeros(endString) || zeros(stepString);\n  let maxLen = padded ? Math.max(startString.length, endString.length, stepString.length) : 0;\n  let toNumber = padded === false && stringify(start, end, options) === false;\n  let format = options.transform || transform(toNumber);\n\n  if (options.toRegex && step === 1) {\n    return toRange(toMaxLen(start, maxLen), toMaxLen(end, maxLen), true, options);\n  }\n\n  let parts = { negatives: [], positives: [] };\n  let push = num => parts[num < 0 ? 'negatives' : 'positives'].push(Math.abs(num));\n  let range = [];\n  let index = 0;\n\n  while (descending ? a >= b : a <= b) {\n    if (options.toRegex === true && step > 1) {\n      push(a);\n    } else {\n      range.push(pad(format(a, index), maxLen, toNumber));\n    }\n    a = descending ? a - step : a + step;\n    index++;\n  }\n\n  if (options.toRegex === true) {\n    return step > 1\n      ? toSequence(parts, options)\n      : toRegex(range, null, { wrap: false, ...options });\n  }\n\n  return range;\n};\n\nconst fillLetters = (start, end, step = 1, options = {}) => {\n  if ((!isNumber(start) && start.length > 1) || (!isNumber(end) && end.length > 1)) {\n    return invalidRange(start, end, options);\n  }\n\n\n  let format = options.transform || (val => String.fromCharCode(val));\n  let a = `${start}`.charCodeAt(0);\n  let b = `${end}`.charCodeAt(0);\n\n  let descending = a > b;\n  let min = Math.min(a, b);\n  let max = Math.max(a, b);\n\n  if (options.toRegex && step === 1) {\n    return toRange(min, max, false, options);\n  }\n\n  let range = [];\n  let index = 0;\n\n  while (descending ? a >= b : a <= b) {\n    range.push(format(a, index));\n    a = descending ? a - step : a + step;\n    index++;\n  }\n\n  if (options.toRegex === true) {\n    return toRegex(range, null, { wrap: false, options });\n  }\n\n  return range;\n};\n\nconst fill = (start, end, step, options = {}) => {\n  if (end == null && isValidValue(start)) {\n    return [start];\n  }\n\n  if (!isValidValue(start) || !isValidValue(end)) {\n    return invalidRange(start, end, options);\n  }\n\n  if (typeof step === 'function') {\n    return fill(start, end, 1, { transform: step });\n  }\n\n  if (isObject(step)) {\n    return fill(start, end, 0, step);\n  }\n\n  let opts = { ...options };\n  if (opts.capture === true) opts.wrap = true;\n  step = step || opts.step || 1;\n\n  if (!isNumber(step)) {\n    if (step != null && !isObject(step)) return invalidStep(step, opts);\n    return fill(start, end, 1, step);\n  }\n\n  if (isNumber(start) && isNumber(end)) {\n    return fillNumbers(start, end, step, opts);\n  }\n\n  return fillLetters(start, end, Math.max(Math.abs(step), 1), opts);\n};\n\nmodule.exports = fill;\n","'use strict';\n\nmodule.exports = require('./lib/picomatch');\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst stream_1 = require(\"stream\");\r\nconst fsStat = require(\"@nodelib/fs.stat\");\r\nconst fsWalk = require(\"@nodelib/fs.walk\");\r\nconst reader_1 = require(\"./reader\");\r\nclass ReaderStream extends reader_1.default {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._walkStream = fsWalk.walkStream;\r\n        this._stat = fsStat.stat;\r\n    }\r\n    dynamic(root, options) {\r\n        return this._walkStream(root, options);\r\n    }\r\n    static(patterns, options) {\r\n        const filepaths = patterns.map(this._getFullEntryPath, this);\r\n        const stream = new stream_1.PassThrough({ objectMode: true });\r\n        stream._write = (index, _enc, done) => {\r\n            return this._getEntry(filepaths[index], patterns[index], options)\r\n                .then((entry) => {\r\n                if (entry !== null && options.entryFilter(entry)) {\r\n                    stream.push(entry);\r\n                }\r\n                if (index === filepaths.length - 1) {\r\n                    stream.end();\r\n                }\r\n                done();\r\n            })\r\n                .catch(done);\r\n        };\r\n        for (let i = 0; i < filepaths.length; i++) {\r\n            stream.write(i);\r\n        }\r\n        return stream;\r\n    }\r\n    _getEntry(filepath, pattern, options) {\r\n        return this._getStat(filepath)\r\n            .then((stats) => this._makeEntry(stats, pattern))\r\n            .catch((error) => {\r\n            if (options.errorFilter(error)) {\r\n                return null;\r\n            }\r\n            throw error;\r\n        });\r\n    }\r\n    _getStat(filepath) {\r\n        return new Promise((resolve, reject) => {\r\n            this._stat(filepath, this._fsStatSettings, (error, stats) => {\r\n                return error === null ? resolve(stats) : reject(error);\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.default = ReaderStream;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Settings = exports.walkStream = exports.walkSync = exports.walk = void 0;\r\nconst async_1 = require(\"./providers/async\");\r\nconst stream_1 = require(\"./providers/stream\");\r\nconst sync_1 = require(\"./providers/sync\");\r\nconst settings_1 = require(\"./settings\");\r\nexports.Settings = settings_1.default;\r\nfunction walk(directory, optionsOrSettingsOrCallback, callback) {\r\n    if (typeof optionsOrSettingsOrCallback === 'function') {\r\n        return new async_1.default(directory, getSettings()).read(optionsOrSettingsOrCallback);\r\n    }\r\n    new async_1.default(directory, getSettings(optionsOrSettingsOrCallback)).read(callback);\r\n}\r\nexports.walk = walk;\r\nfunction walkSync(directory, optionsOrSettings) {\r\n    const settings = getSettings(optionsOrSettings);\r\n    const provider = new sync_1.default(directory, settings);\r\n    return provider.read();\r\n}\r\nexports.walkSync = walkSync;\r\nfunction walkStream(directory, optionsOrSettings) {\r\n    const settings = getSettings(optionsOrSettings);\r\n    const provider = new stream_1.default(directory, settings);\r\n    return provider.read();\r\n}\r\nexports.walkStream = walkStream;\r\nfunction getSettings(settingsOrOptions = {}) {\r\n    if (settingsOrOptions instanceof settings_1.default) {\r\n        return settingsOrOptions;\r\n    }\r\n    return new settings_1.default(settingsOrOptions);\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"events\");\r\nconst fsScandir = require(\"@nodelib/fs.scandir\");\r\nconst fastq = require(\"fastq\");\r\nconst common = require(\"./common\");\r\nconst reader_1 = require(\"./reader\");\r\nclass AsyncReader extends reader_1.default {\r\n    constructor(_root, _settings) {\r\n        super(_root, _settings);\r\n        this._settings = _settings;\r\n        this._scandir = fsScandir.scandir;\r\n        this._emitter = new events_1.EventEmitter();\r\n        this._queue = fastq(this._worker.bind(this), this._settings.concurrency);\r\n        this._isFatalError = false;\r\n        this._isDestroyed = false;\r\n        this._queue.drain = () => {\r\n            if (!this._isFatalError) {\r\n                this._emitter.emit('end');\r\n            }\r\n        };\r\n    }\r\n    read() {\r\n        this._isFatalError = false;\r\n        this._isDestroyed = false;\r\n        setImmediate(() => {\r\n            this._pushToQueue(this._root, this._settings.basePath);\r\n        });\r\n        return this._emitter;\r\n    }\r\n    get isDestroyed() {\r\n        return this._isDestroyed;\r\n    }\r\n    destroy() {\r\n        if (this._isDestroyed) {\r\n            throw new Error('The reader is already destroyed');\r\n        }\r\n        this._isDestroyed = true;\r\n        this._queue.killAndDrain();\r\n    }\r\n    onEntry(callback) {\r\n        this._emitter.on('entry', callback);\r\n    }\r\n    onError(callback) {\r\n        this._emitter.once('error', callback);\r\n    }\r\n    onEnd(callback) {\r\n        this._emitter.once('end', callback);\r\n    }\r\n    _pushToQueue(directory, base) {\r\n        const queueItem = { directory, base };\r\n        this._queue.push(queueItem, (error) => {\r\n            if (error !== null) {\r\n                this._handleError(error);\r\n            }\r\n        });\r\n    }\r\n    _worker(item, done) {\r\n        this._scandir(item.directory, this._settings.fsScandirSettings, (error, entries) => {\r\n            if (error !== null) {\r\n                return done(error, undefined);\r\n            }\r\n            for (const entry of entries) {\r\n                this._handleEntry(entry, item.base);\r\n            }\r\n            done(null, undefined);\r\n        });\r\n    }\r\n    _handleError(error) {\r\n        if (this._isDestroyed || !common.isFatalError(this._settings, error)) {\r\n            return;\r\n        }\r\n        this._isFatalError = true;\r\n        this._isDestroyed = true;\r\n        this._emitter.emit('error', error);\r\n    }\r\n    _handleEntry(entry, base) {\r\n        if (this._isDestroyed || this._isFatalError) {\r\n            return;\r\n        }\r\n        const fullpath = entry.path;\r\n        if (base !== undefined) {\r\n            entry.path = common.joinPathSegments(base, entry.name, this._settings.pathSegmentSeparator);\r\n        }\r\n        if (common.isAppliedFilter(this._settings.entryFilter, entry)) {\r\n            this._emitEntry(entry);\r\n        }\r\n        if (entry.dirent.isDirectory() && common.isAppliedFilter(this._settings.deepFilter, entry)) {\r\n            this._pushToQueue(fullpath, entry.path);\r\n        }\r\n    }\r\n    _emitEntry(entry) {\r\n        this._emitter.emit('entry', entry);\r\n    }\r\n}\r\nexports.default = AsyncReader;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IS_SUPPORT_READDIR_WITH_FILE_TYPES = void 0;\r\nconst NODE_PROCESS_VERSION_PARTS = process.versions.node.split('.');\r\nconst MAJOR_VERSION = parseInt(NODE_PROCESS_VERSION_PARTS[0], 10);\r\nconst MINOR_VERSION = parseInt(NODE_PROCESS_VERSION_PARTS[1], 10);\r\nconst SUPPORTED_MAJOR_VERSION = 10;\r\nconst SUPPORTED_MINOR_VERSION = 10;\r\nconst IS_MATCHED_BY_MAJOR = MAJOR_VERSION > SUPPORTED_MAJOR_VERSION;\r\nconst IS_MATCHED_BY_MAJOR_AND_MINOR = MAJOR_VERSION === SUPPORTED_MAJOR_VERSION && MINOR_VERSION >= SUPPORTED_MINOR_VERSION;\r\n/**\r\n * IS `true` for Node.js 10.10 and greater.\r\n */\r\nexports.IS_SUPPORT_READDIR_WITH_FILE_TYPES = IS_MATCHED_BY_MAJOR || IS_MATCHED_BY_MAJOR_AND_MINOR;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.fs = void 0;\r\nconst fs = require(\"./fs\");\r\nexports.fs = fs;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.joinPathSegments = void 0;\r\nfunction joinPathSegments(a, b, separator) {\r\n    /**\r\n     * The correct handling of cases when the first segment is a root (`/`, `C:/`) or UNC path (`//?/C:/`).\r\n     */\r\n    if (a.endsWith(separator)) {\r\n        return a + b;\r\n    }\r\n    return a + separator + b;\r\n}\r\nexports.joinPathSegments = joinPathSegments;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst common = require(\"./common\");\r\nclass Reader {\r\n    constructor(_root, _settings) {\r\n        this._root = _root;\r\n        this._settings = _settings;\r\n        this._root = common.replacePathSegmentSeparator(_root, _settings.pathSegmentSeparator);\r\n    }\r\n}\r\nexports.default = Reader;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path = require(\"path\");\r\nconst fsStat = require(\"@nodelib/fs.stat\");\r\nconst utils = require(\"../utils\");\r\nclass Reader {\r\n    constructor(_settings) {\r\n        this._settings = _settings;\r\n        this._fsStatSettings = new fsStat.Settings({\r\n            followSymbolicLink: this._settings.followSymbolicLinks,\r\n            fs: this._settings.fs,\r\n            throwErrorOnBrokenSymbolicLink: this._settings.followSymbolicLinks\r\n        });\r\n    }\r\n    _getFullEntryPath(filepath) {\r\n        return path.resolve(this._settings.cwd, filepath);\r\n    }\r\n    _makeEntry(stats, pattern) {\r\n        const entry = {\r\n            name: pattern,\r\n            path: pattern,\r\n            dirent: utils.fs.createDirentFromStats(pattern, stats)\r\n        };\r\n        if (this._settings.stats) {\r\n            entry.stats = stats;\r\n        }\r\n        return entry;\r\n    }\r\n    _isFatalError(error) {\r\n        return !utils.errno.isEnoentCodeError(error) && !this._settings.suppressErrors;\r\n    }\r\n}\r\nexports.default = Reader;\r\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n","module.exports = require(\"https\");","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295,\n    MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1,\n    HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeFloor = Math.floor,\n    nativeMin = Math.min;\n\n/**\n * The base implementation of `_.sortedIndex` and `_.sortedLastIndex` which\n * performs a binary search of `array` to determine the index at which `value`\n * should be inserted into `array` in order to maintain its sort order.\n *\n * @private\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @param {boolean} [retHighest] Specify returning the highest qualified index.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n */\nfunction baseSortedIndex(array, value, retHighest) {\n  var low = 0,\n      high = array ? array.length : low;\n\n  if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) {\n    while (low < high) {\n      var mid = (low + high) >>> 1,\n          computed = array[mid];\n\n      if (computed !== null && !isSymbol(computed) &&\n          (retHighest ? (computed <= value) : (computed < value))) {\n        low = mid + 1;\n      } else {\n        high = mid;\n      }\n    }\n    return high;\n  }\n  return baseSortedIndexBy(array, value, identity, retHighest);\n}\n\n/**\n * The base implementation of `_.sortedIndexBy` and `_.sortedLastIndexBy`\n * which invokes `iteratee` for `value` and each element of `array` to compute\n * their sort ranking. The iteratee is invoked with one argument; (value).\n *\n * @private\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @param {Function} iteratee The iteratee invoked per element.\n * @param {boolean} [retHighest] Specify returning the highest qualified index.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n */\nfunction baseSortedIndexBy(array, value, iteratee, retHighest) {\n  value = iteratee(value);\n\n  var low = 0,\n      high = array ? array.length : 0,\n      valIsNaN = value !== value,\n      valIsNull = value === null,\n      valIsSymbol = isSymbol(value),\n      valIsUndefined = value === undefined;\n\n  while (low < high) {\n    var mid = nativeFloor((low + high) / 2),\n        computed = iteratee(array[mid]),\n        othIsDefined = computed !== undefined,\n        othIsNull = computed === null,\n        othIsReflexive = computed === computed,\n        othIsSymbol = isSymbol(computed);\n\n    if (valIsNaN) {\n      var setLow = retHighest || othIsReflexive;\n    } else if (valIsUndefined) {\n      setLow = othIsReflexive && (retHighest || othIsDefined);\n    } else if (valIsNull) {\n      setLow = othIsReflexive && othIsDefined && (retHighest || !othIsNull);\n    } else if (valIsSymbol) {\n      setLow = othIsReflexive && othIsDefined && !othIsNull && (retHighest || !othIsSymbol);\n    } else if (othIsNull || othIsSymbol) {\n      setLow = false;\n    } else {\n      setLow = retHighest ? (computed <= value) : (computed < value);\n    }\n    if (setLow) {\n      low = mid + 1;\n    } else {\n      high = mid;\n    }\n  }\n  return nativeMin(high, MAX_ARRAY_INDEX);\n}\n\n/**\n * Uses a binary search to determine the lowest index at which `value`\n * should be inserted into `array` in order to maintain its sort order.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n * @example\n *\n * _.sortedIndex([30, 50], 40);\n * // => 1\n */\nfunction sortedIndex(array, value) {\n  return baseSortedIndex(array, value);\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = sortedIndex;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for comparison styles. */\nvar UNORDERED_COMPARE_FLAG = 1,\n    PARTIAL_COMPARE_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991,\n    MAX_INTEGER = 1.7976931348623157e+308,\n    NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/,\n    reLeadingDot = /^\\./,\n    rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object),\n    nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {boolean} [bitmask] The bitmask of comparison flags.\n *  The bitmask may be composed of the following flags:\n *     1 - Unordered comparison\n *     2 - Partial comparison\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, customizer, bitmask, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObject(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, baseIsEqual, customizer, bitmask, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {number} [bitmask] The bitmask of comparison flags. See `baseIsEqual`\n *  for more details.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, equalFunc, customizer, bitmask, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = arrayTag,\n      othTag = arrayTag;\n\n  if (!objIsArr) {\n    objTag = getTag(object);\n    objTag = objTag == argsTag ? objectTag : objTag;\n  }\n  if (!othIsArr) {\n    othTag = getTag(other);\n    othTag = othTag == argsTag ? objectTag : othTag;\n  }\n  var objIsObj = objTag == objectTag && !isHostObject(object),\n      othIsObj = othTag == objectTag && !isHostObject(other),\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, equalFunc, customizer, bitmask, stack)\n      : equalByTag(object, other, objTag, equalFunc, customizer, bitmask, stack);\n  }\n  if (!(bitmask & PARTIAL_COMPARE_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, customizer, bitmask, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, equalFunc, customizer, bitmask, stack);\n}\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, customizer, UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[objectToString.call(value)];\n}\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, undefined, UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG);\n  };\n}\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value) {\n  return isArray(value) ? value : stringToPath(value);\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual`\n *  for more details.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, equalFunc, customizer, bitmask, stack) {\n  var isPartial = bitmask & PARTIAL_COMPARE_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & UNORDERED_COMPARE_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!seen.has(othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, customizer, bitmask, stack))) {\n              return seen.add(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, customizer, bitmask, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual`\n *  for more details.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, equalFunc, customizer, bitmask, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & PARTIAL_COMPARE_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= UNORDERED_COMPARE_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), equalFunc, customizer, bitmask, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual`\n *  for more details.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, equalFunc, customizer, bitmask, stack) {\n  var isPartial = bitmask & PARTIAL_COMPARE_FLAG,\n      objProps = keys(object),\n      objLength = objProps.length,\n      othProps = keys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, customizer, bitmask, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var result,\n      index = -1,\n      length = path.length;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result) {\n    return result;\n  }\n  var length = object ? object.length : 0;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\n/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoize(function(string) {\n  string = toString(string);\n\n  var result = [];\n  if (reLeadingDot.test(string)) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.findIndex` except that it iterates over elements\n * of `collection` from right to left.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [predicate=_.identity]\n *  The function invoked per iteration.\n * @param {number} [fromIndex=array.length-1] The index to search from.\n * @returns {number} Returns the index of the found element, else `-1`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': true },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': false }\n * ];\n *\n * _.findLastIndex(users, function(o) { return o.user == 'pebbles'; });\n * // => 2\n *\n * // The `_.matches` iteratee shorthand.\n * _.findLastIndex(users, { 'user': 'barney', 'active': true });\n * // => 0\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.findLastIndex(users, ['active', false]);\n * // => 2\n *\n * // The `_.property` iteratee shorthand.\n * _.findLastIndex(users, 'active');\n * // => 0\n */\nfunction findLastIndex(array, predicate, fromIndex) {\n  var length = array ? array.length : 0;\n  if (!length) {\n    return -1;\n  }\n  var index = length - 1;\n  if (fromIndex !== undefined) {\n    index = toInteger(fromIndex);\n    index = fromIndex < 0\n      ? nativeMax(length + index, 0)\n      : nativeMin(index, length - 1);\n  }\n  return baseFindIndex(array, baseIteratee(predicate, 3), index, true);\n}\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result);\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Assign cache to `_.memoize`.\nmemoize.Cache = MapCache;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = findLastIndex;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for comparison styles. */\nvar UNORDERED_COMPARE_FLAG = 1,\n    PARTIAL_COMPARE_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/,\n    reLeadingDot = /^\\./,\n    rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array ? array.length : 0;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\n/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  if (value !== value) {\n    return baseFindIndex(array, baseIsNaN, fromIndex);\n  }\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\n/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a cache value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object),\n    nativeMax = Math.max;\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {boolean} [bitmask] The bitmask of comparison flags.\n *  The bitmask may be composed of the following flags:\n *     1 - Unordered comparison\n *     2 - Partial comparison\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, customizer, bitmask, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObject(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, baseIsEqual, customizer, bitmask, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {number} [bitmask] The bitmask of comparison flags. See `baseIsEqual`\n *  for more details.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, equalFunc, customizer, bitmask, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = arrayTag,\n      othTag = arrayTag;\n\n  if (!objIsArr) {\n    objTag = getTag(object);\n    objTag = objTag == argsTag ? objectTag : objTag;\n  }\n  if (!othIsArr) {\n    othTag = getTag(other);\n    othTag = othTag == argsTag ? objectTag : othTag;\n  }\n  var objIsObj = objTag == objectTag && !isHostObject(object),\n      othIsObj = othTag == objectTag && !isHostObject(other),\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, equalFunc, customizer, bitmask, stack)\n      : equalByTag(object, other, objTag, equalFunc, customizer, bitmask, stack);\n  }\n  if (!(bitmask & PARTIAL_COMPARE_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, customizer, bitmask, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, equalFunc, customizer, bitmask, stack);\n}\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, customizer, UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[objectToString.call(value)];\n}\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, undefined, UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG);\n  };\n}\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value) {\n  return isArray(value) ? value : stringToPath(value);\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual`\n *  for more details.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, equalFunc, customizer, bitmask, stack) {\n  var isPartial = bitmask & PARTIAL_COMPARE_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & UNORDERED_COMPARE_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!seen.has(othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, customizer, bitmask, stack))) {\n              return seen.add(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, customizer, bitmask, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual`\n *  for more details.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, equalFunc, customizer, bitmask, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & PARTIAL_COMPARE_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= UNORDERED_COMPARE_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), equalFunc, customizer, bitmask, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual`\n *  for more details.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, equalFunc, customizer, bitmask, stack) {\n  var isPartial = bitmask & PARTIAL_COMPARE_FLAG,\n      objProps = keys(object),\n      objLength = objProps.length,\n      othProps = keys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, customizer, bitmask, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var result,\n      index = -1,\n      length = path.length;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result) {\n    return result;\n  }\n  var length = object ? object.length : 0;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\n/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoize(function(string) {\n  string = toString(string);\n\n  var result = [];\n  if (reLeadingDot.test(string)) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.difference` except that it accepts `iteratee` which\n * is invoked for each element of `array` and `values` to generate the criterion\n * by which they're compared. Result values are chosen from the first array.\n * The iteratee is invoked with one argument: (value).\n *\n * **Note:** Unlike `_.pullAllBy`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...Array} [values] The values to exclude.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n * @example\n *\n * _.differenceBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n * // => [1.2]\n *\n * // The `_.property` iteratee shorthand.\n * _.differenceBy([{ 'x': 2 }, { 'x': 1 }], [{ 'x': 1 }], 'x');\n * // => [{ 'x': 2 }]\n */\nvar differenceBy = baseRest(function(array, values) {\n  var iteratee = last(values);\n  if (isArrayLikeObject(iteratee)) {\n    iteratee = undefined;\n  }\n  return isArrayLikeObject(array)\n    ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), baseIteratee(iteratee, 2))\n    : [];\n});\n\n/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array ? array.length : 0;\n  return length ? array[length - 1] : undefined;\n}\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result);\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Assign cache to `_.memoize`.\nmemoize.Cache = MapCache;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = differenceBy;\n","// @flow\n\nconst payoutDistributionToCsv = require(\"./distributionToCsv\");\n// TODO (@topocount) enable cross-package Flow type and interface imports from\n// packages/sourcecred. This does NOT mean we should import functions from\n// packages/sourcecred though, since that'll create a circular depedency.\n// Code we want to import from core needs to be split out into it's own\n// package first.\nconst csvIntegration /*: any */ = (payoutDistributions, _unused_config) => {\n  const csvString = payoutDistributionToCsv(payoutDistributions);\n\n  const timestamp = Date.now();\n\n  return {\n    transferredGrain: [],\n    outputFile: {\n      // The timestamp suffix is used to enforce uniqueness of filenames\n      // Human-readable dates will be prefixed in SourceCred Core\n      fileName: `Payouts-${timestamp}.csv`,\n      content: csvString,\n    },\n  };\n};\n\nmodule.exports = { csvIntegration };\n","\"use strict\";\n\nmodule.exports = require(\"./Bottleneck\");","'use strict';\nconst fs = require('fs');\nconst arrayUnion = require('array-union');\nconst merge2 = require('merge2');\nconst fastGlob = require('fast-glob');\nconst dirGlob = require('dir-glob');\nconst gitignore = require('./gitignore');\nconst {FilterStream, UniqueStream} = require('./stream-utils');\n\nconst DEFAULT_FILTER = () => false;\n\nconst isNegative = pattern => pattern[0] === '!';\n\nconst assertPatternsInput = patterns => {\n\tif (!patterns.every(pattern => typeof pattern === 'string')) {\n\t\tthrow new TypeError('Patterns must be a string or an array of strings');\n\t}\n};\n\nconst checkCwdOption = (options = {}) => {\n\tif (!options.cwd) {\n\t\treturn;\n\t}\n\n\tlet stat;\n\ttry {\n\t\tstat = fs.statSync(options.cwd);\n\t} catch {\n\t\treturn;\n\t}\n\n\tif (!stat.isDirectory()) {\n\t\tthrow new Error('The `cwd` option must be a path to a directory');\n\t}\n};\n\nconst getPathString = p => p.stats instanceof fs.Stats ? p.path : p;\n\nconst generateGlobTasks = (patterns, taskOptions) => {\n\tpatterns = arrayUnion([].concat(patterns));\n\tassertPatternsInput(patterns);\n\tcheckCwdOption(taskOptions);\n\n\tconst globTasks = [];\n\n\ttaskOptions = {\n\t\tignore: [],\n\t\texpandDirectories: true,\n\t\t...taskOptions\n\t};\n\n\tfor (const [index, pattern] of patterns.entries()) {\n\t\tif (isNegative(pattern)) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst ignore = patterns\n\t\t\t.slice(index)\n\t\t\t.filter(pattern => isNegative(pattern))\n\t\t\t.map(pattern => pattern.slice(1));\n\n\t\tconst options = {\n\t\t\t...taskOptions,\n\t\t\tignore: taskOptions.ignore.concat(ignore)\n\t\t};\n\n\t\tglobTasks.push({pattern, options});\n\t}\n\n\treturn globTasks;\n};\n\nconst globDirs = (task, fn) => {\n\tlet options = {};\n\tif (task.options.cwd) {\n\t\toptions.cwd = task.options.cwd;\n\t}\n\n\tif (Array.isArray(task.options.expandDirectories)) {\n\t\toptions = {\n\t\t\t...options,\n\t\t\tfiles: task.options.expandDirectories\n\t\t};\n\t} else if (typeof task.options.expandDirectories === 'object') {\n\t\toptions = {\n\t\t\t...options,\n\t\t\t...task.options.expandDirectories\n\t\t};\n\t}\n\n\treturn fn(task.pattern, options);\n};\n\nconst getPattern = (task, fn) => task.options.expandDirectories ? globDirs(task, fn) : [task.pattern];\n\nconst getFilterSync = options => {\n\treturn options && options.gitignore ?\n\t\tgitignore.sync({cwd: options.cwd, ignore: options.ignore}) :\n\t\tDEFAULT_FILTER;\n};\n\nconst globToTask = task => glob => {\n\tconst {options} = task;\n\tif (options.ignore && Array.isArray(options.ignore) && options.expandDirectories) {\n\t\toptions.ignore = dirGlob.sync(options.ignore);\n\t}\n\n\treturn {\n\t\tpattern: glob,\n\t\toptions\n\t};\n};\n\nmodule.exports = async (patterns, options) => {\n\tconst globTasks = generateGlobTasks(patterns, options);\n\n\tconst getFilter = async () => {\n\t\treturn options && options.gitignore ?\n\t\t\tgitignore({cwd: options.cwd, ignore: options.ignore}) :\n\t\t\tDEFAULT_FILTER;\n\t};\n\n\tconst getTasks = async () => {\n\t\tconst tasks = await Promise.all(globTasks.map(async task => {\n\t\t\tconst globs = await getPattern(task, dirGlob);\n\t\t\treturn Promise.all(globs.map(globToTask(task)));\n\t\t}));\n\n\t\treturn arrayUnion(...tasks);\n\t};\n\n\tconst [filter, tasks] = await Promise.all([getFilter(), getTasks()]);\n\tconst paths = await Promise.all(tasks.map(task => fastGlob(task.pattern, task.options)));\n\n\treturn arrayUnion(...paths).filter(path_ => !filter(getPathString(path_)));\n};\n\nmodule.exports.sync = (patterns, options) => {\n\tconst globTasks = generateGlobTasks(patterns, options);\n\n\tconst tasks = [];\n\tfor (const task of globTasks) {\n\t\tconst newTask = getPattern(task, dirGlob.sync).map(globToTask(task));\n\t\ttasks.push(...newTask);\n\t}\n\n\tconst filter = getFilterSync(options);\n\n\tlet matches = [];\n\tfor (const task of tasks) {\n\t\tmatches = arrayUnion(matches, fastGlob.sync(task.pattern, task.options));\n\t}\n\n\treturn matches.filter(path_ => !filter(path_));\n};\n\nmodule.exports.stream = (patterns, options) => {\n\tconst globTasks = generateGlobTasks(patterns, options);\n\n\tconst tasks = [];\n\tfor (const task of globTasks) {\n\t\tconst newTask = getPattern(task, dirGlob.sync).map(globToTask(task));\n\t\ttasks.push(...newTask);\n\t}\n\n\tconst filter = getFilterSync(options);\n\tconst filterStream = new FilterStream(p => !filter(p));\n\tconst uniqueStream = new UniqueStream();\n\n\treturn merge2(tasks.map(task => fastGlob.stream(task.pattern, task.options)))\n\t\t.pipe(filterStream)\n\t\t.pipe(uniqueStream);\n};\n\nmodule.exports.generateGlobTasks = generateGlobTasks;\n\nmodule.exports.hasMagic = (patterns, options) => []\n\t.concat(patterns)\n\t.some(pattern => fastGlob.isDynamicPattern(pattern, options));\n\nmodule.exports.gitignore = gitignore;\n","exports.parse = require('./lib/parse');\nexports.stringify = require('./lib/stringify');\n","var at, // The index of the current character\n    ch, // The current character\n    escapee = {\n        '\"':  '\"',\n        '\\\\': '\\\\',\n        '/':  '/',\n        b:    '\\b',\n        f:    '\\f',\n        n:    '\\n',\n        r:    '\\r',\n        t:    '\\t'\n    },\n    text,\n\n    error = function (m) {\n        // Call error when something is wrong.\n        throw {\n            name:    'SyntaxError',\n            message: m,\n            at:      at,\n            text:    text\n        };\n    },\n    \n    next = function (c) {\n        // If a c parameter is provided, verify that it matches the current character.\n        if (c && c !== ch) {\n            error(\"Expected '\" + c + \"' instead of '\" + ch + \"'\");\n        }\n        \n        // Get the next character. When there are no more characters,\n        // return the empty string.\n        \n        ch = text.charAt(at);\n        at += 1;\n        return ch;\n    },\n    \n    number = function () {\n        // Parse a number value.\n        var number,\n            string = '';\n        \n        if (ch === '-') {\n            string = '-';\n            next('-');\n        }\n        while (ch >= '0' && ch <= '9') {\n            string += ch;\n            next();\n        }\n        if (ch === '.') {\n            string += '.';\n            while (next() && ch >= '0' && ch <= '9') {\n                string += ch;\n            }\n        }\n        if (ch === 'e' || ch === 'E') {\n            string += ch;\n            next();\n            if (ch === '-' || ch === '+') {\n                string += ch;\n                next();\n            }\n            while (ch >= '0' && ch <= '9') {\n                string += ch;\n                next();\n            }\n        }\n        number = +string;\n        if (!isFinite(number)) {\n            error(\"Bad number\");\n        } else {\n            return number;\n        }\n    },\n    \n    string = function () {\n        // Parse a string value.\n        var hex,\n            i,\n            string = '',\n            uffff;\n        \n        // When parsing for string values, we must look for \" and \\ characters.\n        if (ch === '\"') {\n            while (next()) {\n                if (ch === '\"') {\n                    next();\n                    return string;\n                } else if (ch === '\\\\') {\n                    next();\n                    if (ch === 'u') {\n                        uffff = 0;\n                        for (i = 0; i < 4; i += 1) {\n                            hex = parseInt(next(), 16);\n                            if (!isFinite(hex)) {\n                                break;\n                            }\n                            uffff = uffff * 16 + hex;\n                        }\n                        string += String.fromCharCode(uffff);\n                    } else if (typeof escapee[ch] === 'string') {\n                        string += escapee[ch];\n                    } else {\n                        break;\n                    }\n                } else {\n                    string += ch;\n                }\n            }\n        }\n        error(\"Bad string\");\n    },\n\n    white = function () {\n\n// Skip whitespace.\n\n        while (ch && ch <= ' ') {\n            next();\n        }\n    },\n\n    word = function () {\n\n// true, false, or null.\n\n        switch (ch) {\n        case 't':\n            next('t');\n            next('r');\n            next('u');\n            next('e');\n            return true;\n        case 'f':\n            next('f');\n            next('a');\n            next('l');\n            next('s');\n            next('e');\n            return false;\n        case 'n':\n            next('n');\n            next('u');\n            next('l');\n            next('l');\n            return null;\n        }\n        error(\"Unexpected '\" + ch + \"'\");\n    },\n\n    value,  // Place holder for the value function.\n\n    array = function () {\n\n// Parse an array value.\n\n        var array = [];\n\n        if (ch === '[') {\n            next('[');\n            white();\n            if (ch === ']') {\n                next(']');\n                return array;   // empty array\n            }\n            while (ch) {\n                array.push(value());\n                white();\n                if (ch === ']') {\n                    next(']');\n                    return array;\n                }\n                next(',');\n                white();\n            }\n        }\n        error(\"Bad array\");\n    },\n\n    object = function () {\n\n// Parse an object value.\n\n        var key,\n            object = {};\n\n        if (ch === '{') {\n            next('{');\n            white();\n            if (ch === '}') {\n                next('}');\n                return object;   // empty object\n            }\n            while (ch) {\n                key = string();\n                white();\n                next(':');\n                if (Object.hasOwnProperty.call(object, key)) {\n                    error('Duplicate key \"' + key + '\"');\n                }\n                object[key] = value();\n                white();\n                if (ch === '}') {\n                    next('}');\n                    return object;\n                }\n                next(',');\n                white();\n            }\n        }\n        error(\"Bad object\");\n    };\n\nvalue = function () {\n\n// Parse a JSON value. It could be an object, an array, a string, a number,\n// or a word.\n\n    white();\n    switch (ch) {\n    case '{':\n        return object();\n    case '[':\n        return array();\n    case '\"':\n        return string();\n    case '-':\n        return number();\n    default:\n        return ch >= '0' && ch <= '9' ? number() : word();\n    }\n};\n\n// Return the json_parse function. It will have access to all of the above\n// functions and variables.\n\nmodule.exports = function (source, reviver) {\n    var result;\n    \n    text = source;\n    at = 0;\n    ch = ' ';\n    result = value();\n    white();\n    if (ch) {\n        error(\"Syntax error\");\n    }\n\n    // If there is a reviver function, we recursively walk the new structure,\n    // passing each name/value pair to the reviver function for possible\n    // transformation, starting with a temporary root object that holds the result\n    // in an empty key. If there is not a reviver function, we simply return the\n    // result.\n\n    return typeof reviver === 'function' ? (function walk(holder, key) {\n        var k, v, value = holder[key];\n        if (value && typeof value === 'object') {\n            for (k in value) {\n                if (Object.prototype.hasOwnProperty.call(value, k)) {\n                    v = walk(value, k);\n                    if (v !== undefined) {\n                        value[k] = v;\n                    } else {\n                        delete value[k];\n                    }\n                }\n            }\n        }\n        return reviver.call(holder, key, value);\n    }({'': result}, '')) : result;\n};\n","var cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n    escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n    gap,\n    indent,\n    meta = {    // table of character substitutions\n        '\\b': '\\\\b',\n        '\\t': '\\\\t',\n        '\\n': '\\\\n',\n        '\\f': '\\\\f',\n        '\\r': '\\\\r',\n        '\"' : '\\\\\"',\n        '\\\\': '\\\\\\\\'\n    },\n    rep;\n\nfunction quote(string) {\n    // If the string contains no control characters, no quote characters, and no\n    // backslash characters, then we can safely slap some quotes around it.\n    // Otherwise we must also replace the offending characters with safe escape\n    // sequences.\n    \n    escapable.lastIndex = 0;\n    return escapable.test(string) ? '\"' + string.replace(escapable, function (a) {\n        var c = meta[a];\n        return typeof c === 'string' ? c :\n            '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n    }) + '\"' : '\"' + string + '\"';\n}\n\nfunction str(key, holder) {\n    // Produce a string from holder[key].\n    var i,          // The loop counter.\n        k,          // The member key.\n        v,          // The member value.\n        length,\n        mind = gap,\n        partial,\n        value = holder[key];\n    \n    // If the value has a toJSON method, call it to obtain a replacement value.\n    if (value && typeof value === 'object' &&\n            typeof value.toJSON === 'function') {\n        value = value.toJSON(key);\n    }\n    \n    // If we were called with a replacer function, then call the replacer to\n    // obtain a replacement value.\n    if (typeof rep === 'function') {\n        value = rep.call(holder, key, value);\n    }\n    \n    // What happens next depends on the value's type.\n    switch (typeof value) {\n        case 'string':\n            return quote(value);\n        \n        case 'number':\n            // JSON numbers must be finite. Encode non-finite numbers as null.\n            return isFinite(value) ? String(value) : 'null';\n        \n        case 'boolean':\n        case 'null':\n            // If the value is a boolean or null, convert it to a string. Note:\n            // typeof null does not produce 'null'. The case is included here in\n            // the remote chance that this gets fixed someday.\n            return String(value);\n            \n        case 'object':\n            if (!value) return 'null';\n            gap += indent;\n            partial = [];\n            \n            // Array.isArray\n            if (Object.prototype.toString.apply(value) === '[object Array]') {\n                length = value.length;\n                for (i = 0; i < length; i += 1) {\n                    partial[i] = str(i, value) || 'null';\n                }\n                \n                // Join all of the elements together, separated with commas, and\n                // wrap them in brackets.\n                v = partial.length === 0 ? '[]' : gap ?\n                    '[\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + ']' :\n                    '[' + partial.join(',') + ']';\n                gap = mind;\n                return v;\n            }\n            \n            // If the replacer is an array, use it to select the members to be\n            // stringified.\n            if (rep && typeof rep === 'object') {\n                length = rep.length;\n                for (i = 0; i < length; i += 1) {\n                    k = rep[i];\n                    if (typeof k === 'string') {\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                        }\n                    }\n                }\n            }\n            else {\n                // Otherwise, iterate through all of the keys in the object.\n                for (k in value) {\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                        }\n                    }\n                }\n            }\n            \n        // Join all of the member texts together, separated with commas,\n        // and wrap them in braces.\n\n        v = partial.length === 0 ? '{}' : gap ?\n            '{\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + '}' :\n            '{' + partial.join(',') + '}';\n        gap = mind;\n        return v;\n    }\n}\n\nmodule.exports = function (value, replacer, space) {\n    var i;\n    gap = '';\n    indent = '';\n    \n    // If the space parameter is a number, make an indent string containing that\n    // many spaces.\n    if (typeof space === 'number') {\n        for (i = 0; i < space; i += 1) {\n            indent += ' ';\n        }\n    }\n    // If the space parameter is a string, it will be used as the indent string.\n    else if (typeof space === 'string') {\n        indent = space;\n    }\n\n    // If there is a replacer, it must be a function or an array.\n    // Otherwise, throw an error.\n    rep = replacer;\n    if (replacer && typeof replacer !== 'function'\n    && (typeof replacer !== 'object' || typeof replacer.length !== 'number')) {\n        throw new Error('JSON.stringify');\n    }\n    \n    // Make a fake root object containing our value under the key of ''.\n    // Return the result of stringifying the value.\n    return str('', {'': value});\n};\n","'use strict';\n\nvar BN = require('bn.js');\nvar numberToBN = require('number-to-bn');\n\nvar zero = new BN(0);\nvar negative1 = new BN(-1);\n\n// complete ethereum unit map\nvar unitMap = {\n  'noether': '0', // eslint-disable-line\n  'wei': '1', // eslint-disable-line\n  'kwei': '1000', // eslint-disable-line\n  'Kwei': '1000', // eslint-disable-line\n  'babbage': '1000', // eslint-disable-line\n  'femtoether': '1000', // eslint-disable-line\n  'mwei': '1000000', // eslint-disable-line\n  'Mwei': '1000000', // eslint-disable-line\n  'lovelace': '1000000', // eslint-disable-line\n  'picoether': '1000000', // eslint-disable-line\n  'gwei': '1000000000', // eslint-disable-line\n  'Gwei': '1000000000', // eslint-disable-line\n  'shannon': '1000000000', // eslint-disable-line\n  'nanoether': '1000000000', // eslint-disable-line\n  'nano': '1000000000', // eslint-disable-line\n  'szabo': '1000000000000', // eslint-disable-line\n  'microether': '1000000000000', // eslint-disable-line\n  'micro': '1000000000000', // eslint-disable-line\n  'finney': '1000000000000000', // eslint-disable-line\n  'milliether': '1000000000000000', // eslint-disable-line\n  'milli': '1000000000000000', // eslint-disable-line\n  'ether': '1000000000000000000', // eslint-disable-line\n  'kether': '1000000000000000000000', // eslint-disable-line\n  'grand': '1000000000000000000000', // eslint-disable-line\n  'mether': '1000000000000000000000000', // eslint-disable-line\n  'gether': '1000000000000000000000000000', // eslint-disable-line\n  'tether': '1000000000000000000000000000000' };\n\n/**\n * Returns value of unit in Wei\n *\n * @method getValueOfUnit\n * @param {String} unit the unit to convert to, default ether\n * @returns {BigNumber} value of the unit (in Wei)\n * @throws error if the unit is not correct:w\n */\nfunction getValueOfUnit(unitInput) {\n  var unit = unitInput ? unitInput.toLowerCase() : 'ether';\n  var unitValue = unitMap[unit]; // eslint-disable-line\n\n  if (typeof unitValue !== 'string') {\n    throw new Error('[ethjs-unit] the unit provided ' + unitInput + ' doesn\\'t exists, please use the one of the following units ' + JSON.stringify(unitMap, null, 2));\n  }\n\n  return new BN(unitValue, 10);\n}\n\nfunction numberToString(arg) {\n  if (typeof arg === 'string') {\n    if (!arg.match(/^-?[0-9.]+$/)) {\n      throw new Error('while converting number to string, invalid number value \\'' + arg + '\\', should be a number matching (^-?[0-9.]+).');\n    }\n    return arg;\n  } else if (typeof arg === 'number') {\n    return String(arg);\n  } else if (typeof arg === 'object' && arg.toString && (arg.toTwos || arg.dividedToIntegerBy)) {\n    if (arg.toPrecision) {\n      return String(arg.toPrecision());\n    } else {\n      // eslint-disable-line\n      return arg.toString(10);\n    }\n  }\n  throw new Error('while converting number to string, invalid number value \\'' + arg + '\\' type ' + typeof arg + '.');\n}\n\nfunction fromWei(weiInput, unit, optionsInput) {\n  var wei = numberToBN(weiInput); // eslint-disable-line\n  var negative = wei.lt(zero); // eslint-disable-line\n  var base = getValueOfUnit(unit);\n  var baseLength = unitMap[unit].length - 1 || 1;\n  var options = optionsInput || {};\n\n  if (negative) {\n    wei = wei.mul(negative1);\n  }\n\n  var fraction = wei.mod(base).toString(10); // eslint-disable-line\n\n  while (fraction.length < baseLength) {\n    fraction = '0' + fraction;\n  }\n\n  if (!options.pad) {\n    fraction = fraction.match(/^([0-9]*[1-9]|0)(0*)/)[1];\n  }\n\n  var whole = wei.div(base).toString(10); // eslint-disable-line\n\n  if (options.commify) {\n    whole = whole.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n  }\n\n  var value = '' + whole + (fraction == '0' ? '' : '.' + fraction); // eslint-disable-line\n\n  if (negative) {\n    value = '-' + value;\n  }\n\n  return value;\n}\n\nfunction toWei(etherInput, unit) {\n  var ether = numberToString(etherInput); // eslint-disable-line\n  var base = getValueOfUnit(unit);\n  var baseLength = unitMap[unit].length - 1 || 1;\n\n  // Is it negative?\n  var negative = ether.substring(0, 1) === '-'; // eslint-disable-line\n  if (negative) {\n    ether = ether.substring(1);\n  }\n\n  if (ether === '.') {\n    throw new Error('[ethjs-unit] while converting number ' + etherInput + ' to wei, invalid value');\n  }\n\n  // Split it into a whole and fractional part\n  var comps = ether.split('.'); // eslint-disable-line\n  if (comps.length > 2) {\n    throw new Error('[ethjs-unit] while converting number ' + etherInput + ' to wei,  too many decimal points');\n  }\n\n  var whole = comps[0],\n      fraction = comps[1]; // eslint-disable-line\n\n  if (!whole) {\n    whole = '0';\n  }\n  if (!fraction) {\n    fraction = '0';\n  }\n  if (fraction.length > baseLength) {\n    throw new Error('[ethjs-unit] while converting number ' + etherInput + ' to wei, too many decimal places');\n  }\n\n  while (fraction.length < baseLength) {\n    fraction += '0';\n  }\n\n  whole = new BN(whole);\n  fraction = new BN(fraction);\n  var wei = whole.mul(base).add(fraction); // eslint-disable-line\n\n  if (negative) {\n    wei = wei.mul(negative1);\n  }\n\n  return new BN(wei.toString(10), 10);\n}\n\nmodule.exports = {\n  unitMap: unitMap,\n  numberToString: numberToString,\n  getValueOfUnit: getValueOfUnit,\n  fromWei: fromWei,\n  toWei: toWei\n};","(function (module, exports) {\n  'use strict';\n\n  // Utils\n  function assert (val, msg) {\n    if (!val) throw new Error(msg || 'Assertion failed');\n  }\n\n  // Could use `inherits` module, but don't want to move from single file\n  // architecture yet.\n  function inherits (ctor, superCtor) {\n    ctor.super_ = superCtor;\n    var TempCtor = function () {};\n    TempCtor.prototype = superCtor.prototype;\n    ctor.prototype = new TempCtor();\n    ctor.prototype.constructor = ctor;\n  }\n\n  // BN\n\n  function BN (number, base, endian) {\n    if (BN.isBN(number)) {\n      return number;\n    }\n\n    this.negative = 0;\n    this.words = null;\n    this.length = 0;\n\n    // Reduction context\n    this.red = null;\n\n    if (number !== null) {\n      if (base === 'le' || base === 'be') {\n        endian = base;\n        base = 10;\n      }\n\n      this._init(number || 0, base || 10, endian || 'be');\n    }\n  }\n  if (typeof module === 'object') {\n    module.exports = BN;\n  } else {\n    exports.BN = BN;\n  }\n\n  BN.BN = BN;\n  BN.wordSize = 26;\n\n  var Buffer;\n  try {\n    Buffer = require('buf' + 'fer').Buffer;\n  } catch (e) {\n  }\n\n  BN.isBN = function isBN (num) {\n    if (num instanceof BN) {\n      return true;\n    }\n\n    return num !== null && typeof num === 'object' &&\n      num.constructor.wordSize === BN.wordSize && Array.isArray(num.words);\n  };\n\n  BN.max = function max (left, right) {\n    if (left.cmp(right) > 0) return left;\n    return right;\n  };\n\n  BN.min = function min (left, right) {\n    if (left.cmp(right) < 0) return left;\n    return right;\n  };\n\n  BN.prototype._init = function init (number, base, endian) {\n    if (typeof number === 'number') {\n      return this._initNumber(number, base, endian);\n    }\n\n    if (typeof number === 'object') {\n      return this._initArray(number, base, endian);\n    }\n\n    if (base === 'hex') {\n      base = 16;\n    }\n    assert(base === (base | 0) && base >= 2 && base <= 36);\n\n    number = number.toString().replace(/\\s+/g, '');\n    var start = 0;\n    if (number[0] === '-') {\n      start++;\n    }\n\n    if (base === 16) {\n      this._parseHex(number, start);\n    } else {\n      this._parseBase(number, base, start);\n    }\n\n    if (number[0] === '-') {\n      this.negative = 1;\n    }\n\n    this.strip();\n\n    if (endian !== 'le') return;\n\n    this._initArray(this.toArray(), base, endian);\n  };\n\n  BN.prototype._initNumber = function _initNumber (number, base, endian) {\n    if (number < 0) {\n      this.negative = 1;\n      number = -number;\n    }\n    if (number < 0x4000000) {\n      this.words = [ number & 0x3ffffff ];\n      this.length = 1;\n    } else if (number < 0x10000000000000) {\n      this.words = [\n        number & 0x3ffffff,\n        (number / 0x4000000) & 0x3ffffff\n      ];\n      this.length = 2;\n    } else {\n      assert(number < 0x20000000000000); // 2 ^ 53 (unsafe)\n      this.words = [\n        number & 0x3ffffff,\n        (number / 0x4000000) & 0x3ffffff,\n        1\n      ];\n      this.length = 3;\n    }\n\n    if (endian !== 'le') return;\n\n    // Reverse the bytes\n    this._initArray(this.toArray(), base, endian);\n  };\n\n  BN.prototype._initArray = function _initArray (number, base, endian) {\n    // Perhaps a Uint8Array\n    assert(typeof number.length === 'number');\n    if (number.length <= 0) {\n      this.words = [ 0 ];\n      this.length = 1;\n      return this;\n    }\n\n    this.length = Math.ceil(number.length / 3);\n    this.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      this.words[i] = 0;\n    }\n\n    var j, w;\n    var off = 0;\n    if (endian === 'be') {\n      for (i = number.length - 1, j = 0; i >= 0; i -= 3) {\n        w = number[i] | (number[i - 1] << 8) | (number[i - 2] << 16);\n        this.words[j] |= (w << off) & 0x3ffffff;\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\n        off += 24;\n        if (off >= 26) {\n          off -= 26;\n          j++;\n        }\n      }\n    } else if (endian === 'le') {\n      for (i = 0, j = 0; i < number.length; i += 3) {\n        w = number[i] | (number[i + 1] << 8) | (number[i + 2] << 16);\n        this.words[j] |= (w << off) & 0x3ffffff;\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\n        off += 24;\n        if (off >= 26) {\n          off -= 26;\n          j++;\n        }\n      }\n    }\n    return this.strip();\n  };\n\n  function parseHex (str, start, end) {\n    var r = 0;\n    var len = Math.min(str.length, end);\n    for (var i = start; i < len; i++) {\n      var c = str.charCodeAt(i) - 48;\n\n      r <<= 4;\n\n      // 'a' - 'f'\n      if (c >= 49 && c <= 54) {\n        r |= c - 49 + 0xa;\n\n      // 'A' - 'F'\n      } else if (c >= 17 && c <= 22) {\n        r |= c - 17 + 0xa;\n\n      // '0' - '9'\n      } else {\n        r |= c & 0xf;\n      }\n    }\n    return r;\n  }\n\n  BN.prototype._parseHex = function _parseHex (number, start) {\n    // Create possibly bigger array to ensure that it fits the number\n    this.length = Math.ceil((number.length - start) / 6);\n    this.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      this.words[i] = 0;\n    }\n\n    var j, w;\n    // Scan 24-bit chunks and add them to the number\n    var off = 0;\n    for (i = number.length - 6, j = 0; i >= start; i -= 6) {\n      w = parseHex(number, i, i + 6);\n      this.words[j] |= (w << off) & 0x3ffffff;\n      // NOTE: `0x3fffff` is intentional here, 26bits max shift + 24bit hex limb\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\n      off += 24;\n      if (off >= 26) {\n        off -= 26;\n        j++;\n      }\n    }\n    if (i + 6 !== start) {\n      w = parseHex(number, start, i + 6);\n      this.words[j] |= (w << off) & 0x3ffffff;\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\n    }\n    this.strip();\n  };\n\n  function parseBase (str, start, end, mul) {\n    var r = 0;\n    var len = Math.min(str.length, end);\n    for (var i = start; i < len; i++) {\n      var c = str.charCodeAt(i) - 48;\n\n      r *= mul;\n\n      // 'a'\n      if (c >= 49) {\n        r += c - 49 + 0xa;\n\n      // 'A'\n      } else if (c >= 17) {\n        r += c - 17 + 0xa;\n\n      // '0' - '9'\n      } else {\n        r += c;\n      }\n    }\n    return r;\n  }\n\n  BN.prototype._parseBase = function _parseBase (number, base, start) {\n    // Initialize as zero\n    this.words = [ 0 ];\n    this.length = 1;\n\n    // Find length of limb in base\n    for (var limbLen = 0, limbPow = 1; limbPow <= 0x3ffffff; limbPow *= base) {\n      limbLen++;\n    }\n    limbLen--;\n    limbPow = (limbPow / base) | 0;\n\n    var total = number.length - start;\n    var mod = total % limbLen;\n    var end = Math.min(total, total - mod) + start;\n\n    var word = 0;\n    for (var i = start; i < end; i += limbLen) {\n      word = parseBase(number, i, i + limbLen, base);\n\n      this.imuln(limbPow);\n      if (this.words[0] + word < 0x4000000) {\n        this.words[0] += word;\n      } else {\n        this._iaddn(word);\n      }\n    }\n\n    if (mod !== 0) {\n      var pow = 1;\n      word = parseBase(number, i, number.length, base);\n\n      for (i = 0; i < mod; i++) {\n        pow *= base;\n      }\n\n      this.imuln(pow);\n      if (this.words[0] + word < 0x4000000) {\n        this.words[0] += word;\n      } else {\n        this._iaddn(word);\n      }\n    }\n  };\n\n  BN.prototype.copy = function copy (dest) {\n    dest.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      dest.words[i] = this.words[i];\n    }\n    dest.length = this.length;\n    dest.negative = this.negative;\n    dest.red = this.red;\n  };\n\n  BN.prototype.clone = function clone () {\n    var r = new BN(null);\n    this.copy(r);\n    return r;\n  };\n\n  BN.prototype._expand = function _expand (size) {\n    while (this.length < size) {\n      this.words[this.length++] = 0;\n    }\n    return this;\n  };\n\n  // Remove leading `0` from `this`\n  BN.prototype.strip = function strip () {\n    while (this.length > 1 && this.words[this.length - 1] === 0) {\n      this.length--;\n    }\n    return this._normSign();\n  };\n\n  BN.prototype._normSign = function _normSign () {\n    // -0 = 0\n    if (this.length === 1 && this.words[0] === 0) {\n      this.negative = 0;\n    }\n    return this;\n  };\n\n  BN.prototype.inspect = function inspect () {\n    return (this.red ? '<BN-R: ' : '<BN: ') + this.toString(16) + '>';\n  };\n\n  /*\n\n  var zeros = [];\n  var groupSizes = [];\n  var groupBases = [];\n\n  var s = '';\n  var i = -1;\n  while (++i < BN.wordSize) {\n    zeros[i] = s;\n    s += '0';\n  }\n  groupSizes[0] = 0;\n  groupSizes[1] = 0;\n  groupBases[0] = 0;\n  groupBases[1] = 0;\n  var base = 2 - 1;\n  while (++base < 36 + 1) {\n    var groupSize = 0;\n    var groupBase = 1;\n    while (groupBase < (1 << BN.wordSize) / base) {\n      groupBase *= base;\n      groupSize += 1;\n    }\n    groupSizes[base] = groupSize;\n    groupBases[base] = groupBase;\n  }\n\n  */\n\n  var zeros = [\n    '',\n    '0',\n    '00',\n    '000',\n    '0000',\n    '00000',\n    '000000',\n    '0000000',\n    '00000000',\n    '000000000',\n    '0000000000',\n    '00000000000',\n    '000000000000',\n    '0000000000000',\n    '00000000000000',\n    '000000000000000',\n    '0000000000000000',\n    '00000000000000000',\n    '000000000000000000',\n    '0000000000000000000',\n    '00000000000000000000',\n    '000000000000000000000',\n    '0000000000000000000000',\n    '00000000000000000000000',\n    '000000000000000000000000',\n    '0000000000000000000000000'\n  ];\n\n  var groupSizes = [\n    0, 0,\n    25, 16, 12, 11, 10, 9, 8,\n    8, 7, 7, 7, 7, 6, 6,\n    6, 6, 6, 6, 6, 5, 5,\n    5, 5, 5, 5, 5, 5, 5,\n    5, 5, 5, 5, 5, 5, 5\n  ];\n\n  var groupBases = [\n    0, 0,\n    33554432, 43046721, 16777216, 48828125, 60466176, 40353607, 16777216,\n    43046721, 10000000, 19487171, 35831808, 62748517, 7529536, 11390625,\n    16777216, 24137569, 34012224, 47045881, 64000000, 4084101, 5153632,\n    6436343, 7962624, 9765625, 11881376, 14348907, 17210368, 20511149,\n    24300000, 28629151, 33554432, 39135393, 45435424, 52521875, 60466176\n  ];\n\n  BN.prototype.toString = function toString (base, padding) {\n    base = base || 10;\n    padding = padding | 0 || 1;\n\n    var out;\n    if (base === 16 || base === 'hex') {\n      out = '';\n      var off = 0;\n      var carry = 0;\n      for (var i = 0; i < this.length; i++) {\n        var w = this.words[i];\n        var word = (((w << off) | carry) & 0xffffff).toString(16);\n        carry = (w >>> (24 - off)) & 0xffffff;\n        if (carry !== 0 || i !== this.length - 1) {\n          out = zeros[6 - word.length] + word + out;\n        } else {\n          out = word + out;\n        }\n        off += 2;\n        if (off >= 26) {\n          off -= 26;\n          i--;\n        }\n      }\n      if (carry !== 0) {\n        out = carry.toString(16) + out;\n      }\n      while (out.length % padding !== 0) {\n        out = '0' + out;\n      }\n      if (this.negative !== 0) {\n        out = '-' + out;\n      }\n      return out;\n    }\n\n    if (base === (base | 0) && base >= 2 && base <= 36) {\n      // var groupSize = Math.floor(BN.wordSize * Math.LN2 / Math.log(base));\n      var groupSize = groupSizes[base];\n      // var groupBase = Math.pow(base, groupSize);\n      var groupBase = groupBases[base];\n      out = '';\n      var c = this.clone();\n      c.negative = 0;\n      while (!c.isZero()) {\n        var r = c.modn(groupBase).toString(base);\n        c = c.idivn(groupBase);\n\n        if (!c.isZero()) {\n          out = zeros[groupSize - r.length] + r + out;\n        } else {\n          out = r + out;\n        }\n      }\n      if (this.isZero()) {\n        out = '0' + out;\n      }\n      while (out.length % padding !== 0) {\n        out = '0' + out;\n      }\n      if (this.negative !== 0) {\n        out = '-' + out;\n      }\n      return out;\n    }\n\n    assert(false, 'Base should be between 2 and 36');\n  };\n\n  BN.prototype.toNumber = function toNumber () {\n    var ret = this.words[0];\n    if (this.length === 2) {\n      ret += this.words[1] * 0x4000000;\n    } else if (this.length === 3 && this.words[2] === 0x01) {\n      // NOTE: at this stage it is known that the top bit is set\n      ret += 0x10000000000000 + (this.words[1] * 0x4000000);\n    } else if (this.length > 2) {\n      assert(false, 'Number can only safely store up to 53 bits');\n    }\n    return (this.negative !== 0) ? -ret : ret;\n  };\n\n  BN.prototype.toJSON = function toJSON () {\n    return this.toString(16);\n  };\n\n  BN.prototype.toBuffer = function toBuffer (endian, length) {\n    assert(typeof Buffer !== 'undefined');\n    return this.toArrayLike(Buffer, endian, length);\n  };\n\n  BN.prototype.toArray = function toArray (endian, length) {\n    return this.toArrayLike(Array, endian, length);\n  };\n\n  BN.prototype.toArrayLike = function toArrayLike (ArrayType, endian, length) {\n    var byteLength = this.byteLength();\n    var reqLength = length || Math.max(1, byteLength);\n    assert(byteLength <= reqLength, 'byte array longer than desired length');\n    assert(reqLength > 0, 'Requested array length <= 0');\n\n    this.strip();\n    var littleEndian = endian === 'le';\n    var res = new ArrayType(reqLength);\n\n    var b, i;\n    var q = this.clone();\n    if (!littleEndian) {\n      // Assume big-endian\n      for (i = 0; i < reqLength - byteLength; i++) {\n        res[i] = 0;\n      }\n\n      for (i = 0; !q.isZero(); i++) {\n        b = q.andln(0xff);\n        q.iushrn(8);\n\n        res[reqLength - i - 1] = b;\n      }\n    } else {\n      for (i = 0; !q.isZero(); i++) {\n        b = q.andln(0xff);\n        q.iushrn(8);\n\n        res[i] = b;\n      }\n\n      for (; i < reqLength; i++) {\n        res[i] = 0;\n      }\n    }\n\n    return res;\n  };\n\n  if (Math.clz32) {\n    BN.prototype._countBits = function _countBits (w) {\n      return 32 - Math.clz32(w);\n    };\n  } else {\n    BN.prototype._countBits = function _countBits (w) {\n      var t = w;\n      var r = 0;\n      if (t >= 0x1000) {\n        r += 13;\n        t >>>= 13;\n      }\n      if (t >= 0x40) {\n        r += 7;\n        t >>>= 7;\n      }\n      if (t >= 0x8) {\n        r += 4;\n        t >>>= 4;\n      }\n      if (t >= 0x02) {\n        r += 2;\n        t >>>= 2;\n      }\n      return r + t;\n    };\n  }\n\n  BN.prototype._zeroBits = function _zeroBits (w) {\n    // Short-cut\n    if (w === 0) return 26;\n\n    var t = w;\n    var r = 0;\n    if ((t & 0x1fff) === 0) {\n      r += 13;\n      t >>>= 13;\n    }\n    if ((t & 0x7f) === 0) {\n      r += 7;\n      t >>>= 7;\n    }\n    if ((t & 0xf) === 0) {\n      r += 4;\n      t >>>= 4;\n    }\n    if ((t & 0x3) === 0) {\n      r += 2;\n      t >>>= 2;\n    }\n    if ((t & 0x1) === 0) {\n      r++;\n    }\n    return r;\n  };\n\n  // Return number of used bits in a BN\n  BN.prototype.bitLength = function bitLength () {\n    var w = this.words[this.length - 1];\n    var hi = this._countBits(w);\n    return (this.length - 1) * 26 + hi;\n  };\n\n  function toBitArray (num) {\n    var w = new Array(num.bitLength());\n\n    for (var bit = 0; bit < w.length; bit++) {\n      var off = (bit / 26) | 0;\n      var wbit = bit % 26;\n\n      w[bit] = (num.words[off] & (1 << wbit)) >>> wbit;\n    }\n\n    return w;\n  }\n\n  // Number of trailing zero bits\n  BN.prototype.zeroBits = function zeroBits () {\n    if (this.isZero()) return 0;\n\n    var r = 0;\n    for (var i = 0; i < this.length; i++) {\n      var b = this._zeroBits(this.words[i]);\n      r += b;\n      if (b !== 26) break;\n    }\n    return r;\n  };\n\n  BN.prototype.byteLength = function byteLength () {\n    return Math.ceil(this.bitLength() / 8);\n  };\n\n  BN.prototype.toTwos = function toTwos (width) {\n    if (this.negative !== 0) {\n      return this.abs().inotn(width).iaddn(1);\n    }\n    return this.clone();\n  };\n\n  BN.prototype.fromTwos = function fromTwos (width) {\n    if (this.testn(width - 1)) {\n      return this.notn(width).iaddn(1).ineg();\n    }\n    return this.clone();\n  };\n\n  BN.prototype.isNeg = function isNeg () {\n    return this.negative !== 0;\n  };\n\n  // Return negative clone of `this`\n  BN.prototype.neg = function neg () {\n    return this.clone().ineg();\n  };\n\n  BN.prototype.ineg = function ineg () {\n    if (!this.isZero()) {\n      this.negative ^= 1;\n    }\n\n    return this;\n  };\n\n  // Or `num` with `this` in-place\n  BN.prototype.iuor = function iuor (num) {\n    while (this.length < num.length) {\n      this.words[this.length++] = 0;\n    }\n\n    for (var i = 0; i < num.length; i++) {\n      this.words[i] = this.words[i] | num.words[i];\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.ior = function ior (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuor(num);\n  };\n\n  // Or `num` with `this`\n  BN.prototype.or = function or (num) {\n    if (this.length > num.length) return this.clone().ior(num);\n    return num.clone().ior(this);\n  };\n\n  BN.prototype.uor = function uor (num) {\n    if (this.length > num.length) return this.clone().iuor(num);\n    return num.clone().iuor(this);\n  };\n\n  // And `num` with `this` in-place\n  BN.prototype.iuand = function iuand (num) {\n    // b = min-length(num, this)\n    var b;\n    if (this.length > num.length) {\n      b = num;\n    } else {\n      b = this;\n    }\n\n    for (var i = 0; i < b.length; i++) {\n      this.words[i] = this.words[i] & num.words[i];\n    }\n\n    this.length = b.length;\n\n    return this.strip();\n  };\n\n  BN.prototype.iand = function iand (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuand(num);\n  };\n\n  // And `num` with `this`\n  BN.prototype.and = function and (num) {\n    if (this.length > num.length) return this.clone().iand(num);\n    return num.clone().iand(this);\n  };\n\n  BN.prototype.uand = function uand (num) {\n    if (this.length > num.length) return this.clone().iuand(num);\n    return num.clone().iuand(this);\n  };\n\n  // Xor `num` with `this` in-place\n  BN.prototype.iuxor = function iuxor (num) {\n    // a.length > b.length\n    var a;\n    var b;\n    if (this.length > num.length) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    for (var i = 0; i < b.length; i++) {\n      this.words[i] = a.words[i] ^ b.words[i];\n    }\n\n    if (this !== a) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    this.length = a.length;\n\n    return this.strip();\n  };\n\n  BN.prototype.ixor = function ixor (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuxor(num);\n  };\n\n  // Xor `num` with `this`\n  BN.prototype.xor = function xor (num) {\n    if (this.length > num.length) return this.clone().ixor(num);\n    return num.clone().ixor(this);\n  };\n\n  BN.prototype.uxor = function uxor (num) {\n    if (this.length > num.length) return this.clone().iuxor(num);\n    return num.clone().iuxor(this);\n  };\n\n  // Not ``this`` with ``width`` bitwidth\n  BN.prototype.inotn = function inotn (width) {\n    assert(typeof width === 'number' && width >= 0);\n\n    var bytesNeeded = Math.ceil(width / 26) | 0;\n    var bitsLeft = width % 26;\n\n    // Extend the buffer with leading zeroes\n    this._expand(bytesNeeded);\n\n    if (bitsLeft > 0) {\n      bytesNeeded--;\n    }\n\n    // Handle complete words\n    for (var i = 0; i < bytesNeeded; i++) {\n      this.words[i] = ~this.words[i] & 0x3ffffff;\n    }\n\n    // Handle the residue\n    if (bitsLeft > 0) {\n      this.words[i] = ~this.words[i] & (0x3ffffff >> (26 - bitsLeft));\n    }\n\n    // And remove leading zeroes\n    return this.strip();\n  };\n\n  BN.prototype.notn = function notn (width) {\n    return this.clone().inotn(width);\n  };\n\n  // Set `bit` of `this`\n  BN.prototype.setn = function setn (bit, val) {\n    assert(typeof bit === 'number' && bit >= 0);\n\n    var off = (bit / 26) | 0;\n    var wbit = bit % 26;\n\n    this._expand(off + 1);\n\n    if (val) {\n      this.words[off] = this.words[off] | (1 << wbit);\n    } else {\n      this.words[off] = this.words[off] & ~(1 << wbit);\n    }\n\n    return this.strip();\n  };\n\n  // Add `num` to `this` in-place\n  BN.prototype.iadd = function iadd (num) {\n    var r;\n\n    // negative + positive\n    if (this.negative !== 0 && num.negative === 0) {\n      this.negative = 0;\n      r = this.isub(num);\n      this.negative ^= 1;\n      return this._normSign();\n\n    // positive + negative\n    } else if (this.negative === 0 && num.negative !== 0) {\n      num.negative = 0;\n      r = this.isub(num);\n      num.negative = 1;\n      return r._normSign();\n    }\n\n    // a.length > b.length\n    var a, b;\n    if (this.length > num.length) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    var carry = 0;\n    for (var i = 0; i < b.length; i++) {\n      r = (a.words[i] | 0) + (b.words[i] | 0) + carry;\n      this.words[i] = r & 0x3ffffff;\n      carry = r >>> 26;\n    }\n    for (; carry !== 0 && i < a.length; i++) {\n      r = (a.words[i] | 0) + carry;\n      this.words[i] = r & 0x3ffffff;\n      carry = r >>> 26;\n    }\n\n    this.length = a.length;\n    if (carry !== 0) {\n      this.words[this.length] = carry;\n      this.length++;\n    // Copy the rest of the words\n    } else if (a !== this) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    return this;\n  };\n\n  // Add `num` to `this`\n  BN.prototype.add = function add (num) {\n    var res;\n    if (num.negative !== 0 && this.negative === 0) {\n      num.negative = 0;\n      res = this.sub(num);\n      num.negative ^= 1;\n      return res;\n    } else if (num.negative === 0 && this.negative !== 0) {\n      this.negative = 0;\n      res = num.sub(this);\n      this.negative = 1;\n      return res;\n    }\n\n    if (this.length > num.length) return this.clone().iadd(num);\n\n    return num.clone().iadd(this);\n  };\n\n  // Subtract `num` from `this` in-place\n  BN.prototype.isub = function isub (num) {\n    // this - (-num) = this + num\n    if (num.negative !== 0) {\n      num.negative = 0;\n      var r = this.iadd(num);\n      num.negative = 1;\n      return r._normSign();\n\n    // -this - num = -(this + num)\n    } else if (this.negative !== 0) {\n      this.negative = 0;\n      this.iadd(num);\n      this.negative = 1;\n      return this._normSign();\n    }\n\n    // At this point both numbers are positive\n    var cmp = this.cmp(num);\n\n    // Optimization - zeroify\n    if (cmp === 0) {\n      this.negative = 0;\n      this.length = 1;\n      this.words[0] = 0;\n      return this;\n    }\n\n    // a > b\n    var a, b;\n    if (cmp > 0) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    var carry = 0;\n    for (var i = 0; i < b.length; i++) {\n      r = (a.words[i] | 0) - (b.words[i] | 0) + carry;\n      carry = r >> 26;\n      this.words[i] = r & 0x3ffffff;\n    }\n    for (; carry !== 0 && i < a.length; i++) {\n      r = (a.words[i] | 0) + carry;\n      carry = r >> 26;\n      this.words[i] = r & 0x3ffffff;\n    }\n\n    // Copy rest of the words\n    if (carry === 0 && i < a.length && a !== this) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    this.length = Math.max(this.length, i);\n\n    if (a !== this) {\n      this.negative = 1;\n    }\n\n    return this.strip();\n  };\n\n  // Subtract `num` from `this`\n  BN.prototype.sub = function sub (num) {\n    return this.clone().isub(num);\n  };\n\n  function smallMulTo (self, num, out) {\n    out.negative = num.negative ^ self.negative;\n    var len = (self.length + num.length) | 0;\n    out.length = len;\n    len = (len - 1) | 0;\n\n    // Peel one iteration (compiler can't do it, because of code complexity)\n    var a = self.words[0] | 0;\n    var b = num.words[0] | 0;\n    var r = a * b;\n\n    var lo = r & 0x3ffffff;\n    var carry = (r / 0x4000000) | 0;\n    out.words[0] = lo;\n\n    for (var k = 1; k < len; k++) {\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\n      // note that ncarry could be >= 0x3ffffff\n      var ncarry = carry >>> 26;\n      var rword = carry & 0x3ffffff;\n      var maxJ = Math.min(k, num.length - 1);\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\n        var i = (k - j) | 0;\n        a = self.words[i] | 0;\n        b = num.words[j] | 0;\n        r = a * b + rword;\n        ncarry += (r / 0x4000000) | 0;\n        rword = r & 0x3ffffff;\n      }\n      out.words[k] = rword | 0;\n      carry = ncarry | 0;\n    }\n    if (carry !== 0) {\n      out.words[k] = carry | 0;\n    } else {\n      out.length--;\n    }\n\n    return out.strip();\n  }\n\n  // TODO(indutny): it may be reasonable to omit it for users who don't need\n  // to work with 256-bit numbers, otherwise it gives 20% improvement for 256-bit\n  // multiplication (like elliptic secp256k1).\n  var comb10MulTo = function comb10MulTo (self, num, out) {\n    var a = self.words;\n    var b = num.words;\n    var o = out.words;\n    var c = 0;\n    var lo;\n    var mid;\n    var hi;\n    var a0 = a[0] | 0;\n    var al0 = a0 & 0x1fff;\n    var ah0 = a0 >>> 13;\n    var a1 = a[1] | 0;\n    var al1 = a1 & 0x1fff;\n    var ah1 = a1 >>> 13;\n    var a2 = a[2] | 0;\n    var al2 = a2 & 0x1fff;\n    var ah2 = a2 >>> 13;\n    var a3 = a[3] | 0;\n    var al3 = a3 & 0x1fff;\n    var ah3 = a3 >>> 13;\n    var a4 = a[4] | 0;\n    var al4 = a4 & 0x1fff;\n    var ah4 = a4 >>> 13;\n    var a5 = a[5] | 0;\n    var al5 = a5 & 0x1fff;\n    var ah5 = a5 >>> 13;\n    var a6 = a[6] | 0;\n    var al6 = a6 & 0x1fff;\n    var ah6 = a6 >>> 13;\n    var a7 = a[7] | 0;\n    var al7 = a7 & 0x1fff;\n    var ah7 = a7 >>> 13;\n    var a8 = a[8] | 0;\n    var al8 = a8 & 0x1fff;\n    var ah8 = a8 >>> 13;\n    var a9 = a[9] | 0;\n    var al9 = a9 & 0x1fff;\n    var ah9 = a9 >>> 13;\n    var b0 = b[0] | 0;\n    var bl0 = b0 & 0x1fff;\n    var bh0 = b0 >>> 13;\n    var b1 = b[1] | 0;\n    var bl1 = b1 & 0x1fff;\n    var bh1 = b1 >>> 13;\n    var b2 = b[2] | 0;\n    var bl2 = b2 & 0x1fff;\n    var bh2 = b2 >>> 13;\n    var b3 = b[3] | 0;\n    var bl3 = b3 & 0x1fff;\n    var bh3 = b3 >>> 13;\n    var b4 = b[4] | 0;\n    var bl4 = b4 & 0x1fff;\n    var bh4 = b4 >>> 13;\n    var b5 = b[5] | 0;\n    var bl5 = b5 & 0x1fff;\n    var bh5 = b5 >>> 13;\n    var b6 = b[6] | 0;\n    var bl6 = b6 & 0x1fff;\n    var bh6 = b6 >>> 13;\n    var b7 = b[7] | 0;\n    var bl7 = b7 & 0x1fff;\n    var bh7 = b7 >>> 13;\n    var b8 = b[8] | 0;\n    var bl8 = b8 & 0x1fff;\n    var bh8 = b8 >>> 13;\n    var b9 = b[9] | 0;\n    var bl9 = b9 & 0x1fff;\n    var bh9 = b9 >>> 13;\n\n    out.negative = self.negative ^ num.negative;\n    out.length = 19;\n    /* k = 0 */\n    lo = Math.imul(al0, bl0);\n    mid = Math.imul(al0, bh0);\n    mid = (mid + Math.imul(ah0, bl0)) | 0;\n    hi = Math.imul(ah0, bh0);\n    var w0 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w0 >>> 26)) | 0;\n    w0 &= 0x3ffffff;\n    /* k = 1 */\n    lo = Math.imul(al1, bl0);\n    mid = Math.imul(al1, bh0);\n    mid = (mid + Math.imul(ah1, bl0)) | 0;\n    hi = Math.imul(ah1, bh0);\n    lo = (lo + Math.imul(al0, bl1)) | 0;\n    mid = (mid + Math.imul(al0, bh1)) | 0;\n    mid = (mid + Math.imul(ah0, bl1)) | 0;\n    hi = (hi + Math.imul(ah0, bh1)) | 0;\n    var w1 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w1 >>> 26)) | 0;\n    w1 &= 0x3ffffff;\n    /* k = 2 */\n    lo = Math.imul(al2, bl0);\n    mid = Math.imul(al2, bh0);\n    mid = (mid + Math.imul(ah2, bl0)) | 0;\n    hi = Math.imul(ah2, bh0);\n    lo = (lo + Math.imul(al1, bl1)) | 0;\n    mid = (mid + Math.imul(al1, bh1)) | 0;\n    mid = (mid + Math.imul(ah1, bl1)) | 0;\n    hi = (hi + Math.imul(ah1, bh1)) | 0;\n    lo = (lo + Math.imul(al0, bl2)) | 0;\n    mid = (mid + Math.imul(al0, bh2)) | 0;\n    mid = (mid + Math.imul(ah0, bl2)) | 0;\n    hi = (hi + Math.imul(ah0, bh2)) | 0;\n    var w2 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w2 >>> 26)) | 0;\n    w2 &= 0x3ffffff;\n    /* k = 3 */\n    lo = Math.imul(al3, bl0);\n    mid = Math.imul(al3, bh0);\n    mid = (mid + Math.imul(ah3, bl0)) | 0;\n    hi = Math.imul(ah3, bh0);\n    lo = (lo + Math.imul(al2, bl1)) | 0;\n    mid = (mid + Math.imul(al2, bh1)) | 0;\n    mid = (mid + Math.imul(ah2, bl1)) | 0;\n    hi = (hi + Math.imul(ah2, bh1)) | 0;\n    lo = (lo + Math.imul(al1, bl2)) | 0;\n    mid = (mid + Math.imul(al1, bh2)) | 0;\n    mid = (mid + Math.imul(ah1, bl2)) | 0;\n    hi = (hi + Math.imul(ah1, bh2)) | 0;\n    lo = (lo + Math.imul(al0, bl3)) | 0;\n    mid = (mid + Math.imul(al0, bh3)) | 0;\n    mid = (mid + Math.imul(ah0, bl3)) | 0;\n    hi = (hi + Math.imul(ah0, bh3)) | 0;\n    var w3 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w3 >>> 26)) | 0;\n    w3 &= 0x3ffffff;\n    /* k = 4 */\n    lo = Math.imul(al4, bl0);\n    mid = Math.imul(al4, bh0);\n    mid = (mid + Math.imul(ah4, bl0)) | 0;\n    hi = Math.imul(ah4, bh0);\n    lo = (lo + Math.imul(al3, bl1)) | 0;\n    mid = (mid + Math.imul(al3, bh1)) | 0;\n    mid = (mid + Math.imul(ah3, bl1)) | 0;\n    hi = (hi + Math.imul(ah3, bh1)) | 0;\n    lo = (lo + Math.imul(al2, bl2)) | 0;\n    mid = (mid + Math.imul(al2, bh2)) | 0;\n    mid = (mid + Math.imul(ah2, bl2)) | 0;\n    hi = (hi + Math.imul(ah2, bh2)) | 0;\n    lo = (lo + Math.imul(al1, bl3)) | 0;\n    mid = (mid + Math.imul(al1, bh3)) | 0;\n    mid = (mid + Math.imul(ah1, bl3)) | 0;\n    hi = (hi + Math.imul(ah1, bh3)) | 0;\n    lo = (lo + Math.imul(al0, bl4)) | 0;\n    mid = (mid + Math.imul(al0, bh4)) | 0;\n    mid = (mid + Math.imul(ah0, bl4)) | 0;\n    hi = (hi + Math.imul(ah0, bh4)) | 0;\n    var w4 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w4 >>> 26)) | 0;\n    w4 &= 0x3ffffff;\n    /* k = 5 */\n    lo = Math.imul(al5, bl0);\n    mid = Math.imul(al5, bh0);\n    mid = (mid + Math.imul(ah5, bl0)) | 0;\n    hi = Math.imul(ah5, bh0);\n    lo = (lo + Math.imul(al4, bl1)) | 0;\n    mid = (mid + Math.imul(al4, bh1)) | 0;\n    mid = (mid + Math.imul(ah4, bl1)) | 0;\n    hi = (hi + Math.imul(ah4, bh1)) | 0;\n    lo = (lo + Math.imul(al3, bl2)) | 0;\n    mid = (mid + Math.imul(al3, bh2)) | 0;\n    mid = (mid + Math.imul(ah3, bl2)) | 0;\n    hi = (hi + Math.imul(ah3, bh2)) | 0;\n    lo = (lo + Math.imul(al2, bl3)) | 0;\n    mid = (mid + Math.imul(al2, bh3)) | 0;\n    mid = (mid + Math.imul(ah2, bl3)) | 0;\n    hi = (hi + Math.imul(ah2, bh3)) | 0;\n    lo = (lo + Math.imul(al1, bl4)) | 0;\n    mid = (mid + Math.imul(al1, bh4)) | 0;\n    mid = (mid + Math.imul(ah1, bl4)) | 0;\n    hi = (hi + Math.imul(ah1, bh4)) | 0;\n    lo = (lo + Math.imul(al0, bl5)) | 0;\n    mid = (mid + Math.imul(al0, bh5)) | 0;\n    mid = (mid + Math.imul(ah0, bl5)) | 0;\n    hi = (hi + Math.imul(ah0, bh5)) | 0;\n    var w5 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w5 >>> 26)) | 0;\n    w5 &= 0x3ffffff;\n    /* k = 6 */\n    lo = Math.imul(al6, bl0);\n    mid = Math.imul(al6, bh0);\n    mid = (mid + Math.imul(ah6, bl0)) | 0;\n    hi = Math.imul(ah6, bh0);\n    lo = (lo + Math.imul(al5, bl1)) | 0;\n    mid = (mid + Math.imul(al5, bh1)) | 0;\n    mid = (mid + Math.imul(ah5, bl1)) | 0;\n    hi = (hi + Math.imul(ah5, bh1)) | 0;\n    lo = (lo + Math.imul(al4, bl2)) | 0;\n    mid = (mid + Math.imul(al4, bh2)) | 0;\n    mid = (mid + Math.imul(ah4, bl2)) | 0;\n    hi = (hi + Math.imul(ah4, bh2)) | 0;\n    lo = (lo + Math.imul(al3, bl3)) | 0;\n    mid = (mid + Math.imul(al3, bh3)) | 0;\n    mid = (mid + Math.imul(ah3, bl3)) | 0;\n    hi = (hi + Math.imul(ah3, bh3)) | 0;\n    lo = (lo + Math.imul(al2, bl4)) | 0;\n    mid = (mid + Math.imul(al2, bh4)) | 0;\n    mid = (mid + Math.imul(ah2, bl4)) | 0;\n    hi = (hi + Math.imul(ah2, bh4)) | 0;\n    lo = (lo + Math.imul(al1, bl5)) | 0;\n    mid = (mid + Math.imul(al1, bh5)) | 0;\n    mid = (mid + Math.imul(ah1, bl5)) | 0;\n    hi = (hi + Math.imul(ah1, bh5)) | 0;\n    lo = (lo + Math.imul(al0, bl6)) | 0;\n    mid = (mid + Math.imul(al0, bh6)) | 0;\n    mid = (mid + Math.imul(ah0, bl6)) | 0;\n    hi = (hi + Math.imul(ah0, bh6)) | 0;\n    var w6 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w6 >>> 26)) | 0;\n    w6 &= 0x3ffffff;\n    /* k = 7 */\n    lo = Math.imul(al7, bl0);\n    mid = Math.imul(al7, bh0);\n    mid = (mid + Math.imul(ah7, bl0)) | 0;\n    hi = Math.imul(ah7, bh0);\n    lo = (lo + Math.imul(al6, bl1)) | 0;\n    mid = (mid + Math.imul(al6, bh1)) | 0;\n    mid = (mid + Math.imul(ah6, bl1)) | 0;\n    hi = (hi + Math.imul(ah6, bh1)) | 0;\n    lo = (lo + Math.imul(al5, bl2)) | 0;\n    mid = (mid + Math.imul(al5, bh2)) | 0;\n    mid = (mid + Math.imul(ah5, bl2)) | 0;\n    hi = (hi + Math.imul(ah5, bh2)) | 0;\n    lo = (lo + Math.imul(al4, bl3)) | 0;\n    mid = (mid + Math.imul(al4, bh3)) | 0;\n    mid = (mid + Math.imul(ah4, bl3)) | 0;\n    hi = (hi + Math.imul(ah4, bh3)) | 0;\n    lo = (lo + Math.imul(al3, bl4)) | 0;\n    mid = (mid + Math.imul(al3, bh4)) | 0;\n    mid = (mid + Math.imul(ah3, bl4)) | 0;\n    hi = (hi + Math.imul(ah3, bh4)) | 0;\n    lo = (lo + Math.imul(al2, bl5)) | 0;\n    mid = (mid + Math.imul(al2, bh5)) | 0;\n    mid = (mid + Math.imul(ah2, bl5)) | 0;\n    hi = (hi + Math.imul(ah2, bh5)) | 0;\n    lo = (lo + Math.imul(al1, bl6)) | 0;\n    mid = (mid + Math.imul(al1, bh6)) | 0;\n    mid = (mid + Math.imul(ah1, bl6)) | 0;\n    hi = (hi + Math.imul(ah1, bh6)) | 0;\n    lo = (lo + Math.imul(al0, bl7)) | 0;\n    mid = (mid + Math.imul(al0, bh7)) | 0;\n    mid = (mid + Math.imul(ah0, bl7)) | 0;\n    hi = (hi + Math.imul(ah0, bh7)) | 0;\n    var w7 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w7 >>> 26)) | 0;\n    w7 &= 0x3ffffff;\n    /* k = 8 */\n    lo = Math.imul(al8, bl0);\n    mid = Math.imul(al8, bh0);\n    mid = (mid + Math.imul(ah8, bl0)) | 0;\n    hi = Math.imul(ah8, bh0);\n    lo = (lo + Math.imul(al7, bl1)) | 0;\n    mid = (mid + Math.imul(al7, bh1)) | 0;\n    mid = (mid + Math.imul(ah7, bl1)) | 0;\n    hi = (hi + Math.imul(ah7, bh1)) | 0;\n    lo = (lo + Math.imul(al6, bl2)) | 0;\n    mid = (mid + Math.imul(al6, bh2)) | 0;\n    mid = (mid + Math.imul(ah6, bl2)) | 0;\n    hi = (hi + Math.imul(ah6, bh2)) | 0;\n    lo = (lo + Math.imul(al5, bl3)) | 0;\n    mid = (mid + Math.imul(al5, bh3)) | 0;\n    mid = (mid + Math.imul(ah5, bl3)) | 0;\n    hi = (hi + Math.imul(ah5, bh3)) | 0;\n    lo = (lo + Math.imul(al4, bl4)) | 0;\n    mid = (mid + Math.imul(al4, bh4)) | 0;\n    mid = (mid + Math.imul(ah4, bl4)) | 0;\n    hi = (hi + Math.imul(ah4, bh4)) | 0;\n    lo = (lo + Math.imul(al3, bl5)) | 0;\n    mid = (mid + Math.imul(al3, bh5)) | 0;\n    mid = (mid + Math.imul(ah3, bl5)) | 0;\n    hi = (hi + Math.imul(ah3, bh5)) | 0;\n    lo = (lo + Math.imul(al2, bl6)) | 0;\n    mid = (mid + Math.imul(al2, bh6)) | 0;\n    mid = (mid + Math.imul(ah2, bl6)) | 0;\n    hi = (hi + Math.imul(ah2, bh6)) | 0;\n    lo = (lo + Math.imul(al1, bl7)) | 0;\n    mid = (mid + Math.imul(al1, bh7)) | 0;\n    mid = (mid + Math.imul(ah1, bl7)) | 0;\n    hi = (hi + Math.imul(ah1, bh7)) | 0;\n    lo = (lo + Math.imul(al0, bl8)) | 0;\n    mid = (mid + Math.imul(al0, bh8)) | 0;\n    mid = (mid + Math.imul(ah0, bl8)) | 0;\n    hi = (hi + Math.imul(ah0, bh8)) | 0;\n    var w8 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w8 >>> 26)) | 0;\n    w8 &= 0x3ffffff;\n    /* k = 9 */\n    lo = Math.imul(al9, bl0);\n    mid = Math.imul(al9, bh0);\n    mid = (mid + Math.imul(ah9, bl0)) | 0;\n    hi = Math.imul(ah9, bh0);\n    lo = (lo + Math.imul(al8, bl1)) | 0;\n    mid = (mid + Math.imul(al8, bh1)) | 0;\n    mid = (mid + Math.imul(ah8, bl1)) | 0;\n    hi = (hi + Math.imul(ah8, bh1)) | 0;\n    lo = (lo + Math.imul(al7, bl2)) | 0;\n    mid = (mid + Math.imul(al7, bh2)) | 0;\n    mid = (mid + Math.imul(ah7, bl2)) | 0;\n    hi = (hi + Math.imul(ah7, bh2)) | 0;\n    lo = (lo + Math.imul(al6, bl3)) | 0;\n    mid = (mid + Math.imul(al6, bh3)) | 0;\n    mid = (mid + Math.imul(ah6, bl3)) | 0;\n    hi = (hi + Math.imul(ah6, bh3)) | 0;\n    lo = (lo + Math.imul(al5, bl4)) | 0;\n    mid = (mid + Math.imul(al5, bh4)) | 0;\n    mid = (mid + Math.imul(ah5, bl4)) | 0;\n    hi = (hi + Math.imul(ah5, bh4)) | 0;\n    lo = (lo + Math.imul(al4, bl5)) | 0;\n    mid = (mid + Math.imul(al4, bh5)) | 0;\n    mid = (mid + Math.imul(ah4, bl5)) | 0;\n    hi = (hi + Math.imul(ah4, bh5)) | 0;\n    lo = (lo + Math.imul(al3, bl6)) | 0;\n    mid = (mid + Math.imul(al3, bh6)) | 0;\n    mid = (mid + Math.imul(ah3, bl6)) | 0;\n    hi = (hi + Math.imul(ah3, bh6)) | 0;\n    lo = (lo + Math.imul(al2, bl7)) | 0;\n    mid = (mid + Math.imul(al2, bh7)) | 0;\n    mid = (mid + Math.imul(ah2, bl7)) | 0;\n    hi = (hi + Math.imul(ah2, bh7)) | 0;\n    lo = (lo + Math.imul(al1, bl8)) | 0;\n    mid = (mid + Math.imul(al1, bh8)) | 0;\n    mid = (mid + Math.imul(ah1, bl8)) | 0;\n    hi = (hi + Math.imul(ah1, bh8)) | 0;\n    lo = (lo + Math.imul(al0, bl9)) | 0;\n    mid = (mid + Math.imul(al0, bh9)) | 0;\n    mid = (mid + Math.imul(ah0, bl9)) | 0;\n    hi = (hi + Math.imul(ah0, bh9)) | 0;\n    var w9 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w9 >>> 26)) | 0;\n    w9 &= 0x3ffffff;\n    /* k = 10 */\n    lo = Math.imul(al9, bl1);\n    mid = Math.imul(al9, bh1);\n    mid = (mid + Math.imul(ah9, bl1)) | 0;\n    hi = Math.imul(ah9, bh1);\n    lo = (lo + Math.imul(al8, bl2)) | 0;\n    mid = (mid + Math.imul(al8, bh2)) | 0;\n    mid = (mid + Math.imul(ah8, bl2)) | 0;\n    hi = (hi + Math.imul(ah8, bh2)) | 0;\n    lo = (lo + Math.imul(al7, bl3)) | 0;\n    mid = (mid + Math.imul(al7, bh3)) | 0;\n    mid = (mid + Math.imul(ah7, bl3)) | 0;\n    hi = (hi + Math.imul(ah7, bh3)) | 0;\n    lo = (lo + Math.imul(al6, bl4)) | 0;\n    mid = (mid + Math.imul(al6, bh4)) | 0;\n    mid = (mid + Math.imul(ah6, bl4)) | 0;\n    hi = (hi + Math.imul(ah6, bh4)) | 0;\n    lo = (lo + Math.imul(al5, bl5)) | 0;\n    mid = (mid + Math.imul(al5, bh5)) | 0;\n    mid = (mid + Math.imul(ah5, bl5)) | 0;\n    hi = (hi + Math.imul(ah5, bh5)) | 0;\n    lo = (lo + Math.imul(al4, bl6)) | 0;\n    mid = (mid + Math.imul(al4, bh6)) | 0;\n    mid = (mid + Math.imul(ah4, bl6)) | 0;\n    hi = (hi + Math.imul(ah4, bh6)) | 0;\n    lo = (lo + Math.imul(al3, bl7)) | 0;\n    mid = (mid + Math.imul(al3, bh7)) | 0;\n    mid = (mid + Math.imul(ah3, bl7)) | 0;\n    hi = (hi + Math.imul(ah3, bh7)) | 0;\n    lo = (lo + Math.imul(al2, bl8)) | 0;\n    mid = (mid + Math.imul(al2, bh8)) | 0;\n    mid = (mid + Math.imul(ah2, bl8)) | 0;\n    hi = (hi + Math.imul(ah2, bh8)) | 0;\n    lo = (lo + Math.imul(al1, bl9)) | 0;\n    mid = (mid + Math.imul(al1, bh9)) | 0;\n    mid = (mid + Math.imul(ah1, bl9)) | 0;\n    hi = (hi + Math.imul(ah1, bh9)) | 0;\n    var w10 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w10 >>> 26)) | 0;\n    w10 &= 0x3ffffff;\n    /* k = 11 */\n    lo = Math.imul(al9, bl2);\n    mid = Math.imul(al9, bh2);\n    mid = (mid + Math.imul(ah9, bl2)) | 0;\n    hi = Math.imul(ah9, bh2);\n    lo = (lo + Math.imul(al8, bl3)) | 0;\n    mid = (mid + Math.imul(al8, bh3)) | 0;\n    mid = (mid + Math.imul(ah8, bl3)) | 0;\n    hi = (hi + Math.imul(ah8, bh3)) | 0;\n    lo = (lo + Math.imul(al7, bl4)) | 0;\n    mid = (mid + Math.imul(al7, bh4)) | 0;\n    mid = (mid + Math.imul(ah7, bl4)) | 0;\n    hi = (hi + Math.imul(ah7, bh4)) | 0;\n    lo = (lo + Math.imul(al6, bl5)) | 0;\n    mid = (mid + Math.imul(al6, bh5)) | 0;\n    mid = (mid + Math.imul(ah6, bl5)) | 0;\n    hi = (hi + Math.imul(ah6, bh5)) | 0;\n    lo = (lo + Math.imul(al5, bl6)) | 0;\n    mid = (mid + Math.imul(al5, bh6)) | 0;\n    mid = (mid + Math.imul(ah5, bl6)) | 0;\n    hi = (hi + Math.imul(ah5, bh6)) | 0;\n    lo = (lo + Math.imul(al4, bl7)) | 0;\n    mid = (mid + Math.imul(al4, bh7)) | 0;\n    mid = (mid + Math.imul(ah4, bl7)) | 0;\n    hi = (hi + Math.imul(ah4, bh7)) | 0;\n    lo = (lo + Math.imul(al3, bl8)) | 0;\n    mid = (mid + Math.imul(al3, bh8)) | 0;\n    mid = (mid + Math.imul(ah3, bl8)) | 0;\n    hi = (hi + Math.imul(ah3, bh8)) | 0;\n    lo = (lo + Math.imul(al2, bl9)) | 0;\n    mid = (mid + Math.imul(al2, bh9)) | 0;\n    mid = (mid + Math.imul(ah2, bl9)) | 0;\n    hi = (hi + Math.imul(ah2, bh9)) | 0;\n    var w11 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w11 >>> 26)) | 0;\n    w11 &= 0x3ffffff;\n    /* k = 12 */\n    lo = Math.imul(al9, bl3);\n    mid = Math.imul(al9, bh3);\n    mid = (mid + Math.imul(ah9, bl3)) | 0;\n    hi = Math.imul(ah9, bh3);\n    lo = (lo + Math.imul(al8, bl4)) | 0;\n    mid = (mid + Math.imul(al8, bh4)) | 0;\n    mid = (mid + Math.imul(ah8, bl4)) | 0;\n    hi = (hi + Math.imul(ah8, bh4)) | 0;\n    lo = (lo + Math.imul(al7, bl5)) | 0;\n    mid = (mid + Math.imul(al7, bh5)) | 0;\n    mid = (mid + Math.imul(ah7, bl5)) | 0;\n    hi = (hi + Math.imul(ah7, bh5)) | 0;\n    lo = (lo + Math.imul(al6, bl6)) | 0;\n    mid = (mid + Math.imul(al6, bh6)) | 0;\n    mid = (mid + Math.imul(ah6, bl6)) | 0;\n    hi = (hi + Math.imul(ah6, bh6)) | 0;\n    lo = (lo + Math.imul(al5, bl7)) | 0;\n    mid = (mid + Math.imul(al5, bh7)) | 0;\n    mid = (mid + Math.imul(ah5, bl7)) | 0;\n    hi = (hi + Math.imul(ah5, bh7)) | 0;\n    lo = (lo + Math.imul(al4, bl8)) | 0;\n    mid = (mid + Math.imul(al4, bh8)) | 0;\n    mid = (mid + Math.imul(ah4, bl8)) | 0;\n    hi = (hi + Math.imul(ah4, bh8)) | 0;\n    lo = (lo + Math.imul(al3, bl9)) | 0;\n    mid = (mid + Math.imul(al3, bh9)) | 0;\n    mid = (mid + Math.imul(ah3, bl9)) | 0;\n    hi = (hi + Math.imul(ah3, bh9)) | 0;\n    var w12 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w12 >>> 26)) | 0;\n    w12 &= 0x3ffffff;\n    /* k = 13 */\n    lo = Math.imul(al9, bl4);\n    mid = Math.imul(al9, bh4);\n    mid = (mid + Math.imul(ah9, bl4)) | 0;\n    hi = Math.imul(ah9, bh4);\n    lo = (lo + Math.imul(al8, bl5)) | 0;\n    mid = (mid + Math.imul(al8, bh5)) | 0;\n    mid = (mid + Math.imul(ah8, bl5)) | 0;\n    hi = (hi + Math.imul(ah8, bh5)) | 0;\n    lo = (lo + Math.imul(al7, bl6)) | 0;\n    mid = (mid + Math.imul(al7, bh6)) | 0;\n    mid = (mid + Math.imul(ah7, bl6)) | 0;\n    hi = (hi + Math.imul(ah7, bh6)) | 0;\n    lo = (lo + Math.imul(al6, bl7)) | 0;\n    mid = (mid + Math.imul(al6, bh7)) | 0;\n    mid = (mid + Math.imul(ah6, bl7)) | 0;\n    hi = (hi + Math.imul(ah6, bh7)) | 0;\n    lo = (lo + Math.imul(al5, bl8)) | 0;\n    mid = (mid + Math.imul(al5, bh8)) | 0;\n    mid = (mid + Math.imul(ah5, bl8)) | 0;\n    hi = (hi + Math.imul(ah5, bh8)) | 0;\n    lo = (lo + Math.imul(al4, bl9)) | 0;\n    mid = (mid + Math.imul(al4, bh9)) | 0;\n    mid = (mid + Math.imul(ah4, bl9)) | 0;\n    hi = (hi + Math.imul(ah4, bh9)) | 0;\n    var w13 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w13 >>> 26)) | 0;\n    w13 &= 0x3ffffff;\n    /* k = 14 */\n    lo = Math.imul(al9, bl5);\n    mid = Math.imul(al9, bh5);\n    mid = (mid + Math.imul(ah9, bl5)) | 0;\n    hi = Math.imul(ah9, bh5);\n    lo = (lo + Math.imul(al8, bl6)) | 0;\n    mid = (mid + Math.imul(al8, bh6)) | 0;\n    mid = (mid + Math.imul(ah8, bl6)) | 0;\n    hi = (hi + Math.imul(ah8, bh6)) | 0;\n    lo = (lo + Math.imul(al7, bl7)) | 0;\n    mid = (mid + Math.imul(al7, bh7)) | 0;\n    mid = (mid + Math.imul(ah7, bl7)) | 0;\n    hi = (hi + Math.imul(ah7, bh7)) | 0;\n    lo = (lo + Math.imul(al6, bl8)) | 0;\n    mid = (mid + Math.imul(al6, bh8)) | 0;\n    mid = (mid + Math.imul(ah6, bl8)) | 0;\n    hi = (hi + Math.imul(ah6, bh8)) | 0;\n    lo = (lo + Math.imul(al5, bl9)) | 0;\n    mid = (mid + Math.imul(al5, bh9)) | 0;\n    mid = (mid + Math.imul(ah5, bl9)) | 0;\n    hi = (hi + Math.imul(ah5, bh9)) | 0;\n    var w14 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w14 >>> 26)) | 0;\n    w14 &= 0x3ffffff;\n    /* k = 15 */\n    lo = Math.imul(al9, bl6);\n    mid = Math.imul(al9, bh6);\n    mid = (mid + Math.imul(ah9, bl6)) | 0;\n    hi = Math.imul(ah9, bh6);\n    lo = (lo + Math.imul(al8, bl7)) | 0;\n    mid = (mid + Math.imul(al8, bh7)) | 0;\n    mid = (mid + Math.imul(ah8, bl7)) | 0;\n    hi = (hi + Math.imul(ah8, bh7)) | 0;\n    lo = (lo + Math.imul(al7, bl8)) | 0;\n    mid = (mid + Math.imul(al7, bh8)) | 0;\n    mid = (mid + Math.imul(ah7, bl8)) | 0;\n    hi = (hi + Math.imul(ah7, bh8)) | 0;\n    lo = (lo + Math.imul(al6, bl9)) | 0;\n    mid = (mid + Math.imul(al6, bh9)) | 0;\n    mid = (mid + Math.imul(ah6, bl9)) | 0;\n    hi = (hi + Math.imul(ah6, bh9)) | 0;\n    var w15 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w15 >>> 26)) | 0;\n    w15 &= 0x3ffffff;\n    /* k = 16 */\n    lo = Math.imul(al9, bl7);\n    mid = Math.imul(al9, bh7);\n    mid = (mid + Math.imul(ah9, bl7)) | 0;\n    hi = Math.imul(ah9, bh7);\n    lo = (lo + Math.imul(al8, bl8)) | 0;\n    mid = (mid + Math.imul(al8, bh8)) | 0;\n    mid = (mid + Math.imul(ah8, bl8)) | 0;\n    hi = (hi + Math.imul(ah8, bh8)) | 0;\n    lo = (lo + Math.imul(al7, bl9)) | 0;\n    mid = (mid + Math.imul(al7, bh9)) | 0;\n    mid = (mid + Math.imul(ah7, bl9)) | 0;\n    hi = (hi + Math.imul(ah7, bh9)) | 0;\n    var w16 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w16 >>> 26)) | 0;\n    w16 &= 0x3ffffff;\n    /* k = 17 */\n    lo = Math.imul(al9, bl8);\n    mid = Math.imul(al9, bh8);\n    mid = (mid + Math.imul(ah9, bl8)) | 0;\n    hi = Math.imul(ah9, bh8);\n    lo = (lo + Math.imul(al8, bl9)) | 0;\n    mid = (mid + Math.imul(al8, bh9)) | 0;\n    mid = (mid + Math.imul(ah8, bl9)) | 0;\n    hi = (hi + Math.imul(ah8, bh9)) | 0;\n    var w17 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w17 >>> 26)) | 0;\n    w17 &= 0x3ffffff;\n    /* k = 18 */\n    lo = Math.imul(al9, bl9);\n    mid = Math.imul(al9, bh9);\n    mid = (mid + Math.imul(ah9, bl9)) | 0;\n    hi = Math.imul(ah9, bh9);\n    var w18 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w18 >>> 26)) | 0;\n    w18 &= 0x3ffffff;\n    o[0] = w0;\n    o[1] = w1;\n    o[2] = w2;\n    o[3] = w3;\n    o[4] = w4;\n    o[5] = w5;\n    o[6] = w6;\n    o[7] = w7;\n    o[8] = w8;\n    o[9] = w9;\n    o[10] = w10;\n    o[11] = w11;\n    o[12] = w12;\n    o[13] = w13;\n    o[14] = w14;\n    o[15] = w15;\n    o[16] = w16;\n    o[17] = w17;\n    o[18] = w18;\n    if (c !== 0) {\n      o[19] = c;\n      out.length++;\n    }\n    return out;\n  };\n\n  // Polyfill comb\n  if (!Math.imul) {\n    comb10MulTo = smallMulTo;\n  }\n\n  function bigMulTo (self, num, out) {\n    out.negative = num.negative ^ self.negative;\n    out.length = self.length + num.length;\n\n    var carry = 0;\n    var hncarry = 0;\n    for (var k = 0; k < out.length - 1; k++) {\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\n      // note that ncarry could be >= 0x3ffffff\n      var ncarry = hncarry;\n      hncarry = 0;\n      var rword = carry & 0x3ffffff;\n      var maxJ = Math.min(k, num.length - 1);\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\n        var i = k - j;\n        var a = self.words[i] | 0;\n        var b = num.words[j] | 0;\n        var r = a * b;\n\n        var lo = r & 0x3ffffff;\n        ncarry = (ncarry + ((r / 0x4000000) | 0)) | 0;\n        lo = (lo + rword) | 0;\n        rword = lo & 0x3ffffff;\n        ncarry = (ncarry + (lo >>> 26)) | 0;\n\n        hncarry += ncarry >>> 26;\n        ncarry &= 0x3ffffff;\n      }\n      out.words[k] = rword;\n      carry = ncarry;\n      ncarry = hncarry;\n    }\n    if (carry !== 0) {\n      out.words[k] = carry;\n    } else {\n      out.length--;\n    }\n\n    return out.strip();\n  }\n\n  function jumboMulTo (self, num, out) {\n    var fftm = new FFTM();\n    return fftm.mulp(self, num, out);\n  }\n\n  BN.prototype.mulTo = function mulTo (num, out) {\n    var res;\n    var len = this.length + num.length;\n    if (this.length === 10 && num.length === 10) {\n      res = comb10MulTo(this, num, out);\n    } else if (len < 63) {\n      res = smallMulTo(this, num, out);\n    } else if (len < 1024) {\n      res = bigMulTo(this, num, out);\n    } else {\n      res = jumboMulTo(this, num, out);\n    }\n\n    return res;\n  };\n\n  // Cooley-Tukey algorithm for FFT\n  // slightly revisited to rely on looping instead of recursion\n\n  function FFTM (x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  FFTM.prototype.makeRBT = function makeRBT (N) {\n    var t = new Array(N);\n    var l = BN.prototype._countBits(N) - 1;\n    for (var i = 0; i < N; i++) {\n      t[i] = this.revBin(i, l, N);\n    }\n\n    return t;\n  };\n\n  // Returns binary-reversed representation of `x`\n  FFTM.prototype.revBin = function revBin (x, l, N) {\n    if (x === 0 || x === N - 1) return x;\n\n    var rb = 0;\n    for (var i = 0; i < l; i++) {\n      rb |= (x & 1) << (l - i - 1);\n      x >>= 1;\n    }\n\n    return rb;\n  };\n\n  // Performs \"tweedling\" phase, therefore 'emulating'\n  // behaviour of the recursive algorithm\n  FFTM.prototype.permute = function permute (rbt, rws, iws, rtws, itws, N) {\n    for (var i = 0; i < N; i++) {\n      rtws[i] = rws[rbt[i]];\n      itws[i] = iws[rbt[i]];\n    }\n  };\n\n  FFTM.prototype.transform = function transform (rws, iws, rtws, itws, N, rbt) {\n    this.permute(rbt, rws, iws, rtws, itws, N);\n\n    for (var s = 1; s < N; s <<= 1) {\n      var l = s << 1;\n\n      var rtwdf = Math.cos(2 * Math.PI / l);\n      var itwdf = Math.sin(2 * Math.PI / l);\n\n      for (var p = 0; p < N; p += l) {\n        var rtwdf_ = rtwdf;\n        var itwdf_ = itwdf;\n\n        for (var j = 0; j < s; j++) {\n          var re = rtws[p + j];\n          var ie = itws[p + j];\n\n          var ro = rtws[p + j + s];\n          var io = itws[p + j + s];\n\n          var rx = rtwdf_ * ro - itwdf_ * io;\n\n          io = rtwdf_ * io + itwdf_ * ro;\n          ro = rx;\n\n          rtws[p + j] = re + ro;\n          itws[p + j] = ie + io;\n\n          rtws[p + j + s] = re - ro;\n          itws[p + j + s] = ie - io;\n\n          /* jshint maxdepth : false */\n          if (j !== l) {\n            rx = rtwdf * rtwdf_ - itwdf * itwdf_;\n\n            itwdf_ = rtwdf * itwdf_ + itwdf * rtwdf_;\n            rtwdf_ = rx;\n          }\n        }\n      }\n    }\n  };\n\n  FFTM.prototype.guessLen13b = function guessLen13b (n, m) {\n    var N = Math.max(m, n) | 1;\n    var odd = N & 1;\n    var i = 0;\n    for (N = N / 2 | 0; N; N = N >>> 1) {\n      i++;\n    }\n\n    return 1 << i + 1 + odd;\n  };\n\n  FFTM.prototype.conjugate = function conjugate (rws, iws, N) {\n    if (N <= 1) return;\n\n    for (var i = 0; i < N / 2; i++) {\n      var t = rws[i];\n\n      rws[i] = rws[N - i - 1];\n      rws[N - i - 1] = t;\n\n      t = iws[i];\n\n      iws[i] = -iws[N - i - 1];\n      iws[N - i - 1] = -t;\n    }\n  };\n\n  FFTM.prototype.normalize13b = function normalize13b (ws, N) {\n    var carry = 0;\n    for (var i = 0; i < N / 2; i++) {\n      var w = Math.round(ws[2 * i + 1] / N) * 0x2000 +\n        Math.round(ws[2 * i] / N) +\n        carry;\n\n      ws[i] = w & 0x3ffffff;\n\n      if (w < 0x4000000) {\n        carry = 0;\n      } else {\n        carry = w / 0x4000000 | 0;\n      }\n    }\n\n    return ws;\n  };\n\n  FFTM.prototype.convert13b = function convert13b (ws, len, rws, N) {\n    var carry = 0;\n    for (var i = 0; i < len; i++) {\n      carry = carry + (ws[i] | 0);\n\n      rws[2 * i] = carry & 0x1fff; carry = carry >>> 13;\n      rws[2 * i + 1] = carry & 0x1fff; carry = carry >>> 13;\n    }\n\n    // Pad with zeroes\n    for (i = 2 * len; i < N; ++i) {\n      rws[i] = 0;\n    }\n\n    assert(carry === 0);\n    assert((carry & ~0x1fff) === 0);\n  };\n\n  FFTM.prototype.stub = function stub (N) {\n    var ph = new Array(N);\n    for (var i = 0; i < N; i++) {\n      ph[i] = 0;\n    }\n\n    return ph;\n  };\n\n  FFTM.prototype.mulp = function mulp (x, y, out) {\n    var N = 2 * this.guessLen13b(x.length, y.length);\n\n    var rbt = this.makeRBT(N);\n\n    var _ = this.stub(N);\n\n    var rws = new Array(N);\n    var rwst = new Array(N);\n    var iwst = new Array(N);\n\n    var nrws = new Array(N);\n    var nrwst = new Array(N);\n    var niwst = new Array(N);\n\n    var rmws = out.words;\n    rmws.length = N;\n\n    this.convert13b(x.words, x.length, rws, N);\n    this.convert13b(y.words, y.length, nrws, N);\n\n    this.transform(rws, _, rwst, iwst, N, rbt);\n    this.transform(nrws, _, nrwst, niwst, N, rbt);\n\n    for (var i = 0; i < N; i++) {\n      var rx = rwst[i] * nrwst[i] - iwst[i] * niwst[i];\n      iwst[i] = rwst[i] * niwst[i] + iwst[i] * nrwst[i];\n      rwst[i] = rx;\n    }\n\n    this.conjugate(rwst, iwst, N);\n    this.transform(rwst, iwst, rmws, _, N, rbt);\n    this.conjugate(rmws, _, N);\n    this.normalize13b(rmws, N);\n\n    out.negative = x.negative ^ y.negative;\n    out.length = x.length + y.length;\n    return out.strip();\n  };\n\n  // Multiply `this` by `num`\n  BN.prototype.mul = function mul (num) {\n    var out = new BN(null);\n    out.words = new Array(this.length + num.length);\n    return this.mulTo(num, out);\n  };\n\n  // Multiply employing FFT\n  BN.prototype.mulf = function mulf (num) {\n    var out = new BN(null);\n    out.words = new Array(this.length + num.length);\n    return jumboMulTo(this, num, out);\n  };\n\n  // In-place Multiplication\n  BN.prototype.imul = function imul (num) {\n    return this.clone().mulTo(num, this);\n  };\n\n  BN.prototype.imuln = function imuln (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n\n    // Carry\n    var carry = 0;\n    for (var i = 0; i < this.length; i++) {\n      var w = (this.words[i] | 0) * num;\n      var lo = (w & 0x3ffffff) + (carry & 0x3ffffff);\n      carry >>= 26;\n      carry += (w / 0x4000000) | 0;\n      // NOTE: lo is 27bit maximum\n      carry += lo >>> 26;\n      this.words[i] = lo & 0x3ffffff;\n    }\n\n    if (carry !== 0) {\n      this.words[i] = carry;\n      this.length++;\n    }\n\n    return this;\n  };\n\n  BN.prototype.muln = function muln (num) {\n    return this.clone().imuln(num);\n  };\n\n  // `this` * `this`\n  BN.prototype.sqr = function sqr () {\n    return this.mul(this);\n  };\n\n  // `this` * `this` in-place\n  BN.prototype.isqr = function isqr () {\n    return this.imul(this.clone());\n  };\n\n  // Math.pow(`this`, `num`)\n  BN.prototype.pow = function pow (num) {\n    var w = toBitArray(num);\n    if (w.length === 0) return new BN(1);\n\n    // Skip leading zeroes\n    var res = this;\n    for (var i = 0; i < w.length; i++, res = res.sqr()) {\n      if (w[i] !== 0) break;\n    }\n\n    if (++i < w.length) {\n      for (var q = res.sqr(); i < w.length; i++, q = q.sqr()) {\n        if (w[i] === 0) continue;\n\n        res = res.mul(q);\n      }\n    }\n\n    return res;\n  };\n\n  // Shift-left in-place\n  BN.prototype.iushln = function iushln (bits) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var r = bits % 26;\n    var s = (bits - r) / 26;\n    var carryMask = (0x3ffffff >>> (26 - r)) << (26 - r);\n    var i;\n\n    if (r !== 0) {\n      var carry = 0;\n\n      for (i = 0; i < this.length; i++) {\n        var newCarry = this.words[i] & carryMask;\n        var c = ((this.words[i] | 0) - newCarry) << r;\n        this.words[i] = c | carry;\n        carry = newCarry >>> (26 - r);\n      }\n\n      if (carry) {\n        this.words[i] = carry;\n        this.length++;\n      }\n    }\n\n    if (s !== 0) {\n      for (i = this.length - 1; i >= 0; i--) {\n        this.words[i + s] = this.words[i];\n      }\n\n      for (i = 0; i < s; i++) {\n        this.words[i] = 0;\n      }\n\n      this.length += s;\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.ishln = function ishln (bits) {\n    // TODO(indutny): implement me\n    assert(this.negative === 0);\n    return this.iushln(bits);\n  };\n\n  // Shift-right in-place\n  // NOTE: `hint` is a lowest bit before trailing zeroes\n  // NOTE: if `extended` is present - it will be filled with destroyed bits\n  BN.prototype.iushrn = function iushrn (bits, hint, extended) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var h;\n    if (hint) {\n      h = (hint - (hint % 26)) / 26;\n    } else {\n      h = 0;\n    }\n\n    var r = bits % 26;\n    var s = Math.min((bits - r) / 26, this.length);\n    var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\n    var maskedWords = extended;\n\n    h -= s;\n    h = Math.max(0, h);\n\n    // Extended mode, copy masked part\n    if (maskedWords) {\n      for (var i = 0; i < s; i++) {\n        maskedWords.words[i] = this.words[i];\n      }\n      maskedWords.length = s;\n    }\n\n    if (s === 0) {\n      // No-op, we should not move anything at all\n    } else if (this.length > s) {\n      this.length -= s;\n      for (i = 0; i < this.length; i++) {\n        this.words[i] = this.words[i + s];\n      }\n    } else {\n      this.words[0] = 0;\n      this.length = 1;\n    }\n\n    var carry = 0;\n    for (i = this.length - 1; i >= 0 && (carry !== 0 || i >= h); i--) {\n      var word = this.words[i] | 0;\n      this.words[i] = (carry << (26 - r)) | (word >>> r);\n      carry = word & mask;\n    }\n\n    // Push carried bits as a mask\n    if (maskedWords && carry !== 0) {\n      maskedWords.words[maskedWords.length++] = carry;\n    }\n\n    if (this.length === 0) {\n      this.words[0] = 0;\n      this.length = 1;\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.ishrn = function ishrn (bits, hint, extended) {\n    // TODO(indutny): implement me\n    assert(this.negative === 0);\n    return this.iushrn(bits, hint, extended);\n  };\n\n  // Shift-left\n  BN.prototype.shln = function shln (bits) {\n    return this.clone().ishln(bits);\n  };\n\n  BN.prototype.ushln = function ushln (bits) {\n    return this.clone().iushln(bits);\n  };\n\n  // Shift-right\n  BN.prototype.shrn = function shrn (bits) {\n    return this.clone().ishrn(bits);\n  };\n\n  BN.prototype.ushrn = function ushrn (bits) {\n    return this.clone().iushrn(bits);\n  };\n\n  // Test if n bit is set\n  BN.prototype.testn = function testn (bit) {\n    assert(typeof bit === 'number' && bit >= 0);\n    var r = bit % 26;\n    var s = (bit - r) / 26;\n    var q = 1 << r;\n\n    // Fast case: bit is much higher than all existing words\n    if (this.length <= s) return false;\n\n    // Check bit and return\n    var w = this.words[s];\n\n    return !!(w & q);\n  };\n\n  // Return only lowers bits of number (in-place)\n  BN.prototype.imaskn = function imaskn (bits) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var r = bits % 26;\n    var s = (bits - r) / 26;\n\n    assert(this.negative === 0, 'imaskn works only with positive numbers');\n\n    if (this.length <= s) {\n      return this;\n    }\n\n    if (r !== 0) {\n      s++;\n    }\n    this.length = Math.min(s, this.length);\n\n    if (r !== 0) {\n      var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\n      this.words[this.length - 1] &= mask;\n    }\n\n    return this.strip();\n  };\n\n  // Return only lowers bits of number\n  BN.prototype.maskn = function maskn (bits) {\n    return this.clone().imaskn(bits);\n  };\n\n  // Add plain number `num` to `this`\n  BN.prototype.iaddn = function iaddn (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n    if (num < 0) return this.isubn(-num);\n\n    // Possible sign change\n    if (this.negative !== 0) {\n      if (this.length === 1 && (this.words[0] | 0) < num) {\n        this.words[0] = num - (this.words[0] | 0);\n        this.negative = 0;\n        return this;\n      }\n\n      this.negative = 0;\n      this.isubn(num);\n      this.negative = 1;\n      return this;\n    }\n\n    // Add without checks\n    return this._iaddn(num);\n  };\n\n  BN.prototype._iaddn = function _iaddn (num) {\n    this.words[0] += num;\n\n    // Carry\n    for (var i = 0; i < this.length && this.words[i] >= 0x4000000; i++) {\n      this.words[i] -= 0x4000000;\n      if (i === this.length - 1) {\n        this.words[i + 1] = 1;\n      } else {\n        this.words[i + 1]++;\n      }\n    }\n    this.length = Math.max(this.length, i + 1);\n\n    return this;\n  };\n\n  // Subtract plain number `num` from `this`\n  BN.prototype.isubn = function isubn (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n    if (num < 0) return this.iaddn(-num);\n\n    if (this.negative !== 0) {\n      this.negative = 0;\n      this.iaddn(num);\n      this.negative = 1;\n      return this;\n    }\n\n    this.words[0] -= num;\n\n    if (this.length === 1 && this.words[0] < 0) {\n      this.words[0] = -this.words[0];\n      this.negative = 1;\n    } else {\n      // Carry\n      for (var i = 0; i < this.length && this.words[i] < 0; i++) {\n        this.words[i] += 0x4000000;\n        this.words[i + 1] -= 1;\n      }\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.addn = function addn (num) {\n    return this.clone().iaddn(num);\n  };\n\n  BN.prototype.subn = function subn (num) {\n    return this.clone().isubn(num);\n  };\n\n  BN.prototype.iabs = function iabs () {\n    this.negative = 0;\n\n    return this;\n  };\n\n  BN.prototype.abs = function abs () {\n    return this.clone().iabs();\n  };\n\n  BN.prototype._ishlnsubmul = function _ishlnsubmul (num, mul, shift) {\n    var len = num.length + shift;\n    var i;\n\n    this._expand(len);\n\n    var w;\n    var carry = 0;\n    for (i = 0; i < num.length; i++) {\n      w = (this.words[i + shift] | 0) + carry;\n      var right = (num.words[i] | 0) * mul;\n      w -= right & 0x3ffffff;\n      carry = (w >> 26) - ((right / 0x4000000) | 0);\n      this.words[i + shift] = w & 0x3ffffff;\n    }\n    for (; i < this.length - shift; i++) {\n      w = (this.words[i + shift] | 0) + carry;\n      carry = w >> 26;\n      this.words[i + shift] = w & 0x3ffffff;\n    }\n\n    if (carry === 0) return this.strip();\n\n    // Subtraction overflow\n    assert(carry === -1);\n    carry = 0;\n    for (i = 0; i < this.length; i++) {\n      w = -(this.words[i] | 0) + carry;\n      carry = w >> 26;\n      this.words[i] = w & 0x3ffffff;\n    }\n    this.negative = 1;\n\n    return this.strip();\n  };\n\n  BN.prototype._wordDiv = function _wordDiv (num, mode) {\n    var shift = this.length - num.length;\n\n    var a = this.clone();\n    var b = num;\n\n    // Normalize\n    var bhi = b.words[b.length - 1] | 0;\n    var bhiBits = this._countBits(bhi);\n    shift = 26 - bhiBits;\n    if (shift !== 0) {\n      b = b.ushln(shift);\n      a.iushln(shift);\n      bhi = b.words[b.length - 1] | 0;\n    }\n\n    // Initialize quotient\n    var m = a.length - b.length;\n    var q;\n\n    if (mode !== 'mod') {\n      q = new BN(null);\n      q.length = m + 1;\n      q.words = new Array(q.length);\n      for (var i = 0; i < q.length; i++) {\n        q.words[i] = 0;\n      }\n    }\n\n    var diff = a.clone()._ishlnsubmul(b, 1, m);\n    if (diff.negative === 0) {\n      a = diff;\n      if (q) {\n        q.words[m] = 1;\n      }\n    }\n\n    for (var j = m - 1; j >= 0; j--) {\n      var qj = (a.words[b.length + j] | 0) * 0x4000000 +\n        (a.words[b.length + j - 1] | 0);\n\n      // NOTE: (qj / bhi) is (0x3ffffff * 0x4000000 + 0x3ffffff) / 0x2000000 max\n      // (0x7ffffff)\n      qj = Math.min((qj / bhi) | 0, 0x3ffffff);\n\n      a._ishlnsubmul(b, qj, j);\n      while (a.negative !== 0) {\n        qj--;\n        a.negative = 0;\n        a._ishlnsubmul(b, 1, j);\n        if (!a.isZero()) {\n          a.negative ^= 1;\n        }\n      }\n      if (q) {\n        q.words[j] = qj;\n      }\n    }\n    if (q) {\n      q.strip();\n    }\n    a.strip();\n\n    // Denormalize\n    if (mode !== 'div' && shift !== 0) {\n      a.iushrn(shift);\n    }\n\n    return {\n      div: q || null,\n      mod: a\n    };\n  };\n\n  // NOTE: 1) `mode` can be set to `mod` to request mod only,\n  //       to `div` to request div only, or be absent to\n  //       request both div & mod\n  //       2) `positive` is true if unsigned mod is requested\n  BN.prototype.divmod = function divmod (num, mode, positive) {\n    assert(!num.isZero());\n\n    if (this.isZero()) {\n      return {\n        div: new BN(0),\n        mod: new BN(0)\n      };\n    }\n\n    var div, mod, res;\n    if (this.negative !== 0 && num.negative === 0) {\n      res = this.neg().divmod(num, mode);\n\n      if (mode !== 'mod') {\n        div = res.div.neg();\n      }\n\n      if (mode !== 'div') {\n        mod = res.mod.neg();\n        if (positive && mod.negative !== 0) {\n          mod.iadd(num);\n        }\n      }\n\n      return {\n        div: div,\n        mod: mod\n      };\n    }\n\n    if (this.negative === 0 && num.negative !== 0) {\n      res = this.divmod(num.neg(), mode);\n\n      if (mode !== 'mod') {\n        div = res.div.neg();\n      }\n\n      return {\n        div: div,\n        mod: res.mod\n      };\n    }\n\n    if ((this.negative & num.negative) !== 0) {\n      res = this.neg().divmod(num.neg(), mode);\n\n      if (mode !== 'div') {\n        mod = res.mod.neg();\n        if (positive && mod.negative !== 0) {\n          mod.isub(num);\n        }\n      }\n\n      return {\n        div: res.div,\n        mod: mod\n      };\n    }\n\n    // Both numbers are positive at this point\n\n    // Strip both numbers to approximate shift value\n    if (num.length > this.length || this.cmp(num) < 0) {\n      return {\n        div: new BN(0),\n        mod: this\n      };\n    }\n\n    // Very short reduction\n    if (num.length === 1) {\n      if (mode === 'div') {\n        return {\n          div: this.divn(num.words[0]),\n          mod: null\n        };\n      }\n\n      if (mode === 'mod') {\n        return {\n          div: null,\n          mod: new BN(this.modn(num.words[0]))\n        };\n      }\n\n      return {\n        div: this.divn(num.words[0]),\n        mod: new BN(this.modn(num.words[0]))\n      };\n    }\n\n    return this._wordDiv(num, mode);\n  };\n\n  // Find `this` / `num`\n  BN.prototype.div = function div (num) {\n    return this.divmod(num, 'div', false).div;\n  };\n\n  // Find `this` % `num`\n  BN.prototype.mod = function mod (num) {\n    return this.divmod(num, 'mod', false).mod;\n  };\n\n  BN.prototype.umod = function umod (num) {\n    return this.divmod(num, 'mod', true).mod;\n  };\n\n  // Find Round(`this` / `num`)\n  BN.prototype.divRound = function divRound (num) {\n    var dm = this.divmod(num);\n\n    // Fast case - exact division\n    if (dm.mod.isZero()) return dm.div;\n\n    var mod = dm.div.negative !== 0 ? dm.mod.isub(num) : dm.mod;\n\n    var half = num.ushrn(1);\n    var r2 = num.andln(1);\n    var cmp = mod.cmp(half);\n\n    // Round down\n    if (cmp < 0 || r2 === 1 && cmp === 0) return dm.div;\n\n    // Round up\n    return dm.div.negative !== 0 ? dm.div.isubn(1) : dm.div.iaddn(1);\n  };\n\n  BN.prototype.modn = function modn (num) {\n    assert(num <= 0x3ffffff);\n    var p = (1 << 26) % num;\n\n    var acc = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      acc = (p * acc + (this.words[i] | 0)) % num;\n    }\n\n    return acc;\n  };\n\n  // In-place division by number\n  BN.prototype.idivn = function idivn (num) {\n    assert(num <= 0x3ffffff);\n\n    var carry = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      var w = (this.words[i] | 0) + carry * 0x4000000;\n      this.words[i] = (w / num) | 0;\n      carry = w % num;\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.divn = function divn (num) {\n    return this.clone().idivn(num);\n  };\n\n  BN.prototype.egcd = function egcd (p) {\n    assert(p.negative === 0);\n    assert(!p.isZero());\n\n    var x = this;\n    var y = p.clone();\n\n    if (x.negative !== 0) {\n      x = x.umod(p);\n    } else {\n      x = x.clone();\n    }\n\n    // A * x + B * y = x\n    var A = new BN(1);\n    var B = new BN(0);\n\n    // C * x + D * y = y\n    var C = new BN(0);\n    var D = new BN(1);\n\n    var g = 0;\n\n    while (x.isEven() && y.isEven()) {\n      x.iushrn(1);\n      y.iushrn(1);\n      ++g;\n    }\n\n    var yp = y.clone();\n    var xp = x.clone();\n\n    while (!x.isZero()) {\n      for (var i = 0, im = 1; (x.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\n      if (i > 0) {\n        x.iushrn(i);\n        while (i-- > 0) {\n          if (A.isOdd() || B.isOdd()) {\n            A.iadd(yp);\n            B.isub(xp);\n          }\n\n          A.iushrn(1);\n          B.iushrn(1);\n        }\n      }\n\n      for (var j = 0, jm = 1; (y.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\n      if (j > 0) {\n        y.iushrn(j);\n        while (j-- > 0) {\n          if (C.isOdd() || D.isOdd()) {\n            C.iadd(yp);\n            D.isub(xp);\n          }\n\n          C.iushrn(1);\n          D.iushrn(1);\n        }\n      }\n\n      if (x.cmp(y) >= 0) {\n        x.isub(y);\n        A.isub(C);\n        B.isub(D);\n      } else {\n        y.isub(x);\n        C.isub(A);\n        D.isub(B);\n      }\n    }\n\n    return {\n      a: C,\n      b: D,\n      gcd: y.iushln(g)\n    };\n  };\n\n  // This is reduced incarnation of the binary EEA\n  // above, designated to invert members of the\n  // _prime_ fields F(p) at a maximal speed\n  BN.prototype._invmp = function _invmp (p) {\n    assert(p.negative === 0);\n    assert(!p.isZero());\n\n    var a = this;\n    var b = p.clone();\n\n    if (a.negative !== 0) {\n      a = a.umod(p);\n    } else {\n      a = a.clone();\n    }\n\n    var x1 = new BN(1);\n    var x2 = new BN(0);\n\n    var delta = b.clone();\n\n    while (a.cmpn(1) > 0 && b.cmpn(1) > 0) {\n      for (var i = 0, im = 1; (a.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\n      if (i > 0) {\n        a.iushrn(i);\n        while (i-- > 0) {\n          if (x1.isOdd()) {\n            x1.iadd(delta);\n          }\n\n          x1.iushrn(1);\n        }\n      }\n\n      for (var j = 0, jm = 1; (b.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\n      if (j > 0) {\n        b.iushrn(j);\n        while (j-- > 0) {\n          if (x2.isOdd()) {\n            x2.iadd(delta);\n          }\n\n          x2.iushrn(1);\n        }\n      }\n\n      if (a.cmp(b) >= 0) {\n        a.isub(b);\n        x1.isub(x2);\n      } else {\n        b.isub(a);\n        x2.isub(x1);\n      }\n    }\n\n    var res;\n    if (a.cmpn(1) === 0) {\n      res = x1;\n    } else {\n      res = x2;\n    }\n\n    if (res.cmpn(0) < 0) {\n      res.iadd(p);\n    }\n\n    return res;\n  };\n\n  BN.prototype.gcd = function gcd (num) {\n    if (this.isZero()) return num.abs();\n    if (num.isZero()) return this.abs();\n\n    var a = this.clone();\n    var b = num.clone();\n    a.negative = 0;\n    b.negative = 0;\n\n    // Remove common factor of two\n    for (var shift = 0; a.isEven() && b.isEven(); shift++) {\n      a.iushrn(1);\n      b.iushrn(1);\n    }\n\n    do {\n      while (a.isEven()) {\n        a.iushrn(1);\n      }\n      while (b.isEven()) {\n        b.iushrn(1);\n      }\n\n      var r = a.cmp(b);\n      if (r < 0) {\n        // Swap `a` and `b` to make `a` always bigger than `b`\n        var t = a;\n        a = b;\n        b = t;\n      } else if (r === 0 || b.cmpn(1) === 0) {\n        break;\n      }\n\n      a.isub(b);\n    } while (true);\n\n    return b.iushln(shift);\n  };\n\n  // Invert number in the field F(num)\n  BN.prototype.invm = function invm (num) {\n    return this.egcd(num).a.umod(num);\n  };\n\n  BN.prototype.isEven = function isEven () {\n    return (this.words[0] & 1) === 0;\n  };\n\n  BN.prototype.isOdd = function isOdd () {\n    return (this.words[0] & 1) === 1;\n  };\n\n  // And first word and num\n  BN.prototype.andln = function andln (num) {\n    return this.words[0] & num;\n  };\n\n  // Increment at the bit position in-line\n  BN.prototype.bincn = function bincn (bit) {\n    assert(typeof bit === 'number');\n    var r = bit % 26;\n    var s = (bit - r) / 26;\n    var q = 1 << r;\n\n    // Fast case: bit is much higher than all existing words\n    if (this.length <= s) {\n      this._expand(s + 1);\n      this.words[s] |= q;\n      return this;\n    }\n\n    // Add bit and propagate, if needed\n    var carry = q;\n    for (var i = s; carry !== 0 && i < this.length; i++) {\n      var w = this.words[i] | 0;\n      w += carry;\n      carry = w >>> 26;\n      w &= 0x3ffffff;\n      this.words[i] = w;\n    }\n    if (carry !== 0) {\n      this.words[i] = carry;\n      this.length++;\n    }\n    return this;\n  };\n\n  BN.prototype.isZero = function isZero () {\n    return this.length === 1 && this.words[0] === 0;\n  };\n\n  BN.prototype.cmpn = function cmpn (num) {\n    var negative = num < 0;\n\n    if (this.negative !== 0 && !negative) return -1;\n    if (this.negative === 0 && negative) return 1;\n\n    this.strip();\n\n    var res;\n    if (this.length > 1) {\n      res = 1;\n    } else {\n      if (negative) {\n        num = -num;\n      }\n\n      assert(num <= 0x3ffffff, 'Number is too big');\n\n      var w = this.words[0] | 0;\n      res = w === num ? 0 : w < num ? -1 : 1;\n    }\n    if (this.negative !== 0) return -res | 0;\n    return res;\n  };\n\n  // Compare two numbers and return:\n  // 1 - if `this` > `num`\n  // 0 - if `this` == `num`\n  // -1 - if `this` < `num`\n  BN.prototype.cmp = function cmp (num) {\n    if (this.negative !== 0 && num.negative === 0) return -1;\n    if (this.negative === 0 && num.negative !== 0) return 1;\n\n    var res = this.ucmp(num);\n    if (this.negative !== 0) return -res | 0;\n    return res;\n  };\n\n  // Unsigned comparison\n  BN.prototype.ucmp = function ucmp (num) {\n    // At this point both numbers have the same sign\n    if (this.length > num.length) return 1;\n    if (this.length < num.length) return -1;\n\n    var res = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      var a = this.words[i] | 0;\n      var b = num.words[i] | 0;\n\n      if (a === b) continue;\n      if (a < b) {\n        res = -1;\n      } else if (a > b) {\n        res = 1;\n      }\n      break;\n    }\n    return res;\n  };\n\n  BN.prototype.gtn = function gtn (num) {\n    return this.cmpn(num) === 1;\n  };\n\n  BN.prototype.gt = function gt (num) {\n    return this.cmp(num) === 1;\n  };\n\n  BN.prototype.gten = function gten (num) {\n    return this.cmpn(num) >= 0;\n  };\n\n  BN.prototype.gte = function gte (num) {\n    return this.cmp(num) >= 0;\n  };\n\n  BN.prototype.ltn = function ltn (num) {\n    return this.cmpn(num) === -1;\n  };\n\n  BN.prototype.lt = function lt (num) {\n    return this.cmp(num) === -1;\n  };\n\n  BN.prototype.lten = function lten (num) {\n    return this.cmpn(num) <= 0;\n  };\n\n  BN.prototype.lte = function lte (num) {\n    return this.cmp(num) <= 0;\n  };\n\n  BN.prototype.eqn = function eqn (num) {\n    return this.cmpn(num) === 0;\n  };\n\n  BN.prototype.eq = function eq (num) {\n    return this.cmp(num) === 0;\n  };\n\n  //\n  // A reduce context, could be using montgomery or something better, depending\n  // on the `m` itself.\n  //\n  BN.red = function red (num) {\n    return new Red(num);\n  };\n\n  BN.prototype.toRed = function toRed (ctx) {\n    assert(!this.red, 'Already a number in reduction context');\n    assert(this.negative === 0, 'red works only with positives');\n    return ctx.convertTo(this)._forceRed(ctx);\n  };\n\n  BN.prototype.fromRed = function fromRed () {\n    assert(this.red, 'fromRed works only with numbers in reduction context');\n    return this.red.convertFrom(this);\n  };\n\n  BN.prototype._forceRed = function _forceRed (ctx) {\n    this.red = ctx;\n    return this;\n  };\n\n  BN.prototype.forceRed = function forceRed (ctx) {\n    assert(!this.red, 'Already a number in reduction context');\n    return this._forceRed(ctx);\n  };\n\n  BN.prototype.redAdd = function redAdd (num) {\n    assert(this.red, 'redAdd works only with red numbers');\n    return this.red.add(this, num);\n  };\n\n  BN.prototype.redIAdd = function redIAdd (num) {\n    assert(this.red, 'redIAdd works only with red numbers');\n    return this.red.iadd(this, num);\n  };\n\n  BN.prototype.redSub = function redSub (num) {\n    assert(this.red, 'redSub works only with red numbers');\n    return this.red.sub(this, num);\n  };\n\n  BN.prototype.redISub = function redISub (num) {\n    assert(this.red, 'redISub works only with red numbers');\n    return this.red.isub(this, num);\n  };\n\n  BN.prototype.redShl = function redShl (num) {\n    assert(this.red, 'redShl works only with red numbers');\n    return this.red.shl(this, num);\n  };\n\n  BN.prototype.redMul = function redMul (num) {\n    assert(this.red, 'redMul works only with red numbers');\n    this.red._verify2(this, num);\n    return this.red.mul(this, num);\n  };\n\n  BN.prototype.redIMul = function redIMul (num) {\n    assert(this.red, 'redMul works only with red numbers');\n    this.red._verify2(this, num);\n    return this.red.imul(this, num);\n  };\n\n  BN.prototype.redSqr = function redSqr () {\n    assert(this.red, 'redSqr works only with red numbers');\n    this.red._verify1(this);\n    return this.red.sqr(this);\n  };\n\n  BN.prototype.redISqr = function redISqr () {\n    assert(this.red, 'redISqr works only with red numbers');\n    this.red._verify1(this);\n    return this.red.isqr(this);\n  };\n\n  // Square root over p\n  BN.prototype.redSqrt = function redSqrt () {\n    assert(this.red, 'redSqrt works only with red numbers');\n    this.red._verify1(this);\n    return this.red.sqrt(this);\n  };\n\n  BN.prototype.redInvm = function redInvm () {\n    assert(this.red, 'redInvm works only with red numbers');\n    this.red._verify1(this);\n    return this.red.invm(this);\n  };\n\n  // Return negative clone of `this` % `red modulo`\n  BN.prototype.redNeg = function redNeg () {\n    assert(this.red, 'redNeg works only with red numbers');\n    this.red._verify1(this);\n    return this.red.neg(this);\n  };\n\n  BN.prototype.redPow = function redPow (num) {\n    assert(this.red && !num.red, 'redPow(normalNum)');\n    this.red._verify1(this);\n    return this.red.pow(this, num);\n  };\n\n  // Prime numbers with efficient reduction\n  var primes = {\n    k256: null,\n    p224: null,\n    p192: null,\n    p25519: null\n  };\n\n  // Pseudo-Mersenne prime\n  function MPrime (name, p) {\n    // P = 2 ^ N - K\n    this.name = name;\n    this.p = new BN(p, 16);\n    this.n = this.p.bitLength();\n    this.k = new BN(1).iushln(this.n).isub(this.p);\n\n    this.tmp = this._tmp();\n  }\n\n  MPrime.prototype._tmp = function _tmp () {\n    var tmp = new BN(null);\n    tmp.words = new Array(Math.ceil(this.n / 13));\n    return tmp;\n  };\n\n  MPrime.prototype.ireduce = function ireduce (num) {\n    // Assumes that `num` is less than `P^2`\n    // num = HI * (2 ^ N - K) + HI * K + LO = HI * K + LO (mod P)\n    var r = num;\n    var rlen;\n\n    do {\n      this.split(r, this.tmp);\n      r = this.imulK(r);\n      r = r.iadd(this.tmp);\n      rlen = r.bitLength();\n    } while (rlen > this.n);\n\n    var cmp = rlen < this.n ? -1 : r.ucmp(this.p);\n    if (cmp === 0) {\n      r.words[0] = 0;\n      r.length = 1;\n    } else if (cmp > 0) {\n      r.isub(this.p);\n    } else {\n      r.strip();\n    }\n\n    return r;\n  };\n\n  MPrime.prototype.split = function split (input, out) {\n    input.iushrn(this.n, 0, out);\n  };\n\n  MPrime.prototype.imulK = function imulK (num) {\n    return num.imul(this.k);\n  };\n\n  function K256 () {\n    MPrime.call(\n      this,\n      'k256',\n      'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f');\n  }\n  inherits(K256, MPrime);\n\n  K256.prototype.split = function split (input, output) {\n    // 256 = 9 * 26 + 22\n    var mask = 0x3fffff;\n\n    var outLen = Math.min(input.length, 9);\n    for (var i = 0; i < outLen; i++) {\n      output.words[i] = input.words[i];\n    }\n    output.length = outLen;\n\n    if (input.length <= 9) {\n      input.words[0] = 0;\n      input.length = 1;\n      return;\n    }\n\n    // Shift by 9 limbs\n    var prev = input.words[9];\n    output.words[output.length++] = prev & mask;\n\n    for (i = 10; i < input.length; i++) {\n      var next = input.words[i] | 0;\n      input.words[i - 10] = ((next & mask) << 4) | (prev >>> 22);\n      prev = next;\n    }\n    prev >>>= 22;\n    input.words[i - 10] = prev;\n    if (prev === 0 && input.length > 10) {\n      input.length -= 10;\n    } else {\n      input.length -= 9;\n    }\n  };\n\n  K256.prototype.imulK = function imulK (num) {\n    // K = 0x1000003d1 = [ 0x40, 0x3d1 ]\n    num.words[num.length] = 0;\n    num.words[num.length + 1] = 0;\n    num.length += 2;\n\n    // bounded at: 0x40 * 0x3ffffff + 0x3d0 = 0x100000390\n    var lo = 0;\n    for (var i = 0; i < num.length; i++) {\n      var w = num.words[i] | 0;\n      lo += w * 0x3d1;\n      num.words[i] = lo & 0x3ffffff;\n      lo = w * 0x40 + ((lo / 0x4000000) | 0);\n    }\n\n    // Fast length reduction\n    if (num.words[num.length - 1] === 0) {\n      num.length--;\n      if (num.words[num.length - 1] === 0) {\n        num.length--;\n      }\n    }\n    return num;\n  };\n\n  function P224 () {\n    MPrime.call(\n      this,\n      'p224',\n      'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001');\n  }\n  inherits(P224, MPrime);\n\n  function P192 () {\n    MPrime.call(\n      this,\n      'p192',\n      'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff');\n  }\n  inherits(P192, MPrime);\n\n  function P25519 () {\n    // 2 ^ 255 - 19\n    MPrime.call(\n      this,\n      '25519',\n      '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed');\n  }\n  inherits(P25519, MPrime);\n\n  P25519.prototype.imulK = function imulK (num) {\n    // K = 0x13\n    var carry = 0;\n    for (var i = 0; i < num.length; i++) {\n      var hi = (num.words[i] | 0) * 0x13 + carry;\n      var lo = hi & 0x3ffffff;\n      hi >>>= 26;\n\n      num.words[i] = lo;\n      carry = hi;\n    }\n    if (carry !== 0) {\n      num.words[num.length++] = carry;\n    }\n    return num;\n  };\n\n  // Exported mostly for testing purposes, use plain name instead\n  BN._prime = function prime (name) {\n    // Cached version of prime\n    if (primes[name]) return primes[name];\n\n    var prime;\n    if (name === 'k256') {\n      prime = new K256();\n    } else if (name === 'p224') {\n      prime = new P224();\n    } else if (name === 'p192') {\n      prime = new P192();\n    } else if (name === 'p25519') {\n      prime = new P25519();\n    } else {\n      throw new Error('Unknown prime ' + name);\n    }\n    primes[name] = prime;\n\n    return prime;\n  };\n\n  //\n  // Base reduction engine\n  //\n  function Red (m) {\n    if (typeof m === 'string') {\n      var prime = BN._prime(m);\n      this.m = prime.p;\n      this.prime = prime;\n    } else {\n      assert(m.gtn(1), 'modulus must be greater than 1');\n      this.m = m;\n      this.prime = null;\n    }\n  }\n\n  Red.prototype._verify1 = function _verify1 (a) {\n    assert(a.negative === 0, 'red works only with positives');\n    assert(a.red, 'red works only with red numbers');\n  };\n\n  Red.prototype._verify2 = function _verify2 (a, b) {\n    assert((a.negative | b.negative) === 0, 'red works only with positives');\n    assert(a.red && a.red === b.red,\n      'red works only with red numbers');\n  };\n\n  Red.prototype.imod = function imod (a) {\n    if (this.prime) return this.prime.ireduce(a)._forceRed(this);\n    return a.umod(this.m)._forceRed(this);\n  };\n\n  Red.prototype.neg = function neg (a) {\n    if (a.isZero()) {\n      return a.clone();\n    }\n\n    return this.m.sub(a)._forceRed(this);\n  };\n\n  Red.prototype.add = function add (a, b) {\n    this._verify2(a, b);\n\n    var res = a.add(b);\n    if (res.cmp(this.m) >= 0) {\n      res.isub(this.m);\n    }\n    return res._forceRed(this);\n  };\n\n  Red.prototype.iadd = function iadd (a, b) {\n    this._verify2(a, b);\n\n    var res = a.iadd(b);\n    if (res.cmp(this.m) >= 0) {\n      res.isub(this.m);\n    }\n    return res;\n  };\n\n  Red.prototype.sub = function sub (a, b) {\n    this._verify2(a, b);\n\n    var res = a.sub(b);\n    if (res.cmpn(0) < 0) {\n      res.iadd(this.m);\n    }\n    return res._forceRed(this);\n  };\n\n  Red.prototype.isub = function isub (a, b) {\n    this._verify2(a, b);\n\n    var res = a.isub(b);\n    if (res.cmpn(0) < 0) {\n      res.iadd(this.m);\n    }\n    return res;\n  };\n\n  Red.prototype.shl = function shl (a, num) {\n    this._verify1(a);\n    return this.imod(a.ushln(num));\n  };\n\n  Red.prototype.imul = function imul (a, b) {\n    this._verify2(a, b);\n    return this.imod(a.imul(b));\n  };\n\n  Red.prototype.mul = function mul (a, b) {\n    this._verify2(a, b);\n    return this.imod(a.mul(b));\n  };\n\n  Red.prototype.isqr = function isqr (a) {\n    return this.imul(a, a.clone());\n  };\n\n  Red.prototype.sqr = function sqr (a) {\n    return this.mul(a, a);\n  };\n\n  Red.prototype.sqrt = function sqrt (a) {\n    if (a.isZero()) return a.clone();\n\n    var mod3 = this.m.andln(3);\n    assert(mod3 % 2 === 1);\n\n    // Fast case\n    if (mod3 === 3) {\n      var pow = this.m.add(new BN(1)).iushrn(2);\n      return this.pow(a, pow);\n    }\n\n    // Tonelli-Shanks algorithm (Totally unoptimized and slow)\n    //\n    // Find Q and S, that Q * 2 ^ S = (P - 1)\n    var q = this.m.subn(1);\n    var s = 0;\n    while (!q.isZero() && q.andln(1) === 0) {\n      s++;\n      q.iushrn(1);\n    }\n    assert(!q.isZero());\n\n    var one = new BN(1).toRed(this);\n    var nOne = one.redNeg();\n\n    // Find quadratic non-residue\n    // NOTE: Max is such because of generalized Riemann hypothesis.\n    var lpow = this.m.subn(1).iushrn(1);\n    var z = this.m.bitLength();\n    z = new BN(2 * z * z).toRed(this);\n\n    while (this.pow(z, lpow).cmp(nOne) !== 0) {\n      z.redIAdd(nOne);\n    }\n\n    var c = this.pow(z, q);\n    var r = this.pow(a, q.addn(1).iushrn(1));\n    var t = this.pow(a, q);\n    var m = s;\n    while (t.cmp(one) !== 0) {\n      var tmp = t;\n      for (var i = 0; tmp.cmp(one) !== 0; i++) {\n        tmp = tmp.redSqr();\n      }\n      assert(i < m);\n      var b = this.pow(c, new BN(1).iushln(m - i - 1));\n\n      r = r.redMul(b);\n      c = b.redSqr();\n      t = t.redMul(c);\n      m = i;\n    }\n\n    return r;\n  };\n\n  Red.prototype.invm = function invm (a) {\n    var inv = a._invmp(this.m);\n    if (inv.negative !== 0) {\n      inv.negative = 0;\n      return this.imod(inv).redNeg();\n    } else {\n      return this.imod(inv);\n    }\n  };\n\n  Red.prototype.pow = function pow (a, num) {\n    if (num.isZero()) return new BN(1);\n    if (num.cmpn(1) === 0) return a.clone();\n\n    var windowSize = 4;\n    var wnd = new Array(1 << windowSize);\n    wnd[0] = new BN(1).toRed(this);\n    wnd[1] = a;\n    for (var i = 2; i < wnd.length; i++) {\n      wnd[i] = this.mul(wnd[i - 1], a);\n    }\n\n    var res = wnd[0];\n    var current = 0;\n    var currentLen = 0;\n    var start = num.bitLength() % 26;\n    if (start === 0) {\n      start = 26;\n    }\n\n    for (i = num.length - 1; i >= 0; i--) {\n      var word = num.words[i];\n      for (var j = start - 1; j >= 0; j--) {\n        var bit = (word >> j) & 1;\n        if (res !== wnd[0]) {\n          res = this.sqr(res);\n        }\n\n        if (bit === 0 && current === 0) {\n          currentLen = 0;\n          continue;\n        }\n\n        current <<= 1;\n        current |= bit;\n        currentLen++;\n        if (currentLen !== windowSize && (i !== 0 || j !== 0)) continue;\n\n        res = this.mul(res, wnd[current]);\n        currentLen = 0;\n        current = 0;\n      }\n      start = 26;\n    }\n\n    return res;\n  };\n\n  Red.prototype.convertTo = function convertTo (num) {\n    var r = num.umod(this.m);\n\n    return r === num ? r.clone() : r;\n  };\n\n  Red.prototype.convertFrom = function convertFrom (num) {\n    var res = num.clone();\n    res.red = null;\n    return res;\n  };\n\n  //\n  // Montgomery method engine\n  //\n\n  BN.mont = function mont (num) {\n    return new Mont(num);\n  };\n\n  function Mont (m) {\n    Red.call(this, m);\n\n    this.shift = this.m.bitLength();\n    if (this.shift % 26 !== 0) {\n      this.shift += 26 - (this.shift % 26);\n    }\n\n    this.r = new BN(1).iushln(this.shift);\n    this.r2 = this.imod(this.r.sqr());\n    this.rinv = this.r._invmp(this.m);\n\n    this.minv = this.rinv.mul(this.r).isubn(1).div(this.m);\n    this.minv = this.minv.umod(this.r);\n    this.minv = this.r.sub(this.minv);\n  }\n  inherits(Mont, Red);\n\n  Mont.prototype.convertTo = function convertTo (num) {\n    return this.imod(num.ushln(this.shift));\n  };\n\n  Mont.prototype.convertFrom = function convertFrom (num) {\n    var r = this.imod(num.mul(this.rinv));\n    r.red = null;\n    return r;\n  };\n\n  Mont.prototype.imul = function imul (a, b) {\n    if (a.isZero() || b.isZero()) {\n      a.words[0] = 0;\n      a.length = 1;\n      return a;\n    }\n\n    var t = a.imul(b);\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\n    var u = t.isub(c).iushrn(this.shift);\n    var res = u;\n\n    if (u.cmp(this.m) >= 0) {\n      res = u.isub(this.m);\n    } else if (u.cmpn(0) < 0) {\n      res = u.iadd(this.m);\n    }\n\n    return res._forceRed(this);\n  };\n\n  Mont.prototype.mul = function mul (a, b) {\n    if (a.isZero() || b.isZero()) return new BN(0)._forceRed(this);\n\n    var t = a.mul(b);\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\n    var u = t.isub(c).iushrn(this.shift);\n    var res = u;\n    if (u.cmp(this.m) >= 0) {\n      res = u.isub(this.m);\n    } else if (u.cmpn(0) < 0) {\n      res = u.iadd(this.m);\n    }\n\n    return res._forceRed(this);\n  };\n\n  Mont.prototype.invm = function invm (a) {\n    // (AR)^-1 * R^2 = (A^-1 * R^-1) * R^2 = A^-1 * R\n    var res = this.imod(a._invmp(this.m).mul(this.r2));\n    return res._forceRed(this);\n  };\n})(typeof module === 'undefined' || module, this);\n","(function (module, exports) {\n  'use strict';\n\n  // Utils\n  function assert (val, msg) {\n    if (!val) throw new Error(msg || 'Assertion failed');\n  }\n\n  // Could use `inherits` module, but don't want to move from single file\n  // architecture yet.\n  function inherits (ctor, superCtor) {\n    ctor.super_ = superCtor;\n    var TempCtor = function () {};\n    TempCtor.prototype = superCtor.prototype;\n    ctor.prototype = new TempCtor();\n    ctor.prototype.constructor = ctor;\n  }\n\n  // BN\n\n  function BN (number, base, endian) {\n    if (BN.isBN(number)) {\n      return number;\n    }\n\n    this.negative = 0;\n    this.words = null;\n    this.length = 0;\n\n    // Reduction context\n    this.red = null;\n\n    if (number !== null) {\n      if (base === 'le' || base === 'be') {\n        endian = base;\n        base = 10;\n      }\n\n      this._init(number || 0, base || 10, endian || 'be');\n    }\n  }\n  if (typeof module === 'object') {\n    module.exports = BN;\n  } else {\n    exports.BN = BN;\n  }\n\n  BN.BN = BN;\n  BN.wordSize = 26;\n\n  var Buffer;\n  try {\n    Buffer = require('buf' + 'fer').Buffer;\n  } catch (e) {\n  }\n\n  BN.isBN = function isBN (num) {\n    if (num instanceof BN) {\n      return true;\n    }\n\n    return num !== null && typeof num === 'object' &&\n      num.constructor.wordSize === BN.wordSize && Array.isArray(num.words);\n  };\n\n  BN.max = function max (left, right) {\n    if (left.cmp(right) > 0) return left;\n    return right;\n  };\n\n  BN.min = function min (left, right) {\n    if (left.cmp(right) < 0) return left;\n    return right;\n  };\n\n  BN.prototype._init = function init (number, base, endian) {\n    if (typeof number === 'number') {\n      return this._initNumber(number, base, endian);\n    }\n\n    if (typeof number === 'object') {\n      return this._initArray(number, base, endian);\n    }\n\n    if (base === 'hex') {\n      base = 16;\n    }\n    assert(base === (base | 0) && base >= 2 && base <= 36);\n\n    number = number.toString().replace(/\\s+/g, '');\n    var start = 0;\n    if (number[0] === '-') {\n      start++;\n    }\n\n    if (base === 16) {\n      this._parseHex(number, start);\n    } else {\n      this._parseBase(number, base, start);\n    }\n\n    if (number[0] === '-') {\n      this.negative = 1;\n    }\n\n    this.strip();\n\n    if (endian !== 'le') return;\n\n    this._initArray(this.toArray(), base, endian);\n  };\n\n  BN.prototype._initNumber = function _initNumber (number, base, endian) {\n    if (number < 0) {\n      this.negative = 1;\n      number = -number;\n    }\n    if (number < 0x4000000) {\n      this.words = [ number & 0x3ffffff ];\n      this.length = 1;\n    } else if (number < 0x10000000000000) {\n      this.words = [\n        number & 0x3ffffff,\n        (number / 0x4000000) & 0x3ffffff\n      ];\n      this.length = 2;\n    } else {\n      assert(number < 0x20000000000000); // 2 ^ 53 (unsafe)\n      this.words = [\n        number & 0x3ffffff,\n        (number / 0x4000000) & 0x3ffffff,\n        1\n      ];\n      this.length = 3;\n    }\n\n    if (endian !== 'le') return;\n\n    // Reverse the bytes\n    this._initArray(this.toArray(), base, endian);\n  };\n\n  BN.prototype._initArray = function _initArray (number, base, endian) {\n    // Perhaps a Uint8Array\n    assert(typeof number.length === 'number');\n    if (number.length <= 0) {\n      this.words = [ 0 ];\n      this.length = 1;\n      return this;\n    }\n\n    this.length = Math.ceil(number.length / 3);\n    this.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      this.words[i] = 0;\n    }\n\n    var j, w;\n    var off = 0;\n    if (endian === 'be') {\n      for (i = number.length - 1, j = 0; i >= 0; i -= 3) {\n        w = number[i] | (number[i - 1] << 8) | (number[i - 2] << 16);\n        this.words[j] |= (w << off) & 0x3ffffff;\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\n        off += 24;\n        if (off >= 26) {\n          off -= 26;\n          j++;\n        }\n      }\n    } else if (endian === 'le') {\n      for (i = 0, j = 0; i < number.length; i += 3) {\n        w = number[i] | (number[i + 1] << 8) | (number[i + 2] << 16);\n        this.words[j] |= (w << off) & 0x3ffffff;\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\n        off += 24;\n        if (off >= 26) {\n          off -= 26;\n          j++;\n        }\n      }\n    }\n    return this.strip();\n  };\n\n  function parseHex (str, start, end) {\n    var r = 0;\n    var len = Math.min(str.length, end);\n    for (var i = start; i < len; i++) {\n      var c = str.charCodeAt(i) - 48;\n\n      r <<= 4;\n\n      // 'a' - 'f'\n      if (c >= 49 && c <= 54) {\n        r |= c - 49 + 0xa;\n\n      // 'A' - 'F'\n      } else if (c >= 17 && c <= 22) {\n        r |= c - 17 + 0xa;\n\n      // '0' - '9'\n      } else {\n        r |= c & 0xf;\n      }\n    }\n    return r;\n  }\n\n  BN.prototype._parseHex = function _parseHex (number, start) {\n    // Create possibly bigger array to ensure that it fits the number\n    this.length = Math.ceil((number.length - start) / 6);\n    this.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      this.words[i] = 0;\n    }\n\n    var j, w;\n    // Scan 24-bit chunks and add them to the number\n    var off = 0;\n    for (i = number.length - 6, j = 0; i >= start; i -= 6) {\n      w = parseHex(number, i, i + 6);\n      this.words[j] |= (w << off) & 0x3ffffff;\n      // NOTE: `0x3fffff` is intentional here, 26bits max shift + 24bit hex limb\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\n      off += 24;\n      if (off >= 26) {\n        off -= 26;\n        j++;\n      }\n    }\n    if (i + 6 !== start) {\n      w = parseHex(number, start, i + 6);\n      this.words[j] |= (w << off) & 0x3ffffff;\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\n    }\n    this.strip();\n  };\n\n  function parseBase (str, start, end, mul) {\n    var r = 0;\n    var len = Math.min(str.length, end);\n    for (var i = start; i < len; i++) {\n      var c = str.charCodeAt(i) - 48;\n\n      r *= mul;\n\n      // 'a'\n      if (c >= 49) {\n        r += c - 49 + 0xa;\n\n      // 'A'\n      } else if (c >= 17) {\n        r += c - 17 + 0xa;\n\n      // '0' - '9'\n      } else {\n        r += c;\n      }\n    }\n    return r;\n  }\n\n  BN.prototype._parseBase = function _parseBase (number, base, start) {\n    // Initialize as zero\n    this.words = [ 0 ];\n    this.length = 1;\n\n    // Find length of limb in base\n    for (var limbLen = 0, limbPow = 1; limbPow <= 0x3ffffff; limbPow *= base) {\n      limbLen++;\n    }\n    limbLen--;\n    limbPow = (limbPow / base) | 0;\n\n    var total = number.length - start;\n    var mod = total % limbLen;\n    var end = Math.min(total, total - mod) + start;\n\n    var word = 0;\n    for (var i = start; i < end; i += limbLen) {\n      word = parseBase(number, i, i + limbLen, base);\n\n      this.imuln(limbPow);\n      if (this.words[0] + word < 0x4000000) {\n        this.words[0] += word;\n      } else {\n        this._iaddn(word);\n      }\n    }\n\n    if (mod !== 0) {\n      var pow = 1;\n      word = parseBase(number, i, number.length, base);\n\n      for (i = 0; i < mod; i++) {\n        pow *= base;\n      }\n\n      this.imuln(pow);\n      if (this.words[0] + word < 0x4000000) {\n        this.words[0] += word;\n      } else {\n        this._iaddn(word);\n      }\n    }\n  };\n\n  BN.prototype.copy = function copy (dest) {\n    dest.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      dest.words[i] = this.words[i];\n    }\n    dest.length = this.length;\n    dest.negative = this.negative;\n    dest.red = this.red;\n  };\n\n  BN.prototype.clone = function clone () {\n    var r = new BN(null);\n    this.copy(r);\n    return r;\n  };\n\n  BN.prototype._expand = function _expand (size) {\n    while (this.length < size) {\n      this.words[this.length++] = 0;\n    }\n    return this;\n  };\n\n  // Remove leading `0` from `this`\n  BN.prototype.strip = function strip () {\n    while (this.length > 1 && this.words[this.length - 1] === 0) {\n      this.length--;\n    }\n    return this._normSign();\n  };\n\n  BN.prototype._normSign = function _normSign () {\n    // -0 = 0\n    if (this.length === 1 && this.words[0] === 0) {\n      this.negative = 0;\n    }\n    return this;\n  };\n\n  BN.prototype.inspect = function inspect () {\n    return (this.red ? '<BN-R: ' : '<BN: ') + this.toString(16) + '>';\n  };\n\n  /*\n\n  var zeros = [];\n  var groupSizes = [];\n  var groupBases = [];\n\n  var s = '';\n  var i = -1;\n  while (++i < BN.wordSize) {\n    zeros[i] = s;\n    s += '0';\n  }\n  groupSizes[0] = 0;\n  groupSizes[1] = 0;\n  groupBases[0] = 0;\n  groupBases[1] = 0;\n  var base = 2 - 1;\n  while (++base < 36 + 1) {\n    var groupSize = 0;\n    var groupBase = 1;\n    while (groupBase < (1 << BN.wordSize) / base) {\n      groupBase *= base;\n      groupSize += 1;\n    }\n    groupSizes[base] = groupSize;\n    groupBases[base] = groupBase;\n  }\n\n  */\n\n  var zeros = [\n    '',\n    '0',\n    '00',\n    '000',\n    '0000',\n    '00000',\n    '000000',\n    '0000000',\n    '00000000',\n    '000000000',\n    '0000000000',\n    '00000000000',\n    '000000000000',\n    '0000000000000',\n    '00000000000000',\n    '000000000000000',\n    '0000000000000000',\n    '00000000000000000',\n    '000000000000000000',\n    '0000000000000000000',\n    '00000000000000000000',\n    '000000000000000000000',\n    '0000000000000000000000',\n    '00000000000000000000000',\n    '000000000000000000000000',\n    '0000000000000000000000000'\n  ];\n\n  var groupSizes = [\n    0, 0,\n    25, 16, 12, 11, 10, 9, 8,\n    8, 7, 7, 7, 7, 6, 6,\n    6, 6, 6, 6, 6, 5, 5,\n    5, 5, 5, 5, 5, 5, 5,\n    5, 5, 5, 5, 5, 5, 5\n  ];\n\n  var groupBases = [\n    0, 0,\n    33554432, 43046721, 16777216, 48828125, 60466176, 40353607, 16777216,\n    43046721, 10000000, 19487171, 35831808, 62748517, 7529536, 11390625,\n    16777216, 24137569, 34012224, 47045881, 64000000, 4084101, 5153632,\n    6436343, 7962624, 9765625, 11881376, 14348907, 17210368, 20511149,\n    24300000, 28629151, 33554432, 39135393, 45435424, 52521875, 60466176\n  ];\n\n  BN.prototype.toString = function toString (base, padding) {\n    base = base || 10;\n    padding = padding | 0 || 1;\n\n    var out;\n    if (base === 16 || base === 'hex') {\n      out = '';\n      var off = 0;\n      var carry = 0;\n      for (var i = 0; i < this.length; i++) {\n        var w = this.words[i];\n        var word = (((w << off) | carry) & 0xffffff).toString(16);\n        carry = (w >>> (24 - off)) & 0xffffff;\n        if (carry !== 0 || i !== this.length - 1) {\n          out = zeros[6 - word.length] + word + out;\n        } else {\n          out = word + out;\n        }\n        off += 2;\n        if (off >= 26) {\n          off -= 26;\n          i--;\n        }\n      }\n      if (carry !== 0) {\n        out = carry.toString(16) + out;\n      }\n      while (out.length % padding !== 0) {\n        out = '0' + out;\n      }\n      if (this.negative !== 0) {\n        out = '-' + out;\n      }\n      return out;\n    }\n\n    if (base === (base | 0) && base >= 2 && base <= 36) {\n      // var groupSize = Math.floor(BN.wordSize * Math.LN2 / Math.log(base));\n      var groupSize = groupSizes[base];\n      // var groupBase = Math.pow(base, groupSize);\n      var groupBase = groupBases[base];\n      out = '';\n      var c = this.clone();\n      c.negative = 0;\n      while (!c.isZero()) {\n        var r = c.modn(groupBase).toString(base);\n        c = c.idivn(groupBase);\n\n        if (!c.isZero()) {\n          out = zeros[groupSize - r.length] + r + out;\n        } else {\n          out = r + out;\n        }\n      }\n      if (this.isZero()) {\n        out = '0' + out;\n      }\n      while (out.length % padding !== 0) {\n        out = '0' + out;\n      }\n      if (this.negative !== 0) {\n        out = '-' + out;\n      }\n      return out;\n    }\n\n    assert(false, 'Base should be between 2 and 36');\n  };\n\n  BN.prototype.toNumber = function toNumber () {\n    var ret = this.words[0];\n    if (this.length === 2) {\n      ret += this.words[1] * 0x4000000;\n    } else if (this.length === 3 && this.words[2] === 0x01) {\n      // NOTE: at this stage it is known that the top bit is set\n      ret += 0x10000000000000 + (this.words[1] * 0x4000000);\n    } else if (this.length > 2) {\n      assert(false, 'Number can only safely store up to 53 bits');\n    }\n    return (this.negative !== 0) ? -ret : ret;\n  };\n\n  BN.prototype.toJSON = function toJSON () {\n    return this.toString(16);\n  };\n\n  BN.prototype.toBuffer = function toBuffer (endian, length) {\n    assert(typeof Buffer !== 'undefined');\n    return this.toArrayLike(Buffer, endian, length);\n  };\n\n  BN.prototype.toArray = function toArray (endian, length) {\n    return this.toArrayLike(Array, endian, length);\n  };\n\n  BN.prototype.toArrayLike = function toArrayLike (ArrayType, endian, length) {\n    var byteLength = this.byteLength();\n    var reqLength = length || Math.max(1, byteLength);\n    assert(byteLength <= reqLength, 'byte array longer than desired length');\n    assert(reqLength > 0, 'Requested array length <= 0');\n\n    this.strip();\n    var littleEndian = endian === 'le';\n    var res = new ArrayType(reqLength);\n\n    var b, i;\n    var q = this.clone();\n    if (!littleEndian) {\n      // Assume big-endian\n      for (i = 0; i < reqLength - byteLength; i++) {\n        res[i] = 0;\n      }\n\n      for (i = 0; !q.isZero(); i++) {\n        b = q.andln(0xff);\n        q.iushrn(8);\n\n        res[reqLength - i - 1] = b;\n      }\n    } else {\n      for (i = 0; !q.isZero(); i++) {\n        b = q.andln(0xff);\n        q.iushrn(8);\n\n        res[i] = b;\n      }\n\n      for (; i < reqLength; i++) {\n        res[i] = 0;\n      }\n    }\n\n    return res;\n  };\n\n  if (Math.clz32) {\n    BN.prototype._countBits = function _countBits (w) {\n      return 32 - Math.clz32(w);\n    };\n  } else {\n    BN.prototype._countBits = function _countBits (w) {\n      var t = w;\n      var r = 0;\n      if (t >= 0x1000) {\n        r += 13;\n        t >>>= 13;\n      }\n      if (t >= 0x40) {\n        r += 7;\n        t >>>= 7;\n      }\n      if (t >= 0x8) {\n        r += 4;\n        t >>>= 4;\n      }\n      if (t >= 0x02) {\n        r += 2;\n        t >>>= 2;\n      }\n      return r + t;\n    };\n  }\n\n  BN.prototype._zeroBits = function _zeroBits (w) {\n    // Short-cut\n    if (w === 0) return 26;\n\n    var t = w;\n    var r = 0;\n    if ((t & 0x1fff) === 0) {\n      r += 13;\n      t >>>= 13;\n    }\n    if ((t & 0x7f) === 0) {\n      r += 7;\n      t >>>= 7;\n    }\n    if ((t & 0xf) === 0) {\n      r += 4;\n      t >>>= 4;\n    }\n    if ((t & 0x3) === 0) {\n      r += 2;\n      t >>>= 2;\n    }\n    if ((t & 0x1) === 0) {\n      r++;\n    }\n    return r;\n  };\n\n  // Return number of used bits in a BN\n  BN.prototype.bitLength = function bitLength () {\n    var w = this.words[this.length - 1];\n    var hi = this._countBits(w);\n    return (this.length - 1) * 26 + hi;\n  };\n\n  function toBitArray (num) {\n    var w = new Array(num.bitLength());\n\n    for (var bit = 0; bit < w.length; bit++) {\n      var off = (bit / 26) | 0;\n      var wbit = bit % 26;\n\n      w[bit] = (num.words[off] & (1 << wbit)) >>> wbit;\n    }\n\n    return w;\n  }\n\n  // Number of trailing zero bits\n  BN.prototype.zeroBits = function zeroBits () {\n    if (this.isZero()) return 0;\n\n    var r = 0;\n    for (var i = 0; i < this.length; i++) {\n      var b = this._zeroBits(this.words[i]);\n      r += b;\n      if (b !== 26) break;\n    }\n    return r;\n  };\n\n  BN.prototype.byteLength = function byteLength () {\n    return Math.ceil(this.bitLength() / 8);\n  };\n\n  BN.prototype.toTwos = function toTwos (width) {\n    if (this.negative !== 0) {\n      return this.abs().inotn(width).iaddn(1);\n    }\n    return this.clone();\n  };\n\n  BN.prototype.fromTwos = function fromTwos (width) {\n    if (this.testn(width - 1)) {\n      return this.notn(width).iaddn(1).ineg();\n    }\n    return this.clone();\n  };\n\n  BN.prototype.isNeg = function isNeg () {\n    return this.negative !== 0;\n  };\n\n  // Return negative clone of `this`\n  BN.prototype.neg = function neg () {\n    return this.clone().ineg();\n  };\n\n  BN.prototype.ineg = function ineg () {\n    if (!this.isZero()) {\n      this.negative ^= 1;\n    }\n\n    return this;\n  };\n\n  // Or `num` with `this` in-place\n  BN.prototype.iuor = function iuor (num) {\n    while (this.length < num.length) {\n      this.words[this.length++] = 0;\n    }\n\n    for (var i = 0; i < num.length; i++) {\n      this.words[i] = this.words[i] | num.words[i];\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.ior = function ior (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuor(num);\n  };\n\n  // Or `num` with `this`\n  BN.prototype.or = function or (num) {\n    if (this.length > num.length) return this.clone().ior(num);\n    return num.clone().ior(this);\n  };\n\n  BN.prototype.uor = function uor (num) {\n    if (this.length > num.length) return this.clone().iuor(num);\n    return num.clone().iuor(this);\n  };\n\n  // And `num` with `this` in-place\n  BN.prototype.iuand = function iuand (num) {\n    // b = min-length(num, this)\n    var b;\n    if (this.length > num.length) {\n      b = num;\n    } else {\n      b = this;\n    }\n\n    for (var i = 0; i < b.length; i++) {\n      this.words[i] = this.words[i] & num.words[i];\n    }\n\n    this.length = b.length;\n\n    return this.strip();\n  };\n\n  BN.prototype.iand = function iand (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuand(num);\n  };\n\n  // And `num` with `this`\n  BN.prototype.and = function and (num) {\n    if (this.length > num.length) return this.clone().iand(num);\n    return num.clone().iand(this);\n  };\n\n  BN.prototype.uand = function uand (num) {\n    if (this.length > num.length) return this.clone().iuand(num);\n    return num.clone().iuand(this);\n  };\n\n  // Xor `num` with `this` in-place\n  BN.prototype.iuxor = function iuxor (num) {\n    // a.length > b.length\n    var a;\n    var b;\n    if (this.length > num.length) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    for (var i = 0; i < b.length; i++) {\n      this.words[i] = a.words[i] ^ b.words[i];\n    }\n\n    if (this !== a) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    this.length = a.length;\n\n    return this.strip();\n  };\n\n  BN.prototype.ixor = function ixor (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuxor(num);\n  };\n\n  // Xor `num` with `this`\n  BN.prototype.xor = function xor (num) {\n    if (this.length > num.length) return this.clone().ixor(num);\n    return num.clone().ixor(this);\n  };\n\n  BN.prototype.uxor = function uxor (num) {\n    if (this.length > num.length) return this.clone().iuxor(num);\n    return num.clone().iuxor(this);\n  };\n\n  // Not ``this`` with ``width`` bitwidth\n  BN.prototype.inotn = function inotn (width) {\n    assert(typeof width === 'number' && width >= 0);\n\n    var bytesNeeded = Math.ceil(width / 26) | 0;\n    var bitsLeft = width % 26;\n\n    // Extend the buffer with leading zeroes\n    this._expand(bytesNeeded);\n\n    if (bitsLeft > 0) {\n      bytesNeeded--;\n    }\n\n    // Handle complete words\n    for (var i = 0; i < bytesNeeded; i++) {\n      this.words[i] = ~this.words[i] & 0x3ffffff;\n    }\n\n    // Handle the residue\n    if (bitsLeft > 0) {\n      this.words[i] = ~this.words[i] & (0x3ffffff >> (26 - bitsLeft));\n    }\n\n    // And remove leading zeroes\n    return this.strip();\n  };\n\n  BN.prototype.notn = function notn (width) {\n    return this.clone().inotn(width);\n  };\n\n  // Set `bit` of `this`\n  BN.prototype.setn = function setn (bit, val) {\n    assert(typeof bit === 'number' && bit >= 0);\n\n    var off = (bit / 26) | 0;\n    var wbit = bit % 26;\n\n    this._expand(off + 1);\n\n    if (val) {\n      this.words[off] = this.words[off] | (1 << wbit);\n    } else {\n      this.words[off] = this.words[off] & ~(1 << wbit);\n    }\n\n    return this.strip();\n  };\n\n  // Add `num` to `this` in-place\n  BN.prototype.iadd = function iadd (num) {\n    var r;\n\n    // negative + positive\n    if (this.negative !== 0 && num.negative === 0) {\n      this.negative = 0;\n      r = this.isub(num);\n      this.negative ^= 1;\n      return this._normSign();\n\n    // positive + negative\n    } else if (this.negative === 0 && num.negative !== 0) {\n      num.negative = 0;\n      r = this.isub(num);\n      num.negative = 1;\n      return r._normSign();\n    }\n\n    // a.length > b.length\n    var a, b;\n    if (this.length > num.length) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    var carry = 0;\n    for (var i = 0; i < b.length; i++) {\n      r = (a.words[i] | 0) + (b.words[i] | 0) + carry;\n      this.words[i] = r & 0x3ffffff;\n      carry = r >>> 26;\n    }\n    for (; carry !== 0 && i < a.length; i++) {\n      r = (a.words[i] | 0) + carry;\n      this.words[i] = r & 0x3ffffff;\n      carry = r >>> 26;\n    }\n\n    this.length = a.length;\n    if (carry !== 0) {\n      this.words[this.length] = carry;\n      this.length++;\n    // Copy the rest of the words\n    } else if (a !== this) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    return this;\n  };\n\n  // Add `num` to `this`\n  BN.prototype.add = function add (num) {\n    var res;\n    if (num.negative !== 0 && this.negative === 0) {\n      num.negative = 0;\n      res = this.sub(num);\n      num.negative ^= 1;\n      return res;\n    } else if (num.negative === 0 && this.negative !== 0) {\n      this.negative = 0;\n      res = num.sub(this);\n      this.negative = 1;\n      return res;\n    }\n\n    if (this.length > num.length) return this.clone().iadd(num);\n\n    return num.clone().iadd(this);\n  };\n\n  // Subtract `num` from `this` in-place\n  BN.prototype.isub = function isub (num) {\n    // this - (-num) = this + num\n    if (num.negative !== 0) {\n      num.negative = 0;\n      var r = this.iadd(num);\n      num.negative = 1;\n      return r._normSign();\n\n    // -this - num = -(this + num)\n    } else if (this.negative !== 0) {\n      this.negative = 0;\n      this.iadd(num);\n      this.negative = 1;\n      return this._normSign();\n    }\n\n    // At this point both numbers are positive\n    var cmp = this.cmp(num);\n\n    // Optimization - zeroify\n    if (cmp === 0) {\n      this.negative = 0;\n      this.length = 1;\n      this.words[0] = 0;\n      return this;\n    }\n\n    // a > b\n    var a, b;\n    if (cmp > 0) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    var carry = 0;\n    for (var i = 0; i < b.length; i++) {\n      r = (a.words[i] | 0) - (b.words[i] | 0) + carry;\n      carry = r >> 26;\n      this.words[i] = r & 0x3ffffff;\n    }\n    for (; carry !== 0 && i < a.length; i++) {\n      r = (a.words[i] | 0) + carry;\n      carry = r >> 26;\n      this.words[i] = r & 0x3ffffff;\n    }\n\n    // Copy rest of the words\n    if (carry === 0 && i < a.length && a !== this) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    this.length = Math.max(this.length, i);\n\n    if (a !== this) {\n      this.negative = 1;\n    }\n\n    return this.strip();\n  };\n\n  // Subtract `num` from `this`\n  BN.prototype.sub = function sub (num) {\n    return this.clone().isub(num);\n  };\n\n  function smallMulTo (self, num, out) {\n    out.negative = num.negative ^ self.negative;\n    var len = (self.length + num.length) | 0;\n    out.length = len;\n    len = (len - 1) | 0;\n\n    // Peel one iteration (compiler can't do it, because of code complexity)\n    var a = self.words[0] | 0;\n    var b = num.words[0] | 0;\n    var r = a * b;\n\n    var lo = r & 0x3ffffff;\n    var carry = (r / 0x4000000) | 0;\n    out.words[0] = lo;\n\n    for (var k = 1; k < len; k++) {\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\n      // note that ncarry could be >= 0x3ffffff\n      var ncarry = carry >>> 26;\n      var rword = carry & 0x3ffffff;\n      var maxJ = Math.min(k, num.length - 1);\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\n        var i = (k - j) | 0;\n        a = self.words[i] | 0;\n        b = num.words[j] | 0;\n        r = a * b + rword;\n        ncarry += (r / 0x4000000) | 0;\n        rword = r & 0x3ffffff;\n      }\n      out.words[k] = rword | 0;\n      carry = ncarry | 0;\n    }\n    if (carry !== 0) {\n      out.words[k] = carry | 0;\n    } else {\n      out.length--;\n    }\n\n    return out.strip();\n  }\n\n  // TODO(indutny): it may be reasonable to omit it for users who don't need\n  // to work with 256-bit numbers, otherwise it gives 20% improvement for 256-bit\n  // multiplication (like elliptic secp256k1).\n  var comb10MulTo = function comb10MulTo (self, num, out) {\n    var a = self.words;\n    var b = num.words;\n    var o = out.words;\n    var c = 0;\n    var lo;\n    var mid;\n    var hi;\n    var a0 = a[0] | 0;\n    var al0 = a0 & 0x1fff;\n    var ah0 = a0 >>> 13;\n    var a1 = a[1] | 0;\n    var al1 = a1 & 0x1fff;\n    var ah1 = a1 >>> 13;\n    var a2 = a[2] | 0;\n    var al2 = a2 & 0x1fff;\n    var ah2 = a2 >>> 13;\n    var a3 = a[3] | 0;\n    var al3 = a3 & 0x1fff;\n    var ah3 = a3 >>> 13;\n    var a4 = a[4] | 0;\n    var al4 = a4 & 0x1fff;\n    var ah4 = a4 >>> 13;\n    var a5 = a[5] | 0;\n    var al5 = a5 & 0x1fff;\n    var ah5 = a5 >>> 13;\n    var a6 = a[6] | 0;\n    var al6 = a6 & 0x1fff;\n    var ah6 = a6 >>> 13;\n    var a7 = a[7] | 0;\n    var al7 = a7 & 0x1fff;\n    var ah7 = a7 >>> 13;\n    var a8 = a[8] | 0;\n    var al8 = a8 & 0x1fff;\n    var ah8 = a8 >>> 13;\n    var a9 = a[9] | 0;\n    var al9 = a9 & 0x1fff;\n    var ah9 = a9 >>> 13;\n    var b0 = b[0] | 0;\n    var bl0 = b0 & 0x1fff;\n    var bh0 = b0 >>> 13;\n    var b1 = b[1] | 0;\n    var bl1 = b1 & 0x1fff;\n    var bh1 = b1 >>> 13;\n    var b2 = b[2] | 0;\n    var bl2 = b2 & 0x1fff;\n    var bh2 = b2 >>> 13;\n    var b3 = b[3] | 0;\n    var bl3 = b3 & 0x1fff;\n    var bh3 = b3 >>> 13;\n    var b4 = b[4] | 0;\n    var bl4 = b4 & 0x1fff;\n    var bh4 = b4 >>> 13;\n    var b5 = b[5] | 0;\n    var bl5 = b5 & 0x1fff;\n    var bh5 = b5 >>> 13;\n    var b6 = b[6] | 0;\n    var bl6 = b6 & 0x1fff;\n    var bh6 = b6 >>> 13;\n    var b7 = b[7] | 0;\n    var bl7 = b7 & 0x1fff;\n    var bh7 = b7 >>> 13;\n    var b8 = b[8] | 0;\n    var bl8 = b8 & 0x1fff;\n    var bh8 = b8 >>> 13;\n    var b9 = b[9] | 0;\n    var bl9 = b9 & 0x1fff;\n    var bh9 = b9 >>> 13;\n\n    out.negative = self.negative ^ num.negative;\n    out.length = 19;\n    /* k = 0 */\n    lo = Math.imul(al0, bl0);\n    mid = Math.imul(al0, bh0);\n    mid = (mid + Math.imul(ah0, bl0)) | 0;\n    hi = Math.imul(ah0, bh0);\n    var w0 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w0 >>> 26)) | 0;\n    w0 &= 0x3ffffff;\n    /* k = 1 */\n    lo = Math.imul(al1, bl0);\n    mid = Math.imul(al1, bh0);\n    mid = (mid + Math.imul(ah1, bl0)) | 0;\n    hi = Math.imul(ah1, bh0);\n    lo = (lo + Math.imul(al0, bl1)) | 0;\n    mid = (mid + Math.imul(al0, bh1)) | 0;\n    mid = (mid + Math.imul(ah0, bl1)) | 0;\n    hi = (hi + Math.imul(ah0, bh1)) | 0;\n    var w1 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w1 >>> 26)) | 0;\n    w1 &= 0x3ffffff;\n    /* k = 2 */\n    lo = Math.imul(al2, bl0);\n    mid = Math.imul(al2, bh0);\n    mid = (mid + Math.imul(ah2, bl0)) | 0;\n    hi = Math.imul(ah2, bh0);\n    lo = (lo + Math.imul(al1, bl1)) | 0;\n    mid = (mid + Math.imul(al1, bh1)) | 0;\n    mid = (mid + Math.imul(ah1, bl1)) | 0;\n    hi = (hi + Math.imul(ah1, bh1)) | 0;\n    lo = (lo + Math.imul(al0, bl2)) | 0;\n    mid = (mid + Math.imul(al0, bh2)) | 0;\n    mid = (mid + Math.imul(ah0, bl2)) | 0;\n    hi = (hi + Math.imul(ah0, bh2)) | 0;\n    var w2 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w2 >>> 26)) | 0;\n    w2 &= 0x3ffffff;\n    /* k = 3 */\n    lo = Math.imul(al3, bl0);\n    mid = Math.imul(al3, bh0);\n    mid = (mid + Math.imul(ah3, bl0)) | 0;\n    hi = Math.imul(ah3, bh0);\n    lo = (lo + Math.imul(al2, bl1)) | 0;\n    mid = (mid + Math.imul(al2, bh1)) | 0;\n    mid = (mid + Math.imul(ah2, bl1)) | 0;\n    hi = (hi + Math.imul(ah2, bh1)) | 0;\n    lo = (lo + Math.imul(al1, bl2)) | 0;\n    mid = (mid + Math.imul(al1, bh2)) | 0;\n    mid = (mid + Math.imul(ah1, bl2)) | 0;\n    hi = (hi + Math.imul(ah1, bh2)) | 0;\n    lo = (lo + Math.imul(al0, bl3)) | 0;\n    mid = (mid + Math.imul(al0, bh3)) | 0;\n    mid = (mid + Math.imul(ah0, bl3)) | 0;\n    hi = (hi + Math.imul(ah0, bh3)) | 0;\n    var w3 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w3 >>> 26)) | 0;\n    w3 &= 0x3ffffff;\n    /* k = 4 */\n    lo = Math.imul(al4, bl0);\n    mid = Math.imul(al4, bh0);\n    mid = (mid + Math.imul(ah4, bl0)) | 0;\n    hi = Math.imul(ah4, bh0);\n    lo = (lo + Math.imul(al3, bl1)) | 0;\n    mid = (mid + Math.imul(al3, bh1)) | 0;\n    mid = (mid + Math.imul(ah3, bl1)) | 0;\n    hi = (hi + Math.imul(ah3, bh1)) | 0;\n    lo = (lo + Math.imul(al2, bl2)) | 0;\n    mid = (mid + Math.imul(al2, bh2)) | 0;\n    mid = (mid + Math.imul(ah2, bl2)) | 0;\n    hi = (hi + Math.imul(ah2, bh2)) | 0;\n    lo = (lo + Math.imul(al1, bl3)) | 0;\n    mid = (mid + Math.imul(al1, bh3)) | 0;\n    mid = (mid + Math.imul(ah1, bl3)) | 0;\n    hi = (hi + Math.imul(ah1, bh3)) | 0;\n    lo = (lo + Math.imul(al0, bl4)) | 0;\n    mid = (mid + Math.imul(al0, bh4)) | 0;\n    mid = (mid + Math.imul(ah0, bl4)) | 0;\n    hi = (hi + Math.imul(ah0, bh4)) | 0;\n    var w4 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w4 >>> 26)) | 0;\n    w4 &= 0x3ffffff;\n    /* k = 5 */\n    lo = Math.imul(al5, bl0);\n    mid = Math.imul(al5, bh0);\n    mid = (mid + Math.imul(ah5, bl0)) | 0;\n    hi = Math.imul(ah5, bh0);\n    lo = (lo + Math.imul(al4, bl1)) | 0;\n    mid = (mid + Math.imul(al4, bh1)) | 0;\n    mid = (mid + Math.imul(ah4, bl1)) | 0;\n    hi = (hi + Math.imul(ah4, bh1)) | 0;\n    lo = (lo + Math.imul(al3, bl2)) | 0;\n    mid = (mid + Math.imul(al3, bh2)) | 0;\n    mid = (mid + Math.imul(ah3, bl2)) | 0;\n    hi = (hi + Math.imul(ah3, bh2)) | 0;\n    lo = (lo + Math.imul(al2, bl3)) | 0;\n    mid = (mid + Math.imul(al2, bh3)) | 0;\n    mid = (mid + Math.imul(ah2, bl3)) | 0;\n    hi = (hi + Math.imul(ah2, bh3)) | 0;\n    lo = (lo + Math.imul(al1, bl4)) | 0;\n    mid = (mid + Math.imul(al1, bh4)) | 0;\n    mid = (mid + Math.imul(ah1, bl4)) | 0;\n    hi = (hi + Math.imul(ah1, bh4)) | 0;\n    lo = (lo + Math.imul(al0, bl5)) | 0;\n    mid = (mid + Math.imul(al0, bh5)) | 0;\n    mid = (mid + Math.imul(ah0, bl5)) | 0;\n    hi = (hi + Math.imul(ah0, bh5)) | 0;\n    var w5 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w5 >>> 26)) | 0;\n    w5 &= 0x3ffffff;\n    /* k = 6 */\n    lo = Math.imul(al6, bl0);\n    mid = Math.imul(al6, bh0);\n    mid = (mid + Math.imul(ah6, bl0)) | 0;\n    hi = Math.imul(ah6, bh0);\n    lo = (lo + Math.imul(al5, bl1)) | 0;\n    mid = (mid + Math.imul(al5, bh1)) | 0;\n    mid = (mid + Math.imul(ah5, bl1)) | 0;\n    hi = (hi + Math.imul(ah5, bh1)) | 0;\n    lo = (lo + Math.imul(al4, bl2)) | 0;\n    mid = (mid + Math.imul(al4, bh2)) | 0;\n    mid = (mid + Math.imul(ah4, bl2)) | 0;\n    hi = (hi + Math.imul(ah4, bh2)) | 0;\n    lo = (lo + Math.imul(al3, bl3)) | 0;\n    mid = (mid + Math.imul(al3, bh3)) | 0;\n    mid = (mid + Math.imul(ah3, bl3)) | 0;\n    hi = (hi + Math.imul(ah3, bh3)) | 0;\n    lo = (lo + Math.imul(al2, bl4)) | 0;\n    mid = (mid + Math.imul(al2, bh4)) | 0;\n    mid = (mid + Math.imul(ah2, bl4)) | 0;\n    hi = (hi + Math.imul(ah2, bh4)) | 0;\n    lo = (lo + Math.imul(al1, bl5)) | 0;\n    mid = (mid + Math.imul(al1, bh5)) | 0;\n    mid = (mid + Math.imul(ah1, bl5)) | 0;\n    hi = (hi + Math.imul(ah1, bh5)) | 0;\n    lo = (lo + Math.imul(al0, bl6)) | 0;\n    mid = (mid + Math.imul(al0, bh6)) | 0;\n    mid = (mid + Math.imul(ah0, bl6)) | 0;\n    hi = (hi + Math.imul(ah0, bh6)) | 0;\n    var w6 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w6 >>> 26)) | 0;\n    w6 &= 0x3ffffff;\n    /* k = 7 */\n    lo = Math.imul(al7, bl0);\n    mid = Math.imul(al7, bh0);\n    mid = (mid + Math.imul(ah7, bl0)) | 0;\n    hi = Math.imul(ah7, bh0);\n    lo = (lo + Math.imul(al6, bl1)) | 0;\n    mid = (mid + Math.imul(al6, bh1)) | 0;\n    mid = (mid + Math.imul(ah6, bl1)) | 0;\n    hi = (hi + Math.imul(ah6, bh1)) | 0;\n    lo = (lo + Math.imul(al5, bl2)) | 0;\n    mid = (mid + Math.imul(al5, bh2)) | 0;\n    mid = (mid + Math.imul(ah5, bl2)) | 0;\n    hi = (hi + Math.imul(ah5, bh2)) | 0;\n    lo = (lo + Math.imul(al4, bl3)) | 0;\n    mid = (mid + Math.imul(al4, bh3)) | 0;\n    mid = (mid + Math.imul(ah4, bl3)) | 0;\n    hi = (hi + Math.imul(ah4, bh3)) | 0;\n    lo = (lo + Math.imul(al3, bl4)) | 0;\n    mid = (mid + Math.imul(al3, bh4)) | 0;\n    mid = (mid + Math.imul(ah3, bl4)) | 0;\n    hi = (hi + Math.imul(ah3, bh4)) | 0;\n    lo = (lo + Math.imul(al2, bl5)) | 0;\n    mid = (mid + Math.imul(al2, bh5)) | 0;\n    mid = (mid + Math.imul(ah2, bl5)) | 0;\n    hi = (hi + Math.imul(ah2, bh5)) | 0;\n    lo = (lo + Math.imul(al1, bl6)) | 0;\n    mid = (mid + Math.imul(al1, bh6)) | 0;\n    mid = (mid + Math.imul(ah1, bl6)) | 0;\n    hi = (hi + Math.imul(ah1, bh6)) | 0;\n    lo = (lo + Math.imul(al0, bl7)) | 0;\n    mid = (mid + Math.imul(al0, bh7)) | 0;\n    mid = (mid + Math.imul(ah0, bl7)) | 0;\n    hi = (hi + Math.imul(ah0, bh7)) | 0;\n    var w7 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w7 >>> 26)) | 0;\n    w7 &= 0x3ffffff;\n    /* k = 8 */\n    lo = Math.imul(al8, bl0);\n    mid = Math.imul(al8, bh0);\n    mid = (mid + Math.imul(ah8, bl0)) | 0;\n    hi = Math.imul(ah8, bh0);\n    lo = (lo + Math.imul(al7, bl1)) | 0;\n    mid = (mid + Math.imul(al7, bh1)) | 0;\n    mid = (mid + Math.imul(ah7, bl1)) | 0;\n    hi = (hi + Math.imul(ah7, bh1)) | 0;\n    lo = (lo + Math.imul(al6, bl2)) | 0;\n    mid = (mid + Math.imul(al6, bh2)) | 0;\n    mid = (mid + Math.imul(ah6, bl2)) | 0;\n    hi = (hi + Math.imul(ah6, bh2)) | 0;\n    lo = (lo + Math.imul(al5, bl3)) | 0;\n    mid = (mid + Math.imul(al5, bh3)) | 0;\n    mid = (mid + Math.imul(ah5, bl3)) | 0;\n    hi = (hi + Math.imul(ah5, bh3)) | 0;\n    lo = (lo + Math.imul(al4, bl4)) | 0;\n    mid = (mid + Math.imul(al4, bh4)) | 0;\n    mid = (mid + Math.imul(ah4, bl4)) | 0;\n    hi = (hi + Math.imul(ah4, bh4)) | 0;\n    lo = (lo + Math.imul(al3, bl5)) | 0;\n    mid = (mid + Math.imul(al3, bh5)) | 0;\n    mid = (mid + Math.imul(ah3, bl5)) | 0;\n    hi = (hi + Math.imul(ah3, bh5)) | 0;\n    lo = (lo + Math.imul(al2, bl6)) | 0;\n    mid = (mid + Math.imul(al2, bh6)) | 0;\n    mid = (mid + Math.imul(ah2, bl6)) | 0;\n    hi = (hi + Math.imul(ah2, bh6)) | 0;\n    lo = (lo + Math.imul(al1, bl7)) | 0;\n    mid = (mid + Math.imul(al1, bh7)) | 0;\n    mid = (mid + Math.imul(ah1, bl7)) | 0;\n    hi = (hi + Math.imul(ah1, bh7)) | 0;\n    lo = (lo + Math.imul(al0, bl8)) | 0;\n    mid = (mid + Math.imul(al0, bh8)) | 0;\n    mid = (mid + Math.imul(ah0, bl8)) | 0;\n    hi = (hi + Math.imul(ah0, bh8)) | 0;\n    var w8 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w8 >>> 26)) | 0;\n    w8 &= 0x3ffffff;\n    /* k = 9 */\n    lo = Math.imul(al9, bl0);\n    mid = Math.imul(al9, bh0);\n    mid = (mid + Math.imul(ah9, bl0)) | 0;\n    hi = Math.imul(ah9, bh0);\n    lo = (lo + Math.imul(al8, bl1)) | 0;\n    mid = (mid + Math.imul(al8, bh1)) | 0;\n    mid = (mid + Math.imul(ah8, bl1)) | 0;\n    hi = (hi + Math.imul(ah8, bh1)) | 0;\n    lo = (lo + Math.imul(al7, bl2)) | 0;\n    mid = (mid + Math.imul(al7, bh2)) | 0;\n    mid = (mid + Math.imul(ah7, bl2)) | 0;\n    hi = (hi + Math.imul(ah7, bh2)) | 0;\n    lo = (lo + Math.imul(al6, bl3)) | 0;\n    mid = (mid + Math.imul(al6, bh3)) | 0;\n    mid = (mid + Math.imul(ah6, bl3)) | 0;\n    hi = (hi + Math.imul(ah6, bh3)) | 0;\n    lo = (lo + Math.imul(al5, bl4)) | 0;\n    mid = (mid + Math.imul(al5, bh4)) | 0;\n    mid = (mid + Math.imul(ah5, bl4)) | 0;\n    hi = (hi + Math.imul(ah5, bh4)) | 0;\n    lo = (lo + Math.imul(al4, bl5)) | 0;\n    mid = (mid + Math.imul(al4, bh5)) | 0;\n    mid = (mid + Math.imul(ah4, bl5)) | 0;\n    hi = (hi + Math.imul(ah4, bh5)) | 0;\n    lo = (lo + Math.imul(al3, bl6)) | 0;\n    mid = (mid + Math.imul(al3, bh6)) | 0;\n    mid = (mid + Math.imul(ah3, bl6)) | 0;\n    hi = (hi + Math.imul(ah3, bh6)) | 0;\n    lo = (lo + Math.imul(al2, bl7)) | 0;\n    mid = (mid + Math.imul(al2, bh7)) | 0;\n    mid = (mid + Math.imul(ah2, bl7)) | 0;\n    hi = (hi + Math.imul(ah2, bh7)) | 0;\n    lo = (lo + Math.imul(al1, bl8)) | 0;\n    mid = (mid + Math.imul(al1, bh8)) | 0;\n    mid = (mid + Math.imul(ah1, bl8)) | 0;\n    hi = (hi + Math.imul(ah1, bh8)) | 0;\n    lo = (lo + Math.imul(al0, bl9)) | 0;\n    mid = (mid + Math.imul(al0, bh9)) | 0;\n    mid = (mid + Math.imul(ah0, bl9)) | 0;\n    hi = (hi + Math.imul(ah0, bh9)) | 0;\n    var w9 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w9 >>> 26)) | 0;\n    w9 &= 0x3ffffff;\n    /* k = 10 */\n    lo = Math.imul(al9, bl1);\n    mid = Math.imul(al9, bh1);\n    mid = (mid + Math.imul(ah9, bl1)) | 0;\n    hi = Math.imul(ah9, bh1);\n    lo = (lo + Math.imul(al8, bl2)) | 0;\n    mid = (mid + Math.imul(al8, bh2)) | 0;\n    mid = (mid + Math.imul(ah8, bl2)) | 0;\n    hi = (hi + Math.imul(ah8, bh2)) | 0;\n    lo = (lo + Math.imul(al7, bl3)) | 0;\n    mid = (mid + Math.imul(al7, bh3)) | 0;\n    mid = (mid + Math.imul(ah7, bl3)) | 0;\n    hi = (hi + Math.imul(ah7, bh3)) | 0;\n    lo = (lo + Math.imul(al6, bl4)) | 0;\n    mid = (mid + Math.imul(al6, bh4)) | 0;\n    mid = (mid + Math.imul(ah6, bl4)) | 0;\n    hi = (hi + Math.imul(ah6, bh4)) | 0;\n    lo = (lo + Math.imul(al5, bl5)) | 0;\n    mid = (mid + Math.imul(al5, bh5)) | 0;\n    mid = (mid + Math.imul(ah5, bl5)) | 0;\n    hi = (hi + Math.imul(ah5, bh5)) | 0;\n    lo = (lo + Math.imul(al4, bl6)) | 0;\n    mid = (mid + Math.imul(al4, bh6)) | 0;\n    mid = (mid + Math.imul(ah4, bl6)) | 0;\n    hi = (hi + Math.imul(ah4, bh6)) | 0;\n    lo = (lo + Math.imul(al3, bl7)) | 0;\n    mid = (mid + Math.imul(al3, bh7)) | 0;\n    mid = (mid + Math.imul(ah3, bl7)) | 0;\n    hi = (hi + Math.imul(ah3, bh7)) | 0;\n    lo = (lo + Math.imul(al2, bl8)) | 0;\n    mid = (mid + Math.imul(al2, bh8)) | 0;\n    mid = (mid + Math.imul(ah2, bl8)) | 0;\n    hi = (hi + Math.imul(ah2, bh8)) | 0;\n    lo = (lo + Math.imul(al1, bl9)) | 0;\n    mid = (mid + Math.imul(al1, bh9)) | 0;\n    mid = (mid + Math.imul(ah1, bl9)) | 0;\n    hi = (hi + Math.imul(ah1, bh9)) | 0;\n    var w10 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w10 >>> 26)) | 0;\n    w10 &= 0x3ffffff;\n    /* k = 11 */\n    lo = Math.imul(al9, bl2);\n    mid = Math.imul(al9, bh2);\n    mid = (mid + Math.imul(ah9, bl2)) | 0;\n    hi = Math.imul(ah9, bh2);\n    lo = (lo + Math.imul(al8, bl3)) | 0;\n    mid = (mid + Math.imul(al8, bh3)) | 0;\n    mid = (mid + Math.imul(ah8, bl3)) | 0;\n    hi = (hi + Math.imul(ah8, bh3)) | 0;\n    lo = (lo + Math.imul(al7, bl4)) | 0;\n    mid = (mid + Math.imul(al7, bh4)) | 0;\n    mid = (mid + Math.imul(ah7, bl4)) | 0;\n    hi = (hi + Math.imul(ah7, bh4)) | 0;\n    lo = (lo + Math.imul(al6, bl5)) | 0;\n    mid = (mid + Math.imul(al6, bh5)) | 0;\n    mid = (mid + Math.imul(ah6, bl5)) | 0;\n    hi = (hi + Math.imul(ah6, bh5)) | 0;\n    lo = (lo + Math.imul(al5, bl6)) | 0;\n    mid = (mid + Math.imul(al5, bh6)) | 0;\n    mid = (mid + Math.imul(ah5, bl6)) | 0;\n    hi = (hi + Math.imul(ah5, bh6)) | 0;\n    lo = (lo + Math.imul(al4, bl7)) | 0;\n    mid = (mid + Math.imul(al4, bh7)) | 0;\n    mid = (mid + Math.imul(ah4, bl7)) | 0;\n    hi = (hi + Math.imul(ah4, bh7)) | 0;\n    lo = (lo + Math.imul(al3, bl8)) | 0;\n    mid = (mid + Math.imul(al3, bh8)) | 0;\n    mid = (mid + Math.imul(ah3, bl8)) | 0;\n    hi = (hi + Math.imul(ah3, bh8)) | 0;\n    lo = (lo + Math.imul(al2, bl9)) | 0;\n    mid = (mid + Math.imul(al2, bh9)) | 0;\n    mid = (mid + Math.imul(ah2, bl9)) | 0;\n    hi = (hi + Math.imul(ah2, bh9)) | 0;\n    var w11 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w11 >>> 26)) | 0;\n    w11 &= 0x3ffffff;\n    /* k = 12 */\n    lo = Math.imul(al9, bl3);\n    mid = Math.imul(al9, bh3);\n    mid = (mid + Math.imul(ah9, bl3)) | 0;\n    hi = Math.imul(ah9, bh3);\n    lo = (lo + Math.imul(al8, bl4)) | 0;\n    mid = (mid + Math.imul(al8, bh4)) | 0;\n    mid = (mid + Math.imul(ah8, bl4)) | 0;\n    hi = (hi + Math.imul(ah8, bh4)) | 0;\n    lo = (lo + Math.imul(al7, bl5)) | 0;\n    mid = (mid + Math.imul(al7, bh5)) | 0;\n    mid = (mid + Math.imul(ah7, bl5)) | 0;\n    hi = (hi + Math.imul(ah7, bh5)) | 0;\n    lo = (lo + Math.imul(al6, bl6)) | 0;\n    mid = (mid + Math.imul(al6, bh6)) | 0;\n    mid = (mid + Math.imul(ah6, bl6)) | 0;\n    hi = (hi + Math.imul(ah6, bh6)) | 0;\n    lo = (lo + Math.imul(al5, bl7)) | 0;\n    mid = (mid + Math.imul(al5, bh7)) | 0;\n    mid = (mid + Math.imul(ah5, bl7)) | 0;\n    hi = (hi + Math.imul(ah5, bh7)) | 0;\n    lo = (lo + Math.imul(al4, bl8)) | 0;\n    mid = (mid + Math.imul(al4, bh8)) | 0;\n    mid = (mid + Math.imul(ah4, bl8)) | 0;\n    hi = (hi + Math.imul(ah4, bh8)) | 0;\n    lo = (lo + Math.imul(al3, bl9)) | 0;\n    mid = (mid + Math.imul(al3, bh9)) | 0;\n    mid = (mid + Math.imul(ah3, bl9)) | 0;\n    hi = (hi + Math.imul(ah3, bh9)) | 0;\n    var w12 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w12 >>> 26)) | 0;\n    w12 &= 0x3ffffff;\n    /* k = 13 */\n    lo = Math.imul(al9, bl4);\n    mid = Math.imul(al9, bh4);\n    mid = (mid + Math.imul(ah9, bl4)) | 0;\n    hi = Math.imul(ah9, bh4);\n    lo = (lo + Math.imul(al8, bl5)) | 0;\n    mid = (mid + Math.imul(al8, bh5)) | 0;\n    mid = (mid + Math.imul(ah8, bl5)) | 0;\n    hi = (hi + Math.imul(ah8, bh5)) | 0;\n    lo = (lo + Math.imul(al7, bl6)) | 0;\n    mid = (mid + Math.imul(al7, bh6)) | 0;\n    mid = (mid + Math.imul(ah7, bl6)) | 0;\n    hi = (hi + Math.imul(ah7, bh6)) | 0;\n    lo = (lo + Math.imul(al6, bl7)) | 0;\n    mid = (mid + Math.imul(al6, bh7)) | 0;\n    mid = (mid + Math.imul(ah6, bl7)) | 0;\n    hi = (hi + Math.imul(ah6, bh7)) | 0;\n    lo = (lo + Math.imul(al5, bl8)) | 0;\n    mid = (mid + Math.imul(al5, bh8)) | 0;\n    mid = (mid + Math.imul(ah5, bl8)) | 0;\n    hi = (hi + Math.imul(ah5, bh8)) | 0;\n    lo = (lo + Math.imul(al4, bl9)) | 0;\n    mid = (mid + Math.imul(al4, bh9)) | 0;\n    mid = (mid + Math.imul(ah4, bl9)) | 0;\n    hi = (hi + Math.imul(ah4, bh9)) | 0;\n    var w13 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w13 >>> 26)) | 0;\n    w13 &= 0x3ffffff;\n    /* k = 14 */\n    lo = Math.imul(al9, bl5);\n    mid = Math.imul(al9, bh5);\n    mid = (mid + Math.imul(ah9, bl5)) | 0;\n    hi = Math.imul(ah9, bh5);\n    lo = (lo + Math.imul(al8, bl6)) | 0;\n    mid = (mid + Math.imul(al8, bh6)) | 0;\n    mid = (mid + Math.imul(ah8, bl6)) | 0;\n    hi = (hi + Math.imul(ah8, bh6)) | 0;\n    lo = (lo + Math.imul(al7, bl7)) | 0;\n    mid = (mid + Math.imul(al7, bh7)) | 0;\n    mid = (mid + Math.imul(ah7, bl7)) | 0;\n    hi = (hi + Math.imul(ah7, bh7)) | 0;\n    lo = (lo + Math.imul(al6, bl8)) | 0;\n    mid = (mid + Math.imul(al6, bh8)) | 0;\n    mid = (mid + Math.imul(ah6, bl8)) | 0;\n    hi = (hi + Math.imul(ah6, bh8)) | 0;\n    lo = (lo + Math.imul(al5, bl9)) | 0;\n    mid = (mid + Math.imul(al5, bh9)) | 0;\n    mid = (mid + Math.imul(ah5, bl9)) | 0;\n    hi = (hi + Math.imul(ah5, bh9)) | 0;\n    var w14 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w14 >>> 26)) | 0;\n    w14 &= 0x3ffffff;\n    /* k = 15 */\n    lo = Math.imul(al9, bl6);\n    mid = Math.imul(al9, bh6);\n    mid = (mid + Math.imul(ah9, bl6)) | 0;\n    hi = Math.imul(ah9, bh6);\n    lo = (lo + Math.imul(al8, bl7)) | 0;\n    mid = (mid + Math.imul(al8, bh7)) | 0;\n    mid = (mid + Math.imul(ah8, bl7)) | 0;\n    hi = (hi + Math.imul(ah8, bh7)) | 0;\n    lo = (lo + Math.imul(al7, bl8)) | 0;\n    mid = (mid + Math.imul(al7, bh8)) | 0;\n    mid = (mid + Math.imul(ah7, bl8)) | 0;\n    hi = (hi + Math.imul(ah7, bh8)) | 0;\n    lo = (lo + Math.imul(al6, bl9)) | 0;\n    mid = (mid + Math.imul(al6, bh9)) | 0;\n    mid = (mid + Math.imul(ah6, bl9)) | 0;\n    hi = (hi + Math.imul(ah6, bh9)) | 0;\n    var w15 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w15 >>> 26)) | 0;\n    w15 &= 0x3ffffff;\n    /* k = 16 */\n    lo = Math.imul(al9, bl7);\n    mid = Math.imul(al9, bh7);\n    mid = (mid + Math.imul(ah9, bl7)) | 0;\n    hi = Math.imul(ah9, bh7);\n    lo = (lo + Math.imul(al8, bl8)) | 0;\n    mid = (mid + Math.imul(al8, bh8)) | 0;\n    mid = (mid + Math.imul(ah8, bl8)) | 0;\n    hi = (hi + Math.imul(ah8, bh8)) | 0;\n    lo = (lo + Math.imul(al7, bl9)) | 0;\n    mid = (mid + Math.imul(al7, bh9)) | 0;\n    mid = (mid + Math.imul(ah7, bl9)) | 0;\n    hi = (hi + Math.imul(ah7, bh9)) | 0;\n    var w16 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w16 >>> 26)) | 0;\n    w16 &= 0x3ffffff;\n    /* k = 17 */\n    lo = Math.imul(al9, bl8);\n    mid = Math.imul(al9, bh8);\n    mid = (mid + Math.imul(ah9, bl8)) | 0;\n    hi = Math.imul(ah9, bh8);\n    lo = (lo + Math.imul(al8, bl9)) | 0;\n    mid = (mid + Math.imul(al8, bh9)) | 0;\n    mid = (mid + Math.imul(ah8, bl9)) | 0;\n    hi = (hi + Math.imul(ah8, bh9)) | 0;\n    var w17 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w17 >>> 26)) | 0;\n    w17 &= 0x3ffffff;\n    /* k = 18 */\n    lo = Math.imul(al9, bl9);\n    mid = Math.imul(al9, bh9);\n    mid = (mid + Math.imul(ah9, bl9)) | 0;\n    hi = Math.imul(ah9, bh9);\n    var w18 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w18 >>> 26)) | 0;\n    w18 &= 0x3ffffff;\n    o[0] = w0;\n    o[1] = w1;\n    o[2] = w2;\n    o[3] = w3;\n    o[4] = w4;\n    o[5] = w5;\n    o[6] = w6;\n    o[7] = w7;\n    o[8] = w8;\n    o[9] = w9;\n    o[10] = w10;\n    o[11] = w11;\n    o[12] = w12;\n    o[13] = w13;\n    o[14] = w14;\n    o[15] = w15;\n    o[16] = w16;\n    o[17] = w17;\n    o[18] = w18;\n    if (c !== 0) {\n      o[19] = c;\n      out.length++;\n    }\n    return out;\n  };\n\n  // Polyfill comb\n  if (!Math.imul) {\n    comb10MulTo = smallMulTo;\n  }\n\n  function bigMulTo (self, num, out) {\n    out.negative = num.negative ^ self.negative;\n    out.length = self.length + num.length;\n\n    var carry = 0;\n    var hncarry = 0;\n    for (var k = 0; k < out.length - 1; k++) {\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\n      // note that ncarry could be >= 0x3ffffff\n      var ncarry = hncarry;\n      hncarry = 0;\n      var rword = carry & 0x3ffffff;\n      var maxJ = Math.min(k, num.length - 1);\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\n        var i = k - j;\n        var a = self.words[i] | 0;\n        var b = num.words[j] | 0;\n        var r = a * b;\n\n        var lo = r & 0x3ffffff;\n        ncarry = (ncarry + ((r / 0x4000000) | 0)) | 0;\n        lo = (lo + rword) | 0;\n        rword = lo & 0x3ffffff;\n        ncarry = (ncarry + (lo >>> 26)) | 0;\n\n        hncarry += ncarry >>> 26;\n        ncarry &= 0x3ffffff;\n      }\n      out.words[k] = rword;\n      carry = ncarry;\n      ncarry = hncarry;\n    }\n    if (carry !== 0) {\n      out.words[k] = carry;\n    } else {\n      out.length--;\n    }\n\n    return out.strip();\n  }\n\n  function jumboMulTo (self, num, out) {\n    var fftm = new FFTM();\n    return fftm.mulp(self, num, out);\n  }\n\n  BN.prototype.mulTo = function mulTo (num, out) {\n    var res;\n    var len = this.length + num.length;\n    if (this.length === 10 && num.length === 10) {\n      res = comb10MulTo(this, num, out);\n    } else if (len < 63) {\n      res = smallMulTo(this, num, out);\n    } else if (len < 1024) {\n      res = bigMulTo(this, num, out);\n    } else {\n      res = jumboMulTo(this, num, out);\n    }\n\n    return res;\n  };\n\n  // Cooley-Tukey algorithm for FFT\n  // slightly revisited to rely on looping instead of recursion\n\n  function FFTM (x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  FFTM.prototype.makeRBT = function makeRBT (N) {\n    var t = new Array(N);\n    var l = BN.prototype._countBits(N) - 1;\n    for (var i = 0; i < N; i++) {\n      t[i] = this.revBin(i, l, N);\n    }\n\n    return t;\n  };\n\n  // Returns binary-reversed representation of `x`\n  FFTM.prototype.revBin = function revBin (x, l, N) {\n    if (x === 0 || x === N - 1) return x;\n\n    var rb = 0;\n    for (var i = 0; i < l; i++) {\n      rb |= (x & 1) << (l - i - 1);\n      x >>= 1;\n    }\n\n    return rb;\n  };\n\n  // Performs \"tweedling\" phase, therefore 'emulating'\n  // behaviour of the recursive algorithm\n  FFTM.prototype.permute = function permute (rbt, rws, iws, rtws, itws, N) {\n    for (var i = 0; i < N; i++) {\n      rtws[i] = rws[rbt[i]];\n      itws[i] = iws[rbt[i]];\n    }\n  };\n\n  FFTM.prototype.transform = function transform (rws, iws, rtws, itws, N, rbt) {\n    this.permute(rbt, rws, iws, rtws, itws, N);\n\n    for (var s = 1; s < N; s <<= 1) {\n      var l = s << 1;\n\n      var rtwdf = Math.cos(2 * Math.PI / l);\n      var itwdf = Math.sin(2 * Math.PI / l);\n\n      for (var p = 0; p < N; p += l) {\n        var rtwdf_ = rtwdf;\n        var itwdf_ = itwdf;\n\n        for (var j = 0; j < s; j++) {\n          var re = rtws[p + j];\n          var ie = itws[p + j];\n\n          var ro = rtws[p + j + s];\n          var io = itws[p + j + s];\n\n          var rx = rtwdf_ * ro - itwdf_ * io;\n\n          io = rtwdf_ * io + itwdf_ * ro;\n          ro = rx;\n\n          rtws[p + j] = re + ro;\n          itws[p + j] = ie + io;\n\n          rtws[p + j + s] = re - ro;\n          itws[p + j + s] = ie - io;\n\n          /* jshint maxdepth : false */\n          if (j !== l) {\n            rx = rtwdf * rtwdf_ - itwdf * itwdf_;\n\n            itwdf_ = rtwdf * itwdf_ + itwdf * rtwdf_;\n            rtwdf_ = rx;\n          }\n        }\n      }\n    }\n  };\n\n  FFTM.prototype.guessLen13b = function guessLen13b (n, m) {\n    var N = Math.max(m, n) | 1;\n    var odd = N & 1;\n    var i = 0;\n    for (N = N / 2 | 0; N; N = N >>> 1) {\n      i++;\n    }\n\n    return 1 << i + 1 + odd;\n  };\n\n  FFTM.prototype.conjugate = function conjugate (rws, iws, N) {\n    if (N <= 1) return;\n\n    for (var i = 0; i < N / 2; i++) {\n      var t = rws[i];\n\n      rws[i] = rws[N - i - 1];\n      rws[N - i - 1] = t;\n\n      t = iws[i];\n\n      iws[i] = -iws[N - i - 1];\n      iws[N - i - 1] = -t;\n    }\n  };\n\n  FFTM.prototype.normalize13b = function normalize13b (ws, N) {\n    var carry = 0;\n    for (var i = 0; i < N / 2; i++) {\n      var w = Math.round(ws[2 * i + 1] / N) * 0x2000 +\n        Math.round(ws[2 * i] / N) +\n        carry;\n\n      ws[i] = w & 0x3ffffff;\n\n      if (w < 0x4000000) {\n        carry = 0;\n      } else {\n        carry = w / 0x4000000 | 0;\n      }\n    }\n\n    return ws;\n  };\n\n  FFTM.prototype.convert13b = function convert13b (ws, len, rws, N) {\n    var carry = 0;\n    for (var i = 0; i < len; i++) {\n      carry = carry + (ws[i] | 0);\n\n      rws[2 * i] = carry & 0x1fff; carry = carry >>> 13;\n      rws[2 * i + 1] = carry & 0x1fff; carry = carry >>> 13;\n    }\n\n    // Pad with zeroes\n    for (i = 2 * len; i < N; ++i) {\n      rws[i] = 0;\n    }\n\n    assert(carry === 0);\n    assert((carry & ~0x1fff) === 0);\n  };\n\n  FFTM.prototype.stub = function stub (N) {\n    var ph = new Array(N);\n    for (var i = 0; i < N; i++) {\n      ph[i] = 0;\n    }\n\n    return ph;\n  };\n\n  FFTM.prototype.mulp = function mulp (x, y, out) {\n    var N = 2 * this.guessLen13b(x.length, y.length);\n\n    var rbt = this.makeRBT(N);\n\n    var _ = this.stub(N);\n\n    var rws = new Array(N);\n    var rwst = new Array(N);\n    var iwst = new Array(N);\n\n    var nrws = new Array(N);\n    var nrwst = new Array(N);\n    var niwst = new Array(N);\n\n    var rmws = out.words;\n    rmws.length = N;\n\n    this.convert13b(x.words, x.length, rws, N);\n    this.convert13b(y.words, y.length, nrws, N);\n\n    this.transform(rws, _, rwst, iwst, N, rbt);\n    this.transform(nrws, _, nrwst, niwst, N, rbt);\n\n    for (var i = 0; i < N; i++) {\n      var rx = rwst[i] * nrwst[i] - iwst[i] * niwst[i];\n      iwst[i] = rwst[i] * niwst[i] + iwst[i] * nrwst[i];\n      rwst[i] = rx;\n    }\n\n    this.conjugate(rwst, iwst, N);\n    this.transform(rwst, iwst, rmws, _, N, rbt);\n    this.conjugate(rmws, _, N);\n    this.normalize13b(rmws, N);\n\n    out.negative = x.negative ^ y.negative;\n    out.length = x.length + y.length;\n    return out.strip();\n  };\n\n  // Multiply `this` by `num`\n  BN.prototype.mul = function mul (num) {\n    var out = new BN(null);\n    out.words = new Array(this.length + num.length);\n    return this.mulTo(num, out);\n  };\n\n  // Multiply employing FFT\n  BN.prototype.mulf = function mulf (num) {\n    var out = new BN(null);\n    out.words = new Array(this.length + num.length);\n    return jumboMulTo(this, num, out);\n  };\n\n  // In-place Multiplication\n  BN.prototype.imul = function imul (num) {\n    return this.clone().mulTo(num, this);\n  };\n\n  BN.prototype.imuln = function imuln (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n\n    // Carry\n    var carry = 0;\n    for (var i = 0; i < this.length; i++) {\n      var w = (this.words[i] | 0) * num;\n      var lo = (w & 0x3ffffff) + (carry & 0x3ffffff);\n      carry >>= 26;\n      carry += (w / 0x4000000) | 0;\n      // NOTE: lo is 27bit maximum\n      carry += lo >>> 26;\n      this.words[i] = lo & 0x3ffffff;\n    }\n\n    if (carry !== 0) {\n      this.words[i] = carry;\n      this.length++;\n    }\n\n    return this;\n  };\n\n  BN.prototype.muln = function muln (num) {\n    return this.clone().imuln(num);\n  };\n\n  // `this` * `this`\n  BN.prototype.sqr = function sqr () {\n    return this.mul(this);\n  };\n\n  // `this` * `this` in-place\n  BN.prototype.isqr = function isqr () {\n    return this.imul(this.clone());\n  };\n\n  // Math.pow(`this`, `num`)\n  BN.prototype.pow = function pow (num) {\n    var w = toBitArray(num);\n    if (w.length === 0) return new BN(1);\n\n    // Skip leading zeroes\n    var res = this;\n    for (var i = 0; i < w.length; i++, res = res.sqr()) {\n      if (w[i] !== 0) break;\n    }\n\n    if (++i < w.length) {\n      for (var q = res.sqr(); i < w.length; i++, q = q.sqr()) {\n        if (w[i] === 0) continue;\n\n        res = res.mul(q);\n      }\n    }\n\n    return res;\n  };\n\n  // Shift-left in-place\n  BN.prototype.iushln = function iushln (bits) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var r = bits % 26;\n    var s = (bits - r) / 26;\n    var carryMask = (0x3ffffff >>> (26 - r)) << (26 - r);\n    var i;\n\n    if (r !== 0) {\n      var carry = 0;\n\n      for (i = 0; i < this.length; i++) {\n        var newCarry = this.words[i] & carryMask;\n        var c = ((this.words[i] | 0) - newCarry) << r;\n        this.words[i] = c | carry;\n        carry = newCarry >>> (26 - r);\n      }\n\n      if (carry) {\n        this.words[i] = carry;\n        this.length++;\n      }\n    }\n\n    if (s !== 0) {\n      for (i = this.length - 1; i >= 0; i--) {\n        this.words[i + s] = this.words[i];\n      }\n\n      for (i = 0; i < s; i++) {\n        this.words[i] = 0;\n      }\n\n      this.length += s;\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.ishln = function ishln (bits) {\n    // TODO(indutny): implement me\n    assert(this.negative === 0);\n    return this.iushln(bits);\n  };\n\n  // Shift-right in-place\n  // NOTE: `hint` is a lowest bit before trailing zeroes\n  // NOTE: if `extended` is present - it will be filled with destroyed bits\n  BN.prototype.iushrn = function iushrn (bits, hint, extended) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var h;\n    if (hint) {\n      h = (hint - (hint % 26)) / 26;\n    } else {\n      h = 0;\n    }\n\n    var r = bits % 26;\n    var s = Math.min((bits - r) / 26, this.length);\n    var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\n    var maskedWords = extended;\n\n    h -= s;\n    h = Math.max(0, h);\n\n    // Extended mode, copy masked part\n    if (maskedWords) {\n      for (var i = 0; i < s; i++) {\n        maskedWords.words[i] = this.words[i];\n      }\n      maskedWords.length = s;\n    }\n\n    if (s === 0) {\n      // No-op, we should not move anything at all\n    } else if (this.length > s) {\n      this.length -= s;\n      for (i = 0; i < this.length; i++) {\n        this.words[i] = this.words[i + s];\n      }\n    } else {\n      this.words[0] = 0;\n      this.length = 1;\n    }\n\n    var carry = 0;\n    for (i = this.length - 1; i >= 0 && (carry !== 0 || i >= h); i--) {\n      var word = this.words[i] | 0;\n      this.words[i] = (carry << (26 - r)) | (word >>> r);\n      carry = word & mask;\n    }\n\n    // Push carried bits as a mask\n    if (maskedWords && carry !== 0) {\n      maskedWords.words[maskedWords.length++] = carry;\n    }\n\n    if (this.length === 0) {\n      this.words[0] = 0;\n      this.length = 1;\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.ishrn = function ishrn (bits, hint, extended) {\n    // TODO(indutny): implement me\n    assert(this.negative === 0);\n    return this.iushrn(bits, hint, extended);\n  };\n\n  // Shift-left\n  BN.prototype.shln = function shln (bits) {\n    return this.clone().ishln(bits);\n  };\n\n  BN.prototype.ushln = function ushln (bits) {\n    return this.clone().iushln(bits);\n  };\n\n  // Shift-right\n  BN.prototype.shrn = function shrn (bits) {\n    return this.clone().ishrn(bits);\n  };\n\n  BN.prototype.ushrn = function ushrn (bits) {\n    return this.clone().iushrn(bits);\n  };\n\n  // Test if n bit is set\n  BN.prototype.testn = function testn (bit) {\n    assert(typeof bit === 'number' && bit >= 0);\n    var r = bit % 26;\n    var s = (bit - r) / 26;\n    var q = 1 << r;\n\n    // Fast case: bit is much higher than all existing words\n    if (this.length <= s) return false;\n\n    // Check bit and return\n    var w = this.words[s];\n\n    return !!(w & q);\n  };\n\n  // Return only lowers bits of number (in-place)\n  BN.prototype.imaskn = function imaskn (bits) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var r = bits % 26;\n    var s = (bits - r) / 26;\n\n    assert(this.negative === 0, 'imaskn works only with positive numbers');\n\n    if (this.length <= s) {\n      return this;\n    }\n\n    if (r !== 0) {\n      s++;\n    }\n    this.length = Math.min(s, this.length);\n\n    if (r !== 0) {\n      var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\n      this.words[this.length - 1] &= mask;\n    }\n\n    return this.strip();\n  };\n\n  // Return only lowers bits of number\n  BN.prototype.maskn = function maskn (bits) {\n    return this.clone().imaskn(bits);\n  };\n\n  // Add plain number `num` to `this`\n  BN.prototype.iaddn = function iaddn (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n    if (num < 0) return this.isubn(-num);\n\n    // Possible sign change\n    if (this.negative !== 0) {\n      if (this.length === 1 && (this.words[0] | 0) < num) {\n        this.words[0] = num - (this.words[0] | 0);\n        this.negative = 0;\n        return this;\n      }\n\n      this.negative = 0;\n      this.isubn(num);\n      this.negative = 1;\n      return this;\n    }\n\n    // Add without checks\n    return this._iaddn(num);\n  };\n\n  BN.prototype._iaddn = function _iaddn (num) {\n    this.words[0] += num;\n\n    // Carry\n    for (var i = 0; i < this.length && this.words[i] >= 0x4000000; i++) {\n      this.words[i] -= 0x4000000;\n      if (i === this.length - 1) {\n        this.words[i + 1] = 1;\n      } else {\n        this.words[i + 1]++;\n      }\n    }\n    this.length = Math.max(this.length, i + 1);\n\n    return this;\n  };\n\n  // Subtract plain number `num` from `this`\n  BN.prototype.isubn = function isubn (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n    if (num < 0) return this.iaddn(-num);\n\n    if (this.negative !== 0) {\n      this.negative = 0;\n      this.iaddn(num);\n      this.negative = 1;\n      return this;\n    }\n\n    this.words[0] -= num;\n\n    if (this.length === 1 && this.words[0] < 0) {\n      this.words[0] = -this.words[0];\n      this.negative = 1;\n    } else {\n      // Carry\n      for (var i = 0; i < this.length && this.words[i] < 0; i++) {\n        this.words[i] += 0x4000000;\n        this.words[i + 1] -= 1;\n      }\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.addn = function addn (num) {\n    return this.clone().iaddn(num);\n  };\n\n  BN.prototype.subn = function subn (num) {\n    return this.clone().isubn(num);\n  };\n\n  BN.prototype.iabs = function iabs () {\n    this.negative = 0;\n\n    return this;\n  };\n\n  BN.prototype.abs = function abs () {\n    return this.clone().iabs();\n  };\n\n  BN.prototype._ishlnsubmul = function _ishlnsubmul (num, mul, shift) {\n    var len = num.length + shift;\n    var i;\n\n    this._expand(len);\n\n    var w;\n    var carry = 0;\n    for (i = 0; i < num.length; i++) {\n      w = (this.words[i + shift] | 0) + carry;\n      var right = (num.words[i] | 0) * mul;\n      w -= right & 0x3ffffff;\n      carry = (w >> 26) - ((right / 0x4000000) | 0);\n      this.words[i + shift] = w & 0x3ffffff;\n    }\n    for (; i < this.length - shift; i++) {\n      w = (this.words[i + shift] | 0) + carry;\n      carry = w >> 26;\n      this.words[i + shift] = w & 0x3ffffff;\n    }\n\n    if (carry === 0) return this.strip();\n\n    // Subtraction overflow\n    assert(carry === -1);\n    carry = 0;\n    for (i = 0; i < this.length; i++) {\n      w = -(this.words[i] | 0) + carry;\n      carry = w >> 26;\n      this.words[i] = w & 0x3ffffff;\n    }\n    this.negative = 1;\n\n    return this.strip();\n  };\n\n  BN.prototype._wordDiv = function _wordDiv (num, mode) {\n    var shift = this.length - num.length;\n\n    var a = this.clone();\n    var b = num;\n\n    // Normalize\n    var bhi = b.words[b.length - 1] | 0;\n    var bhiBits = this._countBits(bhi);\n    shift = 26 - bhiBits;\n    if (shift !== 0) {\n      b = b.ushln(shift);\n      a.iushln(shift);\n      bhi = b.words[b.length - 1] | 0;\n    }\n\n    // Initialize quotient\n    var m = a.length - b.length;\n    var q;\n\n    if (mode !== 'mod') {\n      q = new BN(null);\n      q.length = m + 1;\n      q.words = new Array(q.length);\n      for (var i = 0; i < q.length; i++) {\n        q.words[i] = 0;\n      }\n    }\n\n    var diff = a.clone()._ishlnsubmul(b, 1, m);\n    if (diff.negative === 0) {\n      a = diff;\n      if (q) {\n        q.words[m] = 1;\n      }\n    }\n\n    for (var j = m - 1; j >= 0; j--) {\n      var qj = (a.words[b.length + j] | 0) * 0x4000000 +\n        (a.words[b.length + j - 1] | 0);\n\n      // NOTE: (qj / bhi) is (0x3ffffff * 0x4000000 + 0x3ffffff) / 0x2000000 max\n      // (0x7ffffff)\n      qj = Math.min((qj / bhi) | 0, 0x3ffffff);\n\n      a._ishlnsubmul(b, qj, j);\n      while (a.negative !== 0) {\n        qj--;\n        a.negative = 0;\n        a._ishlnsubmul(b, 1, j);\n        if (!a.isZero()) {\n          a.negative ^= 1;\n        }\n      }\n      if (q) {\n        q.words[j] = qj;\n      }\n    }\n    if (q) {\n      q.strip();\n    }\n    a.strip();\n\n    // Denormalize\n    if (mode !== 'div' && shift !== 0) {\n      a.iushrn(shift);\n    }\n\n    return {\n      div: q || null,\n      mod: a\n    };\n  };\n\n  // NOTE: 1) `mode` can be set to `mod` to request mod only,\n  //       to `div` to request div only, or be absent to\n  //       request both div & mod\n  //       2) `positive` is true if unsigned mod is requested\n  BN.prototype.divmod = function divmod (num, mode, positive) {\n    assert(!num.isZero());\n\n    if (this.isZero()) {\n      return {\n        div: new BN(0),\n        mod: new BN(0)\n      };\n    }\n\n    var div, mod, res;\n    if (this.negative !== 0 && num.negative === 0) {\n      res = this.neg().divmod(num, mode);\n\n      if (mode !== 'mod') {\n        div = res.div.neg();\n      }\n\n      if (mode !== 'div') {\n        mod = res.mod.neg();\n        if (positive && mod.negative !== 0) {\n          mod.iadd(num);\n        }\n      }\n\n      return {\n        div: div,\n        mod: mod\n      };\n    }\n\n    if (this.negative === 0 && num.negative !== 0) {\n      res = this.divmod(num.neg(), mode);\n\n      if (mode !== 'mod') {\n        div = res.div.neg();\n      }\n\n      return {\n        div: div,\n        mod: res.mod\n      };\n    }\n\n    if ((this.negative & num.negative) !== 0) {\n      res = this.neg().divmod(num.neg(), mode);\n\n      if (mode !== 'div') {\n        mod = res.mod.neg();\n        if (positive && mod.negative !== 0) {\n          mod.isub(num);\n        }\n      }\n\n      return {\n        div: res.div,\n        mod: mod\n      };\n    }\n\n    // Both numbers are positive at this point\n\n    // Strip both numbers to approximate shift value\n    if (num.length > this.length || this.cmp(num) < 0) {\n      return {\n        div: new BN(0),\n        mod: this\n      };\n    }\n\n    // Very short reduction\n    if (num.length === 1) {\n      if (mode === 'div') {\n        return {\n          div: this.divn(num.words[0]),\n          mod: null\n        };\n      }\n\n      if (mode === 'mod') {\n        return {\n          div: null,\n          mod: new BN(this.modn(num.words[0]))\n        };\n      }\n\n      return {\n        div: this.divn(num.words[0]),\n        mod: new BN(this.modn(num.words[0]))\n      };\n    }\n\n    return this._wordDiv(num, mode);\n  };\n\n  // Find `this` / `num`\n  BN.prototype.div = function div (num) {\n    return this.divmod(num, 'div', false).div;\n  };\n\n  // Find `this` % `num`\n  BN.prototype.mod = function mod (num) {\n    return this.divmod(num, 'mod', false).mod;\n  };\n\n  BN.prototype.umod = function umod (num) {\n    return this.divmod(num, 'mod', true).mod;\n  };\n\n  // Find Round(`this` / `num`)\n  BN.prototype.divRound = function divRound (num) {\n    var dm = this.divmod(num);\n\n    // Fast case - exact division\n    if (dm.mod.isZero()) return dm.div;\n\n    var mod = dm.div.negative !== 0 ? dm.mod.isub(num) : dm.mod;\n\n    var half = num.ushrn(1);\n    var r2 = num.andln(1);\n    var cmp = mod.cmp(half);\n\n    // Round down\n    if (cmp < 0 || r2 === 1 && cmp === 0) return dm.div;\n\n    // Round up\n    return dm.div.negative !== 0 ? dm.div.isubn(1) : dm.div.iaddn(1);\n  };\n\n  BN.prototype.modn = function modn (num) {\n    assert(num <= 0x3ffffff);\n    var p = (1 << 26) % num;\n\n    var acc = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      acc = (p * acc + (this.words[i] | 0)) % num;\n    }\n\n    return acc;\n  };\n\n  // In-place division by number\n  BN.prototype.idivn = function idivn (num) {\n    assert(num <= 0x3ffffff);\n\n    var carry = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      var w = (this.words[i] | 0) + carry * 0x4000000;\n      this.words[i] = (w / num) | 0;\n      carry = w % num;\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.divn = function divn (num) {\n    return this.clone().idivn(num);\n  };\n\n  BN.prototype.egcd = function egcd (p) {\n    assert(p.negative === 0);\n    assert(!p.isZero());\n\n    var x = this;\n    var y = p.clone();\n\n    if (x.negative !== 0) {\n      x = x.umod(p);\n    } else {\n      x = x.clone();\n    }\n\n    // A * x + B * y = x\n    var A = new BN(1);\n    var B = new BN(0);\n\n    // C * x + D * y = y\n    var C = new BN(0);\n    var D = new BN(1);\n\n    var g = 0;\n\n    while (x.isEven() && y.isEven()) {\n      x.iushrn(1);\n      y.iushrn(1);\n      ++g;\n    }\n\n    var yp = y.clone();\n    var xp = x.clone();\n\n    while (!x.isZero()) {\n      for (var i = 0, im = 1; (x.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\n      if (i > 0) {\n        x.iushrn(i);\n        while (i-- > 0) {\n          if (A.isOdd() || B.isOdd()) {\n            A.iadd(yp);\n            B.isub(xp);\n          }\n\n          A.iushrn(1);\n          B.iushrn(1);\n        }\n      }\n\n      for (var j = 0, jm = 1; (y.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\n      if (j > 0) {\n        y.iushrn(j);\n        while (j-- > 0) {\n          if (C.isOdd() || D.isOdd()) {\n            C.iadd(yp);\n            D.isub(xp);\n          }\n\n          C.iushrn(1);\n          D.iushrn(1);\n        }\n      }\n\n      if (x.cmp(y) >= 0) {\n        x.isub(y);\n        A.isub(C);\n        B.isub(D);\n      } else {\n        y.isub(x);\n        C.isub(A);\n        D.isub(B);\n      }\n    }\n\n    return {\n      a: C,\n      b: D,\n      gcd: y.iushln(g)\n    };\n  };\n\n  // This is reduced incarnation of the binary EEA\n  // above, designated to invert members of the\n  // _prime_ fields F(p) at a maximal speed\n  BN.prototype._invmp = function _invmp (p) {\n    assert(p.negative === 0);\n    assert(!p.isZero());\n\n    var a = this;\n    var b = p.clone();\n\n    if (a.negative !== 0) {\n      a = a.umod(p);\n    } else {\n      a = a.clone();\n    }\n\n    var x1 = new BN(1);\n    var x2 = new BN(0);\n\n    var delta = b.clone();\n\n    while (a.cmpn(1) > 0 && b.cmpn(1) > 0) {\n      for (var i = 0, im = 1; (a.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\n      if (i > 0) {\n        a.iushrn(i);\n        while (i-- > 0) {\n          if (x1.isOdd()) {\n            x1.iadd(delta);\n          }\n\n          x1.iushrn(1);\n        }\n      }\n\n      for (var j = 0, jm = 1; (b.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\n      if (j > 0) {\n        b.iushrn(j);\n        while (j-- > 0) {\n          if (x2.isOdd()) {\n            x2.iadd(delta);\n          }\n\n          x2.iushrn(1);\n        }\n      }\n\n      if (a.cmp(b) >= 0) {\n        a.isub(b);\n        x1.isub(x2);\n      } else {\n        b.isub(a);\n        x2.isub(x1);\n      }\n    }\n\n    var res;\n    if (a.cmpn(1) === 0) {\n      res = x1;\n    } else {\n      res = x2;\n    }\n\n    if (res.cmpn(0) < 0) {\n      res.iadd(p);\n    }\n\n    return res;\n  };\n\n  BN.prototype.gcd = function gcd (num) {\n    if (this.isZero()) return num.abs();\n    if (num.isZero()) return this.abs();\n\n    var a = this.clone();\n    var b = num.clone();\n    a.negative = 0;\n    b.negative = 0;\n\n    // Remove common factor of two\n    for (var shift = 0; a.isEven() && b.isEven(); shift++) {\n      a.iushrn(1);\n      b.iushrn(1);\n    }\n\n    do {\n      while (a.isEven()) {\n        a.iushrn(1);\n      }\n      while (b.isEven()) {\n        b.iushrn(1);\n      }\n\n      var r = a.cmp(b);\n      if (r < 0) {\n        // Swap `a` and `b` to make `a` always bigger than `b`\n        var t = a;\n        a = b;\n        b = t;\n      } else if (r === 0 || b.cmpn(1) === 0) {\n        break;\n      }\n\n      a.isub(b);\n    } while (true);\n\n    return b.iushln(shift);\n  };\n\n  // Invert number in the field F(num)\n  BN.prototype.invm = function invm (num) {\n    return this.egcd(num).a.umod(num);\n  };\n\n  BN.prototype.isEven = function isEven () {\n    return (this.words[0] & 1) === 0;\n  };\n\n  BN.prototype.isOdd = function isOdd () {\n    return (this.words[0] & 1) === 1;\n  };\n\n  // And first word and num\n  BN.prototype.andln = function andln (num) {\n    return this.words[0] & num;\n  };\n\n  // Increment at the bit position in-line\n  BN.prototype.bincn = function bincn (bit) {\n    assert(typeof bit === 'number');\n    var r = bit % 26;\n    var s = (bit - r) / 26;\n    var q = 1 << r;\n\n    // Fast case: bit is much higher than all existing words\n    if (this.length <= s) {\n      this._expand(s + 1);\n      this.words[s] |= q;\n      return this;\n    }\n\n    // Add bit and propagate, if needed\n    var carry = q;\n    for (var i = s; carry !== 0 && i < this.length; i++) {\n      var w = this.words[i] | 0;\n      w += carry;\n      carry = w >>> 26;\n      w &= 0x3ffffff;\n      this.words[i] = w;\n    }\n    if (carry !== 0) {\n      this.words[i] = carry;\n      this.length++;\n    }\n    return this;\n  };\n\n  BN.prototype.isZero = function isZero () {\n    return this.length === 1 && this.words[0] === 0;\n  };\n\n  BN.prototype.cmpn = function cmpn (num) {\n    var negative = num < 0;\n\n    if (this.negative !== 0 && !negative) return -1;\n    if (this.negative === 0 && negative) return 1;\n\n    this.strip();\n\n    var res;\n    if (this.length > 1) {\n      res = 1;\n    } else {\n      if (negative) {\n        num = -num;\n      }\n\n      assert(num <= 0x3ffffff, 'Number is too big');\n\n      var w = this.words[0] | 0;\n      res = w === num ? 0 : w < num ? -1 : 1;\n    }\n    if (this.negative !== 0) return -res | 0;\n    return res;\n  };\n\n  // Compare two numbers and return:\n  // 1 - if `this` > `num`\n  // 0 - if `this` == `num`\n  // -1 - if `this` < `num`\n  BN.prototype.cmp = function cmp (num) {\n    if (this.negative !== 0 && num.negative === 0) return -1;\n    if (this.negative === 0 && num.negative !== 0) return 1;\n\n    var res = this.ucmp(num);\n    if (this.negative !== 0) return -res | 0;\n    return res;\n  };\n\n  // Unsigned comparison\n  BN.prototype.ucmp = function ucmp (num) {\n    // At this point both numbers have the same sign\n    if (this.length > num.length) return 1;\n    if (this.length < num.length) return -1;\n\n    var res = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      var a = this.words[i] | 0;\n      var b = num.words[i] | 0;\n\n      if (a === b) continue;\n      if (a < b) {\n        res = -1;\n      } else if (a > b) {\n        res = 1;\n      }\n      break;\n    }\n    return res;\n  };\n\n  BN.prototype.gtn = function gtn (num) {\n    return this.cmpn(num) === 1;\n  };\n\n  BN.prototype.gt = function gt (num) {\n    return this.cmp(num) === 1;\n  };\n\n  BN.prototype.gten = function gten (num) {\n    return this.cmpn(num) >= 0;\n  };\n\n  BN.prototype.gte = function gte (num) {\n    return this.cmp(num) >= 0;\n  };\n\n  BN.prototype.ltn = function ltn (num) {\n    return this.cmpn(num) === -1;\n  };\n\n  BN.prototype.lt = function lt (num) {\n    return this.cmp(num) === -1;\n  };\n\n  BN.prototype.lten = function lten (num) {\n    return this.cmpn(num) <= 0;\n  };\n\n  BN.prototype.lte = function lte (num) {\n    return this.cmp(num) <= 0;\n  };\n\n  BN.prototype.eqn = function eqn (num) {\n    return this.cmpn(num) === 0;\n  };\n\n  BN.prototype.eq = function eq (num) {\n    return this.cmp(num) === 0;\n  };\n\n  //\n  // A reduce context, could be using montgomery or something better, depending\n  // on the `m` itself.\n  //\n  BN.red = function red (num) {\n    return new Red(num);\n  };\n\n  BN.prototype.toRed = function toRed (ctx) {\n    assert(!this.red, 'Already a number in reduction context');\n    assert(this.negative === 0, 'red works only with positives');\n    return ctx.convertTo(this)._forceRed(ctx);\n  };\n\n  BN.prototype.fromRed = function fromRed () {\n    assert(this.red, 'fromRed works only with numbers in reduction context');\n    return this.red.convertFrom(this);\n  };\n\n  BN.prototype._forceRed = function _forceRed (ctx) {\n    this.red = ctx;\n    return this;\n  };\n\n  BN.prototype.forceRed = function forceRed (ctx) {\n    assert(!this.red, 'Already a number in reduction context');\n    return this._forceRed(ctx);\n  };\n\n  BN.prototype.redAdd = function redAdd (num) {\n    assert(this.red, 'redAdd works only with red numbers');\n    return this.red.add(this, num);\n  };\n\n  BN.prototype.redIAdd = function redIAdd (num) {\n    assert(this.red, 'redIAdd works only with red numbers');\n    return this.red.iadd(this, num);\n  };\n\n  BN.prototype.redSub = function redSub (num) {\n    assert(this.red, 'redSub works only with red numbers');\n    return this.red.sub(this, num);\n  };\n\n  BN.prototype.redISub = function redISub (num) {\n    assert(this.red, 'redISub works only with red numbers');\n    return this.red.isub(this, num);\n  };\n\n  BN.prototype.redShl = function redShl (num) {\n    assert(this.red, 'redShl works only with red numbers');\n    return this.red.shl(this, num);\n  };\n\n  BN.prototype.redMul = function redMul (num) {\n    assert(this.red, 'redMul works only with red numbers');\n    this.red._verify2(this, num);\n    return this.red.mul(this, num);\n  };\n\n  BN.prototype.redIMul = function redIMul (num) {\n    assert(this.red, 'redMul works only with red numbers');\n    this.red._verify2(this, num);\n    return this.red.imul(this, num);\n  };\n\n  BN.prototype.redSqr = function redSqr () {\n    assert(this.red, 'redSqr works only with red numbers');\n    this.red._verify1(this);\n    return this.red.sqr(this);\n  };\n\n  BN.prototype.redISqr = function redISqr () {\n    assert(this.red, 'redISqr works only with red numbers');\n    this.red._verify1(this);\n    return this.red.isqr(this);\n  };\n\n  // Square root over p\n  BN.prototype.redSqrt = function redSqrt () {\n    assert(this.red, 'redSqrt works only with red numbers');\n    this.red._verify1(this);\n    return this.red.sqrt(this);\n  };\n\n  BN.prototype.redInvm = function redInvm () {\n    assert(this.red, 'redInvm works only with red numbers');\n    this.red._verify1(this);\n    return this.red.invm(this);\n  };\n\n  // Return negative clone of `this` % `red modulo`\n  BN.prototype.redNeg = function redNeg () {\n    assert(this.red, 'redNeg works only with red numbers');\n    this.red._verify1(this);\n    return this.red.neg(this);\n  };\n\n  BN.prototype.redPow = function redPow (num) {\n    assert(this.red && !num.red, 'redPow(normalNum)');\n    this.red._verify1(this);\n    return this.red.pow(this, num);\n  };\n\n  // Prime numbers with efficient reduction\n  var primes = {\n    k256: null,\n    p224: null,\n    p192: null,\n    p25519: null\n  };\n\n  // Pseudo-Mersenne prime\n  function MPrime (name, p) {\n    // P = 2 ^ N - K\n    this.name = name;\n    this.p = new BN(p, 16);\n    this.n = this.p.bitLength();\n    this.k = new BN(1).iushln(this.n).isub(this.p);\n\n    this.tmp = this._tmp();\n  }\n\n  MPrime.prototype._tmp = function _tmp () {\n    var tmp = new BN(null);\n    tmp.words = new Array(Math.ceil(this.n / 13));\n    return tmp;\n  };\n\n  MPrime.prototype.ireduce = function ireduce (num) {\n    // Assumes that `num` is less than `P^2`\n    // num = HI * (2 ^ N - K) + HI * K + LO = HI * K + LO (mod P)\n    var r = num;\n    var rlen;\n\n    do {\n      this.split(r, this.tmp);\n      r = this.imulK(r);\n      r = r.iadd(this.tmp);\n      rlen = r.bitLength();\n    } while (rlen > this.n);\n\n    var cmp = rlen < this.n ? -1 : r.ucmp(this.p);\n    if (cmp === 0) {\n      r.words[0] = 0;\n      r.length = 1;\n    } else if (cmp > 0) {\n      r.isub(this.p);\n    } else {\n      r.strip();\n    }\n\n    return r;\n  };\n\n  MPrime.prototype.split = function split (input, out) {\n    input.iushrn(this.n, 0, out);\n  };\n\n  MPrime.prototype.imulK = function imulK (num) {\n    return num.imul(this.k);\n  };\n\n  function K256 () {\n    MPrime.call(\n      this,\n      'k256',\n      'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f');\n  }\n  inherits(K256, MPrime);\n\n  K256.prototype.split = function split (input, output) {\n    // 256 = 9 * 26 + 22\n    var mask = 0x3fffff;\n\n    var outLen = Math.min(input.length, 9);\n    for (var i = 0; i < outLen; i++) {\n      output.words[i] = input.words[i];\n    }\n    output.length = outLen;\n\n    if (input.length <= 9) {\n      input.words[0] = 0;\n      input.length = 1;\n      return;\n    }\n\n    // Shift by 9 limbs\n    var prev = input.words[9];\n    output.words[output.length++] = prev & mask;\n\n    for (i = 10; i < input.length; i++) {\n      var next = input.words[i] | 0;\n      input.words[i - 10] = ((next & mask) << 4) | (prev >>> 22);\n      prev = next;\n    }\n    prev >>>= 22;\n    input.words[i - 10] = prev;\n    if (prev === 0 && input.length > 10) {\n      input.length -= 10;\n    } else {\n      input.length -= 9;\n    }\n  };\n\n  K256.prototype.imulK = function imulK (num) {\n    // K = 0x1000003d1 = [ 0x40, 0x3d1 ]\n    num.words[num.length] = 0;\n    num.words[num.length + 1] = 0;\n    num.length += 2;\n\n    // bounded at: 0x40 * 0x3ffffff + 0x3d0 = 0x100000390\n    var lo = 0;\n    for (var i = 0; i < num.length; i++) {\n      var w = num.words[i] | 0;\n      lo += w * 0x3d1;\n      num.words[i] = lo & 0x3ffffff;\n      lo = w * 0x40 + ((lo / 0x4000000) | 0);\n    }\n\n    // Fast length reduction\n    if (num.words[num.length - 1] === 0) {\n      num.length--;\n      if (num.words[num.length - 1] === 0) {\n        num.length--;\n      }\n    }\n    return num;\n  };\n\n  function P224 () {\n    MPrime.call(\n      this,\n      'p224',\n      'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001');\n  }\n  inherits(P224, MPrime);\n\n  function P192 () {\n    MPrime.call(\n      this,\n      'p192',\n      'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff');\n  }\n  inherits(P192, MPrime);\n\n  function P25519 () {\n    // 2 ^ 255 - 19\n    MPrime.call(\n      this,\n      '25519',\n      '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed');\n  }\n  inherits(P25519, MPrime);\n\n  P25519.prototype.imulK = function imulK (num) {\n    // K = 0x13\n    var carry = 0;\n    for (var i = 0; i < num.length; i++) {\n      var hi = (num.words[i] | 0) * 0x13 + carry;\n      var lo = hi & 0x3ffffff;\n      hi >>>= 26;\n\n      num.words[i] = lo;\n      carry = hi;\n    }\n    if (carry !== 0) {\n      num.words[num.length++] = carry;\n    }\n    return num;\n  };\n\n  // Exported mostly for testing purposes, use plain name instead\n  BN._prime = function prime (name) {\n    // Cached version of prime\n    if (primes[name]) return primes[name];\n\n    var prime;\n    if (name === 'k256') {\n      prime = new K256();\n    } else if (name === 'p224') {\n      prime = new P224();\n    } else if (name === 'p192') {\n      prime = new P192();\n    } else if (name === 'p25519') {\n      prime = new P25519();\n    } else {\n      throw new Error('Unknown prime ' + name);\n    }\n    primes[name] = prime;\n\n    return prime;\n  };\n\n  //\n  // Base reduction engine\n  //\n  function Red (m) {\n    if (typeof m === 'string') {\n      var prime = BN._prime(m);\n      this.m = prime.p;\n      this.prime = prime;\n    } else {\n      assert(m.gtn(1), 'modulus must be greater than 1');\n      this.m = m;\n      this.prime = null;\n    }\n  }\n\n  Red.prototype._verify1 = function _verify1 (a) {\n    assert(a.negative === 0, 'red works only with positives');\n    assert(a.red, 'red works only with red numbers');\n  };\n\n  Red.prototype._verify2 = function _verify2 (a, b) {\n    assert((a.negative | b.negative) === 0, 'red works only with positives');\n    assert(a.red && a.red === b.red,\n      'red works only with red numbers');\n  };\n\n  Red.prototype.imod = function imod (a) {\n    if (this.prime) return this.prime.ireduce(a)._forceRed(this);\n    return a.umod(this.m)._forceRed(this);\n  };\n\n  Red.prototype.neg = function neg (a) {\n    if (a.isZero()) {\n      return a.clone();\n    }\n\n    return this.m.sub(a)._forceRed(this);\n  };\n\n  Red.prototype.add = function add (a, b) {\n    this._verify2(a, b);\n\n    var res = a.add(b);\n    if (res.cmp(this.m) >= 0) {\n      res.isub(this.m);\n    }\n    return res._forceRed(this);\n  };\n\n  Red.prototype.iadd = function iadd (a, b) {\n    this._verify2(a, b);\n\n    var res = a.iadd(b);\n    if (res.cmp(this.m) >= 0) {\n      res.isub(this.m);\n    }\n    return res;\n  };\n\n  Red.prototype.sub = function sub (a, b) {\n    this._verify2(a, b);\n\n    var res = a.sub(b);\n    if (res.cmpn(0) < 0) {\n      res.iadd(this.m);\n    }\n    return res._forceRed(this);\n  };\n\n  Red.prototype.isub = function isub (a, b) {\n    this._verify2(a, b);\n\n    var res = a.isub(b);\n    if (res.cmpn(0) < 0) {\n      res.iadd(this.m);\n    }\n    return res;\n  };\n\n  Red.prototype.shl = function shl (a, num) {\n    this._verify1(a);\n    return this.imod(a.ushln(num));\n  };\n\n  Red.prototype.imul = function imul (a, b) {\n    this._verify2(a, b);\n    return this.imod(a.imul(b));\n  };\n\n  Red.prototype.mul = function mul (a, b) {\n    this._verify2(a, b);\n    return this.imod(a.mul(b));\n  };\n\n  Red.prototype.isqr = function isqr (a) {\n    return this.imul(a, a.clone());\n  };\n\n  Red.prototype.sqr = function sqr (a) {\n    return this.mul(a, a);\n  };\n\n  Red.prototype.sqrt = function sqrt (a) {\n    if (a.isZero()) return a.clone();\n\n    var mod3 = this.m.andln(3);\n    assert(mod3 % 2 === 1);\n\n    // Fast case\n    if (mod3 === 3) {\n      var pow = this.m.add(new BN(1)).iushrn(2);\n      return this.pow(a, pow);\n    }\n\n    // Tonelli-Shanks algorithm (Totally unoptimized and slow)\n    //\n    // Find Q and S, that Q * 2 ^ S = (P - 1)\n    var q = this.m.subn(1);\n    var s = 0;\n    while (!q.isZero() && q.andln(1) === 0) {\n      s++;\n      q.iushrn(1);\n    }\n    assert(!q.isZero());\n\n    var one = new BN(1).toRed(this);\n    var nOne = one.redNeg();\n\n    // Find quadratic non-residue\n    // NOTE: Max is such because of generalized Riemann hypothesis.\n    var lpow = this.m.subn(1).iushrn(1);\n    var z = this.m.bitLength();\n    z = new BN(2 * z * z).toRed(this);\n\n    while (this.pow(z, lpow).cmp(nOne) !== 0) {\n      z.redIAdd(nOne);\n    }\n\n    var c = this.pow(z, q);\n    var r = this.pow(a, q.addn(1).iushrn(1));\n    var t = this.pow(a, q);\n    var m = s;\n    while (t.cmp(one) !== 0) {\n      var tmp = t;\n      for (var i = 0; tmp.cmp(one) !== 0; i++) {\n        tmp = tmp.redSqr();\n      }\n      assert(i < m);\n      var b = this.pow(c, new BN(1).iushln(m - i - 1));\n\n      r = r.redMul(b);\n      c = b.redSqr();\n      t = t.redMul(c);\n      m = i;\n    }\n\n    return r;\n  };\n\n  Red.prototype.invm = function invm (a) {\n    var inv = a._invmp(this.m);\n    if (inv.negative !== 0) {\n      inv.negative = 0;\n      return this.imod(inv).redNeg();\n    } else {\n      return this.imod(inv);\n    }\n  };\n\n  Red.prototype.pow = function pow (a, num) {\n    if (num.isZero()) return new BN(1);\n    if (num.cmpn(1) === 0) return a.clone();\n\n    var windowSize = 4;\n    var wnd = new Array(1 << windowSize);\n    wnd[0] = new BN(1).toRed(this);\n    wnd[1] = a;\n    for (var i = 2; i < wnd.length; i++) {\n      wnd[i] = this.mul(wnd[i - 1], a);\n    }\n\n    var res = wnd[0];\n    var current = 0;\n    var currentLen = 0;\n    var start = num.bitLength() % 26;\n    if (start === 0) {\n      start = 26;\n    }\n\n    for (i = num.length - 1; i >= 0; i--) {\n      var word = num.words[i];\n      for (var j = start - 1; j >= 0; j--) {\n        var bit = (word >> j) & 1;\n        if (res !== wnd[0]) {\n          res = this.sqr(res);\n        }\n\n        if (bit === 0 && current === 0) {\n          currentLen = 0;\n          continue;\n        }\n\n        current <<= 1;\n        current |= bit;\n        currentLen++;\n        if (currentLen !== windowSize && (i !== 0 || j !== 0)) continue;\n\n        res = this.mul(res, wnd[current]);\n        currentLen = 0;\n        current = 0;\n      }\n      start = 26;\n    }\n\n    return res;\n  };\n\n  Red.prototype.convertTo = function convertTo (num) {\n    var r = num.umod(this.m);\n\n    return r === num ? r.clone() : r;\n  };\n\n  Red.prototype.convertFrom = function convertFrom (num) {\n    var res = num.clone();\n    res.red = null;\n    return res;\n  };\n\n  //\n  // Montgomery method engine\n  //\n\n  BN.mont = function mont (num) {\n    return new Mont(num);\n  };\n\n  function Mont (m) {\n    Red.call(this, m);\n\n    this.shift = this.m.bitLength();\n    if (this.shift % 26 !== 0) {\n      this.shift += 26 - (this.shift % 26);\n    }\n\n    this.r = new BN(1).iushln(this.shift);\n    this.r2 = this.imod(this.r.sqr());\n    this.rinv = this.r._invmp(this.m);\n\n    this.minv = this.rinv.mul(this.r).isubn(1).div(this.m);\n    this.minv = this.minv.umod(this.r);\n    this.minv = this.r.sub(this.minv);\n  }\n  inherits(Mont, Red);\n\n  Mont.prototype.convertTo = function convertTo (num) {\n    return this.imod(num.ushln(this.shift));\n  };\n\n  Mont.prototype.convertFrom = function convertFrom (num) {\n    var r = this.imod(num.mul(this.rinv));\n    r.red = null;\n    return r;\n  };\n\n  Mont.prototype.imul = function imul (a, b) {\n    if (a.isZero() || b.isZero()) {\n      a.words[0] = 0;\n      a.length = 1;\n      return a;\n    }\n\n    var t = a.imul(b);\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\n    var u = t.isub(c).iushrn(this.shift);\n    var res = u;\n\n    if (u.cmp(this.m) >= 0) {\n      res = u.isub(this.m);\n    } else if (u.cmpn(0) < 0) {\n      res = u.iadd(this.m);\n    }\n\n    return res._forceRed(this);\n  };\n\n  Mont.prototype.mul = function mul (a, b) {\n    if (a.isZero() || b.isZero()) return new BN(0)._forceRed(this);\n\n    var t = a.mul(b);\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\n    var u = t.isub(c).iushrn(this.shift);\n    var res = u;\n    if (u.cmp(this.m) >= 0) {\n      res = u.isub(this.m);\n    } else if (u.cmpn(0) < 0) {\n      res = u.iadd(this.m);\n    }\n\n    return res._forceRed(this);\n  };\n\n  Mont.prototype.invm = function invm (a) {\n    // (AR)^-1 * R^2 = (A^-1 * R^-1) * R^2 = A^-1 * R\n    var res = this.imod(a._invmp(this.m).mul(this.r2));\n    return res._forceRed(this);\n  };\n})(typeof module === 'undefined' || module, this);\n","var isHexPrefixed = require('is-hex-prefixed');\n\n/**\n * Removes '0x' from a given `String` is present\n * @param {String} str the string value\n * @return {String|Optional} a string by pass if necessary\n */\nmodule.exports = function stripHexPrefix(str) {\n  if (typeof str !== 'string') {\n    return str;\n  }\n\n  return isHexPrefixed(str) ? str.slice(2) : str;\n}\n","/**\n * Returns a `Boolean` on whether or not the a `String` starts with '0x'\n * @param {String} str the string input value\n * @return {Boolean} a boolean if it is or is not hex prefixed\n * @throws if the str input is not a string\n */\nmodule.exports = function isHexPrefixed(str) {\n  if (typeof str !== 'string') {\n    throw new Error(\"[is-hex-prefixed] value must be type 'string', is currently type \" + (typeof str) + \", while checking isHexPrefixed.\");\n  }\n\n  return str.slice(0, 2) === '0x';\n}\n","/*! https://mths.be/utf8js v3.0.0 by @mathias */\n;(function(root) {\n\n\tvar stringFromCharCode = String.fromCharCode;\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2decode(string) {\n\t\tvar output = [];\n\t\tvar counter = 0;\n\t\tvar length = string.length;\n\t\tvar value;\n\t\tvar extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2encode(array) {\n\t\tvar length = array.length;\n\t\tvar index = -1;\n\t\tvar value;\n\t\tvar output = '';\n\t\twhile (++index < length) {\n\t\t\tvalue = array[index];\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t}\n\t\treturn output;\n\t}\n\n\tfunction checkScalarValue(codePoint) {\n\t\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t}\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction createByte(codePoint, shift) {\n\t\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n\t}\n\n\tfunction encodeCodePoint(codePoint) {\n\t\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\t\treturn stringFromCharCode(codePoint);\n\t\t}\n\t\tvar symbol = '';\n\t\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t\t}\n\t\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\t\tcheckScalarValue(codePoint);\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\t\tsymbol += createByte(codePoint, 12);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\t\treturn symbol;\n\t}\n\n\tfunction utf8encode(string) {\n\t\tvar codePoints = ucs2decode(string);\n\t\tvar length = codePoints.length;\n\t\tvar index = -1;\n\t\tvar codePoint;\n\t\tvar byteString = '';\n\t\twhile (++index < length) {\n\t\t\tcodePoint = codePoints[index];\n\t\t\tbyteString += encodeCodePoint(codePoint);\n\t\t}\n\t\treturn byteString;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction readContinuationByte() {\n\t\tif (byteIndex >= byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\tif ((continuationByte & 0xC0) == 0x80) {\n\t\t\treturn continuationByte & 0x3F;\n\t\t}\n\n\t\t// If we end up here, its not a continuation byte\n\t\tthrow Error('Invalid continuation byte');\n\t}\n\n\tfunction decodeSymbol() {\n\t\tvar byte1;\n\t\tvar byte2;\n\t\tvar byte3;\n\t\tvar byte4;\n\t\tvar codePoint;\n\n\t\tif (byteIndex > byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tif (byteIndex == byteCount) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Read first byte\n\t\tbyte1 = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\t// 1-byte sequence (no continuation bytes)\n\t\tif ((byte1 & 0x80) == 0) {\n\t\t\treturn byte1;\n\t\t}\n\n\t\t// 2-byte sequence\n\t\tif ((byte1 & 0xE0) == 0xC0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\t\tif (codePoint >= 0x80) {\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 3-byte sequence (may include unpaired surrogates)\n\t\tif ((byte1 & 0xF0) == 0xE0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\t\tif (codePoint >= 0x0800) {\n\t\t\t\tcheckScalarValue(codePoint);\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 4-byte sequence\n\t\tif ((byte1 & 0xF8) == 0xF0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tbyte4 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t\t(byte3 << 0x06) | byte4;\n\t\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\t\treturn codePoint;\n\t\t\t}\n\t\t}\n\n\t\tthrow Error('Invalid UTF-8 detected');\n\t}\n\n\tvar byteArray;\n\tvar byteCount;\n\tvar byteIndex;\n\tfunction utf8decode(byteString) {\n\t\tbyteArray = ucs2decode(byteString);\n\t\tbyteCount = byteArray.length;\n\t\tbyteIndex = 0;\n\t\tvar codePoints = [];\n\t\tvar tmp;\n\t\twhile ((tmp = decodeSymbol()) !== false) {\n\t\t\tcodePoints.push(tmp);\n\t\t}\n\t\treturn ucs2encode(codePoints);\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\troot.version = '3.0.0';\n\troot.encode = utf8encode;\n\troot.decode = utf8decode;\n\n}(typeof exports === 'undefined' ? this.utf8 = {} : exports));\n","// This was ported from https://github.com/emn178/js-sha3, with some minor\n// modifications and pruning. It is licensed under MIT:\n//\n// Copyright 2015-2016 Chen, Yi-Cyuan\n//  \n// Permission is hereby granted, free of charge, to any person obtaining\n// a copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to\n// permit persons to whom the Software is furnished to do so, subject to\n// the following conditions:\n// \n// The above copyright notice and this permission notice shall be\n// included in all copies or substantial portions of the Software.\n// \n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nconst HEX_CHARS = '0123456789abcdef'.split('');\nconst KECCAK_PADDING = [1, 256, 65536, 16777216];\nconst SHIFT = [0, 8, 16, 24];\nconst RC = [1, 0, 32898, 0, 32906, 2147483648, 2147516416, 2147483648, 32907, 0, 2147483649, 0, 2147516545, 2147483648, 32777, 2147483648, 138, 0, 136, 0, 2147516425, 0, 2147483658, 0, 2147516555, 0, 139, 2147483648, 32905, 2147483648, 32771, 2147483648, 32770, 2147483648, 128, 2147483648, 32778, 0, 2147483658, 2147483648, 2147516545, 2147483648, 32896, 2147483648, 2147483649, 0, 2147516424, 2147483648];\n\nconst Keccak = bits => ({\n  blocks: [],\n  reset: true,\n  block: 0,\n  start: 0,\n  blockCount: 1600 - (bits << 1) >> 5,\n  outputBlocks: bits >> 5,\n  s: (s => [].concat(s, s, s, s, s))([0, 0, 0, 0, 0, 0, 0, 0, 0, 0])\n});\n\nconst update = (state, message) => {\n  var length = message.length,\n      blocks = state.blocks,\n      byteCount = state.blockCount << 2,\n      blockCount = state.blockCount,\n      outputBlocks = state.outputBlocks,\n      s = state.s,\n      index = 0,\n      i,\n      code;\n\n  // update\n  while (index < length) {\n    if (state.reset) {\n      state.reset = false;\n      blocks[0] = state.block;\n      for (i = 1; i < blockCount + 1; ++i) {\n        blocks[i] = 0;\n      }\n    }\n    if (typeof message !== \"string\") {\n      for (i = state.start; index < length && i < byteCount; ++index) {\n        blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n      }\n    } else {\n      for (i = state.start; index < length && i < byteCount; ++index) {\n        code = message.charCodeAt(index);\n        if (code < 0x80) {\n          blocks[i >> 2] |= code << SHIFT[i++ & 3];\n        } else if (code < 0x800) {\n          blocks[i >> 2] |= (0xc0 | code >> 6) << SHIFT[i++ & 3];\n          blocks[i >> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n        } else if (code < 0xd800 || code >= 0xe000) {\n          blocks[i >> 2] |= (0xe0 | code >> 12) << SHIFT[i++ & 3];\n          blocks[i >> 2] |= (0x80 | code >> 6 & 0x3f) << SHIFT[i++ & 3];\n          blocks[i >> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n        } else {\n          code = 0x10000 + ((code & 0x3ff) << 10 | message.charCodeAt(++index) & 0x3ff);\n          blocks[i >> 2] |= (0xf0 | code >> 18) << SHIFT[i++ & 3];\n          blocks[i >> 2] |= (0x80 | code >> 12 & 0x3f) << SHIFT[i++ & 3];\n          blocks[i >> 2] |= (0x80 | code >> 6 & 0x3f) << SHIFT[i++ & 3];\n          blocks[i >> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n        }\n      }\n    }\n    state.lastByteIndex = i;\n    if (i >= byteCount) {\n      state.start = i - byteCount;\n      state.block = blocks[blockCount];\n      for (i = 0; i < blockCount; ++i) {\n        s[i] ^= blocks[i];\n      }\n      f(s);\n      state.reset = true;\n    } else {\n      state.start = i;\n    }\n  }\n\n  // finalize\n  i = state.lastByteIndex;\n  blocks[i >> 2] |= KECCAK_PADDING[i & 3];\n  if (state.lastByteIndex === byteCount) {\n    blocks[0] = blocks[blockCount];\n    for (i = 1; i < blockCount + 1; ++i) {\n      blocks[i] = 0;\n    }\n  }\n  blocks[blockCount - 1] |= 0x80000000;\n  for (i = 0; i < blockCount; ++i) {\n    s[i] ^= blocks[i];\n  }\n  f(s);\n\n  // toString\n  var hex = '',\n      i = 0,\n      j = 0,\n      block;\n  while (j < outputBlocks) {\n    for (i = 0; i < blockCount && j < outputBlocks; ++i, ++j) {\n      block = s[i];\n      hex += HEX_CHARS[block >> 4 & 0x0F] + HEX_CHARS[block & 0x0F] + HEX_CHARS[block >> 12 & 0x0F] + HEX_CHARS[block >> 8 & 0x0F] + HEX_CHARS[block >> 20 & 0x0F] + HEX_CHARS[block >> 16 & 0x0F] + HEX_CHARS[block >> 28 & 0x0F] + HEX_CHARS[block >> 24 & 0x0F];\n    }\n    if (j % blockCount === 0) {\n      f(s);\n      i = 0;\n    }\n  }\n  return \"0x\" + hex;\n};\n\nconst f = s => {\n  var h, l, n, c0, c1, c2, c3, c4, c5, c6, c7, c8, c9, b0, b1, b2, b3, b4, b5, b6, b7, b8, b9, b10, b11, b12, b13, b14, b15, b16, b17, b18, b19, b20, b21, b22, b23, b24, b25, b26, b27, b28, b29, b30, b31, b32, b33, b34, b35, b36, b37, b38, b39, b40, b41, b42, b43, b44, b45, b46, b47, b48, b49;\n\n  for (n = 0; n < 48; n += 2) {\n    c0 = s[0] ^ s[10] ^ s[20] ^ s[30] ^ s[40];\n    c1 = s[1] ^ s[11] ^ s[21] ^ s[31] ^ s[41];\n    c2 = s[2] ^ s[12] ^ s[22] ^ s[32] ^ s[42];\n    c3 = s[3] ^ s[13] ^ s[23] ^ s[33] ^ s[43];\n    c4 = s[4] ^ s[14] ^ s[24] ^ s[34] ^ s[44];\n    c5 = s[5] ^ s[15] ^ s[25] ^ s[35] ^ s[45];\n    c6 = s[6] ^ s[16] ^ s[26] ^ s[36] ^ s[46];\n    c7 = s[7] ^ s[17] ^ s[27] ^ s[37] ^ s[47];\n    c8 = s[8] ^ s[18] ^ s[28] ^ s[38] ^ s[48];\n    c9 = s[9] ^ s[19] ^ s[29] ^ s[39] ^ s[49];\n\n    h = c8 ^ (c2 << 1 | c3 >>> 31);\n    l = c9 ^ (c3 << 1 | c2 >>> 31);\n    s[0] ^= h;\n    s[1] ^= l;\n    s[10] ^= h;\n    s[11] ^= l;\n    s[20] ^= h;\n    s[21] ^= l;\n    s[30] ^= h;\n    s[31] ^= l;\n    s[40] ^= h;\n    s[41] ^= l;\n    h = c0 ^ (c4 << 1 | c5 >>> 31);\n    l = c1 ^ (c5 << 1 | c4 >>> 31);\n    s[2] ^= h;\n    s[3] ^= l;\n    s[12] ^= h;\n    s[13] ^= l;\n    s[22] ^= h;\n    s[23] ^= l;\n    s[32] ^= h;\n    s[33] ^= l;\n    s[42] ^= h;\n    s[43] ^= l;\n    h = c2 ^ (c6 << 1 | c7 >>> 31);\n    l = c3 ^ (c7 << 1 | c6 >>> 31);\n    s[4] ^= h;\n    s[5] ^= l;\n    s[14] ^= h;\n    s[15] ^= l;\n    s[24] ^= h;\n    s[25] ^= l;\n    s[34] ^= h;\n    s[35] ^= l;\n    s[44] ^= h;\n    s[45] ^= l;\n    h = c4 ^ (c8 << 1 | c9 >>> 31);\n    l = c5 ^ (c9 << 1 | c8 >>> 31);\n    s[6] ^= h;\n    s[7] ^= l;\n    s[16] ^= h;\n    s[17] ^= l;\n    s[26] ^= h;\n    s[27] ^= l;\n    s[36] ^= h;\n    s[37] ^= l;\n    s[46] ^= h;\n    s[47] ^= l;\n    h = c6 ^ (c0 << 1 | c1 >>> 31);\n    l = c7 ^ (c1 << 1 | c0 >>> 31);\n    s[8] ^= h;\n    s[9] ^= l;\n    s[18] ^= h;\n    s[19] ^= l;\n    s[28] ^= h;\n    s[29] ^= l;\n    s[38] ^= h;\n    s[39] ^= l;\n    s[48] ^= h;\n    s[49] ^= l;\n\n    b0 = s[0];\n    b1 = s[1];\n    b32 = s[11] << 4 | s[10] >>> 28;\n    b33 = s[10] << 4 | s[11] >>> 28;\n    b14 = s[20] << 3 | s[21] >>> 29;\n    b15 = s[21] << 3 | s[20] >>> 29;\n    b46 = s[31] << 9 | s[30] >>> 23;\n    b47 = s[30] << 9 | s[31] >>> 23;\n    b28 = s[40] << 18 | s[41] >>> 14;\n    b29 = s[41] << 18 | s[40] >>> 14;\n    b20 = s[2] << 1 | s[3] >>> 31;\n    b21 = s[3] << 1 | s[2] >>> 31;\n    b2 = s[13] << 12 | s[12] >>> 20;\n    b3 = s[12] << 12 | s[13] >>> 20;\n    b34 = s[22] << 10 | s[23] >>> 22;\n    b35 = s[23] << 10 | s[22] >>> 22;\n    b16 = s[33] << 13 | s[32] >>> 19;\n    b17 = s[32] << 13 | s[33] >>> 19;\n    b48 = s[42] << 2 | s[43] >>> 30;\n    b49 = s[43] << 2 | s[42] >>> 30;\n    b40 = s[5] << 30 | s[4] >>> 2;\n    b41 = s[4] << 30 | s[5] >>> 2;\n    b22 = s[14] << 6 | s[15] >>> 26;\n    b23 = s[15] << 6 | s[14] >>> 26;\n    b4 = s[25] << 11 | s[24] >>> 21;\n    b5 = s[24] << 11 | s[25] >>> 21;\n    b36 = s[34] << 15 | s[35] >>> 17;\n    b37 = s[35] << 15 | s[34] >>> 17;\n    b18 = s[45] << 29 | s[44] >>> 3;\n    b19 = s[44] << 29 | s[45] >>> 3;\n    b10 = s[6] << 28 | s[7] >>> 4;\n    b11 = s[7] << 28 | s[6] >>> 4;\n    b42 = s[17] << 23 | s[16] >>> 9;\n    b43 = s[16] << 23 | s[17] >>> 9;\n    b24 = s[26] << 25 | s[27] >>> 7;\n    b25 = s[27] << 25 | s[26] >>> 7;\n    b6 = s[36] << 21 | s[37] >>> 11;\n    b7 = s[37] << 21 | s[36] >>> 11;\n    b38 = s[47] << 24 | s[46] >>> 8;\n    b39 = s[46] << 24 | s[47] >>> 8;\n    b30 = s[8] << 27 | s[9] >>> 5;\n    b31 = s[9] << 27 | s[8] >>> 5;\n    b12 = s[18] << 20 | s[19] >>> 12;\n    b13 = s[19] << 20 | s[18] >>> 12;\n    b44 = s[29] << 7 | s[28] >>> 25;\n    b45 = s[28] << 7 | s[29] >>> 25;\n    b26 = s[38] << 8 | s[39] >>> 24;\n    b27 = s[39] << 8 | s[38] >>> 24;\n    b8 = s[48] << 14 | s[49] >>> 18;\n    b9 = s[49] << 14 | s[48] >>> 18;\n\n    s[0] = b0 ^ ~b2 & b4;\n    s[1] = b1 ^ ~b3 & b5;\n    s[10] = b10 ^ ~b12 & b14;\n    s[11] = b11 ^ ~b13 & b15;\n    s[20] = b20 ^ ~b22 & b24;\n    s[21] = b21 ^ ~b23 & b25;\n    s[30] = b30 ^ ~b32 & b34;\n    s[31] = b31 ^ ~b33 & b35;\n    s[40] = b40 ^ ~b42 & b44;\n    s[41] = b41 ^ ~b43 & b45;\n    s[2] = b2 ^ ~b4 & b6;\n    s[3] = b3 ^ ~b5 & b7;\n    s[12] = b12 ^ ~b14 & b16;\n    s[13] = b13 ^ ~b15 & b17;\n    s[22] = b22 ^ ~b24 & b26;\n    s[23] = b23 ^ ~b25 & b27;\n    s[32] = b32 ^ ~b34 & b36;\n    s[33] = b33 ^ ~b35 & b37;\n    s[42] = b42 ^ ~b44 & b46;\n    s[43] = b43 ^ ~b45 & b47;\n    s[4] = b4 ^ ~b6 & b8;\n    s[5] = b5 ^ ~b7 & b9;\n    s[14] = b14 ^ ~b16 & b18;\n    s[15] = b15 ^ ~b17 & b19;\n    s[24] = b24 ^ ~b26 & b28;\n    s[25] = b25 ^ ~b27 & b29;\n    s[34] = b34 ^ ~b36 & b38;\n    s[35] = b35 ^ ~b37 & b39;\n    s[44] = b44 ^ ~b46 & b48;\n    s[45] = b45 ^ ~b47 & b49;\n    s[6] = b6 ^ ~b8 & b0;\n    s[7] = b7 ^ ~b9 & b1;\n    s[16] = b16 ^ ~b18 & b10;\n    s[17] = b17 ^ ~b19 & b11;\n    s[26] = b26 ^ ~b28 & b20;\n    s[27] = b27 ^ ~b29 & b21;\n    s[36] = b36 ^ ~b38 & b30;\n    s[37] = b37 ^ ~b39 & b31;\n    s[46] = b46 ^ ~b48 & b40;\n    s[47] = b47 ^ ~b49 & b41;\n    s[8] = b8 ^ ~b0 & b2;\n    s[9] = b9 ^ ~b1 & b3;\n    s[18] = b18 ^ ~b10 & b12;\n    s[19] = b19 ^ ~b11 & b13;\n    s[28] = b28 ^ ~b20 & b22;\n    s[29] = b29 ^ ~b21 & b23;\n    s[38] = b38 ^ ~b30 & b32;\n    s[39] = b39 ^ ~b31 & b33;\n    s[48] = b48 ^ ~b40 & b42;\n    s[49] = b49 ^ ~b41 & b43;\n\n    s[0] ^= RC[n];\n    s[1] ^= RC[n + 1];\n  }\n};\n\nconst keccak = bits => str => {\n  var msg;\n  if (str.slice(0, 2) === \"0x\") {\n    msg = [];\n    for (var i = 2, l = str.length; i < l; i += 2) msg.push(parseInt(str.slice(i, i + 2), 16));\n  } else {\n    msg = str;\n  }\n  return update(Keccak(bits, bits), msg);\n};\n\nmodule.exports = {\n  keccak256: keccak(256),\n  keccak512: keccak(512),\n  keccak256s: keccak(256),\n  keccak512s: keccak(512)\n};","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst utils_1 = require(\"./utils\");\r\n/**\r\n * Returns true if the bloom is a valid bloom\r\n * @param bloom The bloom\r\n */\r\nfunction isBloom(bloom) {\r\n    if (typeof bloom !== 'string') {\r\n        return false;\r\n    }\r\n    if (!/^(0x)?[0-9a-f]{512}$/i.test(bloom)) {\r\n        return false;\r\n    }\r\n    if (/^(0x)?[0-9a-f]{512}$/.test(bloom) ||\r\n        /^(0x)?[0-9A-F]{512}$/.test(bloom)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexports.isBloom = isBloom;\r\n/**\r\n * Returns true if the value is part of the given bloom\r\n * note: false positives are possible.\r\n * @param bloom encoded bloom\r\n * @param value The value\r\n */\r\nfunction isInBloom(bloom, value) {\r\n    if (typeof value === 'object' && value.constructor === Uint8Array) {\r\n        value = utils_1.bytesToHex(value);\r\n    }\r\n    const hash = utils_1.keccak256(value).replace('0x', '');\r\n    for (let i = 0; i < 12; i += 4) {\r\n        // calculate bit position in bloom filter that must be active\r\n        const bitpos = ((parseInt(hash.substr(i, 2), 16) << 8) +\r\n            parseInt(hash.substr(i + 2, 2), 16)) &\r\n            2047;\r\n        // test if bitpos in bloom is active\r\n        const code = codePointToInt(bloom.charCodeAt(bloom.length - 1 - Math.floor(bitpos / 4)));\r\n        const offset = 1 << bitpos % 4;\r\n        if ((code & offset) !== offset) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nexports.isInBloom = isInBloom;\r\n/**\r\n * Code points to int\r\n * @param codePoint The code point\r\n */\r\nfunction codePointToInt(codePoint) {\r\n    if (codePoint >= 48 && codePoint <= 57) {\r\n        /* ['0'..'9'] -> [0..9] */\r\n        return codePoint - 48;\r\n    }\r\n    if (codePoint >= 65 && codePoint <= 70) {\r\n        /* ['A'..'F'] -> [10..15] */\r\n        return codePoint - 55;\r\n    }\r\n    if (codePoint >= 97 && codePoint <= 102) {\r\n        /* ['a'..'f'] -> [10..15] */\r\n        return codePoint - 87;\r\n    }\r\n    throw new Error('invalid bloom');\r\n}\r\n/**\r\n * Returns true if the ethereum users address is part of the given bloom.\r\n * note: false positives are possible.\r\n * @param bloom encoded bloom\r\n * @param address the address to test\r\n */\r\nfunction isUserEthereumAddressInBloom(bloom, ethereumAddress) {\r\n    if (!isBloom(bloom)) {\r\n        throw new Error('Invalid bloom given');\r\n    }\r\n    if (!isAddress(ethereumAddress)) {\r\n        throw new Error(`Invalid ethereum address given: \"${ethereumAddress}\"`);\r\n    }\r\n    // you have to pad the ethereum address to 32 bytes\r\n    // else the bloom filter does not work\r\n    // this is only if your matching the USERS\r\n    // ethereum address. Contract address do not need this\r\n    // hence why we have 2 methods\r\n    // (0x is not in the 2nd parameter of padleft so 64 chars is fine)\r\n    const address = utils_1.padLeft(ethereumAddress, 64);\r\n    return isInBloom(bloom, address);\r\n}\r\nexports.isUserEthereumAddressInBloom = isUserEthereumAddressInBloom;\r\n/**\r\n * Returns true if the contract address is part of the given bloom.\r\n * note: false positives are possible.\r\n * @param bloom encoded bloom\r\n * @param contractAddress the contract address to test\r\n */\r\nfunction isContractAddressInBloom(bloom, contractAddress) {\r\n    if (!isBloom(bloom)) {\r\n        throw new Error('Invalid bloom given');\r\n    }\r\n    if (!isAddress(contractAddress)) {\r\n        throw new Error(`Invalid contract address given: \"${contractAddress}\"`);\r\n    }\r\n    return isInBloom(bloom, contractAddress);\r\n}\r\nexports.isContractAddressInBloom = isContractAddressInBloom;\r\n/**\r\n * Returns true if the topic is part of the given bloom.\r\n * note: false positives are possible.\r\n * @param bloom encoded bloom\r\n * @param topic the topic encoded hex\r\n */\r\nfunction isTopicInBloom(bloom, topic) {\r\n    if (!isBloom(bloom)) {\r\n        throw new Error('Invalid bloom given');\r\n    }\r\n    if (!isTopic(topic)) {\r\n        throw new Error('Invalid topic');\r\n    }\r\n    return isInBloom(bloom, topic);\r\n}\r\nexports.isTopicInBloom = isTopicInBloom;\r\n/**\r\n * Checks if its a valid topic\r\n * @param topic encoded hex topic\r\n */\r\nfunction isTopic(topic) {\r\n    if (typeof topic !== 'string') {\r\n        return false;\r\n    }\r\n    if (!/^(0x)?[0-9a-f]{64}$/i.test(topic)) {\r\n        return false;\r\n    }\r\n    else if (/^(0x)?[0-9a-f]{64}$/.test(topic) ||\r\n        /^(0x)?[0-9A-F]{64}$/.test(topic)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexports.isTopic = isTopic;\r\n/**\r\n * Is valid address\r\n * @param address The address\r\n */\r\nfunction isAddress(address) {\r\n    if (typeof address !== 'string') {\r\n        return false;\r\n    }\r\n    if (address.match(/^(0x)?[0-9a-fA-F]{40}$/)) {\r\n        return true;\r\n    }\r\n    if (address.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexports.isAddress = isAddress;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst sha3 = require(\"js-sha3\");\r\n/**\r\n * Keccak256 hash\r\n * @param data The data\r\n */\r\nfunction keccak256(data) {\r\n    return '0x' + sha3.keccak_256(toByteArray(data));\r\n}\r\nexports.keccak256 = keccak256;\r\n/**\r\n * Adding padding to string on the left\r\n * @param value The value\r\n * @param chars The chars\r\n */\r\nexports.padLeft = (value, chars) => {\r\n    const hasPrefix = /^0x/i.test(value) || typeof value === 'number';\r\n    value = value.toString().replace(/^0x/i, '');\r\n    const padding = chars - value.length + 1 >= 0 ? chars - value.length + 1 : 0;\r\n    return (hasPrefix ? '0x' : '') + new Array(padding).join('0') + value;\r\n};\r\n/**\r\n * Convert bytes to hex\r\n * @param bytes The bytes\r\n */\r\nfunction bytesToHex(bytes) {\r\n    const hex = [];\r\n    for (let i = 0; i < bytes.length; i++) {\r\n        hex.push((bytes[i] >>> 4).toString(16));\r\n        hex.push((bytes[i] & 0xf).toString(16));\r\n    }\r\n    return `0x${hex.join('').replace(/^0+/, '')}`;\r\n}\r\nexports.bytesToHex = bytesToHex;\r\n/**\r\n * To byte array\r\n * @param value The value\r\n */\r\nfunction toByteArray(value) {\r\n    if (value == null) {\r\n        throw new Error('cannot convert null value to array');\r\n    }\r\n    if (typeof value === 'string') {\r\n        const match = value.match(/^(0x)?[0-9a-fA-F]*$/);\r\n        if (!match) {\r\n            throw new Error('invalid hexidecimal string');\r\n        }\r\n        if (match[1] !== '0x') {\r\n            throw new Error('hex string must have 0x prefix');\r\n        }\r\n        value = value.substring(2);\r\n        if (value.length % 2) {\r\n            value = '0' + value;\r\n        }\r\n        const result = [];\r\n        for (let i = 0; i < value.length; i += 2) {\r\n            result.push(parseInt(value.substr(i, 2), 16));\r\n        }\r\n        return addSlice(new Uint8Array(result));\r\n    }\r\n    if (isByteArray(value)) {\r\n        return addSlice(new Uint8Array(value));\r\n    }\r\n    throw new Error('invalid arrayify value');\r\n}\r\nexports.toByteArray = toByteArray;\r\n/**\r\n * Is byte array\r\n * @param value The value\r\n */\r\nfunction isByteArray(value) {\r\n    if (!value ||\r\n        // tslint:disable-next-line: radix\r\n        parseInt(String(value.length)) != value.length ||\r\n        typeof value === 'string') {\r\n        return false;\r\n    }\r\n    for (let i = 0; i < value.length; i++) {\r\n        const v = value[i];\r\n        // tslint:disable-next-line: radix\r\n        if (v < 0 || v >= 256 || parseInt(String(v)) != v) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * Add slice to array\r\n * @param array The array\r\n */\r\nfunction addSlice(array) {\r\n    if (array.slice !== undefined) {\r\n        return array;\r\n    }\r\n    array.slice = () => {\r\n        const args = Array.prototype.slice.call(arguments);\r\n        return addSlice(new Uint8Array(Array.prototype.slice.apply(array, args)));\r\n    };\r\n    return array;\r\n}\r\n","/**\n * [js-sha3]{@link https://github.com/emn178/js-sha3}\n *\n * @version 0.8.0\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2015-2018\n * @license MIT\n */\n/*jslint bitwise: true */\n(function () {\n  'use strict';\n\n  var INPUT_ERROR = 'input is invalid type';\n  var FINALIZE_ERROR = 'finalize already called';\n  var WINDOW = typeof window === 'object';\n  var root = WINDOW ? window : {};\n  if (root.JS_SHA3_NO_WINDOW) {\n    WINDOW = false;\n  }\n  var WEB_WORKER = !WINDOW && typeof self === 'object';\n  var NODE_JS = !root.JS_SHA3_NO_NODE_JS && typeof process === 'object' && process.versions && process.versions.node;\n  if (NODE_JS) {\n    root = global;\n  } else if (WEB_WORKER) {\n    root = self;\n  }\n  var COMMON_JS = !root.JS_SHA3_NO_COMMON_JS && typeof module === 'object' && module.exports;\n  var AMD = typeof define === 'function' && define.amd;\n  var ARRAY_BUFFER = !root.JS_SHA3_NO_ARRAY_BUFFER && typeof ArrayBuffer !== 'undefined';\n  var HEX_CHARS = '0123456789abcdef'.split('');\n  var SHAKE_PADDING = [31, 7936, 2031616, 520093696];\n  var CSHAKE_PADDING = [4, 1024, 262144, 67108864];\n  var KECCAK_PADDING = [1, 256, 65536, 16777216];\n  var PADDING = [6, 1536, 393216, 100663296];\n  var SHIFT = [0, 8, 16, 24];\n  var RC = [1, 0, 32898, 0, 32906, 2147483648, 2147516416, 2147483648, 32907, 0, 2147483649,\n    0, 2147516545, 2147483648, 32777, 2147483648, 138, 0, 136, 0, 2147516425, 0,\n    2147483658, 0, 2147516555, 0, 139, 2147483648, 32905, 2147483648, 32771,\n    2147483648, 32770, 2147483648, 128, 2147483648, 32778, 0, 2147483658, 2147483648,\n    2147516545, 2147483648, 32896, 2147483648, 2147483649, 0, 2147516424, 2147483648];\n  var BITS = [224, 256, 384, 512];\n  var SHAKE_BITS = [128, 256];\n  var OUTPUT_TYPES = ['hex', 'buffer', 'arrayBuffer', 'array', 'digest'];\n  var CSHAKE_BYTEPAD = {\n    '128': 168,\n    '256': 136\n  };\n\n  if (root.JS_SHA3_NO_NODE_JS || !Array.isArray) {\n    Array.isArray = function (obj) {\n      return Object.prototype.toString.call(obj) === '[object Array]';\n    };\n  }\n\n  if (ARRAY_BUFFER && (root.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW || !ArrayBuffer.isView)) {\n    ArrayBuffer.isView = function (obj) {\n      return typeof obj === 'object' && obj.buffer && obj.buffer.constructor === ArrayBuffer;\n    };\n  }\n\n  var createOutputMethod = function (bits, padding, outputType) {\n    return function (message) {\n      return new Keccak(bits, padding, bits).update(message)[outputType]();\n    };\n  };\n\n  var createShakeOutputMethod = function (bits, padding, outputType) {\n    return function (message, outputBits) {\n      return new Keccak(bits, padding, outputBits).update(message)[outputType]();\n    };\n  };\n\n  var createCshakeOutputMethod = function (bits, padding, outputType) {\n    return function (message, outputBits, n, s) {\n      return methods['cshake' + bits].update(message, outputBits, n, s)[outputType]();\n    };\n  };\n\n  var createKmacOutputMethod = function (bits, padding, outputType) {\n    return function (key, message, outputBits, s) {\n      return methods['kmac' + bits].update(key, message, outputBits, s)[outputType]();\n    };\n  };\n\n  var createOutputMethods = function (method, createMethod, bits, padding) {\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createMethod(bits, padding, type);\n    }\n    return method;\n  };\n\n  var createMethod = function (bits, padding) {\n    var method = createOutputMethod(bits, padding, 'hex');\n    method.create = function () {\n      return new Keccak(bits, padding, bits);\n    };\n    method.update = function (message) {\n      return method.create().update(message);\n    };\n    return createOutputMethods(method, createOutputMethod, bits, padding);\n  };\n\n  var createShakeMethod = function (bits, padding) {\n    var method = createShakeOutputMethod(bits, padding, 'hex');\n    method.create = function (outputBits) {\n      return new Keccak(bits, padding, outputBits);\n    };\n    method.update = function (message, outputBits) {\n      return method.create(outputBits).update(message);\n    };\n    return createOutputMethods(method, createShakeOutputMethod, bits, padding);\n  };\n\n  var createCshakeMethod = function (bits, padding) {\n    var w = CSHAKE_BYTEPAD[bits];\n    var method = createCshakeOutputMethod(bits, padding, 'hex');\n    method.create = function (outputBits, n, s) {\n      if (!n && !s) {\n        return methods['shake' + bits].create(outputBits);\n      } else {\n        return new Keccak(bits, padding, outputBits).bytepad([n, s], w);\n      }\n    };\n    method.update = function (message, outputBits, n, s) {\n      return method.create(outputBits, n, s).update(message);\n    };\n    return createOutputMethods(method, createCshakeOutputMethod, bits, padding);\n  };\n\n  var createKmacMethod = function (bits, padding) {\n    var w = CSHAKE_BYTEPAD[bits];\n    var method = createKmacOutputMethod(bits, padding, 'hex');\n    method.create = function (key, outputBits, s) {\n      return new Kmac(bits, padding, outputBits).bytepad(['KMAC', s], w).bytepad([key], w);\n    };\n    method.update = function (key, message, outputBits, s) {\n      return method.create(key, outputBits, s).update(message);\n    };\n    return createOutputMethods(method, createKmacOutputMethod, bits, padding);\n  };\n\n  var algorithms = [\n    { name: 'keccak', padding: KECCAK_PADDING, bits: BITS, createMethod: createMethod },\n    { name: 'sha3', padding: PADDING, bits: BITS, createMethod: createMethod },\n    { name: 'shake', padding: SHAKE_PADDING, bits: SHAKE_BITS, createMethod: createShakeMethod },\n    { name: 'cshake', padding: CSHAKE_PADDING, bits: SHAKE_BITS, createMethod: createCshakeMethod },\n    { name: 'kmac', padding: CSHAKE_PADDING, bits: SHAKE_BITS, createMethod: createKmacMethod }\n  ];\n\n  var methods = {}, methodNames = [];\n\n  for (var i = 0; i < algorithms.length; ++i) {\n    var algorithm = algorithms[i];\n    var bits = algorithm.bits;\n    for (var j = 0; j < bits.length; ++j) {\n      var methodName = algorithm.name + '_' + bits[j];\n      methodNames.push(methodName);\n      methods[methodName] = algorithm.createMethod(bits[j], algorithm.padding);\n      if (algorithm.name !== 'sha3') {\n        var newMethodName = algorithm.name + bits[j];\n        methodNames.push(newMethodName);\n        methods[newMethodName] = methods[methodName];\n      }\n    }\n  }\n\n  function Keccak(bits, padding, outputBits) {\n    this.blocks = [];\n    this.s = [];\n    this.padding = padding;\n    this.outputBits = outputBits;\n    this.reset = true;\n    this.finalized = false;\n    this.block = 0;\n    this.start = 0;\n    this.blockCount = (1600 - (bits << 1)) >> 5;\n    this.byteCount = this.blockCount << 2;\n    this.outputBlocks = outputBits >> 5;\n    this.extraBytes = (outputBits & 31) >> 3;\n\n    for (var i = 0; i < 50; ++i) {\n      this.s[i] = 0;\n    }\n  }\n\n  Keccak.prototype.update = function (message) {\n    if (this.finalized) {\n      throw new Error(FINALIZE_ERROR);\n    }\n    var notString, type = typeof message;\n    if (type !== 'string') {\n      if (type === 'object') {\n        if (message === null) {\n          throw new Error(INPUT_ERROR);\n        } else if (ARRAY_BUFFER && message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        } else if (!Array.isArray(message)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(message)) {\n            throw new Error(INPUT_ERROR);\n          }\n        }\n      } else {\n        throw new Error(INPUT_ERROR);\n      }\n      notString = true;\n    }\n    var blocks = this.blocks, byteCount = this.byteCount, length = message.length,\n      blockCount = this.blockCount, index = 0, s = this.s, i, code;\n\n    while (index < length) {\n      if (this.reset) {\n        this.reset = false;\n        blocks[0] = this.block;\n        for (i = 1; i < blockCount + 1; ++i) {\n          blocks[i] = 0;\n        }\n      }\n      if (notString) {\n        for (i = this.start; index < length && i < byteCount; ++index) {\n          blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n        }\n      } else {\n        for (i = this.start; index < length && i < byteCount; ++index) {\n          code = message.charCodeAt(index);\n          if (code < 0x80) {\n            blocks[i >> 2] |= code << SHIFT[i++ & 3];\n          } else if (code < 0x800) {\n            blocks[i >> 2] |= (0xc0 | (code >> 6)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else if (code < 0xd800 || code >= 0xe000) {\n            blocks[i >> 2] |= (0xe0 | (code >> 12)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else {\n            code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n            blocks[i >> 2] |= (0xf0 | (code >> 18)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 12) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          }\n        }\n      }\n      this.lastByteIndex = i;\n      if (i >= byteCount) {\n        this.start = i - byteCount;\n        this.block = blocks[blockCount];\n        for (i = 0; i < blockCount; ++i) {\n          s[i] ^= blocks[i];\n        }\n        f(s);\n        this.reset = true;\n      } else {\n        this.start = i;\n      }\n    }\n    return this;\n  };\n\n  Keccak.prototype.encode = function (x, right) {\n    var o = x & 255, n = 1;\n    var bytes = [o];\n    x = x >> 8;\n    o = x & 255;\n    while (o > 0) {\n      bytes.unshift(o);\n      x = x >> 8;\n      o = x & 255;\n      ++n;\n    }\n    if (right) {\n      bytes.push(n);\n    } else {\n      bytes.unshift(n);\n    }\n    this.update(bytes);\n    return bytes.length;\n  };\n\n  Keccak.prototype.encodeString = function (str) {\n    var notString, type = typeof str;\n    if (type !== 'string') {\n      if (type === 'object') {\n        if (str === null) {\n          throw new Error(INPUT_ERROR);\n        } else if (ARRAY_BUFFER && str.constructor === ArrayBuffer) {\n          str = new Uint8Array(str);\n        } else if (!Array.isArray(str)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(str)) {\n            throw new Error(INPUT_ERROR);\n          }\n        }\n      } else {\n        throw new Error(INPUT_ERROR);\n      }\n      notString = true;\n    }\n    var bytes = 0, length = str.length;\n    if (notString) {\n      bytes = length;\n    } else {\n      for (var i = 0; i < str.length; ++i) {\n        var code = str.charCodeAt(i);\n        if (code < 0x80) {\n          bytes += 1;\n        } else if (code < 0x800) {\n          bytes += 2;\n        } else if (code < 0xd800 || code >= 0xe000) {\n          bytes += 3;\n        } else {\n          code = 0x10000 + (((code & 0x3ff) << 10) | (str.charCodeAt(++i) & 0x3ff));\n          bytes += 4;\n        }\n      }\n    }\n    bytes += this.encode(bytes * 8);\n    this.update(str);\n    return bytes;\n  };\n\n  Keccak.prototype.bytepad = function (strs, w) {\n    var bytes = this.encode(w);\n    for (var i = 0; i < strs.length; ++i) {\n      bytes += this.encodeString(strs[i]);\n    }\n    var paddingBytes = w - bytes % w;\n    var zeros = [];\n    zeros.length = paddingBytes;\n    this.update(zeros);\n    return this;\n  };\n\n  Keccak.prototype.finalize = function () {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex, blockCount = this.blockCount, s = this.s;\n    blocks[i >> 2] |= this.padding[i & 3];\n    if (this.lastByteIndex === this.byteCount) {\n      blocks[0] = blocks[blockCount];\n      for (i = 1; i < blockCount + 1; ++i) {\n        blocks[i] = 0;\n      }\n    }\n    blocks[blockCount - 1] |= 0x80000000;\n    for (i = 0; i < blockCount; ++i) {\n      s[i] ^= blocks[i];\n    }\n    f(s);\n  };\n\n  Keccak.prototype.toString = Keccak.prototype.hex = function () {\n    this.finalize();\n\n    var blockCount = this.blockCount, s = this.s, outputBlocks = this.outputBlocks,\n      extraBytes = this.extraBytes, i = 0, j = 0;\n    var hex = '', block;\n    while (j < outputBlocks) {\n      for (i = 0; i < blockCount && j < outputBlocks; ++i, ++j) {\n        block = s[i];\n        hex += HEX_CHARS[(block >> 4) & 0x0F] + HEX_CHARS[block & 0x0F] +\n          HEX_CHARS[(block >> 12) & 0x0F] + HEX_CHARS[(block >> 8) & 0x0F] +\n          HEX_CHARS[(block >> 20) & 0x0F] + HEX_CHARS[(block >> 16) & 0x0F] +\n          HEX_CHARS[(block >> 28) & 0x0F] + HEX_CHARS[(block >> 24) & 0x0F];\n      }\n      if (j % blockCount === 0) {\n        f(s);\n        i = 0;\n      }\n    }\n    if (extraBytes) {\n      block = s[i];\n      hex += HEX_CHARS[(block >> 4) & 0x0F] + HEX_CHARS[block & 0x0F];\n      if (extraBytes > 1) {\n        hex += HEX_CHARS[(block >> 12) & 0x0F] + HEX_CHARS[(block >> 8) & 0x0F];\n      }\n      if (extraBytes > 2) {\n        hex += HEX_CHARS[(block >> 20) & 0x0F] + HEX_CHARS[(block >> 16) & 0x0F];\n      }\n    }\n    return hex;\n  };\n\n  Keccak.prototype.arrayBuffer = function () {\n    this.finalize();\n\n    var blockCount = this.blockCount, s = this.s, outputBlocks = this.outputBlocks,\n      extraBytes = this.extraBytes, i = 0, j = 0;\n    var bytes = this.outputBits >> 3;\n    var buffer;\n    if (extraBytes) {\n      buffer = new ArrayBuffer((outputBlocks + 1) << 2);\n    } else {\n      buffer = new ArrayBuffer(bytes);\n    }\n    var array = new Uint32Array(buffer);\n    while (j < outputBlocks) {\n      for (i = 0; i < blockCount && j < outputBlocks; ++i, ++j) {\n        array[j] = s[i];\n      }\n      if (j % blockCount === 0) {\n        f(s);\n      }\n    }\n    if (extraBytes) {\n      array[i] = s[i];\n      buffer = buffer.slice(0, bytes);\n    }\n    return buffer;\n  };\n\n  Keccak.prototype.buffer = Keccak.prototype.arrayBuffer;\n\n  Keccak.prototype.digest = Keccak.prototype.array = function () {\n    this.finalize();\n\n    var blockCount = this.blockCount, s = this.s, outputBlocks = this.outputBlocks,\n      extraBytes = this.extraBytes, i = 0, j = 0;\n    var array = [], offset, block;\n    while (j < outputBlocks) {\n      for (i = 0; i < blockCount && j < outputBlocks; ++i, ++j) {\n        offset = j << 2;\n        block = s[i];\n        array[offset] = block & 0xFF;\n        array[offset + 1] = (block >> 8) & 0xFF;\n        array[offset + 2] = (block >> 16) & 0xFF;\n        array[offset + 3] = (block >> 24) & 0xFF;\n      }\n      if (j % blockCount === 0) {\n        f(s);\n      }\n    }\n    if (extraBytes) {\n      offset = j << 2;\n      block = s[i];\n      array[offset] = block & 0xFF;\n      if (extraBytes > 1) {\n        array[offset + 1] = (block >> 8) & 0xFF;\n      }\n      if (extraBytes > 2) {\n        array[offset + 2] = (block >> 16) & 0xFF;\n      }\n    }\n    return array;\n  };\n\n  function Kmac(bits, padding, outputBits) {\n    Keccak.call(this, bits, padding, outputBits);\n  }\n\n  Kmac.prototype = new Keccak();\n\n  Kmac.prototype.finalize = function () {\n    this.encode(this.outputBits, true);\n    return Keccak.prototype.finalize.call(this);\n  };\n\n  var f = function (s) {\n    var h, l, n, c0, c1, c2, c3, c4, c5, c6, c7, c8, c9,\n      b0, b1, b2, b3, b4, b5, b6, b7, b8, b9, b10, b11, b12, b13, b14, b15, b16, b17,\n      b18, b19, b20, b21, b22, b23, b24, b25, b26, b27, b28, b29, b30, b31, b32, b33,\n      b34, b35, b36, b37, b38, b39, b40, b41, b42, b43, b44, b45, b46, b47, b48, b49;\n    for (n = 0; n < 48; n += 2) {\n      c0 = s[0] ^ s[10] ^ s[20] ^ s[30] ^ s[40];\n      c1 = s[1] ^ s[11] ^ s[21] ^ s[31] ^ s[41];\n      c2 = s[2] ^ s[12] ^ s[22] ^ s[32] ^ s[42];\n      c3 = s[3] ^ s[13] ^ s[23] ^ s[33] ^ s[43];\n      c4 = s[4] ^ s[14] ^ s[24] ^ s[34] ^ s[44];\n      c5 = s[5] ^ s[15] ^ s[25] ^ s[35] ^ s[45];\n      c6 = s[6] ^ s[16] ^ s[26] ^ s[36] ^ s[46];\n      c7 = s[7] ^ s[17] ^ s[27] ^ s[37] ^ s[47];\n      c8 = s[8] ^ s[18] ^ s[28] ^ s[38] ^ s[48];\n      c9 = s[9] ^ s[19] ^ s[29] ^ s[39] ^ s[49];\n\n      h = c8 ^ ((c2 << 1) | (c3 >>> 31));\n      l = c9 ^ ((c3 << 1) | (c2 >>> 31));\n      s[0] ^= h;\n      s[1] ^= l;\n      s[10] ^= h;\n      s[11] ^= l;\n      s[20] ^= h;\n      s[21] ^= l;\n      s[30] ^= h;\n      s[31] ^= l;\n      s[40] ^= h;\n      s[41] ^= l;\n      h = c0 ^ ((c4 << 1) | (c5 >>> 31));\n      l = c1 ^ ((c5 << 1) | (c4 >>> 31));\n      s[2] ^= h;\n      s[3] ^= l;\n      s[12] ^= h;\n      s[13] ^= l;\n      s[22] ^= h;\n      s[23] ^= l;\n      s[32] ^= h;\n      s[33] ^= l;\n      s[42] ^= h;\n      s[43] ^= l;\n      h = c2 ^ ((c6 << 1) | (c7 >>> 31));\n      l = c3 ^ ((c7 << 1) | (c6 >>> 31));\n      s[4] ^= h;\n      s[5] ^= l;\n      s[14] ^= h;\n      s[15] ^= l;\n      s[24] ^= h;\n      s[25] ^= l;\n      s[34] ^= h;\n      s[35] ^= l;\n      s[44] ^= h;\n      s[45] ^= l;\n      h = c4 ^ ((c8 << 1) | (c9 >>> 31));\n      l = c5 ^ ((c9 << 1) | (c8 >>> 31));\n      s[6] ^= h;\n      s[7] ^= l;\n      s[16] ^= h;\n      s[17] ^= l;\n      s[26] ^= h;\n      s[27] ^= l;\n      s[36] ^= h;\n      s[37] ^= l;\n      s[46] ^= h;\n      s[47] ^= l;\n      h = c6 ^ ((c0 << 1) | (c1 >>> 31));\n      l = c7 ^ ((c1 << 1) | (c0 >>> 31));\n      s[8] ^= h;\n      s[9] ^= l;\n      s[18] ^= h;\n      s[19] ^= l;\n      s[28] ^= h;\n      s[29] ^= l;\n      s[38] ^= h;\n      s[39] ^= l;\n      s[48] ^= h;\n      s[49] ^= l;\n\n      b0 = s[0];\n      b1 = s[1];\n      b32 = (s[11] << 4) | (s[10] >>> 28);\n      b33 = (s[10] << 4) | (s[11] >>> 28);\n      b14 = (s[20] << 3) | (s[21] >>> 29);\n      b15 = (s[21] << 3) | (s[20] >>> 29);\n      b46 = (s[31] << 9) | (s[30] >>> 23);\n      b47 = (s[30] << 9) | (s[31] >>> 23);\n      b28 = (s[40] << 18) | (s[41] >>> 14);\n      b29 = (s[41] << 18) | (s[40] >>> 14);\n      b20 = (s[2] << 1) | (s[3] >>> 31);\n      b21 = (s[3] << 1) | (s[2] >>> 31);\n      b2 = (s[13] << 12) | (s[12] >>> 20);\n      b3 = (s[12] << 12) | (s[13] >>> 20);\n      b34 = (s[22] << 10) | (s[23] >>> 22);\n      b35 = (s[23] << 10) | (s[22] >>> 22);\n      b16 = (s[33] << 13) | (s[32] >>> 19);\n      b17 = (s[32] << 13) | (s[33] >>> 19);\n      b48 = (s[42] << 2) | (s[43] >>> 30);\n      b49 = (s[43] << 2) | (s[42] >>> 30);\n      b40 = (s[5] << 30) | (s[4] >>> 2);\n      b41 = (s[4] << 30) | (s[5] >>> 2);\n      b22 = (s[14] << 6) | (s[15] >>> 26);\n      b23 = (s[15] << 6) | (s[14] >>> 26);\n      b4 = (s[25] << 11) | (s[24] >>> 21);\n      b5 = (s[24] << 11) | (s[25] >>> 21);\n      b36 = (s[34] << 15) | (s[35] >>> 17);\n      b37 = (s[35] << 15) | (s[34] >>> 17);\n      b18 = (s[45] << 29) | (s[44] >>> 3);\n      b19 = (s[44] << 29) | (s[45] >>> 3);\n      b10 = (s[6] << 28) | (s[7] >>> 4);\n      b11 = (s[7] << 28) | (s[6] >>> 4);\n      b42 = (s[17] << 23) | (s[16] >>> 9);\n      b43 = (s[16] << 23) | (s[17] >>> 9);\n      b24 = (s[26] << 25) | (s[27] >>> 7);\n      b25 = (s[27] << 25) | (s[26] >>> 7);\n      b6 = (s[36] << 21) | (s[37] >>> 11);\n      b7 = (s[37] << 21) | (s[36] >>> 11);\n      b38 = (s[47] << 24) | (s[46] >>> 8);\n      b39 = (s[46] << 24) | (s[47] >>> 8);\n      b30 = (s[8] << 27) | (s[9] >>> 5);\n      b31 = (s[9] << 27) | (s[8] >>> 5);\n      b12 = (s[18] << 20) | (s[19] >>> 12);\n      b13 = (s[19] << 20) | (s[18] >>> 12);\n      b44 = (s[29] << 7) | (s[28] >>> 25);\n      b45 = (s[28] << 7) | (s[29] >>> 25);\n      b26 = (s[38] << 8) | (s[39] >>> 24);\n      b27 = (s[39] << 8) | (s[38] >>> 24);\n      b8 = (s[48] << 14) | (s[49] >>> 18);\n      b9 = (s[49] << 14) | (s[48] >>> 18);\n\n      s[0] = b0 ^ (~b2 & b4);\n      s[1] = b1 ^ (~b3 & b5);\n      s[10] = b10 ^ (~b12 & b14);\n      s[11] = b11 ^ (~b13 & b15);\n      s[20] = b20 ^ (~b22 & b24);\n      s[21] = b21 ^ (~b23 & b25);\n      s[30] = b30 ^ (~b32 & b34);\n      s[31] = b31 ^ (~b33 & b35);\n      s[40] = b40 ^ (~b42 & b44);\n      s[41] = b41 ^ (~b43 & b45);\n      s[2] = b2 ^ (~b4 & b6);\n      s[3] = b3 ^ (~b5 & b7);\n      s[12] = b12 ^ (~b14 & b16);\n      s[13] = b13 ^ (~b15 & b17);\n      s[22] = b22 ^ (~b24 & b26);\n      s[23] = b23 ^ (~b25 & b27);\n      s[32] = b32 ^ (~b34 & b36);\n      s[33] = b33 ^ (~b35 & b37);\n      s[42] = b42 ^ (~b44 & b46);\n      s[43] = b43 ^ (~b45 & b47);\n      s[4] = b4 ^ (~b6 & b8);\n      s[5] = b5 ^ (~b7 & b9);\n      s[14] = b14 ^ (~b16 & b18);\n      s[15] = b15 ^ (~b17 & b19);\n      s[24] = b24 ^ (~b26 & b28);\n      s[25] = b25 ^ (~b27 & b29);\n      s[34] = b34 ^ (~b36 & b38);\n      s[35] = b35 ^ (~b37 & b39);\n      s[44] = b44 ^ (~b46 & b48);\n      s[45] = b45 ^ (~b47 & b49);\n      s[6] = b6 ^ (~b8 & b0);\n      s[7] = b7 ^ (~b9 & b1);\n      s[16] = b16 ^ (~b18 & b10);\n      s[17] = b17 ^ (~b19 & b11);\n      s[26] = b26 ^ (~b28 & b20);\n      s[27] = b27 ^ (~b29 & b21);\n      s[36] = b36 ^ (~b38 & b30);\n      s[37] = b37 ^ (~b39 & b31);\n      s[46] = b46 ^ (~b48 & b40);\n      s[47] = b47 ^ (~b49 & b41);\n      s[8] = b8 ^ (~b0 & b2);\n      s[9] = b9 ^ (~b1 & b3);\n      s[18] = b18 ^ (~b10 & b12);\n      s[19] = b19 ^ (~b11 & b13);\n      s[28] = b28 ^ (~b20 & b22);\n      s[29] = b29 ^ (~b21 & b23);\n      s[38] = b38 ^ (~b30 & b32);\n      s[39] = b39 ^ (~b31 & b33);\n      s[48] = b48 ^ (~b40 & b42);\n      s[49] = b49 ^ (~b41 & b43);\n\n      s[0] ^= RC[n];\n      s[1] ^= RC[n + 1];\n    }\n  };\n\n  if (COMMON_JS) {\n    module.exports = methods;\n  } else {\n    for (i = 0; i < methodNames.length; ++i) {\n      root[methodNames[i]] = methods[methodNames[i]];\n    }\n    if (AMD) {\n      define(function () {\n        return methods;\n      });\n    }\n  }\n})();\n","/* globals __webpack_amd_options__ */\nmodule.exports = __webpack_amd_options__;\n","/*\n This file is part of web3.js.\n\n web3.js is free software: you can redistribute it and/or modify\n it under the terms of the GNU Lesser General Public License as published by\n the Free Software Foundation, either version 3 of the License, or\n (at your option) any later version.\n\n web3.js is distributed in the hope that it will be useful,\n but WITHOUT ANY WARRANTY; without even the implied warranty of\n MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n GNU Lesser General Public License for more details.\n\n You should have received a copy of the GNU Lesser General Public License\n along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file soliditySha3.js\n * @author Fabian Vogelsteller <fabian@ethereum.org>\n * @date 2017\n */\nvar _ = require('underscore');\nvar BN = require('bn.js');\nvar utils = require('./utils.js');\nvar _elementaryName = function (name) {\n    /*jshint maxcomplexity:false */\n    if (name.startsWith('int[')) {\n        return 'int256' + name.slice(3);\n    }\n    else if (name === 'int') {\n        return 'int256';\n    }\n    else if (name.startsWith('uint[')) {\n        return 'uint256' + name.slice(4);\n    }\n    else if (name === 'uint') {\n        return 'uint256';\n    }\n    else if (name.startsWith('fixed[')) {\n        return 'fixed128x128' + name.slice(5);\n    }\n    else if (name === 'fixed') {\n        return 'fixed128x128';\n    }\n    else if (name.startsWith('ufixed[')) {\n        return 'ufixed128x128' + name.slice(6);\n    }\n    else if (name === 'ufixed') {\n        return 'ufixed128x128';\n    }\n    return name;\n};\n// Parse N from type<N>\nvar _parseTypeN = function (type) {\n    var typesize = /^\\D+(\\d+).*$/.exec(type);\n    return typesize ? parseInt(typesize[1], 10) : null;\n};\n// Parse N from type[<N>]\nvar _parseTypeNArray = function (type) {\n    var arraySize = /^\\D+\\d*\\[(\\d+)\\]$/.exec(type);\n    return arraySize ? parseInt(arraySize[1], 10) : null;\n};\nvar _parseNumber = function (arg) {\n    var type = typeof arg;\n    if (type === 'string') {\n        if (utils.isHexStrict(arg)) {\n            return new BN(arg.replace(/0x/i, ''), 16);\n        }\n        else {\n            return new BN(arg, 10);\n        }\n    }\n    else if (type === 'number') {\n        return new BN(arg);\n    }\n    else if (utils.isBigNumber(arg)) {\n        return new BN(arg.toString(10));\n    }\n    else if (utils.isBN(arg)) {\n        return arg;\n    }\n    else {\n        throw new Error(arg + ' is not a number');\n    }\n};\nvar _solidityPack = function (type, value, arraySize) {\n    /*jshint maxcomplexity:false */\n    var size, num;\n    type = _elementaryName(type);\n    if (type === 'bytes') {\n        if (value.replace(/^0x/i, '').length % 2 !== 0) {\n            throw new Error('Invalid bytes characters ' + value.length);\n        }\n        return value;\n    }\n    else if (type === 'string') {\n        return utils.utf8ToHex(value);\n    }\n    else if (type === 'bool') {\n        return value ? '01' : '00';\n    }\n    else if (type.startsWith('address')) {\n        if (arraySize) {\n            size = 64;\n        }\n        else {\n            size = 40;\n        }\n        if (!utils.isAddress(value)) {\n            throw new Error(value + ' is not a valid address, or the checksum is invalid.');\n        }\n        return utils.leftPad(value.toLowerCase(), size);\n    }\n    size = _parseTypeN(type);\n    if (type.startsWith('bytes')) {\n        if (!size) {\n            throw new Error('bytes[] not yet supported in solidity');\n        }\n        // must be 32 byte slices when in an array\n        if (arraySize) {\n            size = 32;\n        }\n        if (size < 1 || size > 32 || size < value.replace(/^0x/i, '').length / 2) {\n            throw new Error('Invalid bytes' + size + ' for ' + value);\n        }\n        return utils.rightPad(value, size * 2);\n    }\n    else if (type.startsWith('uint')) {\n        if ((size % 8) || (size < 8) || (size > 256)) {\n            throw new Error('Invalid uint' + size + ' size');\n        }\n        num = _parseNumber(value);\n        if (num.bitLength() > size) {\n            throw new Error('Supplied uint exceeds width: ' + size + ' vs ' + num.bitLength());\n        }\n        if (num.lt(new BN(0))) {\n            throw new Error('Supplied uint ' + num.toString() + ' is negative');\n        }\n        return size ? utils.leftPad(num.toString('hex'), size / 8 * 2) : num;\n    }\n    else if (type.startsWith('int')) {\n        if ((size % 8) || (size < 8) || (size > 256)) {\n            throw new Error('Invalid int' + size + ' size');\n        }\n        num = _parseNumber(value);\n        if (num.bitLength() > size) {\n            throw new Error('Supplied int exceeds width: ' + size + ' vs ' + num.bitLength());\n        }\n        if (num.lt(new BN(0))) {\n            return num.toTwos(size).toString('hex');\n        }\n        else {\n            return size ? utils.leftPad(num.toString('hex'), size / 8 * 2) : num;\n        }\n    }\n    else {\n        // FIXME: support all other types\n        throw new Error('Unsupported or invalid type: ' + type);\n    }\n};\nvar _processSolidityEncodePackedArgs = function (arg) {\n    /*jshint maxcomplexity:false */\n    if (_.isArray(arg)) {\n        throw new Error('Autodetection of array types is not supported.');\n    }\n    var type, value = '';\n    var hexArg, arraySize;\n    // if type is given\n    if (_.isObject(arg) && (arg.hasOwnProperty('v') || arg.hasOwnProperty('t') || arg.hasOwnProperty('value') || arg.hasOwnProperty('type'))) {\n        type = arg.hasOwnProperty('t') ? arg.t : arg.type;\n        value = arg.hasOwnProperty('v') ? arg.v : arg.value;\n        // otherwise try to guess the type\n    }\n    else {\n        type = utils.toHex(arg, true);\n        value = utils.toHex(arg);\n        if (!type.startsWith('int') && !type.startsWith('uint')) {\n            type = 'bytes';\n        }\n    }\n    if ((type.startsWith('int') || type.startsWith('uint')) && typeof value === 'string' && !/^(-)?0x/i.test(value)) {\n        value = new BN(value);\n    }\n    // get the array size\n    if (_.isArray(value)) {\n        arraySize = _parseTypeNArray(type);\n        if (arraySize && value.length !== arraySize) {\n            throw new Error(type + ' is not matching the given array ' + JSON.stringify(value));\n        }\n        else {\n            arraySize = value.length;\n        }\n    }\n    if (_.isArray(value)) {\n        hexArg = value.map(function (val) {\n            return _solidityPack(type, val, arraySize).toString('hex').replace('0x', '');\n        });\n        return hexArg.join('');\n    }\n    else {\n        hexArg = _solidityPack(type, value, arraySize);\n        return hexArg.toString('hex').replace('0x', '');\n    }\n};\n/**\n * Hashes solidity values to a sha3 hash using keccak 256\n *\n * @method soliditySha3\n * @return {Object} the sha3\n */\nvar soliditySha3 = function () {\n    /*jshint maxcomplexity:false */\n    var args = Array.prototype.slice.call(arguments);\n    var hexArgs = _.map(args, _processSolidityEncodePackedArgs);\n    // console.log(args, hexArgs);\n    // console.log('0x'+ hexArgs.join(''));\n    return utils.sha3('0x' + hexArgs.join(''));\n};\n/**\n * Hashes solidity values to a sha3 hash using keccak 256 but does return the hash of value `null` instead of `null`\n *\n * @method soliditySha3Raw\n * @return {Object} the sha3\n */\nvar soliditySha3Raw = function () {\n    return utils.sha3Raw('0x' + _.map(Array.prototype.slice.call(arguments), _processSolidityEncodePackedArgs).join(''));\n};\n/**\n * Encode packed args to hex\n *\n * @method encodePacked\n * @return {String} the hex encoded arguments\n */\nvar encodePacked = function () {\n    /*jshint maxcomplexity:false */\n    var args = Array.prototype.slice.call(arguments);\n    var hexArgs = _.map(args, _processSolidityEncodePackedArgs);\n    return '0x' + hexArgs.join('').toLowerCase();\n};\nmodule.exports = {\n    soliditySha3: soliditySha3,\n    soliditySha3Raw: soliditySha3Raw,\n    encodePacked: encodePacked\n};\n","module.exports = require('crypto').randomBytes\n","module.exports = require(\"crypto\");","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 120;","'use strict';\nconst ansiStyles = require('ansi-styles');\nconst {stdout: stdoutColor, stderr: stderrColor} = require('supports-color');\nconst {\n\tstringReplaceAll,\n\tstringEncaseCRLFWithFirstIndex\n} = require('./util');\n\nconst {isArray} = Array;\n\n// `supportsColor.level`  `ansiStyles.color[name]` mapping\nconst levelMapping = [\n\t'ansi',\n\t'ansi',\n\t'ansi256',\n\t'ansi16m'\n];\n\nconst styles = Object.create(null);\n\nconst applyOptions = (object, options = {}) => {\n\tif (options.level && !(Number.isInteger(options.level) && options.level >= 0 && options.level <= 3)) {\n\t\tthrow new Error('The `level` option should be an integer from 0 to 3');\n\t}\n\n\t// Detect level if not set manually\n\tconst colorLevel = stdoutColor ? stdoutColor.level : 0;\n\tobject.level = options.level === undefined ? colorLevel : options.level;\n};\n\nclass ChalkClass {\n\tconstructor(options) {\n\t\t// eslint-disable-next-line no-constructor-return\n\t\treturn chalkFactory(options);\n\t}\n}\n\nconst chalkFactory = options => {\n\tconst chalk = {};\n\tapplyOptions(chalk, options);\n\n\tchalk.template = (...arguments_) => chalkTag(chalk.template, ...arguments_);\n\n\tObject.setPrototypeOf(chalk, Chalk.prototype);\n\tObject.setPrototypeOf(chalk.template, chalk);\n\n\tchalk.template.constructor = () => {\n\t\tthrow new Error('`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.');\n\t};\n\n\tchalk.template.Instance = ChalkClass;\n\n\treturn chalk.template;\n};\n\nfunction Chalk(options) {\n\treturn chalkFactory(options);\n}\n\nfor (const [styleName, style] of Object.entries(ansiStyles)) {\n\tstyles[styleName] = {\n\t\tget() {\n\t\t\tconst builder = createBuilder(this, createStyler(style.open, style.close, this._styler), this._isEmpty);\n\t\t\tObject.defineProperty(this, styleName, {value: builder});\n\t\t\treturn builder;\n\t\t}\n\t};\n}\n\nstyles.visible = {\n\tget() {\n\t\tconst builder = createBuilder(this, this._styler, true);\n\t\tObject.defineProperty(this, 'visible', {value: builder});\n\t\treturn builder;\n\t}\n};\n\nconst usedModels = ['rgb', 'hex', 'keyword', 'hsl', 'hsv', 'hwb', 'ansi', 'ansi256'];\n\nfor (const model of usedModels) {\n\tstyles[model] = {\n\t\tget() {\n\t\t\tconst {level} = this;\n\t\t\treturn function (...arguments_) {\n\t\t\t\tconst styler = createStyler(ansiStyles.color[levelMapping[level]][model](...arguments_), ansiStyles.color.close, this._styler);\n\t\t\t\treturn createBuilder(this, styler, this._isEmpty);\n\t\t\t};\n\t\t}\n\t};\n}\n\nfor (const model of usedModels) {\n\tconst bgModel = 'bg' + model[0].toUpperCase() + model.slice(1);\n\tstyles[bgModel] = {\n\t\tget() {\n\t\t\tconst {level} = this;\n\t\t\treturn function (...arguments_) {\n\t\t\t\tconst styler = createStyler(ansiStyles.bgColor[levelMapping[level]][model](...arguments_), ansiStyles.bgColor.close, this._styler);\n\t\t\t\treturn createBuilder(this, styler, this._isEmpty);\n\t\t\t};\n\t\t}\n\t};\n}\n\nconst proto = Object.defineProperties(() => {}, {\n\t...styles,\n\tlevel: {\n\t\tenumerable: true,\n\t\tget() {\n\t\t\treturn this._generator.level;\n\t\t},\n\t\tset(level) {\n\t\t\tthis._generator.level = level;\n\t\t}\n\t}\n});\n\nconst createStyler = (open, close, parent) => {\n\tlet openAll;\n\tlet closeAll;\n\tif (parent === undefined) {\n\t\topenAll = open;\n\t\tcloseAll = close;\n\t} else {\n\t\topenAll = parent.openAll + open;\n\t\tcloseAll = close + parent.closeAll;\n\t}\n\n\treturn {\n\t\topen,\n\t\tclose,\n\t\topenAll,\n\t\tcloseAll,\n\t\tparent\n\t};\n};\n\nconst createBuilder = (self, _styler, _isEmpty) => {\n\tconst builder = (...arguments_) => {\n\t\tif (isArray(arguments_[0]) && isArray(arguments_[0].raw)) {\n\t\t\t// Called as a template literal, for example: chalk.red`2 + 3 = {bold ${2+3}}`\n\t\t\treturn applyStyle(builder, chalkTag(builder, ...arguments_));\n\t\t}\n\n\t\t// Single argument is hot path, implicit coercion is faster than anything\n\t\t// eslint-disable-next-line no-implicit-coercion\n\t\treturn applyStyle(builder, (arguments_.length === 1) ? ('' + arguments_[0]) : arguments_.join(' '));\n\t};\n\n\t// We alter the prototype because we must return a function, but there is\n\t// no way to create a function with a different prototype\n\tObject.setPrototypeOf(builder, proto);\n\n\tbuilder._generator = self;\n\tbuilder._styler = _styler;\n\tbuilder._isEmpty = _isEmpty;\n\n\treturn builder;\n};\n\nconst applyStyle = (self, string) => {\n\tif (self.level <= 0 || !string) {\n\t\treturn self._isEmpty ? '' : string;\n\t}\n\n\tlet styler = self._styler;\n\n\tif (styler === undefined) {\n\t\treturn string;\n\t}\n\n\tconst {openAll, closeAll} = styler;\n\tif (string.indexOf('\\u001B') !== -1) {\n\t\twhile (styler !== undefined) {\n\t\t\t// Replace any instances already present with a re-opening code\n\t\t\t// otherwise only the part of the string until said closing code\n\t\t\t// will be colored, and the rest will simply be 'plain'.\n\t\t\tstring = stringReplaceAll(string, styler.close, styler.open);\n\n\t\t\tstyler = styler.parent;\n\t\t}\n\t}\n\n\t// We can move both next actions out of loop, because remaining actions in loop won't have\n\t// any/visible effect on parts we add here. Close the styling before a linebreak and reopen\n\t// after next line to fix a bleed issue on macOS: https://github.com/chalk/chalk/pull/92\n\tconst lfIndex = string.indexOf('\\n');\n\tif (lfIndex !== -1) {\n\t\tstring = stringEncaseCRLFWithFirstIndex(string, closeAll, openAll, lfIndex);\n\t}\n\n\treturn openAll + string + closeAll;\n};\n\nlet template;\nconst chalkTag = (chalk, ...strings) => {\n\tconst [firstString] = strings;\n\n\tif (!isArray(firstString) || !isArray(firstString.raw)) {\n\t\t// If chalk() was called by itself or with a string,\n\t\t// return the string itself as a string.\n\t\treturn strings.join(' ');\n\t}\n\n\tconst arguments_ = strings.slice(1);\n\tconst parts = [firstString.raw[0]];\n\n\tfor (let i = 1; i < firstString.length; i++) {\n\t\tparts.push(\n\t\t\tString(arguments_[i - 1]).replace(/[{}\\\\]/g, '\\\\$&'),\n\t\t\tString(firstString.raw[i])\n\t\t);\n\t}\n\n\tif (template === undefined) {\n\t\ttemplate = require('./templates');\n\t}\n\n\treturn template(chalk, parts.join(''));\n};\n\nObject.defineProperties(Chalk.prototype, styles);\n\nconst chalk = Chalk(); // eslint-disable-line new-cap\nchalk.supportsColor = stdoutColor;\nchalk.stderr = Chalk({level: stderrColor ? stderrColor.level : 0}); // eslint-disable-line new-cap\nchalk.stderr.supportsColor = stderrColor;\n\nmodule.exports = chalk;\n","'use strict';\n\nconst wrapAnsi16 = (fn, offset) => (...args) => {\n\tconst code = fn(...args);\n\treturn `\\u001B[${code + offset}m`;\n};\n\nconst wrapAnsi256 = (fn, offset) => (...args) => {\n\tconst code = fn(...args);\n\treturn `\\u001B[${38 + offset};5;${code}m`;\n};\n\nconst wrapAnsi16m = (fn, offset) => (...args) => {\n\tconst rgb = fn(...args);\n\treturn `\\u001B[${38 + offset};2;${rgb[0]};${rgb[1]};${rgb[2]}m`;\n};\n\nconst ansi2ansi = n => n;\nconst rgb2rgb = (r, g, b) => [r, g, b];\n\nconst setLazyProperty = (object, property, get) => {\n\tObject.defineProperty(object, property, {\n\t\tget: () => {\n\t\t\tconst value = get();\n\n\t\t\tObject.defineProperty(object, property, {\n\t\t\t\tvalue,\n\t\t\t\tenumerable: true,\n\t\t\t\tconfigurable: true\n\t\t\t});\n\n\t\t\treturn value;\n\t\t},\n\t\tenumerable: true,\n\t\tconfigurable: true\n\t});\n};\n\n/** @type {typeof import('color-convert')} */\nlet colorConvert;\nconst makeDynamicStyles = (wrap, targetSpace, identity, isBackground) => {\n\tif (colorConvert === undefined) {\n\t\tcolorConvert = require('color-convert');\n\t}\n\n\tconst offset = isBackground ? 10 : 0;\n\tconst styles = {};\n\n\tfor (const [sourceSpace, suite] of Object.entries(colorConvert)) {\n\t\tconst name = sourceSpace === 'ansi16' ? 'ansi' : sourceSpace;\n\t\tif (sourceSpace === targetSpace) {\n\t\t\tstyles[name] = wrap(identity, offset);\n\t\t} else if (typeof suite === 'object') {\n\t\t\tstyles[name] = wrap(suite[targetSpace], offset);\n\t\t}\n\t}\n\n\treturn styles;\n};\n\nfunction assembleStyles() {\n\tconst codes = new Map();\n\tconst styles = {\n\t\tmodifier: {\n\t\t\treset: [0, 0],\n\t\t\t// 21 isn't widely supported and 22 does the same thing\n\t\t\tbold: [1, 22],\n\t\t\tdim: [2, 22],\n\t\t\titalic: [3, 23],\n\t\t\tunderline: [4, 24],\n\t\t\tinverse: [7, 27],\n\t\t\thidden: [8, 28],\n\t\t\tstrikethrough: [9, 29]\n\t\t},\n\t\tcolor: {\n\t\t\tblack: [30, 39],\n\t\t\tred: [31, 39],\n\t\t\tgreen: [32, 39],\n\t\t\tyellow: [33, 39],\n\t\t\tblue: [34, 39],\n\t\t\tmagenta: [35, 39],\n\t\t\tcyan: [36, 39],\n\t\t\twhite: [37, 39],\n\n\t\t\t// Bright color\n\t\t\tblackBright: [90, 39],\n\t\t\tredBright: [91, 39],\n\t\t\tgreenBright: [92, 39],\n\t\t\tyellowBright: [93, 39],\n\t\t\tblueBright: [94, 39],\n\t\t\tmagentaBright: [95, 39],\n\t\t\tcyanBright: [96, 39],\n\t\t\twhiteBright: [97, 39]\n\t\t},\n\t\tbgColor: {\n\t\t\tbgBlack: [40, 49],\n\t\t\tbgRed: [41, 49],\n\t\t\tbgGreen: [42, 49],\n\t\t\tbgYellow: [43, 49],\n\t\t\tbgBlue: [44, 49],\n\t\t\tbgMagenta: [45, 49],\n\t\t\tbgCyan: [46, 49],\n\t\t\tbgWhite: [47, 49],\n\n\t\t\t// Bright color\n\t\t\tbgBlackBright: [100, 49],\n\t\t\tbgRedBright: [101, 49],\n\t\t\tbgGreenBright: [102, 49],\n\t\t\tbgYellowBright: [103, 49],\n\t\t\tbgBlueBright: [104, 49],\n\t\t\tbgMagentaBright: [105, 49],\n\t\t\tbgCyanBright: [106, 49],\n\t\t\tbgWhiteBright: [107, 49]\n\t\t}\n\t};\n\n\t// Alias bright black as gray (and grey)\n\tstyles.color.gray = styles.color.blackBright;\n\tstyles.bgColor.bgGray = styles.bgColor.bgBlackBright;\n\tstyles.color.grey = styles.color.blackBright;\n\tstyles.bgColor.bgGrey = styles.bgColor.bgBlackBright;\n\n\tfor (const [groupName, group] of Object.entries(styles)) {\n\t\tfor (const [styleName, style] of Object.entries(group)) {\n\t\t\tstyles[styleName] = {\n\t\t\t\topen: `\\u001B[${style[0]}m`,\n\t\t\t\tclose: `\\u001B[${style[1]}m`\n\t\t\t};\n\n\t\t\tgroup[styleName] = styles[styleName];\n\n\t\t\tcodes.set(style[0], style[1]);\n\t\t}\n\n\t\tObject.defineProperty(styles, groupName, {\n\t\t\tvalue: group,\n\t\t\tenumerable: false\n\t\t});\n\t}\n\n\tObject.defineProperty(styles, 'codes', {\n\t\tvalue: codes,\n\t\tenumerable: false\n\t});\n\n\tstyles.color.close = '\\u001B[39m';\n\tstyles.bgColor.close = '\\u001B[49m';\n\n\tsetLazyProperty(styles.color, 'ansi', () => makeDynamicStyles(wrapAnsi16, 'ansi16', ansi2ansi, false));\n\tsetLazyProperty(styles.color, 'ansi256', () => makeDynamicStyles(wrapAnsi256, 'ansi256', ansi2ansi, false));\n\tsetLazyProperty(styles.color, 'ansi16m', () => makeDynamicStyles(wrapAnsi16m, 'rgb', rgb2rgb, false));\n\tsetLazyProperty(styles.bgColor, 'ansi', () => makeDynamicStyles(wrapAnsi16, 'ansi16', ansi2ansi, true));\n\tsetLazyProperty(styles.bgColor, 'ansi256', () => makeDynamicStyles(wrapAnsi256, 'ansi256', ansi2ansi, true));\n\tsetLazyProperty(styles.bgColor, 'ansi16m', () => makeDynamicStyles(wrapAnsi16m, 'rgb', rgb2rgb, true));\n\n\treturn styles;\n}\n\n// Make the export immutable\nObject.defineProperty(module, 'exports', {\n\tenumerable: true,\n\tget: assembleStyles\n});\n","const conversions = require('./conversions');\nconst route = require('./route');\n\nconst convert = {};\n\nconst models = Object.keys(conversions);\n\nfunction wrapRaw(fn) {\n\tconst wrappedFn = function (...args) {\n\t\tconst arg0 = args[0];\n\t\tif (arg0 === undefined || arg0 === null) {\n\t\t\treturn arg0;\n\t\t}\n\n\t\tif (arg0.length > 1) {\n\t\t\targs = arg0;\n\t\t}\n\n\t\treturn fn(args);\n\t};\n\n\t// Preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nfunction wrapRounded(fn) {\n\tconst wrappedFn = function (...args) {\n\t\tconst arg0 = args[0];\n\n\t\tif (arg0 === undefined || arg0 === null) {\n\t\t\treturn arg0;\n\t\t}\n\n\t\tif (arg0.length > 1) {\n\t\t\targs = arg0;\n\t\t}\n\n\t\tconst result = fn(args);\n\n\t\t// We're assuming the result is an array here.\n\t\t// see notice in conversions.js; don't use box types\n\t\t// in conversion functions.\n\t\tif (typeof result === 'object') {\n\t\t\tfor (let len = result.length, i = 0; i < len; i++) {\n\t\t\t\tresult[i] = Math.round(result[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n\n\t// Preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nmodels.forEach(fromModel => {\n\tconvert[fromModel] = {};\n\n\tObject.defineProperty(convert[fromModel], 'channels', {value: conversions[fromModel].channels});\n\tObject.defineProperty(convert[fromModel], 'labels', {value: conversions[fromModel].labels});\n\n\tconst routes = route(fromModel);\n\tconst routeModels = Object.keys(routes);\n\n\trouteModels.forEach(toModel => {\n\t\tconst fn = routes[toModel];\n\n\t\tconvert[fromModel][toModel] = wrapRounded(fn);\n\t\tconvert[fromModel][toModel].raw = wrapRaw(fn);\n\t});\n});\n\nmodule.exports = convert;\n","'use strict'\r\n\r\nmodule.exports = {\r\n\t\"aliceblue\": [240, 248, 255],\r\n\t\"antiquewhite\": [250, 235, 215],\r\n\t\"aqua\": [0, 255, 255],\r\n\t\"aquamarine\": [127, 255, 212],\r\n\t\"azure\": [240, 255, 255],\r\n\t\"beige\": [245, 245, 220],\r\n\t\"bisque\": [255, 228, 196],\r\n\t\"black\": [0, 0, 0],\r\n\t\"blanchedalmond\": [255, 235, 205],\r\n\t\"blue\": [0, 0, 255],\r\n\t\"blueviolet\": [138, 43, 226],\r\n\t\"brown\": [165, 42, 42],\r\n\t\"burlywood\": [222, 184, 135],\r\n\t\"cadetblue\": [95, 158, 160],\r\n\t\"chartreuse\": [127, 255, 0],\r\n\t\"chocolate\": [210, 105, 30],\r\n\t\"coral\": [255, 127, 80],\r\n\t\"cornflowerblue\": [100, 149, 237],\r\n\t\"cornsilk\": [255, 248, 220],\r\n\t\"crimson\": [220, 20, 60],\r\n\t\"cyan\": [0, 255, 255],\r\n\t\"darkblue\": [0, 0, 139],\r\n\t\"darkcyan\": [0, 139, 139],\r\n\t\"darkgoldenrod\": [184, 134, 11],\r\n\t\"darkgray\": [169, 169, 169],\r\n\t\"darkgreen\": [0, 100, 0],\r\n\t\"darkgrey\": [169, 169, 169],\r\n\t\"darkkhaki\": [189, 183, 107],\r\n\t\"darkmagenta\": [139, 0, 139],\r\n\t\"darkolivegreen\": [85, 107, 47],\r\n\t\"darkorange\": [255, 140, 0],\r\n\t\"darkorchid\": [153, 50, 204],\r\n\t\"darkred\": [139, 0, 0],\r\n\t\"darksalmon\": [233, 150, 122],\r\n\t\"darkseagreen\": [143, 188, 143],\r\n\t\"darkslateblue\": [72, 61, 139],\r\n\t\"darkslategray\": [47, 79, 79],\r\n\t\"darkslategrey\": [47, 79, 79],\r\n\t\"darkturquoise\": [0, 206, 209],\r\n\t\"darkviolet\": [148, 0, 211],\r\n\t\"deeppink\": [255, 20, 147],\r\n\t\"deepskyblue\": [0, 191, 255],\r\n\t\"dimgray\": [105, 105, 105],\r\n\t\"dimgrey\": [105, 105, 105],\r\n\t\"dodgerblue\": [30, 144, 255],\r\n\t\"firebrick\": [178, 34, 34],\r\n\t\"floralwhite\": [255, 250, 240],\r\n\t\"forestgreen\": [34, 139, 34],\r\n\t\"fuchsia\": [255, 0, 255],\r\n\t\"gainsboro\": [220, 220, 220],\r\n\t\"ghostwhite\": [248, 248, 255],\r\n\t\"gold\": [255, 215, 0],\r\n\t\"goldenrod\": [218, 165, 32],\r\n\t\"gray\": [128, 128, 128],\r\n\t\"green\": [0, 128, 0],\r\n\t\"greenyellow\": [173, 255, 47],\r\n\t\"grey\": [128, 128, 128],\r\n\t\"honeydew\": [240, 255, 240],\r\n\t\"hotpink\": [255, 105, 180],\r\n\t\"indianred\": [205, 92, 92],\r\n\t\"indigo\": [75, 0, 130],\r\n\t\"ivory\": [255, 255, 240],\r\n\t\"khaki\": [240, 230, 140],\r\n\t\"lavender\": [230, 230, 250],\r\n\t\"lavenderblush\": [255, 240, 245],\r\n\t\"lawngreen\": [124, 252, 0],\r\n\t\"lemonchiffon\": [255, 250, 205],\r\n\t\"lightblue\": [173, 216, 230],\r\n\t\"lightcoral\": [240, 128, 128],\r\n\t\"lightcyan\": [224, 255, 255],\r\n\t\"lightgoldenrodyellow\": [250, 250, 210],\r\n\t\"lightgray\": [211, 211, 211],\r\n\t\"lightgreen\": [144, 238, 144],\r\n\t\"lightgrey\": [211, 211, 211],\r\n\t\"lightpink\": [255, 182, 193],\r\n\t\"lightsalmon\": [255, 160, 122],\r\n\t\"lightseagreen\": [32, 178, 170],\r\n\t\"lightskyblue\": [135, 206, 250],\r\n\t\"lightslategray\": [119, 136, 153],\r\n\t\"lightslategrey\": [119, 136, 153],\r\n\t\"lightsteelblue\": [176, 196, 222],\r\n\t\"lightyellow\": [255, 255, 224],\r\n\t\"lime\": [0, 255, 0],\r\n\t\"limegreen\": [50, 205, 50],\r\n\t\"linen\": [250, 240, 230],\r\n\t\"magenta\": [255, 0, 255],\r\n\t\"maroon\": [128, 0, 0],\r\n\t\"mediumaquamarine\": [102, 205, 170],\r\n\t\"mediumblue\": [0, 0, 205],\r\n\t\"mediumorchid\": [186, 85, 211],\r\n\t\"mediumpurple\": [147, 112, 219],\r\n\t\"mediumseagreen\": [60, 179, 113],\r\n\t\"mediumslateblue\": [123, 104, 238],\r\n\t\"mediumspringgreen\": [0, 250, 154],\r\n\t\"mediumturquoise\": [72, 209, 204],\r\n\t\"mediumvioletred\": [199, 21, 133],\r\n\t\"midnightblue\": [25, 25, 112],\r\n\t\"mintcream\": [245, 255, 250],\r\n\t\"mistyrose\": [255, 228, 225],\r\n\t\"moccasin\": [255, 228, 181],\r\n\t\"navajowhite\": [255, 222, 173],\r\n\t\"navy\": [0, 0, 128],\r\n\t\"oldlace\": [253, 245, 230],\r\n\t\"olive\": [128, 128, 0],\r\n\t\"olivedrab\": [107, 142, 35],\r\n\t\"orange\": [255, 165, 0],\r\n\t\"orangered\": [255, 69, 0],\r\n\t\"orchid\": [218, 112, 214],\r\n\t\"palegoldenrod\": [238, 232, 170],\r\n\t\"palegreen\": [152, 251, 152],\r\n\t\"paleturquoise\": [175, 238, 238],\r\n\t\"palevioletred\": [219, 112, 147],\r\n\t\"papayawhip\": [255, 239, 213],\r\n\t\"peachpuff\": [255, 218, 185],\r\n\t\"peru\": [205, 133, 63],\r\n\t\"pink\": [255, 192, 203],\r\n\t\"plum\": [221, 160, 221],\r\n\t\"powderblue\": [176, 224, 230],\r\n\t\"purple\": [128, 0, 128],\r\n\t\"rebeccapurple\": [102, 51, 153],\r\n\t\"red\": [255, 0, 0],\r\n\t\"rosybrown\": [188, 143, 143],\r\n\t\"royalblue\": [65, 105, 225],\r\n\t\"saddlebrown\": [139, 69, 19],\r\n\t\"salmon\": [250, 128, 114],\r\n\t\"sandybrown\": [244, 164, 96],\r\n\t\"seagreen\": [46, 139, 87],\r\n\t\"seashell\": [255, 245, 238],\r\n\t\"sienna\": [160, 82, 45],\r\n\t\"silver\": [192, 192, 192],\r\n\t\"skyblue\": [135, 206, 235],\r\n\t\"slateblue\": [106, 90, 205],\r\n\t\"slategray\": [112, 128, 144],\r\n\t\"slategrey\": [112, 128, 144],\r\n\t\"snow\": [255, 250, 250],\r\n\t\"springgreen\": [0, 255, 127],\r\n\t\"steelblue\": [70, 130, 180],\r\n\t\"tan\": [210, 180, 140],\r\n\t\"teal\": [0, 128, 128],\r\n\t\"thistle\": [216, 191, 216],\r\n\t\"tomato\": [255, 99, 71],\r\n\t\"turquoise\": [64, 224, 208],\r\n\t\"violet\": [238, 130, 238],\r\n\t\"wheat\": [245, 222, 179],\r\n\t\"white\": [255, 255, 255],\r\n\t\"whitesmoke\": [245, 245, 245],\r\n\t\"yellow\": [255, 255, 0],\r\n\t\"yellowgreen\": [154, 205, 50]\r\n};\r\n","const conversions = require('./conversions');\n\n/*\n\tThis function routes a model to all other models.\n\n\tall functions that are routed have a property `.conversion` attached\n\tto the returned synthetic function. This property is an array\n\tof strings, each with the steps in between the 'from' and 'to'\n\tcolor models (inclusive).\n\n\tconversions that are not possible simply are not included.\n*/\n\nfunction buildGraph() {\n\tconst graph = {};\n\t// https://jsperf.com/object-keys-vs-for-in-with-closure/3\n\tconst models = Object.keys(conversions);\n\n\tfor (let len = models.length, i = 0; i < len; i++) {\n\t\tgraph[models[i]] = {\n\t\t\t// http://jsperf.com/1-vs-infinity\n\t\t\t// micro-opt, but this is simple.\n\t\t\tdistance: -1,\n\t\t\tparent: null\n\t\t};\n\t}\n\n\treturn graph;\n}\n\n// https://en.wikipedia.org/wiki/Breadth-first_search\nfunction deriveBFS(fromModel) {\n\tconst graph = buildGraph();\n\tconst queue = [fromModel]; // Unshift -> queue -> pop\n\n\tgraph[fromModel].distance = 0;\n\n\twhile (queue.length) {\n\t\tconst current = queue.pop();\n\t\tconst adjacents = Object.keys(conversions[current]);\n\n\t\tfor (let len = adjacents.length, i = 0; i < len; i++) {\n\t\t\tconst adjacent = adjacents[i];\n\t\t\tconst node = graph[adjacent];\n\n\t\t\tif (node.distance === -1) {\n\t\t\t\tnode.distance = graph[current].distance + 1;\n\t\t\t\tnode.parent = current;\n\t\t\t\tqueue.unshift(adjacent);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn graph;\n}\n\nfunction link(from, to) {\n\treturn function (args) {\n\t\treturn to(from(args));\n\t};\n}\n\nfunction wrapConversion(toModel, graph) {\n\tconst path = [graph[toModel].parent, toModel];\n\tlet fn = conversions[graph[toModel].parent][toModel];\n\n\tlet cur = graph[toModel].parent;\n\twhile (graph[cur].parent) {\n\t\tpath.unshift(graph[cur].parent);\n\t\tfn = link(conversions[graph[cur].parent][cur], fn);\n\t\tcur = graph[cur].parent;\n\t}\n\n\tfn.conversion = path;\n\treturn fn;\n}\n\nmodule.exports = function (fromModel) {\n\tconst graph = deriveBFS(fromModel);\n\tconst conversion = {};\n\n\tconst models = Object.keys(graph);\n\tfor (let len = models.length, i = 0; i < len; i++) {\n\t\tconst toModel = models[i];\n\t\tconst node = graph[toModel];\n\n\t\tif (node.parent === null) {\n\t\t\t// No possible conversion, or this node is the source model.\n\t\t\tcontinue;\n\t\t}\n\n\t\tconversion[toModel] = wrapConversion(toModel, graph);\n\t}\n\n\treturn conversion;\n};\n\n","'use strict';\nconst os = require('os');\nconst tty = require('tty');\nconst hasFlag = require('has-flag');\n\nconst {env} = process;\n\nlet forceColor;\nif (hasFlag('no-color') ||\n\thasFlag('no-colors') ||\n\thasFlag('color=false') ||\n\thasFlag('color=never')) {\n\tforceColor = 0;\n} else if (hasFlag('color') ||\n\thasFlag('colors') ||\n\thasFlag('color=true') ||\n\thasFlag('color=always')) {\n\tforceColor = 1;\n}\n\nif ('FORCE_COLOR' in env) {\n\tif (env.FORCE_COLOR === 'true') {\n\t\tforceColor = 1;\n\t} else if (env.FORCE_COLOR === 'false') {\n\t\tforceColor = 0;\n\t} else {\n\t\tforceColor = env.FORCE_COLOR.length === 0 ? 1 : Math.min(parseInt(env.FORCE_COLOR, 10), 3);\n\t}\n}\n\nfunction translateLevel(level) {\n\tif (level === 0) {\n\t\treturn false;\n\t}\n\n\treturn {\n\t\tlevel,\n\t\thasBasic: true,\n\t\thas256: level >= 2,\n\t\thas16m: level >= 3\n\t};\n}\n\nfunction supportsColor(haveStream, streamIsTTY) {\n\tif (forceColor === 0) {\n\t\treturn 0;\n\t}\n\n\tif (hasFlag('color=16m') ||\n\t\thasFlag('color=full') ||\n\t\thasFlag('color=truecolor')) {\n\t\treturn 3;\n\t}\n\n\tif (hasFlag('color=256')) {\n\t\treturn 2;\n\t}\n\n\tif (haveStream && !streamIsTTY && forceColor === undefined) {\n\t\treturn 0;\n\t}\n\n\tconst min = forceColor || 0;\n\n\tif (env.TERM === 'dumb') {\n\t\treturn min;\n\t}\n\n\tif (process.platform === 'win32') {\n\t\t// Windows 10 build 10586 is the first Windows release that supports 256 colors.\n\t\t// Windows 10 build 14931 is the first release that supports 16m/TrueColor.\n\t\tconst osRelease = os.release().split('.');\n\t\tif (\n\t\t\tNumber(osRelease[0]) >= 10 &&\n\t\t\tNumber(osRelease[2]) >= 10586\n\t\t) {\n\t\t\treturn Number(osRelease[2]) >= 14931 ? 3 : 2;\n\t\t}\n\n\t\treturn 1;\n\t}\n\n\tif ('CI' in env) {\n\t\tif (['TRAVIS', 'CIRCLECI', 'APPVEYOR', 'GITLAB_CI', 'GITHUB_ACTIONS', 'BUILDKITE'].some(sign => sign in env) || env.CI_NAME === 'codeship') {\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn min;\n\t}\n\n\tif ('TEAMCITY_VERSION' in env) {\n\t\treturn /^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.test(env.TEAMCITY_VERSION) ? 1 : 0;\n\t}\n\n\tif (env.COLORTERM === 'truecolor') {\n\t\treturn 3;\n\t}\n\n\tif ('TERM_PROGRAM' in env) {\n\t\tconst version = parseInt((env.TERM_PROGRAM_VERSION || '').split('.')[0], 10);\n\n\t\tswitch (env.TERM_PROGRAM) {\n\t\t\tcase 'iTerm.app':\n\t\t\t\treturn version >= 3 ? 3 : 2;\n\t\t\tcase 'Apple_Terminal':\n\t\t\t\treturn 2;\n\t\t\t// No default\n\t\t}\n\t}\n\n\tif (/-256(color)?$/i.test(env.TERM)) {\n\t\treturn 2;\n\t}\n\n\tif (/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)) {\n\t\treturn 1;\n\t}\n\n\tif ('COLORTERM' in env) {\n\t\treturn 1;\n\t}\n\n\treturn min;\n}\n\nfunction getSupportLevel(stream) {\n\tconst level = supportsColor(stream, stream && stream.isTTY);\n\treturn translateLevel(level);\n}\n\nmodule.exports = {\n\tsupportsColor: getSupportLevel,\n\tstdout: translateLevel(supportsColor(true, tty.isatty(1))),\n\tstderr: translateLevel(supportsColor(true, tty.isatty(2)))\n};\n","module.exports = require(\"tty\");","'use strict';\n\nmodule.exports = (flag, argv = process.argv) => {\n\tconst prefix = flag.startsWith('-') ? '' : (flag.length === 1 ? '-' : '--');\n\tconst position = argv.indexOf(prefix + flag);\n\tconst terminatorPosition = argv.indexOf('--');\n\treturn position !== -1 && (terminatorPosition === -1 || position < terminatorPosition);\n};\n","'use strict';\n\nconst stringReplaceAll = (string, substring, replacer) => {\n\tlet index = string.indexOf(substring);\n\tif (index === -1) {\n\t\treturn string;\n\t}\n\n\tconst substringLength = substring.length;\n\tlet endIndex = 0;\n\tlet returnValue = '';\n\tdo {\n\t\treturnValue += string.substr(endIndex, index - endIndex) + substring + replacer;\n\t\tendIndex = index + substringLength;\n\t\tindex = string.indexOf(substring, endIndex);\n\t} while (index !== -1);\n\n\treturnValue += string.substr(endIndex);\n\treturn returnValue;\n};\n\nconst stringEncaseCRLFWithFirstIndex = (string, prefix, postfix, index) => {\n\tlet endIndex = 0;\n\tlet returnValue = '';\n\tdo {\n\t\tconst gotCR = string[index - 1] === '\\r';\n\t\treturnValue += string.substr(endIndex, (gotCR ? index - 1 : index) - endIndex) + prefix + (gotCR ? '\\r\\n' : '\\n') + postfix;\n\t\tendIndex = index + 1;\n\t\tindex = string.indexOf('\\n', endIndex);\n\t} while (index !== -1);\n\n\treturnValue += string.substr(endIndex);\n\treturn returnValue;\n};\n\nmodule.exports = {\n\tstringReplaceAll,\n\tstringEncaseCRLFWithFirstIndex\n};\n","'use strict';\nconst TEMPLATE_REGEX = /(?:\\\\(u(?:[a-f\\d]{4}|\\{[a-f\\d]{1,6}\\})|x[a-f\\d]{2}|.))|(?:\\{(~)?(\\w+(?:\\([^)]*\\))?(?:\\.\\w+(?:\\([^)]*\\))?)*)(?:[ \\t]|(?=\\r?\\n)))|(\\})|((?:.|[\\r\\n\\f])+?)/gi;\nconst STYLE_REGEX = /(?:^|\\.)(\\w+)(?:\\(([^)]*)\\))?/g;\nconst STRING_REGEX = /^(['\"])((?:\\\\.|(?!\\1)[^\\\\])*)\\1$/;\nconst ESCAPE_REGEX = /\\\\(u(?:[a-f\\d]{4}|{[a-f\\d]{1,6}})|x[a-f\\d]{2}|.)|([^\\\\])/gi;\n\nconst ESCAPES = new Map([\n\t['n', '\\n'],\n\t['r', '\\r'],\n\t['t', '\\t'],\n\t['b', '\\b'],\n\t['f', '\\f'],\n\t['v', '\\v'],\n\t['0', '\\0'],\n\t['\\\\', '\\\\'],\n\t['e', '\\u001B'],\n\t['a', '\\u0007']\n]);\n\nfunction unescape(c) {\n\tconst u = c[0] === 'u';\n\tconst bracket = c[1] === '{';\n\n\tif ((u && !bracket && c.length === 5) || (c[0] === 'x' && c.length === 3)) {\n\t\treturn String.fromCharCode(parseInt(c.slice(1), 16));\n\t}\n\n\tif (u && bracket) {\n\t\treturn String.fromCodePoint(parseInt(c.slice(2, -1), 16));\n\t}\n\n\treturn ESCAPES.get(c) || c;\n}\n\nfunction parseArguments(name, arguments_) {\n\tconst results = [];\n\tconst chunks = arguments_.trim().split(/\\s*,\\s*/g);\n\tlet matches;\n\n\tfor (const chunk of chunks) {\n\t\tconst number = Number(chunk);\n\t\tif (!Number.isNaN(number)) {\n\t\t\tresults.push(number);\n\t\t} else if ((matches = chunk.match(STRING_REGEX))) {\n\t\t\tresults.push(matches[2].replace(ESCAPE_REGEX, (m, escape, character) => escape ? unescape(escape) : character));\n\t\t} else {\n\t\t\tthrow new Error(`Invalid Chalk template style argument: ${chunk} (in style '${name}')`);\n\t\t}\n\t}\n\n\treturn results;\n}\n\nfunction parseStyle(style) {\n\tSTYLE_REGEX.lastIndex = 0;\n\n\tconst results = [];\n\tlet matches;\n\n\twhile ((matches = STYLE_REGEX.exec(style)) !== null) {\n\t\tconst name = matches[1];\n\n\t\tif (matches[2]) {\n\t\t\tconst args = parseArguments(name, matches[2]);\n\t\t\tresults.push([name].concat(args));\n\t\t} else {\n\t\t\tresults.push([name]);\n\t\t}\n\t}\n\n\treturn results;\n}\n\nfunction buildStyle(chalk, styles) {\n\tconst enabled = {};\n\n\tfor (const layer of styles) {\n\t\tfor (const style of layer.styles) {\n\t\t\tenabled[style[0]] = layer.inverse ? null : style.slice(1);\n\t\t}\n\t}\n\n\tlet current = chalk;\n\tfor (const [styleName, styles] of Object.entries(enabled)) {\n\t\tif (!Array.isArray(styles)) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (!(styleName in current)) {\n\t\t\tthrow new Error(`Unknown Chalk style: ${styleName}`);\n\t\t}\n\n\t\tcurrent = styles.length > 0 ? current[styleName](...styles) : current[styleName];\n\t}\n\n\treturn current;\n}\n\nmodule.exports = (chalk, temporary) => {\n\tconst styles = [];\n\tconst chunks = [];\n\tlet chunk = [];\n\n\t// eslint-disable-next-line max-params\n\ttemporary.replace(TEMPLATE_REGEX, (m, escapeCharacter, inverse, style, close, character) => {\n\t\tif (escapeCharacter) {\n\t\t\tchunk.push(unescape(escapeCharacter));\n\t\t} else if (style) {\n\t\t\tconst string = chunk.join('');\n\t\t\tchunk = [];\n\t\t\tchunks.push(styles.length === 0 ? string : buildStyle(chalk, styles)(string));\n\t\t\tstyles.push({inverse, styles: parseStyle(style)});\n\t\t} else if (close) {\n\t\t\tif (styles.length === 0) {\n\t\t\t\tthrow new Error('Found extraneous } in Chalk template literal');\n\t\t\t}\n\n\t\t\tchunks.push(buildStyle(chalk, styles)(chunk.join('')));\n\t\t\tchunk = [];\n\t\t\tstyles.pop();\n\t\t} else {\n\t\t\tchunk.push(character);\n\t\t}\n\t});\n\n\tchunks.push(chunk.join(''));\n\n\tif (styles.length > 0) {\n\t\tconst errMessage = `Chalk template literal is missing ${styles.length} closing bracket${styles.length === 1 ? '' : 's'} (\\`}\\`)`;\n\t\tthrow new Error(errMessage);\n\t}\n\n\treturn chunks.join('');\n};\n","// @flow\n\n/*:: type PayoutDistributions = $ReadOnlyArray<[string, string]>;*/\nmodule.exports = function payoutDistributionToCsv(\n  payoutDistributions /*: PayoutDistributions*/\n) /*: string*/ {\n  let csvString = \"\";\n  for (const [payoutAddress, amount] of payoutDistributions) {\n    csvString += `${payoutAddress},${amount}\\n`;\n  }\n  return csvString;\n};\n","var constants = require('constants')\n\nvar origCwd = process.cwd\nvar cwd = null\n\nvar platform = process.env.GRACEFUL_FS_PLATFORM || process.platform\n\nprocess.cwd = function() {\n  if (!cwd)\n    cwd = origCwd.call(process)\n  return cwd\n}\ntry {\n  process.cwd()\n} catch (er) {}\n\n// This check is needed until node.js 12 is required\nif (typeof process.chdir === 'function') {\n  var chdir = process.chdir\n  process.chdir = function (d) {\n    cwd = null\n    chdir.call(process, d)\n  }\n  if (Object.setPrototypeOf) Object.setPrototypeOf(process.chdir, chdir)\n}\n\nmodule.exports = patch\n\nfunction patch (fs) {\n  // (re-)implement some things that are known busted or missing.\n\n  // lchmod, broken prior to 0.6.2\n  // back-port the fix here.\n  if (constants.hasOwnProperty('O_SYMLINK') &&\n      process.version.match(/^v0\\.6\\.[0-2]|^v0\\.5\\./)) {\n    patchLchmod(fs)\n  }\n\n  // lutimes implementation, or no-op\n  if (!fs.lutimes) {\n    patchLutimes(fs)\n  }\n\n  // https://github.com/isaacs/node-graceful-fs/issues/4\n  // Chown should not fail on einval or eperm if non-root.\n  // It should not fail on enosys ever, as this just indicates\n  // that a fs doesn't support the intended operation.\n\n  fs.chown = chownFix(fs.chown)\n  fs.fchown = chownFix(fs.fchown)\n  fs.lchown = chownFix(fs.lchown)\n\n  fs.chmod = chmodFix(fs.chmod)\n  fs.fchmod = chmodFix(fs.fchmod)\n  fs.lchmod = chmodFix(fs.lchmod)\n\n  fs.chownSync = chownFixSync(fs.chownSync)\n  fs.fchownSync = chownFixSync(fs.fchownSync)\n  fs.lchownSync = chownFixSync(fs.lchownSync)\n\n  fs.chmodSync = chmodFixSync(fs.chmodSync)\n  fs.fchmodSync = chmodFixSync(fs.fchmodSync)\n  fs.lchmodSync = chmodFixSync(fs.lchmodSync)\n\n  fs.stat = statFix(fs.stat)\n  fs.fstat = statFix(fs.fstat)\n  fs.lstat = statFix(fs.lstat)\n\n  fs.statSync = statFixSync(fs.statSync)\n  fs.fstatSync = statFixSync(fs.fstatSync)\n  fs.lstatSync = statFixSync(fs.lstatSync)\n\n  // if lchmod/lchown do not exist, then make them no-ops\n  if (!fs.lchmod) {\n    fs.lchmod = function (path, mode, cb) {\n      if (cb) process.nextTick(cb)\n    }\n    fs.lchmodSync = function () {}\n  }\n  if (!fs.lchown) {\n    fs.lchown = function (path, uid, gid, cb) {\n      if (cb) process.nextTick(cb)\n    }\n    fs.lchownSync = function () {}\n  }\n\n  // on Windows, A/V software can lock the directory, causing this\n  // to fail with an EACCES or EPERM if the directory contains newly\n  // created files.  Try again on failure, for up to 60 seconds.\n\n  // Set the timeout this long because some Windows Anti-Virus, such as Parity\n  // bit9, may lock files for up to a minute, causing npm package install\n  // failures. Also, take care to yield the scheduler. Windows scheduling gives\n  // CPU to a busy looping process, which can cause the program causing the lock\n  // contention to be starved of CPU by node, so the contention doesn't resolve.\n  if (platform === \"win32\") {\n    fs.rename = (function (fs$rename) { return function (from, to, cb) {\n      var start = Date.now()\n      var backoff = 0;\n      fs$rename(from, to, function CB (er) {\n        if (er\n            && (er.code === \"EACCES\" || er.code === \"EPERM\")\n            && Date.now() - start < 60000) {\n          setTimeout(function() {\n            fs.stat(to, function (stater, st) {\n              if (stater && stater.code === \"ENOENT\")\n                fs$rename(from, to, CB);\n              else\n                cb(er)\n            })\n          }, backoff)\n          if (backoff < 100)\n            backoff += 10;\n          return;\n        }\n        if (cb) cb(er)\n      })\n    }})(fs.rename)\n  }\n\n  // if read() returns EAGAIN, then just try it again.\n  fs.read = (function (fs$read) {\n    function read (fd, buffer, offset, length, position, callback_) {\n      var callback\n      if (callback_ && typeof callback_ === 'function') {\n        var eagCounter = 0\n        callback = function (er, _, __) {\n          if (er && er.code === 'EAGAIN' && eagCounter < 10) {\n            eagCounter ++\n            return fs$read.call(fs, fd, buffer, offset, length, position, callback)\n          }\n          callback_.apply(this, arguments)\n        }\n      }\n      return fs$read.call(fs, fd, buffer, offset, length, position, callback)\n    }\n\n    // This ensures `util.promisify` works as it does for native `fs.read`.\n    if (Object.setPrototypeOf) Object.setPrototypeOf(read, fs$read)\n    return read\n  })(fs.read)\n\n  fs.readSync = (function (fs$readSync) { return function (fd, buffer, offset, length, position) {\n    var eagCounter = 0\n    while (true) {\n      try {\n        return fs$readSync.call(fs, fd, buffer, offset, length, position)\n      } catch (er) {\n        if (er.code === 'EAGAIN' && eagCounter < 10) {\n          eagCounter ++\n          continue\n        }\n        throw er\n      }\n    }\n  }})(fs.readSync)\n\n  function patchLchmod (fs) {\n    fs.lchmod = function (path, mode, callback) {\n      fs.open( path\n             , constants.O_WRONLY | constants.O_SYMLINK\n             , mode\n             , function (err, fd) {\n        if (err) {\n          if (callback) callback(err)\n          return\n        }\n        // prefer to return the chmod error, if one occurs,\n        // but still try to close, and report closing errors if they occur.\n        fs.fchmod(fd, mode, function (err) {\n          fs.close(fd, function(err2) {\n            if (callback) callback(err || err2)\n          })\n        })\n      })\n    }\n\n    fs.lchmodSync = function (path, mode) {\n      var fd = fs.openSync(path, constants.O_WRONLY | constants.O_SYMLINK, mode)\n\n      // prefer to return the chmod error, if one occurs,\n      // but still try to close, and report closing errors if they occur.\n      var threw = true\n      var ret\n      try {\n        ret = fs.fchmodSync(fd, mode)\n        threw = false\n      } finally {\n        if (threw) {\n          try {\n            fs.closeSync(fd)\n          } catch (er) {}\n        } else {\n          fs.closeSync(fd)\n        }\n      }\n      return ret\n    }\n  }\n\n  function patchLutimes (fs) {\n    if (constants.hasOwnProperty(\"O_SYMLINK\")) {\n      fs.lutimes = function (path, at, mt, cb) {\n        fs.open(path, constants.O_SYMLINK, function (er, fd) {\n          if (er) {\n            if (cb) cb(er)\n            return\n          }\n          fs.futimes(fd, at, mt, function (er) {\n            fs.close(fd, function (er2) {\n              if (cb) cb(er || er2)\n            })\n          })\n        })\n      }\n\n      fs.lutimesSync = function (path, at, mt) {\n        var fd = fs.openSync(path, constants.O_SYMLINK)\n        var ret\n        var threw = true\n        try {\n          ret = fs.futimesSync(fd, at, mt)\n          threw = false\n        } finally {\n          if (threw) {\n            try {\n              fs.closeSync(fd)\n            } catch (er) {}\n          } else {\n            fs.closeSync(fd)\n          }\n        }\n        return ret\n      }\n\n    } else {\n      fs.lutimes = function (_a, _b, _c, cb) { if (cb) process.nextTick(cb) }\n      fs.lutimesSync = function () {}\n    }\n  }\n\n  function chmodFix (orig) {\n    if (!orig) return orig\n    return function (target, mode, cb) {\n      return orig.call(fs, target, mode, function (er) {\n        if (chownErOk(er)) er = null\n        if (cb) cb.apply(this, arguments)\n      })\n    }\n  }\n\n  function chmodFixSync (orig) {\n    if (!orig) return orig\n    return function (target, mode) {\n      try {\n        return orig.call(fs, target, mode)\n      } catch (er) {\n        if (!chownErOk(er)) throw er\n      }\n    }\n  }\n\n\n  function chownFix (orig) {\n    if (!orig) return orig\n    return function (target, uid, gid, cb) {\n      return orig.call(fs, target, uid, gid, function (er) {\n        if (chownErOk(er)) er = null\n        if (cb) cb.apply(this, arguments)\n      })\n    }\n  }\n\n  function chownFixSync (orig) {\n    if (!orig) return orig\n    return function (target, uid, gid) {\n      try {\n        return orig.call(fs, target, uid, gid)\n      } catch (er) {\n        if (!chownErOk(er)) throw er\n      }\n    }\n  }\n\n  function statFix (orig) {\n    if (!orig) return orig\n    // Older versions of Node erroneously returned signed integers for\n    // uid + gid.\n    return function (target, options, cb) {\n      if (typeof options === 'function') {\n        cb = options\n        options = null\n      }\n      function callback (er, stats) {\n        if (stats) {\n          if (stats.uid < 0) stats.uid += 0x100000000\n          if (stats.gid < 0) stats.gid += 0x100000000\n        }\n        if (cb) cb.apply(this, arguments)\n      }\n      return options ? orig.call(fs, target, options, callback)\n        : orig.call(fs, target, callback)\n    }\n  }\n\n  function statFixSync (orig) {\n    if (!orig) return orig\n    // Older versions of Node erroneously returned signed integers for\n    // uid + gid.\n    return function (target, options) {\n      var stats = options ? orig.call(fs, target, options)\n        : orig.call(fs, target)\n      if (stats.uid < 0) stats.uid += 0x100000000\n      if (stats.gid < 0) stats.gid += 0x100000000\n      return stats;\n    }\n  }\n\n  // ENOSYS means that the fs doesn't support the op. Just ignore\n  // that, because it doesn't matter.\n  //\n  // if there's no getuid, or if getuid() is something other\n  // than 0, and the error is EINVAL or EPERM, then just ignore\n  // it.\n  //\n  // This specific case is a silent failure in cp, install, tar,\n  // and most other unix tools that manage permissions.\n  //\n  // When running as root, or if other types of errors are\n  // encountered, then it's strict.\n  function chownErOk (er) {\n    if (!er)\n      return true\n\n    if (er.code === \"ENOSYS\")\n      return true\n\n    var nonroot = !process.getuid || process.getuid() !== 0\n    if (nonroot) {\n      if (er.code === \"EINVAL\" || er.code === \"EPERM\")\n        return true\n    }\n\n    return false\n  }\n}\n","module.exports = require(\"constants\");","var Stream = require('stream').Stream\n\nmodule.exports = legacy\n\nfunction legacy (fs) {\n  return {\n    ReadStream: ReadStream,\n    WriteStream: WriteStream\n  }\n\n  function ReadStream (path, options) {\n    if (!(this instanceof ReadStream)) return new ReadStream(path, options);\n\n    Stream.call(this);\n\n    var self = this;\n\n    this.path = path;\n    this.fd = null;\n    this.readable = true;\n    this.paused = false;\n\n    this.flags = 'r';\n    this.mode = 438; /*=0666*/\n    this.bufferSize = 64 * 1024;\n\n    options = options || {};\n\n    // Mixin options into this\n    var keys = Object.keys(options);\n    for (var index = 0, length = keys.length; index < length; index++) {\n      var key = keys[index];\n      this[key] = options[key];\n    }\n\n    if (this.encoding) this.setEncoding(this.encoding);\n\n    if (this.start !== undefined) {\n      if ('number' !== typeof this.start) {\n        throw TypeError('start must be a Number');\n      }\n      if (this.end === undefined) {\n        this.end = Infinity;\n      } else if ('number' !== typeof this.end) {\n        throw TypeError('end must be a Number');\n      }\n\n      if (this.start > this.end) {\n        throw new Error('start must be <= end');\n      }\n\n      this.pos = this.start;\n    }\n\n    if (this.fd !== null) {\n      process.nextTick(function() {\n        self._read();\n      });\n      return;\n    }\n\n    fs.open(this.path, this.flags, this.mode, function (err, fd) {\n      if (err) {\n        self.emit('error', err);\n        self.readable = false;\n        return;\n      }\n\n      self.fd = fd;\n      self.emit('open', fd);\n      self._read();\n    })\n  }\n\n  function WriteStream (path, options) {\n    if (!(this instanceof WriteStream)) return new WriteStream(path, options);\n\n    Stream.call(this);\n\n    this.path = path;\n    this.fd = null;\n    this.writable = true;\n\n    this.flags = 'w';\n    this.encoding = 'binary';\n    this.mode = 438; /*=0666*/\n    this.bytesWritten = 0;\n\n    options = options || {};\n\n    // Mixin options into this\n    var keys = Object.keys(options);\n    for (var index = 0, length = keys.length; index < length; index++) {\n      var key = keys[index];\n      this[key] = options[key];\n    }\n\n    if (this.start !== undefined) {\n      if ('number' !== typeof this.start) {\n        throw TypeError('start must be a Number');\n      }\n      if (this.start < 0) {\n        throw new Error('start must be >= zero');\n      }\n\n      this.pos = this.start;\n    }\n\n    this.busy = false;\n    this._queue = [];\n\n    if (this.fd === null) {\n      this._open = fs.open;\n      this._queue.push([this._open, this.path, this.flags, this.mode, undefined]);\n      this.flush();\n    }\n  }\n}\n","'use strict'\n\nmodule.exports = clone\n\nvar getPrototypeOf = Object.getPrototypeOf || function (obj) {\n  return obj.__proto__\n}\n\nfunction clone (obj) {\n  if (obj === null || typeof obj !== 'object')\n    return obj\n\n  if (obj instanceof Object)\n    var copy = { __proto__: getPrototypeOf(obj) }\n  else\n    var copy = Object.create(null)\n\n  Object.getOwnPropertyNames(obj).forEach(function (key) {\n    Object.defineProperty(copy, key, Object.getOwnPropertyDescriptor(obj, key))\n  })\n\n  return copy\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst mkdirsSync = require('../mkdirs').mkdirsSync\nconst utimesMillisSync = require('../util/utimes').utimesMillisSync\nconst stat = require('../util/stat')\n\nfunction copySync (src, dest, opts) {\n  if (typeof opts === 'function') {\n    opts = { filter: opts }\n  }\n\n  opts = opts || {}\n  opts.clobber = 'clobber' in opts ? !!opts.clobber : true // default to true for now\n  opts.overwrite = 'overwrite' in opts ? !!opts.overwrite : opts.clobber // overwrite falls back to clobber\n\n  // Warn about using preserveTimestamps on 32-bit node\n  if (opts.preserveTimestamps && process.arch === 'ia32') {\n    console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269`)\n  }\n\n  const { srcStat, destStat } = stat.checkPathsSync(src, dest, 'copy', opts)\n  stat.checkParentPathsSync(src, srcStat, dest, 'copy')\n  return handleFilterAndCopy(destStat, src, dest, opts)\n}\n\nfunction handleFilterAndCopy (destStat, src, dest, opts) {\n  if (opts.filter && !opts.filter(src, dest)) return\n  const destParent = path.dirname(dest)\n  if (!fs.existsSync(destParent)) mkdirsSync(destParent)\n  return getStats(destStat, src, dest, opts)\n}\n\nfunction startCopy (destStat, src, dest, opts) {\n  if (opts.filter && !opts.filter(src, dest)) return\n  return getStats(destStat, src, dest, opts)\n}\n\nfunction getStats (destStat, src, dest, opts) {\n  const statSync = opts.dereference ? fs.statSync : fs.lstatSync\n  const srcStat = statSync(src)\n\n  if (srcStat.isDirectory()) return onDir(srcStat, destStat, src, dest, opts)\n  else if (srcStat.isFile() ||\n           srcStat.isCharacterDevice() ||\n           srcStat.isBlockDevice()) return onFile(srcStat, destStat, src, dest, opts)\n  else if (srcStat.isSymbolicLink()) return onLink(destStat, src, dest, opts)\n  else if (srcStat.isSocket()) throw new Error(`Cannot copy a socket file: ${src}`)\n  else if (srcStat.isFIFO()) throw new Error(`Cannot copy a FIFO pipe: ${src}`)\n  throw new Error(`Unknown file: ${src}`)\n}\n\nfunction onFile (srcStat, destStat, src, dest, opts) {\n  if (!destStat) return copyFile(srcStat, src, dest, opts)\n  return mayCopyFile(srcStat, src, dest, opts)\n}\n\nfunction mayCopyFile (srcStat, src, dest, opts) {\n  if (opts.overwrite) {\n    fs.unlinkSync(dest)\n    return copyFile(srcStat, src, dest, opts)\n  } else if (opts.errorOnExist) {\n    throw new Error(`'${dest}' already exists`)\n  }\n}\n\nfunction copyFile (srcStat, src, dest, opts) {\n  fs.copyFileSync(src, dest)\n  if (opts.preserveTimestamps) handleTimestamps(srcStat.mode, src, dest)\n  return setDestMode(dest, srcStat.mode)\n}\n\nfunction handleTimestamps (srcMode, src, dest) {\n  // Make sure the file is writable before setting the timestamp\n  // otherwise open fails with EPERM when invoked with 'r+'\n  // (through utimes call)\n  if (fileIsNotWritable(srcMode)) makeFileWritable(dest, srcMode)\n  return setDestTimestamps(src, dest)\n}\n\nfunction fileIsNotWritable (srcMode) {\n  return (srcMode & 0o200) === 0\n}\n\nfunction makeFileWritable (dest, srcMode) {\n  return setDestMode(dest, srcMode | 0o200)\n}\n\nfunction setDestMode (dest, srcMode) {\n  return fs.chmodSync(dest, srcMode)\n}\n\nfunction setDestTimestamps (src, dest) {\n  // The initial srcStat.atime cannot be trusted\n  // because it is modified by the read(2) system call\n  // (See https://nodejs.org/api/fs.html#fs_stat_time_values)\n  const updatedSrcStat = fs.statSync(src)\n  return utimesMillisSync(dest, updatedSrcStat.atime, updatedSrcStat.mtime)\n}\n\nfunction onDir (srcStat, destStat, src, dest, opts) {\n  if (!destStat) return mkDirAndCopy(srcStat.mode, src, dest, opts)\n  return copyDir(src, dest, opts)\n}\n\nfunction mkDirAndCopy (srcMode, src, dest, opts) {\n  fs.mkdirSync(dest)\n  copyDir(src, dest, opts)\n  return setDestMode(dest, srcMode)\n}\n\nfunction copyDir (src, dest, opts) {\n  fs.readdirSync(src).forEach(item => copyDirItem(item, src, dest, opts))\n}\n\nfunction copyDirItem (item, src, dest, opts) {\n  const srcItem = path.join(src, item)\n  const destItem = path.join(dest, item)\n  const { destStat } = stat.checkPathsSync(srcItem, destItem, 'copy', opts)\n  return startCopy(destStat, srcItem, destItem, opts)\n}\n\nfunction onLink (destStat, src, dest, opts) {\n  let resolvedSrc = fs.readlinkSync(src)\n  if (opts.dereference) {\n    resolvedSrc = path.resolve(process.cwd(), resolvedSrc)\n  }\n\n  if (!destStat) {\n    return fs.symlinkSync(resolvedSrc, dest)\n  } else {\n    let resolvedDest\n    try {\n      resolvedDest = fs.readlinkSync(dest)\n    } catch (err) {\n      // dest exists and is a regular file or directory,\n      // Windows may throw UNKNOWN error. If dest already exists,\n      // fs throws error anyway, so no need to guard against it here.\n      if (err.code === 'EINVAL' || err.code === 'UNKNOWN') return fs.symlinkSync(resolvedSrc, dest)\n      throw err\n    }\n    if (opts.dereference) {\n      resolvedDest = path.resolve(process.cwd(), resolvedDest)\n    }\n    if (stat.isSrcSubdir(resolvedSrc, resolvedDest)) {\n      throw new Error(`Cannot copy '${resolvedSrc}' to a subdirectory of itself, '${resolvedDest}'.`)\n    }\n\n    // prevent copy if src is a subdir of dest since unlinking\n    // dest in this case would result in removing src contents\n    // and therefore a broken symlink would be created.\n    if (fs.statSync(dest).isDirectory() && stat.isSrcSubdir(resolvedDest, resolvedSrc)) {\n      throw new Error(`Cannot overwrite '${resolvedDest}' with '${resolvedSrc}'.`)\n    }\n    return copyLink(resolvedSrc, dest)\n  }\n}\n\nfunction copyLink (resolvedSrc, dest) {\n  fs.unlinkSync(dest)\n  return fs.symlinkSync(resolvedSrc, dest)\n}\n\nmodule.exports = copySync\n","'use strict'\nconst fs = require('../fs')\nconst { checkPath } = require('./utils')\n\nconst getMode = options => {\n  const defaults = { mode: 0o777 }\n  if (typeof options === 'number') return options\n  return ({ ...defaults, ...options }).mode\n}\n\nmodule.exports.makeDir = async (dir, options) => {\n  checkPath(dir)\n\n  return fs.mkdir(dir, {\n    mode: getMode(options),\n    recursive: true\n  })\n}\n\nmodule.exports.makeDirSync = (dir, options) => {\n  checkPath(dir)\n\n  return fs.mkdirSync(dir, {\n    mode: getMode(options),\n    recursive: true\n  })\n}\n","// Adapted from https://github.com/sindresorhus/make-dir\n// Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)\n// Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n'use strict'\nconst path = require('path')\n\n// https://github.com/nodejs/node/issues/8987\n// https://github.com/libuv/libuv/pull/1088\nmodule.exports.checkPath = function checkPath (pth) {\n  if (process.platform === 'win32') {\n    const pathHasInvalidWinCharacters = /[<>:\"|?*]/.test(pth.replace(path.parse(pth).root, ''))\n\n    if (pathHasInvalidWinCharacters) {\n      const error = new Error(`Path contains invalid characters: ${pth}`)\n      error.code = 'EINVAL'\n      throw error\n    }\n  }\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst mkdirs = require('../mkdirs').mkdirs\nconst pathExists = require('../path-exists').pathExists\nconst utimesMillis = require('../util/utimes').utimesMillis\nconst stat = require('../util/stat')\n\nfunction copy (src, dest, opts, cb) {\n  if (typeof opts === 'function' && !cb) {\n    cb = opts\n    opts = {}\n  } else if (typeof opts === 'function') {\n    opts = { filter: opts }\n  }\n\n  cb = cb || function () {}\n  opts = opts || {}\n\n  opts.clobber = 'clobber' in opts ? !!opts.clobber : true // default to true for now\n  opts.overwrite = 'overwrite' in opts ? !!opts.overwrite : opts.clobber // overwrite falls back to clobber\n\n  // Warn about using preserveTimestamps on 32-bit node\n  if (opts.preserveTimestamps && process.arch === 'ia32') {\n    console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269`)\n  }\n\n  stat.checkPaths(src, dest, 'copy', opts, (err, stats) => {\n    if (err) return cb(err)\n    const { srcStat, destStat } = stats\n    stat.checkParentPaths(src, srcStat, dest, 'copy', err => {\n      if (err) return cb(err)\n      if (opts.filter) return handleFilter(checkParentDir, destStat, src, dest, opts, cb)\n      return checkParentDir(destStat, src, dest, opts, cb)\n    })\n  })\n}\n\nfunction checkParentDir (destStat, src, dest, opts, cb) {\n  const destParent = path.dirname(dest)\n  pathExists(destParent, (err, dirExists) => {\n    if (err) return cb(err)\n    if (dirExists) return getStats(destStat, src, dest, opts, cb)\n    mkdirs(destParent, err => {\n      if (err) return cb(err)\n      return getStats(destStat, src, dest, opts, cb)\n    })\n  })\n}\n\nfunction handleFilter (onInclude, destStat, src, dest, opts, cb) {\n  Promise.resolve(opts.filter(src, dest)).then(include => {\n    if (include) return onInclude(destStat, src, dest, opts, cb)\n    return cb()\n  }, error => cb(error))\n}\n\nfunction startCopy (destStat, src, dest, opts, cb) {\n  if (opts.filter) return handleFilter(getStats, destStat, src, dest, opts, cb)\n  return getStats(destStat, src, dest, opts, cb)\n}\n\nfunction getStats (destStat, src, dest, opts, cb) {\n  const stat = opts.dereference ? fs.stat : fs.lstat\n  stat(src, (err, srcStat) => {\n    if (err) return cb(err)\n\n    if (srcStat.isDirectory()) return onDir(srcStat, destStat, src, dest, opts, cb)\n    else if (srcStat.isFile() ||\n             srcStat.isCharacterDevice() ||\n             srcStat.isBlockDevice()) return onFile(srcStat, destStat, src, dest, opts, cb)\n    else if (srcStat.isSymbolicLink()) return onLink(destStat, src, dest, opts, cb)\n    else if (srcStat.isSocket()) return cb(new Error(`Cannot copy a socket file: ${src}`))\n    else if (srcStat.isFIFO()) return cb(new Error(`Cannot copy a FIFO pipe: ${src}`))\n    return cb(new Error(`Unknown file: ${src}`))\n  })\n}\n\nfunction onFile (srcStat, destStat, src, dest, opts, cb) {\n  if (!destStat) return copyFile(srcStat, src, dest, opts, cb)\n  return mayCopyFile(srcStat, src, dest, opts, cb)\n}\n\nfunction mayCopyFile (srcStat, src, dest, opts, cb) {\n  if (opts.overwrite) {\n    fs.unlink(dest, err => {\n      if (err) return cb(err)\n      return copyFile(srcStat, src, dest, opts, cb)\n    })\n  } else if (opts.errorOnExist) {\n    return cb(new Error(`'${dest}' already exists`))\n  } else return cb()\n}\n\nfunction copyFile (srcStat, src, dest, opts, cb) {\n  fs.copyFile(src, dest, err => {\n    if (err) return cb(err)\n    if (opts.preserveTimestamps) return handleTimestampsAndMode(srcStat.mode, src, dest, cb)\n    return setDestMode(dest, srcStat.mode, cb)\n  })\n}\n\nfunction handleTimestampsAndMode (srcMode, src, dest, cb) {\n  // Make sure the file is writable before setting the timestamp\n  // otherwise open fails with EPERM when invoked with 'r+'\n  // (through utimes call)\n  if (fileIsNotWritable(srcMode)) {\n    return makeFileWritable(dest, srcMode, err => {\n      if (err) return cb(err)\n      return setDestTimestampsAndMode(srcMode, src, dest, cb)\n    })\n  }\n  return setDestTimestampsAndMode(srcMode, src, dest, cb)\n}\n\nfunction fileIsNotWritable (srcMode) {\n  return (srcMode & 0o200) === 0\n}\n\nfunction makeFileWritable (dest, srcMode, cb) {\n  return setDestMode(dest, srcMode | 0o200, cb)\n}\n\nfunction setDestTimestampsAndMode (srcMode, src, dest, cb) {\n  setDestTimestamps(src, dest, err => {\n    if (err) return cb(err)\n    return setDestMode(dest, srcMode, cb)\n  })\n}\n\nfunction setDestMode (dest, srcMode, cb) {\n  return fs.chmod(dest, srcMode, cb)\n}\n\nfunction setDestTimestamps (src, dest, cb) {\n  // The initial srcStat.atime cannot be trusted\n  // because it is modified by the read(2) system call\n  // (See https://nodejs.org/api/fs.html#fs_stat_time_values)\n  fs.stat(src, (err, updatedSrcStat) => {\n    if (err) return cb(err)\n    return utimesMillis(dest, updatedSrcStat.atime, updatedSrcStat.mtime, cb)\n  })\n}\n\nfunction onDir (srcStat, destStat, src, dest, opts, cb) {\n  if (!destStat) return mkDirAndCopy(srcStat.mode, src, dest, opts, cb)\n  return copyDir(src, dest, opts, cb)\n}\n\nfunction mkDirAndCopy (srcMode, src, dest, opts, cb) {\n  fs.mkdir(dest, err => {\n    if (err) return cb(err)\n    copyDir(src, dest, opts, err => {\n      if (err) return cb(err)\n      return setDestMode(dest, srcMode, cb)\n    })\n  })\n}\n\nfunction copyDir (src, dest, opts, cb) {\n  fs.readdir(src, (err, items) => {\n    if (err) return cb(err)\n    return copyDirItems(items, src, dest, opts, cb)\n  })\n}\n\nfunction copyDirItems (items, src, dest, opts, cb) {\n  const item = items.pop()\n  if (!item) return cb()\n  return copyDirItem(items, item, src, dest, opts, cb)\n}\n\nfunction copyDirItem (items, item, src, dest, opts, cb) {\n  const srcItem = path.join(src, item)\n  const destItem = path.join(dest, item)\n  stat.checkPaths(srcItem, destItem, 'copy', opts, (err, stats) => {\n    if (err) return cb(err)\n    const { destStat } = stats\n    startCopy(destStat, srcItem, destItem, opts, err => {\n      if (err) return cb(err)\n      return copyDirItems(items, src, dest, opts, cb)\n    })\n  })\n}\n\nfunction onLink (destStat, src, dest, opts, cb) {\n  fs.readlink(src, (err, resolvedSrc) => {\n    if (err) return cb(err)\n    if (opts.dereference) {\n      resolvedSrc = path.resolve(process.cwd(), resolvedSrc)\n    }\n\n    if (!destStat) {\n      return fs.symlink(resolvedSrc, dest, cb)\n    } else {\n      fs.readlink(dest, (err, resolvedDest) => {\n        if (err) {\n          // dest exists and is a regular file or directory,\n          // Windows may throw UNKNOWN error. If dest already exists,\n          // fs throws error anyway, so no need to guard against it here.\n          if (err.code === 'EINVAL' || err.code === 'UNKNOWN') return fs.symlink(resolvedSrc, dest, cb)\n          return cb(err)\n        }\n        if (opts.dereference) {\n          resolvedDest = path.resolve(process.cwd(), resolvedDest)\n        }\n        if (stat.isSrcSubdir(resolvedSrc, resolvedDest)) {\n          return cb(new Error(`Cannot copy '${resolvedSrc}' to a subdirectory of itself, '${resolvedDest}'.`))\n        }\n\n        // do not copy if src is a subdir of dest since unlinking\n        // dest in this case would result in removing src contents\n        // and therefore a broken symlink would be created.\n        if (destStat.isDirectory() && stat.isSrcSubdir(resolvedDest, resolvedSrc)) {\n          return cb(new Error(`Cannot overwrite '${resolvedDest}' with '${resolvedSrc}'.`))\n        }\n        return copyLink(resolvedSrc, dest, cb)\n      })\n    }\n  })\n}\n\nfunction copyLink (resolvedSrc, dest, cb) {\n  fs.unlink(dest, err => {\n    if (err) return cb(err)\n    return fs.symlink(resolvedSrc, dest, cb)\n  })\n}\n\nmodule.exports = copy\n","'use strict'\n\nconst u = require('universalify').fromPromise\nconst fs = require('../fs')\nconst path = require('path')\nconst mkdir = require('../mkdirs')\nconst remove = require('../remove')\n\nconst emptyDir = u(async function emptyDir (dir) {\n  let items\n  try {\n    items = await fs.readdir(dir)\n  } catch {\n    return mkdir.mkdirs(dir)\n  }\n\n  return Promise.all(items.map(item => remove.remove(path.join(dir, item))))\n})\n\nfunction emptyDirSync (dir) {\n  let items\n  try {\n    items = fs.readdirSync(dir)\n  } catch {\n    return mkdir.mkdirsSync(dir)\n  }\n\n  items.forEach(item => {\n    item = path.join(dir, item)\n    remove.removeSync(item)\n  })\n}\n\nmodule.exports = {\n  emptyDirSync,\n  emptydirSync: emptyDirSync,\n  emptyDir,\n  emptydir: emptyDir\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst assert = require('assert')\n\nconst isWindows = (process.platform === 'win32')\n\nfunction defaults (options) {\n  const methods = [\n    'unlink',\n    'chmod',\n    'stat',\n    'lstat',\n    'rmdir',\n    'readdir'\n  ]\n  methods.forEach(m => {\n    options[m] = options[m] || fs[m]\n    m = m + 'Sync'\n    options[m] = options[m] || fs[m]\n  })\n\n  options.maxBusyTries = options.maxBusyTries || 3\n}\n\nfunction rimraf (p, options, cb) {\n  let busyTries = 0\n\n  if (typeof options === 'function') {\n    cb = options\n    options = {}\n  }\n\n  assert(p, 'rimraf: missing path')\n  assert.strictEqual(typeof p, 'string', 'rimraf: path should be a string')\n  assert.strictEqual(typeof cb, 'function', 'rimraf: callback function required')\n  assert(options, 'rimraf: invalid options argument provided')\n  assert.strictEqual(typeof options, 'object', 'rimraf: options should be object')\n\n  defaults(options)\n\n  rimraf_(p, options, function CB (er) {\n    if (er) {\n      if ((er.code === 'EBUSY' || er.code === 'ENOTEMPTY' || er.code === 'EPERM') &&\n          busyTries < options.maxBusyTries) {\n        busyTries++\n        const time = busyTries * 100\n        // try again, with the same exact callback as this one.\n        return setTimeout(() => rimraf_(p, options, CB), time)\n      }\n\n      // already gone\n      if (er.code === 'ENOENT') er = null\n    }\n\n    cb(er)\n  })\n}\n\n// Two possible strategies.\n// 1. Assume it's a file.  unlink it, then do the dir stuff on EPERM or EISDIR\n// 2. Assume it's a directory.  readdir, then do the file stuff on ENOTDIR\n//\n// Both result in an extra syscall when you guess wrong.  However, there\n// are likely far more normal files in the world than directories.  This\n// is based on the assumption that a the average number of files per\n// directory is >= 1.\n//\n// If anyone ever complains about this, then I guess the strategy could\n// be made configurable somehow.  But until then, YAGNI.\nfunction rimraf_ (p, options, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  // sunos lets the root user unlink directories, which is... weird.\n  // so we have to lstat here and make sure it's not a dir.\n  options.lstat(p, (er, st) => {\n    if (er && er.code === 'ENOENT') {\n      return cb(null)\n    }\n\n    // Windows can EPERM on stat.  Life is suffering.\n    if (er && er.code === 'EPERM' && isWindows) {\n      return fixWinEPERM(p, options, er, cb)\n    }\n\n    if (st && st.isDirectory()) {\n      return rmdir(p, options, er, cb)\n    }\n\n    options.unlink(p, er => {\n      if (er) {\n        if (er.code === 'ENOENT') {\n          return cb(null)\n        }\n        if (er.code === 'EPERM') {\n          return (isWindows)\n            ? fixWinEPERM(p, options, er, cb)\n            : rmdir(p, options, er, cb)\n        }\n        if (er.code === 'EISDIR') {\n          return rmdir(p, options, er, cb)\n        }\n      }\n      return cb(er)\n    })\n  })\n}\n\nfunction fixWinEPERM (p, options, er, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  options.chmod(p, 0o666, er2 => {\n    if (er2) {\n      cb(er2.code === 'ENOENT' ? null : er)\n    } else {\n      options.stat(p, (er3, stats) => {\n        if (er3) {\n          cb(er3.code === 'ENOENT' ? null : er)\n        } else if (stats.isDirectory()) {\n          rmdir(p, options, er, cb)\n        } else {\n          options.unlink(p, cb)\n        }\n      })\n    }\n  })\n}\n\nfunction fixWinEPERMSync (p, options, er) {\n  let stats\n\n  assert(p)\n  assert(options)\n\n  try {\n    options.chmodSync(p, 0o666)\n  } catch (er2) {\n    if (er2.code === 'ENOENT') {\n      return\n    } else {\n      throw er\n    }\n  }\n\n  try {\n    stats = options.statSync(p)\n  } catch (er3) {\n    if (er3.code === 'ENOENT') {\n      return\n    } else {\n      throw er\n    }\n  }\n\n  if (stats.isDirectory()) {\n    rmdirSync(p, options, er)\n  } else {\n    options.unlinkSync(p)\n  }\n}\n\nfunction rmdir (p, options, originalEr, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  // try to rmdir first, and only readdir on ENOTEMPTY or EEXIST (SunOS)\n  // if we guessed wrong, and it's not a directory, then\n  // raise the original error.\n  options.rmdir(p, er => {\n    if (er && (er.code === 'ENOTEMPTY' || er.code === 'EEXIST' || er.code === 'EPERM')) {\n      rmkids(p, options, cb)\n    } else if (er && er.code === 'ENOTDIR') {\n      cb(originalEr)\n    } else {\n      cb(er)\n    }\n  })\n}\n\nfunction rmkids (p, options, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  options.readdir(p, (er, files) => {\n    if (er) return cb(er)\n\n    let n = files.length\n    let errState\n\n    if (n === 0) return options.rmdir(p, cb)\n\n    files.forEach(f => {\n      rimraf(path.join(p, f), options, er => {\n        if (errState) {\n          return\n        }\n        if (er) return cb(errState = er)\n        if (--n === 0) {\n          options.rmdir(p, cb)\n        }\n      })\n    })\n  })\n}\n\n// this looks simpler, and is strictly *faster*, but will\n// tie up the JavaScript thread and fail on excessively\n// deep directory trees.\nfunction rimrafSync (p, options) {\n  let st\n\n  options = options || {}\n  defaults(options)\n\n  assert(p, 'rimraf: missing path')\n  assert.strictEqual(typeof p, 'string', 'rimraf: path should be a string')\n  assert(options, 'rimraf: missing options')\n  assert.strictEqual(typeof options, 'object', 'rimraf: options should be object')\n\n  try {\n    st = options.lstatSync(p)\n  } catch (er) {\n    if (er.code === 'ENOENT') {\n      return\n    }\n\n    // Windows can EPERM on stat.  Life is suffering.\n    if (er.code === 'EPERM' && isWindows) {\n      fixWinEPERMSync(p, options, er)\n    }\n  }\n\n  try {\n    // sunos lets the root user unlink directories, which is... weird.\n    if (st && st.isDirectory()) {\n      rmdirSync(p, options, null)\n    } else {\n      options.unlinkSync(p)\n    }\n  } catch (er) {\n    if (er.code === 'ENOENT') {\n      return\n    } else if (er.code === 'EPERM') {\n      return isWindows ? fixWinEPERMSync(p, options, er) : rmdirSync(p, options, er)\n    } else if (er.code !== 'EISDIR') {\n      throw er\n    }\n    rmdirSync(p, options, er)\n  }\n}\n\nfunction rmdirSync (p, options, originalEr) {\n  assert(p)\n  assert(options)\n\n  try {\n    options.rmdirSync(p)\n  } catch (er) {\n    if (er.code === 'ENOTDIR') {\n      throw originalEr\n    } else if (er.code === 'ENOTEMPTY' || er.code === 'EEXIST' || er.code === 'EPERM') {\n      rmkidsSync(p, options)\n    } else if (er.code !== 'ENOENT') {\n      throw er\n    }\n  }\n}\n\nfunction rmkidsSync (p, options) {\n  assert(p)\n  assert(options)\n  options.readdirSync(p).forEach(f => rimrafSync(path.join(p, f), options))\n\n  if (isWindows) {\n    // We only end up here once we got ENOTEMPTY at least once, and\n    // at this point, we are guaranteed to have removed all the kids.\n    // So, we know that it won't be ENOENT or ENOTDIR or anything else.\n    // try really hard to delete stuff on windows, because it has a\n    // PROFOUNDLY annoying habit of not closing handles promptly when\n    // files are deleted, resulting in spurious ENOTEMPTY errors.\n    const startTime = Date.now()\n    do {\n      try {\n        const ret = options.rmdirSync(p, options)\n        return ret\n      } catch {}\n    } while (Date.now() - startTime < 500) // give up after 500ms\n  } else {\n    const ret = options.rmdirSync(p, options)\n    return ret\n  }\n}\n\nmodule.exports = rimraf\nrimraf.sync = rimrafSync\n","'use strict'\n\nconst file = require('./file')\nconst link = require('./link')\nconst symlink = require('./symlink')\n\nmodule.exports = {\n  // file\n  createFile: file.createFile,\n  createFileSync: file.createFileSync,\n  ensureFile: file.createFile,\n  ensureFileSync: file.createFileSync,\n  // link\n  createLink: link.createLink,\n  createLinkSync: link.createLinkSync,\n  ensureLink: link.createLink,\n  ensureLinkSync: link.createLinkSync,\n  // symlink\n  createSymlink: symlink.createSymlink,\n  createSymlinkSync: symlink.createSymlinkSync,\n  ensureSymlink: symlink.createSymlink,\n  ensureSymlinkSync: symlink.createSymlinkSync\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst path = require('path')\nconst fs = require('graceful-fs')\nconst mkdir = require('../mkdirs')\n\nfunction createFile (file, callback) {\n  function makeFile () {\n    fs.writeFile(file, '', err => {\n      if (err) return callback(err)\n      callback()\n    })\n  }\n\n  fs.stat(file, (err, stats) => { // eslint-disable-line handle-callback-err\n    if (!err && stats.isFile()) return callback()\n    const dir = path.dirname(file)\n    fs.stat(dir, (err, stats) => {\n      if (err) {\n        // if the directory doesn't exist, make it\n        if (err.code === 'ENOENT') {\n          return mkdir.mkdirs(dir, err => {\n            if (err) return callback(err)\n            makeFile()\n          })\n        }\n        return callback(err)\n      }\n\n      if (stats.isDirectory()) makeFile()\n      else {\n        // parent is not a directory\n        // This is just to cause an internal ENOTDIR error to be thrown\n        fs.readdir(dir, err => {\n          if (err) return callback(err)\n        })\n      }\n    })\n  })\n}\n\nfunction createFileSync (file) {\n  let stats\n  try {\n    stats = fs.statSync(file)\n  } catch {}\n  if (stats && stats.isFile()) return\n\n  const dir = path.dirname(file)\n  try {\n    if (!fs.statSync(dir).isDirectory()) {\n      // parent is not a directory\n      // This is just to cause an internal ENOTDIR error to be thrown\n      fs.readdirSync(dir)\n    }\n  } catch (err) {\n    // If the stat call above failed because the directory doesn't exist, create it\n    if (err && err.code === 'ENOENT') mkdir.mkdirsSync(dir)\n    else throw err\n  }\n\n  fs.writeFileSync(file, '')\n}\n\nmodule.exports = {\n  createFile: u(createFile),\n  createFileSync\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst path = require('path')\nconst fs = require('graceful-fs')\nconst mkdir = require('../mkdirs')\nconst pathExists = require('../path-exists').pathExists\nconst { areIdentical } = require('../util/stat')\n\nfunction createLink (srcpath, dstpath, callback) {\n  function makeLink (srcpath, dstpath) {\n    fs.link(srcpath, dstpath, err => {\n      if (err) return callback(err)\n      callback(null)\n    })\n  }\n\n  fs.lstat(dstpath, (_, dstStat) => {\n    fs.lstat(srcpath, (err, srcStat) => {\n      if (err) {\n        err.message = err.message.replace('lstat', 'ensureLink')\n        return callback(err)\n      }\n      if (dstStat && areIdentical(srcStat, dstStat)) return callback(null)\n\n      const dir = path.dirname(dstpath)\n      pathExists(dir, (err, dirExists) => {\n        if (err) return callback(err)\n        if (dirExists) return makeLink(srcpath, dstpath)\n        mkdir.mkdirs(dir, err => {\n          if (err) return callback(err)\n          makeLink(srcpath, dstpath)\n        })\n      })\n    })\n  })\n}\n\nfunction createLinkSync (srcpath, dstpath) {\n  let dstStat\n  try {\n    dstStat = fs.lstatSync(dstpath)\n  } catch {}\n\n  try {\n    const srcStat = fs.lstatSync(srcpath)\n    if (dstStat && areIdentical(srcStat, dstStat)) return\n  } catch (err) {\n    err.message = err.message.replace('lstat', 'ensureLink')\n    throw err\n  }\n\n  const dir = path.dirname(dstpath)\n  const dirExists = fs.existsSync(dir)\n  if (dirExists) return fs.linkSync(srcpath, dstpath)\n  mkdir.mkdirsSync(dir)\n\n  return fs.linkSync(srcpath, dstpath)\n}\n\nmodule.exports = {\n  createLink: u(createLink),\n  createLinkSync\n}\n","'use strict'\n\nconst u = require('universalify').fromCallback\nconst path = require('path')\nconst fs = require('../fs')\nconst _mkdirs = require('../mkdirs')\nconst mkdirs = _mkdirs.mkdirs\nconst mkdirsSync = _mkdirs.mkdirsSync\n\nconst _symlinkPaths = require('./symlink-paths')\nconst symlinkPaths = _symlinkPaths.symlinkPaths\nconst symlinkPathsSync = _symlinkPaths.symlinkPathsSync\n\nconst _symlinkType = require('./symlink-type')\nconst symlinkType = _symlinkType.symlinkType\nconst symlinkTypeSync = _symlinkType.symlinkTypeSync\n\nconst pathExists = require('../path-exists').pathExists\n\nconst { areIdentical } = require('../util/stat')\n\nfunction createSymlink (srcpath, dstpath, type, callback) {\n  callback = (typeof type === 'function') ? type : callback\n  type = (typeof type === 'function') ? false : type\n\n  fs.lstat(dstpath, (err, stats) => {\n    if (!err && stats.isSymbolicLink()) {\n      Promise.all([\n        fs.stat(srcpath),\n        fs.stat(dstpath)\n      ]).then(([srcStat, dstStat]) => {\n        if (areIdentical(srcStat, dstStat)) return callback(null)\n        _createSymlink(srcpath, dstpath, type, callback)\n      })\n    } else _createSymlink(srcpath, dstpath, type, callback)\n  })\n}\n\nfunction _createSymlink (srcpath, dstpath, type, callback) {\n  symlinkPaths(srcpath, dstpath, (err, relative) => {\n    if (err) return callback(err)\n    srcpath = relative.toDst\n    symlinkType(relative.toCwd, type, (err, type) => {\n      if (err) return callback(err)\n      const dir = path.dirname(dstpath)\n      pathExists(dir, (err, dirExists) => {\n        if (err) return callback(err)\n        if (dirExists) return fs.symlink(srcpath, dstpath, type, callback)\n        mkdirs(dir, err => {\n          if (err) return callback(err)\n          fs.symlink(srcpath, dstpath, type, callback)\n        })\n      })\n    })\n  })\n}\n\nfunction createSymlinkSync (srcpath, dstpath, type) {\n  let stats\n  try {\n    stats = fs.lstatSync(dstpath)\n  } catch {}\n  if (stats && stats.isSymbolicLink()) {\n    const srcStat = fs.statSync(srcpath)\n    const dstStat = fs.statSync(dstpath)\n    if (areIdentical(srcStat, dstStat)) return\n  }\n\n  const relative = symlinkPathsSync(srcpath, dstpath)\n  srcpath = relative.toDst\n  type = symlinkTypeSync(relative.toCwd, type)\n  const dir = path.dirname(dstpath)\n  const exists = fs.existsSync(dir)\n  if (exists) return fs.symlinkSync(srcpath, dstpath, type)\n  mkdirsSync(dir)\n  return fs.symlinkSync(srcpath, dstpath, type)\n}\n\nmodule.exports = {\n  createSymlink: u(createSymlink),\n  createSymlinkSync\n}\n","'use strict'\n\nconst path = require('path')\nconst fs = require('graceful-fs')\nconst pathExists = require('../path-exists').pathExists\n\n/**\n * Function that returns two types of paths, one relative to symlink, and one\n * relative to the current working directory. Checks if path is absolute or\n * relative. If the path is relative, this function checks if the path is\n * relative to symlink or relative to current working directory. This is an\n * initiative to find a smarter `srcpath` to supply when building symlinks.\n * This allows you to determine which path to use out of one of three possible\n * types of source paths. The first is an absolute path. This is detected by\n * `path.isAbsolute()`. When an absolute path is provided, it is checked to\n * see if it exists. If it does it's used, if not an error is returned\n * (callback)/ thrown (sync). The other two options for `srcpath` are a\n * relative url. By default Node's `fs.symlink` works by creating a symlink\n * using `dstpath` and expects the `srcpath` to be relative to the newly\n * created symlink. If you provide a `srcpath` that does not exist on the file\n * system it results in a broken symlink. To minimize this, the function\n * checks to see if the 'relative to symlink' source file exists, and if it\n * does it will use it. If it does not, it checks if there's a file that\n * exists that is relative to the current working directory, if does its used.\n * This preserves the expectations of the original fs.symlink spec and adds\n * the ability to pass in `relative to current working direcotry` paths.\n */\n\nfunction symlinkPaths (srcpath, dstpath, callback) {\n  if (path.isAbsolute(srcpath)) {\n    return fs.lstat(srcpath, (err) => {\n      if (err) {\n        err.message = err.message.replace('lstat', 'ensureSymlink')\n        return callback(err)\n      }\n      return callback(null, {\n        toCwd: srcpath,\n        toDst: srcpath\n      })\n    })\n  } else {\n    const dstdir = path.dirname(dstpath)\n    const relativeToDst = path.join(dstdir, srcpath)\n    return pathExists(relativeToDst, (err, exists) => {\n      if (err) return callback(err)\n      if (exists) {\n        return callback(null, {\n          toCwd: relativeToDst,\n          toDst: srcpath\n        })\n      } else {\n        return fs.lstat(srcpath, (err) => {\n          if (err) {\n            err.message = err.message.replace('lstat', 'ensureSymlink')\n            return callback(err)\n          }\n          return callback(null, {\n            toCwd: srcpath,\n            toDst: path.relative(dstdir, srcpath)\n          })\n        })\n      }\n    })\n  }\n}\n\nfunction symlinkPathsSync (srcpath, dstpath) {\n  let exists\n  if (path.isAbsolute(srcpath)) {\n    exists = fs.existsSync(srcpath)\n    if (!exists) throw new Error('absolute srcpath does not exist')\n    return {\n      toCwd: srcpath,\n      toDst: srcpath\n    }\n  } else {\n    const dstdir = path.dirname(dstpath)\n    const relativeToDst = path.join(dstdir, srcpath)\n    exists = fs.existsSync(relativeToDst)\n    if (exists) {\n      return {\n        toCwd: relativeToDst,\n        toDst: srcpath\n      }\n    } else {\n      exists = fs.existsSync(srcpath)\n      if (!exists) throw new Error('relative srcpath does not exist')\n      return {\n        toCwd: srcpath,\n        toDst: path.relative(dstdir, srcpath)\n      }\n    }\n  }\n}\n\nmodule.exports = {\n  symlinkPaths,\n  symlinkPathsSync\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\n\nfunction symlinkType (srcpath, type, callback) {\n  callback = (typeof type === 'function') ? type : callback\n  type = (typeof type === 'function') ? false : type\n  if (type) return callback(null, type)\n  fs.lstat(srcpath, (err, stats) => {\n    if (err) return callback(null, 'file')\n    type = (stats && stats.isDirectory()) ? 'dir' : 'file'\n    callback(null, type)\n  })\n}\n\nfunction symlinkTypeSync (srcpath, type) {\n  let stats\n\n  if (type) return type\n  try {\n    stats = fs.lstatSync(srcpath)\n  } catch {\n    return 'file'\n  }\n  return (stats && stats.isDirectory()) ? 'dir' : 'file'\n}\n\nmodule.exports = {\n  symlinkType,\n  symlinkTypeSync\n}\n","'use strict'\n\nconst u = require('universalify').fromPromise\nconst jsonFile = require('./jsonfile')\n\njsonFile.outputJson = u(require('./output-json'))\njsonFile.outputJsonSync = require('./output-json-sync')\n// aliases\njsonFile.outputJSON = jsonFile.outputJson\njsonFile.outputJSONSync = jsonFile.outputJsonSync\njsonFile.writeJSON = jsonFile.writeJson\njsonFile.writeJSONSync = jsonFile.writeJsonSync\njsonFile.readJSON = jsonFile.readJson\njsonFile.readJSONSync = jsonFile.readJsonSync\n\nmodule.exports = jsonFile\n","'use strict'\n\nconst jsonFile = require('jsonfile')\n\nmodule.exports = {\n  // jsonfile exports\n  readJson: jsonFile.readFile,\n  readJsonSync: jsonFile.readFileSync,\n  writeJson: jsonFile.writeFile,\n  writeJsonSync: jsonFile.writeFileSync\n}\n","let _fs\ntry {\n  _fs = require('graceful-fs')\n} catch (_) {\n  _fs = require('fs')\n}\nconst universalify = require('universalify')\nconst { stringify, stripBom } = require('./utils')\n\nasync function _readFile (file, options = {}) {\n  if (typeof options === 'string') {\n    options = { encoding: options }\n  }\n\n  const fs = options.fs || _fs\n\n  const shouldThrow = 'throws' in options ? options.throws : true\n\n  let data = await universalify.fromCallback(fs.readFile)(file, options)\n\n  data = stripBom(data)\n\n  let obj\n  try {\n    obj = JSON.parse(data, options ? options.reviver : null)\n  } catch (err) {\n    if (shouldThrow) {\n      err.message = `${file}: ${err.message}`\n      throw err\n    } else {\n      return null\n    }\n  }\n\n  return obj\n}\n\nconst readFile = universalify.fromPromise(_readFile)\n\nfunction readFileSync (file, options = {}) {\n  if (typeof options === 'string') {\n    options = { encoding: options }\n  }\n\n  const fs = options.fs || _fs\n\n  const shouldThrow = 'throws' in options ? options.throws : true\n\n  try {\n    let content = fs.readFileSync(file, options)\n    content = stripBom(content)\n    return JSON.parse(content, options.reviver)\n  } catch (err) {\n    if (shouldThrow) {\n      err.message = `${file}: ${err.message}`\n      throw err\n    } else {\n      return null\n    }\n  }\n}\n\nasync function _writeFile (file, obj, options = {}) {\n  const fs = options.fs || _fs\n\n  const str = stringify(obj, options)\n\n  await universalify.fromCallback(fs.writeFile)(file, str, options)\n}\n\nconst writeFile = universalify.fromPromise(_writeFile)\n\nfunction writeFileSync (file, obj, options = {}) {\n  const fs = options.fs || _fs\n\n  const str = stringify(obj, options)\n  // not sure if fs.writeFileSync returns anything, but just in case\n  return fs.writeFileSync(file, str, options)\n}\n\nconst jsonfile = {\n  readFile,\n  readFileSync,\n  writeFile,\n  writeFileSync\n}\n\nmodule.exports = jsonfile\n","'use strict'\n\nconst { stringify } = require('jsonfile/utils')\nconst { outputFile } = require('../output')\n\nasync function outputJson (file, data, options = {}) {\n  const str = stringify(data, options)\n\n  await outputFile(file, str, options)\n}\n\nmodule.exports = outputJson\n","'use strict'\n\nconst { stringify } = require('jsonfile/utils')\nconst { outputFileSync } = require('../output')\n\nfunction outputJsonSync (file, data, options) {\n  const str = stringify(data, options)\n\n  outputFileSync(file, str, options)\n}\n\nmodule.exports = outputJsonSync\n","'use strict'\n\nmodule.exports = {\n  moveSync: require('./move-sync')\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst copySync = require('../copy-sync').copySync\nconst removeSync = require('../remove').removeSync\nconst mkdirpSync = require('../mkdirs').mkdirpSync\nconst stat = require('../util/stat')\n\nfunction moveSync (src, dest, opts) {\n  opts = opts || {}\n  const overwrite = opts.overwrite || opts.clobber || false\n\n  const { srcStat, isChangingCase = false } = stat.checkPathsSync(src, dest, 'move', opts)\n  stat.checkParentPathsSync(src, srcStat, dest, 'move')\n  if (!isParentRoot(dest)) mkdirpSync(path.dirname(dest))\n  return doRename(src, dest, overwrite, isChangingCase)\n}\n\nfunction isParentRoot (dest) {\n  const parent = path.dirname(dest)\n  const parsedPath = path.parse(parent)\n  return parsedPath.root === parent\n}\n\nfunction doRename (src, dest, overwrite, isChangingCase) {\n  if (isChangingCase) return rename(src, dest, overwrite)\n  if (overwrite) {\n    removeSync(dest)\n    return rename(src, dest, overwrite)\n  }\n  if (fs.existsSync(dest)) throw new Error('dest already exists.')\n  return rename(src, dest, overwrite)\n}\n\nfunction rename (src, dest, overwrite) {\n  try {\n    fs.renameSync(src, dest)\n  } catch (err) {\n    if (err.code !== 'EXDEV') throw err\n    return moveAcrossDevice(src, dest, overwrite)\n  }\n}\n\nfunction moveAcrossDevice (src, dest, overwrite) {\n  const opts = {\n    overwrite,\n    errorOnExist: true\n  }\n  copySync(src, dest, opts)\n  return removeSync(src)\n}\n\nmodule.exports = moveSync\n","'use strict'\n\nconst u = require('universalify').fromCallback\nmodule.exports = {\n  move: u(require('./move'))\n}\n","'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst copy = require('../copy').copy\nconst remove = require('../remove').remove\nconst mkdirp = require('../mkdirs').mkdirp\nconst pathExists = require('../path-exists').pathExists\nconst stat = require('../util/stat')\n\nfunction move (src, dest, opts, cb) {\n  if (typeof opts === 'function') {\n    cb = opts\n    opts = {}\n  }\n\n  const overwrite = opts.overwrite || opts.clobber || false\n\n  stat.checkPaths(src, dest, 'move', opts, (err, stats) => {\n    if (err) return cb(err)\n    const { srcStat, isChangingCase = false } = stats\n    stat.checkParentPaths(src, srcStat, dest, 'move', err => {\n      if (err) return cb(err)\n      if (isParentRoot(dest)) return doRename(src, dest, overwrite, isChangingCase, cb)\n      mkdirp(path.dirname(dest), err => {\n        if (err) return cb(err)\n        return doRename(src, dest, overwrite, isChangingCase, cb)\n      })\n    })\n  })\n}\n\nfunction isParentRoot (dest) {\n  const parent = path.dirname(dest)\n  const parsedPath = path.parse(parent)\n  return parsedPath.root === parent\n}\n\nfunction doRename (src, dest, overwrite, isChangingCase, cb) {\n  if (isChangingCase) return rename(src, dest, overwrite, cb)\n  if (overwrite) {\n    return remove(dest, err => {\n      if (err) return cb(err)\n      return rename(src, dest, overwrite, cb)\n    })\n  }\n  pathExists(dest, (err, destExists) => {\n    if (err) return cb(err)\n    if (destExists) return cb(new Error('dest already exists.'))\n    return rename(src, dest, overwrite, cb)\n  })\n}\n\nfunction rename (src, dest, overwrite, cb) {\n  fs.rename(src, dest, err => {\n    if (!err) return cb()\n    if (err.code !== 'EXDEV') return cb(err)\n    return moveAcrossDevice(src, dest, overwrite, cb)\n  })\n}\n\nfunction moveAcrossDevice (src, dest, overwrite, cb) {\n  const opts = {\n    overwrite,\n    errorOnExist: true\n  }\n  copy(src, dest, opts, err => {\n    if (err) return cb(err)\n    return remove(src, cb)\n  })\n}\n\nmodule.exports = move\n","\"use strict\";\n\nvar Node = require('./node');\nvar unescapeString = require('./common').unescapeString;\nvar OPENTAG = require('./common').OPENTAG;\nvar CLOSETAG = require('./common').CLOSETAG;\n\nvar CODE_INDENT = 4;\n\nvar C_TAB = 9;\nvar C_NEWLINE = 10;\nvar C_GREATERTHAN = 62;\nvar C_LESSTHAN = 60;\nvar C_SPACE = 32;\nvar C_OPEN_BRACKET = 91;\n\nvar InlineParser = require('./inlines');\n\nvar reHtmlBlockOpen = [\n   /./, // dummy for 0\n   /^<(?:script|pre|style)(?:\\s|>|$)/i,\n   /^<!--/,\n   /^<[?]/,\n   /^<![A-Z]/,\n   /^<!\\[CDATA\\[/,\n   /^<[/]?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[123456]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\\s|[/]?[>]|$)/i,\n    new RegExp('^(?:' + OPENTAG + '|' + CLOSETAG + ')\\\\s*$', 'i')\n];\n\nvar reHtmlBlockClose = [\n   /./, // dummy for 0\n   /<\\/(?:script|pre|style)>/i,\n   /-->/,\n   /\\?>/,\n   />/,\n   /\\]\\]>/\n];\n\nvar reThematicBreak = /^(?:(?:\\*[ \\t]*){3,}|(?:_[ \\t]*){3,}|(?:-[ \\t]*){3,})[ \\t]*$/;\n\nvar reMaybeSpecial = /^[#`~*+_=<>0-9-]/;\n\nvar reNonSpace = /[^ \\t\\f\\v\\r\\n]/;\n\nvar reBulletListMarker = /^[*+-]/;\n\nvar reOrderedListMarker = /^(\\d{1,9})([.)])/;\n\nvar reATXHeadingMarker = /^#{1,6}(?:[ \\t]+|$)/;\n\nvar reCodeFence = /^`{3,}(?!.*`)|^~{3,}/;\n\nvar reClosingCodeFence = /^(?:`{3,}|~{3,})(?= *$)/;\n\nvar reSetextHeadingLine = /^(?:=+|-+)[ \\t]*$/;\n\nvar reLineEnding = /\\r\\n|\\n|\\r/;\n\n// Returns true if string contains only space characters.\nvar isBlank = function(s) {\n    return !(reNonSpace.test(s));\n};\n\nvar isSpaceOrTab = function(c) {\n    return c === C_SPACE || c === C_TAB;\n};\n\nvar peek = function(ln, pos) {\n    if (pos < ln.length) {\n        return ln.charCodeAt(pos);\n    } else {\n        return -1;\n    }\n};\n\n// DOC PARSER\n\n// These are methods of a Parser object, defined below.\n\n// Returns true if block ends with a blank line, descending if needed\n// into lists and sublists.\nvar endsWithBlankLine = function(block) {\n    while (block) {\n        if (block._lastLineBlank) {\n            return true;\n        }\n        var t = block.type;\n        if (!block._lastLineChecked &&\n            (t === 'list' || t === 'item')) {\n            block._lastLineChecked = true;\n            block = block._lastChild;\n        } else {\n            block._lastLineChecked = true;\n            break;\n        }\n    }\n    return false;\n};\n\n// Add a line to the block at the tip.  We assume the tip\n// can accept lines -- that check should be done before calling this.\nvar addLine = function() {\n    if (this.partiallyConsumedTab) {\n      this.offset += 1; // skip over tab\n      // add space characters:\n      var charsToTab = 4 - (this.column % 4);\n      this.tip._string_content += (' '.repeat(charsToTab));\n    }\n    this.tip._string_content += this.currentLine.slice(this.offset) + '\\n';\n};\n\n// Add block of type tag as a child of the tip.  If the tip can't\n// accept children, close and finalize it and try its parent,\n// and so on til we find a block that can accept children.\nvar addChild = function(tag, offset) {\n    while (!this.blocks[this.tip.type].canContain(tag)) {\n        this.finalize(this.tip, this.lineNumber - 1);\n    }\n\n    var column_number = offset + 1; // offset 0 = column 1\n    var newBlock = new Node(tag, [[this.lineNumber, column_number], [0, 0]]);\n    newBlock._string_content = '';\n    this.tip.appendChild(newBlock);\n    this.tip = newBlock;\n    return newBlock;\n};\n\n// Parse a list marker and return data on the marker (type,\n// start, delimiter, bullet character, padding) or null.\nvar parseListMarker = function(parser, container) {\n    var rest = parser.currentLine.slice(parser.nextNonspace);\n    var match;\n    var nextc;\n    var spacesStartCol;\n    var spacesStartOffset;\n    var data = { type: null,\n                 tight: true,  // lists are tight by default\n                 bulletChar: null,\n                 start: null,\n                 delimiter: null,\n                 padding: null,\n                 markerOffset: parser.indent };\n    if (parser.indent >= 4) {\n        return null;\n    }\n    if ((match = rest.match(reBulletListMarker))) {\n        data.type = 'bullet';\n        data.bulletChar = match[0][0];\n\n    } else if ((match = rest.match(reOrderedListMarker)) &&\n                (container.type !== 'paragraph' ||\n                 match[1] === '1')) {\n        data.type = 'ordered';\n        data.start = parseInt(match[1]);\n        data.delimiter = match[2];\n    } else {\n        return null;\n    }\n    // make sure we have spaces after\n    nextc = peek(parser.currentLine, parser.nextNonspace + match[0].length);\n    if (!(nextc === -1 || nextc === C_TAB || nextc === C_SPACE)) {\n        return null;\n    }\n\n    // if it interrupts paragraph, make sure first line isn't blank\n    if (container.type === 'paragraph' && !parser.currentLine.slice(parser.nextNonspace + match[0].length).match(reNonSpace)) {\n        return null;\n    }\n\n    // we've got a match! advance offset and calculate padding\n    parser.advanceNextNonspace(); // to start of marker\n    parser.advanceOffset(match[0].length, true); // to end of marker\n    spacesStartCol = parser.column;\n    spacesStartOffset = parser.offset;\n    do {\n        parser.advanceOffset(1, true);\n        nextc = peek(parser.currentLine, parser.offset);\n    } while (parser.column - spacesStartCol < 5 &&\n           isSpaceOrTab(nextc));\n    var blank_item = peek(parser.currentLine, parser.offset) === -1;\n    var spaces_after_marker = parser.column - spacesStartCol;\n    if (spaces_after_marker >= 5 ||\n        spaces_after_marker < 1 ||\n        blank_item) {\n        data.padding = match[0].length + 1;\n        parser.column = spacesStartCol;\n        parser.offset = spacesStartOffset;\n        if (isSpaceOrTab(peek(parser.currentLine, parser.offset))) {\n            parser.advanceOffset(1, true);\n        }\n    } else {\n        data.padding = match[0].length + spaces_after_marker;\n    }\n    return data;\n};\n\n// Returns true if the two list items are of the same type,\n// with the same delimiter and bullet character.  This is used\n// in agglomerating list items into lists.\nvar listsMatch = function(list_data, item_data) {\n    return (list_data.type === item_data.type &&\n            list_data.delimiter === item_data.delimiter &&\n            list_data.bulletChar === item_data.bulletChar);\n};\n\n// Finalize and close any unmatched blocks.\nvar closeUnmatchedBlocks = function() {\n    if (!this.allClosed) {\n        // finalize any blocks not matched\n        while (this.oldtip !== this.lastMatchedContainer) {\n            var parent = this.oldtip._parent;\n            this.finalize(this.oldtip, this.lineNumber - 1);\n            this.oldtip = parent;\n        }\n        this.allClosed = true;\n    }\n};\n\n// 'finalize' is run when the block is closed.\n// 'continue' is run to check whether the block is continuing\n// at a certain line and offset (e.g. whether a block quote\n// contains a `>`.  It returns 0 for matched, 1 for not matched,\n// and 2 for \"we've dealt with this line completely, go to next.\"\nvar blocks = {\n    document: {\n        continue: function() { return 0; },\n        finalize: function() { return; },\n        canContain: function(t) { return (t !== 'item'); },\n        acceptsLines: false\n    },\n    list: {\n        continue: function() { return 0; },\n        finalize: function(parser, block) {\n            var item = block._firstChild;\n            while (item) {\n                // check for non-final list item ending with blank line:\n                if (endsWithBlankLine(item) && item._next) {\n                    block._listData.tight = false;\n                    break;\n                }\n                // recurse into children of list item, to see if there are\n                // spaces between any of them:\n                var subitem = item._firstChild;\n                while (subitem) {\n                    if (endsWithBlankLine(subitem) &&\n                        (item._next || subitem._next)) {\n                        block._listData.tight = false;\n                        break;\n                    }\n                    subitem = subitem._next;\n                }\n                item = item._next;\n            }\n        },\n        canContain: function(t) { return (t === 'item'); },\n        acceptsLines: false\n    },\n    block_quote: {\n        continue: function(parser) {\n            var ln = parser.currentLine;\n            if (!parser.indented &&\n                peek(ln, parser.nextNonspace) === C_GREATERTHAN) {\n                parser.advanceNextNonspace();\n                parser.advanceOffset(1, false);\n                if (isSpaceOrTab(peek(ln, parser.offset))) {\n                    parser.advanceOffset(1, true);\n                }\n            } else {\n                return 1;\n            }\n            return 0;\n        },\n        finalize: function() { return; },\n        canContain: function(t) { return (t !== 'item'); },\n        acceptsLines: false\n    },\n    item: {\n        continue: function(parser, container) {\n            if (parser.blank) {\n                if (container._firstChild == null) {\n                    // Blank line after empty list item\n                    return 1;\n                } else {\n                    parser.advanceNextNonspace();\n                }\n            } else if (parser.indent >=\n                       container._listData.markerOffset +\n                       container._listData.padding) {\n                parser.advanceOffset(container._listData.markerOffset +\n                    container._listData.padding, true);\n            } else {\n                return 1;\n            }\n            return 0;\n        },\n        finalize: function() { return; },\n        canContain: function(t) { return (t !== 'item'); },\n        acceptsLines: false\n    },\n    heading: {\n        continue: function() {\n            // a heading can never container > 1 line, so fail to match:\n            return 1;\n        },\n        finalize: function() { return; },\n        canContain: function() { return false; },\n        acceptsLines: false\n    },\n    thematic_break: {\n        continue: function() {\n            // a thematic break can never container > 1 line, so fail to match:\n            return 1;\n        },\n        finalize: function() { return; },\n        canContain: function() { return false; },\n        acceptsLines: false\n    },\n    code_block: {\n        continue: function(parser, container) {\n            var ln = parser.currentLine;\n            var indent = parser.indent;\n            if (container._isFenced) { // fenced\n                var match = (indent <= 3 &&\n                    ln.charAt(parser.nextNonspace) === container._fenceChar &&\n                    ln.slice(parser.nextNonspace).match(reClosingCodeFence));\n                if (match && match[0].length >= container._fenceLength) {\n                    // closing fence - we're at end of line, so we can return\n                    parser.lastLineLength = match[0].length;\n                    parser.finalize(container, parser.lineNumber);\n                    return 2;\n                } else {\n                    // skip optional spaces of fence offset\n                    var i = container._fenceOffset;\n                    while (i > 0 && isSpaceOrTab(peek(ln, parser.offset))) {\n                        parser.advanceOffset(1, true);\n                        i--;\n                    }\n                }\n            } else { // indented\n                if (indent >= CODE_INDENT) {\n                    parser.advanceOffset(CODE_INDENT, true);\n                } else if (parser.blank) {\n                    parser.advanceNextNonspace();\n                } else {\n                    return 1;\n                }\n            }\n            return 0;\n        },\n        finalize: function(parser, block) {\n            if (block._isFenced) { // fenced\n                // first line becomes info string\n                var content = block._string_content;\n                var newlinePos = content.indexOf('\\n');\n                var firstLine = content.slice(0, newlinePos);\n                var rest = content.slice(newlinePos + 1);\n                block.info = unescapeString(firstLine.trim());\n                block._literal = rest;\n            } else { // indented\n                block._literal = block._string_content.replace(/(\\n *)+$/, '\\n');\n            }\n            block._string_content = null; // allow GC\n        },\n        canContain: function() { return false; },\n        acceptsLines: true\n    },\n    html_block: {\n        continue: function(parser, container) {\n            return ((parser.blank &&\n                     (container._htmlBlockType === 6 ||\n                      container._htmlBlockType === 7)) ? 1 : 0);\n        },\n        finalize: function(parser, block) {\n            block._literal = block._string_content.replace(/(\\n *)+$/, '');\n            block._string_content = null; // allow GC\n        },\n        canContain: function() { return false; },\n        acceptsLines: true\n    },\n    paragraph: {\n        continue: function(parser) {\n            return (parser.blank ? 1 : 0);\n        },\n        finalize: function(parser, block) {\n            var pos;\n            var hasReferenceDefs = false;\n\n            // try parsing the beginning as link reference definitions:\n            while (peek(block._string_content, 0) === C_OPEN_BRACKET &&\n                   (pos =\n                    parser.inlineParser.parseReference(block._string_content,\n                                                       parser.refmap))) {\n                block._string_content = block._string_content.slice(pos);\n                hasReferenceDefs = true;\n            }\n            if (hasReferenceDefs && isBlank(block._string_content)) {\n                block.unlink();\n            }\n        },\n        canContain: function() { return false; },\n        acceptsLines: true\n    }\n};\n\n// block start functions.  Return values:\n// 0 = no match\n// 1 = matched container, keep going\n// 2 = matched leaf, no more block starts\nvar blockStarts = [\n    // block quote\n    function(parser) {\n        if (!parser.indented &&\n            peek(parser.currentLine, parser.nextNonspace) === C_GREATERTHAN) {\n            parser.advanceNextNonspace();\n            parser.advanceOffset(1, false);\n            // optional following space\n            if (isSpaceOrTab(peek(parser.currentLine, parser.offset))) {\n                parser.advanceOffset(1, true);\n            }\n            parser.closeUnmatchedBlocks();\n            parser.addChild('block_quote', parser.nextNonspace);\n            return 1;\n        } else {\n            return 0;\n        }\n    },\n\n    // ATX heading\n    function(parser) {\n        var match;\n        if (!parser.indented &&\n            (match = parser.currentLine.slice(parser.nextNonspace).match(reATXHeadingMarker))) {\n            parser.advanceNextNonspace();\n            parser.advanceOffset(match[0].length, false);\n            parser.closeUnmatchedBlocks();\n            var container = parser.addChild('heading', parser.nextNonspace);\n            container.level = match[0].trim().length; // number of #s\n            // remove trailing ###s:\n            container._string_content =\n                parser.currentLine.slice(parser.offset).replace(/^[ \\t]*#+[ \\t]*$/, '').replace(/[ \\t]+#+[ \\t]*$/, '');\n            parser.advanceOffset(parser.currentLine.length - parser.offset);\n            return 2;\n        } else {\n            return 0;\n        }\n    },\n\n    // Fenced code block\n    function(parser) {\n        var match;\n        if (!parser.indented &&\n            (match = parser.currentLine.slice(parser.nextNonspace).match(reCodeFence))) {\n            var fenceLength = match[0].length;\n            parser.closeUnmatchedBlocks();\n            var container = parser.addChild('code_block', parser.nextNonspace);\n            container._isFenced = true;\n            container._fenceLength = fenceLength;\n            container._fenceChar = match[0][0];\n            container._fenceOffset = parser.indent;\n            parser.advanceNextNonspace();\n            parser.advanceOffset(fenceLength, false);\n            return 2;\n        } else {\n            return 0;\n        }\n    },\n\n    // HTML block\n    function(parser, container) {\n        if (!parser.indented &&\n            peek(parser.currentLine, parser.nextNonspace) === C_LESSTHAN) {\n            var s = parser.currentLine.slice(parser.nextNonspace);\n            var blockType;\n\n            for (blockType = 1; blockType <= 7; blockType++) {\n                if (reHtmlBlockOpen[blockType].test(s) &&\n                    (blockType < 7 ||\n                     container.type !== 'paragraph')) {\n                    parser.closeUnmatchedBlocks();\n                    // We don't adjust parser.offset;\n                    // spaces are part of the HTML block:\n                    var b = parser.addChild('html_block',\n                                            parser.offset);\n                    b._htmlBlockType = blockType;\n                    return 2;\n                }\n            }\n        }\n\n        return 0;\n\n    },\n\n    // Setext heading\n    function(parser, container) {\n        var match;\n        if (!parser.indented &&\n            container.type === 'paragraph' &&\n                   ((match = parser.currentLine.slice(parser.nextNonspace).match(reSetextHeadingLine)))) {\n            parser.closeUnmatchedBlocks();\n            // resolve reference link definitiosn\n            var pos;\n            while (peek(container._string_content, 0) === C_OPEN_BRACKET &&\n                   (pos =\n                    parser.inlineParser.parseReference(\n                        container._string_content, parser.refmap))) {\n                container._string_content =\n                    container._string_content.slice(pos);\n            }\n            if (container._string_content.length > 0) {\n              var heading = new Node('heading', container.sourcepos);\n              heading.level = match[0][0] === '=' ? 1 : 2;\n              heading._string_content = container._string_content;\n              container.insertAfter(heading);\n              container.unlink();\n              parser.tip = heading;\n              parser.advanceOffset(parser.currentLine.length - parser.offset, false);\n              return 2;\n            } else {\n              return 0;\n            }\n        } else {\n            return 0;\n        }\n    },\n\n    // thematic break\n    function(parser) {\n        if (!parser.indented &&\n            reThematicBreak.test(parser.currentLine.slice(parser.nextNonspace))) {\n            parser.closeUnmatchedBlocks();\n            parser.addChild('thematic_break', parser.nextNonspace);\n            parser.advanceOffset(parser.currentLine.length - parser.offset, false);\n            return 2;\n        } else {\n            return 0;\n        }\n    },\n\n    // list item\n    function(parser, container) {\n        var data;\n\n        if ((!parser.indented || container.type === 'list')\n                && (data = parseListMarker(parser, container))) {\n            parser.closeUnmatchedBlocks();\n\n            // add the list if needed\n            if (parser.tip.type !== 'list' ||\n                !(listsMatch(container._listData, data))) {\n                container = parser.addChild('list', parser.nextNonspace);\n                container._listData = data;\n            }\n\n            // add the list item\n            container = parser.addChild('item', parser.nextNonspace);\n            container._listData = data;\n            return 1;\n        } else {\n            return 0;\n        }\n    },\n\n    // indented code block\n    function(parser) {\n        if (parser.indented &&\n            parser.tip.type !== 'paragraph' &&\n            !parser.blank) {\n            // indented code\n            parser.advanceOffset(CODE_INDENT, true);\n            parser.closeUnmatchedBlocks();\n            parser.addChild('code_block', parser.offset);\n            return 2;\n        } else {\n            return 0;\n        }\n     }\n\n];\n\nvar advanceOffset = function(count, columns) {\n    var currentLine = this.currentLine;\n    var charsToTab, charsToAdvance;\n    var c;\n    while (count > 0 && (c = currentLine[this.offset])) {\n        if (c === '\\t') {\n            charsToTab = 4 - (this.column % 4);\n            if (columns) {\n                this.partiallyConsumedTab = charsToTab > count;\n                charsToAdvance = charsToTab > count ? count : charsToTab;\n                this.column += charsToAdvance;\n                this.offset += this.partiallyConsumedTab ? 0 : 1;\n                count -= charsToAdvance;\n            } else {\n                this.partiallyConsumedTab = false;\n                this.column += charsToTab;\n                this.offset += 1;\n                count -= 1;\n            }\n        } else {\n            this.partiallyConsumedTab = false;\n            this.offset += 1;\n            this.column += 1; // assume ascii; block starts are ascii\n            count -= 1;\n        }\n    }\n};\n\nvar advanceNextNonspace = function() {\n    this.offset = this.nextNonspace;\n    this.column = this.nextNonspaceColumn;\n    this.partiallyConsumedTab = false;\n};\n\nvar findNextNonspace = function() {\n    var currentLine = this.currentLine;\n    var i = this.offset;\n    var cols = this.column;\n    var c;\n\n    while ((c = currentLine.charAt(i)) !== '') {\n        if (c === ' ') {\n            i++;\n            cols++;\n        } else if (c === '\\t') {\n            i++;\n            cols += (4 - (cols % 4));\n        } else {\n            break;\n        }\n    }\n    this.blank = (c === '\\n' || c === '\\r' || c === '');\n    this.nextNonspace = i;\n    this.nextNonspaceColumn = cols;\n    this.indent = this.nextNonspaceColumn - this.column;\n    this.indented = this.indent >= CODE_INDENT;\n};\n\n// Analyze a line of text and update the document appropriately.\n// We parse markdown text by calling this on each line of input,\n// then finalizing the document.\nvar incorporateLine = function(ln) {\n    var all_matched = true;\n    var t;\n\n    var container = this.doc;\n    this.oldtip = this.tip;\n    this.offset = 0;\n    this.column = 0;\n    this.blank = false;\n    this.partiallyConsumedTab = false;\n    this.lineNumber += 1;\n\n    // replace NUL characters for security\n    if (ln.indexOf('\\u0000') !== -1) {\n        ln = ln.replace(/\\0/g, '\\uFFFD');\n    }\n\n    this.currentLine = ln;\n\n    // For each containing block, try to parse the associated line start.\n    // Bail out on failure: container will point to the last matching block.\n    // Set all_matched to false if not all containers match.\n    var lastChild;\n    while ((lastChild = container._lastChild) && lastChild._open) {\n        container = lastChild;\n\n        this.findNextNonspace();\n\n        switch (this.blocks[container.type].continue(this, container)) {\n        case 0: // we've matched, keep going\n            break;\n        case 1: // we've failed to match a block\n            all_matched = false;\n            break;\n        case 2: // we've hit end of line for fenced code close and can return\n            return;\n        default:\n            throw 'continue returned illegal value, must be 0, 1, or 2';\n        }\n        if (!all_matched) {\n            container = container._parent; // back up to last matching block\n            break;\n        }\n    }\n\n    this.allClosed = (container === this.oldtip);\n    this.lastMatchedContainer = container;\n\n    var matchedLeaf = container.type !== 'paragraph' &&\n            blocks[container.type].acceptsLines;\n    var starts = this.blockStarts;\n    var startsLen = starts.length;\n    // Unless last matched container is a code block, try new container starts,\n    // adding children to the last matched container:\n    while (!matchedLeaf) {\n\n        this.findNextNonspace();\n\n        // this is a little performance optimization:\n        if (!this.indented &&\n            !reMaybeSpecial.test(ln.slice(this.nextNonspace))) {\n            this.advanceNextNonspace();\n            break;\n        }\n\n        var i = 0;\n        while (i < startsLen) {\n            var res = starts[i](this, container);\n            if (res === 1) {\n                container = this.tip;\n                break;\n            } else if (res === 2) {\n                container = this.tip;\n                matchedLeaf = true;\n                break;\n            } else {\n                i++;\n            }\n        }\n\n        if (i === startsLen) { // nothing matched\n            this.advanceNextNonspace();\n            break;\n        }\n    }\n\n    // What remains at the offset is a text line.  Add the text to the\n    // appropriate container.\n\n   // First check for a lazy paragraph continuation:\n    if (!this.allClosed && !this.blank &&\n        this.tip.type === 'paragraph') {\n        // lazy paragraph continuation\n        this.addLine();\n\n    } else { // not a lazy continuation\n\n        // finalize any blocks not matched\n        this.closeUnmatchedBlocks();\n        if (this.blank && container.lastChild) {\n            container.lastChild._lastLineBlank = true;\n        }\n\n        t = container.type;\n\n        // Block quote lines are never blank as they start with >\n        // and we don't count blanks in fenced code for purposes of tight/loose\n        // lists or breaking out of lists.  We also don't set _lastLineBlank\n        // on an empty list item, or if we just closed a fenced block.\n        var lastLineBlank = this.blank &&\n            !(t === 'block_quote' ||\n              (t === 'code_block' && container._isFenced) ||\n              (t === 'item' &&\n               !container._firstChild &&\n               container.sourcepos[0][0] === this.lineNumber));\n\n        // propagate lastLineBlank up through parents:\n        var cont = container;\n        while (cont) {\n            cont._lastLineBlank = lastLineBlank;\n            cont = cont._parent;\n        }\n\n        if (this.blocks[t].acceptsLines) {\n            this.addLine();\n            // if HtmlBlock, check for end condition\n            if (t === 'html_block' &&\n                container._htmlBlockType >= 1 &&\n                container._htmlBlockType <= 5 &&\n                reHtmlBlockClose[container._htmlBlockType].test(this.currentLine.slice(this.offset))) {\n                this.lastLineLength = ln.length;\n                this.finalize(container, this.lineNumber);\n            }\n\n        } else if (this.offset < ln.length && !this.blank) {\n            // create paragraph container for line\n            container = this.addChild('paragraph', this.offset);\n            this.advanceNextNonspace();\n            this.addLine();\n        }\n    }\n    this.lastLineLength = ln.length;\n};\n\n// Finalize a block.  Close it and do any necessary postprocessing,\n// e.g. creating string_content from strings, setting the 'tight'\n// or 'loose' status of a list, and parsing the beginnings\n// of paragraphs for reference definitions.  Reset the tip to the\n// parent of the closed block.\nvar finalize = function(block, lineNumber) {\n    var above = block._parent;\n    block._open = false;\n    block.sourcepos[1] = [lineNumber, this.lastLineLength];\n\n    this.blocks[block.type].finalize(this, block);\n\n    this.tip = above;\n};\n\n// Walk through a block & children recursively, parsing string content\n// into inline content where appropriate.\nvar processInlines = function(block) {\n    var node, event, t;\n    var walker = block.walker();\n    this.inlineParser.refmap = this.refmap;\n    this.inlineParser.options = this.options;\n    while ((event = walker.next())) {\n        node = event.node;\n        t = node.type;\n        if (!event.entering && (t === 'paragraph' || t === 'heading')) {\n            this.inlineParser.parse(node);\n        }\n    }\n};\n\nvar Document = function() {\n    var doc = new Node('document', [[1, 1], [0, 0]]);\n    return doc;\n};\n\n// The main parsing function.  Returns a parsed document AST.\nvar parse = function(input) {\n    this.doc = new Document();\n    this.tip = this.doc;\n    this.refmap = {};\n    this.lineNumber = 0;\n    this.lastLineLength = 0;\n    this.offset = 0;\n    this.column = 0;\n    this.lastMatchedContainer = this.doc;\n    this.currentLine = \"\";\n    if (this.options.time) { console.time(\"preparing input\"); }\n    var lines = input.split(reLineEnding);\n    var len = lines.length;\n    if (input.charCodeAt(input.length - 1) === C_NEWLINE) {\n        // ignore last blank line created by final newline\n        len -= 1;\n    }\n    if (this.options.time) { console.timeEnd(\"preparing input\"); }\n    if (this.options.time) { console.time(\"block parsing\"); }\n    for (var i = 0; i < len; i++) {\n        this.incorporateLine(lines[i]);\n    }\n    while (this.tip) {\n        this.finalize(this.tip, len);\n    }\n    if (this.options.time) { console.timeEnd(\"block parsing\"); }\n    if (this.options.time) { console.time(\"inline parsing\"); }\n    this.processInlines(this.doc);\n    if (this.options.time) { console.timeEnd(\"inline parsing\"); }\n    return this.doc;\n};\n\n\n// The Parser object.\nfunction Parser(options){\n    return {\n        doc: new Document(),\n        blocks: blocks,\n        blockStarts: blockStarts,\n        tip: this.doc,\n        oldtip: this.doc,\n        currentLine: \"\",\n        lineNumber: 0,\n        offset: 0,\n        column: 0,\n        nextNonspace: 0,\n        nextNonspaceColumn: 0,\n        indent: 0,\n        indented: false,\n        blank: false,\n        partiallyConsumedTab: false,\n        allClosed: true,\n        lastMatchedContainer: this.doc,\n        refmap: {},\n        lastLineLength: 0,\n        inlineParser: new InlineParser(options),\n        findNextNonspace: findNextNonspace,\n        advanceOffset: advanceOffset,\n        advanceNextNonspace: advanceNextNonspace,\n        addLine: addLine,\n        addChild: addChild,\n        incorporateLine: incorporateLine,\n        finalize: finalize,\n        processInlines: processInlines,\n        closeUnmatchedBlocks: closeUnmatchedBlocks,\n        parse: parse,\n        options: options || {}\n    };\n}\n\nmodule.exports = Parser;\n","\n'use strict';\n\n\nvar encodeCache = {};\n\n\n// Create a lookup array where anything but characters in `chars` string\n// and alphanumeric chars is percent-encoded.\n//\nfunction getEncodeCache(exclude) {\n  var i, ch, cache = encodeCache[exclude];\n  if (cache) { return cache; }\n\n  cache = encodeCache[exclude] = [];\n\n  for (i = 0; i < 128; i++) {\n    ch = String.fromCharCode(i);\n\n    if (/^[0-9a-z]$/i.test(ch)) {\n      // always allow unencoded alphanumeric characters\n      cache.push(ch);\n    } else {\n      cache.push('%' + ('0' + i.toString(16).toUpperCase()).slice(-2));\n    }\n  }\n\n  for (i = 0; i < exclude.length; i++) {\n    cache[exclude.charCodeAt(i)] = exclude[i];\n  }\n\n  return cache;\n}\n\n\n// Encode unsafe characters with percent-encoding, skipping already\n// encoded sequences.\n//\n//  - string       - string to encode\n//  - exclude      - list of characters to ignore (in addition to a-zA-Z0-9)\n//  - keepEscaped  - don't encode '%' in a correct escape sequence (default: true)\n//\nfunction encode(string, exclude, keepEscaped) {\n  var i, l, code, nextCode, cache,\n      result = '';\n\n  if (typeof exclude !== 'string') {\n    // encode(string, keepEscaped)\n    keepEscaped  = exclude;\n    exclude = encode.defaultChars;\n  }\n\n  if (typeof keepEscaped === 'undefined') {\n    keepEscaped = true;\n  }\n\n  cache = getEncodeCache(exclude);\n\n  for (i = 0, l = string.length; i < l; i++) {\n    code = string.charCodeAt(i);\n\n    if (keepEscaped && code === 0x25 /* % */ && i + 2 < l) {\n      if (/^[0-9a-f]{2}$/i.test(string.slice(i + 1, i + 3))) {\n        result += string.slice(i, i + 3);\n        i += 2;\n        continue;\n      }\n    }\n\n    if (code < 128) {\n      result += cache[code];\n      continue;\n    }\n\n    if (code >= 0xD800 && code <= 0xDFFF) {\n      if (code >= 0xD800 && code <= 0xDBFF && i + 1 < l) {\n        nextCode = string.charCodeAt(i + 1);\n        if (nextCode >= 0xDC00 && nextCode <= 0xDFFF) {\n          result += encodeURIComponent(string[i] + string[i + 1]);\n          i++;\n          continue;\n        }\n      }\n      result += '%EF%BF%BD';\n      continue;\n    }\n\n    result += encodeURIComponent(string[i]);\n  }\n\n  return result;\n}\n\nencode.defaultChars   = \";/?:@&=+$,-_.!~*'()#\";\nencode.componentChars = \"-_.!~*'()\";\n\n\nmodule.exports = encode;\n","var inverseXML = getInverseObj(require(\"../maps/xml.json\")),\n    xmlReplacer = getInverseReplacer(inverseXML);\n\nexports.XML = getInverse(inverseXML, xmlReplacer);\n\nvar inverseHTML = getInverseObj(require(\"../maps/entities.json\")),\n    htmlReplacer = getInverseReplacer(inverseHTML);\n\nexports.HTML = getInverse(inverseHTML, htmlReplacer);\n\nfunction getInverseObj(obj) {\n    return Object.keys(obj)\n        .sort()\n        .reduce(function(inverse, name) {\n            inverse[obj[name]] = \"&\" + name + \";\";\n            return inverse;\n        }, {});\n}\n\nfunction getInverseReplacer(inverse) {\n    var single = [],\n        multiple = [];\n\n    Object.keys(inverse).forEach(function(k) {\n        if (k.length === 1) {\n            single.push(\"\\\\\" + k);\n        } else {\n            multiple.push(k);\n        }\n    });\n\n    //TODO add ranges\n    multiple.unshift(\"[\" + single.join(\"\") + \"]\");\n\n    return new RegExp(multiple.join(\"|\"), \"g\");\n}\n\nvar re_nonASCII = /[^\\0-\\x7F]/g,\n    re_astralSymbols = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n\nfunction singleCharReplacer(c) {\n    return (\n        \"&#x\" +\n        c\n            .charCodeAt(0)\n            .toString(16)\n            .toUpperCase() +\n        \";\"\n    );\n}\n\nfunction astralReplacer(c) {\n    // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n    var high = c.charCodeAt(0);\n    var low = c.charCodeAt(1);\n    var codePoint = (high - 0xd800) * 0x400 + low - 0xdc00 + 0x10000;\n    return \"&#x\" + codePoint.toString(16).toUpperCase() + \";\";\n}\n\nfunction getInverse(inverse, re) {\n    function func(name) {\n        return inverse[name];\n    }\n\n    return function(data) {\n        return data\n            .replace(re, func)\n            .replace(re_astralSymbols, astralReplacer)\n            .replace(re_nonASCII, singleCharReplacer);\n    };\n}\n\nvar re_xmlChars = getInverseReplacer(inverseXML);\n\nfunction escapeXML(data) {\n    return data\n        .replace(re_xmlChars, singleCharReplacer)\n        .replace(re_astralSymbols, astralReplacer)\n        .replace(re_nonASCII, singleCharReplacer);\n}\n\nexports.escape = escapeXML;\n","var entityMap = require(\"../maps/entities.json\"),\n    legacyMap = require(\"../maps/legacy.json\"),\n    xmlMap = require(\"../maps/xml.json\"),\n    decodeCodePoint = require(\"./decode_codepoint.js\");\n\nvar decodeXMLStrict = getStrictDecoder(xmlMap),\n    decodeHTMLStrict = getStrictDecoder(entityMap);\n\nfunction getStrictDecoder(map) {\n    var keys = Object.keys(map).join(\"|\"),\n        replace = getReplacer(map);\n\n    keys += \"|#[xX][\\\\da-fA-F]+|#\\\\d+\";\n\n    var re = new RegExp(\"&(?:\" + keys + \");\", \"g\");\n\n    return function(str) {\n        return String(str).replace(re, replace);\n    };\n}\n\nvar decodeHTML = (function() {\n    var legacy = Object.keys(legacyMap).sort(sorter);\n\n    var keys = Object.keys(entityMap).sort(sorter);\n\n    for (var i = 0, j = 0; i < keys.length; i++) {\n        if (legacy[j] === keys[i]) {\n            keys[i] += \";?\";\n            j++;\n        } else {\n            keys[i] += \";\";\n        }\n    }\n\n    var re = new RegExp(\"&(?:\" + keys.join(\"|\") + \"|#[xX][\\\\da-fA-F]+;?|#\\\\d+;?)\", \"g\"),\n        replace = getReplacer(entityMap);\n\n    function replacer(str) {\n        if (str.substr(-1) !== \";\") str += \";\";\n        return replace(str);\n    }\n\n    //TODO consider creating a merged map\n    return function(str) {\n        return String(str).replace(re, replacer);\n    };\n})();\n\nfunction sorter(a, b) {\n    return a < b ? 1 : -1;\n}\n\nfunction getReplacer(map) {\n    return function replace(str) {\n        if (str.charAt(1) === \"#\") {\n            if (str.charAt(2) === \"X\" || str.charAt(2) === \"x\") {\n                return decodeCodePoint(parseInt(str.substr(3), 16));\n            }\n            return decodeCodePoint(parseInt(str.substr(2), 10));\n        }\n        return map[str.slice(1, -1)];\n    };\n}\n\nmodule.exports = {\n    XML: decodeXMLStrict,\n    HTML: decodeHTML,\n    HTMLStrict: decodeHTMLStrict\n};\n","var decodeMap = require(\"../maps/decode.json\");\n\nmodule.exports = decodeCodePoint;\n\n// modified version of https://github.com/mathiasbynens/he/blob/master/src/he.js#L94-L119\nfunction decodeCodePoint(codePoint) {\n    if ((codePoint >= 0xd800 && codePoint <= 0xdfff) || codePoint > 0x10ffff) {\n        return \"\\uFFFD\";\n    }\n\n    if (codePoint in decodeMap) {\n        codePoint = decodeMap[codePoint];\n    }\n\n    var output = \"\";\n\n    if (codePoint > 0xffff) {\n        codePoint -= 0x10000;\n        output += String.fromCharCode(((codePoint >>> 10) & 0x3ff) | 0xd800);\n        codePoint = 0xdc00 | (codePoint & 0x3ff);\n    }\n\n    output += String.fromCharCode(codePoint);\n    return output;\n}\n","\"use strict\";\n\nvar Node = require('./node');\nvar common = require('./common');\nvar normalizeReference = require('./normalize-reference');\n\nvar normalizeURI = common.normalizeURI;\nvar unescapeString = common.unescapeString;\nvar fromCodePoint = require('./from-code-point.js');\nvar decodeHTML = require('entities').decodeHTML;\nrequire('string.prototype.repeat'); // Polyfill for String.prototype.repeat\n\n// Constants for character codes:\n\nvar C_NEWLINE = 10;\nvar C_ASTERISK = 42;\nvar C_UNDERSCORE = 95;\nvar C_BACKTICK = 96;\nvar C_OPEN_BRACKET = 91;\nvar C_CLOSE_BRACKET = 93;\nvar C_LESSTHAN = 60;\nvar C_BANG = 33;\nvar C_BACKSLASH = 92;\nvar C_AMPERSAND = 38;\nvar C_OPEN_PAREN = 40;\nvar C_CLOSE_PAREN = 41;\nvar C_COLON = 58;\nvar C_SINGLEQUOTE = 39;\nvar C_DOUBLEQUOTE = 34;\n\n// Some regexps used in inline parser:\n\nvar ESCAPABLE = common.ESCAPABLE;\nvar ESCAPED_CHAR = '\\\\\\\\' + ESCAPABLE;\n\nvar ENTITY = common.ENTITY;\nvar reHtmlTag = common.reHtmlTag;\n\nvar rePunctuation = new RegExp(/[!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~\\xA1\\xA7\\xAB\\xB6\\xB7\\xBB\\xBF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E42\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]|\\uD800[\\uDD00-\\uDD02\\uDF9F\\uDFD0]|\\uD801\\uDD6F|\\uD802[\\uDC57\\uDD1F\\uDD3F\\uDE50-\\uDE58\\uDE7F\\uDEF0-\\uDEF6\\uDF39-\\uDF3F\\uDF99-\\uDF9C]|\\uD804[\\uDC47-\\uDC4D\\uDCBB\\uDCBC\\uDCBE-\\uDCC1\\uDD40-\\uDD43\\uDD74\\uDD75\\uDDC5-\\uDDC9\\uDDCD\\uDDDB\\uDDDD-\\uDDDF\\uDE38-\\uDE3D\\uDEA9]|\\uD805[\\uDCC6\\uDDC1-\\uDDD7\\uDE41-\\uDE43\\uDF3C-\\uDF3E]|\\uD809[\\uDC70-\\uDC74]|\\uD81A[\\uDE6E\\uDE6F\\uDEF5\\uDF37-\\uDF3B\\uDF44]|\\uD82F\\uDC9F|\\uD836[\\uDE87-\\uDE8B]/);\n\nvar reLinkTitle = new RegExp(\n    '^(?:\"(' + ESCAPED_CHAR + '|[^\"\\\\x00])*\"' +\n        '|' +\n        '\\'(' + ESCAPED_CHAR + '|[^\\'\\\\x00])*\\'' +\n        '|' +\n        '\\\\((' + ESCAPED_CHAR + '|[^()\\\\x00])*\\\\))');\n\nvar reLinkDestinationBraces = /^(?:<(?:[^<>\\n\\\\\\x00]|\\\\.)*>)/;\n\nvar reEscapable = new RegExp('^' + ESCAPABLE);\n\nvar reEntityHere = new RegExp('^' + ENTITY, 'i');\n\nvar reTicks = /`+/;\n\nvar reTicksHere = /^`+/;\n\nvar reEllipses = /\\.\\.\\./g;\n\nvar reDash = /--+/g;\n\nvar reEmailAutolink = /^<([a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/;\n\nvar reAutolink = /^<[A-Za-z][A-Za-z0-9.+-]{1,31}:[^<>\\x00-\\x20]*>/i;\n\nvar reSpnl = /^ *(?:\\n *)?/;\n\nvar reWhitespaceChar = /^[ \\t\\n\\x0b\\x0c\\x0d]/;\n\nvar reUnicodeWhitespaceChar = /^\\s/;\n\nvar reFinalSpace = / *$/;\n\nvar reInitialSpace = /^ */;\n\nvar reSpaceAtEndOfLine = /^ *(?:\\n|$)/;\n\nvar reLinkLabel = /^\\[(?:[^\\\\\\[\\]]|\\\\.){0,1000}\\]/;\n\n// Matches a string of non-special characters.\nvar reMain = /^[^\\n`\\[\\]\\\\!<&*_'\"]+/m;\n\nvar text = function(s) {\n    var node = new Node('text');\n    node._literal = s;\n    return node;\n};\n\n// INLINE PARSER\n\n// These are methods of an InlineParser object, defined below.\n// An InlineParser keeps track of a subject (a string to be\n// parsed) and a position in that subject.\n\n// If re matches at current position in the subject, advance\n// position in subject and return the match; otherwise return null.\nvar match = function(re) {\n    var m = re.exec(this.subject.slice(this.pos));\n    if (m === null) {\n        return null;\n    } else {\n        this.pos += m.index + m[0].length;\n        return m[0];\n    }\n};\n\n// Returns the code for the character at the current subject position, or -1\n// there are no more characters.\nvar peek = function() {\n    if (this.pos < this.subject.length) {\n        return this.subject.charCodeAt(this.pos);\n    } else {\n        return -1;\n    }\n};\n\n// Parse zero or more space characters, including at most one newline\nvar spnl = function() {\n    this.match(reSpnl);\n    return true;\n};\n\n// All of the parsers below try to match something at the current position\n// in the subject.  If they succeed in matching anything, they\n// return the inline matched, advancing the subject.\n\n// Attempt to parse backticks, adding either a backtick code span or a\n// literal sequence of backticks.\nvar parseBackticks = function(block) {\n    var ticks = this.match(reTicksHere);\n    if (ticks === null) {\n        return false;\n    }\n    var afterOpenTicks = this.pos;\n    var matched;\n    var node;\n    var contents;\n    while ((matched = this.match(reTicks)) !== null) {\n        if (matched === ticks) {\n            node = new Node('code');\n            contents = this.subject.slice(afterOpenTicks,\n                                        this.pos - ticks.length)\n                          .replace(/\\n/gm, ' ');\n            if (contents.length > 0 &&\n                contents.match(/[^ ]/) !== null &&\n                contents[0] == ' ' &&\n                contents[contents.length - 1] == ' ') {\n                node._literal = contents.slice(1, contents.length - 1);\n            } else {\n                node._literal = contents;\n            }\n            block.appendChild(node);\n            return true;\n        }\n    }\n    // If we got here, we didn't match a closing backtick sequence.\n    this.pos = afterOpenTicks;\n    block.appendChild(text(ticks));\n    return true;\n};\n\n// Parse a backslash-escaped special character, adding either the escaped\n// character, a hard line break (if the backslash is followed by a newline),\n// or a literal backslash to the block's children.  Assumes current character\n// is a backslash.\nvar parseBackslash = function(block) {\n    var subj = this.subject;\n    var node;\n    this.pos += 1;\n    if (this.peek() === C_NEWLINE) {\n        this.pos += 1;\n        node = new Node('linebreak');\n        block.appendChild(node);\n    } else if (reEscapable.test(subj.charAt(this.pos))) {\n        block.appendChild(text(subj.charAt(this.pos)));\n        this.pos += 1;\n    } else {\n        block.appendChild(text('\\\\'));\n    }\n    return true;\n};\n\n// Attempt to parse an autolink (URL or email in pointy brackets).\nvar parseAutolink = function(block) {\n    var m;\n    var dest;\n    var node;\n    if ((m = this.match(reEmailAutolink))) {\n        dest = m.slice(1, m.length - 1);\n        node = new Node('link');\n        node._destination = normalizeURI('mailto:' + dest);\n        node._title = '';\n        node.appendChild(text(dest));\n        block.appendChild(node);\n        return true;\n    } else if ((m = this.match(reAutolink))) {\n        dest = m.slice(1, m.length - 1);\n        node = new Node('link');\n        node._destination = normalizeURI(dest);\n        node._title = '';\n        node.appendChild(text(dest));\n        block.appendChild(node);\n        return true;\n    } else {\n        return false;\n    }\n};\n\n// Attempt to parse a raw HTML tag.\nvar parseHtmlTag = function(block) {\n    var m = this.match(reHtmlTag);\n    if (m === null) {\n        return false;\n    } else {\n        var node = new Node('html_inline');\n        node._literal = m;\n        block.appendChild(node);\n        return true;\n    }\n};\n\n// Scan a sequence of characters with code cc, and return information about\n// the number of delimiters and whether they are positioned such that\n// they can open and/or close emphasis or strong emphasis.  A utility\n// function for strong/emph parsing.\nvar scanDelims = function(cc) {\n    var numdelims = 0;\n    var char_before, char_after, cc_after;\n    var startpos = this.pos;\n    var left_flanking, right_flanking, can_open, can_close;\n    var after_is_whitespace, after_is_punctuation, before_is_whitespace, before_is_punctuation;\n\n    if (cc === C_SINGLEQUOTE || cc === C_DOUBLEQUOTE) {\n        numdelims++;\n        this.pos++;\n    } else {\n        while (this.peek() === cc) {\n            numdelims++;\n            this.pos++;\n        }\n    }\n\n    if (numdelims === 0) {\n        return null;\n    }\n\n    char_before = startpos === 0 ? '\\n' : this.subject.charAt(startpos - 1);\n\n    cc_after = this.peek();\n    if (cc_after === -1) {\n        char_after = '\\n';\n    } else {\n        char_after = fromCodePoint(cc_after);\n    }\n\n    after_is_whitespace = reUnicodeWhitespaceChar.test(char_after);\n    after_is_punctuation = rePunctuation.test(char_after);\n    before_is_whitespace = reUnicodeWhitespaceChar.test(char_before);\n    before_is_punctuation = rePunctuation.test(char_before);\n\n    left_flanking = !after_is_whitespace &&\n            (!after_is_punctuation || before_is_whitespace || before_is_punctuation);\n    right_flanking = !before_is_whitespace &&\n            (!before_is_punctuation || after_is_whitespace || after_is_punctuation);\n    if (cc === C_UNDERSCORE) {\n        can_open = left_flanking &&\n            (!right_flanking || before_is_punctuation);\n        can_close = right_flanking &&\n            (!left_flanking || after_is_punctuation);\n    } else if (cc === C_SINGLEQUOTE || cc === C_DOUBLEQUOTE) {\n        can_open = left_flanking && !right_flanking;\n        can_close = right_flanking;\n    } else {\n        can_open = left_flanking;\n        can_close = right_flanking;\n    }\n    this.pos = startpos;\n    return { numdelims: numdelims,\n             can_open: can_open,\n             can_close: can_close };\n};\n\n// Handle a delimiter marker for emphasis or a quote.\nvar handleDelim = function(cc, block) {\n    var res = this.scanDelims(cc);\n    if (!res) {\n        return false;\n    }\n    var numdelims = res.numdelims;\n    var startpos = this.pos;\n    var contents;\n\n    this.pos += numdelims;\n    if (cc === C_SINGLEQUOTE) {\n        contents = \"\\u2019\";\n    } else if (cc === C_DOUBLEQUOTE) {\n        contents = \"\\u201C\";\n    } else {\n        contents = this.subject.slice(startpos, this.pos);\n    }\n    var node = text(contents);\n    block.appendChild(node);\n\n    // Add entry to stack for this opener\n    if ((res.can_open || res.can_close) &&\n        (this.options.smart || cc !== C_SINGLEQUOTE || cc !== C_DOUBLEQUOTE)){\n      this.delimiters = { cc: cc,\n                          numdelims: numdelims,\n                          origdelims: numdelims,\n                          node: node,\n                          previous: this.delimiters,\n                          next: null,\n                          can_open: res.can_open,\n                          can_close: res.can_close };\n      if (this.delimiters.previous !== null) {\n        this.delimiters.previous.next = this.delimiters;\n      }\n    }\n\n    return true;\n\n};\n\nvar removeDelimiter = function(delim) {\n    if (delim.previous !== null) {\n        delim.previous.next = delim.next;\n    }\n    if (delim.next === null) {\n        // top of stack\n        this.delimiters = delim.previous;\n    } else {\n        delim.next.previous = delim.previous;\n    }\n};\n\nvar removeDelimitersBetween = function(bottom, top) {\n    if (bottom.next !== top) {\n        bottom.next = top;\n        top.previous = bottom;\n    }\n};\n\nvar processEmphasis = function(stack_bottom) {\n    var opener, closer, old_closer;\n    var opener_inl, closer_inl;\n    var tempstack;\n    var use_delims;\n    var tmp, next;\n    var opener_found;\n    var openers_bottom = [[],[],[]];\n    var odd_match = false;\n\n    for (var i=0; i < 3; i++) {\n        openers_bottom[i][C_UNDERSCORE] = stack_bottom;\n        openers_bottom[i][C_ASTERISK] = stack_bottom;\n        openers_bottom[i][C_SINGLEQUOTE] = stack_bottom;\n        openers_bottom[i][C_DOUBLEQUOTE] = stack_bottom;\n    }\n    // find first closer above stack_bottom:\n    closer = this.delimiters;\n    while (closer !== null && closer.previous !== stack_bottom) {\n        closer = closer.previous;\n    }\n    // move forward, looking for closers, and handling each\n    while (closer !== null) {\n        var closercc = closer.cc;\n        if (!closer.can_close) {\n            closer = closer.next;\n        } else {\n            // found emphasis closer. now look back for first matching opener:\n            opener = closer.previous;\n            opener_found = false;\n            while (opener !== null && opener !== stack_bottom &&\n                   opener !== openers_bottom[closer.origdelims % 3][closercc]) {\n                odd_match = (closer.can_open || opener.can_close) &&\n                     closer.origdelims % 3 !== 0 &&\n                     (opener.origdelims + closer.origdelims) % 3 === 0;\n                if (opener.cc === closer.cc && opener.can_open && !odd_match) {\n                    opener_found = true;\n                    break;\n                }\n                opener = opener.previous;\n            }\n            old_closer = closer;\n\n            if (closercc === C_ASTERISK || closercc === C_UNDERSCORE) {\n                if (!opener_found) {\n                    closer = closer.next;\n                } else {\n                    // calculate actual number of delimiters used from closer\n                    use_delims =\n                      (closer.numdelims >= 2 && opener.numdelims >= 2) ? 2 : 1;\n\n                    opener_inl = opener.node;\n                    closer_inl = closer.node;\n\n                    // remove used delimiters from stack elts and inlines\n                    opener.numdelims -= use_delims;\n                    closer.numdelims -= use_delims;\n                    opener_inl._literal =\n                        opener_inl._literal.slice(0,\n                                                  opener_inl._literal.length - use_delims);\n                    closer_inl._literal =\n                        closer_inl._literal.slice(0,\n                                                  closer_inl._literal.length - use_delims);\n\n                    // build contents for new emph element\n                    var emph = new Node(use_delims === 1 ? 'emph' : 'strong');\n\n                    tmp = opener_inl._next;\n                    while (tmp && tmp !== closer_inl) {\n                        next = tmp._next;\n                        tmp.unlink();\n                        emph.appendChild(tmp);\n                        tmp = next;\n                    }\n\n                    opener_inl.insertAfter(emph);\n\n                    // remove elts between opener and closer in delimiters stack\n                    removeDelimitersBetween(opener, closer);\n\n                    // if opener has 0 delims, remove it and the inline\n                    if (opener.numdelims === 0) {\n                        opener_inl.unlink();\n                        this.removeDelimiter(opener);\n                    }\n\n                    if (closer.numdelims === 0) {\n                        closer_inl.unlink();\n                        tempstack = closer.next;\n                        this.removeDelimiter(closer);\n                        closer = tempstack;\n                    }\n\n                }\n\n            } else if (closercc === C_SINGLEQUOTE) {\n                closer.node._literal = \"\\u2019\";\n                if (opener_found) {\n                    opener.node._literal = \"\\u2018\";\n                }\n                closer = closer.next;\n\n            } else if (closercc === C_DOUBLEQUOTE) {\n                closer.node._literal = \"\\u201D\";\n                if (opener_found) {\n                    opener.node.literal = \"\\u201C\";\n                }\n                closer = closer.next;\n\n            }\n            if (!opener_found) {\n                // Set lower bound for future searches for openers:\n                openers_bottom[old_closer.origdelims % 3][closercc] = old_closer.previous;\n                if (!old_closer.can_open) {\n                    // We can remove a closer that can't be an opener,\n                    // once we've seen there's no matching opener:\n                    this.removeDelimiter(old_closer);\n                }\n            }\n        }\n\n    }\n\n    // remove all delimiters\n    while (this.delimiters !== null && this.delimiters !== stack_bottom) {\n        this.removeDelimiter(this.delimiters);\n    }\n};\n\n// Attempt to parse link title (sans quotes), returning the string\n// or null if no match.\nvar parseLinkTitle = function() {\n    var title = this.match(reLinkTitle);\n    if (title === null) {\n        return null;\n    } else {\n        // chop off quotes from title and unescape:\n        return unescapeString(title.substr(1, title.length - 2));\n    }\n};\n\n// Attempt to parse link destination, returning the string or\n// null if no match.\nvar parseLinkDestination = function() {\n    var res = this.match(reLinkDestinationBraces);\n    if (res === null) {\n        if (this.peek() === C_LESSTHAN) {\n            return null;\n        }\n        // TODO handrolled parser; res should be null or the string\n        var savepos = this.pos;\n        var openparens = 0;\n        var c;\n        while ((c = this.peek()) !== -1) {\n            if (c === C_BACKSLASH\n                && reEscapable.test(this.subject.charAt(this.pos + 1))) {\n                this.pos += 1;\n                if (this.peek() !== -1) {\n                    this.pos += 1;\n                }\n            } else if (c === C_OPEN_PAREN) {\n                this.pos += 1;\n                openparens += 1;\n            } else if (c === C_CLOSE_PAREN) {\n                if (openparens < 1) {\n                    break;\n                } else {\n                    this.pos += 1;\n                    openparens -= 1;\n                }\n            } else if (reWhitespaceChar.exec(fromCodePoint(c)) !== null) {\n                break;\n            } else {\n                this.pos += 1;\n            }\n        }\n        if (this.pos === savepos && c !== C_CLOSE_PAREN) {\n          return null;\n        }\n        if (openparens !== 0) {\n          return null;\n        }\n        res = this.subject.substr(savepos, this.pos - savepos);\n        return normalizeURI(unescapeString(res));\n    } else {  // chop off surrounding <..>:\n        return normalizeURI(unescapeString(res.substr(1, res.length - 2)));\n    }\n};\n\n// Attempt to parse a link label, returning number of characters parsed.\nvar parseLinkLabel = function() {\n    var m = this.match(reLinkLabel);\n    if (m === null || m.length > 1001) {\n        return 0;\n    } else {\n        return m.length;\n    }\n};\n\n// Add open bracket to delimiter stack and add a text node to block's children.\nvar parseOpenBracket = function(block) {\n    var startpos = this.pos;\n    this.pos += 1;\n\n    var node = text('[');\n    block.appendChild(node);\n\n    // Add entry to stack for this opener\n    this.addBracket(node, startpos, false);\n    return true;\n};\n\n// IF next character is [, and ! delimiter to delimiter stack and\n// add a text node to block's children.  Otherwise just add a text node.\nvar parseBang = function(block) {\n    var startpos = this.pos;\n    this.pos += 1;\n    if (this.peek() === C_OPEN_BRACKET) {\n        this.pos += 1;\n\n        var node = text('![');\n        block.appendChild(node);\n\n        // Add entry to stack for this opener\n        this.addBracket(node, startpos + 1, true);\n    } else {\n        block.appendChild(text('!'));\n    }\n    return true;\n};\n\n// Try to match close bracket against an opening in the delimiter\n// stack.  Add either a link or image, or a plain [ character,\n// to block's children.  If there is a matching delimiter,\n// remove it from the delimiter stack.\nvar parseCloseBracket = function(block) {\n    var startpos;\n    var is_image;\n    var dest;\n    var title;\n    var matched = false;\n    var reflabel;\n    var opener;\n\n    this.pos += 1;\n    startpos = this.pos;\n\n    // get last [ or ![\n    opener = this.brackets;\n\n    if (opener === null) {\n        // no matched opener, just return a literal\n        block.appendChild(text(']'));\n        return true;\n    }\n\n    if (!opener.active) {\n        // no matched opener, just return a literal\n        block.appendChild(text(']'));\n        // take opener off brackets stack\n        this.removeBracket();\n        return true;\n    }\n\n    // If we got here, open is a potential opener\n    is_image = opener.image;\n\n    // Check to see if we have a link/image\n\n    var savepos = this.pos;\n\n    // Inline link?\n    if (this.peek() === C_OPEN_PAREN) {\n        this.pos++;\n        if (this.spnl() &&\n            ((dest = this.parseLinkDestination()) !== null) &&\n            this.spnl() &&\n            // make sure there's a space before the title:\n            (reWhitespaceChar.test(this.subject.charAt(this.pos - 1)) &&\n             (title = this.parseLinkTitle()) || true) &&\n            this.spnl() &&\n            this.peek() === C_CLOSE_PAREN) {\n            this.pos += 1;\n            matched = true;\n        } else {\n            this.pos = savepos;\n        }\n    }\n\n    if (!matched) {\n\n        // Next, see if there's a link label\n        var beforelabel = this.pos;\n        var n = this.parseLinkLabel();\n        if (n > 2) {\n            reflabel = this.subject.slice(beforelabel, beforelabel + n);\n        } else if (!opener.bracketAfter) {\n            // Empty or missing second label means to use the first label as the reference.\n            // The reference must not contain a bracket. If we know there's a bracket, we don't even bother checking it.\n            reflabel = this.subject.slice(opener.index, startpos);\n        }\n        if (n === 0) {\n            // If shortcut reference link, rewind before spaces we skipped.\n            this.pos = savepos;\n        }\n\n        if (reflabel) {\n            // lookup rawlabel in refmap\n            var link = this.refmap[normalizeReference(reflabel)];\n            if (link) {\n                dest = link.destination;\n                title = link.title;\n                matched = true;\n            }\n        }\n    }\n\n    if (matched) {\n        var node = new Node(is_image ? 'image' : 'link');\n        node._destination = dest;\n        node._title = title || '';\n\n        var tmp, next;\n        tmp = opener.node._next;\n        while (tmp) {\n            next = tmp._next;\n            tmp.unlink();\n            node.appendChild(tmp);\n            tmp = next;\n        }\n        block.appendChild(node);\n        this.processEmphasis(opener.previousDelimiter);\n        this.removeBracket();\n        opener.node.unlink();\n\n        // We remove this bracket and processEmphasis will remove later delimiters.\n        // Now, for a link, we also deactivate earlier link openers.\n        // (no links in links)\n        if (!is_image) {\n          opener = this.brackets;\n          while (opener !== null) {\n            if (!opener.image) {\n                opener.active = false; // deactivate this opener\n            }\n            opener = opener.previous;\n          }\n        }\n\n        return true;\n\n    } else { // no match\n\n        this.removeBracket();  // remove this opener from stack\n        this.pos = startpos;\n        block.appendChild(text(']'));\n        return true;\n    }\n\n};\n\nvar addBracket = function(node, index, image) {\n    if (this.brackets !== null) {\n        this.brackets.bracketAfter = true;\n    }\n    this.brackets = { node: node,\n                      previous: this.brackets,\n                      previousDelimiter: this.delimiters,\n                      index: index,\n                      image: image,\n                      active: true };\n};\n\nvar removeBracket = function() {\n    this.brackets = this.brackets.previous;\n};\n\n// Attempt to parse an entity.\nvar parseEntity = function(block) {\n    var m;\n    if ((m = this.match(reEntityHere))) {\n        block.appendChild(text(decodeHTML(m)));\n        return true;\n    } else {\n        return false;\n    }\n};\n\n// Parse a run of ordinary characters, or a single character with\n// a special meaning in markdown, as a plain string.\nvar parseString = function(block) {\n    var m;\n    if ((m = this.match(reMain))) {\n        if (this.options.smart) {\n            block.appendChild(text(\n                m.replace(reEllipses, \"\\u2026\")\n                    .replace(reDash, function(chars) {\n                        var enCount = 0;\n                        var emCount = 0;\n                        if (chars.length % 3 === 0) { // If divisible by 3, use all em dashes\n                            emCount = chars.length / 3;\n                        } else if (chars.length % 2 === 0) { // If divisible by 2, use all en dashes\n                            enCount = chars.length / 2;\n                        } else if (chars.length % 3 === 2) { // If 2 extra dashes, use en dash for last 2; em dashes for rest\n                            enCount = 1;\n                            emCount = (chars.length - 2) / 3;\n                        } else { // Use en dashes for last 4 hyphens; em dashes for rest\n                            enCount = 2;\n                            emCount = (chars.length - 4) / 3;\n                        }\n                        return \"\\u2014\".repeat(emCount) + \"\\u2013\".repeat(enCount);\n                    })));\n        } else {\n            block.appendChild(text(m));\n        }\n        return true;\n    } else {\n        return false;\n    }\n};\n\n// Parse a newline.  If it was preceded by two spaces, return a hard\n// line break; otherwise a soft line break.\nvar parseNewline = function(block) {\n    this.pos += 1; // assume we're at a \\n\n    // check previous node for trailing spaces\n    var lastc = block._lastChild;\n    if (lastc && lastc.type === 'text' && lastc._literal[lastc._literal.length - 1] === ' ') {\n        var hardbreak = lastc._literal[lastc._literal.length - 2] === ' ';\n        lastc._literal = lastc._literal.replace(reFinalSpace, '');\n        block.appendChild(new Node(hardbreak ? 'linebreak' : 'softbreak'));\n    } else {\n        block.appendChild(new Node('softbreak'));\n    }\n    this.match(reInitialSpace); // gobble leading spaces in next line\n    return true;\n};\n\n// Attempt to parse a link reference, modifying refmap.\nvar parseReference = function(s, refmap) {\n    this.subject = s;\n    this.pos = 0;\n    var rawlabel;\n    var dest;\n    var title;\n    var matchChars;\n    var startpos = this.pos;\n\n    // label:\n    matchChars = this.parseLinkLabel();\n    if (matchChars === 0) {\n        return 0;\n    } else {\n        rawlabel = this.subject.substr(0, matchChars);\n    }\n\n    // colon:\n    if (this.peek() === C_COLON) {\n        this.pos++;\n    } else {\n        this.pos = startpos;\n        return 0;\n    }\n\n    //  link url\n    this.spnl();\n\n    dest = this.parseLinkDestination();\n    if (dest === null) {\n        this.pos = startpos;\n        return 0;\n    }\n\n    var beforetitle = this.pos;\n    this.spnl();\n    if (this.pos !== beforetitle) {\n        title = this.parseLinkTitle();\n    }\n    if (title === null) {\n        title = '';\n        // rewind before spaces\n        this.pos = beforetitle;\n    }\n\n    // make sure we're at line end:\n    var atLineEnd = true;\n    if (this.match(reSpaceAtEndOfLine) === null) {\n        if (title === '') {\n            atLineEnd = false;\n        } else {\n            // the potential title we found is not at the line end,\n            // but it could still be a legal link reference if we\n            // discard the title\n            title = '';\n            // rewind before spaces\n            this.pos = beforetitle;\n            // and instead check if the link URL is at the line end\n            atLineEnd = this.match(reSpaceAtEndOfLine) !== null;\n        }\n    }\n\n    if (!atLineEnd) {\n        this.pos = startpos;\n        return 0;\n    }\n\n    var normlabel = normalizeReference(rawlabel);\n    if (normlabel === '') {\n        // label must contain non-whitespace characters\n        this.pos = startpos;\n        return 0;\n    }\n\n    if (!refmap[normlabel]) {\n        refmap[normlabel] = { destination: dest, title: title };\n    }\n    return this.pos - startpos;\n};\n\n// Parse the next inline element in subject, advancing subject position.\n// On success, add the result to block's children and return true.\n// On failure, return false.\nvar parseInline = function(block) {\n    var res = false;\n    var c = this.peek();\n    if (c === -1) {\n        return false;\n    }\n    switch(c) {\n    case C_NEWLINE:\n        res = this.parseNewline(block);\n        break;\n    case C_BACKSLASH:\n        res = this.parseBackslash(block);\n        break;\n    case C_BACKTICK:\n        res = this.parseBackticks(block);\n        break;\n    case C_ASTERISK:\n    case C_UNDERSCORE:\n        res = this.handleDelim(c, block);\n        break;\n    case C_SINGLEQUOTE:\n    case C_DOUBLEQUOTE:\n        res = this.options.smart && this.handleDelim(c, block);\n        break;\n    case C_OPEN_BRACKET:\n        res = this.parseOpenBracket(block);\n        break;\n    case C_BANG:\n        res = this.parseBang(block);\n        break;\n    case C_CLOSE_BRACKET:\n        res = this.parseCloseBracket(block);\n        break;\n    case C_LESSTHAN:\n        res = this.parseAutolink(block) || this.parseHtmlTag(block);\n        break;\n    case C_AMPERSAND:\n        res = this.parseEntity(block);\n        break;\n    default:\n        res = this.parseString(block);\n        break;\n    }\n    if (!res) {\n        this.pos += 1;\n        block.appendChild(text(fromCodePoint(c)));\n    }\n\n    return true;\n};\n\n// Parse string content in block into inline children,\n// using refmap to resolve references.\nvar parseInlines = function(block) {\n    this.subject = block._string_content.trim();\n    this.pos = 0;\n    this.delimiters = null;\n    this.brackets = null;\n    while (this.parseInline(block)) {\n    }\n    block._string_content = null; // allow raw string to be garbage collected\n    this.processEmphasis(null);\n};\n\n// The InlineParser object.\nfunction InlineParser(options){\n    return {\n        subject: '',\n        delimiters: null,  // used by handleDelim method\n        brackets: null,\n        pos: 0,\n        refmap: {},\n        match: match,\n        peek: peek,\n        spnl: spnl,\n        parseBackticks: parseBackticks,\n        parseBackslash: parseBackslash,\n        parseAutolink: parseAutolink,\n        parseHtmlTag: parseHtmlTag,\n        scanDelims: scanDelims,\n        handleDelim: handleDelim,\n        parseLinkTitle: parseLinkTitle,\n        parseLinkDestination: parseLinkDestination,\n        parseLinkLabel: parseLinkLabel,\n        parseOpenBracket: parseOpenBracket,\n        parseBang: parseBang,\n        parseCloseBracket: parseCloseBracket,\n        addBracket: addBracket,\n        removeBracket: removeBracket,\n        parseEntity: parseEntity,\n        parseString: parseString,\n        parseNewline: parseNewline,\n        parseReference: parseReference,\n        parseInline: parseInline,\n        processEmphasis: processEmphasis,\n        removeDelimiter: removeDelimiter,\n        options: options || {},\n        parse: parseInlines\n    };\n}\n\nmodule.exports = InlineParser;\n","\"use strict\";\n\n/* The bulk of this code derives from https://github.com/dmoscrop/fold-case\nBut in addition to case-folding, we also normalize whitespace.\n\nfold-case is Copyright Mathias Bynens <https://mathiasbynens.be/>\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\nLIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\nWITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n/*eslint-disable  key-spacing, comma-spacing */\n\nvar regex = /[ \\t\\r\\n]+|[A-Z\\xB5\\xC0-\\xD6\\xD8-\\xDF\\u0100\\u0102\\u0104\\u0106\\u0108\\u010A\\u010C\\u010E\\u0110\\u0112\\u0114\\u0116\\u0118\\u011A\\u011C\\u011E\\u0120\\u0122\\u0124\\u0126\\u0128\\u012A\\u012C\\u012E\\u0130\\u0132\\u0134\\u0136\\u0139\\u013B\\u013D\\u013F\\u0141\\u0143\\u0145\\u0147\\u0149\\u014A\\u014C\\u014E\\u0150\\u0152\\u0154\\u0156\\u0158\\u015A\\u015C\\u015E\\u0160\\u0162\\u0164\\u0166\\u0168\\u016A\\u016C\\u016E\\u0170\\u0172\\u0174\\u0176\\u0178\\u0179\\u017B\\u017D\\u017F\\u0181\\u0182\\u0184\\u0186\\u0187\\u0189-\\u018B\\u018E-\\u0191\\u0193\\u0194\\u0196-\\u0198\\u019C\\u019D\\u019F\\u01A0\\u01A2\\u01A4\\u01A6\\u01A7\\u01A9\\u01AC\\u01AE\\u01AF\\u01B1-\\u01B3\\u01B5\\u01B7\\u01B8\\u01BC\\u01C4\\u01C5\\u01C7\\u01C8\\u01CA\\u01CB\\u01CD\\u01CF\\u01D1\\u01D3\\u01D5\\u01D7\\u01D9\\u01DB\\u01DE\\u01E0\\u01E2\\u01E4\\u01E6\\u01E8\\u01EA\\u01EC\\u01EE\\u01F0-\\u01F2\\u01F4\\u01F6-\\u01F8\\u01FA\\u01FC\\u01FE\\u0200\\u0202\\u0204\\u0206\\u0208\\u020A\\u020C\\u020E\\u0210\\u0212\\u0214\\u0216\\u0218\\u021A\\u021C\\u021E\\u0220\\u0222\\u0224\\u0226\\u0228\\u022A\\u022C\\u022E\\u0230\\u0232\\u023A\\u023B\\u023D\\u023E\\u0241\\u0243-\\u0246\\u0248\\u024A\\u024C\\u024E\\u0345\\u0370\\u0372\\u0376\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03AB\\u03B0\\u03C2\\u03CF-\\u03D1\\u03D5\\u03D6\\u03D8\\u03DA\\u03DC\\u03DE\\u03E0\\u03E2\\u03E4\\u03E6\\u03E8\\u03EA\\u03EC\\u03EE\\u03F0\\u03F1\\u03F4\\u03F5\\u03F7\\u03F9\\u03FA\\u03FD-\\u042F\\u0460\\u0462\\u0464\\u0466\\u0468\\u046A\\u046C\\u046E\\u0470\\u0472\\u0474\\u0476\\u0478\\u047A\\u047C\\u047E\\u0480\\u048A\\u048C\\u048E\\u0490\\u0492\\u0494\\u0496\\u0498\\u049A\\u049C\\u049E\\u04A0\\u04A2\\u04A4\\u04A6\\u04A8\\u04AA\\u04AC\\u04AE\\u04B0\\u04B2\\u04B4\\u04B6\\u04B8\\u04BA\\u04BC\\u04BE\\u04C0\\u04C1\\u04C3\\u04C5\\u04C7\\u04C9\\u04CB\\u04CD\\u04D0\\u04D2\\u04D4\\u04D6\\u04D8\\u04DA\\u04DC\\u04DE\\u04E0\\u04E2\\u04E4\\u04E6\\u04E8\\u04EA\\u04EC\\u04EE\\u04F0\\u04F2\\u04F4\\u04F6\\u04F8\\u04FA\\u04FC\\u04FE\\u0500\\u0502\\u0504\\u0506\\u0508\\u050A\\u050C\\u050E\\u0510\\u0512\\u0514\\u0516\\u0518\\u051A\\u051C\\u051E\\u0520\\u0522\\u0524\\u0526\\u0528\\u052A\\u052C\\u052E\\u0531-\\u0556\\u0587\\u10A0-\\u10C5\\u10C7\\u10CD\\u1E00\\u1E02\\u1E04\\u1E06\\u1E08\\u1E0A\\u1E0C\\u1E0E\\u1E10\\u1E12\\u1E14\\u1E16\\u1E18\\u1E1A\\u1E1C\\u1E1E\\u1E20\\u1E22\\u1E24\\u1E26\\u1E28\\u1E2A\\u1E2C\\u1E2E\\u1E30\\u1E32\\u1E34\\u1E36\\u1E38\\u1E3A\\u1E3C\\u1E3E\\u1E40\\u1E42\\u1E44\\u1E46\\u1E48\\u1E4A\\u1E4C\\u1E4E\\u1E50\\u1E52\\u1E54\\u1E56\\u1E58\\u1E5A\\u1E5C\\u1E5E\\u1E60\\u1E62\\u1E64\\u1E66\\u1E68\\u1E6A\\u1E6C\\u1E6E\\u1E70\\u1E72\\u1E74\\u1E76\\u1E78\\u1E7A\\u1E7C\\u1E7E\\u1E80\\u1E82\\u1E84\\u1E86\\u1E88\\u1E8A\\u1E8C\\u1E8E\\u1E90\\u1E92\\u1E94\\u1E96-\\u1E9B\\u1E9E\\u1EA0\\u1EA2\\u1EA4\\u1EA6\\u1EA8\\u1EAA\\u1EAC\\u1EAE\\u1EB0\\u1EB2\\u1EB4\\u1EB6\\u1EB8\\u1EBA\\u1EBC\\u1EBE\\u1EC0\\u1EC2\\u1EC4\\u1EC6\\u1EC8\\u1ECA\\u1ECC\\u1ECE\\u1ED0\\u1ED2\\u1ED4\\u1ED6\\u1ED8\\u1EDA\\u1EDC\\u1EDE\\u1EE0\\u1EE2\\u1EE4\\u1EE6\\u1EE8\\u1EEA\\u1EEC\\u1EEE\\u1EF0\\u1EF2\\u1EF4\\u1EF6\\u1EF8\\u1EFA\\u1EFC\\u1EFE\\u1F08-\\u1F0F\\u1F18-\\u1F1D\\u1F28-\\u1F2F\\u1F38-\\u1F3F\\u1F48-\\u1F4D\\u1F50\\u1F52\\u1F54\\u1F56\\u1F59\\u1F5B\\u1F5D\\u1F5F\\u1F68-\\u1F6F\\u1F80-\\u1FAF\\u1FB2-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD2\\u1FD3\\u1FD6-\\u1FDB\\u1FE2-\\u1FE4\\u1FE6-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2126\\u212A\\u212B\\u2132\\u2160-\\u216F\\u2183\\u24B6-\\u24CF\\u2C00-\\u2C2E\\u2C60\\u2C62-\\u2C64\\u2C67\\u2C69\\u2C6B\\u2C6D-\\u2C70\\u2C72\\u2C75\\u2C7E-\\u2C80\\u2C82\\u2C84\\u2C86\\u2C88\\u2C8A\\u2C8C\\u2C8E\\u2C90\\u2C92\\u2C94\\u2C96\\u2C98\\u2C9A\\u2C9C\\u2C9E\\u2CA0\\u2CA2\\u2CA4\\u2CA6\\u2CA8\\u2CAA\\u2CAC\\u2CAE\\u2CB0\\u2CB2\\u2CB4\\u2CB6\\u2CB8\\u2CBA\\u2CBC\\u2CBE\\u2CC0\\u2CC2\\u2CC4\\u2CC6\\u2CC8\\u2CCA\\u2CCC\\u2CCE\\u2CD0\\u2CD2\\u2CD4\\u2CD6\\u2CD8\\u2CDA\\u2CDC\\u2CDE\\u2CE0\\u2CE2\\u2CEB\\u2CED\\u2CF2\\uA640\\uA642\\uA644\\uA646\\uA648\\uA64A\\uA64C\\uA64E\\uA650\\uA652\\uA654\\uA656\\uA658\\uA65A\\uA65C\\uA65E\\uA660\\uA662\\uA664\\uA666\\uA668\\uA66A\\uA66C\\uA680\\uA682\\uA684\\uA686\\uA688\\uA68A\\uA68C\\uA68E\\uA690\\uA692\\uA694\\uA696\\uA698\\uA69A\\uA722\\uA724\\uA726\\uA728\\uA72A\\uA72C\\uA72E\\uA732\\uA734\\uA736\\uA738\\uA73A\\uA73C\\uA73E\\uA740\\uA742\\uA744\\uA746\\uA748\\uA74A\\uA74C\\uA74E\\uA750\\uA752\\uA754\\uA756\\uA758\\uA75A\\uA75C\\uA75E\\uA760\\uA762\\uA764\\uA766\\uA768\\uA76A\\uA76C\\uA76E\\uA779\\uA77B\\uA77D\\uA77E\\uA780\\uA782\\uA784\\uA786\\uA78B\\uA78D\\uA790\\uA792\\uA796\\uA798\\uA79A\\uA79C\\uA79E\\uA7A0\\uA7A2\\uA7A4\\uA7A6\\uA7A8\\uA7AA-\\uA7AD\\uA7B0\\uA7B1\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFF21-\\uFF3A]|\\uD801[\\uDC00-\\uDC27]|\\uD806[\\uDCA0-\\uDCBF]/g;\n\nvar map = {'A':'a','B':'b','C':'c','D':'d','E':'e','F':'f','G':'g','H':'h','I':'i','J':'j','K':'k','L':'l','M':'m','N':'n','O':'o','P':'p','Q':'q','R':'r','S':'s','T':'t','U':'u','V':'v','W':'w','X':'x','Y':'y','Z':'z','\\xB5':'\\u03BC','\\xC0':'\\xE0','\\xC1':'\\xE1','\\xC2':'\\xE2','\\xC3':'\\xE3','\\xC4':'\\xE4','\\xC5':'\\xE5','\\xC6':'\\xE6','\\xC7':'\\xE7','\\xC8':'\\xE8','\\xC9':'\\xE9','\\xCA':'\\xEA','\\xCB':'\\xEB','\\xCC':'\\xEC','\\xCD':'\\xED','\\xCE':'\\xEE','\\xCF':'\\xEF','\\xD0':'\\xF0','\\xD1':'\\xF1','\\xD2':'\\xF2','\\xD3':'\\xF3','\\xD4':'\\xF4','\\xD5':'\\xF5','\\xD6':'\\xF6','\\xD8':'\\xF8','\\xD9':'\\xF9','\\xDA':'\\xFA','\\xDB':'\\xFB','\\xDC':'\\xFC','\\xDD':'\\xFD','\\xDE':'\\xFE','\\u0100':'\\u0101','\\u0102':'\\u0103','\\u0104':'\\u0105','\\u0106':'\\u0107','\\u0108':'\\u0109','\\u010A':'\\u010B','\\u010C':'\\u010D','\\u010E':'\\u010F','\\u0110':'\\u0111','\\u0112':'\\u0113','\\u0114':'\\u0115','\\u0116':'\\u0117','\\u0118':'\\u0119','\\u011A':'\\u011B','\\u011C':'\\u011D','\\u011E':'\\u011F','\\u0120':'\\u0121','\\u0122':'\\u0123','\\u0124':'\\u0125','\\u0126':'\\u0127','\\u0128':'\\u0129','\\u012A':'\\u012B','\\u012C':'\\u012D','\\u012E':'\\u012F','\\u0132':'\\u0133','\\u0134':'\\u0135','\\u0136':'\\u0137','\\u0139':'\\u013A','\\u013B':'\\u013C','\\u013D':'\\u013E','\\u013F':'\\u0140','\\u0141':'\\u0142','\\u0143':'\\u0144','\\u0145':'\\u0146','\\u0147':'\\u0148','\\u014A':'\\u014B','\\u014C':'\\u014D','\\u014E':'\\u014F','\\u0150':'\\u0151','\\u0152':'\\u0153','\\u0154':'\\u0155','\\u0156':'\\u0157','\\u0158':'\\u0159','\\u015A':'\\u015B','\\u015C':'\\u015D','\\u015E':'\\u015F','\\u0160':'\\u0161','\\u0162':'\\u0163','\\u0164':'\\u0165','\\u0166':'\\u0167','\\u0168':'\\u0169','\\u016A':'\\u016B','\\u016C':'\\u016D','\\u016E':'\\u016F','\\u0170':'\\u0171','\\u0172':'\\u0173','\\u0174':'\\u0175','\\u0176':'\\u0177','\\u0178':'\\xFF','\\u0179':'\\u017A','\\u017B':'\\u017C','\\u017D':'\\u017E','\\u017F':'s','\\u0181':'\\u0253','\\u0182':'\\u0183','\\u0184':'\\u0185','\\u0186':'\\u0254','\\u0187':'\\u0188','\\u0189':'\\u0256','\\u018A':'\\u0257','\\u018B':'\\u018C','\\u018E':'\\u01DD','\\u018F':'\\u0259','\\u0190':'\\u025B','\\u0191':'\\u0192','\\u0193':'\\u0260','\\u0194':'\\u0263','\\u0196':'\\u0269','\\u0197':'\\u0268','\\u0198':'\\u0199','\\u019C':'\\u026F','\\u019D':'\\u0272','\\u019F':'\\u0275','\\u01A0':'\\u01A1','\\u01A2':'\\u01A3','\\u01A4':'\\u01A5','\\u01A6':'\\u0280','\\u01A7':'\\u01A8','\\u01A9':'\\u0283','\\u01AC':'\\u01AD','\\u01AE':'\\u0288','\\u01AF':'\\u01B0','\\u01B1':'\\u028A','\\u01B2':'\\u028B','\\u01B3':'\\u01B4','\\u01B5':'\\u01B6','\\u01B7':'\\u0292','\\u01B8':'\\u01B9','\\u01BC':'\\u01BD','\\u01C4':'\\u01C6','\\u01C5':'\\u01C6','\\u01C7':'\\u01C9','\\u01C8':'\\u01C9','\\u01CA':'\\u01CC','\\u01CB':'\\u01CC','\\u01CD':'\\u01CE','\\u01CF':'\\u01D0','\\u01D1':'\\u01D2','\\u01D3':'\\u01D4','\\u01D5':'\\u01D6','\\u01D7':'\\u01D8','\\u01D9':'\\u01DA','\\u01DB':'\\u01DC','\\u01DE':'\\u01DF','\\u01E0':'\\u01E1','\\u01E2':'\\u01E3','\\u01E4':'\\u01E5','\\u01E6':'\\u01E7','\\u01E8':'\\u01E9','\\u01EA':'\\u01EB','\\u01EC':'\\u01ED','\\u01EE':'\\u01EF','\\u01F1':'\\u01F3','\\u01F2':'\\u01F3','\\u01F4':'\\u01F5','\\u01F6':'\\u0195','\\u01F7':'\\u01BF','\\u01F8':'\\u01F9','\\u01FA':'\\u01FB','\\u01FC':'\\u01FD','\\u01FE':'\\u01FF','\\u0200':'\\u0201','\\u0202':'\\u0203','\\u0204':'\\u0205','\\u0206':'\\u0207','\\u0208':'\\u0209','\\u020A':'\\u020B','\\u020C':'\\u020D','\\u020E':'\\u020F','\\u0210':'\\u0211','\\u0212':'\\u0213','\\u0214':'\\u0215','\\u0216':'\\u0217','\\u0218':'\\u0219','\\u021A':'\\u021B','\\u021C':'\\u021D','\\u021E':'\\u021F','\\u0220':'\\u019E','\\u0222':'\\u0223','\\u0224':'\\u0225','\\u0226':'\\u0227','\\u0228':'\\u0229','\\u022A':'\\u022B','\\u022C':'\\u022D','\\u022E':'\\u022F','\\u0230':'\\u0231','\\u0232':'\\u0233','\\u023A':'\\u2C65','\\u023B':'\\u023C','\\u023D':'\\u019A','\\u023E':'\\u2C66','\\u0241':'\\u0242','\\u0243':'\\u0180','\\u0244':'\\u0289','\\u0245':'\\u028C','\\u0246':'\\u0247','\\u0248':'\\u0249','\\u024A':'\\u024B','\\u024C':'\\u024D','\\u024E':'\\u024F','\\u0345':'\\u03B9','\\u0370':'\\u0371','\\u0372':'\\u0373','\\u0376':'\\u0377','\\u037F':'\\u03F3','\\u0386':'\\u03AC','\\u0388':'\\u03AD','\\u0389':'\\u03AE','\\u038A':'\\u03AF','\\u038C':'\\u03CC','\\u038E':'\\u03CD','\\u038F':'\\u03CE','\\u0391':'\\u03B1','\\u0392':'\\u03B2','\\u0393':'\\u03B3','\\u0394':'\\u03B4','\\u0395':'\\u03B5','\\u0396':'\\u03B6','\\u0397':'\\u03B7','\\u0398':'\\u03B8','\\u0399':'\\u03B9','\\u039A':'\\u03BA','\\u039B':'\\u03BB','\\u039C':'\\u03BC','\\u039D':'\\u03BD','\\u039E':'\\u03BE','\\u039F':'\\u03BF','\\u03A0':'\\u03C0','\\u03A1':'\\u03C1','\\u03A3':'\\u03C3','\\u03A4':'\\u03C4','\\u03A5':'\\u03C5','\\u03A6':'\\u03C6','\\u03A7':'\\u03C7','\\u03A8':'\\u03C8','\\u03A9':'\\u03C9','\\u03AA':'\\u03CA','\\u03AB':'\\u03CB','\\u03C2':'\\u03C3','\\u03CF':'\\u03D7','\\u03D0':'\\u03B2','\\u03D1':'\\u03B8','\\u03D5':'\\u03C6','\\u03D6':'\\u03C0','\\u03D8':'\\u03D9','\\u03DA':'\\u03DB','\\u03DC':'\\u03DD','\\u03DE':'\\u03DF','\\u03E0':'\\u03E1','\\u03E2':'\\u03E3','\\u03E4':'\\u03E5','\\u03E6':'\\u03E7','\\u03E8':'\\u03E9','\\u03EA':'\\u03EB','\\u03EC':'\\u03ED','\\u03EE':'\\u03EF','\\u03F0':'\\u03BA','\\u03F1':'\\u03C1','\\u03F4':'\\u03B8','\\u03F5':'\\u03B5','\\u03F7':'\\u03F8','\\u03F9':'\\u03F2','\\u03FA':'\\u03FB','\\u03FD':'\\u037B','\\u03FE':'\\u037C','\\u03FF':'\\u037D','\\u0400':'\\u0450','\\u0401':'\\u0451','\\u0402':'\\u0452','\\u0403':'\\u0453','\\u0404':'\\u0454','\\u0405':'\\u0455','\\u0406':'\\u0456','\\u0407':'\\u0457','\\u0408':'\\u0458','\\u0409':'\\u0459','\\u040A':'\\u045A','\\u040B':'\\u045B','\\u040C':'\\u045C','\\u040D':'\\u045D','\\u040E':'\\u045E','\\u040F':'\\u045F','\\u0410':'\\u0430','\\u0411':'\\u0431','\\u0412':'\\u0432','\\u0413':'\\u0433','\\u0414':'\\u0434','\\u0415':'\\u0435','\\u0416':'\\u0436','\\u0417':'\\u0437','\\u0418':'\\u0438','\\u0419':'\\u0439','\\u041A':'\\u043A','\\u041B':'\\u043B','\\u041C':'\\u043C','\\u041D':'\\u043D','\\u041E':'\\u043E','\\u041F':'\\u043F','\\u0420':'\\u0440','\\u0421':'\\u0441','\\u0422':'\\u0442','\\u0423':'\\u0443','\\u0424':'\\u0444','\\u0425':'\\u0445','\\u0426':'\\u0446','\\u0427':'\\u0447','\\u0428':'\\u0448','\\u0429':'\\u0449','\\u042A':'\\u044A','\\u042B':'\\u044B','\\u042C':'\\u044C','\\u042D':'\\u044D','\\u042E':'\\u044E','\\u042F':'\\u044F','\\u0460':'\\u0461','\\u0462':'\\u0463','\\u0464':'\\u0465','\\u0466':'\\u0467','\\u0468':'\\u0469','\\u046A':'\\u046B','\\u046C':'\\u046D','\\u046E':'\\u046F','\\u0470':'\\u0471','\\u0472':'\\u0473','\\u0474':'\\u0475','\\u0476':'\\u0477','\\u0478':'\\u0479','\\u047A':'\\u047B','\\u047C':'\\u047D','\\u047E':'\\u047F','\\u0480':'\\u0481','\\u048A':'\\u048B','\\u048C':'\\u048D','\\u048E':'\\u048F','\\u0490':'\\u0491','\\u0492':'\\u0493','\\u0494':'\\u0495','\\u0496':'\\u0497','\\u0498':'\\u0499','\\u049A':'\\u049B','\\u049C':'\\u049D','\\u049E':'\\u049F','\\u04A0':'\\u04A1','\\u04A2':'\\u04A3','\\u04A4':'\\u04A5','\\u04A6':'\\u04A7','\\u04A8':'\\u04A9','\\u04AA':'\\u04AB','\\u04AC':'\\u04AD','\\u04AE':'\\u04AF','\\u04B0':'\\u04B1','\\u04B2':'\\u04B3','\\u04B4':'\\u04B5','\\u04B6':'\\u04B7','\\u04B8':'\\u04B9','\\u04BA':'\\u04BB','\\u04BC':'\\u04BD','\\u04BE':'\\u04BF','\\u04C0':'\\u04CF','\\u04C1':'\\u04C2','\\u04C3':'\\u04C4','\\u04C5':'\\u04C6','\\u04C7':'\\u04C8','\\u04C9':'\\u04CA','\\u04CB':'\\u04CC','\\u04CD':'\\u04CE','\\u04D0':'\\u04D1','\\u04D2':'\\u04D3','\\u04D4':'\\u04D5','\\u04D6':'\\u04D7','\\u04D8':'\\u04D9','\\u04DA':'\\u04DB','\\u04DC':'\\u04DD','\\u04DE':'\\u04DF','\\u04E0':'\\u04E1','\\u04E2':'\\u04E3','\\u04E4':'\\u04E5','\\u04E6':'\\u04E7','\\u04E8':'\\u04E9','\\u04EA':'\\u04EB','\\u04EC':'\\u04ED','\\u04EE':'\\u04EF','\\u04F0':'\\u04F1','\\u04F2':'\\u04F3','\\u04F4':'\\u04F5','\\u04F6':'\\u04F7','\\u04F8':'\\u04F9','\\u04FA':'\\u04FB','\\u04FC':'\\u04FD','\\u04FE':'\\u04FF','\\u0500':'\\u0501','\\u0502':'\\u0503','\\u0504':'\\u0505','\\u0506':'\\u0507','\\u0508':'\\u0509','\\u050A':'\\u050B','\\u050C':'\\u050D','\\u050E':'\\u050F','\\u0510':'\\u0511','\\u0512':'\\u0513','\\u0514':'\\u0515','\\u0516':'\\u0517','\\u0518':'\\u0519','\\u051A':'\\u051B','\\u051C':'\\u051D','\\u051E':'\\u051F','\\u0520':'\\u0521','\\u0522':'\\u0523','\\u0524':'\\u0525','\\u0526':'\\u0527','\\u0528':'\\u0529','\\u052A':'\\u052B','\\u052C':'\\u052D','\\u052E':'\\u052F','\\u0531':'\\u0561','\\u0532':'\\u0562','\\u0533':'\\u0563','\\u0534':'\\u0564','\\u0535':'\\u0565','\\u0536':'\\u0566','\\u0537':'\\u0567','\\u0538':'\\u0568','\\u0539':'\\u0569','\\u053A':'\\u056A','\\u053B':'\\u056B','\\u053C':'\\u056C','\\u053D':'\\u056D','\\u053E':'\\u056E','\\u053F':'\\u056F','\\u0540':'\\u0570','\\u0541':'\\u0571','\\u0542':'\\u0572','\\u0543':'\\u0573','\\u0544':'\\u0574','\\u0545':'\\u0575','\\u0546':'\\u0576','\\u0547':'\\u0577','\\u0548':'\\u0578','\\u0549':'\\u0579','\\u054A':'\\u057A','\\u054B':'\\u057B','\\u054C':'\\u057C','\\u054D':'\\u057D','\\u054E':'\\u057E','\\u054F':'\\u057F','\\u0550':'\\u0580','\\u0551':'\\u0581','\\u0552':'\\u0582','\\u0553':'\\u0583','\\u0554':'\\u0584','\\u0555':'\\u0585','\\u0556':'\\u0586','\\u10A0':'\\u2D00','\\u10A1':'\\u2D01','\\u10A2':'\\u2D02','\\u10A3':'\\u2D03','\\u10A4':'\\u2D04','\\u10A5':'\\u2D05','\\u10A6':'\\u2D06','\\u10A7':'\\u2D07','\\u10A8':'\\u2D08','\\u10A9':'\\u2D09','\\u10AA':'\\u2D0A','\\u10AB':'\\u2D0B','\\u10AC':'\\u2D0C','\\u10AD':'\\u2D0D','\\u10AE':'\\u2D0E','\\u10AF':'\\u2D0F','\\u10B0':'\\u2D10','\\u10B1':'\\u2D11','\\u10B2':'\\u2D12','\\u10B3':'\\u2D13','\\u10B4':'\\u2D14','\\u10B5':'\\u2D15','\\u10B6':'\\u2D16','\\u10B7':'\\u2D17','\\u10B8':'\\u2D18','\\u10B9':'\\u2D19','\\u10BA':'\\u2D1A','\\u10BB':'\\u2D1B','\\u10BC':'\\u2D1C','\\u10BD':'\\u2D1D','\\u10BE':'\\u2D1E','\\u10BF':'\\u2D1F','\\u10C0':'\\u2D20','\\u10C1':'\\u2D21','\\u10C2':'\\u2D22','\\u10C3':'\\u2D23','\\u10C4':'\\u2D24','\\u10C5':'\\u2D25','\\u10C7':'\\u2D27','\\u10CD':'\\u2D2D','\\u1E00':'\\u1E01','\\u1E02':'\\u1E03','\\u1E04':'\\u1E05','\\u1E06':'\\u1E07','\\u1E08':'\\u1E09','\\u1E0A':'\\u1E0B','\\u1E0C':'\\u1E0D','\\u1E0E':'\\u1E0F','\\u1E10':'\\u1E11','\\u1E12':'\\u1E13','\\u1E14':'\\u1E15','\\u1E16':'\\u1E17','\\u1E18':'\\u1E19','\\u1E1A':'\\u1E1B','\\u1E1C':'\\u1E1D','\\u1E1E':'\\u1E1F','\\u1E20':'\\u1E21','\\u1E22':'\\u1E23','\\u1E24':'\\u1E25','\\u1E26':'\\u1E27','\\u1E28':'\\u1E29','\\u1E2A':'\\u1E2B','\\u1E2C':'\\u1E2D','\\u1E2E':'\\u1E2F','\\u1E30':'\\u1E31','\\u1E32':'\\u1E33','\\u1E34':'\\u1E35','\\u1E36':'\\u1E37','\\u1E38':'\\u1E39','\\u1E3A':'\\u1E3B','\\u1E3C':'\\u1E3D','\\u1E3E':'\\u1E3F','\\u1E40':'\\u1E41','\\u1E42':'\\u1E43','\\u1E44':'\\u1E45','\\u1E46':'\\u1E47','\\u1E48':'\\u1E49','\\u1E4A':'\\u1E4B','\\u1E4C':'\\u1E4D','\\u1E4E':'\\u1E4F','\\u1E50':'\\u1E51','\\u1E52':'\\u1E53','\\u1E54':'\\u1E55','\\u1E56':'\\u1E57','\\u1E58':'\\u1E59','\\u1E5A':'\\u1E5B','\\u1E5C':'\\u1E5D','\\u1E5E':'\\u1E5F','\\u1E60':'\\u1E61','\\u1E62':'\\u1E63','\\u1E64':'\\u1E65','\\u1E66':'\\u1E67','\\u1E68':'\\u1E69','\\u1E6A':'\\u1E6B','\\u1E6C':'\\u1E6D','\\u1E6E':'\\u1E6F','\\u1E70':'\\u1E71','\\u1E72':'\\u1E73','\\u1E74':'\\u1E75','\\u1E76':'\\u1E77','\\u1E78':'\\u1E79','\\u1E7A':'\\u1E7B','\\u1E7C':'\\u1E7D','\\u1E7E':'\\u1E7F','\\u1E80':'\\u1E81','\\u1E82':'\\u1E83','\\u1E84':'\\u1E85','\\u1E86':'\\u1E87','\\u1E88':'\\u1E89','\\u1E8A':'\\u1E8B','\\u1E8C':'\\u1E8D','\\u1E8E':'\\u1E8F','\\u1E90':'\\u1E91','\\u1E92':'\\u1E93','\\u1E94':'\\u1E95','\\u1E9B':'\\u1E61','\\u1EA0':'\\u1EA1','\\u1EA2':'\\u1EA3','\\u1EA4':'\\u1EA5','\\u1EA6':'\\u1EA7','\\u1EA8':'\\u1EA9','\\u1EAA':'\\u1EAB','\\u1EAC':'\\u1EAD','\\u1EAE':'\\u1EAF','\\u1EB0':'\\u1EB1','\\u1EB2':'\\u1EB3','\\u1EB4':'\\u1EB5','\\u1EB6':'\\u1EB7','\\u1EB8':'\\u1EB9','\\u1EBA':'\\u1EBB','\\u1EBC':'\\u1EBD','\\u1EBE':'\\u1EBF','\\u1EC0':'\\u1EC1','\\u1EC2':'\\u1EC3','\\u1EC4':'\\u1EC5','\\u1EC6':'\\u1EC7','\\u1EC8':'\\u1EC9','\\u1ECA':'\\u1ECB','\\u1ECC':'\\u1ECD','\\u1ECE':'\\u1ECF','\\u1ED0':'\\u1ED1','\\u1ED2':'\\u1ED3','\\u1ED4':'\\u1ED5','\\u1ED6':'\\u1ED7','\\u1ED8':'\\u1ED9','\\u1EDA':'\\u1EDB','\\u1EDC':'\\u1EDD','\\u1EDE':'\\u1EDF','\\u1EE0':'\\u1EE1','\\u1EE2':'\\u1EE3','\\u1EE4':'\\u1EE5','\\u1EE6':'\\u1EE7','\\u1EE8':'\\u1EE9','\\u1EEA':'\\u1EEB','\\u1EEC':'\\u1EED','\\u1EEE':'\\u1EEF','\\u1EF0':'\\u1EF1','\\u1EF2':'\\u1EF3','\\u1EF4':'\\u1EF5','\\u1EF6':'\\u1EF7','\\u1EF8':'\\u1EF9','\\u1EFA':'\\u1EFB','\\u1EFC':'\\u1EFD','\\u1EFE':'\\u1EFF','\\u1F08':'\\u1F00','\\u1F09':'\\u1F01','\\u1F0A':'\\u1F02','\\u1F0B':'\\u1F03','\\u1F0C':'\\u1F04','\\u1F0D':'\\u1F05','\\u1F0E':'\\u1F06','\\u1F0F':'\\u1F07','\\u1F18':'\\u1F10','\\u1F19':'\\u1F11','\\u1F1A':'\\u1F12','\\u1F1B':'\\u1F13','\\u1F1C':'\\u1F14','\\u1F1D':'\\u1F15','\\u1F28':'\\u1F20','\\u1F29':'\\u1F21','\\u1F2A':'\\u1F22','\\u1F2B':'\\u1F23','\\u1F2C':'\\u1F24','\\u1F2D':'\\u1F25','\\u1F2E':'\\u1F26','\\u1F2F':'\\u1F27','\\u1F38':'\\u1F30','\\u1F39':'\\u1F31','\\u1F3A':'\\u1F32','\\u1F3B':'\\u1F33','\\u1F3C':'\\u1F34','\\u1F3D':'\\u1F35','\\u1F3E':'\\u1F36','\\u1F3F':'\\u1F37','\\u1F48':'\\u1F40','\\u1F49':'\\u1F41','\\u1F4A':'\\u1F42','\\u1F4B':'\\u1F43','\\u1F4C':'\\u1F44','\\u1F4D':'\\u1F45','\\u1F59':'\\u1F51','\\u1F5B':'\\u1F53','\\u1F5D':'\\u1F55','\\u1F5F':'\\u1F57','\\u1F68':'\\u1F60','\\u1F69':'\\u1F61','\\u1F6A':'\\u1F62','\\u1F6B':'\\u1F63','\\u1F6C':'\\u1F64','\\u1F6D':'\\u1F65','\\u1F6E':'\\u1F66','\\u1F6F':'\\u1F67','\\u1FB8':'\\u1FB0','\\u1FB9':'\\u1FB1','\\u1FBA':'\\u1F70','\\u1FBB':'\\u1F71','\\u1FBE':'\\u03B9','\\u1FC8':'\\u1F72','\\u1FC9':'\\u1F73','\\u1FCA':'\\u1F74','\\u1FCB':'\\u1F75','\\u1FD8':'\\u1FD0','\\u1FD9':'\\u1FD1','\\u1FDA':'\\u1F76','\\u1FDB':'\\u1F77','\\u1FE8':'\\u1FE0','\\u1FE9':'\\u1FE1','\\u1FEA':'\\u1F7A','\\u1FEB':'\\u1F7B','\\u1FEC':'\\u1FE5','\\u1FF8':'\\u1F78','\\u1FF9':'\\u1F79','\\u1FFA':'\\u1F7C','\\u1FFB':'\\u1F7D','\\u2126':'\\u03C9','\\u212A':'k','\\u212B':'\\xE5','\\u2132':'\\u214E','\\u2160':'\\u2170','\\u2161':'\\u2171','\\u2162':'\\u2172','\\u2163':'\\u2173','\\u2164':'\\u2174','\\u2165':'\\u2175','\\u2166':'\\u2176','\\u2167':'\\u2177','\\u2168':'\\u2178','\\u2169':'\\u2179','\\u216A':'\\u217A','\\u216B':'\\u217B','\\u216C':'\\u217C','\\u216D':'\\u217D','\\u216E':'\\u217E','\\u216F':'\\u217F','\\u2183':'\\u2184','\\u24B6':'\\u24D0','\\u24B7':'\\u24D1','\\u24B8':'\\u24D2','\\u24B9':'\\u24D3','\\u24BA':'\\u24D4','\\u24BB':'\\u24D5','\\u24BC':'\\u24D6','\\u24BD':'\\u24D7','\\u24BE':'\\u24D8','\\u24BF':'\\u24D9','\\u24C0':'\\u24DA','\\u24C1':'\\u24DB','\\u24C2':'\\u24DC','\\u24C3':'\\u24DD','\\u24C4':'\\u24DE','\\u24C5':'\\u24DF','\\u24C6':'\\u24E0','\\u24C7':'\\u24E1','\\u24C8':'\\u24E2','\\u24C9':'\\u24E3','\\u24CA':'\\u24E4','\\u24CB':'\\u24E5','\\u24CC':'\\u24E6','\\u24CD':'\\u24E7','\\u24CE':'\\u24E8','\\u24CF':'\\u24E9','\\u2C00':'\\u2C30','\\u2C01':'\\u2C31','\\u2C02':'\\u2C32','\\u2C03':'\\u2C33','\\u2C04':'\\u2C34','\\u2C05':'\\u2C35','\\u2C06':'\\u2C36','\\u2C07':'\\u2C37','\\u2C08':'\\u2C38','\\u2C09':'\\u2C39','\\u2C0A':'\\u2C3A','\\u2C0B':'\\u2C3B','\\u2C0C':'\\u2C3C','\\u2C0D':'\\u2C3D','\\u2C0E':'\\u2C3E','\\u2C0F':'\\u2C3F','\\u2C10':'\\u2C40','\\u2C11':'\\u2C41','\\u2C12':'\\u2C42','\\u2C13':'\\u2C43','\\u2C14':'\\u2C44','\\u2C15':'\\u2C45','\\u2C16':'\\u2C46','\\u2C17':'\\u2C47','\\u2C18':'\\u2C48','\\u2C19':'\\u2C49','\\u2C1A':'\\u2C4A','\\u2C1B':'\\u2C4B','\\u2C1C':'\\u2C4C','\\u2C1D':'\\u2C4D','\\u2C1E':'\\u2C4E','\\u2C1F':'\\u2C4F','\\u2C20':'\\u2C50','\\u2C21':'\\u2C51','\\u2C22':'\\u2C52','\\u2C23':'\\u2C53','\\u2C24':'\\u2C54','\\u2C25':'\\u2C55','\\u2C26':'\\u2C56','\\u2C27':'\\u2C57','\\u2C28':'\\u2C58','\\u2C29':'\\u2C59','\\u2C2A':'\\u2C5A','\\u2C2B':'\\u2C5B','\\u2C2C':'\\u2C5C','\\u2C2D':'\\u2C5D','\\u2C2E':'\\u2C5E','\\u2C60':'\\u2C61','\\u2C62':'\\u026B','\\u2C63':'\\u1D7D','\\u2C64':'\\u027D','\\u2C67':'\\u2C68','\\u2C69':'\\u2C6A','\\u2C6B':'\\u2C6C','\\u2C6D':'\\u0251','\\u2C6E':'\\u0271','\\u2C6F':'\\u0250','\\u2C70':'\\u0252','\\u2C72':'\\u2C73','\\u2C75':'\\u2C76','\\u2C7E':'\\u023F','\\u2C7F':'\\u0240','\\u2C80':'\\u2C81','\\u2C82':'\\u2C83','\\u2C84':'\\u2C85','\\u2C86':'\\u2C87','\\u2C88':'\\u2C89','\\u2C8A':'\\u2C8B','\\u2C8C':'\\u2C8D','\\u2C8E':'\\u2C8F','\\u2C90':'\\u2C91','\\u2C92':'\\u2C93','\\u2C94':'\\u2C95','\\u2C96':'\\u2C97','\\u2C98':'\\u2C99','\\u2C9A':'\\u2C9B','\\u2C9C':'\\u2C9D','\\u2C9E':'\\u2C9F','\\u2CA0':'\\u2CA1','\\u2CA2':'\\u2CA3','\\u2CA4':'\\u2CA5','\\u2CA6':'\\u2CA7','\\u2CA8':'\\u2CA9','\\u2CAA':'\\u2CAB','\\u2CAC':'\\u2CAD','\\u2CAE':'\\u2CAF','\\u2CB0':'\\u2CB1','\\u2CB2':'\\u2CB3','\\u2CB4':'\\u2CB5','\\u2CB6':'\\u2CB7','\\u2CB8':'\\u2CB9','\\u2CBA':'\\u2CBB','\\u2CBC':'\\u2CBD','\\u2CBE':'\\u2CBF','\\u2CC0':'\\u2CC1','\\u2CC2':'\\u2CC3','\\u2CC4':'\\u2CC5','\\u2CC6':'\\u2CC7','\\u2CC8':'\\u2CC9','\\u2CCA':'\\u2CCB','\\u2CCC':'\\u2CCD','\\u2CCE':'\\u2CCF','\\u2CD0':'\\u2CD1','\\u2CD2':'\\u2CD3','\\u2CD4':'\\u2CD5','\\u2CD6':'\\u2CD7','\\u2CD8':'\\u2CD9','\\u2CDA':'\\u2CDB','\\u2CDC':'\\u2CDD','\\u2CDE':'\\u2CDF','\\u2CE0':'\\u2CE1','\\u2CE2':'\\u2CE3','\\u2CEB':'\\u2CEC','\\u2CED':'\\u2CEE','\\u2CF2':'\\u2CF3','\\uA640':'\\uA641','\\uA642':'\\uA643','\\uA644':'\\uA645','\\uA646':'\\uA647','\\uA648':'\\uA649','\\uA64A':'\\uA64B','\\uA64C':'\\uA64D','\\uA64E':'\\uA64F','\\uA650':'\\uA651','\\uA652':'\\uA653','\\uA654':'\\uA655','\\uA656':'\\uA657','\\uA658':'\\uA659','\\uA65A':'\\uA65B','\\uA65C':'\\uA65D','\\uA65E':'\\uA65F','\\uA660':'\\uA661','\\uA662':'\\uA663','\\uA664':'\\uA665','\\uA666':'\\uA667','\\uA668':'\\uA669','\\uA66A':'\\uA66B','\\uA66C':'\\uA66D','\\uA680':'\\uA681','\\uA682':'\\uA683','\\uA684':'\\uA685','\\uA686':'\\uA687','\\uA688':'\\uA689','\\uA68A':'\\uA68B','\\uA68C':'\\uA68D','\\uA68E':'\\uA68F','\\uA690':'\\uA691','\\uA692':'\\uA693','\\uA694':'\\uA695','\\uA696':'\\uA697','\\uA698':'\\uA699','\\uA69A':'\\uA69B','\\uA722':'\\uA723','\\uA724':'\\uA725','\\uA726':'\\uA727','\\uA728':'\\uA729','\\uA72A':'\\uA72B','\\uA72C':'\\uA72D','\\uA72E':'\\uA72F','\\uA732':'\\uA733','\\uA734':'\\uA735','\\uA736':'\\uA737','\\uA738':'\\uA739','\\uA73A':'\\uA73B','\\uA73C':'\\uA73D','\\uA73E':'\\uA73F','\\uA740':'\\uA741','\\uA742':'\\uA743','\\uA744':'\\uA745','\\uA746':'\\uA747','\\uA748':'\\uA749','\\uA74A':'\\uA74B','\\uA74C':'\\uA74D','\\uA74E':'\\uA74F','\\uA750':'\\uA751','\\uA752':'\\uA753','\\uA754':'\\uA755','\\uA756':'\\uA757','\\uA758':'\\uA759','\\uA75A':'\\uA75B','\\uA75C':'\\uA75D','\\uA75E':'\\uA75F','\\uA760':'\\uA761','\\uA762':'\\uA763','\\uA764':'\\uA765','\\uA766':'\\uA767','\\uA768':'\\uA769','\\uA76A':'\\uA76B','\\uA76C':'\\uA76D','\\uA76E':'\\uA76F','\\uA779':'\\uA77A','\\uA77B':'\\uA77C','\\uA77D':'\\u1D79','\\uA77E':'\\uA77F','\\uA780':'\\uA781','\\uA782':'\\uA783','\\uA784':'\\uA785','\\uA786':'\\uA787','\\uA78B':'\\uA78C','\\uA78D':'\\u0265','\\uA790':'\\uA791','\\uA792':'\\uA793','\\uA796':'\\uA797','\\uA798':'\\uA799','\\uA79A':'\\uA79B','\\uA79C':'\\uA79D','\\uA79E':'\\uA79F','\\uA7A0':'\\uA7A1','\\uA7A2':'\\uA7A3','\\uA7A4':'\\uA7A5','\\uA7A6':'\\uA7A7','\\uA7A8':'\\uA7A9','\\uA7AA':'\\u0266','\\uA7AB':'\\u025C','\\uA7AC':'\\u0261','\\uA7AD':'\\u026C','\\uA7B0':'\\u029E','\\uA7B1':'\\u0287','\\uFF21':'\\uFF41','\\uFF22':'\\uFF42','\\uFF23':'\\uFF43','\\uFF24':'\\uFF44','\\uFF25':'\\uFF45','\\uFF26':'\\uFF46','\\uFF27':'\\uFF47','\\uFF28':'\\uFF48','\\uFF29':'\\uFF49','\\uFF2A':'\\uFF4A','\\uFF2B':'\\uFF4B','\\uFF2C':'\\uFF4C','\\uFF2D':'\\uFF4D','\\uFF2E':'\\uFF4E','\\uFF2F':'\\uFF4F','\\uFF30':'\\uFF50','\\uFF31':'\\uFF51','\\uFF32':'\\uFF52','\\uFF33':'\\uFF53','\\uFF34':'\\uFF54','\\uFF35':'\\uFF55','\\uFF36':'\\uFF56','\\uFF37':'\\uFF57','\\uFF38':'\\uFF58','\\uFF39':'\\uFF59','\\uFF3A':'\\uFF5A','\\uD801\\uDC00':'\\uD801\\uDC28','\\uD801\\uDC01':'\\uD801\\uDC29','\\uD801\\uDC02':'\\uD801\\uDC2A','\\uD801\\uDC03':'\\uD801\\uDC2B','\\uD801\\uDC04':'\\uD801\\uDC2C','\\uD801\\uDC05':'\\uD801\\uDC2D','\\uD801\\uDC06':'\\uD801\\uDC2E','\\uD801\\uDC07':'\\uD801\\uDC2F','\\uD801\\uDC08':'\\uD801\\uDC30','\\uD801\\uDC09':'\\uD801\\uDC31','\\uD801\\uDC0A':'\\uD801\\uDC32','\\uD801\\uDC0B':'\\uD801\\uDC33','\\uD801\\uDC0C':'\\uD801\\uDC34','\\uD801\\uDC0D':'\\uD801\\uDC35','\\uD801\\uDC0E':'\\uD801\\uDC36','\\uD801\\uDC0F':'\\uD801\\uDC37','\\uD801\\uDC10':'\\uD801\\uDC38','\\uD801\\uDC11':'\\uD801\\uDC39','\\uD801\\uDC12':'\\uD801\\uDC3A','\\uD801\\uDC13':'\\uD801\\uDC3B','\\uD801\\uDC14':'\\uD801\\uDC3C','\\uD801\\uDC15':'\\uD801\\uDC3D','\\uD801\\uDC16':'\\uD801\\uDC3E','\\uD801\\uDC17':'\\uD801\\uDC3F','\\uD801\\uDC18':'\\uD801\\uDC40','\\uD801\\uDC19':'\\uD801\\uDC41','\\uD801\\uDC1A':'\\uD801\\uDC42','\\uD801\\uDC1B':'\\uD801\\uDC43','\\uD801\\uDC1C':'\\uD801\\uDC44','\\uD801\\uDC1D':'\\uD801\\uDC45','\\uD801\\uDC1E':'\\uD801\\uDC46','\\uD801\\uDC1F':'\\uD801\\uDC47','\\uD801\\uDC20':'\\uD801\\uDC48','\\uD801\\uDC21':'\\uD801\\uDC49','\\uD801\\uDC22':'\\uD801\\uDC4A','\\uD801\\uDC23':'\\uD801\\uDC4B','\\uD801\\uDC24':'\\uD801\\uDC4C','\\uD801\\uDC25':'\\uD801\\uDC4D','\\uD801\\uDC26':'\\uD801\\uDC4E','\\uD801\\uDC27':'\\uD801\\uDC4F','\\uD806\\uDCA0':'\\uD806\\uDCC0','\\uD806\\uDCA1':'\\uD806\\uDCC1','\\uD806\\uDCA2':'\\uD806\\uDCC2','\\uD806\\uDCA3':'\\uD806\\uDCC3','\\uD806\\uDCA4':'\\uD806\\uDCC4','\\uD806\\uDCA5':'\\uD806\\uDCC5','\\uD806\\uDCA6':'\\uD806\\uDCC6','\\uD806\\uDCA7':'\\uD806\\uDCC7','\\uD806\\uDCA8':'\\uD806\\uDCC8','\\uD806\\uDCA9':'\\uD806\\uDCC9','\\uD806\\uDCAA':'\\uD806\\uDCCA','\\uD806\\uDCAB':'\\uD806\\uDCCB','\\uD806\\uDCAC':'\\uD806\\uDCCC','\\uD806\\uDCAD':'\\uD806\\uDCCD','\\uD806\\uDCAE':'\\uD806\\uDCCE','\\uD806\\uDCAF':'\\uD806\\uDCCF','\\uD806\\uDCB0':'\\uD806\\uDCD0','\\uD806\\uDCB1':'\\uD806\\uDCD1','\\uD806\\uDCB2':'\\uD806\\uDCD2','\\uD806\\uDCB3':'\\uD806\\uDCD3','\\uD806\\uDCB4':'\\uD806\\uDCD4','\\uD806\\uDCB5':'\\uD806\\uDCD5','\\uD806\\uDCB6':'\\uD806\\uDCD6','\\uD806\\uDCB7':'\\uD806\\uDCD7','\\uD806\\uDCB8':'\\uD806\\uDCD8','\\uD806\\uDCB9':'\\uD806\\uDCD9','\\uD806\\uDCBA':'\\uD806\\uDCDA','\\uD806\\uDCBB':'\\uD806\\uDCDB','\\uD806\\uDCBC':'\\uD806\\uDCDC','\\uD806\\uDCBD':'\\uD806\\uDCDD','\\uD806\\uDCBE':'\\uD806\\uDCDE','\\uD806\\uDCBF':'\\uD806\\uDCDF','\\xDF':'ss','\\u0130':'i\\u0307','\\u0149':'\\u02BCn','\\u01F0':'j\\u030C','\\u0390':'\\u03B9\\u0308\\u0301','\\u03B0':'\\u03C5\\u0308\\u0301','\\u0587':'\\u0565\\u0582','\\u1E96':'h\\u0331','\\u1E97':'t\\u0308','\\u1E98':'w\\u030A','\\u1E99':'y\\u030A','\\u1E9A':'a\\u02BE','\\u1E9E':'ss','\\u1F50':'\\u03C5\\u0313','\\u1F52':'\\u03C5\\u0313\\u0300','\\u1F54':'\\u03C5\\u0313\\u0301','\\u1F56':'\\u03C5\\u0313\\u0342','\\u1F80':'\\u1F00\\u03B9','\\u1F81':'\\u1F01\\u03B9','\\u1F82':'\\u1F02\\u03B9','\\u1F83':'\\u1F03\\u03B9','\\u1F84':'\\u1F04\\u03B9','\\u1F85':'\\u1F05\\u03B9','\\u1F86':'\\u1F06\\u03B9','\\u1F87':'\\u1F07\\u03B9','\\u1F88':'\\u1F00\\u03B9','\\u1F89':'\\u1F01\\u03B9','\\u1F8A':'\\u1F02\\u03B9','\\u1F8B':'\\u1F03\\u03B9','\\u1F8C':'\\u1F04\\u03B9','\\u1F8D':'\\u1F05\\u03B9','\\u1F8E':'\\u1F06\\u03B9','\\u1F8F':'\\u1F07\\u03B9','\\u1F90':'\\u1F20\\u03B9','\\u1F91':'\\u1F21\\u03B9','\\u1F92':'\\u1F22\\u03B9','\\u1F93':'\\u1F23\\u03B9','\\u1F94':'\\u1F24\\u03B9','\\u1F95':'\\u1F25\\u03B9','\\u1F96':'\\u1F26\\u03B9','\\u1F97':'\\u1F27\\u03B9','\\u1F98':'\\u1F20\\u03B9','\\u1F99':'\\u1F21\\u03B9','\\u1F9A':'\\u1F22\\u03B9','\\u1F9B':'\\u1F23\\u03B9','\\u1F9C':'\\u1F24\\u03B9','\\u1F9D':'\\u1F25\\u03B9','\\u1F9E':'\\u1F26\\u03B9','\\u1F9F':'\\u1F27\\u03B9','\\u1FA0':'\\u1F60\\u03B9','\\u1FA1':'\\u1F61\\u03B9','\\u1FA2':'\\u1F62\\u03B9','\\u1FA3':'\\u1F63\\u03B9','\\u1FA4':'\\u1F64\\u03B9','\\u1FA5':'\\u1F65\\u03B9','\\u1FA6':'\\u1F66\\u03B9','\\u1FA7':'\\u1F67\\u03B9','\\u1FA8':'\\u1F60\\u03B9','\\u1FA9':'\\u1F61\\u03B9','\\u1FAA':'\\u1F62\\u03B9','\\u1FAB':'\\u1F63\\u03B9','\\u1FAC':'\\u1F64\\u03B9','\\u1FAD':'\\u1F65\\u03B9','\\u1FAE':'\\u1F66\\u03B9','\\u1FAF':'\\u1F67\\u03B9','\\u1FB2':'\\u1F70\\u03B9','\\u1FB3':'\\u03B1\\u03B9','\\u1FB4':'\\u03AC\\u03B9','\\u1FB6':'\\u03B1\\u0342','\\u1FB7':'\\u03B1\\u0342\\u03B9','\\u1FBC':'\\u03B1\\u03B9','\\u1FC2':'\\u1F74\\u03B9','\\u1FC3':'\\u03B7\\u03B9','\\u1FC4':'\\u03AE\\u03B9','\\u1FC6':'\\u03B7\\u0342','\\u1FC7':'\\u03B7\\u0342\\u03B9','\\u1FCC':'\\u03B7\\u03B9','\\u1FD2':'\\u03B9\\u0308\\u0300','\\u1FD3':'\\u03B9\\u0308\\u0301','\\u1FD6':'\\u03B9\\u0342','\\u1FD7':'\\u03B9\\u0308\\u0342','\\u1FE2':'\\u03C5\\u0308\\u0300','\\u1FE3':'\\u03C5\\u0308\\u0301','\\u1FE4':'\\u03C1\\u0313','\\u1FE6':'\\u03C5\\u0342','\\u1FE7':'\\u03C5\\u0308\\u0342','\\u1FF2':'\\u1F7C\\u03B9','\\u1FF3':'\\u03C9\\u03B9','\\u1FF4':'\\u03CE\\u03B9','\\u1FF6':'\\u03C9\\u0342','\\u1FF7':'\\u03C9\\u0342\\u03B9','\\u1FFC':'\\u03C9\\u03B9','\\uFB00':'ff','\\uFB01':'fi','\\uFB02':'fl','\\uFB03':'ffi','\\uFB04':'ffl','\\uFB05':'st','\\uFB06':'st','\\uFB13':'\\u0574\\u0576','\\uFB14':'\\u0574\\u0565','\\uFB15':'\\u0574\\u056B','\\uFB16':'\\u057E\\u0576','\\uFB17':'\\u0574\\u056D'};\n\n// Normalize reference label: collapse internal whitespace\n// to single space, remove leading/trailing whitespace, case fold.\nmodule.exports = function(string) {\n    return string.slice(1, string.length - 1).trim().replace(regex, function($0) {\n        // Note: there is no need to check `hasOwnProperty($0)` here.\n        // If character not found in lookup table, it must be whitespace.\n        return map[$0] || ' ';\n    });\n};\n","\"use strict\";\n\n// derived from https://github.com/mathiasbynens/String.fromCodePoint\n/*! http://mths.be/fromcodepoint v0.2.1 by @mathias */\nif (String.fromCodePoint) {\n    module.exports = function (_) {\n        try {\n            return String.fromCodePoint(_);\n        } catch (e) {\n            if (e instanceof RangeError) {\n                return String.fromCharCode(0xFFFD);\n            }\n            throw e;\n        }\n    };\n\n} else {\n\n  var stringFromCharCode = String.fromCharCode;\n  var floor = Math.floor;\n  var fromCodePoint = function() {\n      var MAX_SIZE = 0x4000;\n      var codeUnits = [];\n      var highSurrogate;\n      var lowSurrogate;\n      var index = -1;\n      var length = arguments.length;\n      if (!length) {\n          return '';\n      }\n      var result = '';\n      while (++index < length) {\n          var codePoint = Number(arguments[index]);\n          if (\n              !isFinite(codePoint) || // `NaN`, `+Infinity`, or `-Infinity`\n                  codePoint < 0 || // not a valid Unicode code point\n                  codePoint > 0x10FFFF || // not a valid Unicode code point\n                  floor(codePoint) !== codePoint // not an integer\n          ) {\n              return String.fromCharCode(0xFFFD);\n          }\n          if (codePoint <= 0xFFFF) { // BMP code point\n              codeUnits.push(codePoint);\n          } else { // Astral code point; split in surrogate halves\n              // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n              codePoint -= 0x10000;\n              highSurrogate = (codePoint >> 10) + 0xD800;\n              lowSurrogate = (codePoint % 0x400) + 0xDC00;\n              codeUnits.push(highSurrogate, lowSurrogate);\n          }\n          if (index + 1 === length || codeUnits.length > MAX_SIZE) {\n              result += stringFromCharCode.apply(null, codeUnits);\n              codeUnits.length = 0;\n          }\n      }\n      return result;\n  };\n  module.exports = fromCodePoint;\n}\n","/*! http://mths.be/repeat v0.2.0 by @mathias */\nif (!String.prototype.repeat) {\n\t(function() {\n\t\t'use strict'; // needed to support `apply`/`call` with `undefined`/`null`\n\t\tvar defineProperty = (function() {\n\t\t\t// IE 8 only supports `Object.defineProperty` on DOM elements\n\t\t\ttry {\n\t\t\t\tvar object = {};\n\t\t\t\tvar $defineProperty = Object.defineProperty;\n\t\t\t\tvar result = $defineProperty(object, object, object) && $defineProperty;\n\t\t\t} catch(error) {}\n\t\t\treturn result;\n\t\t}());\n\t\tvar repeat = function(count) {\n\t\t\tif (this == null) {\n\t\t\t\tthrow TypeError();\n\t\t\t}\n\t\t\tvar string = String(this);\n\t\t\t// `ToInteger`\n\t\t\tvar n = count ? Number(count) : 0;\n\t\t\tif (n != n) { // better `isNaN`\n\t\t\t\tn = 0;\n\t\t\t}\n\t\t\t// Account for out-of-bounds indices\n\t\t\tif (n < 0 || n == Infinity) {\n\t\t\t\tthrow RangeError();\n\t\t\t}\n\t\t\tvar result = '';\n\t\t\twhile (n) {\n\t\t\t\tif (n % 2 == 1) {\n\t\t\t\t\tresult += string;\n\t\t\t\t}\n\t\t\t\tif (n > 1) {\n\t\t\t\t\tstring += string;\n\t\t\t\t}\n\t\t\t\tn >>= 1;\n\t\t\t}\n\t\t\treturn result;\n\t\t};\n\t\tif (defineProperty) {\n\t\t\tdefineProperty(String.prototype, 'repeat', {\n\t\t\t\t'value': repeat,\n\t\t\t\t'configurable': true,\n\t\t\t\t'writable': true\n\t\t\t});\n\t\t} else {\n\t\t\tString.prototype.repeat = repeat;\n\t\t}\n\t}());\n}\n","\"use strict\";\n\nvar Renderer = require('./renderer');\n\nvar reUnsafeProtocol = /^javascript:|vbscript:|file:|data:/i;\nvar reSafeDataProtocol = /^data:image\\/(?:png|gif|jpeg|webp)/i;\n\nvar potentiallyUnsafe = function(url) {\n  return reUnsafeProtocol.test(url) &&\n      !reSafeDataProtocol.test(url);\n};\n\n// Helper function to produce an HTML tag.\nfunction tag(name, attrs, selfclosing) {\n  if (this.disableTags > 0) {\n    return;\n  }\n  this.buffer += ('<' + name);\n  if (attrs && attrs.length > 0) {\n    var i = 0;\n    var attrib;\n    while ((attrib = attrs[i]) !== undefined) {\n      this.buffer += (' ' + attrib[0] + '=\"' + attrib[1] + '\"');\n      i++;\n    }\n  }\n  if (selfclosing) {\n    this.buffer += ' /';\n  }\n  this.buffer += '>';\n  this.lastOut = '>';\n}\n\nfunction HtmlRenderer(options) {\n  options = options || {};\n  // by default, soft breaks are rendered as newlines in HTML\n  options.softbreak = options.softbreak || '\\n';\n  // set to \"<br />\" to make them hard breaks\n  // set to \" \" if you want to ignore line wrapping in source\n\n  this.disableTags = 0;\n  this.lastOut = \"\\n\";\n  this.options = options;\n}\n\n/* Node methods */\n\nfunction text(node) {\n  this.out(node.literal);\n}\n\nfunction softbreak() {\n  this.lit(this.options.softbreak);\n}\n\nfunction linebreak() {\n  this.tag('br', [], true);\n  this.cr();\n}\n\nfunction link(node, entering) {\n  var attrs = this.attrs(node);\n  if (entering) {\n    if (!(this.options.safe && potentiallyUnsafe(node.destination))) {\n      attrs.push(['href', this.esc(node.destination)]);\n    }\n    if (node.title) {\n      attrs.push(['title', this.esc(node.title)]);\n    }\n    this.tag('a', attrs);\n  } else {\n    this.tag('/a');\n  }\n}\n\nfunction image(node, entering) {\n  if (entering) {\n    if (this.disableTags === 0) {\n      if (this.options.safe && potentiallyUnsafe(node.destination)) {\n        this.lit('<img src=\"\" alt=\"');\n      } else {\n        this.lit('<img src=\"' + this.esc(node.destination) +\n            '\" alt=\"');\n      }\n    }\n    this.disableTags += 1;\n  } else {\n    this.disableTags -= 1;\n    if (this.disableTags === 0) {\n      if (node.title) {\n        this.lit('\" title=\"' + this.esc(node.title));\n      }\n      this.lit('\" />');\n    }\n  }\n}\n\nfunction emph(node, entering) {\n  this.tag(entering ? 'em' : '/em');\n}\n\nfunction strong(node, entering) {\n  this.tag(entering ? 'strong' : '/strong');\n}\n\nfunction paragraph(node, entering) {\n  var grandparent = node.parent.parent\n    , attrs = this.attrs(node);\n  if (grandparent !== null &&\n    grandparent.type === 'list') {\n    if (grandparent.listTight) {\n      return;\n    }\n  }\n  if (entering) {\n    this.cr();\n    this.tag('p', attrs);\n  } else {\n    this.tag('/p');\n    this.cr();\n  }\n}\n\nfunction heading(node, entering) {\n  var tagname = 'h' + node.level\n    , attrs = this.attrs(node);\n  if (entering) {\n    this.cr();\n    this.tag(tagname, attrs);\n  } else {\n    this.tag('/' + tagname);\n    this.cr();\n  }\n}\n\nfunction code(node) {\n  this.tag('code');\n  this.out(node.literal);\n  this.tag('/code');\n}\n\nfunction code_block(node) {\n  var info_words = node.info ? node.info.split(/\\s+/) : []\n    , attrs = this.attrs(node);\n  if (info_words.length > 0 && info_words[0].length > 0) {\n    attrs.push(['class', 'language-' + this.esc(info_words[0])]);\n  }\n  this.cr();\n  this.tag('pre');\n  this.tag('code', attrs);\n  this.out(node.literal);\n  this.tag('/code');\n  this.tag('/pre');\n  this.cr();\n}\n\nfunction thematic_break(node) {\n  var attrs = this.attrs(node);\n  this.cr();\n  this.tag('hr', attrs, true);\n  this.cr();\n}\n\nfunction block_quote(node, entering) {\n  var attrs = this.attrs(node);\n  if (entering) {\n    this.cr();\n    this.tag('blockquote', attrs);\n    this.cr();\n  } else {\n    this.cr();\n    this.tag('/blockquote');\n    this.cr();\n  }\n}\n\nfunction list(node, entering) {\n  var tagname = node.listType === 'bullet' ? 'ul' : 'ol'\n    , attrs = this.attrs(node);\n\n  if (entering) {\n    var start = node.listStart;\n    if (start !== null && start !== 1) {\n      attrs.push(['start', start.toString()]);\n    }\n    this.cr();\n    this.tag(tagname, attrs);\n    this.cr();\n  } else {\n    this.cr();\n    this.tag('/' + tagname);\n    this.cr();\n  }\n}\n\nfunction item(node, entering) {\n  var attrs = this.attrs(node);\n  if (entering) {\n    this.tag('li', attrs);\n  } else {\n    this.tag('/li');\n    this.cr();\n  }\n}\n\nfunction html_inline(node) {\n  if (this.options.safe) {\n    this.lit('<!-- raw HTML omitted -->');\n  } else {\n    this.lit(node.literal);\n  }\n}\n\nfunction html_block(node) {\n  this.cr();\n  if (this.options.safe) {\n    this.lit('<!-- raw HTML omitted -->');\n  } else {\n    this.lit(node.literal);\n  }\n  this.cr();\n}\n\nfunction custom_inline(node, entering) {\n  if (entering && node.onEnter) {\n    this.lit(node.onEnter);\n  } else if (!entering && node.onExit) {\n    this.lit(node.onExit);\n  }\n}\n\nfunction custom_block(node, entering) {\n  this.cr();\n  if (entering && node.onEnter) {\n    this.lit(node.onEnter);\n  } else if (!entering && node.onExit) {\n    this.lit(node.onExit);\n  }\n  this.cr();\n}\n\n/* Helper methods */\n\nfunction out(s) {\n  this.lit(this.esc(s));\n}\n\nfunction attrs (node) {\n  var att = [];\n  if (this.options.sourcepos) {\n    var pos = node.sourcepos;\n    if (pos) {\n      att.push(['data-sourcepos', String(pos[0][0]) + ':' +\n        String(pos[0][1]) + '-' + String(pos[1][0]) + ':' +\n        String(pos[1][1])]);\n    }\n  }\n  return att;\n}\n\n// quick browser-compatible inheritance\nHtmlRenderer.prototype = Object.create(Renderer.prototype);\n\nHtmlRenderer.prototype.text = text;\nHtmlRenderer.prototype.html_inline = html_inline;\nHtmlRenderer.prototype.html_block = html_block;\nHtmlRenderer.prototype.softbreak = softbreak;\nHtmlRenderer.prototype.linebreak = linebreak;\nHtmlRenderer.prototype.link = link;\nHtmlRenderer.prototype.image = image;\nHtmlRenderer.prototype.emph = emph;\nHtmlRenderer.prototype.strong = strong;\nHtmlRenderer.prototype.paragraph = paragraph;\nHtmlRenderer.prototype.heading = heading;\nHtmlRenderer.prototype.code = code;\nHtmlRenderer.prototype.code_block = code_block;\nHtmlRenderer.prototype.thematic_break = thematic_break;\nHtmlRenderer.prototype.block_quote = block_quote;\nHtmlRenderer.prototype.list = list;\nHtmlRenderer.prototype.item = item;\nHtmlRenderer.prototype.custom_inline = custom_inline;\nHtmlRenderer.prototype.custom_block = custom_block;\n\nHtmlRenderer.prototype.esc = require('../common').escapeXml;\n\nHtmlRenderer.prototype.out = out;\nHtmlRenderer.prototype.tag = tag;\nHtmlRenderer.prototype.attrs = attrs;\n\nmodule.exports = HtmlRenderer;\n","\"use strict\";\n\nvar Renderer = require('./renderer');\n\nvar reXMLTag = /\\<[^>]*\\>/;\n\nfunction toTagName(s) {\n  return s.replace(/([a-z])([A-Z])/g, \"$1_$2\").toLowerCase();\n}\n\nfunction XmlRenderer(options) {\n  options = options || {};\n\n  this.disableTags = 0;\n  this.lastOut = \"\\n\";\n\n  this.indentLevel = 0;\n  this.indent = '  ';\n\n  this.options = options;\n}\n\nfunction render(ast) {\n\n  this.buffer = '';\n\n  var attrs;\n  var tagname;\n  var walker = ast.walker();\n  var event, node, entering;\n  var container;\n  var selfClosing;\n  var nodetype;\n\n  var options = this.options;\n\n  if (options.time) { console.time(\"rendering\"); }\n\n  this.buffer += '<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n';\n  this.buffer += '<!DOCTYPE document SYSTEM \"CommonMark.dtd\">\\n';\n\n  while ((event = walker.next())) {\n    entering = event.entering;\n    node = event.node;\n    nodetype = node.type;\n\n    container = node.isContainer;\n\n    selfClosing = nodetype === 'thematic_break'\n      || nodetype === 'linebreak'\n      || nodetype === 'softbreak';\n\n    tagname = toTagName(nodetype);\n\n    if (entering) {\n\n        attrs = [];\n\n        switch (nodetype) {\n          case 'document':\n            attrs.push(['xmlns', 'http://commonmark.org/xml/1.0']);\n            break;\n          case 'list':\n            if (node.listType !== null) {\n              attrs.push(['type', node.listType.toLowerCase()]);\n            }\n            if (node.listStart !== null) {\n              attrs.push(['start', String(node.listStart)]);\n            }\n            if (node.listTight !== null) {\n              attrs.push(['tight', (node.listTight ? 'true' : 'false')]);\n            }\n            var delim = node.listDelimiter;\n            if (delim !== null) {\n              var delimword = '';\n              if (delim === '.') {\n                delimword = 'period';\n              } else {\n                delimword = 'paren';\n              }\n              attrs.push(['delimiter', delimword]);\n            }\n            break;\n          case 'code_block':\n            if (node.info) {\n              attrs.push(['info', node.info]);\n            }\n            break;\n          case 'heading':\n            attrs.push(['level', String(node.level)]);\n            break;\n          case 'link':\n          case 'image':\n            attrs.push(['destination', node.destination]);\n            attrs.push(['title', node.title]);\n            break;\n          case 'custom_inline':\n          case 'custom_block':\n            attrs.push(['on_enter', node.onEnter]);\n            attrs.push(['on_exit', node.onExit]);\n            break;\n          default:\n            break;\n        }\n        if (options.sourcepos) {\n          var pos = node.sourcepos;\n          if (pos) {\n            attrs.push(['sourcepos', String(pos[0][0]) + ':' +\n              String(pos[0][1]) + '-' + String(pos[1][0]) + ':' +\n              String(pos[1][1])]);\n          }\n        }\n\n        this.cr();\n        this.out(this.tag(tagname, attrs, selfClosing));\n        if (container) {\n          this.indentLevel += 1;\n        } else if (!container && !selfClosing) {\n          var lit = node.literal;\n          if (lit) {\n            this.out(this.esc(lit));\n          }\n          this.out(this.tag('/' + tagname));\n        }\n    } else {\n      this.indentLevel -= 1;\n      this.cr();\n      this.out(this.tag('/' + tagname));\n    }\n  }\n  if (options.time) { console.timeEnd(\"rendering\"); }\n  this.buffer += '\\n';\n  return this.buffer;\n}\n\nfunction out(s) {\n  if(this.disableTags > 0) {\n    this.buffer += s.replace(reXMLTag, '');\n  }else{\n    this.buffer += s;\n  }\n  this.lastOut = s;\n}\n\nfunction cr() {\n  if(this.lastOut !== '\\n') {\n    this.buffer += '\\n';\n    this.lastOut = '\\n';\n    for(var i = this.indentLevel; i > 0; i--) {\n      this.buffer += this.indent;\n    }\n  }\n}\n\n// Helper function to produce an XML tag.\nfunction tag(name, attrs, selfclosing) {\n  var result = '<' + name;\n  if(attrs && attrs.length > 0) {\n    var i = 0;\n    var attrib;\n    while ((attrib = attrs[i]) !== undefined) {\n      result += ' ' + attrib[0] + '=\"' + this.esc(attrib[1]) + '\"';\n      i++;\n    }\n  }\n  if(selfclosing) {\n    result += ' /';\n  }\n  result += '>';\n  return result;\n}\n\n// quick browser-compatible inheritance\nXmlRenderer.prototype = Object.create(Renderer.prototype);\n\nXmlRenderer.prototype.render = render;\nXmlRenderer.prototype.out = out;\nXmlRenderer.prototype.cr = cr;\nXmlRenderer.prototype.tag = tag;\nXmlRenderer.prototype.esc = require('../common').escapeXml;\n\nmodule.exports = XmlRenderer;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RssHandler = exports.DefaultHandler = exports.DomUtils = exports.ElementType = exports.Tokenizer = exports.createDomStream = exports.parseDOM = exports.parseDocument = exports.DomHandler = exports.Parser = void 0;\nvar Parser_1 = require(\"./Parser\");\nObject.defineProperty(exports, \"Parser\", { enumerable: true, get: function () { return Parser_1.Parser; } });\nvar domhandler_1 = require(\"domhandler\");\nObject.defineProperty(exports, \"DomHandler\", { enumerable: true, get: function () { return domhandler_1.DomHandler; } });\nObject.defineProperty(exports, \"DefaultHandler\", { enumerable: true, get: function () { return domhandler_1.DomHandler; } });\n// Helper methods\n/**\n * Parses the data, returns the resulting document.\n *\n * @param data The data that should be parsed.\n * @param options Optional options for the parser and DOM builder.\n */\nfunction parseDocument(data, options) {\n    var handler = new domhandler_1.DomHandler(undefined, options);\n    new Parser_1.Parser(handler, options).end(data);\n    return handler.root;\n}\nexports.parseDocument = parseDocument;\n/**\n * Parses data, returns an array of the root nodes.\n *\n * Note that the root nodes still have a `Document` node as their parent.\n * Use `parseDocument` to get the `Document` node instead.\n *\n * @param data The data that should be parsed.\n * @param options Optional options for the parser and DOM builder.\n * @deprecated Use `parseDocument` instead.\n */\nfunction parseDOM(data, options) {\n    return parseDocument(data, options).children;\n}\nexports.parseDOM = parseDOM;\n/**\n * Creates a parser instance, with an attached DOM handler.\n *\n * @param cb A callback that will be called once parsing has been completed.\n * @param options Optional options for the parser and DOM builder.\n * @param elementCb An optional callback that will be called every time a tag has been completed inside of the DOM.\n */\nfunction createDomStream(cb, options, elementCb) {\n    var handler = new domhandler_1.DomHandler(cb, options, elementCb);\n    return new Parser_1.Parser(handler, options);\n}\nexports.createDomStream = createDomStream;\nvar Tokenizer_1 = require(\"./Tokenizer\");\nObject.defineProperty(exports, \"Tokenizer\", { enumerable: true, get: function () { return __importDefault(Tokenizer_1).default; } });\nvar ElementType = __importStar(require(\"domelementtype\"));\nexports.ElementType = ElementType;\n/*\n * All of the following exports exist for backwards-compatibility.\n * They should probably be removed eventually.\n */\n__exportStar(require(\"./FeedHandler\"), exports);\nexports.DomUtils = __importStar(require(\"domutils\"));\nvar FeedHandler_1 = require(\"./FeedHandler\");\nObject.defineProperty(exports, \"RssHandler\", { enumerable: true, get: function () { return FeedHandler_1.FeedHandler; } });\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getText = exports.getInnerHTML = exports.getOuterHTML = void 0;\nvar domhandler_1 = require(\"domhandler\");\nvar dom_serializer_1 = __importDefault(require(\"dom-serializer\"));\n/**\n * @param node Node to get the outer HTML of.\n * @param options Options for serialization.\n * @deprecated Use the `dom-serializer` module directly.\n * @returns `node`'s outer HTML.\n */\nfunction getOuterHTML(node, options) {\n    return dom_serializer_1.default(node, options);\n}\nexports.getOuterHTML = getOuterHTML;\n/**\n * @param node Node to get the inner HTML of.\n * @param options Options for serialization.\n * @deprecated Use the `dom-serializer` module directly.\n * @returns `node`'s inner HTML.\n */\nfunction getInnerHTML(node, options) {\n    return domhandler_1.hasChildren(node)\n        ? node.children.map(function (node) { return getOuterHTML(node, options); }).join(\"\")\n        : \"\";\n}\nexports.getInnerHTML = getInnerHTML;\n/**\n * Get a node's inner text.\n *\n * @param node Node to get the inner text of.\n * @returns `node`'s inner text.\n */\nfunction getText(node) {\n    if (Array.isArray(node))\n        return node.map(getText).join(\"\");\n    if (domhandler_1.isTag(node))\n        return node.name === \"br\" ? \"\\n\" : getText(node.children);\n    if (domhandler_1.isCDATA(node))\n        return getText(node.children);\n    if (domhandler_1.isText(node))\n        return node.data;\n    return \"\";\n}\nexports.getText = getText;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Module dependencies\n */\nvar ElementType = __importStar(require(\"domelementtype\"));\nvar entities_1 = require(\"entities\");\n/**\n * Mixed-case SVG and MathML tags & attributes\n * recognized by the HTML parser.\n *\n * @see https://html.spec.whatwg.org/multipage/parsing.html#parsing-main-inforeign\n */\nvar foreignNames_1 = require(\"./foreignNames\");\nvar unencodedElements = new Set([\n    \"style\",\n    \"script\",\n    \"xmp\",\n    \"iframe\",\n    \"noembed\",\n    \"noframes\",\n    \"plaintext\",\n    \"noscript\",\n]);\n/**\n * Format attributes\n */\nfunction formatAttributes(attributes, opts) {\n    if (!attributes)\n        return;\n    return Object.keys(attributes)\n        .map(function (key) {\n        var _a, _b;\n        var value = (_a = attributes[key]) !== null && _a !== void 0 ? _a : \"\";\n        if (opts.xmlMode === \"foreign\") {\n            /* Fix up mixed-case attribute names */\n            key = (_b = foreignNames_1.attributeNames.get(key)) !== null && _b !== void 0 ? _b : key;\n        }\n        if (!opts.emptyAttrs && !opts.xmlMode && value === \"\") {\n            return key;\n        }\n        return key + \"=\\\"\" + (opts.decodeEntities !== false\n            ? entities_1.encodeXML(value)\n            : value.replace(/\"/g, \"&quot;\")) + \"\\\"\";\n    })\n        .join(\" \");\n}\n/**\n * Self-enclosing tags\n */\nvar singleTag = new Set([\n    \"area\",\n    \"base\",\n    \"basefont\",\n    \"br\",\n    \"col\",\n    \"command\",\n    \"embed\",\n    \"frame\",\n    \"hr\",\n    \"img\",\n    \"input\",\n    \"isindex\",\n    \"keygen\",\n    \"link\",\n    \"meta\",\n    \"param\",\n    \"source\",\n    \"track\",\n    \"wbr\",\n]);\n/**\n * Renders a DOM node or an array of DOM nodes to a string.\n *\n * Can be thought of as the equivalent of the `outerHTML` of the passed node(s).\n *\n * @param node Node to be rendered.\n * @param options Changes serialization behavior\n */\nfunction render(node, options) {\n    if (options === void 0) { options = {}; }\n    // TODO: This is a bit hacky.\n    var nodes = Array.isArray(node) || node.cheerio ? node : [node];\n    var output = \"\";\n    for (var i = 0; i < nodes.length; i++) {\n        output += renderNode(nodes[i], options);\n    }\n    return output;\n}\nexports.default = render;\nfunction renderNode(node, options) {\n    switch (node.type) {\n        case ElementType.Root:\n            return render(node.children, options);\n        case ElementType.Directive:\n        case ElementType.Doctype:\n            return renderDirective(node);\n        case ElementType.Comment:\n            return renderComment(node);\n        case ElementType.CDATA:\n            return renderCdata(node);\n        case ElementType.Script:\n        case ElementType.Style:\n        case ElementType.Tag:\n            return renderTag(node, options);\n        case ElementType.Text:\n            return renderText(node, options);\n    }\n}\nvar foreignModeIntegrationPoints = new Set([\n    \"mi\",\n    \"mo\",\n    \"mn\",\n    \"ms\",\n    \"mtext\",\n    \"annotation-xml\",\n    \"foreignObject\",\n    \"desc\",\n    \"title\",\n]);\nvar foreignElements = new Set([\"svg\", \"math\"]);\nfunction renderTag(elem, opts) {\n    var _a;\n    // Handle SVG / MathML in HTML\n    if (opts.xmlMode === \"foreign\") {\n        /* Fix up mixed-case element names */\n        elem.name = (_a = foreignNames_1.elementNames.get(elem.name)) !== null && _a !== void 0 ? _a : elem.name;\n        /* Exit foreign mode at integration points */\n        if (elem.parent &&\n            foreignModeIntegrationPoints.has(elem.parent.name)) {\n            opts = __assign(__assign({}, opts), { xmlMode: false });\n        }\n    }\n    if (!opts.xmlMode && foreignElements.has(elem.name)) {\n        opts = __assign(__assign({}, opts), { xmlMode: \"foreign\" });\n    }\n    var tag = \"<\" + elem.name;\n    var attribs = formatAttributes(elem.attribs, opts);\n    if (attribs) {\n        tag += \" \" + attribs;\n    }\n    if (elem.children.length === 0 &&\n        (opts.xmlMode\n            ? // In XML mode or foreign mode, and user hasn't explicitly turned off self-closing tags\n                opts.selfClosingTags !== false\n            : // User explicitly asked for self-closing tags, even in HTML mode\n                opts.selfClosingTags && singleTag.has(elem.name))) {\n        if (!opts.xmlMode)\n            tag += \" \";\n        tag += \"/>\";\n    }\n    else {\n        tag += \">\";\n        if (elem.children.length > 0) {\n            tag += render(elem.children, opts);\n        }\n        if (opts.xmlMode || !singleTag.has(elem.name)) {\n            tag += \"</\" + elem.name + \">\";\n        }\n    }\n    return tag;\n}\nfunction renderDirective(elem) {\n    return \"<\" + elem.data + \">\";\n}\nfunction renderText(elem, opts) {\n    var data = elem.data || \"\";\n    // If entities weren't decoded, no need to encode them back\n    if (opts.decodeEntities !== false &&\n        !(!opts.xmlMode &&\n            elem.parent &&\n            unencodedElements.has(elem.parent.name))) {\n        data = entities_1.encodeXML(data);\n    }\n    return data;\n}\nfunction renderCdata(elem) {\n    return \"<![CDATA[\" + elem.children[0].data + \"]]>\";\n}\nfunction renderComment(elem) {\n    return \"<!--\" + elem.data + \"-->\";\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.attributeNames = exports.elementNames = void 0;\nexports.elementNames = new Map([\n    [\"altglyph\", \"altGlyph\"],\n    [\"altglyphdef\", \"altGlyphDef\"],\n    [\"altglyphitem\", \"altGlyphItem\"],\n    [\"animatecolor\", \"animateColor\"],\n    [\"animatemotion\", \"animateMotion\"],\n    [\"animatetransform\", \"animateTransform\"],\n    [\"clippath\", \"clipPath\"],\n    [\"feblend\", \"feBlend\"],\n    [\"fecolormatrix\", \"feColorMatrix\"],\n    [\"fecomponenttransfer\", \"feComponentTransfer\"],\n    [\"fecomposite\", \"feComposite\"],\n    [\"feconvolvematrix\", \"feConvolveMatrix\"],\n    [\"fediffuselighting\", \"feDiffuseLighting\"],\n    [\"fedisplacementmap\", \"feDisplacementMap\"],\n    [\"fedistantlight\", \"feDistantLight\"],\n    [\"fedropshadow\", \"feDropShadow\"],\n    [\"feflood\", \"feFlood\"],\n    [\"fefunca\", \"feFuncA\"],\n    [\"fefuncb\", \"feFuncB\"],\n    [\"fefuncg\", \"feFuncG\"],\n    [\"fefuncr\", \"feFuncR\"],\n    [\"fegaussianblur\", \"feGaussianBlur\"],\n    [\"feimage\", \"feImage\"],\n    [\"femerge\", \"feMerge\"],\n    [\"femergenode\", \"feMergeNode\"],\n    [\"femorphology\", \"feMorphology\"],\n    [\"feoffset\", \"feOffset\"],\n    [\"fepointlight\", \"fePointLight\"],\n    [\"fespecularlighting\", \"feSpecularLighting\"],\n    [\"fespotlight\", \"feSpotLight\"],\n    [\"fetile\", \"feTile\"],\n    [\"feturbulence\", \"feTurbulence\"],\n    [\"foreignobject\", \"foreignObject\"],\n    [\"glyphref\", \"glyphRef\"],\n    [\"lineargradient\", \"linearGradient\"],\n    [\"radialgradient\", \"radialGradient\"],\n    [\"textpath\", \"textPath\"],\n]);\nexports.attributeNames = new Map([\n    [\"definitionurl\", \"definitionURL\"],\n    [\"attributename\", \"attributeName\"],\n    [\"attributetype\", \"attributeType\"],\n    [\"basefrequency\", \"baseFrequency\"],\n    [\"baseprofile\", \"baseProfile\"],\n    [\"calcmode\", \"calcMode\"],\n    [\"clippathunits\", \"clipPathUnits\"],\n    [\"diffuseconstant\", \"diffuseConstant\"],\n    [\"edgemode\", \"edgeMode\"],\n    [\"filterunits\", \"filterUnits\"],\n    [\"glyphref\", \"glyphRef\"],\n    [\"gradienttransform\", \"gradientTransform\"],\n    [\"gradientunits\", \"gradientUnits\"],\n    [\"kernelmatrix\", \"kernelMatrix\"],\n    [\"kernelunitlength\", \"kernelUnitLength\"],\n    [\"keypoints\", \"keyPoints\"],\n    [\"keysplines\", \"keySplines\"],\n    [\"keytimes\", \"keyTimes\"],\n    [\"lengthadjust\", \"lengthAdjust\"],\n    [\"limitingconeangle\", \"limitingConeAngle\"],\n    [\"markerheight\", \"markerHeight\"],\n    [\"markerunits\", \"markerUnits\"],\n    [\"markerwidth\", \"markerWidth\"],\n    [\"maskcontentunits\", \"maskContentUnits\"],\n    [\"maskunits\", \"maskUnits\"],\n    [\"numoctaves\", \"numOctaves\"],\n    [\"pathlength\", \"pathLength\"],\n    [\"patterncontentunits\", \"patternContentUnits\"],\n    [\"patterntransform\", \"patternTransform\"],\n    [\"patternunits\", \"patternUnits\"],\n    [\"pointsatx\", \"pointsAtX\"],\n    [\"pointsaty\", \"pointsAtY\"],\n    [\"pointsatz\", \"pointsAtZ\"],\n    [\"preservealpha\", \"preserveAlpha\"],\n    [\"preserveaspectratio\", \"preserveAspectRatio\"],\n    [\"primitiveunits\", \"primitiveUnits\"],\n    [\"refx\", \"refX\"],\n    [\"refy\", \"refY\"],\n    [\"repeatcount\", \"repeatCount\"],\n    [\"repeatdur\", \"repeatDur\"],\n    [\"requiredextensions\", \"requiredExtensions\"],\n    [\"requiredfeatures\", \"requiredFeatures\"],\n    [\"specularconstant\", \"specularConstant\"],\n    [\"specularexponent\", \"specularExponent\"],\n    [\"spreadmethod\", \"spreadMethod\"],\n    [\"startoffset\", \"startOffset\"],\n    [\"stddeviation\", \"stdDeviation\"],\n    [\"stitchtiles\", \"stitchTiles\"],\n    [\"surfacescale\", \"surfaceScale\"],\n    [\"systemlanguage\", \"systemLanguage\"],\n    [\"tablevalues\", \"tableValues\"],\n    [\"targetx\", \"targetX\"],\n    [\"targety\", \"targetY\"],\n    [\"textlength\", \"textLength\"],\n    [\"viewbox\", \"viewBox\"],\n    [\"viewtarget\", \"viewTarget\"],\n    [\"xchannelselector\", \"xChannelSelector\"],\n    [\"ychannelselector\", \"yChannelSelector\"],\n    [\"zoomandpan\", \"zoomAndPan\"],\n]);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.prevElementSibling = exports.nextElementSibling = exports.getName = exports.hasAttrib = exports.getAttributeValue = exports.getSiblings = exports.getParent = exports.getChildren = void 0;\nvar domhandler_1 = require(\"domhandler\");\nvar emptyArray = [];\n/**\n * Get a node's children.\n *\n * @param elem Node to get the children of.\n * @returns `elem`'s children, or an empty array.\n */\nfunction getChildren(elem) {\n    var _a;\n    return (_a = elem.children) !== null && _a !== void 0 ? _a : emptyArray;\n}\nexports.getChildren = getChildren;\n/**\n * Get a node's parent.\n *\n * @param elem Node to get the parent of.\n * @returns `elem`'s parent node.\n */\nfunction getParent(elem) {\n    return elem.parent || null;\n}\nexports.getParent = getParent;\n/**\n * Gets an elements siblings, including the element itself.\n *\n * Attempts to get the children through the element's parent first.\n * If we don't have a parent (the element is a root node),\n * we walk the element's `prev` & `next` to get all remaining nodes.\n *\n * @param elem Element to get the siblings of.\n * @returns `elem`'s siblings.\n */\nfunction getSiblings(elem) {\n    var _a, _b;\n    var parent = getParent(elem);\n    if (parent != null)\n        return getChildren(parent);\n    var siblings = [elem];\n    var prev = elem.prev, next = elem.next;\n    while (prev != null) {\n        siblings.unshift(prev);\n        (_a = prev, prev = _a.prev);\n    }\n    while (next != null) {\n        siblings.push(next);\n        (_b = next, next = _b.next);\n    }\n    return siblings;\n}\nexports.getSiblings = getSiblings;\n/**\n * Gets an attribute from an element.\n *\n * @param elem Element to check.\n * @param name Attribute name to retrieve.\n * @returns The element's attribute value, or `undefined`.\n */\nfunction getAttributeValue(elem, name) {\n    var _a;\n    return (_a = elem.attribs) === null || _a === void 0 ? void 0 : _a[name];\n}\nexports.getAttributeValue = getAttributeValue;\n/**\n * Checks whether an element has an attribute.\n *\n * @param elem Element to check.\n * @param name Attribute name to look for.\n * @returns Returns whether `elem` has the attribute `name`.\n */\nfunction hasAttrib(elem, name) {\n    return (elem.attribs != null &&\n        Object.prototype.hasOwnProperty.call(elem.attribs, name) &&\n        elem.attribs[name] != null);\n}\nexports.hasAttrib = hasAttrib;\n/**\n * Get the tag name of an element.\n *\n * @param elem The element to get the name for.\n * @returns The tag name of `elem`.\n */\nfunction getName(elem) {\n    return elem.name;\n}\nexports.getName = getName;\n/**\n * Returns the next element sibling of a node.\n *\n * @param elem The element to get the next sibling of.\n * @returns `elem`'s next sibling that is a tag.\n */\nfunction nextElementSibling(elem) {\n    var _a;\n    var next = elem.next;\n    while (next !== null && !domhandler_1.isTag(next))\n        (_a = next, next = _a.next);\n    return next;\n}\nexports.nextElementSibling = nextElementSibling;\n/**\n * Returns the previous element sibling of a node.\n *\n * @param elem The element to get the previous sibling of.\n * @returns `elem`'s previous sibling that is a tag.\n */\nfunction prevElementSibling(elem) {\n    var _a;\n    var prev = elem.prev;\n    while (prev !== null && !domhandler_1.isTag(prev))\n        (_a = prev, prev = _a.prev);\n    return prev;\n}\nexports.prevElementSibling = prevElementSibling;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.prepend = exports.prependChild = exports.append = exports.appendChild = exports.replaceElement = exports.removeElement = void 0;\n/**\n * Remove an element from the dom\n *\n * @param elem The element to be removed\n */\nfunction removeElement(elem) {\n    if (elem.prev)\n        elem.prev.next = elem.next;\n    if (elem.next)\n        elem.next.prev = elem.prev;\n    if (elem.parent) {\n        var childs = elem.parent.children;\n        childs.splice(childs.lastIndexOf(elem), 1);\n    }\n}\nexports.removeElement = removeElement;\n/**\n * Replace an element in the dom\n *\n * @param elem The element to be replaced\n * @param replacement The element to be added\n */\nfunction replaceElement(elem, replacement) {\n    var prev = (replacement.prev = elem.prev);\n    if (prev) {\n        prev.next = replacement;\n    }\n    var next = (replacement.next = elem.next);\n    if (next) {\n        next.prev = replacement;\n    }\n    var parent = (replacement.parent = elem.parent);\n    if (parent) {\n        var childs = parent.children;\n        childs[childs.lastIndexOf(elem)] = replacement;\n    }\n}\nexports.replaceElement = replaceElement;\n/**\n * Append a child to an element.\n *\n * @param elem The element to append to.\n * @param child The element to be added as a child.\n */\nfunction appendChild(elem, child) {\n    removeElement(child);\n    child.next = null;\n    child.parent = elem;\n    if (elem.children.push(child) > 1) {\n        var sibling = elem.children[elem.children.length - 2];\n        sibling.next = child;\n        child.prev = sibling;\n    }\n    else {\n        child.prev = null;\n    }\n}\nexports.appendChild = appendChild;\n/**\n * Append an element after another.\n *\n * @param elem The element to append after.\n * @param next The element be added.\n */\nfunction append(elem, next) {\n    removeElement(next);\n    var parent = elem.parent;\n    var currNext = elem.next;\n    next.next = currNext;\n    next.prev = elem;\n    elem.next = next;\n    next.parent = parent;\n    if (currNext) {\n        currNext.prev = next;\n        if (parent) {\n            var childs = parent.children;\n            childs.splice(childs.lastIndexOf(currNext), 0, next);\n        }\n    }\n    else if (parent) {\n        parent.children.push(next);\n    }\n}\nexports.append = append;\n/**\n * Prepend a child to an element.\n *\n * @param elem The element to prepend before.\n * @param child The element to be added as a child.\n */\nfunction prependChild(elem, child) {\n    removeElement(child);\n    child.parent = elem;\n    child.prev = null;\n    if (elem.children.unshift(child) !== 1) {\n        var sibling = elem.children[1];\n        sibling.prev = child;\n        child.next = sibling;\n    }\n    else {\n        child.next = null;\n    }\n}\nexports.prependChild = prependChild;\n/**\n * Prepend an element before another.\n *\n * @param elem The element to prepend before.\n * @param prev The element be added.\n */\nfunction prepend(elem, prev) {\n    removeElement(prev);\n    var parent = elem.parent;\n    if (parent) {\n        var childs = parent.children;\n        childs.splice(childs.indexOf(elem), 0, prev);\n    }\n    if (elem.prev) {\n        elem.prev.next = prev;\n    }\n    prev.parent = parent;\n    prev.prev = elem.prev;\n    prev.next = elem;\n    elem.prev = prev;\n}\nexports.prepend = prepend;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getElementsByTagType = exports.getElementsByTagName = exports.getElementById = exports.getElements = exports.testElement = void 0;\nvar domhandler_1 = require(\"domhandler\");\nvar querying_1 = require(\"./querying\");\nvar Checks = {\n    tag_name: function (name) {\n        if (typeof name === \"function\") {\n            return function (elem) { return domhandler_1.isTag(elem) && name(elem.name); };\n        }\n        else if (name === \"*\") {\n            return domhandler_1.isTag;\n        }\n        return function (elem) { return domhandler_1.isTag(elem) && elem.name === name; };\n    },\n    tag_type: function (type) {\n        if (typeof type === \"function\") {\n            return function (elem) { return type(elem.type); };\n        }\n        return function (elem) { return elem.type === type; };\n    },\n    tag_contains: function (data) {\n        if (typeof data === \"function\") {\n            return function (elem) { return domhandler_1.isText(elem) && data(elem.data); };\n        }\n        return function (elem) { return domhandler_1.isText(elem) && elem.data === data; };\n    },\n};\n/**\n * @param attrib Attribute to check.\n * @param value Attribute value to look for.\n * @returns A function to check whether the a node has an attribute with a particular value.\n */\nfunction getAttribCheck(attrib, value) {\n    if (typeof value === \"function\") {\n        return function (elem) { return domhandler_1.isTag(elem) && value(elem.attribs[attrib]); };\n    }\n    return function (elem) { return domhandler_1.isTag(elem) && elem.attribs[attrib] === value; };\n}\n/**\n * @param a First function to combine.\n * @param b Second function to combine.\n * @returns A function taking a node and returning `true` if either\n * of the input functions returns `true` for the node.\n */\nfunction combineFuncs(a, b) {\n    return function (elem) { return a(elem) || b(elem); };\n}\n/**\n * @param options An object describing nodes to look for.\n * @returns A function executing all checks in `options` and returning `true`\n * if any of them match a node.\n */\nfunction compileTest(options) {\n    var funcs = Object.keys(options).map(function (key) {\n        var value = options[key];\n        return key in Checks\n            ? Checks[key](value)\n            : getAttribCheck(key, value);\n    });\n    return funcs.length === 0 ? null : funcs.reduce(combineFuncs);\n}\n/**\n * @param options An object describing nodes to look for.\n * @param node The element to test.\n * @returns Whether the element matches the description in `options`.\n */\nfunction testElement(options, node) {\n    var test = compileTest(options);\n    return test ? test(node) : true;\n}\nexports.testElement = testElement;\n/**\n * @param options An object describing nodes to look for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes that match `options`.\n */\nfunction getElements(options, nodes, recurse, limit) {\n    if (limit === void 0) { limit = Infinity; }\n    var test = compileTest(options);\n    return test ? querying_1.filter(test, nodes, recurse, limit) : [];\n}\nexports.getElements = getElements;\n/**\n * @param id The unique ID attribute value to look for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @returns The node with the supplied ID.\n */\nfunction getElementById(id, nodes, recurse) {\n    if (recurse === void 0) { recurse = true; }\n    if (!Array.isArray(nodes))\n        nodes = [nodes];\n    return querying_1.findOne(getAttribCheck(\"id\", id), nodes, recurse);\n}\nexports.getElementById = getElementById;\n/**\n * @param tagName Tag name to search for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes with the supplied `tagName`.\n */\nfunction getElementsByTagName(tagName, nodes, recurse, limit) {\n    if (recurse === void 0) { recurse = true; }\n    if (limit === void 0) { limit = Infinity; }\n    return querying_1.filter(Checks.tag_name(tagName), nodes, recurse, limit);\n}\nexports.getElementsByTagName = getElementsByTagName;\n/**\n * @param type Element type to look for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes with the supplied `type`.\n */\nfunction getElementsByTagType(type, nodes, recurse, limit) {\n    if (recurse === void 0) { recurse = true; }\n    if (limit === void 0) { limit = Infinity; }\n    return querying_1.filter(Checks.tag_type(type), nodes, recurse, limit);\n}\nexports.getElementsByTagType = getElementsByTagType;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.uniqueSort = exports.compareDocumentPosition = exports.removeSubsets = void 0;\nvar domhandler_1 = require(\"domhandler\");\n/**\n * Given an array of nodes, remove any member that is contained by another.\n *\n * @param nodes Nodes to filter.\n * @returns Remaining nodes that aren't subtrees of each other.\n */\nfunction removeSubsets(nodes) {\n    var idx = nodes.length;\n    /*\n     * Check if each node (or one of its ancestors) is already contained in the\n     * array.\n     */\n    while (--idx >= 0) {\n        var node = nodes[idx];\n        /*\n         * Remove the node if it is not unique.\n         * We are going through the array from the end, so we only\n         * have to check nodes that preceed the node under consideration in the array.\n         */\n        if (idx > 0 && nodes.lastIndexOf(node, idx - 1) >= 0) {\n            nodes.splice(idx, 1);\n            continue;\n        }\n        for (var ancestor = node.parent; ancestor; ancestor = ancestor.parent) {\n            if (nodes.includes(ancestor)) {\n                nodes.splice(idx, 1);\n                break;\n            }\n        }\n    }\n    return nodes;\n}\nexports.removeSubsets = removeSubsets;\n/**\n * Compare the position of one node against another node in any other document.\n * The return value is a bitmask with the following values:\n *\n * Document order:\n * > There is an ordering, document order, defined on all the nodes in the\n * > document corresponding to the order in which the first character of the\n * > XML representation of each node occurs in the XML representation of the\n * > document after expansion of general entities. Thus, the document element\n * > node will be the first node. Element nodes occur before their children.\n * > Thus, document order orders element nodes in order of the occurrence of\n * > their start-tag in the XML (after expansion of entities). The attribute\n * > nodes of an element occur after the element and before its children. The\n * > relative order of attribute nodes is implementation-dependent./\n *\n * Source:\n * http://www.w3.org/TR/DOM-Level-3-Core/glossary.html#dt-document-order\n *\n * @param nodeA The first node to use in the comparison\n * @param nodeB The second node to use in the comparison\n * @returns A bitmask describing the input nodes' relative position.\n *\n * See http://dom.spec.whatwg.org/#dom-node-comparedocumentposition for\n * a description of these values.\n */\nfunction compareDocumentPosition(nodeA, nodeB) {\n    var aParents = [];\n    var bParents = [];\n    if (nodeA === nodeB) {\n        return 0;\n    }\n    var current = domhandler_1.hasChildren(nodeA) ? nodeA : nodeA.parent;\n    while (current) {\n        aParents.unshift(current);\n        current = current.parent;\n    }\n    current = domhandler_1.hasChildren(nodeB) ? nodeB : nodeB.parent;\n    while (current) {\n        bParents.unshift(current);\n        current = current.parent;\n    }\n    var maxIdx = Math.min(aParents.length, bParents.length);\n    var idx = 0;\n    while (idx < maxIdx && aParents[idx] === bParents[idx]) {\n        idx++;\n    }\n    if (idx === 0) {\n        return 1 /* DISCONNECTED */;\n    }\n    var sharedParent = aParents[idx - 1];\n    var siblings = sharedParent.children;\n    var aSibling = aParents[idx];\n    var bSibling = bParents[idx];\n    if (siblings.indexOf(aSibling) > siblings.indexOf(bSibling)) {\n        if (sharedParent === nodeB) {\n            return 4 /* FOLLOWING */ | 16 /* CONTAINED_BY */;\n        }\n        return 4 /* FOLLOWING */;\n    }\n    if (sharedParent === nodeA) {\n        return 2 /* PRECEDING */ | 8 /* CONTAINS */;\n    }\n    return 2 /* PRECEDING */;\n}\nexports.compareDocumentPosition = compareDocumentPosition;\n/**\n * Sort an array of nodes based on their relative position in the document and\n * remove any duplicate nodes. If the array contains nodes that do not belong\n * to the same document, sort order is unspecified.\n *\n * @param nodes Array of DOM nodes.\n * @returns Collection of unique nodes, sorted in document order.\n */\nfunction uniqueSort(nodes) {\n    nodes = nodes.filter(function (node, i, arr) { return !arr.includes(node, i + 1); });\n    nodes.sort(function (a, b) {\n        var relative = compareDocumentPosition(a, b);\n        if (relative & 2 /* PRECEDING */) {\n            return -1;\n        }\n        else if (relative & 4 /* FOLLOWING */) {\n            return 1;\n        }\n        return 0;\n    });\n    return nodes;\n}\nexports.uniqueSort = uniqueSort;\n","\"use strict\";\n\nvar DLList, Events, Queues;\nDLList = require(\"./DLList\");\nEvents = require(\"./Events\");\nQueues = class Queues {\n  constructor(num_priorities) {\n    var i;\n    this.Events = new Events(this);\n    this._length = 0;\n\n    this._lists = function () {\n      var j, ref, results;\n      results = [];\n\n      for (i = j = 1, ref = num_priorities; 1 <= ref ? j <= ref : j >= ref; i = 1 <= ref ? ++j : --j) {\n        results.push(new DLList(() => {\n          return this.incr();\n        }, () => {\n          return this.decr();\n        }));\n      }\n\n      return results;\n    }.call(this);\n  }\n\n  incr() {\n    if (this._length++ === 0) {\n      return this.Events.trigger(\"leftzero\");\n    }\n  }\n\n  decr() {\n    if (--this._length === 0) {\n      return this.Events.trigger(\"zero\");\n    }\n  }\n\n  push(job) {\n    return this._lists[job.options.priority].push(job);\n  }\n\n  queued(priority) {\n    if (priority != null) {\n      return this._lists[priority].length;\n    } else {\n      return this._length;\n    }\n  }\n\n  shiftAll(fn) {\n    return this._lists.forEach(function (list) {\n      return list.forEachShift(fn);\n    });\n  }\n\n  getFirst(arr = this._lists) {\n    var j, len, list;\n\n    for (j = 0, len = arr.length; j < len; j++) {\n      list = arr[j];\n\n      if (list.length > 0) {\n        return list;\n      }\n    }\n\n    return [];\n  }\n\n  shiftLastFrom(priority) {\n    return this.getFirst(this._lists.slice(priority).reverse()).shift();\n  }\n\n};\nmodule.exports = Queues;","\"use strict\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar BottleneckError, DEFAULT_PRIORITY, Job, NUM_PRIORITIES, parser;\nNUM_PRIORITIES = 10;\nDEFAULT_PRIORITY = 5;\nparser = require(\"./parser\");\nBottleneckError = require(\"./BottleneckError\");\nJob = class Job {\n  constructor(task, args, options, jobDefaults, rejectOnDrop, Events, _states, Promise) {\n    this.task = task;\n    this.args = args;\n    this.rejectOnDrop = rejectOnDrop;\n    this.Events = Events;\n    this._states = _states;\n    this.Promise = Promise;\n    this.options = parser.load(options, jobDefaults);\n    this.options.priority = this._sanitizePriority(this.options.priority);\n\n    if (this.options.id === jobDefaults.id) {\n      this.options.id = `${this.options.id}-${this._randomIndex()}`;\n    }\n\n    this.promise = new this.Promise((_resolve, _reject) => {\n      this._resolve = _resolve;\n      this._reject = _reject;\n    });\n    this.retryCount = 0;\n  }\n\n  _sanitizePriority(priority) {\n    var sProperty;\n    sProperty = ~~priority !== priority ? DEFAULT_PRIORITY : priority;\n\n    if (sProperty < 0) {\n      return 0;\n    } else if (sProperty > NUM_PRIORITIES - 1) {\n      return NUM_PRIORITIES - 1;\n    } else {\n      return sProperty;\n    }\n  }\n\n  _randomIndex() {\n    return Math.random().toString(36).slice(2);\n  }\n\n  doDrop({\n    error,\n    message = \"This job has been dropped by Bottleneck\"\n  } = {}) {\n    if (this._states.remove(this.options.id)) {\n      if (this.rejectOnDrop) {\n        this._reject(error != null ? error : new BottleneckError(message));\n      }\n\n      this.Events.trigger(\"dropped\", {\n        args: this.args,\n        options: this.options,\n        task: this.task,\n        promise: this.promise\n      });\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  _assertStatus(expected) {\n    var status;\n    status = this._states.jobStatus(this.options.id);\n\n    if (!(status === expected || expected === \"DONE\" && status === null)) {\n      throw new BottleneckError(`Invalid job status ${status}, expected ${expected}. Please open an issue at https://github.com/SGrondin/bottleneck/issues`);\n    }\n  }\n\n  doReceive() {\n    this._states.start(this.options.id);\n\n    return this.Events.trigger(\"received\", {\n      args: this.args,\n      options: this.options\n    });\n  }\n\n  doQueue(reachedHWM, blocked) {\n    this._assertStatus(\"RECEIVED\");\n\n    this._states.next(this.options.id);\n\n    return this.Events.trigger(\"queued\", {\n      args: this.args,\n      options: this.options,\n      reachedHWM,\n      blocked\n    });\n  }\n\n  doRun() {\n    if (this.retryCount === 0) {\n      this._assertStatus(\"QUEUED\");\n\n      this._states.next(this.options.id);\n    } else {\n      this._assertStatus(\"EXECUTING\");\n    }\n\n    return this.Events.trigger(\"scheduled\", {\n      args: this.args,\n      options: this.options\n    });\n  }\n\n  doExecute(chained, clearGlobalState, run, free) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      var error, eventInfo, passed;\n\n      if (_this.retryCount === 0) {\n        _this._assertStatus(\"RUNNING\");\n\n        _this._states.next(_this.options.id);\n      } else {\n        _this._assertStatus(\"EXECUTING\");\n      }\n\n      eventInfo = {\n        args: _this.args,\n        options: _this.options,\n        retryCount: _this.retryCount\n      };\n\n      _this.Events.trigger(\"executing\", eventInfo);\n\n      try {\n        passed = yield chained != null ? chained.schedule(_this.options, _this.task, ..._this.args) : _this.task(..._this.args);\n\n        if (clearGlobalState()) {\n          _this.doDone(eventInfo);\n\n          yield free(_this.options, eventInfo);\n\n          _this._assertStatus(\"DONE\");\n\n          return _this._resolve(passed);\n        }\n      } catch (error1) {\n        error = error1;\n        return _this._onFailure(error, eventInfo, clearGlobalState, run, free);\n      }\n    })();\n  }\n\n  doExpire(clearGlobalState, run, free) {\n    var error, eventInfo;\n\n    if (this._states.jobStatus(this.options.id === \"RUNNING\")) {\n      this._states.next(this.options.id);\n    }\n\n    this._assertStatus(\"EXECUTING\");\n\n    eventInfo = {\n      args: this.args,\n      options: this.options,\n      retryCount: this.retryCount\n    };\n    error = new BottleneckError(`This job timed out after ${this.options.expiration} ms.`);\n    return this._onFailure(error, eventInfo, clearGlobalState, run, free);\n  }\n\n  _onFailure(error, eventInfo, clearGlobalState, run, free) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var retry, retryAfter;\n\n      if (clearGlobalState()) {\n        retry = yield _this2.Events.trigger(\"failed\", error, eventInfo);\n\n        if (retry != null) {\n          retryAfter = ~~retry;\n\n          _this2.Events.trigger(\"retry\", `Retrying ${_this2.options.id} after ${retryAfter} ms`, eventInfo);\n\n          _this2.retryCount++;\n          return run(retryAfter);\n        } else {\n          _this2.doDone(eventInfo);\n\n          yield free(_this2.options, eventInfo);\n\n          _this2._assertStatus(\"DONE\");\n\n          return _this2._reject(error);\n        }\n      }\n    })();\n  }\n\n  doDone(eventInfo) {\n    this._assertStatus(\"EXECUTING\");\n\n    this._states.next(this.options.id);\n\n    return this.Events.trigger(\"done\", eventInfo);\n  }\n\n};\nmodule.exports = Job;","\"use strict\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar BottleneckError, LocalDatastore, parser;\nparser = require(\"./parser\");\nBottleneckError = require(\"./BottleneckError\");\nLocalDatastore = class LocalDatastore {\n  constructor(instance, storeOptions, storeInstanceOptions) {\n    this.instance = instance;\n    this.storeOptions = storeOptions;\n    this.clientId = this.instance._randomIndex();\n    parser.load(storeInstanceOptions, storeInstanceOptions, this);\n    this._nextRequest = this._lastReservoirRefresh = this._lastReservoirIncrease = Date.now();\n    this._running = 0;\n    this._done = 0;\n    this._unblockTime = 0;\n    this.ready = this.Promise.resolve();\n    this.clients = {};\n\n    this._startHeartbeat();\n  }\n\n  _startHeartbeat() {\n    var base;\n\n    if (this.heartbeat == null && (this.storeOptions.reservoirRefreshInterval != null && this.storeOptions.reservoirRefreshAmount != null || this.storeOptions.reservoirIncreaseInterval != null && this.storeOptions.reservoirIncreaseAmount != null)) {\n      return typeof (base = this.heartbeat = setInterval(() => {\n        var amount, incr, maximum, now, reservoir;\n        now = Date.now();\n\n        if (this.storeOptions.reservoirRefreshInterval != null && now >= this._lastReservoirRefresh + this.storeOptions.reservoirRefreshInterval) {\n          this._lastReservoirRefresh = now;\n          this.storeOptions.reservoir = this.storeOptions.reservoirRefreshAmount;\n\n          this.instance._drainAll(this.computeCapacity());\n        }\n\n        if (this.storeOptions.reservoirIncreaseInterval != null && now >= this._lastReservoirIncrease + this.storeOptions.reservoirIncreaseInterval) {\n          var _this$storeOptions = this.storeOptions;\n          amount = _this$storeOptions.reservoirIncreaseAmount;\n          maximum = _this$storeOptions.reservoirIncreaseMaximum;\n          reservoir = _this$storeOptions.reservoir;\n          this._lastReservoirIncrease = now;\n          incr = maximum != null ? Math.min(amount, maximum - reservoir) : amount;\n\n          if (incr > 0) {\n            this.storeOptions.reservoir += incr;\n            return this.instance._drainAll(this.computeCapacity());\n          }\n        }\n      }, this.heartbeatInterval)).unref === \"function\" ? base.unref() : void 0;\n    } else {\n      return clearInterval(this.heartbeat);\n    }\n  }\n\n  __publish__(message) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this.yieldLoop();\n      return _this.instance.Events.trigger(\"message\", message.toString());\n    })();\n  }\n\n  __disconnect__(flush) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this2.yieldLoop();\n      clearInterval(_this2.heartbeat);\n      return _this2.Promise.resolve();\n    })();\n  }\n\n  yieldLoop(t = 0) {\n    return new this.Promise(function (resolve, reject) {\n      return setTimeout(resolve, t);\n    });\n  }\n\n  computePenalty() {\n    var ref;\n    return (ref = this.storeOptions.penalty) != null ? ref : 15 * this.storeOptions.minTime || 5000;\n  }\n\n  __updateSettings__(options) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this3.yieldLoop();\n      parser.overwrite(options, options, _this3.storeOptions);\n\n      _this3._startHeartbeat();\n\n      _this3.instance._drainAll(_this3.computeCapacity());\n\n      return true;\n    })();\n  }\n\n  __running__() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this4.yieldLoop();\n      return _this4._running;\n    })();\n  }\n\n  __queued__() {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this5.yieldLoop();\n      return _this5.instance.queued();\n    })();\n  }\n\n  __done__() {\n    var _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this6.yieldLoop();\n      return _this6._done;\n    })();\n  }\n\n  __groupCheck__(time) {\n    var _this7 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this7.yieldLoop();\n      return _this7._nextRequest + _this7.timeout < time;\n    })();\n  }\n\n  computeCapacity() {\n    var maxConcurrent, reservoir;\n    var _this$storeOptions2 = this.storeOptions;\n    maxConcurrent = _this$storeOptions2.maxConcurrent;\n    reservoir = _this$storeOptions2.reservoir;\n\n    if (maxConcurrent != null && reservoir != null) {\n      return Math.min(maxConcurrent - this._running, reservoir);\n    } else if (maxConcurrent != null) {\n      return maxConcurrent - this._running;\n    } else if (reservoir != null) {\n      return reservoir;\n    } else {\n      return null;\n    }\n  }\n\n  conditionsCheck(weight) {\n    var capacity;\n    capacity = this.computeCapacity();\n    return capacity == null || weight <= capacity;\n  }\n\n  __incrementReservoir__(incr) {\n    var _this8 = this;\n\n    return _asyncToGenerator(function* () {\n      var reservoir;\n      yield _this8.yieldLoop();\n      reservoir = _this8.storeOptions.reservoir += incr;\n\n      _this8.instance._drainAll(_this8.computeCapacity());\n\n      return reservoir;\n    })();\n  }\n\n  __currentReservoir__() {\n    var _this9 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this9.yieldLoop();\n      return _this9.storeOptions.reservoir;\n    })();\n  }\n\n  isBlocked(now) {\n    return this._unblockTime >= now;\n  }\n\n  check(weight, now) {\n    return this.conditionsCheck(weight) && this._nextRequest - now <= 0;\n  }\n\n  __check__(weight) {\n    var _this10 = this;\n\n    return _asyncToGenerator(function* () {\n      var now;\n      yield _this10.yieldLoop();\n      now = Date.now();\n      return _this10.check(weight, now);\n    })();\n  }\n\n  __register__(index, weight, expiration) {\n    var _this11 = this;\n\n    return _asyncToGenerator(function* () {\n      var now, wait;\n      yield _this11.yieldLoop();\n      now = Date.now();\n\n      if (_this11.conditionsCheck(weight)) {\n        _this11._running += weight;\n\n        if (_this11.storeOptions.reservoir != null) {\n          _this11.storeOptions.reservoir -= weight;\n        }\n\n        wait = Math.max(_this11._nextRequest - now, 0);\n        _this11._nextRequest = now + wait + _this11.storeOptions.minTime;\n        return {\n          success: true,\n          wait,\n          reservoir: _this11.storeOptions.reservoir\n        };\n      } else {\n        return {\n          success: false\n        };\n      }\n    })();\n  }\n\n  strategyIsBlock() {\n    return this.storeOptions.strategy === 3;\n  }\n\n  __submit__(queueLength, weight) {\n    var _this12 = this;\n\n    return _asyncToGenerator(function* () {\n      var blocked, now, reachedHWM;\n      yield _this12.yieldLoop();\n\n      if (_this12.storeOptions.maxConcurrent != null && weight > _this12.storeOptions.maxConcurrent) {\n        throw new BottleneckError(`Impossible to add a job having a weight of ${weight} to a limiter having a maxConcurrent setting of ${_this12.storeOptions.maxConcurrent}`);\n      }\n\n      now = Date.now();\n      reachedHWM = _this12.storeOptions.highWater != null && queueLength === _this12.storeOptions.highWater && !_this12.check(weight, now);\n      blocked = _this12.strategyIsBlock() && (reachedHWM || _this12.isBlocked(now));\n\n      if (blocked) {\n        _this12._unblockTime = now + _this12.computePenalty();\n        _this12._nextRequest = _this12._unblockTime + _this12.storeOptions.minTime;\n\n        _this12.instance._dropAllQueued();\n      }\n\n      return {\n        reachedHWM,\n        blocked,\n        strategy: _this12.storeOptions.strategy\n      };\n    })();\n  }\n\n  __free__(index, weight) {\n    var _this13 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this13.yieldLoop();\n      _this13._running -= weight;\n      _this13._done += weight;\n\n      _this13.instance._drainAll(_this13.computeCapacity());\n\n      return {\n        running: _this13._running\n      };\n    })();\n  }\n\n};\nmodule.exports = LocalDatastore;","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar BottleneckError, IORedisConnection, RedisConnection, RedisDatastore, parser;\nparser = require(\"./parser\");\nBottleneckError = require(\"./BottleneckError\");\nRedisConnection = require(\"./RedisConnection\");\nIORedisConnection = require(\"./IORedisConnection\");\nRedisDatastore = class RedisDatastore {\n  constructor(instance, storeOptions, storeInstanceOptions) {\n    this.instance = instance;\n    this.storeOptions = storeOptions;\n    this.originalId = this.instance.id;\n    this.clientId = this.instance._randomIndex();\n    parser.load(storeInstanceOptions, storeInstanceOptions, this);\n    this.clients = {};\n    this.capacityPriorityCounters = {};\n    this.sharedConnection = this.connection != null;\n\n    if (this.connection == null) {\n      this.connection = this.instance.datastore === \"redis\" ? new RedisConnection({\n        Redis: this.Redis,\n        clientOptions: this.clientOptions,\n        Promise: this.Promise,\n        Events: this.instance.Events\n      }) : this.instance.datastore === \"ioredis\" ? new IORedisConnection({\n        Redis: this.Redis,\n        clientOptions: this.clientOptions,\n        clusterNodes: this.clusterNodes,\n        Promise: this.Promise,\n        Events: this.instance.Events\n      }) : void 0;\n    }\n\n    this.instance.connection = this.connection;\n    this.instance.datastore = this.connection.datastore;\n    this.ready = this.connection.ready.then(clients => {\n      this.clients = clients;\n      return this.runScript(\"init\", this.prepareInitSettings(this.clearDatastore));\n    }).then(() => {\n      return this.connection.__addLimiter__(this.instance);\n    }).then(() => {\n      return this.runScript(\"register_client\", [this.instance.queued()]);\n    }).then(() => {\n      var base;\n\n      if (typeof (base = this.heartbeat = setInterval(() => {\n        return this.runScript(\"heartbeat\", []).catch(e => {\n          return this.instance.Events.trigger(\"error\", e);\n        });\n      }, this.heartbeatInterval)).unref === \"function\") {\n        base.unref();\n      }\n\n      return this.clients;\n    });\n  }\n\n  __publish__(message) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      var client;\n\n      var _ref = yield _this.ready;\n\n      client = _ref.client;\n      return client.publish(_this.instance.channel(), `message:${message.toString()}`);\n    })();\n  }\n\n  onMessage(channel, message) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var capacity, counter, data, drained, e, newCapacity, pos, priorityClient, rawCapacity, type;\n\n      try {\n        pos = message.indexOf(\":\");\n        var _ref2 = [message.slice(0, pos), message.slice(pos + 1)];\n        type = _ref2[0];\n        data = _ref2[1];\n\n        if (type === \"capacity\") {\n          return yield _this2.instance._drainAll(data.length > 0 ? ~~data : void 0);\n        } else if (type === \"capacity-priority\") {\n          var _data$split = data.split(\":\");\n\n          var _data$split2 = _slicedToArray(_data$split, 3);\n\n          rawCapacity = _data$split2[0];\n          priorityClient = _data$split2[1];\n          counter = _data$split2[2];\n          capacity = rawCapacity.length > 0 ? ~~rawCapacity : void 0;\n\n          if (priorityClient === _this2.clientId) {\n            drained = yield _this2.instance._drainAll(capacity);\n            newCapacity = capacity != null ? capacity - (drained || 0) : \"\";\n            return yield _this2.clients.client.publish(_this2.instance.channel(), `capacity-priority:${newCapacity}::${counter}`);\n          } else if (priorityClient === \"\") {\n            clearTimeout(_this2.capacityPriorityCounters[counter]);\n            delete _this2.capacityPriorityCounters[counter];\n            return _this2.instance._drainAll(capacity);\n          } else {\n            return _this2.capacityPriorityCounters[counter] = setTimeout(\n            /*#__PURE__*/\n            _asyncToGenerator(function* () {\n              var e;\n\n              try {\n                delete _this2.capacityPriorityCounters[counter];\n                yield _this2.runScript(\"blacklist_client\", [priorityClient]);\n                return yield _this2.instance._drainAll(capacity);\n              } catch (error) {\n                e = error;\n                return _this2.instance.Events.trigger(\"error\", e);\n              }\n            }), 1000);\n          }\n        } else if (type === \"message\") {\n          return _this2.instance.Events.trigger(\"message\", data);\n        } else if (type === \"blocked\") {\n          return yield _this2.instance._dropAllQueued();\n        }\n      } catch (error) {\n        e = error;\n        return _this2.instance.Events.trigger(\"error\", e);\n      }\n    })();\n  }\n\n  __disconnect__(flush) {\n    clearInterval(this.heartbeat);\n\n    if (this.sharedConnection) {\n      return this.connection.__removeLimiter__(this.instance);\n    } else {\n      return this.connection.disconnect(flush);\n    }\n  }\n\n  runScript(name, args) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      if (!(name === \"init\" || name === \"register_client\")) {\n        yield _this3.ready;\n      }\n\n      return new _this3.Promise((resolve, reject) => {\n        var all_args, arr;\n        all_args = [Date.now(), _this3.clientId].concat(args);\n\n        _this3.instance.Events.trigger(\"debug\", `Calling Redis script: ${name}.lua`, all_args);\n\n        arr = _this3.connection.__scriptArgs__(name, _this3.originalId, all_args, function (err, replies) {\n          if (err != null) {\n            return reject(err);\n          }\n\n          return resolve(replies);\n        });\n        return _this3.connection.__scriptFn__(name)(...arr);\n      }).catch(e => {\n        if (e.message === \"SETTINGS_KEY_NOT_FOUND\") {\n          if (name === \"heartbeat\") {\n            return _this3.Promise.resolve();\n          } else {\n            return _this3.runScript(\"init\", _this3.prepareInitSettings(false)).then(() => {\n              return _this3.runScript(name, args);\n            });\n          }\n        } else if (e.message === \"UNKNOWN_CLIENT\") {\n          return _this3.runScript(\"register_client\", [_this3.instance.queued()]).then(() => {\n            return _this3.runScript(name, args);\n          });\n        } else {\n          return _this3.Promise.reject(e);\n        }\n      });\n    })();\n  }\n\n  prepareArray(arr) {\n    var i, len, results, x;\n    results = [];\n\n    for (i = 0, len = arr.length; i < len; i++) {\n      x = arr[i];\n      results.push(x != null ? x.toString() : \"\");\n    }\n\n    return results;\n  }\n\n  prepareObject(obj) {\n    var arr, k, v;\n    arr = [];\n\n    for (k in obj) {\n      v = obj[k];\n      arr.push(k, v != null ? v.toString() : \"\");\n    }\n\n    return arr;\n  }\n\n  prepareInitSettings(clear) {\n    var args;\n    args = this.prepareObject(Object.assign({}, this.storeOptions, {\n      id: this.originalId,\n      version: this.instance.version,\n      groupTimeout: this.timeout,\n      clientTimeout: this.clientTimeout\n    }));\n    args.unshift(clear ? 1 : 0, this.instance.version);\n    return args;\n  }\n\n  convertBool(b) {\n    return !!b;\n  }\n\n  __updateSettings__(options) {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this4.runScript(\"update_settings\", _this4.prepareObject(options));\n      return parser.overwrite(options, options, _this4.storeOptions);\n    })();\n  }\n\n  __running__() {\n    return this.runScript(\"running\", []);\n  }\n\n  __queued__() {\n    return this.runScript(\"queued\", []);\n  }\n\n  __done__() {\n    return this.runScript(\"done\", []);\n  }\n\n  __groupCheck__() {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      return _this5.convertBool((yield _this5.runScript(\"group_check\", [])));\n    })();\n  }\n\n  __incrementReservoir__(incr) {\n    return this.runScript(\"increment_reservoir\", [incr]);\n  }\n\n  __currentReservoir__() {\n    return this.runScript(\"current_reservoir\", []);\n  }\n\n  __check__(weight) {\n    var _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      return _this6.convertBool((yield _this6.runScript(\"check\", _this6.prepareArray([weight]))));\n    })();\n  }\n\n  __register__(index, weight, expiration) {\n    var _this7 = this;\n\n    return _asyncToGenerator(function* () {\n      var reservoir, success, wait;\n\n      var _ref4 = yield _this7.runScript(\"register\", _this7.prepareArray([index, weight, expiration]));\n\n      var _ref5 = _slicedToArray(_ref4, 3);\n\n      success = _ref5[0];\n      wait = _ref5[1];\n      reservoir = _ref5[2];\n      return {\n        success: _this7.convertBool(success),\n        wait,\n        reservoir\n      };\n    })();\n  }\n\n  __submit__(queueLength, weight) {\n    var _this8 = this;\n\n    return _asyncToGenerator(function* () {\n      var blocked, e, maxConcurrent, overweight, reachedHWM, strategy;\n\n      try {\n        var _ref6 = yield _this8.runScript(\"submit\", _this8.prepareArray([queueLength, weight]));\n\n        var _ref7 = _slicedToArray(_ref6, 3);\n\n        reachedHWM = _ref7[0];\n        blocked = _ref7[1];\n        strategy = _ref7[2];\n        return {\n          reachedHWM: _this8.convertBool(reachedHWM),\n          blocked: _this8.convertBool(blocked),\n          strategy\n        };\n      } catch (error) {\n        e = error;\n\n        if (e.message.indexOf(\"OVERWEIGHT\") === 0) {\n          var _e$message$split = e.message.split(\":\");\n\n          var _e$message$split2 = _slicedToArray(_e$message$split, 3);\n\n          overweight = _e$message$split2[0];\n          weight = _e$message$split2[1];\n          maxConcurrent = _e$message$split2[2];\n          throw new BottleneckError(`Impossible to add a job having a weight of ${weight} to a limiter having a maxConcurrent setting of ${maxConcurrent}`);\n        } else {\n          throw e;\n        }\n      }\n    })();\n  }\n\n  __free__(index, weight) {\n    var _this9 = this;\n\n    return _asyncToGenerator(function* () {\n      var running;\n      running = yield _this9.runScript(\"free\", _this9.prepareArray([index]));\n      return {\n        running\n      };\n    })();\n  }\n\n};\nmodule.exports = RedisDatastore;","\"use strict\";\n\nvar BottleneckError, States;\nBottleneckError = require(\"./BottleneckError\");\nStates = class States {\n  constructor(status1) {\n    this.status = status1;\n    this._jobs = {};\n    this.counts = this.status.map(function () {\n      return 0;\n    });\n  }\n\n  next(id) {\n    var current, next;\n    current = this._jobs[id];\n    next = current + 1;\n\n    if (current != null && next < this.status.length) {\n      this.counts[current]--;\n      this.counts[next]++;\n      return this._jobs[id]++;\n    } else if (current != null) {\n      this.counts[current]--;\n      return delete this._jobs[id];\n    }\n  }\n\n  start(id) {\n    var initial;\n    initial = 0;\n    this._jobs[id] = initial;\n    return this.counts[initial]++;\n  }\n\n  remove(id) {\n    var current;\n    current = this._jobs[id];\n\n    if (current != null) {\n      this.counts[current]--;\n      delete this._jobs[id];\n    }\n\n    return current != null;\n  }\n\n  jobStatus(id) {\n    var ref;\n    return (ref = this.status[this._jobs[id]]) != null ? ref : null;\n  }\n\n  statusJobs(status) {\n    var k, pos, ref, results, v;\n\n    if (status != null) {\n      pos = this.status.indexOf(status);\n\n      if (pos < 0) {\n        throw new BottleneckError(`status must be one of ${this.status.join(', ')}`);\n      }\n\n      ref = this._jobs;\n      results = [];\n\n      for (k in ref) {\n        v = ref[k];\n\n        if (v === pos) {\n          results.push(k);\n        }\n      }\n\n      return results;\n    } else {\n      return Object.keys(this._jobs);\n    }\n  }\n\n  statusCounts() {\n    return this.counts.reduce((acc, v, i) => {\n      acc[this.status[i]] = v;\n      return acc;\n    }, {});\n  }\n\n};\nmodule.exports = States;","\"use strict\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar DLList, Sync;\nDLList = require(\"./DLList\");\nSync = class Sync {\n  constructor(name, Promise) {\n    this.schedule = this.schedule.bind(this);\n    this.name = name;\n    this.Promise = Promise;\n    this._running = 0;\n    this._queue = new DLList();\n  }\n\n  isEmpty() {\n    return this._queue.length === 0;\n  }\n\n  _tryToRun() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      var args, cb, error, reject, resolve, returned, task;\n\n      if (_this._running < 1 && _this._queue.length > 0) {\n        _this._running++;\n\n        var _this$_queue$shift = _this._queue.shift();\n\n        task = _this$_queue$shift.task;\n        args = _this$_queue$shift.args;\n        resolve = _this$_queue$shift.resolve;\n        reject = _this$_queue$shift.reject;\n        cb = yield _asyncToGenerator(function* () {\n          try {\n            returned = yield task(...args);\n            return function () {\n              return resolve(returned);\n            };\n          } catch (error1) {\n            error = error1;\n            return function () {\n              return reject(error);\n            };\n          }\n        })();\n        _this._running--;\n\n        _this._tryToRun();\n\n        return cb();\n      }\n    })();\n  }\n\n  schedule(task, ...args) {\n    var promise, reject, resolve;\n    resolve = reject = null;\n    promise = new this.Promise(function (_resolve, _reject) {\n      resolve = _resolve;\n      return reject = _reject;\n    });\n\n    this._queue.push({\n      task,\n      args,\n      resolve,\n      reject\n    });\n\n    this._tryToRun();\n\n    return promise;\n  }\n\n};\nmodule.exports = Sync;","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar Events, Group, IORedisConnection, RedisConnection, Scripts, parser;\nparser = require(\"./parser\");\nEvents = require(\"./Events\");\nRedisConnection = require(\"./RedisConnection\");\nIORedisConnection = require(\"./IORedisConnection\");\nScripts = require(\"./Scripts\");\n\nGroup = function () {\n  class Group {\n    constructor(limiterOptions = {}) {\n      this.deleteKey = this.deleteKey.bind(this);\n      this.limiterOptions = limiterOptions;\n      parser.load(this.limiterOptions, this.defaults, this);\n      this.Events = new Events(this);\n      this.instances = {};\n      this.Bottleneck = require(\"./Bottleneck\");\n\n      this._startAutoCleanup();\n\n      this.sharedConnection = this.connection != null;\n\n      if (this.connection == null) {\n        if (this.limiterOptions.datastore === \"redis\") {\n          this.connection = new RedisConnection(Object.assign({}, this.limiterOptions, {\n            Events: this.Events\n          }));\n        } else if (this.limiterOptions.datastore === \"ioredis\") {\n          this.connection = new IORedisConnection(Object.assign({}, this.limiterOptions, {\n            Events: this.Events\n          }));\n        }\n      }\n    }\n\n    key(key = \"\") {\n      var ref;\n      return (ref = this.instances[key]) != null ? ref : (() => {\n        var limiter;\n        limiter = this.instances[key] = new this.Bottleneck(Object.assign(this.limiterOptions, {\n          id: `${this.id}-${key}`,\n          timeout: this.timeout,\n          connection: this.connection\n        }));\n        this.Events.trigger(\"created\", limiter, key);\n        return limiter;\n      })();\n    }\n\n    deleteKey(key = \"\") {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        var deleted, instance;\n        instance = _this.instances[key];\n\n        if (_this.connection) {\n          deleted = yield _this.connection.__runCommand__(['del', ...Scripts.allKeys(`${_this.id}-${key}`)]);\n        }\n\n        if (instance != null) {\n          delete _this.instances[key];\n          yield instance.disconnect();\n        }\n\n        return instance != null || deleted > 0;\n      })();\n    }\n\n    limiters() {\n      var k, ref, results, v;\n      ref = this.instances;\n      results = [];\n\n      for (k in ref) {\n        v = ref[k];\n        results.push({\n          key: k,\n          limiter: v\n        });\n      }\n\n      return results;\n    }\n\n    keys() {\n      return Object.keys(this.instances);\n    }\n\n    clusterKeys() {\n      var _this2 = this;\n\n      return _asyncToGenerator(function* () {\n        var cursor, end, found, i, k, keys, len, next, start;\n\n        if (_this2.connection == null) {\n          return _this2.Promise.resolve(_this2.keys());\n        }\n\n        keys = [];\n        cursor = null;\n        start = `b_${_this2.id}-`.length;\n        end = \"_settings\".length;\n\n        while (cursor !== 0) {\n          var _ref = yield _this2.connection.__runCommand__([\"scan\", cursor != null ? cursor : 0, \"match\", `b_${_this2.id}-*_settings`, \"count\", 10000]);\n\n          var _ref2 = _slicedToArray(_ref, 2);\n\n          next = _ref2[0];\n          found = _ref2[1];\n          cursor = ~~next;\n\n          for (i = 0, len = found.length; i < len; i++) {\n            k = found[i];\n            keys.push(k.slice(start, -end));\n          }\n        }\n\n        return keys;\n      })();\n    }\n\n    _startAutoCleanup() {\n      var _this3 = this;\n\n      var base;\n      clearInterval(this.interval);\n      return typeof (base = this.interval = setInterval(\n      /*#__PURE__*/\n      _asyncToGenerator(function* () {\n        var e, k, ref, results, time, v;\n        time = Date.now();\n        ref = _this3.instances;\n        results = [];\n\n        for (k in ref) {\n          v = ref[k];\n\n          try {\n            if (yield v._store.__groupCheck__(time)) {\n              results.push(_this3.deleteKey(k));\n            } else {\n              results.push(void 0);\n            }\n          } catch (error) {\n            e = error;\n            results.push(v.Events.trigger(\"error\", e));\n          }\n        }\n\n        return results;\n      }), this.timeout / 2)).unref === \"function\" ? base.unref() : void 0;\n    }\n\n    updateSettings(options = {}) {\n      parser.overwrite(options, this.defaults, this);\n      parser.overwrite(options, options, this.limiterOptions);\n\n      if (options.timeout != null) {\n        return this._startAutoCleanup();\n      }\n    }\n\n    disconnect(flush = true) {\n      var ref;\n\n      if (!this.sharedConnection) {\n        return (ref = this.connection) != null ? ref.disconnect(flush) : void 0;\n      }\n    }\n\n  }\n\n  ;\n  Group.prototype.defaults = {\n    timeout: 1000 * 60 * 5,\n    connection: null,\n    Promise: Promise,\n    id: \"group-key\"\n  };\n  return Group;\n}.call(void 0);\n\nmodule.exports = Group;","\"use strict\";\n\nvar Batcher, Events, parser;\nparser = require(\"./parser\");\nEvents = require(\"./Events\");\n\nBatcher = function () {\n  class Batcher {\n    constructor(options = {}) {\n      this.options = options;\n      parser.load(this.options, this.defaults, this);\n      this.Events = new Events(this);\n      this._arr = [];\n\n      this._resetPromise();\n\n      this._lastFlush = Date.now();\n    }\n\n    _resetPromise() {\n      return this._promise = new this.Promise((res, rej) => {\n        return this._resolve = res;\n      });\n    }\n\n    _flush() {\n      clearTimeout(this._timeout);\n      this._lastFlush = Date.now();\n\n      this._resolve();\n\n      this.Events.trigger(\"batch\", this._arr);\n      this._arr = [];\n      return this._resetPromise();\n    }\n\n    add(data) {\n      var ret;\n\n      this._arr.push(data);\n\n      ret = this._promise;\n\n      if (this._arr.length === this.maxSize) {\n        this._flush();\n      } else if (this.maxTime != null && this._arr.length === 1) {\n        this._timeout = setTimeout(() => {\n          return this._flush();\n        }, this.maxTime);\n      }\n\n      return ret;\n    }\n\n  }\n\n  ;\n  Batcher.prototype.defaults = {\n    maxTime: null,\n    maxSize: null,\n    Promise: Promise\n  };\n  return Batcher;\n}.call(void 0);\n\nmodule.exports = Batcher;","'use strict';\n\nmodule.exports = (...arguments_) => {\n\treturn [...new Set([].concat(...arguments_))];\n};\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.convertPatternGroupToTask = exports.convertPatternGroupsToTasks = exports.groupPatternsByBaseDirectory = exports.getNegativePatternsAsPositive = exports.getPositivePatterns = exports.convertPatternsToTasks = exports.generate = void 0;\r\nconst utils = require(\"../utils\");\r\nfunction generate(patterns, settings) {\r\n    const positivePatterns = getPositivePatterns(patterns);\r\n    const negativePatterns = getNegativePatternsAsPositive(patterns, settings.ignore);\r\n    const staticPatterns = positivePatterns.filter((pattern) => utils.pattern.isStaticPattern(pattern, settings));\r\n    const dynamicPatterns = positivePatterns.filter((pattern) => utils.pattern.isDynamicPattern(pattern, settings));\r\n    const staticTasks = convertPatternsToTasks(staticPatterns, negativePatterns, /* dynamic */ false);\r\n    const dynamicTasks = convertPatternsToTasks(dynamicPatterns, negativePatterns, /* dynamic */ true);\r\n    return staticTasks.concat(dynamicTasks);\r\n}\r\nexports.generate = generate;\r\nfunction convertPatternsToTasks(positive, negative, dynamic) {\r\n    const positivePatternsGroup = groupPatternsByBaseDirectory(positive);\r\n    // When we have a global group  there is no reason to divide the patterns into independent tasks.\r\n    // In this case, the global task covers the rest.\r\n    if ('.' in positivePatternsGroup) {\r\n        const task = convertPatternGroupToTask('.', positive, negative, dynamic);\r\n        return [task];\r\n    }\r\n    return convertPatternGroupsToTasks(positivePatternsGroup, negative, dynamic);\r\n}\r\nexports.convertPatternsToTasks = convertPatternsToTasks;\r\nfunction getPositivePatterns(patterns) {\r\n    return utils.pattern.getPositivePatterns(patterns);\r\n}\r\nexports.getPositivePatterns = getPositivePatterns;\r\nfunction getNegativePatternsAsPositive(patterns, ignore) {\r\n    const negative = utils.pattern.getNegativePatterns(patterns).concat(ignore);\r\n    const positive = negative.map(utils.pattern.convertToPositivePattern);\r\n    return positive;\r\n}\r\nexports.getNegativePatternsAsPositive = getNegativePatternsAsPositive;\r\nfunction groupPatternsByBaseDirectory(patterns) {\r\n    const group = {};\r\n    return patterns.reduce((collection, pattern) => {\r\n        const base = utils.pattern.getBaseDirectory(pattern);\r\n        if (base in collection) {\r\n            collection[base].push(pattern);\r\n        }\r\n        else {\r\n            collection[base] = [pattern];\r\n        }\r\n        return collection;\r\n    }, group);\r\n}\r\nexports.groupPatternsByBaseDirectory = groupPatternsByBaseDirectory;\r\nfunction convertPatternGroupsToTasks(positive, negative, dynamic) {\r\n    return Object.keys(positive).map((base) => {\r\n        return convertPatternGroupToTask(base, positive[base], negative, dynamic);\r\n    });\r\n}\r\nexports.convertPatternGroupsToTasks = convertPatternGroupsToTasks;\r\nfunction convertPatternGroupToTask(base, positive, negative, dynamic) {\r\n    return {\r\n        dynamic,\r\n        positive,\r\n        negative,\r\n        base,\r\n        patterns: [].concat(positive, negative.map(utils.pattern.convertToNegativePattern))\r\n    };\r\n}\r\nexports.convertPatternGroupToTask = convertPatternGroupToTask;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.splitWhen = exports.flatten = void 0;\r\nfunction flatten(items) {\r\n    return items.reduce((collection, item) => [].concat(collection, item), []);\r\n}\r\nexports.flatten = flatten;\r\nfunction splitWhen(items, predicate) {\r\n    const result = [[]];\r\n    let groupIndex = 0;\r\n    for (const item of items) {\r\n        if (predicate(item)) {\r\n            groupIndex++;\r\n            result[groupIndex] = [];\r\n        }\r\n        else {\r\n            result[groupIndex].push(item);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexports.splitWhen = splitWhen;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.isEnoentCodeError = void 0;\r\nfunction isEnoentCodeError(error) {\r\n    return error.code === 'ENOENT';\r\n}\r\nexports.isEnoentCodeError = isEnoentCodeError;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.createDirentFromStats = void 0;\r\nclass DirentFromStats {\r\n    constructor(name, stats) {\r\n        this.name = name;\r\n        this.isBlockDevice = stats.isBlockDevice.bind(stats);\r\n        this.isCharacterDevice = stats.isCharacterDevice.bind(stats);\r\n        this.isDirectory = stats.isDirectory.bind(stats);\r\n        this.isFIFO = stats.isFIFO.bind(stats);\r\n        this.isFile = stats.isFile.bind(stats);\r\n        this.isSocket = stats.isSocket.bind(stats);\r\n        this.isSymbolicLink = stats.isSymbolicLink.bind(stats);\r\n    }\r\n}\r\nfunction createDirentFromStats(name, stats) {\r\n    return new DirentFromStats(name, stats);\r\n}\r\nexports.createDirentFromStats = createDirentFromStats;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.removeLeadingDotSegment = exports.escape = exports.makeAbsolute = exports.unixify = void 0;\r\nconst path = require(\"path\");\r\nconst LEADING_DOT_SEGMENT_CHARACTERS_COUNT = 2; // ./ or .\\\\\r\nconst UNESCAPED_GLOB_SYMBOLS_RE = /(\\\\?)([()*?[\\]{|}]|^!|[!+@](?=\\())/g;\r\n/**\r\n * Designed to work only with simple paths: `dir\\\\file`.\r\n */\r\nfunction unixify(filepath) {\r\n    return filepath.replace(/\\\\/g, '/');\r\n}\r\nexports.unixify = unixify;\r\nfunction makeAbsolute(cwd, filepath) {\r\n    return path.resolve(cwd, filepath);\r\n}\r\nexports.makeAbsolute = makeAbsolute;\r\nfunction escape(pattern) {\r\n    return pattern.replace(UNESCAPED_GLOB_SYMBOLS_RE, '\\\\$2');\r\n}\r\nexports.escape = escape;\r\nfunction removeLeadingDotSegment(entry) {\r\n    // We do not use `startsWith` because this is 10x slower than current implementation for some cases.\r\n    // eslint-disable-next-line @typescript-eslint/prefer-string-starts-ends-with\r\n    if (entry.charAt(0) === '.') {\r\n        const secondCharactery = entry.charAt(1);\r\n        if (secondCharactery === '/' || secondCharactery === '\\\\') {\r\n            return entry.slice(LEADING_DOT_SEGMENT_CHARACTERS_COUNT);\r\n        }\r\n    }\r\n    return entry;\r\n}\r\nexports.removeLeadingDotSegment = removeLeadingDotSegment;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.matchAny = exports.convertPatternsToRe = exports.makeRe = exports.getPatternParts = exports.expandBraceExpansion = exports.expandPatternsWithBraceExpansion = exports.isAffectDepthOfReadingPattern = exports.endsWithSlashGlobStar = exports.hasGlobStar = exports.getBaseDirectory = exports.getPositivePatterns = exports.getNegativePatterns = exports.isPositivePattern = exports.isNegativePattern = exports.convertToNegativePattern = exports.convertToPositivePattern = exports.isDynamicPattern = exports.isStaticPattern = void 0;\r\nconst path = require(\"path\");\r\nconst globParent = require(\"glob-parent\");\r\nconst micromatch = require(\"micromatch\");\r\nconst picomatch = require(\"picomatch\");\r\nconst GLOBSTAR = '**';\r\nconst ESCAPE_SYMBOL = '\\\\';\r\nconst COMMON_GLOB_SYMBOLS_RE = /[*?]|^!/;\r\nconst REGEX_CHARACTER_CLASS_SYMBOLS_RE = /\\[.*]/;\r\nconst REGEX_GROUP_SYMBOLS_RE = /(?:^|[^!*+?@])\\(.*\\|.*\\)/;\r\nconst GLOB_EXTENSION_SYMBOLS_RE = /[!*+?@]\\(.*\\)/;\r\nconst BRACE_EXPANSIONS_SYMBOLS_RE = /{.*(?:,|\\.\\.).*}/;\r\nfunction isStaticPattern(pattern, options = {}) {\r\n    return !isDynamicPattern(pattern, options);\r\n}\r\nexports.isStaticPattern = isStaticPattern;\r\nfunction isDynamicPattern(pattern, options = {}) {\r\n    /**\r\n     * A special case with an empty string is necessary for matching patterns that start with a forward slash.\r\n     * An empty string cannot be a dynamic pattern.\r\n     * For example, the pattern `/lib/*` will be spread into parts: '', 'lib', '*'.\r\n     */\r\n    if (pattern === '') {\r\n        return false;\r\n    }\r\n    /**\r\n     * When the `caseSensitiveMatch` option is disabled, all patterns must be marked as dynamic, because we cannot check\r\n     * filepath directly (without read directory).\r\n     */\r\n    if (options.caseSensitiveMatch === false || pattern.includes(ESCAPE_SYMBOL)) {\r\n        return true;\r\n    }\r\n    if (COMMON_GLOB_SYMBOLS_RE.test(pattern) || REGEX_CHARACTER_CLASS_SYMBOLS_RE.test(pattern) || REGEX_GROUP_SYMBOLS_RE.test(pattern)) {\r\n        return true;\r\n    }\r\n    if (options.extglob !== false && GLOB_EXTENSION_SYMBOLS_RE.test(pattern)) {\r\n        return true;\r\n    }\r\n    if (options.braceExpansion !== false && BRACE_EXPANSIONS_SYMBOLS_RE.test(pattern)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexports.isDynamicPattern = isDynamicPattern;\r\nfunction convertToPositivePattern(pattern) {\r\n    return isNegativePattern(pattern) ? pattern.slice(1) : pattern;\r\n}\r\nexports.convertToPositivePattern = convertToPositivePattern;\r\nfunction convertToNegativePattern(pattern) {\r\n    return '!' + pattern;\r\n}\r\nexports.convertToNegativePattern = convertToNegativePattern;\r\nfunction isNegativePattern(pattern) {\r\n    return pattern.startsWith('!') && pattern[1] !== '(';\r\n}\r\nexports.isNegativePattern = isNegativePattern;\r\nfunction isPositivePattern(pattern) {\r\n    return !isNegativePattern(pattern);\r\n}\r\nexports.isPositivePattern = isPositivePattern;\r\nfunction getNegativePatterns(patterns) {\r\n    return patterns.filter(isNegativePattern);\r\n}\r\nexports.getNegativePatterns = getNegativePatterns;\r\nfunction getPositivePatterns(patterns) {\r\n    return patterns.filter(isPositivePattern);\r\n}\r\nexports.getPositivePatterns = getPositivePatterns;\r\nfunction getBaseDirectory(pattern) {\r\n    return globParent(pattern, { flipBackslashes: false });\r\n}\r\nexports.getBaseDirectory = getBaseDirectory;\r\nfunction hasGlobStar(pattern) {\r\n    return pattern.includes(GLOBSTAR);\r\n}\r\nexports.hasGlobStar = hasGlobStar;\r\nfunction endsWithSlashGlobStar(pattern) {\r\n    return pattern.endsWith('/' + GLOBSTAR);\r\n}\r\nexports.endsWithSlashGlobStar = endsWithSlashGlobStar;\r\nfunction isAffectDepthOfReadingPattern(pattern) {\r\n    const basename = path.basename(pattern);\r\n    return endsWithSlashGlobStar(pattern) || isStaticPattern(basename);\r\n}\r\nexports.isAffectDepthOfReadingPattern = isAffectDepthOfReadingPattern;\r\nfunction expandPatternsWithBraceExpansion(patterns) {\r\n    return patterns.reduce((collection, pattern) => {\r\n        return collection.concat(expandBraceExpansion(pattern));\r\n    }, []);\r\n}\r\nexports.expandPatternsWithBraceExpansion = expandPatternsWithBraceExpansion;\r\nfunction expandBraceExpansion(pattern) {\r\n    return micromatch.braces(pattern, {\r\n        expand: true,\r\n        nodupes: true\r\n    });\r\n}\r\nexports.expandBraceExpansion = expandBraceExpansion;\r\nfunction getPatternParts(pattern, options) {\r\n    let { parts } = picomatch.scan(pattern, Object.assign(Object.assign({}, options), { parts: true }));\r\n    /**\r\n     * The scan method returns an empty array in some cases.\r\n     * See micromatch/picomatch#58 for more details.\r\n     */\r\n    if (parts.length === 0) {\r\n        parts = [pattern];\r\n    }\r\n    /**\r\n     * The scan method does not return an empty part for the pattern with a forward slash.\r\n     * This is another part of micromatch/picomatch#58.\r\n     */\r\n    if (parts[0].startsWith('/')) {\r\n        parts[0] = parts[0].slice(1);\r\n        parts.unshift('');\r\n    }\r\n    return parts;\r\n}\r\nexports.getPatternParts = getPatternParts;\r\nfunction makeRe(pattern, options) {\r\n    return micromatch.makeRe(pattern, options);\r\n}\r\nexports.makeRe = makeRe;\r\nfunction convertPatternsToRe(patterns, options) {\r\n    return patterns.map((pattern) => makeRe(pattern, options));\r\n}\r\nexports.convertPatternsToRe = convertPatternsToRe;\r\nfunction matchAny(entry, patternsRe) {\r\n    return patternsRe.some((patternRe) => patternRe.test(entry));\r\n}\r\nexports.matchAny = matchAny;\r\n","'use strict';\n\nvar isGlob = require('is-glob');\nvar pathPosixDirname = require('path').posix.dirname;\nvar isWin32 = require('os').platform() === 'win32';\n\nvar slash = '/';\nvar backslash = /\\\\/g;\nvar enclosure = /[\\{\\[].*[\\}\\]]$/;\nvar globby = /(^|[^\\\\])([\\{\\[]|\\([^\\)]+$)/;\nvar escaped = /\\\\([\\!\\*\\?\\|\\[\\]\\(\\)\\{\\}])/g;\n\n/**\n * @param {string} str\n * @param {Object} opts\n * @param {boolean} [opts.flipBackslashes=true]\n * @returns {string}\n */\nmodule.exports = function globParent(str, opts) {\n  var options = Object.assign({ flipBackslashes: true }, opts);\n\n  // flip windows path separators\n  if (options.flipBackslashes && isWin32 && str.indexOf(slash) < 0) {\n    str = str.replace(backslash, slash);\n  }\n\n  // special case for strings ending in enclosure containing path separator\n  if (enclosure.test(str)) {\n    str += slash;\n  }\n\n  // preserves full path in case of trailing path separator\n  str += 'a';\n\n  // remove path parts that are globby\n  do {\n    str = pathPosixDirname(str);\n  } while (isGlob(str) || globby.test(str));\n\n  // remove escape chars and return result\n  return str.replace(escaped, '$1');\n};\n","/*!\n * is-glob <https://github.com/jonschlinkert/is-glob>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nvar isExtglob = require('is-extglob');\nvar chars = { '{': '}', '(': ')', '[': ']'};\nvar strictRegex = /\\\\(.)|(^!|\\*|[\\].+)]\\?|\\[[^\\\\\\]]+\\]|\\{[^\\\\}]+\\}|\\(\\?[:!=][^\\\\)]+\\)|\\([^|]+\\|[^\\\\)]+\\))/;\nvar relaxedRegex = /\\\\(.)|(^!|[*?{}()[\\]]|\\(\\?)/;\n\nmodule.exports = function isGlob(str, options) {\n  if (typeof str !== 'string' || str === '') {\n    return false;\n  }\n\n  if (isExtglob(str)) {\n    return true;\n  }\n\n  var regex = strictRegex;\n  var match;\n\n  // optionally relax regex\n  if (options && options.strict === false) {\n    regex = relaxedRegex;\n  }\n\n  while ((match = regex.exec(str))) {\n    if (match[2]) return true;\n    var idx = match.index + match[0].length;\n\n    // if an open bracket/brace/paren is escaped,\n    // set the index to the next closing character\n    var open = match[1];\n    var close = open ? chars[open] : null;\n    if (open && close) {\n      var n = str.indexOf(close, idx);\n      if (n !== -1) {\n        idx = n + 1;\n      }\n    }\n\n    str = str.slice(idx);\n  }\n  return false;\n};\n","/*!\n * is-extglob <https://github.com/jonschlinkert/is-extglob>\n *\n * Copyright (c) 2014-2016, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\nmodule.exports = function isExtglob(str) {\n  if (typeof str !== 'string' || str === '') {\n    return false;\n  }\n\n  var match;\n  while ((match = /(\\\\).|([@?!+*]\\(.*\\))/g.exec(str))) {\n    if (match[2]) return true;\n    str = str.slice(match.index + match[0].length);\n  }\n\n  return false;\n};\n","'use strict';\n\nconst util = require('util');\nconst braces = require('braces');\nconst picomatch = require('picomatch');\nconst utils = require('picomatch/lib/utils');\nconst isEmptyString = val => val === '' || val === './';\n\n/**\n * Returns an array of strings that match one or more glob patterns.\n *\n * ```js\n * const mm = require('micromatch');\n * // mm(list, patterns[, options]);\n *\n * console.log(mm(['a.js', 'a.txt'], ['*.js']));\n * //=> [ 'a.js' ]\n * ```\n * @param {String|Array<string>} `list` List of strings to match.\n * @param {String|Array<string>} `patterns` One or more glob patterns to use for matching.\n * @param {Object} `options` See available [options](#options)\n * @return {Array} Returns an array of matches\n * @summary false\n * @api public\n */\n\nconst micromatch = (list, patterns, options) => {\n  patterns = [].concat(patterns);\n  list = [].concat(list);\n\n  let omit = new Set();\n  let keep = new Set();\n  let items = new Set();\n  let negatives = 0;\n\n  let onResult = state => {\n    items.add(state.output);\n    if (options && options.onResult) {\n      options.onResult(state);\n    }\n  };\n\n  for (let i = 0; i < patterns.length; i++) {\n    let isMatch = picomatch(String(patterns[i]), { ...options, onResult }, true);\n    let negated = isMatch.state.negated || isMatch.state.negatedExtglob;\n    if (negated) negatives++;\n\n    for (let item of list) {\n      let matched = isMatch(item, true);\n\n      let match = negated ? !matched.isMatch : matched.isMatch;\n      if (!match) continue;\n\n      if (negated) {\n        omit.add(matched.output);\n      } else {\n        omit.delete(matched.output);\n        keep.add(matched.output);\n      }\n    }\n  }\n\n  let result = negatives === patterns.length ? [...items] : [...keep];\n  let matches = result.filter(item => !omit.has(item));\n\n  if (options && matches.length === 0) {\n    if (options.failglob === true) {\n      throw new Error(`No matches found for \"${patterns.join(', ')}\"`);\n    }\n\n    if (options.nonull === true || options.nullglob === true) {\n      return options.unescape ? patterns.map(p => p.replace(/\\\\/g, '')) : patterns;\n    }\n  }\n\n  return matches;\n};\n\n/**\n * Backwards compatibility\n */\n\nmicromatch.match = micromatch;\n\n/**\n * Returns a matcher function from the given glob `pattern` and `options`.\n * The returned function takes a string to match as its only argument and returns\n * true if the string is a match.\n *\n * ```js\n * const mm = require('micromatch');\n * // mm.matcher(pattern[, options]);\n *\n * const isMatch = mm.matcher('*.!(*a)');\n * console.log(isMatch('a.a')); //=> false\n * console.log(isMatch('a.b')); //=> true\n * ```\n * @param {String} `pattern` Glob pattern\n * @param {Object} `options`\n * @return {Function} Returns a matcher function.\n * @api public\n */\n\nmicromatch.matcher = (pattern, options) => picomatch(pattern, options);\n\n/**\n * Returns true if **any** of the given glob `patterns` match the specified `string`.\n *\n * ```js\n * const mm = require('micromatch');\n * // mm.isMatch(string, patterns[, options]);\n *\n * console.log(mm.isMatch('a.a', ['b.*', '*.a'])); //=> true\n * console.log(mm.isMatch('a.a', 'b.*')); //=> false\n * ```\n * @param {String} `str` The string to test.\n * @param {String|Array} `patterns` One or more glob patterns to use for matching.\n * @param {Object} `[options]` See available [options](#options).\n * @return {Boolean} Returns true if any patterns match `str`\n * @api public\n */\n\nmicromatch.isMatch = (str, patterns, options) => picomatch(patterns, options)(str);\n\n/**\n * Backwards compatibility\n */\n\nmicromatch.any = micromatch.isMatch;\n\n/**\n * Returns a list of strings that _**do not match any**_ of the given `patterns`.\n *\n * ```js\n * const mm = require('micromatch');\n * // mm.not(list, patterns[, options]);\n *\n * console.log(mm.not(['a.a', 'b.b', 'c.c'], '*.a'));\n * //=> ['b.b', 'c.c']\n * ```\n * @param {Array} `list` Array of strings to match.\n * @param {String|Array} `patterns` One or more glob pattern to use for matching.\n * @param {Object} `options` See available [options](#options) for changing how matches are performed\n * @return {Array} Returns an array of strings that **do not match** the given patterns.\n * @api public\n */\n\nmicromatch.not = (list, patterns, options = {}) => {\n  patterns = [].concat(patterns).map(String);\n  let result = new Set();\n  let items = [];\n\n  let onResult = state => {\n    if (options.onResult) options.onResult(state);\n    items.push(state.output);\n  };\n\n  let matches = micromatch(list, patterns, { ...options, onResult });\n\n  for (let item of items) {\n    if (!matches.includes(item)) {\n      result.add(item);\n    }\n  }\n  return [...result];\n};\n\n/**\n * Returns true if the given `string` contains the given pattern. Similar\n * to [.isMatch](#isMatch) but the pattern can match any part of the string.\n *\n * ```js\n * var mm = require('micromatch');\n * // mm.contains(string, pattern[, options]);\n *\n * console.log(mm.contains('aa/bb/cc', '*b'));\n * //=> true\n * console.log(mm.contains('aa/bb/cc', '*d'));\n * //=> false\n * ```\n * @param {String} `str` The string to match.\n * @param {String|Array} `patterns` Glob pattern to use for matching.\n * @param {Object} `options` See available [options](#options) for changing how matches are performed\n * @return {Boolean} Returns true if any of the patterns matches any part of `str`.\n * @api public\n */\n\nmicromatch.contains = (str, pattern, options) => {\n  if (typeof str !== 'string') {\n    throw new TypeError(`Expected a string: \"${util.inspect(str)}\"`);\n  }\n\n  if (Array.isArray(pattern)) {\n    return pattern.some(p => micromatch.contains(str, p, options));\n  }\n\n  if (typeof pattern === 'string') {\n    if (isEmptyString(str) || isEmptyString(pattern)) {\n      return false;\n    }\n\n    if (str.includes(pattern) || (str.startsWith('./') && str.slice(2).includes(pattern))) {\n      return true;\n    }\n  }\n\n  return micromatch.isMatch(str, pattern, { ...options, contains: true });\n};\n\n/**\n * Filter the keys of the given object with the given `glob` pattern\n * and `options`. Does not attempt to match nested keys. If you need this feature,\n * use [glob-object][] instead.\n *\n * ```js\n * const mm = require('micromatch');\n * // mm.matchKeys(object, patterns[, options]);\n *\n * const obj = { aa: 'a', ab: 'b', ac: 'c' };\n * console.log(mm.matchKeys(obj, '*b'));\n * //=> { ab: 'b' }\n * ```\n * @param {Object} `object` The object with keys to filter.\n * @param {String|Array} `patterns` One or more glob patterns to use for matching.\n * @param {Object} `options` See available [options](#options) for changing how matches are performed\n * @return {Object} Returns an object with only keys that match the given patterns.\n * @api public\n */\n\nmicromatch.matchKeys = (obj, patterns, options) => {\n  if (!utils.isObject(obj)) {\n    throw new TypeError('Expected the first argument to be an object');\n  }\n  let keys = micromatch(Object.keys(obj), patterns, options);\n  let res = {};\n  for (let key of keys) res[key] = obj[key];\n  return res;\n};\n\n/**\n * Returns true if some of the strings in the given `list` match any of the given glob `patterns`.\n *\n * ```js\n * const mm = require('micromatch');\n * // mm.some(list, patterns[, options]);\n *\n * console.log(mm.some(['foo.js', 'bar.js'], ['*.js', '!foo.js']));\n * // true\n * console.log(mm.some(['foo.js'], ['*.js', '!foo.js']));\n * // false\n * ```\n * @param {String|Array} `list` The string or array of strings to test. Returns as soon as the first match is found.\n * @param {String|Array} `patterns` One or more glob patterns to use for matching.\n * @param {Object} `options` See available [options](#options) for changing how matches are performed\n * @return {Boolean} Returns true if any `patterns` matches any of the strings in `list`\n * @api public\n */\n\nmicromatch.some = (list, patterns, options) => {\n  let items = [].concat(list);\n\n  for (let pattern of [].concat(patterns)) {\n    let isMatch = picomatch(String(pattern), options);\n    if (items.some(item => isMatch(item))) {\n      return true;\n    }\n  }\n  return false;\n};\n\n/**\n * Returns true if every string in the given `list` matches\n * any of the given glob `patterns`.\n *\n * ```js\n * const mm = require('micromatch');\n * // mm.every(list, patterns[, options]);\n *\n * console.log(mm.every('foo.js', ['foo.js']));\n * // true\n * console.log(mm.every(['foo.js', 'bar.js'], ['*.js']));\n * // true\n * console.log(mm.every(['foo.js', 'bar.js'], ['*.js', '!foo.js']));\n * // false\n * console.log(mm.every(['foo.js'], ['*.js', '!foo.js']));\n * // false\n * ```\n * @param {String|Array} `list` The string or array of strings to test.\n * @param {String|Array} `patterns` One or more glob patterns to use for matching.\n * @param {Object} `options` See available [options](#options) for changing how matches are performed\n * @return {Boolean} Returns true if all `patterns` matches all of the strings in `list`\n * @api public\n */\n\nmicromatch.every = (list, patterns, options) => {\n  let items = [].concat(list);\n\n  for (let pattern of [].concat(patterns)) {\n    let isMatch = picomatch(String(pattern), options);\n    if (!items.every(item => isMatch(item))) {\n      return false;\n    }\n  }\n  return true;\n};\n\n/**\n * Returns true if **all** of the given `patterns` match\n * the specified string.\n *\n * ```js\n * const mm = require('micromatch');\n * // mm.all(string, patterns[, options]);\n *\n * console.log(mm.all('foo.js', ['foo.js']));\n * // true\n *\n * console.log(mm.all('foo.js', ['*.js', '!foo.js']));\n * // false\n *\n * console.log(mm.all('foo.js', ['*.js', 'foo.js']));\n * // true\n *\n * console.log(mm.all('foo.js', ['*.js', 'f*', '*o*', '*o.js']));\n * // true\n * ```\n * @param {String|Array} `str` The string to test.\n * @param {String|Array} `patterns` One or more glob patterns to use for matching.\n * @param {Object} `options` See available [options](#options) for changing how matches are performed\n * @return {Boolean} Returns true if any patterns match `str`\n * @api public\n */\n\nmicromatch.all = (str, patterns, options) => {\n  if (typeof str !== 'string') {\n    throw new TypeError(`Expected a string: \"${util.inspect(str)}\"`);\n  }\n\n  return [].concat(patterns).every(p => picomatch(p, options)(str));\n};\n\n/**\n * Returns an array of matches captured by `pattern` in `string, or `null` if the pattern did not match.\n *\n * ```js\n * const mm = require('micromatch');\n * // mm.capture(pattern, string[, options]);\n *\n * console.log(mm.capture('test/*.js', 'test/foo.js'));\n * //=> ['foo']\n * console.log(mm.capture('test/*.js', 'foo/bar.css'));\n * //=> null\n * ```\n * @param {String} `glob` Glob pattern to use for matching.\n * @param {String} `input` String to match\n * @param {Object} `options` See available [options](#options) for changing how matches are performed\n * @return {Array|null} Returns an array of captures if the input matches the glob pattern, otherwise `null`.\n * @api public\n */\n\nmicromatch.capture = (glob, input, options) => {\n  let posix = utils.isWindows(options);\n  let regex = picomatch.makeRe(String(glob), { ...options, capture: true });\n  let match = regex.exec(posix ? utils.toPosixSlashes(input) : input);\n\n  if (match) {\n    return match.slice(1).map(v => v === void 0 ? '' : v);\n  }\n};\n\n/**\n * Create a regular expression from the given glob `pattern`.\n *\n * ```js\n * const mm = require('micromatch');\n * // mm.makeRe(pattern[, options]);\n *\n * console.log(mm.makeRe('*.js'));\n * //=> /^(?:(\\.[\\\\\\/])?(?!\\.)(?=.)[^\\/]*?\\.js)$/\n * ```\n * @param {String} `pattern` A glob pattern to convert to regex.\n * @param {Object} `options`\n * @return {RegExp} Returns a regex created from the given pattern.\n * @api public\n */\n\nmicromatch.makeRe = (...args) => picomatch.makeRe(...args);\n\n/**\n * Scan a glob pattern to separate the pattern into segments. Used\n * by the [split](#split) method.\n *\n * ```js\n * const mm = require('micromatch');\n * const state = mm.scan(pattern[, options]);\n * ```\n * @param {String} `pattern`\n * @param {Object} `options`\n * @return {Object} Returns an object with\n * @api public\n */\n\nmicromatch.scan = (...args) => picomatch.scan(...args);\n\n/**\n * Parse a glob pattern to create the source string for a regular\n * expression.\n *\n * ```js\n * const mm = require('micromatch');\n * const state = mm(pattern[, options]);\n * ```\n * @param {String} `glob`\n * @param {Object} `options`\n * @return {Object} Returns an object with useful properties and output to be used as regex source string.\n * @api public\n */\n\nmicromatch.parse = (patterns, options) => {\n  let res = [];\n  for (let pattern of [].concat(patterns || [])) {\n    for (let str of braces(String(pattern), options)) {\n      res.push(picomatch.parse(str, options));\n    }\n  }\n  return res;\n};\n\n/**\n * Process the given brace `pattern`.\n *\n * ```js\n * const { braces } = require('micromatch');\n * console.log(braces('foo/{a,b,c}/bar'));\n * //=> [ 'foo/(a|b|c)/bar' ]\n *\n * console.log(braces('foo/{a,b,c}/bar', { expand: true }));\n * //=> [ 'foo/a/bar', 'foo/b/bar', 'foo/c/bar' ]\n * ```\n * @param {String} `pattern` String with brace pattern to process.\n * @param {Object} `options` Any [options](#options) to change how expansion is performed. See the [braces][] library for all available options.\n * @return {Array}\n * @api public\n */\n\nmicromatch.braces = (pattern, options) => {\n  if (typeof pattern !== 'string') throw new TypeError('Expected a string');\n  if ((options && options.nobrace === true) || !/\\{.*\\}/.test(pattern)) {\n    return [pattern];\n  }\n  return braces(pattern, options);\n};\n\n/**\n * Expand braces\n */\n\nmicromatch.braceExpand = (pattern, options) => {\n  if (typeof pattern !== 'string') throw new TypeError('Expected a string');\n  return micromatch.braces(pattern, { ...options, expand: true });\n};\n\n/**\n * Expose micromatch\n */\n\nmodule.exports = micromatch;\n","'use strict';\n\nconst stringify = require('./lib/stringify');\nconst compile = require('./lib/compile');\nconst expand = require('./lib/expand');\nconst parse = require('./lib/parse');\n\n/**\n * Expand the given pattern or create a regex-compatible string.\n *\n * ```js\n * const braces = require('braces');\n * console.log(braces('{a,b,c}', { compile: true })); //=> ['(a|b|c)']\n * console.log(braces('{a,b,c}')); //=> ['a', 'b', 'c']\n * ```\n * @param {String} `str`\n * @param {Object} `options`\n * @return {String}\n * @api public\n */\n\nconst braces = (input, options = {}) => {\n  let output = [];\n\n  if (Array.isArray(input)) {\n    for (let pattern of input) {\n      let result = braces.create(pattern, options);\n      if (Array.isArray(result)) {\n        output.push(...result);\n      } else {\n        output.push(result);\n      }\n    }\n  } else {\n    output = [].concat(braces.create(input, options));\n  }\n\n  if (options && options.expand === true && options.nodupes === true) {\n    output = [...new Set(output)];\n  }\n  return output;\n};\n\n/**\n * Parse the given `str` with the given `options`.\n *\n * ```js\n * // braces.parse(pattern, [, options]);\n * const ast = braces.parse('a/{b,c}/d');\n * console.log(ast);\n * ```\n * @param {String} pattern Brace pattern to parse\n * @param {Object} options\n * @return {Object} Returns an AST\n * @api public\n */\n\nbraces.parse = (input, options = {}) => parse(input, options);\n\n/**\n * Creates a braces string from an AST, or an AST node.\n *\n * ```js\n * const braces = require('braces');\n * let ast = braces.parse('foo/{a,b}/bar');\n * console.log(stringify(ast.nodes[2])); //=> '{a,b}'\n * ```\n * @param {String} `input` Brace pattern or AST.\n * @param {Object} `options`\n * @return {Array} Returns an array of expanded values.\n * @api public\n */\n\nbraces.stringify = (input, options = {}) => {\n  if (typeof input === 'string') {\n    return stringify(braces.parse(input, options), options);\n  }\n  return stringify(input, options);\n};\n\n/**\n * Compiles a brace pattern into a regex-compatible, optimized string.\n * This method is called by the main [braces](#braces) function by default.\n *\n * ```js\n * const braces = require('braces');\n * console.log(braces.compile('a/{b,c}/d'));\n * //=> ['a/(b|c)/d']\n * ```\n * @param {String} `input` Brace pattern or AST.\n * @param {Object} `options`\n * @return {Array} Returns an array of expanded values.\n * @api public\n */\n\nbraces.compile = (input, options = {}) => {\n  if (typeof input === 'string') {\n    input = braces.parse(input, options);\n  }\n  return compile(input, options);\n};\n\n/**\n * Expands a brace pattern into an array. This method is called by the\n * main [braces](#braces) function when `options.expand` is true. Before\n * using this method it's recommended that you read the [performance notes](#performance))\n * and advantages of using [.compile](#compile) instead.\n *\n * ```js\n * const braces = require('braces');\n * console.log(braces.expand('a/{b,c}/d'));\n * //=> ['a/b/d', 'a/c/d'];\n * ```\n * @param {String} `pattern` Brace pattern\n * @param {Object} `options`\n * @return {Array} Returns an array of expanded values.\n * @api public\n */\n\nbraces.expand = (input, options = {}) => {\n  if (typeof input === 'string') {\n    input = braces.parse(input, options);\n  }\n\n  let result = expand(input, options);\n\n  // filter out empty strings if specified\n  if (options.noempty === true) {\n    result = result.filter(Boolean);\n  }\n\n  // filter out duplicates if specified\n  if (options.nodupes === true) {\n    result = [...new Set(result)];\n  }\n\n  return result;\n};\n\n/**\n * Processes a brace pattern and returns either an expanded array\n * (if `options.expand` is true), a highly optimized regex-compatible string.\n * This method is called by the main [braces](#braces) function.\n *\n * ```js\n * const braces = require('braces');\n * console.log(braces.create('user-{200..300}/project-{a,b,c}-{1..10}'))\n * //=> 'user-(20[0-9]|2[1-9][0-9]|300)/project-(a|b|c)-([1-9]|10)'\n * ```\n * @param {String} `pattern` Brace pattern\n * @param {Object} `options`\n * @return {Array} Returns an array of expanded values.\n * @api public\n */\n\nbraces.create = (input, options = {}) => {\n  if (input === '' || input.length < 3) {\n    return [input];\n  }\n\n return options.expand !== true\n    ? braces.compile(input, options)\n    : braces.expand(input, options);\n};\n\n/**\n * Expose \"braces\"\n */\n\nmodule.exports = braces;\n","'use strict';\n\nconst fill = require('fill-range');\nconst utils = require('./utils');\n\nconst compile = (ast, options = {}) => {\n  let walk = (node, parent = {}) => {\n    let invalidBlock = utils.isInvalidBrace(parent);\n    let invalidNode = node.invalid === true && options.escapeInvalid === true;\n    let invalid = invalidBlock === true || invalidNode === true;\n    let prefix = options.escapeInvalid === true ? '\\\\' : '';\n    let output = '';\n\n    if (node.isOpen === true) {\n      return prefix + node.value;\n    }\n    if (node.isClose === true) {\n      return prefix + node.value;\n    }\n\n    if (node.type === 'open') {\n      return invalid ? (prefix + node.value) : '(';\n    }\n\n    if (node.type === 'close') {\n      return invalid ? (prefix + node.value) : ')';\n    }\n\n    if (node.type === 'comma') {\n      return node.prev.type === 'comma' ? '' : (invalid ? node.value : '|');\n    }\n\n    if (node.value) {\n      return node.value;\n    }\n\n    if (node.nodes && node.ranges > 0) {\n      let args = utils.reduce(node.nodes);\n      let range = fill(...args, { ...options, wrap: false, toRegex: true });\n\n      if (range.length !== 0) {\n        return args.length > 1 && range.length > 1 ? `(${range})` : range;\n      }\n    }\n\n    if (node.nodes) {\n      for (let child of node.nodes) {\n        output += walk(child, node);\n      }\n    }\n    return output;\n  };\n\n  return walk(ast);\n};\n\nmodule.exports = compile;\n","/*!\n * to-regex-range <https://github.com/micromatch/to-regex-range>\n *\n * Copyright (c) 2015-present, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nconst isNumber = require('is-number');\n\nconst toRegexRange = (min, max, options) => {\n  if (isNumber(min) === false) {\n    throw new TypeError('toRegexRange: expected the first argument to be a number');\n  }\n\n  if (max === void 0 || min === max) {\n    return String(min);\n  }\n\n  if (isNumber(max) === false) {\n    throw new TypeError('toRegexRange: expected the second argument to be a number.');\n  }\n\n  let opts = { relaxZeros: true, ...options };\n  if (typeof opts.strictZeros === 'boolean') {\n    opts.relaxZeros = opts.strictZeros === false;\n  }\n\n  let relax = String(opts.relaxZeros);\n  let shorthand = String(opts.shorthand);\n  let capture = String(opts.capture);\n  let wrap = String(opts.wrap);\n  let cacheKey = min + ':' + max + '=' + relax + shorthand + capture + wrap;\n\n  if (toRegexRange.cache.hasOwnProperty(cacheKey)) {\n    return toRegexRange.cache[cacheKey].result;\n  }\n\n  let a = Math.min(min, max);\n  let b = Math.max(min, max);\n\n  if (Math.abs(a - b) === 1) {\n    let result = min + '|' + max;\n    if (opts.capture) {\n      return `(${result})`;\n    }\n    if (opts.wrap === false) {\n      return result;\n    }\n    return `(?:${result})`;\n  }\n\n  let isPadded = hasPadding(min) || hasPadding(max);\n  let state = { min, max, a, b };\n  let positives = [];\n  let negatives = [];\n\n  if (isPadded) {\n    state.isPadded = isPadded;\n    state.maxLen = String(state.max).length;\n  }\n\n  if (a < 0) {\n    let newMin = b < 0 ? Math.abs(b) : 1;\n    negatives = splitToPatterns(newMin, Math.abs(a), state, opts);\n    a = state.a = 0;\n  }\n\n  if (b >= 0) {\n    positives = splitToPatterns(a, b, state, opts);\n  }\n\n  state.negatives = negatives;\n  state.positives = positives;\n  state.result = collatePatterns(negatives, positives, opts);\n\n  if (opts.capture === true) {\n    state.result = `(${state.result})`;\n  } else if (opts.wrap !== false && (positives.length + negatives.length) > 1) {\n    state.result = `(?:${state.result})`;\n  }\n\n  toRegexRange.cache[cacheKey] = state;\n  return state.result;\n};\n\nfunction collatePatterns(neg, pos, options) {\n  let onlyNegative = filterPatterns(neg, pos, '-', false, options) || [];\n  let onlyPositive = filterPatterns(pos, neg, '', false, options) || [];\n  let intersected = filterPatterns(neg, pos, '-?', true, options) || [];\n  let subpatterns = onlyNegative.concat(intersected).concat(onlyPositive);\n  return subpatterns.join('|');\n}\n\nfunction splitToRanges(min, max) {\n  let nines = 1;\n  let zeros = 1;\n\n  let stop = countNines(min, nines);\n  let stops = new Set([max]);\n\n  while (min <= stop && stop <= max) {\n    stops.add(stop);\n    nines += 1;\n    stop = countNines(min, nines);\n  }\n\n  stop = countZeros(max + 1, zeros) - 1;\n\n  while (min < stop && stop <= max) {\n    stops.add(stop);\n    zeros += 1;\n    stop = countZeros(max + 1, zeros) - 1;\n  }\n\n  stops = [...stops];\n  stops.sort(compare);\n  return stops;\n}\n\n/**\n * Convert a range to a regex pattern\n * @param {Number} `start`\n * @param {Number} `stop`\n * @return {String}\n */\n\nfunction rangeToPattern(start, stop, options) {\n  if (start === stop) {\n    return { pattern: start, count: [], digits: 0 };\n  }\n\n  let zipped = zip(start, stop);\n  let digits = zipped.length;\n  let pattern = '';\n  let count = 0;\n\n  for (let i = 0; i < digits; i++) {\n    let [startDigit, stopDigit] = zipped[i];\n\n    if (startDigit === stopDigit) {\n      pattern += startDigit;\n\n    } else if (startDigit !== '0' || stopDigit !== '9') {\n      pattern += toCharacterClass(startDigit, stopDigit, options);\n\n    } else {\n      count++;\n    }\n  }\n\n  if (count) {\n    pattern += options.shorthand === true ? '\\\\d' : '[0-9]';\n  }\n\n  return { pattern, count: [count], digits };\n}\n\nfunction splitToPatterns(min, max, tok, options) {\n  let ranges = splitToRanges(min, max);\n  let tokens = [];\n  let start = min;\n  let prev;\n\n  for (let i = 0; i < ranges.length; i++) {\n    let max = ranges[i];\n    let obj = rangeToPattern(String(start), String(max), options);\n    let zeros = '';\n\n    if (!tok.isPadded && prev && prev.pattern === obj.pattern) {\n      if (prev.count.length > 1) {\n        prev.count.pop();\n      }\n\n      prev.count.push(obj.count[0]);\n      prev.string = prev.pattern + toQuantifier(prev.count);\n      start = max + 1;\n      continue;\n    }\n\n    if (tok.isPadded) {\n      zeros = padZeros(max, tok, options);\n    }\n\n    obj.string = zeros + obj.pattern + toQuantifier(obj.count);\n    tokens.push(obj);\n    start = max + 1;\n    prev = obj;\n  }\n\n  return tokens;\n}\n\nfunction filterPatterns(arr, comparison, prefix, intersection, options) {\n  let result = [];\n\n  for (let ele of arr) {\n    let { string } = ele;\n\n    // only push if _both_ are negative...\n    if (!intersection && !contains(comparison, 'string', string)) {\n      result.push(prefix + string);\n    }\n\n    // or _both_ are positive\n    if (intersection && contains(comparison, 'string', string)) {\n      result.push(prefix + string);\n    }\n  }\n  return result;\n}\n\n/**\n * Zip strings\n */\n\nfunction zip(a, b) {\n  let arr = [];\n  for (let i = 0; i < a.length; i++) arr.push([a[i], b[i]]);\n  return arr;\n}\n\nfunction compare(a, b) {\n  return a > b ? 1 : b > a ? -1 : 0;\n}\n\nfunction contains(arr, key, val) {\n  return arr.some(ele => ele[key] === val);\n}\n\nfunction countNines(min, len) {\n  return Number(String(min).slice(0, -len) + '9'.repeat(len));\n}\n\nfunction countZeros(integer, zeros) {\n  return integer - (integer % Math.pow(10, zeros));\n}\n\nfunction toQuantifier(digits) {\n  let [start = 0, stop = ''] = digits;\n  if (stop || start > 1) {\n    return `{${start + (stop ? ',' + stop : '')}}`;\n  }\n  return '';\n}\n\nfunction toCharacterClass(a, b, options) {\n  return `[${a}${(b - a === 1) ? '' : '-'}${b}]`;\n}\n\nfunction hasPadding(str) {\n  return /^-?(0+)\\d/.test(str);\n}\n\nfunction padZeros(value, tok, options) {\n  if (!tok.isPadded) {\n    return value;\n  }\n\n  let diff = Math.abs(tok.maxLen - String(value).length);\n  let relax = options.relaxZeros !== false;\n\n  switch (diff) {\n    case 0:\n      return '';\n    case 1:\n      return relax ? '0?' : '0';\n    case 2:\n      return relax ? '0{0,2}' : '00';\n    default: {\n      return relax ? `0{0,${diff}}` : `0{${diff}}`;\n    }\n  }\n}\n\n/**\n * Cache\n */\n\ntoRegexRange.cache = {};\ntoRegexRange.clearCache = () => (toRegexRange.cache = {});\n\n/**\n * Expose `toRegexRange`\n */\n\nmodule.exports = toRegexRange;\n","/*!\n * is-number <https://github.com/jonschlinkert/is-number>\n *\n * Copyright (c) 2014-present, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function(num) {\n  if (typeof num === 'number') {\n    return num - num === 0;\n  }\n  if (typeof num === 'string' && num.trim() !== '') {\n    return Number.isFinite ? Number.isFinite(+num) : isFinite(+num);\n  }\n  return false;\n};\n","'use strict';\n\nconst fill = require('fill-range');\nconst stringify = require('./stringify');\nconst utils = require('./utils');\n\nconst append = (queue = '', stash = '', enclose = false) => {\n  let result = [];\n\n  queue = [].concat(queue);\n  stash = [].concat(stash);\n\n  if (!stash.length) return queue;\n  if (!queue.length) {\n    return enclose ? utils.flatten(stash).map(ele => `{${ele}}`) : stash;\n  }\n\n  for (let item of queue) {\n    if (Array.isArray(item)) {\n      for (let value of item) {\n        result.push(append(value, stash, enclose));\n      }\n    } else {\n      for (let ele of stash) {\n        if (enclose === true && typeof ele === 'string') ele = `{${ele}}`;\n        result.push(Array.isArray(ele) ? append(item, ele, enclose) : (item + ele));\n      }\n    }\n  }\n  return utils.flatten(result);\n};\n\nconst expand = (ast, options = {}) => {\n  let rangeLimit = options.rangeLimit === void 0 ? 1000 : options.rangeLimit;\n\n  let walk = (node, parent = {}) => {\n    node.queue = [];\n\n    let p = parent;\n    let q = parent.queue;\n\n    while (p.type !== 'brace' && p.type !== 'root' && p.parent) {\n      p = p.parent;\n      q = p.queue;\n    }\n\n    if (node.invalid || node.dollar) {\n      q.push(append(q.pop(), stringify(node, options)));\n      return;\n    }\n\n    if (node.type === 'brace' && node.invalid !== true && node.nodes.length === 2) {\n      q.push(append(q.pop(), ['{}']));\n      return;\n    }\n\n    if (node.nodes && node.ranges > 0) {\n      let args = utils.reduce(node.nodes);\n\n      if (utils.exceedsLimit(...args, options.step, rangeLimit)) {\n        throw new RangeError('expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.');\n      }\n\n      let range = fill(...args, options);\n      if (range.length === 0) {\n        range = stringify(node, options);\n      }\n\n      q.push(append(q.pop(), range));\n      node.nodes = [];\n      return;\n    }\n\n    let enclose = utils.encloseBrace(node);\n    let queue = node.queue;\n    let block = node;\n\n    while (block.type !== 'brace' && block.type !== 'root' && block.parent) {\n      block = block.parent;\n      queue = block.queue;\n    }\n\n    for (let i = 0; i < node.nodes.length; i++) {\n      let child = node.nodes[i];\n\n      if (child.type === 'comma' && node.type === 'brace') {\n        if (i === 1) queue.push('');\n        queue.push('');\n        continue;\n      }\n\n      if (child.type === 'close') {\n        q.push(append(q.pop(), queue, enclose));\n        continue;\n      }\n\n      if (child.value && child.type !== 'open') {\n        queue.push(append(queue.pop(), child.value));\n        continue;\n      }\n\n      if (child.nodes) {\n        walk(child, node);\n      }\n    }\n\n    return queue;\n  };\n\n  return utils.flatten(walk(ast));\n};\n\nmodule.exports = expand;\n","'use strict';\n\nconst stringify = require('./stringify');\n\n/**\n * Constants\n */\n\nconst {\n  MAX_LENGTH,\n  CHAR_BACKSLASH, /* \\ */\n  CHAR_BACKTICK, /* ` */\n  CHAR_COMMA, /* , */\n  CHAR_DOT, /* . */\n  CHAR_LEFT_PARENTHESES, /* ( */\n  CHAR_RIGHT_PARENTHESES, /* ) */\n  CHAR_LEFT_CURLY_BRACE, /* { */\n  CHAR_RIGHT_CURLY_BRACE, /* } */\n  CHAR_LEFT_SQUARE_BRACKET, /* [ */\n  CHAR_RIGHT_SQUARE_BRACKET, /* ] */\n  CHAR_DOUBLE_QUOTE, /* \" */\n  CHAR_SINGLE_QUOTE, /* ' */\n  CHAR_NO_BREAK_SPACE,\n  CHAR_ZERO_WIDTH_NOBREAK_SPACE\n} = require('./constants');\n\n/**\n * parse\n */\n\nconst parse = (input, options = {}) => {\n  if (typeof input !== 'string') {\n    throw new TypeError('Expected a string');\n  }\n\n  let opts = options || {};\n  let max = typeof opts.maxLength === 'number' ? Math.min(MAX_LENGTH, opts.maxLength) : MAX_LENGTH;\n  if (input.length > max) {\n    throw new SyntaxError(`Input length (${input.length}), exceeds max characters (${max})`);\n  }\n\n  let ast = { type: 'root', input, nodes: [] };\n  let stack = [ast];\n  let block = ast;\n  let prev = ast;\n  let brackets = 0;\n  let length = input.length;\n  let index = 0;\n  let depth = 0;\n  let value;\n  let memo = {};\n\n  /**\n   * Helpers\n   */\n\n  const advance = () => input[index++];\n  const push = node => {\n    if (node.type === 'text' && prev.type === 'dot') {\n      prev.type = 'text';\n    }\n\n    if (prev && prev.type === 'text' && node.type === 'text') {\n      prev.value += node.value;\n      return;\n    }\n\n    block.nodes.push(node);\n    node.parent = block;\n    node.prev = prev;\n    prev = node;\n    return node;\n  };\n\n  push({ type: 'bos' });\n\n  while (index < length) {\n    block = stack[stack.length - 1];\n    value = advance();\n\n    /**\n     * Invalid chars\n     */\n\n    if (value === CHAR_ZERO_WIDTH_NOBREAK_SPACE || value === CHAR_NO_BREAK_SPACE) {\n      continue;\n    }\n\n    /**\n     * Escaped chars\n     */\n\n    if (value === CHAR_BACKSLASH) {\n      push({ type: 'text', value: (options.keepEscaping ? value : '') + advance() });\n      continue;\n    }\n\n    /**\n     * Right square bracket (literal): ']'\n     */\n\n    if (value === CHAR_RIGHT_SQUARE_BRACKET) {\n      push({ type: 'text', value: '\\\\' + value });\n      continue;\n    }\n\n    /**\n     * Left square bracket: '['\n     */\n\n    if (value === CHAR_LEFT_SQUARE_BRACKET) {\n      brackets++;\n\n      let closed = true;\n      let next;\n\n      while (index < length && (next = advance())) {\n        value += next;\n\n        if (next === CHAR_LEFT_SQUARE_BRACKET) {\n          brackets++;\n          continue;\n        }\n\n        if (next === CHAR_BACKSLASH) {\n          value += advance();\n          continue;\n        }\n\n        if (next === CHAR_RIGHT_SQUARE_BRACKET) {\n          brackets--;\n\n          if (brackets === 0) {\n            break;\n          }\n        }\n      }\n\n      push({ type: 'text', value });\n      continue;\n    }\n\n    /**\n     * Parentheses\n     */\n\n    if (value === CHAR_LEFT_PARENTHESES) {\n      block = push({ type: 'paren', nodes: [] });\n      stack.push(block);\n      push({ type: 'text', value });\n      continue;\n    }\n\n    if (value === CHAR_RIGHT_PARENTHESES) {\n      if (block.type !== 'paren') {\n        push({ type: 'text', value });\n        continue;\n      }\n      block = stack.pop();\n      push({ type: 'text', value });\n      block = stack[stack.length - 1];\n      continue;\n    }\n\n    /**\n     * Quotes: '|\"|`\n     */\n\n    if (value === CHAR_DOUBLE_QUOTE || value === CHAR_SINGLE_QUOTE || value === CHAR_BACKTICK) {\n      let open = value;\n      let next;\n\n      if (options.keepQuotes !== true) {\n        value = '';\n      }\n\n      while (index < length && (next = advance())) {\n        if (next === CHAR_BACKSLASH) {\n          value += next + advance();\n          continue;\n        }\n\n        if (next === open) {\n          if (options.keepQuotes === true) value += next;\n          break;\n        }\n\n        value += next;\n      }\n\n      push({ type: 'text', value });\n      continue;\n    }\n\n    /**\n     * Left curly brace: '{'\n     */\n\n    if (value === CHAR_LEFT_CURLY_BRACE) {\n      depth++;\n\n      let dollar = prev.value && prev.value.slice(-1) === '$' || block.dollar === true;\n      let brace = {\n        type: 'brace',\n        open: true,\n        close: false,\n        dollar,\n        depth,\n        commas: 0,\n        ranges: 0,\n        nodes: []\n      };\n\n      block = push(brace);\n      stack.push(block);\n      push({ type: 'open', value });\n      continue;\n    }\n\n    /**\n     * Right curly brace: '}'\n     */\n\n    if (value === CHAR_RIGHT_CURLY_BRACE) {\n      if (block.type !== 'brace') {\n        push({ type: 'text', value });\n        continue;\n      }\n\n      let type = 'close';\n      block = stack.pop();\n      block.close = true;\n\n      push({ type, value });\n      depth--;\n\n      block = stack[stack.length - 1];\n      continue;\n    }\n\n    /**\n     * Comma: ','\n     */\n\n    if (value === CHAR_COMMA && depth > 0) {\n      if (block.ranges > 0) {\n        block.ranges = 0;\n        let open = block.nodes.shift();\n        block.nodes = [open, { type: 'text', value: stringify(block) }];\n      }\n\n      push({ type: 'comma', value });\n      block.commas++;\n      continue;\n    }\n\n    /**\n     * Dot: '.'\n     */\n\n    if (value === CHAR_DOT && depth > 0 && block.commas === 0) {\n      let siblings = block.nodes;\n\n      if (depth === 0 || siblings.length === 0) {\n        push({ type: 'text', value });\n        continue;\n      }\n\n      if (prev.type === 'dot') {\n        block.range = [];\n        prev.value += value;\n        prev.type = 'range';\n\n        if (block.nodes.length !== 3 && block.nodes.length !== 5) {\n          block.invalid = true;\n          block.ranges = 0;\n          prev.type = 'text';\n          continue;\n        }\n\n        block.ranges++;\n        block.args = [];\n        continue;\n      }\n\n      if (prev.type === 'range') {\n        siblings.pop();\n\n        let before = siblings[siblings.length - 1];\n        before.value += prev.value + value;\n        prev = before;\n        block.ranges--;\n        continue;\n      }\n\n      push({ type: 'dot', value });\n      continue;\n    }\n\n    /**\n     * Text\n     */\n\n    push({ type: 'text', value });\n  }\n\n  // Mark imbalanced braces and brackets as invalid\n  do {\n    block = stack.pop();\n\n    if (block.type !== 'root') {\n      block.nodes.forEach(node => {\n        if (!node.nodes) {\n          if (node.type === 'open') node.isOpen = true;\n          if (node.type === 'close') node.isClose = true;\n          if (!node.nodes) node.type = 'text';\n          node.invalid = true;\n        }\n      });\n\n      // get the location of the block on parent.nodes (block's siblings)\n      let parent = stack[stack.length - 1];\n      let index = parent.nodes.indexOf(block);\n      // replace the (invalid) block with it's nodes\n      parent.nodes.splice(index, 1, ...block.nodes);\n    }\n  } while (stack.length > 0);\n\n  push({ type: 'eos' });\n  return ast;\n};\n\nmodule.exports = parse;\n","'use strict';\n\nmodule.exports = {\n  MAX_LENGTH: 1024 * 64,\n\n  // Digits\n  CHAR_0: '0', /* 0 */\n  CHAR_9: '9', /* 9 */\n\n  // Alphabet chars.\n  CHAR_UPPERCASE_A: 'A', /* A */\n  CHAR_LOWERCASE_A: 'a', /* a */\n  CHAR_UPPERCASE_Z: 'Z', /* Z */\n  CHAR_LOWERCASE_Z: 'z', /* z */\n\n  CHAR_LEFT_PARENTHESES: '(', /* ( */\n  CHAR_RIGHT_PARENTHESES: ')', /* ) */\n\n  CHAR_ASTERISK: '*', /* * */\n\n  // Non-alphabetic chars.\n  CHAR_AMPERSAND: '&', /* & */\n  CHAR_AT: '@', /* @ */\n  CHAR_BACKSLASH: '\\\\', /* \\ */\n  CHAR_BACKTICK: '`', /* ` */\n  CHAR_CARRIAGE_RETURN: '\\r', /* \\r */\n  CHAR_CIRCUMFLEX_ACCENT: '^', /* ^ */\n  CHAR_COLON: ':', /* : */\n  CHAR_COMMA: ',', /* , */\n  CHAR_DOLLAR: '$', /* . */\n  CHAR_DOT: '.', /* . */\n  CHAR_DOUBLE_QUOTE: '\"', /* \" */\n  CHAR_EQUAL: '=', /* = */\n  CHAR_EXCLAMATION_MARK: '!', /* ! */\n  CHAR_FORM_FEED: '\\f', /* \\f */\n  CHAR_FORWARD_SLASH: '/', /* / */\n  CHAR_HASH: '#', /* # */\n  CHAR_HYPHEN_MINUS: '-', /* - */\n  CHAR_LEFT_ANGLE_BRACKET: '<', /* < */\n  CHAR_LEFT_CURLY_BRACE: '{', /* { */\n  CHAR_LEFT_SQUARE_BRACKET: '[', /* [ */\n  CHAR_LINE_FEED: '\\n', /* \\n */\n  CHAR_NO_BREAK_SPACE: '\\u00A0', /* \\u00A0 */\n  CHAR_PERCENT: '%', /* % */\n  CHAR_PLUS: '+', /* + */\n  CHAR_QUESTION_MARK: '?', /* ? */\n  CHAR_RIGHT_ANGLE_BRACKET: '>', /* > */\n  CHAR_RIGHT_CURLY_BRACE: '}', /* } */\n  CHAR_RIGHT_SQUARE_BRACKET: ']', /* ] */\n  CHAR_SEMICOLON: ';', /* ; */\n  CHAR_SINGLE_QUOTE: '\\'', /* ' */\n  CHAR_SPACE: ' ', /*   */\n  CHAR_TAB: '\\t', /* \\t */\n  CHAR_UNDERSCORE: '_', /* _ */\n  CHAR_VERTICAL_LINE: '|', /* | */\n  CHAR_ZERO_WIDTH_NOBREAK_SPACE: '\\uFEFF' /* \\uFEFF */\n};\n","'use strict';\n\nconst path = require('path');\nconst scan = require('./scan');\nconst parse = require('./parse');\nconst utils = require('./utils');\nconst constants = require('./constants');\nconst isObject = val => val && typeof val === 'object' && !Array.isArray(val);\n\n/**\n * Creates a matcher function from one or more glob patterns. The\n * returned function takes a string to match as its first argument,\n * and returns true if the string is a match. The returned matcher\n * function also takes a boolean as the second argument that, when true,\n * returns an object with additional information.\n *\n * ```js\n * const picomatch = require('picomatch');\n * // picomatch(glob[, options]);\n *\n * const isMatch = picomatch('*.!(*a)');\n * console.log(isMatch('a.a')); //=> false\n * console.log(isMatch('a.b')); //=> true\n * ```\n * @name picomatch\n * @param {String|Array} `globs` One or more glob patterns.\n * @param {Object=} `options`\n * @return {Function=} Returns a matcher function.\n * @api public\n */\n\nconst picomatch = (glob, options, returnState = false) => {\n  if (Array.isArray(glob)) {\n    const fns = glob.map(input => picomatch(input, options, returnState));\n    const arrayMatcher = str => {\n      for (const isMatch of fns) {\n        const state = isMatch(str);\n        if (state) return state;\n      }\n      return false;\n    };\n    return arrayMatcher;\n  }\n\n  const isState = isObject(glob) && glob.tokens && glob.input;\n\n  if (glob === '' || (typeof glob !== 'string' && !isState)) {\n    throw new TypeError('Expected pattern to be a non-empty string');\n  }\n\n  const opts = options || {};\n  const posix = utils.isWindows(options);\n  const regex = isState\n    ? picomatch.compileRe(glob, options)\n    : picomatch.makeRe(glob, options, false, true);\n\n  const state = regex.state;\n  delete regex.state;\n\n  let isIgnored = () => false;\n  if (opts.ignore) {\n    const ignoreOpts = { ...options, ignore: null, onMatch: null, onResult: null };\n    isIgnored = picomatch(opts.ignore, ignoreOpts, returnState);\n  }\n\n  const matcher = (input, returnObject = false) => {\n    const { isMatch, match, output } = picomatch.test(input, regex, options, { glob, posix });\n    const result = { glob, state, regex, posix, input, output, match, isMatch };\n\n    if (typeof opts.onResult === 'function') {\n      opts.onResult(result);\n    }\n\n    if (isMatch === false) {\n      result.isMatch = false;\n      return returnObject ? result : false;\n    }\n\n    if (isIgnored(input)) {\n      if (typeof opts.onIgnore === 'function') {\n        opts.onIgnore(result);\n      }\n      result.isMatch = false;\n      return returnObject ? result : false;\n    }\n\n    if (typeof opts.onMatch === 'function') {\n      opts.onMatch(result);\n    }\n    return returnObject ? result : true;\n  };\n\n  if (returnState) {\n    matcher.state = state;\n  }\n\n  return matcher;\n};\n\n/**\n * Test `input` with the given `regex`. This is used by the main\n * `picomatch()` function to test the input string.\n *\n * ```js\n * const picomatch = require('picomatch');\n * // picomatch.test(input, regex[, options]);\n *\n * console.log(picomatch.test('foo/bar', /^(?:([^/]*?)\\/([^/]*?))$/));\n * // { isMatch: true, match: [ 'foo/', 'foo', 'bar' ], output: 'foo/bar' }\n * ```\n * @param {String} `input` String to test.\n * @param {RegExp} `regex`\n * @return {Object} Returns an object with matching info.\n * @api public\n */\n\npicomatch.test = (input, regex, options, { glob, posix } = {}) => {\n  if (typeof input !== 'string') {\n    throw new TypeError('Expected input to be a string');\n  }\n\n  if (input === '') {\n    return { isMatch: false, output: '' };\n  }\n\n  const opts = options || {};\n  const format = opts.format || (posix ? utils.toPosixSlashes : null);\n  let match = input === glob;\n  let output = (match && format) ? format(input) : input;\n\n  if (match === false) {\n    output = format ? format(input) : input;\n    match = output === glob;\n  }\n\n  if (match === false || opts.capture === true) {\n    if (opts.matchBase === true || opts.basename === true) {\n      match = picomatch.matchBase(input, regex, options, posix);\n    } else {\n      match = regex.exec(output);\n    }\n  }\n\n  return { isMatch: Boolean(match), match, output };\n};\n\n/**\n * Match the basename of a filepath.\n *\n * ```js\n * const picomatch = require('picomatch');\n * // picomatch.matchBase(input, glob[, options]);\n * console.log(picomatch.matchBase('foo/bar.js', '*.js'); // true\n * ```\n * @param {String} `input` String to test.\n * @param {RegExp|String} `glob` Glob pattern or regex created by [.makeRe](#makeRe).\n * @return {Boolean}\n * @api public\n */\n\npicomatch.matchBase = (input, glob, options, posix = utils.isWindows(options)) => {\n  const regex = glob instanceof RegExp ? glob : picomatch.makeRe(glob, options);\n  return regex.test(path.basename(input));\n};\n\n/**\n * Returns true if **any** of the given glob `patterns` match the specified `string`.\n *\n * ```js\n * const picomatch = require('picomatch');\n * // picomatch.isMatch(string, patterns[, options]);\n *\n * console.log(picomatch.isMatch('a.a', ['b.*', '*.a'])); //=> true\n * console.log(picomatch.isMatch('a.a', 'b.*')); //=> false\n * ```\n * @param {String|Array} str The string to test.\n * @param {String|Array} patterns One or more glob patterns to use for matching.\n * @param {Object} [options] See available [options](#options).\n * @return {Boolean} Returns true if any patterns match `str`\n * @api public\n */\n\npicomatch.isMatch = (str, patterns, options) => picomatch(patterns, options)(str);\n\n/**\n * Parse a glob pattern to create the source string for a regular\n * expression.\n *\n * ```js\n * const picomatch = require('picomatch');\n * const result = picomatch.parse(pattern[, options]);\n * ```\n * @param {String} `pattern`\n * @param {Object} `options`\n * @return {Object} Returns an object with useful properties and output to be used as a regex source string.\n * @api public\n */\n\npicomatch.parse = (pattern, options) => {\n  if (Array.isArray(pattern)) return pattern.map(p => picomatch.parse(p, options));\n  return parse(pattern, { ...options, fastpaths: false });\n};\n\n/**\n * Scan a glob pattern to separate the pattern into segments.\n *\n * ```js\n * const picomatch = require('picomatch');\n * // picomatch.scan(input[, options]);\n *\n * const result = picomatch.scan('!./foo/*.js');\n * console.log(result);\n * { prefix: '!./',\n *   input: '!./foo/*.js',\n *   start: 3,\n *   base: 'foo',\n *   glob: '*.js',\n *   isBrace: false,\n *   isBracket: false,\n *   isGlob: true,\n *   isExtglob: false,\n *   isGlobstar: false,\n *   negated: true }\n * ```\n * @param {String} `input` Glob pattern to scan.\n * @param {Object} `options`\n * @return {Object} Returns an object with\n * @api public\n */\n\npicomatch.scan = (input, options) => scan(input, options);\n\n/**\n * Create a regular expression from a parsed glob pattern.\n *\n * ```js\n * const picomatch = require('picomatch');\n * const state = picomatch.parse('*.js');\n * // picomatch.compileRe(state[, options]);\n *\n * console.log(picomatch.compileRe(state));\n * //=> /^(?:(?!\\.)(?=.)[^/]*?\\.js)$/\n * ```\n * @param {String} `state` The object returned from the `.parse` method.\n * @param {Object} `options`\n * @return {RegExp} Returns a regex created from the given pattern.\n * @api public\n */\n\npicomatch.compileRe = (parsed, options, returnOutput = false, returnState = false) => {\n  if (returnOutput === true) {\n    return parsed.output;\n  }\n\n  const opts = options || {};\n  const prepend = opts.contains ? '' : '^';\n  const append = opts.contains ? '' : '$';\n\n  let source = `${prepend}(?:${parsed.output})${append}`;\n  if (parsed && parsed.negated === true) {\n    source = `^(?!${source}).*$`;\n  }\n\n  const regex = picomatch.toRegex(source, options);\n  if (returnState === true) {\n    regex.state = parsed;\n  }\n\n  return regex;\n};\n\npicomatch.makeRe = (input, options, returnOutput = false, returnState = false) => {\n  if (!input || typeof input !== 'string') {\n    throw new TypeError('Expected a non-empty string');\n  }\n\n  const opts = options || {};\n  let parsed = { negated: false, fastpaths: true };\n  let prefix = '';\n  let output;\n\n  if (input.startsWith('./')) {\n    input = input.slice(2);\n    prefix = parsed.prefix = './';\n  }\n\n  if (opts.fastpaths !== false && (input[0] === '.' || input[0] === '*')) {\n    output = parse.fastpaths(input, options);\n  }\n\n  if (output === undefined) {\n    parsed = parse(input, options);\n    parsed.prefix = prefix + (parsed.prefix || '');\n  } else {\n    parsed.output = output;\n  }\n\n  return picomatch.compileRe(parsed, options, returnOutput, returnState);\n};\n\n/**\n * Create a regular expression from the given regex source string.\n *\n * ```js\n * const picomatch = require('picomatch');\n * // picomatch.toRegex(source[, options]);\n *\n * const { output } = picomatch.parse('*.js');\n * console.log(picomatch.toRegex(output));\n * //=> /^(?:(?!\\.)(?=.)[^/]*?\\.js)$/\n * ```\n * @param {String} `source` Regular expression source string.\n * @param {Object} `options`\n * @return {RegExp}\n * @api public\n */\n\npicomatch.toRegex = (source, options) => {\n  try {\n    const opts = options || {};\n    return new RegExp(source, opts.flags || (opts.nocase ? 'i' : ''));\n  } catch (err) {\n    if (options && options.debug === true) throw err;\n    return /$^/;\n  }\n};\n\n/**\n * Picomatch constants.\n * @return {Object}\n */\n\npicomatch.constants = constants;\n\n/**\n * Expose \"picomatch\"\n */\n\nmodule.exports = picomatch;\n","'use strict';\n\nconst utils = require('./utils');\nconst {\n  CHAR_ASTERISK,             /* * */\n  CHAR_AT,                   /* @ */\n  CHAR_BACKWARD_SLASH,       /* \\ */\n  CHAR_COMMA,                /* , */\n  CHAR_DOT,                  /* . */\n  CHAR_EXCLAMATION_MARK,     /* ! */\n  CHAR_FORWARD_SLASH,        /* / */\n  CHAR_LEFT_CURLY_BRACE,     /* { */\n  CHAR_LEFT_PARENTHESES,     /* ( */\n  CHAR_LEFT_SQUARE_BRACKET,  /* [ */\n  CHAR_PLUS,                 /* + */\n  CHAR_QUESTION_MARK,        /* ? */\n  CHAR_RIGHT_CURLY_BRACE,    /* } */\n  CHAR_RIGHT_PARENTHESES,    /* ) */\n  CHAR_RIGHT_SQUARE_BRACKET  /* ] */\n} = require('./constants');\n\nconst isPathSeparator = code => {\n  return code === CHAR_FORWARD_SLASH || code === CHAR_BACKWARD_SLASH;\n};\n\nconst depth = token => {\n  if (token.isPrefix !== true) {\n    token.depth = token.isGlobstar ? Infinity : 1;\n  }\n};\n\n/**\n * Quickly scans a glob pattern and returns an object with a handful of\n * useful properties, like `isGlob`, `path` (the leading non-glob, if it exists),\n * `glob` (the actual pattern), and `negated` (true if the path starts with `!`).\n *\n * ```js\n * const pm = require('picomatch');\n * console.log(pm.scan('foo/bar/*.js'));\n * { isGlob: true, input: 'foo/bar/*.js', base: 'foo/bar', glob: '*.js' }\n * ```\n * @param {String} `str`\n * @param {Object} `options`\n * @return {Object} Returns an object with tokens and regex source string.\n * @api public\n */\n\nconst scan = (input, options) => {\n  const opts = options || {};\n\n  const length = input.length - 1;\n  const scanToEnd = opts.parts === true || opts.scanToEnd === true;\n  const slashes = [];\n  const tokens = [];\n  const parts = [];\n\n  let str = input;\n  let index = -1;\n  let start = 0;\n  let lastIndex = 0;\n  let isBrace = false;\n  let isBracket = false;\n  let isGlob = false;\n  let isExtglob = false;\n  let isGlobstar = false;\n  let braceEscaped = false;\n  let backslashes = false;\n  let negated = false;\n  let finished = false;\n  let braces = 0;\n  let prev;\n  let code;\n  let token = { value: '', depth: 0, isGlob: false };\n\n  const eos = () => index >= length;\n  const peek = () => str.charCodeAt(index + 1);\n  const advance = () => {\n    prev = code;\n    return str.charCodeAt(++index);\n  };\n\n  while (index < length) {\n    code = advance();\n    let next;\n\n    if (code === CHAR_BACKWARD_SLASH) {\n      backslashes = token.backslashes = true;\n      code = advance();\n\n      if (code === CHAR_LEFT_CURLY_BRACE) {\n        braceEscaped = true;\n      }\n      continue;\n    }\n\n    if (braceEscaped === true || code === CHAR_LEFT_CURLY_BRACE) {\n      braces++;\n\n      while (eos() !== true && (code = advance())) {\n        if (code === CHAR_BACKWARD_SLASH) {\n          backslashes = token.backslashes = true;\n          advance();\n          continue;\n        }\n\n        if (code === CHAR_LEFT_CURLY_BRACE) {\n          braces++;\n          continue;\n        }\n\n        if (braceEscaped !== true && code === CHAR_DOT && (code = advance()) === CHAR_DOT) {\n          isBrace = token.isBrace = true;\n          isGlob = token.isGlob = true;\n          finished = true;\n\n          if (scanToEnd === true) {\n            continue;\n          }\n\n          break;\n        }\n\n        if (braceEscaped !== true && code === CHAR_COMMA) {\n          isBrace = token.isBrace = true;\n          isGlob = token.isGlob = true;\n          finished = true;\n\n          if (scanToEnd === true) {\n            continue;\n          }\n\n          break;\n        }\n\n        if (code === CHAR_RIGHT_CURLY_BRACE) {\n          braces--;\n\n          if (braces === 0) {\n            braceEscaped = false;\n            isBrace = token.isBrace = true;\n            finished = true;\n            break;\n          }\n        }\n      }\n\n      if (scanToEnd === true) {\n        continue;\n      }\n\n      break;\n    }\n\n    if (code === CHAR_FORWARD_SLASH) {\n      slashes.push(index);\n      tokens.push(token);\n      token = { value: '', depth: 0, isGlob: false };\n\n      if (finished === true) continue;\n      if (prev === CHAR_DOT && index === (start + 1)) {\n        start += 2;\n        continue;\n      }\n\n      lastIndex = index + 1;\n      continue;\n    }\n\n    if (opts.noext !== true) {\n      const isExtglobChar = code === CHAR_PLUS\n        || code === CHAR_AT\n        || code === CHAR_ASTERISK\n        || code === CHAR_QUESTION_MARK\n        || code === CHAR_EXCLAMATION_MARK;\n\n      if (isExtglobChar === true && peek() === CHAR_LEFT_PARENTHESES) {\n        isGlob = token.isGlob = true;\n        isExtglob = token.isExtglob = true;\n        finished = true;\n\n        if (scanToEnd === true) {\n          while (eos() !== true && (code = advance())) {\n            if (code === CHAR_BACKWARD_SLASH) {\n              backslashes = token.backslashes = true;\n              code = advance();\n              continue;\n            }\n\n            if (code === CHAR_RIGHT_PARENTHESES) {\n              isGlob = token.isGlob = true;\n              finished = true;\n              break;\n            }\n          }\n          continue;\n        }\n        break;\n      }\n    }\n\n    if (code === CHAR_ASTERISK) {\n      if (prev === CHAR_ASTERISK) isGlobstar = token.isGlobstar = true;\n      isGlob = token.isGlob = true;\n      finished = true;\n\n      if (scanToEnd === true) {\n        continue;\n      }\n      break;\n    }\n\n    if (code === CHAR_QUESTION_MARK) {\n      isGlob = token.isGlob = true;\n      finished = true;\n\n      if (scanToEnd === true) {\n        continue;\n      }\n      break;\n    }\n\n    if (code === CHAR_LEFT_SQUARE_BRACKET) {\n      while (eos() !== true && (next = advance())) {\n        if (next === CHAR_BACKWARD_SLASH) {\n          backslashes = token.backslashes = true;\n          advance();\n          continue;\n        }\n\n        if (next === CHAR_RIGHT_SQUARE_BRACKET) {\n          isBracket = token.isBracket = true;\n          isGlob = token.isGlob = true;\n          finished = true;\n          break;\n        }\n      }\n\n      if (scanToEnd === true) {\n        continue;\n      }\n\n      break;\n    }\n\n    if (opts.nonegate !== true && code === CHAR_EXCLAMATION_MARK && index === start) {\n      negated = token.negated = true;\n      start++;\n      continue;\n    }\n\n    if (opts.noparen !== true && code === CHAR_LEFT_PARENTHESES) {\n      isGlob = token.isGlob = true;\n\n      if (scanToEnd === true) {\n        while (eos() !== true && (code = advance())) {\n          if (code === CHAR_LEFT_PARENTHESES) {\n            backslashes = token.backslashes = true;\n            code = advance();\n            continue;\n          }\n\n          if (code === CHAR_RIGHT_PARENTHESES) {\n            finished = true;\n            break;\n          }\n        }\n        continue;\n      }\n      break;\n    }\n\n    if (isGlob === true) {\n      finished = true;\n\n      if (scanToEnd === true) {\n        continue;\n      }\n\n      break;\n    }\n  }\n\n  if (opts.noext === true) {\n    isExtglob = false;\n    isGlob = false;\n  }\n\n  let base = str;\n  let prefix = '';\n  let glob = '';\n\n  if (start > 0) {\n    prefix = str.slice(0, start);\n    str = str.slice(start);\n    lastIndex -= start;\n  }\n\n  if (base && isGlob === true && lastIndex > 0) {\n    base = str.slice(0, lastIndex);\n    glob = str.slice(lastIndex);\n  } else if (isGlob === true) {\n    base = '';\n    glob = str;\n  } else {\n    base = str;\n  }\n\n  if (base && base !== '' && base !== '/' && base !== str) {\n    if (isPathSeparator(base.charCodeAt(base.length - 1))) {\n      base = base.slice(0, -1);\n    }\n  }\n\n  if (opts.unescape === true) {\n    if (glob) glob = utils.removeBackslashes(glob);\n\n    if (base && backslashes === true) {\n      base = utils.removeBackslashes(base);\n    }\n  }\n\n  const state = {\n    prefix,\n    input,\n    start,\n    base,\n    glob,\n    isBrace,\n    isBracket,\n    isGlob,\n    isExtglob,\n    isGlobstar,\n    negated\n  };\n\n  if (opts.tokens === true) {\n    state.maxDepth = 0;\n    if (!isPathSeparator(code)) {\n      tokens.push(token);\n    }\n    state.tokens = tokens;\n  }\n\n  if (opts.parts === true || opts.tokens === true) {\n    let prevIndex;\n\n    for (let idx = 0; idx < slashes.length; idx++) {\n      const n = prevIndex ? prevIndex + 1 : start;\n      const i = slashes[idx];\n      const value = input.slice(n, i);\n      if (opts.tokens) {\n        if (idx === 0 && start !== 0) {\n          tokens[idx].isPrefix = true;\n          tokens[idx].value = prefix;\n        } else {\n          tokens[idx].value = value;\n        }\n        depth(tokens[idx]);\n        state.maxDepth += tokens[idx].depth;\n      }\n      if (idx !== 0 || value !== '') {\n        parts.push(value);\n      }\n      prevIndex = i;\n    }\n\n    if (prevIndex && prevIndex + 1 < input.length) {\n      const value = input.slice(prevIndex + 1);\n      parts.push(value);\n\n      if (opts.tokens) {\n        tokens[tokens.length - 1].value = value;\n        depth(tokens[tokens.length - 1]);\n        state.maxDepth += tokens[tokens.length - 1].depth;\n      }\n    }\n\n    state.slashes = slashes;\n    state.parts = parts;\n  }\n\n  return state;\n};\n\nmodule.exports = scan;\n","'use strict';\n\nconst constants = require('./constants');\nconst utils = require('./utils');\n\n/**\n * Constants\n */\n\nconst {\n  MAX_LENGTH,\n  POSIX_REGEX_SOURCE,\n  REGEX_NON_SPECIAL_CHARS,\n  REGEX_SPECIAL_CHARS_BACKREF,\n  REPLACEMENTS\n} = constants;\n\n/**\n * Helpers\n */\n\nconst expandRange = (args, options) => {\n  if (typeof options.expandRange === 'function') {\n    return options.expandRange(...args, options);\n  }\n\n  args.sort();\n  const value = `[${args.join('-')}]`;\n\n  try {\n    /* eslint-disable-next-line no-new */\n    new RegExp(value);\n  } catch (ex) {\n    return args.map(v => utils.escapeRegex(v)).join('..');\n  }\n\n  return value;\n};\n\n/**\n * Create the message for a syntax error\n */\n\nconst syntaxError = (type, char) => {\n  return `Missing ${type}: \"${char}\" - use \"\\\\\\\\${char}\" to match literal characters`;\n};\n\n/**\n * Parse the given input string.\n * @param {String} input\n * @param {Object} options\n * @return {Object}\n */\n\nconst parse = (input, options) => {\n  if (typeof input !== 'string') {\n    throw new TypeError('Expected a string');\n  }\n\n  input = REPLACEMENTS[input] || input;\n\n  const opts = { ...options };\n  const max = typeof opts.maxLength === 'number' ? Math.min(MAX_LENGTH, opts.maxLength) : MAX_LENGTH;\n\n  let len = input.length;\n  if (len > max) {\n    throw new SyntaxError(`Input length: ${len}, exceeds maximum allowed length: ${max}`);\n  }\n\n  const bos = { type: 'bos', value: '', output: opts.prepend || '' };\n  const tokens = [bos];\n\n  const capture = opts.capture ? '' : '?:';\n  const win32 = utils.isWindows(options);\n\n  // create constants based on platform, for windows or posix\n  const PLATFORM_CHARS = constants.globChars(win32);\n  const EXTGLOB_CHARS = constants.extglobChars(PLATFORM_CHARS);\n\n  const {\n    DOT_LITERAL,\n    PLUS_LITERAL,\n    SLASH_LITERAL,\n    ONE_CHAR,\n    DOTS_SLASH,\n    NO_DOT,\n    NO_DOT_SLASH,\n    NO_DOTS_SLASH,\n    QMARK,\n    QMARK_NO_DOT,\n    STAR,\n    START_ANCHOR\n  } = PLATFORM_CHARS;\n\n  const globstar = (opts) => {\n    return `(${capture}(?:(?!${START_ANCHOR}${opts.dot ? DOTS_SLASH : DOT_LITERAL}).)*?)`;\n  };\n\n  const nodot = opts.dot ? '' : NO_DOT;\n  const qmarkNoDot = opts.dot ? QMARK : QMARK_NO_DOT;\n  let star = opts.bash === true ? globstar(opts) : STAR;\n\n  if (opts.capture) {\n    star = `(${star})`;\n  }\n\n  // minimatch options support\n  if (typeof opts.noext === 'boolean') {\n    opts.noextglob = opts.noext;\n  }\n\n  const state = {\n    input,\n    index: -1,\n    start: 0,\n    dot: opts.dot === true,\n    consumed: '',\n    output: '',\n    prefix: '',\n    backtrack: false,\n    negated: false,\n    brackets: 0,\n    braces: 0,\n    parens: 0,\n    quotes: 0,\n    globstar: false,\n    tokens\n  };\n\n  input = utils.removePrefix(input, state);\n  len = input.length;\n\n  const extglobs = [];\n  const braces = [];\n  const stack = [];\n  let prev = bos;\n  let value;\n\n  /**\n   * Tokenizing helpers\n   */\n\n  const eos = () => state.index === len - 1;\n  const peek = state.peek = (n = 1) => input[state.index + n];\n  const advance = state.advance = () => input[++state.index];\n  const remaining = () => input.slice(state.index + 1);\n  const consume = (value = '', num = 0) => {\n    state.consumed += value;\n    state.index += num;\n  };\n  const append = token => {\n    state.output += token.output != null ? token.output : token.value;\n    consume(token.value);\n  };\n\n  const negate = () => {\n    let count = 1;\n\n    while (peek() === '!' && (peek(2) !== '(' || peek(3) === '?')) {\n      advance();\n      state.start++;\n      count++;\n    }\n\n    if (count % 2 === 0) {\n      return false;\n    }\n\n    state.negated = true;\n    state.start++;\n    return true;\n  };\n\n  const increment = type => {\n    state[type]++;\n    stack.push(type);\n  };\n\n  const decrement = type => {\n    state[type]--;\n    stack.pop();\n  };\n\n  /**\n   * Push tokens onto the tokens array. This helper speeds up\n   * tokenizing by 1) helping us avoid backtracking as much as possible,\n   * and 2) helping us avoid creating extra tokens when consecutive\n   * characters are plain text. This improves performance and simplifies\n   * lookbehinds.\n   */\n\n  const push = tok => {\n    if (prev.type === 'globstar') {\n      const isBrace = state.braces > 0 && (tok.type === 'comma' || tok.type === 'brace');\n      const isExtglob = tok.extglob === true || (extglobs.length && (tok.type === 'pipe' || tok.type === 'paren'));\n\n      if (tok.type !== 'slash' && tok.type !== 'paren' && !isBrace && !isExtglob) {\n        state.output = state.output.slice(0, -prev.output.length);\n        prev.type = 'star';\n        prev.value = '*';\n        prev.output = star;\n        state.output += prev.output;\n      }\n    }\n\n    if (extglobs.length && tok.type !== 'paren' && !EXTGLOB_CHARS[tok.value]) {\n      extglobs[extglobs.length - 1].inner += tok.value;\n    }\n\n    if (tok.value || tok.output) append(tok);\n    if (prev && prev.type === 'text' && tok.type === 'text') {\n      prev.value += tok.value;\n      prev.output = (prev.output || '') + tok.value;\n      return;\n    }\n\n    tok.prev = prev;\n    tokens.push(tok);\n    prev = tok;\n  };\n\n  const extglobOpen = (type, value) => {\n    const token = { ...EXTGLOB_CHARS[value], conditions: 1, inner: '' };\n\n    token.prev = prev;\n    token.parens = state.parens;\n    token.output = state.output;\n    const output = (opts.capture ? '(' : '') + token.open;\n\n    increment('parens');\n    push({ type, value, output: state.output ? '' : ONE_CHAR });\n    push({ type: 'paren', extglob: true, value: advance(), output });\n    extglobs.push(token);\n  };\n\n  const extglobClose = token => {\n    let output = token.close + (opts.capture ? ')' : '');\n\n    if (token.type === 'negate') {\n      let extglobStar = star;\n\n      if (token.inner && token.inner.length > 1 && token.inner.includes('/')) {\n        extglobStar = globstar(opts);\n      }\n\n      if (extglobStar !== star || eos() || /^\\)+$/.test(remaining())) {\n        output = token.close = `)$))${extglobStar}`;\n      }\n\n      if (token.prev.type === 'bos') {\n        state.negatedExtglob = true;\n      }\n    }\n\n    push({ type: 'paren', extglob: true, value, output });\n    decrement('parens');\n  };\n\n  /**\n   * Fast paths\n   */\n\n  if (opts.fastpaths !== false && !/(^[*!]|[/()[\\]{}\"])/.test(input)) {\n    let backslashes = false;\n\n    let output = input.replace(REGEX_SPECIAL_CHARS_BACKREF, (m, esc, chars, first, rest, index) => {\n      if (first === '\\\\') {\n        backslashes = true;\n        return m;\n      }\n\n      if (first === '?') {\n        if (esc) {\n          return esc + first + (rest ? QMARK.repeat(rest.length) : '');\n        }\n        if (index === 0) {\n          return qmarkNoDot + (rest ? QMARK.repeat(rest.length) : '');\n        }\n        return QMARK.repeat(chars.length);\n      }\n\n      if (first === '.') {\n        return DOT_LITERAL.repeat(chars.length);\n      }\n\n      if (first === '*') {\n        if (esc) {\n          return esc + first + (rest ? star : '');\n        }\n        return star;\n      }\n      return esc ? m : `\\\\${m}`;\n    });\n\n    if (backslashes === true) {\n      if (opts.unescape === true) {\n        output = output.replace(/\\\\/g, '');\n      } else {\n        output = output.replace(/\\\\+/g, m => {\n          return m.length % 2 === 0 ? '\\\\\\\\' : (m ? '\\\\' : '');\n        });\n      }\n    }\n\n    if (output === input && opts.contains === true) {\n      state.output = input;\n      return state;\n    }\n\n    state.output = utils.wrapOutput(output, state, options);\n    return state;\n  }\n\n  /**\n   * Tokenize input until we reach end-of-string\n   */\n\n  while (!eos()) {\n    value = advance();\n\n    if (value === '\\u0000') {\n      continue;\n    }\n\n    /**\n     * Escaped characters\n     */\n\n    if (value === '\\\\') {\n      const next = peek();\n\n      if (next === '/' && opts.bash !== true) {\n        continue;\n      }\n\n      if (next === '.' || next === ';') {\n        continue;\n      }\n\n      if (!next) {\n        value += '\\\\';\n        push({ type: 'text', value });\n        continue;\n      }\n\n      // collapse slashes to reduce potential for exploits\n      const match = /^\\\\+/.exec(remaining());\n      let slashes = 0;\n\n      if (match && match[0].length > 2) {\n        slashes = match[0].length;\n        state.index += slashes;\n        if (slashes % 2 !== 0) {\n          value += '\\\\';\n        }\n      }\n\n      if (opts.unescape === true) {\n        value = advance() || '';\n      } else {\n        value += advance() || '';\n      }\n\n      if (state.brackets === 0) {\n        push({ type: 'text', value });\n        continue;\n      }\n    }\n\n    /**\n     * If we're inside a regex character class, continue\n     * until we reach the closing bracket.\n     */\n\n    if (state.brackets > 0 && (value !== ']' || prev.value === '[' || prev.value === '[^')) {\n      if (opts.posix !== false && value === ':') {\n        const inner = prev.value.slice(1);\n        if (inner.includes('[')) {\n          prev.posix = true;\n\n          if (inner.includes(':')) {\n            const idx = prev.value.lastIndexOf('[');\n            const pre = prev.value.slice(0, idx);\n            const rest = prev.value.slice(idx + 2);\n            const posix = POSIX_REGEX_SOURCE[rest];\n            if (posix) {\n              prev.value = pre + posix;\n              state.backtrack = true;\n              advance();\n\n              if (!bos.output && tokens.indexOf(prev) === 1) {\n                bos.output = ONE_CHAR;\n              }\n              continue;\n            }\n          }\n        }\n      }\n\n      if ((value === '[' && peek() !== ':') || (value === '-' && peek() === ']')) {\n        value = `\\\\${value}`;\n      }\n\n      if (value === ']' && (prev.value === '[' || prev.value === '[^')) {\n        value = `\\\\${value}`;\n      }\n\n      if (opts.posix === true && value === '!' && prev.value === '[') {\n        value = '^';\n      }\n\n      prev.value += value;\n      append({ value });\n      continue;\n    }\n\n    /**\n     * If we're inside a quoted string, continue\n     * until we reach the closing double quote.\n     */\n\n    if (state.quotes === 1 && value !== '\"') {\n      value = utils.escapeRegex(value);\n      prev.value += value;\n      append({ value });\n      continue;\n    }\n\n    /**\n     * Double quotes\n     */\n\n    if (value === '\"') {\n      state.quotes = state.quotes === 1 ? 0 : 1;\n      if (opts.keepQuotes === true) {\n        push({ type: 'text', value });\n      }\n      continue;\n    }\n\n    /**\n     * Parentheses\n     */\n\n    if (value === '(') {\n      increment('parens');\n      push({ type: 'paren', value });\n      continue;\n    }\n\n    if (value === ')') {\n      if (state.parens === 0 && opts.strictBrackets === true) {\n        throw new SyntaxError(syntaxError('opening', '('));\n      }\n\n      const extglob = extglobs[extglobs.length - 1];\n      if (extglob && state.parens === extglob.parens + 1) {\n        extglobClose(extglobs.pop());\n        continue;\n      }\n\n      push({ type: 'paren', value, output: state.parens ? ')' : '\\\\)' });\n      decrement('parens');\n      continue;\n    }\n\n    /**\n     * Square brackets\n     */\n\n    if (value === '[') {\n      if (opts.nobracket === true || !remaining().includes(']')) {\n        if (opts.nobracket !== true && opts.strictBrackets === true) {\n          throw new SyntaxError(syntaxError('closing', ']'));\n        }\n\n        value = `\\\\${value}`;\n      } else {\n        increment('brackets');\n      }\n\n      push({ type: 'bracket', value });\n      continue;\n    }\n\n    if (value === ']') {\n      if (opts.nobracket === true || (prev && prev.type === 'bracket' && prev.value.length === 1)) {\n        push({ type: 'text', value, output: `\\\\${value}` });\n        continue;\n      }\n\n      if (state.brackets === 0) {\n        if (opts.strictBrackets === true) {\n          throw new SyntaxError(syntaxError('opening', '['));\n        }\n\n        push({ type: 'text', value, output: `\\\\${value}` });\n        continue;\n      }\n\n      decrement('brackets');\n\n      const prevValue = prev.value.slice(1);\n      if (prev.posix !== true && prevValue[0] === '^' && !prevValue.includes('/')) {\n        value = `/${value}`;\n      }\n\n      prev.value += value;\n      append({ value });\n\n      // when literal brackets are explicitly disabled\n      // assume we should match with a regex character class\n      if (opts.literalBrackets === false || utils.hasRegexChars(prevValue)) {\n        continue;\n      }\n\n      const escaped = utils.escapeRegex(prev.value);\n      state.output = state.output.slice(0, -prev.value.length);\n\n      // when literal brackets are explicitly enabled\n      // assume we should escape the brackets to match literal characters\n      if (opts.literalBrackets === true) {\n        state.output += escaped;\n        prev.value = escaped;\n        continue;\n      }\n\n      // when the user specifies nothing, try to match both\n      prev.value = `(${capture}${escaped}|${prev.value})`;\n      state.output += prev.value;\n      continue;\n    }\n\n    /**\n     * Braces\n     */\n\n    if (value === '{' && opts.nobrace !== true) {\n      increment('braces');\n\n      const open = {\n        type: 'brace',\n        value,\n        output: '(',\n        outputIndex: state.output.length,\n        tokensIndex: state.tokens.length\n      };\n\n      braces.push(open);\n      push(open);\n      continue;\n    }\n\n    if (value === '}') {\n      const brace = braces[braces.length - 1];\n\n      if (opts.nobrace === true || !brace) {\n        push({ type: 'text', value, output: value });\n        continue;\n      }\n\n      let output = ')';\n\n      if (brace.dots === true) {\n        const arr = tokens.slice();\n        const range = [];\n\n        for (let i = arr.length - 1; i >= 0; i--) {\n          tokens.pop();\n          if (arr[i].type === 'brace') {\n            break;\n          }\n          if (arr[i].type !== 'dots') {\n            range.unshift(arr[i].value);\n          }\n        }\n\n        output = expandRange(range, opts);\n        state.backtrack = true;\n      }\n\n      if (brace.comma !== true && brace.dots !== true) {\n        const out = state.output.slice(0, brace.outputIndex);\n        const toks = state.tokens.slice(brace.tokensIndex);\n        brace.value = brace.output = '\\\\{';\n        value = output = '\\\\}';\n        state.output = out;\n        for (const t of toks) {\n          state.output += (t.output || t.value);\n        }\n      }\n\n      push({ type: 'brace', value, output });\n      decrement('braces');\n      braces.pop();\n      continue;\n    }\n\n    /**\n     * Pipes\n     */\n\n    if (value === '|') {\n      if (extglobs.length > 0) {\n        extglobs[extglobs.length - 1].conditions++;\n      }\n      push({ type: 'text', value });\n      continue;\n    }\n\n    /**\n     * Commas\n     */\n\n    if (value === ',') {\n      let output = value;\n\n      const brace = braces[braces.length - 1];\n      if (brace && stack[stack.length - 1] === 'braces') {\n        brace.comma = true;\n        output = '|';\n      }\n\n      push({ type: 'comma', value, output });\n      continue;\n    }\n\n    /**\n     * Slashes\n     */\n\n    if (value === '/') {\n      // if the beginning of the glob is \"./\", advance the start\n      // to the current index, and don't add the \"./\" characters\n      // to the state. This greatly simplifies lookbehinds when\n      // checking for BOS characters like \"!\" and \".\" (not \"./\")\n      if (prev.type === 'dot' && state.index === state.start + 1) {\n        state.start = state.index + 1;\n        state.consumed = '';\n        state.output = '';\n        tokens.pop();\n        prev = bos; // reset \"prev\" to the first token\n        continue;\n      }\n\n      push({ type: 'slash', value, output: SLASH_LITERAL });\n      continue;\n    }\n\n    /**\n     * Dots\n     */\n\n    if (value === '.') {\n      if (state.braces > 0 && prev.type === 'dot') {\n        if (prev.value === '.') prev.output = DOT_LITERAL;\n        const brace = braces[braces.length - 1];\n        prev.type = 'dots';\n        prev.output += value;\n        prev.value += value;\n        brace.dots = true;\n        continue;\n      }\n\n      if ((state.braces + state.parens) === 0 && prev.type !== 'bos' && prev.type !== 'slash') {\n        push({ type: 'text', value, output: DOT_LITERAL });\n        continue;\n      }\n\n      push({ type: 'dot', value, output: DOT_LITERAL });\n      continue;\n    }\n\n    /**\n     * Question marks\n     */\n\n    if (value === '?') {\n      const isGroup = prev && prev.value === '(';\n      if (!isGroup && opts.noextglob !== true && peek() === '(' && peek(2) !== '?') {\n        extglobOpen('qmark', value);\n        continue;\n      }\n\n      if (prev && prev.type === 'paren') {\n        const next = peek();\n        let output = value;\n\n        if (next === '<' && !utils.supportsLookbehinds()) {\n          throw new Error('Node.js v10 or higher is required for regex lookbehinds');\n        }\n\n        if ((prev.value === '(' && !/[!=<:]/.test(next)) || (next === '<' && !/<([!=]|\\w+>)/.test(remaining()))) {\n          output = `\\\\${value}`;\n        }\n\n        push({ type: 'text', value, output });\n        continue;\n      }\n\n      if (opts.dot !== true && (prev.type === 'slash' || prev.type === 'bos')) {\n        push({ type: 'qmark', value, output: QMARK_NO_DOT });\n        continue;\n      }\n\n      push({ type: 'qmark', value, output: QMARK });\n      continue;\n    }\n\n    /**\n     * Exclamation\n     */\n\n    if (value === '!') {\n      if (opts.noextglob !== true && peek() === '(') {\n        if (peek(2) !== '?' || !/[!=<:]/.test(peek(3))) {\n          extglobOpen('negate', value);\n          continue;\n        }\n      }\n\n      if (opts.nonegate !== true && state.index === 0) {\n        negate();\n        continue;\n      }\n    }\n\n    /**\n     * Plus\n     */\n\n    if (value === '+') {\n      if (opts.noextglob !== true && peek() === '(' && peek(2) !== '?') {\n        extglobOpen('plus', value);\n        continue;\n      }\n\n      if ((prev && prev.value === '(') || opts.regex === false) {\n        push({ type: 'plus', value, output: PLUS_LITERAL });\n        continue;\n      }\n\n      if ((prev && (prev.type === 'bracket' || prev.type === 'paren' || prev.type === 'brace')) || state.parens > 0) {\n        push({ type: 'plus', value });\n        continue;\n      }\n\n      push({ type: 'plus', value: PLUS_LITERAL });\n      continue;\n    }\n\n    /**\n     * Plain text\n     */\n\n    if (value === '@') {\n      if (opts.noextglob !== true && peek() === '(' && peek(2) !== '?') {\n        push({ type: 'at', extglob: true, value, output: '' });\n        continue;\n      }\n\n      push({ type: 'text', value });\n      continue;\n    }\n\n    /**\n     * Plain text\n     */\n\n    if (value !== '*') {\n      if (value === '$' || value === '^') {\n        value = `\\\\${value}`;\n      }\n\n      const match = REGEX_NON_SPECIAL_CHARS.exec(remaining());\n      if (match) {\n        value += match[0];\n        state.index += match[0].length;\n      }\n\n      push({ type: 'text', value });\n      continue;\n    }\n\n    /**\n     * Stars\n     */\n\n    if (prev && (prev.type === 'globstar' || prev.star === true)) {\n      prev.type = 'star';\n      prev.star = true;\n      prev.value += value;\n      prev.output = star;\n      state.backtrack = true;\n      state.globstar = true;\n      consume(value);\n      continue;\n    }\n\n    let rest = remaining();\n    if (opts.noextglob !== true && /^\\([^?]/.test(rest)) {\n      extglobOpen('star', value);\n      continue;\n    }\n\n    if (prev.type === 'star') {\n      if (opts.noglobstar === true) {\n        consume(value);\n        continue;\n      }\n\n      const prior = prev.prev;\n      const before = prior.prev;\n      const isStart = prior.type === 'slash' || prior.type === 'bos';\n      const afterStar = before && (before.type === 'star' || before.type === 'globstar');\n\n      if (opts.bash === true && (!isStart || (rest[0] && rest[0] !== '/'))) {\n        push({ type: 'star', value, output: '' });\n        continue;\n      }\n\n      const isBrace = state.braces > 0 && (prior.type === 'comma' || prior.type === 'brace');\n      const isExtglob = extglobs.length && (prior.type === 'pipe' || prior.type === 'paren');\n      if (!isStart && prior.type !== 'paren' && !isBrace && !isExtglob) {\n        push({ type: 'star', value, output: '' });\n        continue;\n      }\n\n      // strip consecutive `/**/`\n      while (rest.slice(0, 3) === '/**') {\n        const after = input[state.index + 4];\n        if (after && after !== '/') {\n          break;\n        }\n        rest = rest.slice(3);\n        consume('/**', 3);\n      }\n\n      if (prior.type === 'bos' && eos()) {\n        prev.type = 'globstar';\n        prev.value += value;\n        prev.output = globstar(opts);\n        state.output = prev.output;\n        state.globstar = true;\n        consume(value);\n        continue;\n      }\n\n      if (prior.type === 'slash' && prior.prev.type !== 'bos' && !afterStar && eos()) {\n        state.output = state.output.slice(0, -(prior.output + prev.output).length);\n        prior.output = `(?:${prior.output}`;\n\n        prev.type = 'globstar';\n        prev.output = globstar(opts) + (opts.strictSlashes ? ')' : '|$)');\n        prev.value += value;\n        state.globstar = true;\n        state.output += prior.output + prev.output;\n        consume(value);\n        continue;\n      }\n\n      if (prior.type === 'slash' && prior.prev.type !== 'bos' && rest[0] === '/') {\n        const end = rest[1] !== void 0 ? '|$' : '';\n\n        state.output = state.output.slice(0, -(prior.output + prev.output).length);\n        prior.output = `(?:${prior.output}`;\n\n        prev.type = 'globstar';\n        prev.output = `${globstar(opts)}${SLASH_LITERAL}|${SLASH_LITERAL}${end})`;\n        prev.value += value;\n\n        state.output += prior.output + prev.output;\n        state.globstar = true;\n\n        consume(value + advance());\n\n        push({ type: 'slash', value: '/', output: '' });\n        continue;\n      }\n\n      if (prior.type === 'bos' && rest[0] === '/') {\n        prev.type = 'globstar';\n        prev.value += value;\n        prev.output = `(?:^|${SLASH_LITERAL}|${globstar(opts)}${SLASH_LITERAL})`;\n        state.output = prev.output;\n        state.globstar = true;\n        consume(value + advance());\n        push({ type: 'slash', value: '/', output: '' });\n        continue;\n      }\n\n      // remove single star from output\n      state.output = state.output.slice(0, -prev.output.length);\n\n      // reset previous token to globstar\n      prev.type = 'globstar';\n      prev.output = globstar(opts);\n      prev.value += value;\n\n      // reset output with globstar\n      state.output += prev.output;\n      state.globstar = true;\n      consume(value);\n      continue;\n    }\n\n    const token = { type: 'star', value, output: star };\n\n    if (opts.bash === true) {\n      token.output = '.*?';\n      if (prev.type === 'bos' || prev.type === 'slash') {\n        token.output = nodot + token.output;\n      }\n      push(token);\n      continue;\n    }\n\n    if (prev && (prev.type === 'bracket' || prev.type === 'paren') && opts.regex === true) {\n      token.output = value;\n      push(token);\n      continue;\n    }\n\n    if (state.index === state.start || prev.type === 'slash' || prev.type === 'dot') {\n      if (prev.type === 'dot') {\n        state.output += NO_DOT_SLASH;\n        prev.output += NO_DOT_SLASH;\n\n      } else if (opts.dot === true) {\n        state.output += NO_DOTS_SLASH;\n        prev.output += NO_DOTS_SLASH;\n\n      } else {\n        state.output += nodot;\n        prev.output += nodot;\n      }\n\n      if (peek() !== '*') {\n        state.output += ONE_CHAR;\n        prev.output += ONE_CHAR;\n      }\n    }\n\n    push(token);\n  }\n\n  while (state.brackets > 0) {\n    if (opts.strictBrackets === true) throw new SyntaxError(syntaxError('closing', ']'));\n    state.output = utils.escapeLast(state.output, '[');\n    decrement('brackets');\n  }\n\n  while (state.parens > 0) {\n    if (opts.strictBrackets === true) throw new SyntaxError(syntaxError('closing', ')'));\n    state.output = utils.escapeLast(state.output, '(');\n    decrement('parens');\n  }\n\n  while (state.braces > 0) {\n    if (opts.strictBrackets === true) throw new SyntaxError(syntaxError('closing', '}'));\n    state.output = utils.escapeLast(state.output, '{');\n    decrement('braces');\n  }\n\n  if (opts.strictSlashes !== true && (prev.type === 'star' || prev.type === 'bracket')) {\n    push({ type: 'maybe_slash', value: '', output: `${SLASH_LITERAL}?` });\n  }\n\n  // rebuild the output if we had to backtrack at any point\n  if (state.backtrack === true) {\n    state.output = '';\n\n    for (const token of state.tokens) {\n      state.output += token.output != null ? token.output : token.value;\n\n      if (token.suffix) {\n        state.output += token.suffix;\n      }\n    }\n  }\n\n  return state;\n};\n\n/**\n * Fast paths for creating regular expressions for common glob patterns.\n * This can significantly speed up processing and has very little downside\n * impact when none of the fast paths match.\n */\n\nparse.fastpaths = (input, options) => {\n  const opts = { ...options };\n  const max = typeof opts.maxLength === 'number' ? Math.min(MAX_LENGTH, opts.maxLength) : MAX_LENGTH;\n  const len = input.length;\n  if (len > max) {\n    throw new SyntaxError(`Input length: ${len}, exceeds maximum allowed length: ${max}`);\n  }\n\n  input = REPLACEMENTS[input] || input;\n  const win32 = utils.isWindows(options);\n\n  // create constants based on platform, for windows or posix\n  const {\n    DOT_LITERAL,\n    SLASH_LITERAL,\n    ONE_CHAR,\n    DOTS_SLASH,\n    NO_DOT,\n    NO_DOTS,\n    NO_DOTS_SLASH,\n    STAR,\n    START_ANCHOR\n  } = constants.globChars(win32);\n\n  const nodot = opts.dot ? NO_DOTS : NO_DOT;\n  const slashDot = opts.dot ? NO_DOTS_SLASH : NO_DOT;\n  const capture = opts.capture ? '' : '?:';\n  const state = { negated: false, prefix: '' };\n  let star = opts.bash === true ? '.*?' : STAR;\n\n  if (opts.capture) {\n    star = `(${star})`;\n  }\n\n  const globstar = (opts) => {\n    if (opts.noglobstar === true) return star;\n    return `(${capture}(?:(?!${START_ANCHOR}${opts.dot ? DOTS_SLASH : DOT_LITERAL}).)*?)`;\n  };\n\n  const create = str => {\n    switch (str) {\n      case '*':\n        return `${nodot}${ONE_CHAR}${star}`;\n\n      case '.*':\n        return `${DOT_LITERAL}${ONE_CHAR}${star}`;\n\n      case '*.*':\n        return `${nodot}${star}${DOT_LITERAL}${ONE_CHAR}${star}`;\n\n      case '*/*':\n        return `${nodot}${star}${SLASH_LITERAL}${ONE_CHAR}${slashDot}${star}`;\n\n      case '**':\n        return nodot + globstar(opts);\n\n      case '**/*':\n        return `(?:${nodot}${globstar(opts)}${SLASH_LITERAL})?${slashDot}${ONE_CHAR}${star}`;\n\n      case '**/*.*':\n        return `(?:${nodot}${globstar(opts)}${SLASH_LITERAL})?${slashDot}${star}${DOT_LITERAL}${ONE_CHAR}${star}`;\n\n      case '**/.*':\n        return `(?:${nodot}${globstar(opts)}${SLASH_LITERAL})?${DOT_LITERAL}${ONE_CHAR}${star}`;\n\n      default: {\n        const match = /^(.*?)\\.(\\w+)$/.exec(str);\n        if (!match) return;\n\n        const source = create(match[1]);\n        if (!source) return;\n\n        return source + DOT_LITERAL + match[2];\n      }\n    }\n  };\n\n  const output = utils.removePrefix(input, state);\n  let source = create(output);\n\n  if (source && opts.strictSlashes !== true) {\n    source += `${SLASH_LITERAL}?`;\n  }\n\n  return source;\n};\n\nmodule.exports = parse;\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.merge = void 0;\r\nconst merge2 = require(\"merge2\");\r\nfunction merge(streams) {\r\n    const mergedStream = merge2(streams);\r\n    streams.forEach((stream) => {\r\n        stream.once('error', (error) => mergedStream.emit('error', error));\r\n    });\r\n    mergedStream.once('close', () => propagateCloseEventToSources(streams));\r\n    mergedStream.once('end', () => propagateCloseEventToSources(streams));\r\n    return mergedStream;\r\n}\r\nexports.merge = merge;\r\nfunction propagateCloseEventToSources(streams) {\r\n    streams.forEach((stream) => stream.emit('close'));\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.isEmpty = exports.isString = void 0;\r\nfunction isString(input) {\r\n    return typeof input === 'string';\r\n}\r\nexports.isString = isString;\r\nfunction isEmpty(input) {\r\n    return input === '';\r\n}\r\nexports.isEmpty = isEmpty;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst stream_1 = require(\"../readers/stream\");\r\nconst provider_1 = require(\"./provider\");\r\nclass ProviderAsync extends provider_1.default {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._reader = new stream_1.default(this._settings);\r\n    }\r\n    read(task) {\r\n        const root = this._getRootDirectory(task);\r\n        const options = this._getReaderOptions(task);\r\n        const entries = [];\r\n        return new Promise((resolve, reject) => {\r\n            const stream = this.api(root, task, options);\r\n            stream.once('error', reject);\r\n            stream.on('data', (entry) => entries.push(options.transform(entry)));\r\n            stream.once('end', () => resolve(entries));\r\n        });\r\n    }\r\n    api(root, task, options) {\r\n        if (task.dynamic) {\r\n            return this._reader.dynamic(root, options);\r\n        }\r\n        return this._reader.static(task.patterns, options);\r\n    }\r\n}\r\nexports.default = ProviderAsync;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.read = void 0;\r\nfunction read(path, settings, callback) {\r\n    settings.fs.lstat(path, (lstatError, lstat) => {\r\n        if (lstatError !== null) {\r\n            return callFailureCallback(callback, lstatError);\r\n        }\r\n        if (!lstat.isSymbolicLink() || !settings.followSymbolicLink) {\r\n            return callSuccessCallback(callback, lstat);\r\n        }\r\n        settings.fs.stat(path, (statError, stat) => {\r\n            if (statError !== null) {\r\n                if (settings.throwErrorOnBrokenSymbolicLink) {\r\n                    return callFailureCallback(callback, statError);\r\n                }\r\n                return callSuccessCallback(callback, lstat);\r\n            }\r\n            if (settings.markSymbolicLink) {\r\n                stat.isSymbolicLink = () => true;\r\n            }\r\n            callSuccessCallback(callback, stat);\r\n        });\r\n    });\r\n}\r\nexports.read = read;\r\nfunction callFailureCallback(callback, error) {\r\n    callback(error);\r\n}\r\nfunction callSuccessCallback(callback, result) {\r\n    callback(null, result);\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.read = void 0;\r\nfunction read(path, settings) {\r\n    const lstat = settings.fs.lstatSync(path);\r\n    if (!lstat.isSymbolicLink() || !settings.followSymbolicLink) {\r\n        return lstat;\r\n    }\r\n    try {\r\n        const stat = settings.fs.statSync(path);\r\n        if (settings.markSymbolicLink) {\r\n            stat.isSymbolicLink = () => true;\r\n        }\r\n        return stat;\r\n    }\r\n    catch (error) {\r\n        if (!settings.throwErrorOnBrokenSymbolicLink) {\r\n            return lstat;\r\n        }\r\n        throw error;\r\n    }\r\n}\r\nexports.read = read;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst fs = require(\"./adapters/fs\");\r\nclass Settings {\r\n    constructor(_options = {}) {\r\n        this._options = _options;\r\n        this.followSymbolicLink = this._getValue(this._options.followSymbolicLink, true);\r\n        this.fs = fs.createFileSystemAdapter(this._options.fs);\r\n        this.markSymbolicLink = this._getValue(this._options.markSymbolicLink, false);\r\n        this.throwErrorOnBrokenSymbolicLink = this._getValue(this._options.throwErrorOnBrokenSymbolicLink, true);\r\n    }\r\n    _getValue(option, value) {\r\n        return option !== null && option !== void 0 ? option : value;\r\n    }\r\n}\r\nexports.default = Settings;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.createFileSystemAdapter = exports.FILE_SYSTEM_ADAPTER = void 0;\r\nconst fs = require(\"fs\");\r\nexports.FILE_SYSTEM_ADAPTER = {\r\n    lstat: fs.lstat,\r\n    stat: fs.stat,\r\n    lstatSync: fs.lstatSync,\r\n    statSync: fs.statSync\r\n};\r\nfunction createFileSystemAdapter(fsMethods) {\r\n    if (fsMethods === undefined) {\r\n        return exports.FILE_SYSTEM_ADAPTER;\r\n    }\r\n    return Object.assign(Object.assign({}, exports.FILE_SYSTEM_ADAPTER), fsMethods);\r\n}\r\nexports.createFileSystemAdapter = createFileSystemAdapter;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst async_1 = require(\"../readers/async\");\r\nclass AsyncProvider {\r\n    constructor(_root, _settings) {\r\n        this._root = _root;\r\n        this._settings = _settings;\r\n        this._reader = new async_1.default(this._root, this._settings);\r\n        this._storage = new Set();\r\n    }\r\n    read(callback) {\r\n        this._reader.onError((error) => {\r\n            callFailureCallback(callback, error);\r\n        });\r\n        this._reader.onEntry((entry) => {\r\n            this._storage.add(entry);\r\n        });\r\n        this._reader.onEnd(() => {\r\n            callSuccessCallback(callback, [...this._storage]);\r\n        });\r\n        this._reader.read();\r\n    }\r\n}\r\nexports.default = AsyncProvider;\r\nfunction callFailureCallback(callback, error) {\r\n    callback(error);\r\n}\r\nfunction callSuccessCallback(callback, entries) {\r\n    callback(null, entries);\r\n}\r\n","module.exports = require(\"events\");","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.readdir = exports.readdirWithFileTypes = exports.read = void 0;\r\nconst fsStat = require(\"@nodelib/fs.stat\");\r\nconst rpl = require(\"run-parallel\");\r\nconst constants_1 = require(\"../constants\");\r\nconst utils = require(\"../utils\");\r\nconst common = require(\"./common\");\r\nfunction read(directory, settings, callback) {\r\n    if (!settings.stats && constants_1.IS_SUPPORT_READDIR_WITH_FILE_TYPES) {\r\n        return readdirWithFileTypes(directory, settings, callback);\r\n    }\r\n    return readdir(directory, settings, callback);\r\n}\r\nexports.read = read;\r\nfunction readdirWithFileTypes(directory, settings, callback) {\r\n    settings.fs.readdir(directory, { withFileTypes: true }, (readdirError, dirents) => {\r\n        if (readdirError !== null) {\r\n            return callFailureCallback(callback, readdirError);\r\n        }\r\n        const entries = dirents.map((dirent) => ({\r\n            dirent,\r\n            name: dirent.name,\r\n            path: common.joinPathSegments(directory, dirent.name, settings.pathSegmentSeparator)\r\n        }));\r\n        if (!settings.followSymbolicLinks) {\r\n            return callSuccessCallback(callback, entries);\r\n        }\r\n        const tasks = entries.map((entry) => makeRplTaskEntry(entry, settings));\r\n        rpl(tasks, (rplError, rplEntries) => {\r\n            if (rplError !== null) {\r\n                return callFailureCallback(callback, rplError);\r\n            }\r\n            callSuccessCallback(callback, rplEntries);\r\n        });\r\n    });\r\n}\r\nexports.readdirWithFileTypes = readdirWithFileTypes;\r\nfunction makeRplTaskEntry(entry, settings) {\r\n    return (done) => {\r\n        if (!entry.dirent.isSymbolicLink()) {\r\n            return done(null, entry);\r\n        }\r\n        settings.fs.stat(entry.path, (statError, stats) => {\r\n            if (statError !== null) {\r\n                if (settings.throwErrorOnBrokenSymbolicLink) {\r\n                    return done(statError);\r\n                }\r\n                return done(null, entry);\r\n            }\r\n            entry.dirent = utils.fs.createDirentFromStats(entry.name, stats);\r\n            return done(null, entry);\r\n        });\r\n    };\r\n}\r\nfunction readdir(directory, settings, callback) {\r\n    settings.fs.readdir(directory, (readdirError, names) => {\r\n        if (readdirError !== null) {\r\n            return callFailureCallback(callback, readdirError);\r\n        }\r\n        const filepaths = names.map((name) => common.joinPathSegments(directory, name, settings.pathSegmentSeparator));\r\n        const tasks = filepaths.map((filepath) => {\r\n            return (done) => fsStat.stat(filepath, settings.fsStatSettings, done);\r\n        });\r\n        rpl(tasks, (rplError, results) => {\r\n            if (rplError !== null) {\r\n                return callFailureCallback(callback, rplError);\r\n            }\r\n            const entries = [];\r\n            names.forEach((name, index) => {\r\n                const stats = results[index];\r\n                const entry = {\r\n                    name,\r\n                    path: filepaths[index],\r\n                    dirent: utils.fs.createDirentFromStats(name, stats)\r\n                };\r\n                if (settings.stats) {\r\n                    entry.stats = stats;\r\n                }\r\n                entries.push(entry);\r\n            });\r\n            callSuccessCallback(callback, entries);\r\n        });\r\n    });\r\n}\r\nexports.readdir = readdir;\r\nfunction callFailureCallback(callback, error) {\r\n    callback(error);\r\n}\r\nfunction callSuccessCallback(callback, result) {\r\n    callback(null, result);\r\n}\r\n","/*! run-parallel. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nmodule.exports = runParallel\n\nconst queueMicrotask = require('queue-microtask')\n\nfunction runParallel (tasks, cb) {\n  let results, pending, keys\n  let isSync = true\n\n  if (Array.isArray(tasks)) {\n    results = []\n    pending = tasks.length\n  } else {\n    keys = Object.keys(tasks)\n    results = {}\n    pending = keys.length\n  }\n\n  function done (err) {\n    function end () {\n      if (cb) cb(err, results)\n      cb = null\n    }\n    if (isSync) queueMicrotask(end)\n    else end()\n  }\n\n  function each (i, err, result) {\n    results[i] = result\n    if (--pending === 0 || err) {\n      done(err)\n    }\n  }\n\n  if (!pending) {\n    // empty\n    done(null)\n  } else if (keys) {\n    // object\n    keys.forEach(function (key) {\n      tasks[key](function (err, result) { each(key, err, result) })\n    })\n  } else {\n    // array\n    tasks.forEach(function (task, i) {\n      task(function (err, result) { each(i, err, result) })\n    })\n  }\n\n  isSync = false\n}\n","/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nlet promise\n\nmodule.exports = typeof queueMicrotask === 'function'\n  ? queueMicrotask.bind(typeof window !== 'undefined' ? window : global)\n  // reuse resolved promise, and allocate it lazily\n  : cb => (promise || (promise = Promise.resolve()))\n    .then(cb)\n    .catch(err => setTimeout(() => { throw err }, 0))\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.createDirentFromStats = void 0;\r\nclass DirentFromStats {\r\n    constructor(name, stats) {\r\n        this.name = name;\r\n        this.isBlockDevice = stats.isBlockDevice.bind(stats);\r\n        this.isCharacterDevice = stats.isCharacterDevice.bind(stats);\r\n        this.isDirectory = stats.isDirectory.bind(stats);\r\n        this.isFIFO = stats.isFIFO.bind(stats);\r\n        this.isFile = stats.isFile.bind(stats);\r\n        this.isSocket = stats.isSocket.bind(stats);\r\n        this.isSymbolicLink = stats.isSymbolicLink.bind(stats);\r\n    }\r\n}\r\nfunction createDirentFromStats(name, stats) {\r\n    return new DirentFromStats(name, stats);\r\n}\r\nexports.createDirentFromStats = createDirentFromStats;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.readdir = exports.readdirWithFileTypes = exports.read = void 0;\r\nconst fsStat = require(\"@nodelib/fs.stat\");\r\nconst constants_1 = require(\"../constants\");\r\nconst utils = require(\"../utils\");\r\nconst common = require(\"./common\");\r\nfunction read(directory, settings) {\r\n    if (!settings.stats && constants_1.IS_SUPPORT_READDIR_WITH_FILE_TYPES) {\r\n        return readdirWithFileTypes(directory, settings);\r\n    }\r\n    return readdir(directory, settings);\r\n}\r\nexports.read = read;\r\nfunction readdirWithFileTypes(directory, settings) {\r\n    const dirents = settings.fs.readdirSync(directory, { withFileTypes: true });\r\n    return dirents.map((dirent) => {\r\n        const entry = {\r\n            dirent,\r\n            name: dirent.name,\r\n            path: common.joinPathSegments(directory, dirent.name, settings.pathSegmentSeparator)\r\n        };\r\n        if (entry.dirent.isSymbolicLink() && settings.followSymbolicLinks) {\r\n            try {\r\n                const stats = settings.fs.statSync(entry.path);\r\n                entry.dirent = utils.fs.createDirentFromStats(entry.name, stats);\r\n            }\r\n            catch (error) {\r\n                if (settings.throwErrorOnBrokenSymbolicLink) {\r\n                    throw error;\r\n                }\r\n            }\r\n        }\r\n        return entry;\r\n    });\r\n}\r\nexports.readdirWithFileTypes = readdirWithFileTypes;\r\nfunction readdir(directory, settings) {\r\n    const names = settings.fs.readdirSync(directory);\r\n    return names.map((name) => {\r\n        const entryPath = common.joinPathSegments(directory, name, settings.pathSegmentSeparator);\r\n        const stats = fsStat.statSync(entryPath, settings.fsStatSettings);\r\n        const entry = {\r\n            name,\r\n            path: entryPath,\r\n            dirent: utils.fs.createDirentFromStats(name, stats)\r\n        };\r\n        if (settings.stats) {\r\n            entry.stats = stats;\r\n        }\r\n        return entry;\r\n    });\r\n}\r\nexports.readdir = readdir;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path = require(\"path\");\r\nconst fsStat = require(\"@nodelib/fs.stat\");\r\nconst fs = require(\"./adapters/fs\");\r\nclass Settings {\r\n    constructor(_options = {}) {\r\n        this._options = _options;\r\n        this.followSymbolicLinks = this._getValue(this._options.followSymbolicLinks, false);\r\n        this.fs = fs.createFileSystemAdapter(this._options.fs);\r\n        this.pathSegmentSeparator = this._getValue(this._options.pathSegmentSeparator, path.sep);\r\n        this.stats = this._getValue(this._options.stats, false);\r\n        this.throwErrorOnBrokenSymbolicLink = this._getValue(this._options.throwErrorOnBrokenSymbolicLink, true);\r\n        this.fsStatSettings = new fsStat.Settings({\r\n            followSymbolicLink: this.followSymbolicLinks,\r\n            fs: this.fs,\r\n            throwErrorOnBrokenSymbolicLink: this.throwErrorOnBrokenSymbolicLink\r\n        });\r\n    }\r\n    _getValue(option, value) {\r\n        return option !== null && option !== void 0 ? option : value;\r\n    }\r\n}\r\nexports.default = Settings;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.createFileSystemAdapter = exports.FILE_SYSTEM_ADAPTER = void 0;\r\nconst fs = require(\"fs\");\r\nexports.FILE_SYSTEM_ADAPTER = {\r\n    lstat: fs.lstat,\r\n    stat: fs.stat,\r\n    lstatSync: fs.lstatSync,\r\n    statSync: fs.statSync,\r\n    readdir: fs.readdir,\r\n    readdirSync: fs.readdirSync\r\n};\r\nfunction createFileSystemAdapter(fsMethods) {\r\n    if (fsMethods === undefined) {\r\n        return exports.FILE_SYSTEM_ADAPTER;\r\n    }\r\n    return Object.assign(Object.assign({}, exports.FILE_SYSTEM_ADAPTER), fsMethods);\r\n}\r\nexports.createFileSystemAdapter = createFileSystemAdapter;\r\n","'use strict'\n\nvar reusify = require('reusify')\n\nfunction fastqueue (context, worker, concurrency) {\n  if (typeof context === 'function') {\n    concurrency = worker\n    worker = context\n    context = null\n  }\n\n  if (concurrency < 1) {\n    throw new Error('fastqueue concurrency must be greater than 1')\n  }\n\n  var cache = reusify(Task)\n  var queueHead = null\n  var queueTail = null\n  var _running = 0\n  var errorHandler = null\n\n  var self = {\n    push: push,\n    drain: noop,\n    saturated: noop,\n    pause: pause,\n    paused: false,\n    concurrency: concurrency,\n    running: running,\n    resume: resume,\n    idle: idle,\n    length: length,\n    getQueue: getQueue,\n    unshift: unshift,\n    empty: noop,\n    kill: kill,\n    killAndDrain: killAndDrain,\n    error: error\n  }\n\n  return self\n\n  function running () {\n    return _running\n  }\n\n  function pause () {\n    self.paused = true\n  }\n\n  function length () {\n    var current = queueHead\n    var counter = 0\n\n    while (current) {\n      current = current.next\n      counter++\n    }\n\n    return counter\n  }\n\n  function getQueue () {\n    var current = queueHead\n    var tasks = []\n\n    while (current) {\n      tasks.push(current.value)\n      current = current.next\n    }\n\n    return tasks\n  }\n\n  function resume () {\n    if (!self.paused) return\n    self.paused = false\n    for (var i = 0; i < self.concurrency; i++) {\n      _running++\n      release()\n    }\n  }\n\n  function idle () {\n    return _running === 0 && self.length() === 0\n  }\n\n  function push (value, done) {\n    var current = cache.get()\n\n    current.context = context\n    current.release = release\n    current.value = value\n    current.callback = done || noop\n    current.errorHandler = errorHandler\n\n    if (_running === self.concurrency || self.paused) {\n      if (queueTail) {\n        queueTail.next = current\n        queueTail = current\n      } else {\n        queueHead = current\n        queueTail = current\n        self.saturated()\n      }\n    } else {\n      _running++\n      worker.call(context, current.value, current.worked)\n    }\n  }\n\n  function unshift (value, done) {\n    var current = cache.get()\n\n    current.context = context\n    current.release = release\n    current.value = value\n    current.callback = done || noop\n\n    if (_running === self.concurrency || self.paused) {\n      if (queueHead) {\n        current.next = queueHead\n        queueHead = current\n      } else {\n        queueHead = current\n        queueTail = current\n        self.saturated()\n      }\n    } else {\n      _running++\n      worker.call(context, current.value, current.worked)\n    }\n  }\n\n  function release (holder) {\n    if (holder) {\n      cache.release(holder)\n    }\n    var next = queueHead\n    if (next) {\n      if (!self.paused) {\n        if (queueTail === queueHead) {\n          queueTail = null\n        }\n        queueHead = next.next\n        next.next = null\n        worker.call(context, next.value, next.worked)\n        if (queueTail === null) {\n          self.empty()\n        }\n      } else {\n        _running--\n      }\n    } else if (--_running === 0) {\n      self.drain()\n    }\n  }\n\n  function kill () {\n    queueHead = null\n    queueTail = null\n    self.drain = noop\n  }\n\n  function killAndDrain () {\n    queueHead = null\n    queueTail = null\n    self.drain()\n    self.drain = noop\n  }\n\n  function error (handler) {\n    errorHandler = handler\n  }\n}\n\nfunction noop () {}\n\nfunction Task () {\n  this.value = null\n  this.callback = noop\n  this.next = null\n  this.release = noop\n  this.context = null\n  this.errorHandler = null\n\n  var self = this\n\n  this.worked = function worked (err, result) {\n    var callback = self.callback\n    var errorHandler = self.errorHandler\n    var val = self.value\n    self.value = null\n    self.callback = noop\n    if (self.errorHandler) {\n      errorHandler(err, val)\n    }\n    callback.call(self.context, err, result)\n    self.release(self)\n  }\n}\n\nfunction queueAsPromised (context, worker, concurrency) {\n  if (typeof context === 'function') {\n    concurrency = worker\n    worker = context\n    context = null\n  }\n\n  function asyncWrapper (arg, cb) {\n    worker.call(this, arg)\n      .then(function (res) {\n        cb(null, res)\n      }, cb)\n  }\n\n  var queue = fastqueue(context, asyncWrapper, concurrency)\n\n  var pushCb = queue.push\n  var unshiftCb = queue.unshift\n\n  queue.push = push\n  queue.unshift = unshift\n\n  return queue\n\n  function push (value) {\n    return new Promise(function (resolve, reject) {\n      pushCb(value, function (err, result) {\n        if (err) {\n          reject(err)\n          return\n        }\n        resolve(result)\n      })\n    })\n  }\n\n  function unshift (value) {\n    return new Promise(function (resolve, reject) {\n      unshiftCb(value, function (err, result) {\n        if (err) {\n          reject(err)\n          return\n        }\n        resolve(result)\n      })\n    })\n  }\n}\n\nmodule.exports = fastqueue\nmodule.exports.promise = queueAsPromised\n","'use strict'\n\nfunction reusify (Constructor) {\n  var head = new Constructor()\n  var tail = head\n\n  function get () {\n    var current = head\n\n    if (current.next) {\n      head = current.next\n    } else {\n      head = new Constructor()\n      tail = head\n    }\n\n    current.next = null\n\n    return current\n  }\n\n  function release (obj) {\n    tail.next = obj\n    tail = obj\n  }\n\n  return {\n    get: get,\n    release: release\n  }\n}\n\nmodule.exports = reusify\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst stream_1 = require(\"stream\");\r\nconst async_1 = require(\"../readers/async\");\r\nclass StreamProvider {\r\n    constructor(_root, _settings) {\r\n        this._root = _root;\r\n        this._settings = _settings;\r\n        this._reader = new async_1.default(this._root, this._settings);\r\n        this._stream = new stream_1.Readable({\r\n            objectMode: true,\r\n            read: () => { },\r\n            destroy: () => {\r\n                if (!this._reader.isDestroyed) {\r\n                    this._reader.destroy();\r\n                }\r\n            }\r\n        });\r\n    }\r\n    read() {\r\n        this._reader.onError((error) => {\r\n            this._stream.emit('error', error);\r\n        });\r\n        this._reader.onEntry((entry) => {\r\n            this._stream.push(entry);\r\n        });\r\n        this._reader.onEnd(() => {\r\n            this._stream.push(null);\r\n        });\r\n        this._reader.read();\r\n        return this._stream;\r\n    }\r\n}\r\nexports.default = StreamProvider;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst sync_1 = require(\"../readers/sync\");\r\nclass SyncProvider {\r\n    constructor(_root, _settings) {\r\n        this._root = _root;\r\n        this._settings = _settings;\r\n        this._reader = new sync_1.default(this._root, this._settings);\r\n    }\r\n    read() {\r\n        return this._reader.read();\r\n    }\r\n}\r\nexports.default = SyncProvider;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst fsScandir = require(\"@nodelib/fs.scandir\");\r\nconst common = require(\"./common\");\r\nconst reader_1 = require(\"./reader\");\r\nclass SyncReader extends reader_1.default {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._scandir = fsScandir.scandirSync;\r\n        this._storage = new Set();\r\n        this._queue = new Set();\r\n    }\r\n    read() {\r\n        this._pushToQueue(this._root, this._settings.basePath);\r\n        this._handleQueue();\r\n        return [...this._storage];\r\n    }\r\n    _pushToQueue(directory, base) {\r\n        this._queue.add({ directory, base });\r\n    }\r\n    _handleQueue() {\r\n        for (const item of this._queue.values()) {\r\n            this._handleDirectory(item.directory, item.base);\r\n        }\r\n    }\r\n    _handleDirectory(directory, base) {\r\n        try {\r\n            const entries = this._scandir(directory, this._settings.fsScandirSettings);\r\n            for (const entry of entries) {\r\n                this._handleEntry(entry, base);\r\n            }\r\n        }\r\n        catch (error) {\r\n            this._handleError(error);\r\n        }\r\n    }\r\n    _handleError(error) {\r\n        if (!common.isFatalError(this._settings, error)) {\r\n            return;\r\n        }\r\n        throw error;\r\n    }\r\n    _handleEntry(entry, base) {\r\n        const fullpath = entry.path;\r\n        if (base !== undefined) {\r\n            entry.path = common.joinPathSegments(base, entry.name, this._settings.pathSegmentSeparator);\r\n        }\r\n        if (common.isAppliedFilter(this._settings.entryFilter, entry)) {\r\n            this._pushToStorage(entry);\r\n        }\r\n        if (entry.dirent.isDirectory() && common.isAppliedFilter(this._settings.deepFilter, entry)) {\r\n            this._pushToQueue(fullpath, entry.path);\r\n        }\r\n    }\r\n    _pushToStorage(entry) {\r\n        this._storage.add(entry);\r\n    }\r\n}\r\nexports.default = SyncReader;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path = require(\"path\");\r\nconst fsScandir = require(\"@nodelib/fs.scandir\");\r\nclass Settings {\r\n    constructor(_options = {}) {\r\n        this._options = _options;\r\n        this.basePath = this._getValue(this._options.basePath, undefined);\r\n        this.concurrency = this._getValue(this._options.concurrency, Infinity);\r\n        this.deepFilter = this._getValue(this._options.deepFilter, null);\r\n        this.entryFilter = this._getValue(this._options.entryFilter, null);\r\n        this.errorFilter = this._getValue(this._options.errorFilter, null);\r\n        this.pathSegmentSeparator = this._getValue(this._options.pathSegmentSeparator, path.sep);\r\n        this.fsScandirSettings = new fsScandir.Settings({\r\n            followSymbolicLinks: this._options.followSymbolicLinks,\r\n            fs: this._options.fs,\r\n            pathSegmentSeparator: this._options.pathSegmentSeparator,\r\n            stats: this._options.stats,\r\n            throwErrorOnBrokenSymbolicLink: this._options.throwErrorOnBrokenSymbolicLink\r\n        });\r\n    }\r\n    _getValue(option, value) {\r\n        return option !== null && option !== void 0 ? option : value;\r\n    }\r\n}\r\nexports.default = Settings;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst utils = require(\"../../utils\");\r\nconst partial_1 = require(\"../matchers/partial\");\r\nclass DeepFilter {\r\n    constructor(_settings, _micromatchOptions) {\r\n        this._settings = _settings;\r\n        this._micromatchOptions = _micromatchOptions;\r\n    }\r\n    getFilter(basePath, positive, negative) {\r\n        const matcher = this._getMatcher(positive);\r\n        const negativeRe = this._getNegativePatternsRe(negative);\r\n        return (entry) => this._filter(basePath, entry, matcher, negativeRe);\r\n    }\r\n    _getMatcher(patterns) {\r\n        return new partial_1.default(patterns, this._settings, this._micromatchOptions);\r\n    }\r\n    _getNegativePatternsRe(patterns) {\r\n        const affectDepthOfReadingPatterns = patterns.filter(utils.pattern.isAffectDepthOfReadingPattern);\r\n        return utils.pattern.convertPatternsToRe(affectDepthOfReadingPatterns, this._micromatchOptions);\r\n    }\r\n    _filter(basePath, entry, matcher, negativeRe) {\r\n        if (this._isSkippedByDeep(basePath, entry.path)) {\r\n            return false;\r\n        }\r\n        if (this._isSkippedSymbolicLink(entry)) {\r\n            return false;\r\n        }\r\n        const filepath = utils.path.removeLeadingDotSegment(entry.path);\r\n        if (this._isSkippedByPositivePatterns(filepath, matcher)) {\r\n            return false;\r\n        }\r\n        return this._isSkippedByNegativePatterns(filepath, negativeRe);\r\n    }\r\n    _isSkippedByDeep(basePath, entryPath) {\r\n        /**\r\n         * Avoid unnecessary depth calculations when it doesn't matter.\r\n         */\r\n        if (this._settings.deep === Infinity) {\r\n            return false;\r\n        }\r\n        return this._getEntryLevel(basePath, entryPath) >= this._settings.deep;\r\n    }\r\n    _getEntryLevel(basePath, entryPath) {\r\n        const entryPathDepth = entryPath.split('/').length;\r\n        if (basePath === '') {\r\n            return entryPathDepth;\r\n        }\r\n        const basePathDepth = basePath.split('/').length;\r\n        return entryPathDepth - basePathDepth;\r\n    }\r\n    _isSkippedSymbolicLink(entry) {\r\n        return !this._settings.followSymbolicLinks && entry.dirent.isSymbolicLink();\r\n    }\r\n    _isSkippedByPositivePatterns(entryPath, matcher) {\r\n        return !this._settings.baseNameMatch && !matcher.match(entryPath);\r\n    }\r\n    _isSkippedByNegativePatterns(entryPath, patternsRe) {\r\n        return !utils.pattern.matchAny(entryPath, patternsRe);\r\n    }\r\n}\r\nexports.default = DeepFilter;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst matcher_1 = require(\"./matcher\");\r\nclass PartialMatcher extends matcher_1.default {\r\n    match(filepath) {\r\n        const parts = filepath.split('/');\r\n        const levels = parts.length;\r\n        const patterns = this._storage.filter((info) => !info.complete || info.segments.length > levels);\r\n        for (const pattern of patterns) {\r\n            const section = pattern.sections[0];\r\n            /**\r\n             * In this case, the pattern has a globstar and we must read all directories unconditionally,\r\n             * but only if the level has reached the end of the first group.\r\n             *\r\n             * fixtures/{a,b}/**\r\n             *  ^ true/false  ^ always true\r\n            */\r\n            if (!pattern.complete && levels > section.length) {\r\n                return true;\r\n            }\r\n            const match = parts.every((part, index) => {\r\n                const segment = pattern.segments[index];\r\n                if (segment.dynamic && segment.patternRe.test(part)) {\r\n                    return true;\r\n                }\r\n                if (!segment.dynamic && segment.pattern === part) {\r\n                    return true;\r\n                }\r\n                return false;\r\n            });\r\n            if (match) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nexports.default = PartialMatcher;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst utils = require(\"../../utils\");\r\nclass Matcher {\r\n    constructor(_patterns, _settings, _micromatchOptions) {\r\n        this._patterns = _patterns;\r\n        this._settings = _settings;\r\n        this._micromatchOptions = _micromatchOptions;\r\n        this._storage = [];\r\n        this._fillStorage();\r\n    }\r\n    _fillStorage() {\r\n        /**\r\n         * The original pattern may include `{,*,**,a/*}`, which will lead to problems with matching (unresolved level).\r\n         * So, before expand patterns with brace expansion into separated patterns.\r\n         */\r\n        const patterns = utils.pattern.expandPatternsWithBraceExpansion(this._patterns);\r\n        for (const pattern of patterns) {\r\n            const segments = this._getPatternSegments(pattern);\r\n            const sections = this._splitSegmentsIntoSections(segments);\r\n            this._storage.push({\r\n                complete: sections.length <= 1,\r\n                pattern,\r\n                segments,\r\n                sections\r\n            });\r\n        }\r\n    }\r\n    _getPatternSegments(pattern) {\r\n        const parts = utils.pattern.getPatternParts(pattern, this._micromatchOptions);\r\n        return parts.map((part) => {\r\n            const dynamic = utils.pattern.isDynamicPattern(part, this._settings);\r\n            if (!dynamic) {\r\n                return {\r\n                    dynamic: false,\r\n                    pattern: part\r\n                };\r\n            }\r\n            return {\r\n                dynamic: true,\r\n                pattern: part,\r\n                patternRe: utils.pattern.makeRe(part, this._micromatchOptions)\r\n            };\r\n        });\r\n    }\r\n    _splitSegmentsIntoSections(segments) {\r\n        return utils.array.splitWhen(segments, (segment) => segment.dynamic && utils.pattern.hasGlobStar(segment.pattern));\r\n    }\r\n}\r\nexports.default = Matcher;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst utils = require(\"../../utils\");\r\nclass EntryFilter {\r\n    constructor(_settings, _micromatchOptions) {\r\n        this._settings = _settings;\r\n        this._micromatchOptions = _micromatchOptions;\r\n        this.index = new Map();\r\n    }\r\n    getFilter(positive, negative) {\r\n        const positiveRe = utils.pattern.convertPatternsToRe(positive, this._micromatchOptions);\r\n        const negativeRe = utils.pattern.convertPatternsToRe(negative, this._micromatchOptions);\r\n        return (entry) => this._filter(entry, positiveRe, negativeRe);\r\n    }\r\n    _filter(entry, positiveRe, negativeRe) {\r\n        if (this._settings.unique && this._isDuplicateEntry(entry)) {\r\n            return false;\r\n        }\r\n        if (this._onlyFileFilter(entry) || this._onlyDirectoryFilter(entry)) {\r\n            return false;\r\n        }\r\n        if (this._isSkippedByAbsoluteNegativePatterns(entry.path, negativeRe)) {\r\n            return false;\r\n        }\r\n        const filepath = this._settings.baseNameMatch ? entry.name : entry.path;\r\n        const isMatched = this._isMatchToPatterns(filepath, positiveRe) && !this._isMatchToPatterns(entry.path, negativeRe);\r\n        if (this._settings.unique && isMatched) {\r\n            this._createIndexRecord(entry);\r\n        }\r\n        return isMatched;\r\n    }\r\n    _isDuplicateEntry(entry) {\r\n        return this.index.has(entry.path);\r\n    }\r\n    _createIndexRecord(entry) {\r\n        this.index.set(entry.path, undefined);\r\n    }\r\n    _onlyFileFilter(entry) {\r\n        return this._settings.onlyFiles && !entry.dirent.isFile();\r\n    }\r\n    _onlyDirectoryFilter(entry) {\r\n        return this._settings.onlyDirectories && !entry.dirent.isDirectory();\r\n    }\r\n    _isSkippedByAbsoluteNegativePatterns(entryPath, patternsRe) {\r\n        if (!this._settings.absolute) {\r\n            return false;\r\n        }\r\n        const fullpath = utils.path.makeAbsolute(this._settings.cwd, entryPath);\r\n        return utils.pattern.matchAny(fullpath, patternsRe);\r\n    }\r\n    _isMatchToPatterns(entryPath, patternsRe) {\r\n        const filepath = utils.path.removeLeadingDotSegment(entryPath);\r\n        return utils.pattern.matchAny(filepath, patternsRe);\r\n    }\r\n}\r\nexports.default = EntryFilter;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst utils = require(\"../../utils\");\r\nclass ErrorFilter {\r\n    constructor(_settings) {\r\n        this._settings = _settings;\r\n    }\r\n    getFilter() {\r\n        return (error) => this._isNonFatalError(error);\r\n    }\r\n    _isNonFatalError(error) {\r\n        return utils.errno.isEnoentCodeError(error) || this._settings.suppressErrors;\r\n    }\r\n}\r\nexports.default = ErrorFilter;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst utils = require(\"../../utils\");\r\nclass EntryTransformer {\r\n    constructor(_settings) {\r\n        this._settings = _settings;\r\n    }\r\n    getTransformer() {\r\n        return (entry) => this._transform(entry);\r\n    }\r\n    _transform(entry) {\r\n        let filepath = entry.path;\r\n        if (this._settings.absolute) {\r\n            filepath = utils.path.makeAbsolute(this._settings.cwd, filepath);\r\n            filepath = utils.path.unixify(filepath);\r\n        }\r\n        if (this._settings.markDirectories && entry.dirent.isDirectory()) {\r\n            filepath += '/';\r\n        }\r\n        if (!this._settings.objectMode) {\r\n            return filepath;\r\n        }\r\n        return Object.assign(Object.assign({}, entry), { path: filepath });\r\n    }\r\n}\r\nexports.default = EntryTransformer;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst stream_1 = require(\"stream\");\r\nconst stream_2 = require(\"../readers/stream\");\r\nconst provider_1 = require(\"./provider\");\r\nclass ProviderStream extends provider_1.default {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._reader = new stream_2.default(this._settings);\r\n    }\r\n    read(task) {\r\n        const root = this._getRootDirectory(task);\r\n        const options = this._getReaderOptions(task);\r\n        const source = this.api(root, task, options);\r\n        const destination = new stream_1.Readable({ objectMode: true, read: () => { } });\r\n        source\r\n            .once('error', (error) => destination.emit('error', error))\r\n            .on('data', (entry) => destination.emit('data', options.transform(entry)))\r\n            .once('end', () => destination.emit('end'));\r\n        destination\r\n            .once('close', () => source.destroy());\r\n        return destination;\r\n    }\r\n    api(root, task, options) {\r\n        if (task.dynamic) {\r\n            return this._reader.dynamic(root, options);\r\n        }\r\n        return this._reader.static(task.patterns, options);\r\n    }\r\n}\r\nexports.default = ProviderStream;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst sync_1 = require(\"../readers/sync\");\r\nconst provider_1 = require(\"./provider\");\r\nclass ProviderSync extends provider_1.default {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._reader = new sync_1.default(this._settings);\r\n    }\r\n    read(task) {\r\n        const root = this._getRootDirectory(task);\r\n        const options = this._getReaderOptions(task);\r\n        const entries = this.api(root, task, options);\r\n        return entries.map(options.transform);\r\n    }\r\n    api(root, task, options) {\r\n        if (task.dynamic) {\r\n            return this._reader.dynamic(root, options);\r\n        }\r\n        return this._reader.static(task.patterns, options);\r\n    }\r\n}\r\nexports.default = ProviderSync;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst fsStat = require(\"@nodelib/fs.stat\");\r\nconst fsWalk = require(\"@nodelib/fs.walk\");\r\nconst reader_1 = require(\"./reader\");\r\nclass ReaderSync extends reader_1.default {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._walkSync = fsWalk.walkSync;\r\n        this._statSync = fsStat.statSync;\r\n    }\r\n    dynamic(root, options) {\r\n        return this._walkSync(root, options);\r\n    }\r\n    static(patterns, options) {\r\n        const entries = [];\r\n        for (const pattern of patterns) {\r\n            const filepath = this._getFullEntryPath(pattern);\r\n            const entry = this._getEntry(filepath, pattern, options);\r\n            if (entry === null || !options.entryFilter(entry)) {\r\n                continue;\r\n            }\r\n            entries.push(entry);\r\n        }\r\n        return entries;\r\n    }\r\n    _getEntry(filepath, pattern, options) {\r\n        try {\r\n            const stats = this._getStat(filepath);\r\n            return this._makeEntry(stats, pattern);\r\n        }\r\n        catch (error) {\r\n            if (options.errorFilter(error)) {\r\n                return null;\r\n            }\r\n            throw error;\r\n        }\r\n    }\r\n    _getStat(filepath) {\r\n        return this._statSync(filepath, this._fsStatSettings);\r\n    }\r\n}\r\nexports.default = ReaderSync;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DEFAULT_FILE_SYSTEM_ADAPTER = void 0;\r\nconst fs = require(\"fs\");\r\nconst os = require(\"os\");\r\n/**\r\n * The `os.cpus` method can return zero. We expect the number of cores to be greater than zero.\r\n * https://github.com/nodejs/node/blob/7faeddf23a98c53896f8b574a6e66589e8fb1eb8/lib/os.js#L106-L107\r\n */\r\nconst CPU_COUNT = Math.max(os.cpus().length, 1);\r\nexports.DEFAULT_FILE_SYSTEM_ADAPTER = {\r\n    lstat: fs.lstat,\r\n    lstatSync: fs.lstatSync,\r\n    stat: fs.stat,\r\n    statSync: fs.statSync,\r\n    readdir: fs.readdir,\r\n    readdirSync: fs.readdirSync\r\n};\r\nclass Settings {\r\n    constructor(_options = {}) {\r\n        this._options = _options;\r\n        this.absolute = this._getValue(this._options.absolute, false);\r\n        this.baseNameMatch = this._getValue(this._options.baseNameMatch, false);\r\n        this.braceExpansion = this._getValue(this._options.braceExpansion, true);\r\n        this.caseSensitiveMatch = this._getValue(this._options.caseSensitiveMatch, true);\r\n        this.concurrency = this._getValue(this._options.concurrency, CPU_COUNT);\r\n        this.cwd = this._getValue(this._options.cwd, process.cwd());\r\n        this.deep = this._getValue(this._options.deep, Infinity);\r\n        this.dot = this._getValue(this._options.dot, false);\r\n        this.extglob = this._getValue(this._options.extglob, true);\r\n        this.followSymbolicLinks = this._getValue(this._options.followSymbolicLinks, true);\r\n        this.fs = this._getFileSystemMethods(this._options.fs);\r\n        this.globstar = this._getValue(this._options.globstar, true);\r\n        this.ignore = this._getValue(this._options.ignore, []);\r\n        this.markDirectories = this._getValue(this._options.markDirectories, false);\r\n        this.objectMode = this._getValue(this._options.objectMode, false);\r\n        this.onlyDirectories = this._getValue(this._options.onlyDirectories, false);\r\n        this.onlyFiles = this._getValue(this._options.onlyFiles, true);\r\n        this.stats = this._getValue(this._options.stats, false);\r\n        this.suppressErrors = this._getValue(this._options.suppressErrors, false);\r\n        this.throwErrorOnBrokenSymbolicLink = this._getValue(this._options.throwErrorOnBrokenSymbolicLink, false);\r\n        this.unique = this._getValue(this._options.unique, true);\r\n        if (this.onlyDirectories) {\r\n            this.onlyFiles = false;\r\n        }\r\n        if (this.stats) {\r\n            this.objectMode = true;\r\n        }\r\n    }\r\n    _getValue(option, value) {\r\n        return option === undefined ? value : option;\r\n    }\r\n    _getFileSystemMethods(methods = {}) {\r\n        return Object.assign(Object.assign({}, exports.DEFAULT_FILE_SYSTEM_ADAPTER), methods);\r\n    }\r\n}\r\nexports.default = Settings;\r\n","'use strict';\nconst path = require('path');\nconst pathType = require('path-type');\n\nconst getExtensions = extensions => extensions.length > 1 ? `{${extensions.join(',')}}` : extensions[0];\n\nconst getPath = (filepath, cwd) => {\n\tconst pth = filepath[0] === '!' ? filepath.slice(1) : filepath;\n\treturn path.isAbsolute(pth) ? pth : path.join(cwd, pth);\n};\n\nconst addExtensions = (file, extensions) => {\n\tif (path.extname(file)) {\n\t\treturn `**/${file}`;\n\t}\n\n\treturn `**/${file}.${getExtensions(extensions)}`;\n};\n\nconst getGlob = (directory, options) => {\n\tif (options.files && !Array.isArray(options.files)) {\n\t\tthrow new TypeError(`Expected \\`files\\` to be of type \\`Array\\` but received type \\`${typeof options.files}\\``);\n\t}\n\n\tif (options.extensions && !Array.isArray(options.extensions)) {\n\t\tthrow new TypeError(`Expected \\`extensions\\` to be of type \\`Array\\` but received type \\`${typeof options.extensions}\\``);\n\t}\n\n\tif (options.files && options.extensions) {\n\t\treturn options.files.map(x => path.posix.join(directory, addExtensions(x, options.extensions)));\n\t}\n\n\tif (options.files) {\n\t\treturn options.files.map(x => path.posix.join(directory, `**/${x}`));\n\t}\n\n\tif (options.extensions) {\n\t\treturn [path.posix.join(directory, `**/*.${getExtensions(options.extensions)}`)];\n\t}\n\n\treturn [path.posix.join(directory, '**')];\n};\n\nmodule.exports = async (input, options) => {\n\toptions = {\n\t\tcwd: process.cwd(),\n\t\t...options\n\t};\n\n\tif (typeof options.cwd !== 'string') {\n\t\tthrow new TypeError(`Expected \\`cwd\\` to be of type \\`string\\` but received type \\`${typeof options.cwd}\\``);\n\t}\n\n\tconst globs = await Promise.all([].concat(input).map(async x => {\n\t\tconst isDirectory = await pathType.isDirectory(getPath(x, options.cwd));\n\t\treturn isDirectory ? getGlob(x, options) : x;\n\t}));\n\n\treturn [].concat.apply([], globs); // eslint-disable-line prefer-spread\n};\n\nmodule.exports.sync = (input, options) => {\n\toptions = {\n\t\tcwd: process.cwd(),\n\t\t...options\n\t};\n\n\tif (typeof options.cwd !== 'string') {\n\t\tthrow new TypeError(`Expected \\`cwd\\` to be of type \\`string\\` but received type \\`${typeof options.cwd}\\``);\n\t}\n\n\tconst globs = [].concat(input).map(x => pathType.isDirectorySync(getPath(x, options.cwd)) ? getGlob(x, options) : x);\n\n\treturn [].concat.apply([], globs); // eslint-disable-line prefer-spread\n};\n","'use strict';\nconst {promisify} = require('util');\nconst fs = require('fs');\n\nasync function isType(fsStatType, statsMethodName, filePath) {\n\tif (typeof filePath !== 'string') {\n\t\tthrow new TypeError(`Expected a string, got ${typeof filePath}`);\n\t}\n\n\ttry {\n\t\tconst stats = await promisify(fs[fsStatType])(filePath);\n\t\treturn stats[statsMethodName]();\n\t} catch (error) {\n\t\tif (error.code === 'ENOENT') {\n\t\t\treturn false;\n\t\t}\n\n\t\tthrow error;\n\t}\n}\n\nfunction isTypeSync(fsStatType, statsMethodName, filePath) {\n\tif (typeof filePath !== 'string') {\n\t\tthrow new TypeError(`Expected a string, got ${typeof filePath}`);\n\t}\n\n\ttry {\n\t\treturn fs[fsStatType](filePath)[statsMethodName]();\n\t} catch (error) {\n\t\tif (error.code === 'ENOENT') {\n\t\t\treturn false;\n\t\t}\n\n\t\tthrow error;\n\t}\n}\n\nexports.isFile = isType.bind(null, 'stat', 'isFile');\nexports.isDirectory = isType.bind(null, 'stat', 'isDirectory');\nexports.isSymlink = isType.bind(null, 'lstat', 'isSymbolicLink');\nexports.isFileSync = isTypeSync.bind(null, 'statSync', 'isFile');\nexports.isDirectorySync = isTypeSync.bind(null, 'statSync', 'isDirectory');\nexports.isSymlinkSync = isTypeSync.bind(null, 'lstatSync', 'isSymbolicLink');\n","'use strict';\nconst {promisify} = require('util');\nconst fs = require('fs');\nconst path = require('path');\nconst fastGlob = require('fast-glob');\nconst gitIgnore = require('ignore');\nconst slash = require('slash');\n\nconst DEFAULT_IGNORE = [\n\t'**/node_modules/**',\n\t'**/flow-typed/**',\n\t'**/coverage/**',\n\t'**/.git'\n];\n\nconst readFileP = promisify(fs.readFile);\n\nconst mapGitIgnorePatternTo = base => ignore => {\n\tif (ignore.startsWith('!')) {\n\t\treturn '!' + path.posix.join(base, ignore.slice(1));\n\t}\n\n\treturn path.posix.join(base, ignore);\n};\n\nconst parseGitIgnore = (content, options) => {\n\tconst base = slash(path.relative(options.cwd, path.dirname(options.fileName)));\n\n\treturn content\n\t\t.split(/\\r?\\n/)\n\t\t.filter(Boolean)\n\t\t.filter(line => !line.startsWith('#'))\n\t\t.map(mapGitIgnorePatternTo(base));\n};\n\nconst reduceIgnore = files => {\n\tconst ignores = gitIgnore();\n\tfor (const file of files) {\n\t\tignores.add(parseGitIgnore(file.content, {\n\t\t\tcwd: file.cwd,\n\t\t\tfileName: file.filePath\n\t\t}));\n\t}\n\n\treturn ignores;\n};\n\nconst ensureAbsolutePathForCwd = (cwd, p) => {\n\tcwd = slash(cwd);\n\tif (path.isAbsolute(p)) {\n\t\tif (slash(p).startsWith(cwd)) {\n\t\t\treturn p;\n\t\t}\n\n\t\tthrow new Error(`Path ${p} is not in cwd ${cwd}`);\n\t}\n\n\treturn path.join(cwd, p);\n};\n\nconst getIsIgnoredPredecate = (ignores, cwd) => {\n\treturn p => ignores.ignores(slash(path.relative(cwd, ensureAbsolutePathForCwd(cwd, p.path || p))));\n};\n\nconst getFile = async (file, cwd) => {\n\tconst filePath = path.join(cwd, file);\n\tconst content = await readFileP(filePath, 'utf8');\n\n\treturn {\n\t\tcwd,\n\t\tfilePath,\n\t\tcontent\n\t};\n};\n\nconst getFileSync = (file, cwd) => {\n\tconst filePath = path.join(cwd, file);\n\tconst content = fs.readFileSync(filePath, 'utf8');\n\n\treturn {\n\t\tcwd,\n\t\tfilePath,\n\t\tcontent\n\t};\n};\n\nconst normalizeOptions = ({\n\tignore = [],\n\tcwd = slash(process.cwd())\n} = {}) => {\n\treturn {ignore, cwd};\n};\n\nmodule.exports = async options => {\n\toptions = normalizeOptions(options);\n\n\tconst paths = await fastGlob('**/.gitignore', {\n\t\tignore: DEFAULT_IGNORE.concat(options.ignore),\n\t\tcwd: options.cwd\n\t});\n\n\tconst files = await Promise.all(paths.map(file => getFile(file, options.cwd)));\n\tconst ignores = reduceIgnore(files);\n\n\treturn getIsIgnoredPredecate(ignores, options.cwd);\n};\n\nmodule.exports.sync = options => {\n\toptions = normalizeOptions(options);\n\n\tconst paths = fastGlob.sync('**/.gitignore', {\n\t\tignore: DEFAULT_IGNORE.concat(options.ignore),\n\t\tcwd: options.cwd\n\t});\n\n\tconst files = paths.map(file => getFileSync(file, options.cwd));\n\tconst ignores = reduceIgnore(files);\n\n\treturn getIsIgnoredPredecate(ignores, options.cwd);\n};\n","// A simple implementation of make-array\nfunction makeArray (subject) {\n  return Array.isArray(subject)\n    ? subject\n    : [subject]\n}\n\nconst EMPTY = ''\nconst SPACE = ' '\nconst ESCAPE = '\\\\'\nconst REGEX_TEST_BLANK_LINE = /^\\s+$/\nconst REGEX_REPLACE_LEADING_EXCAPED_EXCLAMATION = /^\\\\!/\nconst REGEX_REPLACE_LEADING_EXCAPED_HASH = /^\\\\#/\nconst REGEX_SPLITALL_CRLF = /\\r?\\n/g\n// /foo,\n// ./foo,\n// ../foo,\n// .\n// ..\nconst REGEX_TEST_INVALID_PATH = /^\\.*\\/|^\\.+$/\n\nconst SLASH = '/'\nconst KEY_IGNORE = typeof Symbol !== 'undefined'\n  ? Symbol.for('node-ignore')\n  /* istanbul ignore next */\n  : 'node-ignore'\n\nconst define = (object, key, value) =>\n  Object.defineProperty(object, key, {value})\n\nconst REGEX_REGEXP_RANGE = /([0-z])-([0-z])/g\n\n// Sanitize the range of a regular expression\n// The cases are complicated, see test cases for details\nconst sanitizeRange = range => range.replace(\n  REGEX_REGEXP_RANGE,\n  (match, from, to) => from.charCodeAt(0) <= to.charCodeAt(0)\n    ? match\n    // Invalid range (out of order) which is ok for gitignore rules but\n    //   fatal for JavaScript regular expression, so eliminate it.\n    : EMPTY\n)\n\n// See fixtures #59\nconst cleanRangeBackSlash = slashes => {\n  const {length} = slashes\n  return slashes.slice(0, length - length % 2)\n}\n\n// > If the pattern ends with a slash,\n// > it is removed for the purpose of the following description,\n// > but it would only find a match with a directory.\n// > In other words, foo/ will match a directory foo and paths underneath it,\n// > but will not match a regular file or a symbolic link foo\n// >  (this is consistent with the way how pathspec works in general in Git).\n// '`foo/`' will not match regular file '`foo`' or symbolic link '`foo`'\n// -> ignore-rules will not deal with it, because it costs extra `fs.stat` call\n//      you could use option `mark: true` with `glob`\n\n// '`foo/`' should not continue with the '`..`'\nconst REPLACERS = [\n\n  // > Trailing spaces are ignored unless they are quoted with backslash (\"\\\")\n  [\n    // (a\\ ) -> (a )\n    // (a  ) -> (a)\n    // (a \\ ) -> (a  )\n    /\\\\?\\s+$/,\n    match => match.indexOf('\\\\') === 0\n      ? SPACE\n      : EMPTY\n  ],\n\n  // replace (\\ ) with ' '\n  [\n    /\\\\\\s/g,\n    () => SPACE\n  ],\n\n  // Escape metacharacters\n  // which is written down by users but means special for regular expressions.\n\n  // > There are 12 characters with special meanings:\n  // > - the backslash \\,\n  // > - the caret ^,\n  // > - the dollar sign $,\n  // > - the period or dot .,\n  // > - the vertical bar or pipe symbol |,\n  // > - the question mark ?,\n  // > - the asterisk or star *,\n  // > - the plus sign +,\n  // > - the opening parenthesis (,\n  // > - the closing parenthesis ),\n  // > - and the opening square bracket [,\n  // > - the opening curly brace {,\n  // > These special characters are often called \"metacharacters\".\n  [\n    /[\\\\$.|*+(){^]/g,\n    match => `\\\\${match}`\n  ],\n\n  [\n    // > a question mark (?) matches a single character\n    /(?!\\\\)\\?/g,\n    () => '[^/]'\n  ],\n\n  // leading slash\n  [\n\n    // > A leading slash matches the beginning of the pathname.\n    // > For example, \"/*.c\" matches \"cat-file.c\" but not \"mozilla-sha1/sha1.c\".\n    // A leading slash matches the beginning of the pathname\n    /^\\//,\n    () => '^'\n  ],\n\n  // replace special metacharacter slash after the leading slash\n  [\n    /\\//g,\n    () => '\\\\/'\n  ],\n\n  [\n    // > A leading \"**\" followed by a slash means match in all directories.\n    // > For example, \"**/foo\" matches file or directory \"foo\" anywhere,\n    // > the same as pattern \"foo\".\n    // > \"**/foo/bar\" matches file or directory \"bar\" anywhere that is directly\n    // >   under directory \"foo\".\n    // Notice that the '*'s have been replaced as '\\\\*'\n    /^\\^*\\\\\\*\\\\\\*\\\\\\//,\n\n    // '**/foo' <-> 'foo'\n    () => '^(?:.*\\\\/)?'\n  ],\n\n  // starting\n  [\n    // there will be no leading '/'\n    //   (which has been replaced by section \"leading slash\")\n    // If starts with '**', adding a '^' to the regular expression also works\n    /^(?=[^^])/,\n    function startingReplacer () {\n      // If has a slash `/` at the beginning or middle\n      return !/\\/(?!$)/.test(this)\n        // > Prior to 2.22.1\n        // > If the pattern does not contain a slash /,\n        // >   Git treats it as a shell glob pattern\n        // Actually, if there is only a trailing slash,\n        //   git also treats it as a shell glob pattern\n\n        // After 2.22.1 (compatible but clearer)\n        // > If there is a separator at the beginning or middle (or both)\n        // > of the pattern, then the pattern is relative to the directory\n        // > level of the particular .gitignore file itself.\n        // > Otherwise the pattern may also match at any level below\n        // > the .gitignore level.\n        ? '(?:^|\\\\/)'\n\n        // > Otherwise, Git treats the pattern as a shell glob suitable for\n        // >   consumption by fnmatch(3)\n        : '^'\n    }\n  ],\n\n  // two globstars\n  [\n    // Use lookahead assertions so that we could match more than one `'/**'`\n    /\\\\\\/\\\\\\*\\\\\\*(?=\\\\\\/|$)/g,\n\n    // Zero, one or several directories\n    // should not use '*', or it will be replaced by the next replacer\n\n    // Check if it is not the last `'/**'`\n    (_, index, str) => index + 6 < str.length\n\n      // case: /**/\n      // > A slash followed by two consecutive asterisks then a slash matches\n      // >   zero or more directories.\n      // > For example, \"a/**/b\" matches \"a/b\", \"a/x/b\", \"a/x/y/b\" and so on.\n      // '/**/'\n      ? '(?:\\\\/[^\\\\/]+)*'\n\n      // case: /**\n      // > A trailing `\"/**\"` matches everything inside.\n\n      // #21: everything inside but it should not include the current folder\n      : '\\\\/.+'\n  ],\n\n  // intermediate wildcards\n  [\n    // Never replace escaped '*'\n    // ignore rule '\\*' will match the path '*'\n\n    // 'abc.*/' -> go\n    // 'abc.*'  -> skip this rule\n    /(^|[^\\\\]+)\\\\\\*(?=.+)/g,\n\n    // '*.js' matches '.js'\n    // '*.js' doesn't match 'abc'\n    (_, p1) => `${p1}[^\\\\/]*`\n  ],\n\n  [\n    // unescape, revert step 3 except for back slash\n    // For example, if a user escape a '\\\\*',\n    // after step 3, the result will be '\\\\\\\\\\\\*'\n    /\\\\\\\\\\\\(?=[$.|*+(){^])/g,\n    () => ESCAPE\n  ],\n\n  [\n    // '\\\\\\\\' -> '\\\\'\n    /\\\\\\\\/g,\n    () => ESCAPE\n  ],\n\n  [\n    // > The range notation, e.g. [a-zA-Z],\n    // > can be used to match one of the characters in a range.\n\n    // `\\` is escaped by step 3\n    /(\\\\)?\\[([^\\]/]*?)(\\\\*)($|\\])/g,\n    (match, leadEscape, range, endEscape, close) => leadEscape === ESCAPE\n      // '\\\\[bar]' -> '\\\\\\\\[bar\\\\]'\n      ? `\\\\[${range}${cleanRangeBackSlash(endEscape)}${close}`\n      : close === ']'\n        ? endEscape.length % 2 === 0\n          // A normal case, and it is a range notation\n          // '[bar]'\n          // '[bar\\\\\\\\]'\n          ? `[${sanitizeRange(range)}${endEscape}]`\n          // Invalid range notaton\n          // '[bar\\\\]' -> '[bar\\\\\\\\]'\n          : '[]'\n        : '[]'\n  ],\n\n  // ending\n  [\n    // 'js' will not match 'js.'\n    // 'ab' will not match 'abc'\n    /(?:[^*])$/,\n\n    // WTF!\n    // https://git-scm.com/docs/gitignore\n    // changes in [2.22.1](https://git-scm.com/docs/gitignore/2.22.1)\n    // which re-fixes #24, #38\n\n    // > If there is a separator at the end of the pattern then the pattern\n    // > will only match directories, otherwise the pattern can match both\n    // > files and directories.\n\n    // 'js*' will not match 'a.js'\n    // 'js/' will not match 'a.js'\n    // 'js' will match 'a.js' and 'a.js/'\n    match => /\\/$/.test(match)\n      // foo/ will not match 'foo'\n      ? `${match}$`\n      // foo matches 'foo' and 'foo/'\n      : `${match}(?=$|\\\\/$)`\n  ],\n\n  // trailing wildcard\n  [\n    /(\\^|\\\\\\/)?\\\\\\*$/,\n    (_, p1) => {\n      const prefix = p1\n        // '\\^':\n        // '/*' does not match EMPTY\n        // '/*' does not match everything\n\n        // '\\\\\\/':\n        // 'abc/*' does not match 'abc/'\n        ? `${p1}[^/]+`\n\n        // 'a*' matches 'a'\n        // 'a*' matches 'aa'\n        : '[^/]*'\n\n      return `${prefix}(?=$|\\\\/$)`\n    }\n  ],\n]\n\n// A simple cache, because an ignore rule only has only one certain meaning\nconst regexCache = Object.create(null)\n\n// @param {pattern}\nconst makeRegex = (pattern, negative, ignorecase) => {\n  const r = regexCache[pattern]\n  if (r) {\n    return r\n  }\n\n  // const replacers = negative\n  //   ? NEGATIVE_REPLACERS\n  //   : POSITIVE_REPLACERS\n\n  const source = REPLACERS.reduce(\n    (prev, current) => prev.replace(current[0], current[1].bind(pattern)),\n    pattern\n  )\n\n  return regexCache[pattern] = ignorecase\n    ? new RegExp(source, 'i')\n    : new RegExp(source)\n}\n\nconst isString = subject => typeof subject === 'string'\n\n// > A blank line matches no files, so it can serve as a separator for readability.\nconst checkPattern = pattern => pattern\n  && isString(pattern)\n  && !REGEX_TEST_BLANK_LINE.test(pattern)\n\n  // > A line starting with # serves as a comment.\n  && pattern.indexOf('#') !== 0\n\nconst splitPattern = pattern => pattern.split(REGEX_SPLITALL_CRLF)\n\nclass IgnoreRule {\n  constructor (\n    origin,\n    pattern,\n    negative,\n    regex\n  ) {\n    this.origin = origin\n    this.pattern = pattern\n    this.negative = negative\n    this.regex = regex\n  }\n}\n\nconst createRule = (pattern, ignorecase) => {\n  const origin = pattern\n  let negative = false\n\n  // > An optional prefix \"!\" which negates the pattern;\n  if (pattern.indexOf('!') === 0) {\n    negative = true\n    pattern = pattern.substr(1)\n  }\n\n  pattern = pattern\n  // > Put a backslash (\"\\\") in front of the first \"!\" for patterns that\n  // >   begin with a literal \"!\", for example, `\"\\!important!.txt\"`.\n  .replace(REGEX_REPLACE_LEADING_EXCAPED_EXCLAMATION, '!')\n  // > Put a backslash (\"\\\") in front of the first hash for patterns that\n  // >   begin with a hash.\n  .replace(REGEX_REPLACE_LEADING_EXCAPED_HASH, '#')\n\n  const regex = makeRegex(pattern, negative, ignorecase)\n\n  return new IgnoreRule(\n    origin,\n    pattern,\n    negative,\n    regex\n  )\n}\n\nconst throwError = (message, Ctor) => {\n  throw new Ctor(message)\n}\n\nconst checkPath = (path, originalPath, doThrow) => {\n  if (!isString(path)) {\n    return doThrow(\n      `path must be a string, but got \\`${originalPath}\\``,\n      TypeError\n    )\n  }\n\n  // We don't know if we should ignore EMPTY, so throw\n  if (!path) {\n    return doThrow(`path must not be empty`, TypeError)\n  }\n\n  // Check if it is a relative path\n  if (checkPath.isNotRelative(path)) {\n    const r = '`path.relative()`d'\n    return doThrow(\n      `path should be a ${r} string, but got \"${originalPath}\"`,\n      RangeError\n    )\n  }\n\n  return true\n}\n\nconst isNotRelative = path => REGEX_TEST_INVALID_PATH.test(path)\n\ncheckPath.isNotRelative = isNotRelative\ncheckPath.convert = p => p\n\nclass Ignore {\n  constructor ({\n    ignorecase = true\n  } = {}) {\n    this._rules = []\n    this._ignorecase = ignorecase\n    define(this, KEY_IGNORE, true)\n    this._initCache()\n  }\n\n  _initCache () {\n    this._ignoreCache = Object.create(null)\n    this._testCache = Object.create(null)\n  }\n\n  _addPattern (pattern) {\n    // #32\n    if (pattern && pattern[KEY_IGNORE]) {\n      this._rules = this._rules.concat(pattern._rules)\n      this._added = true\n      return\n    }\n\n    if (checkPattern(pattern)) {\n      const rule = createRule(pattern, this._ignorecase)\n      this._added = true\n      this._rules.push(rule)\n    }\n  }\n\n  // @param {Array<string> | string | Ignore} pattern\n  add (pattern) {\n    this._added = false\n\n    makeArray(\n      isString(pattern)\n        ? splitPattern(pattern)\n        : pattern\n    ).forEach(this._addPattern, this)\n\n    // Some rules have just added to the ignore,\n    // making the behavior changed.\n    if (this._added) {\n      this._initCache()\n    }\n\n    return this\n  }\n\n  // legacy\n  addPattern (pattern) {\n    return this.add(pattern)\n  }\n\n  //          |           ignored : unignored\n  // negative |   0:0   |   0:1   |   1:0   |   1:1\n  // -------- | ------- | ------- | ------- | --------\n  //     0    |  TEST   |  TEST   |  SKIP   |    X\n  //     1    |  TESTIF |  SKIP   |  TEST   |    X\n\n  // - SKIP: always skip\n  // - TEST: always test\n  // - TESTIF: only test if checkUnignored\n  // - X: that never happen\n\n  // @param {boolean} whether should check if the path is unignored,\n  //   setting `checkUnignored` to `false` could reduce additional\n  //   path matching.\n\n  // @returns {TestResult} true if a file is ignored\n  _testOne (path, checkUnignored) {\n    let ignored = false\n    let unignored = false\n\n    this._rules.forEach(rule => {\n      const {negative} = rule\n      if (\n        unignored === negative && ignored !== unignored\n        || negative && !ignored && !unignored && !checkUnignored\n      ) {\n        return\n      }\n\n      const matched = rule.regex.test(path)\n\n      if (matched) {\n        ignored = !negative\n        unignored = negative\n      }\n    })\n\n    return {\n      ignored,\n      unignored\n    }\n  }\n\n  // @returns {TestResult}\n  _test (originalPath, cache, checkUnignored, slices) {\n    const path = originalPath\n      // Supports nullable path\n      && checkPath.convert(originalPath)\n\n    checkPath(path, originalPath, throwError)\n\n    return this._t(path, cache, checkUnignored, slices)\n  }\n\n  _t (path, cache, checkUnignored, slices) {\n    if (path in cache) {\n      return cache[path]\n    }\n\n    if (!slices) {\n      // path/to/a.js\n      // ['path', 'to', 'a.js']\n      slices = path.split(SLASH)\n    }\n\n    slices.pop()\n\n    // If the path has no parent directory, just test it\n    if (!slices.length) {\n      return cache[path] = this._testOne(path, checkUnignored)\n    }\n\n    const parent = this._t(\n      slices.join(SLASH) + SLASH,\n      cache,\n      checkUnignored,\n      slices\n    )\n\n    // If the path contains a parent directory, check the parent first\n    return cache[path] = parent.ignored\n      // > It is not possible to re-include a file if a parent directory of\n      // >   that file is excluded.\n      ? parent\n      : this._testOne(path, checkUnignored)\n  }\n\n  ignores (path) {\n    return this._test(path, this._ignoreCache, false).ignored\n  }\n\n  createFilter () {\n    return path => !this.ignores(path)\n  }\n\n  filter (paths) {\n    return makeArray(paths).filter(this.createFilter())\n  }\n\n  // @returns {TestResult}\n  test (path) {\n    return this._test(path, this._testCache, true)\n  }\n}\n\nconst factory = options => new Ignore(options)\n\nconst returnFalse = () => false\n\nconst isPathValid = path =>\n  checkPath(path && checkPath.convert(path), path, returnFalse)\n\nfactory.isPathValid = isPathValid\n\n// Fixes typescript\nfactory.default = factory\n\nmodule.exports = factory\n\n// Windows\n// --------------------------------------------------------------\n/* istanbul ignore if  */\nif (\n  // Detect `process` so that it can run in browsers.\n  typeof process !== 'undefined'\n  && (\n    process.env && process.env.IGNORE_TEST_WIN32\n    || process.platform === 'win32'\n  )\n) {\n  /* eslint no-control-regex: \"off\" */\n  const makePosix = str => /^\\\\\\\\\\?\\\\/.test(str)\n  || /[\"<>|\\u0000-\\u001F]+/u.test(str)\n    ? str\n    : str.replace(/\\\\/g, '/')\n\n  checkPath.convert = makePosix\n\n  // 'C:\\\\foo'     <- 'C:\\\\foo' has been converted to 'C:/'\n  // 'd:\\\\foo'\n  const REGIX_IS_WINDOWS_PATH_ABSOLUTE = /^[a-z]:\\//i\n  checkPath.isNotRelative = path =>\n    REGIX_IS_WINDOWS_PATH_ABSOLUTE.test(path)\n    || isNotRelative(path)\n}\n","'use strict';\nmodule.exports = path => {\n\tconst isExtendedLengthPath = /^\\\\\\\\\\?\\\\/.test(path);\n\tconst hasNonAscii = /[^\\u0000-\\u0080]+/.test(path); // eslint-disable-line no-control-regex\n\n\tif (isExtendedLengthPath || hasNonAscii) {\n\t\treturn path;\n\t}\n\n\treturn path.replace(/\\\\/g, '/');\n};\n","'use strict';\nconst {Transform} = require('stream');\n\nclass ObjectTransform extends Transform {\n\tconstructor() {\n\t\tsuper({\n\t\t\tobjectMode: true\n\t\t});\n\t}\n}\n\nclass FilterStream extends ObjectTransform {\n\tconstructor(filter) {\n\t\tsuper();\n\t\tthis._filter = filter;\n\t}\n\n\t_transform(data, encoding, callback) {\n\t\tif (this._filter(data)) {\n\t\t\tthis.push(data);\n\t\t}\n\n\t\tcallback();\n\t}\n}\n\nclass UniqueStream extends ObjectTransform {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._pushed = new Set();\n\t}\n\n\t_transform(data, encoding, callback) {\n\t\tif (!this._pushed.has(data)) {\n\t\t\tthis.push(data);\n\t\t\tthis._pushed.add(data);\n\t\t}\n\n\t\tcallback();\n\t}\n}\n\nmodule.exports = {\n\tFilterStream,\n\tUniqueStream\n};\n","// @flow\n\n/**\n * Convert a string-keyed map to an object. Useful for conversion to\n * JSON. If a map's keys are not strings, consider invoking `mapKeys`\n * first.\n */\nexport function toObject<K: string, V, InK: K, InV: V>(\n  map: $ReadOnlyMap<InK, InV>\n): {|[K]: V|} {\n  const result: {|[K]: V|} = ({}: any);\n  for (const [k, v] of map.entries()) {\n    result[k] = v;\n  }\n  return result;\n}\n\n/**\n * Convert an object to a map. The resulting map will have key-value\n * pairs corresponding to the enumerable own properties of the object in\n * iteration order, as returned by `Object.keys`.\n */\nexport function fromObject<K, V, InK: K & string, InV: V>(object: {\n  +[InK]: InV,\n}): Map<K, V> {\n  const result = new Map();\n  const keys = (((Object.keys(object): string[]): any): InK[]);\n  for (const key of keys) {\n    result.set(key, object[key]);\n  }\n  return result;\n}\n\n/**\n * Shallow-copy a map, allowing upcasting its type parameters.\n *\n * The `Map` type constructor is not covariant in its type parameters,\n * which means that (e.g.) `Map<string, Dog>` is not a subtype of\n * `Map<string, Animal>` even if `Dog` is a subtype of `Animal`. This is\n * because, given a `Map<string, Animal>`, one can insert a `Cat`, which\n * would break invariants of existing references to the variable as a\n * map containing only `Dog`s.\n *\n *     declare class Animal {};\n *     declare class Dog extends Animal {};\n *     declare class Cat extends Animal {};\n *     declare var dogMap: Map<string, Dog>;\n *     const animalMap: Map<string, Animal> = dogMap;  // must fail\n *     animalMap.set(\"tabby\", new Cat());  // or we could do this...\n *     (dogMap.values(): Iterator<Dog>);  // ...now contains a `Cat`!\n *\n * This problem only exists when a map with existing references is\n * mutated. Therefore, when we shallow-copy a map, we have the\n * opportunity to upcast its type parameters: `copy(dogMap)` _can_ be a\n * `Map<string, Animal>`.\n */\nexport function copy<K, V, InK: K, InV: V>(\n  map: $ReadOnlyMap<InK, InV>\n): Map<K, V> {\n  const entries = map.entries();\n  return new Map((((entries: Iterator<[InK, InV]>): any): Iterator<[K, V]>));\n}\n\n/**\n * Map across the keys of a map. Note that the key-mapping function is\n * provided both the key and the value for each entry.\n *\n * The key-mapping function must be injective on the map's key set. If\n * it maps two distinct input keys to the same output key, an error may\n * be thrown.\n */\nexport function mapKeys<K, V, InK, InV: V>(\n  map: $ReadOnlyMap<InK, InV>,\n  f: (InK, InV) => K\n): Map<K, V> {\n  const result = new Map();\n  for (const [k, v] of map.entries()) {\n    const outK = f(k, v);\n    if (result.has(outK)) {\n      throw new Error(\"duplicate key: \" + String(outK));\n    }\n    result.set(outK, v);\n  }\n  return result;\n}\n\n/**\n * Map across the values of a map. Note that the value-mapping function\n * is provided both the key and the value for each entry.\n *\n * There are no restrictions on the value-mapping function (in\n * particular, it need not be injective).\n */\nexport function mapValues<K, V, InK: K, InV>(\n  map: $ReadOnlyMap<InK, InV>,\n  g: (InK, InV) => V\n): Map<K, V> {\n  const result = new Map();\n  for (const [k, v] of map.entries()) {\n    result.set(k, g(k, v));\n  }\n  return result;\n}\n\n/**\n * Map simultaneously across the keys and values of a map.\n *\n * The key-mapping function must be injective on the map's key set. If\n * it maps two distinct input keys to the same output key, an error may\n * be thrown. There are no such restrictions on the value-mapping\n * function.\n */\nexport function mapEntries<K, V, InK, InV>(\n  map: $ReadOnlyMap<InK, InV>,\n  h: (InK, InV) => [K, V]\n): Map<K, V> {\n  const result = new Map();\n  for (const [k, v] of map.entries()) {\n    const [outK, outV] = h(k, v);\n    if (result.has(outK)) {\n      throw new Error(\"duplicate key: \" + String(outK));\n    }\n    result.set(outK, outV);\n  }\n  return result;\n}\n\n/**\n * Merge maps without mutating the arguments.\n *\n * Merges multiple maps, returning a new map which has every key from\n * the source maps, with their corresponding values. None of the inputs\n * are mutated. In the event that multiple maps have the same key, an\n * error will be thrown.\n */\nexport function merge<K, V>(\n  maps: $ReadOnlyArray<$ReadOnlyMap<K, V>>\n): Map<K, V> {\n  const result = new Map();\n  let updates = 0;\n  for (const map of maps) {\n    for (const [key, value] of map.entries()) {\n      result.set(key, value);\n      if (result.size !== ++updates) {\n        throw new Error(`Maps have duplicate key: ${String(key)}`);\n      }\n    }\n  }\n  return result;\n}\n\n/**\n * Given a map whose values are arrays, push an element onto the array\n * corresponding to the given key. If the key is not in the map, first\n * insert it with value a new empty array.\n *\n * If the key is already in the map, its value will be mutated, not\n * replaced.\n */\nexport function pushValue<K, V>(map: Map<K, V[]>, key: K, value: V): V[] {\n  let arr = map.get(key);\n  if (arr == null) {\n    map.set(key, (arr = []));\n  }\n  arr.push(value);\n  return arr;\n}\n\n/**\n * Given a Map, transform its entries into an Array using a\n * provided transformer function.\n */\nexport function mapToArray<K, V, R>(\n  map: $ReadOnlyMap<K, V>,\n  fn: (pair: [K, V], index: number) => R\n): R[] {\n  return Array.from(map.entries()).map(fn);\n}\n","// @flow\n\n// Simple parser combinator library for structured types rather than\n// bytestring parsing.\n\nimport stringify from \"json-stable-stringify\";\n\nexport type JsonObject =\n  | string\n  | number\n  | boolean\n  | null\n  | $ReadOnlyArray<JsonObject>\n  | {+[string]: JsonObject};\n\nexport type ParseResult<+T> =\n  | {|+ok: true, +value: T|}\n  | {|+ok: false, +err: string|};\n\nexport class Parser<+T> {\n  +_f: (JsonObject) => ParseResult<T>;\n  // Phantom data for the output type of this parser. Used to more\n  // reliably match on parsers at the type level, via `$PropertyType`\n  // rather than `$Call`. Not populated at runtime; do not dereference.\n  +_phantomT: T;\n\n  constructor(f: (JsonObject) => ParseResult<T>) {\n    this._f = f;\n  }\n\n  parse(raw: JsonObject): ParseResult<T> {\n    return this._f(raw);\n  }\n\n  parseOrThrow(raw: JsonObject): T {\n    const result = this.parse(raw);\n    if (result.ok) {\n      return result.value;\n    } else {\n      throw new Error(result.err);\n    }\n  }\n  fmap<U>(f: (T) => U): Parser<U> {\n    return fmap(this, f);\n  }\n}\n\n// Helper type to extract the underlying type of a parser: for instance,\n// `ParserOutput<Parser<string>>` is just `string`.\nexport type ParserOutput<P: Parser<mixed>> = $PropertyType<P, \"_phantomT\">;\ntype ExtractParserOutput = <P: Parser<mixed>>(P) => ParserOutput<P>;\n\n// Helper to make a successful parse result. For readability.\nfunction success<T>(t: T): ParseResult<T> {\n  return {ok: true, value: t};\n}\n\n// Helper to make a failed parse result. For readability.\nfunction failure(err: string): ParseResult<empty> {\n  return {ok: false, err};\n}\n\n// Helper to nicely render a JSON object's typename, accounting for\n// nulls and arrays.\nfunction typename(x: JsonObject): string {\n  if (x === null) {\n    return \"null\";\n  }\n  if (Array.isArray(x)) {\n    return \"array\";\n  }\n  return typeof x;\n}\n\nexport const string: Parser<string> = new Parser((x) => {\n  if (typeof x !== \"string\") {\n    return failure(\"expected string, got \" + typename(x));\n  }\n  return success(x);\n});\n\nexport const number: Parser<number> = new Parser((x) => {\n  if (typeof x !== \"number\") {\n    return failure(\"expected number, got \" + typename(x));\n  }\n  return success(x);\n});\n\nexport const integer: Parser<number> = new Parser((x) => {\n  if (typeof x !== \"number\" || Math.floor(x) !== x) {\n    return failure(\"expected integer, got \" + typename(x));\n  }\n  return success(x);\n});\n\nexport const boolean: Parser<boolean> = new Parser((x) => {\n  if (typeof x !== \"boolean\") {\n    return failure(\"expected boolean, got \" + typename(x));\n  }\n  return success(x);\n});\n\n// Parser that only accepts a literal `null`. (Called `null_` rather\n// than `null` to avoid conflicting with keyword.)\nexport const null_: Parser<null> = new Parser((x) => {\n  if (x !== null) {\n    return failure(\"expected null, got \" + typename(x));\n  }\n  return success(x);\n});\n\n// The identity operation: a parser that always succeeds, emitting a\n// `JsonObject` (not `any`) with the input. Used when you need a parser\n// that matches anything:\n//\n//    // Accepts an arbitrary heterogeneous array and returns its length\n//    C.fmap(C.array(C.raw), (a) => a.length)\n//\n//    // Accepts a config file with dynamic plugin-specific data\n//    C.object({version: string, pluginConfig: C.dict(C.raw)})\n//\n// To destructure the parsed value dynamically, pair with `fmap`.\nexport const raw: Parser<JsonObject> = new Parser(success);\n\n// Lift a plain value into a parser that always returns that value,\n// ignoring its input.\nexport function pure<T>(t: T): Parser<T> {\n  return new Parser((_) => success(t));\n}\n\n// Create a parser that accepts any value from a fixed set. This can be\n// used for enumerated values in configs:\n//\n//    type Environment = \"dev\" | \"prod\";\n//    const p: C.Parser<Environment> = C.exactly([\"dev\", \"prod\"]);\n//\n// This function only supports value types. Performing an `any`-cast\n// guarded by a deep equality check would be unsound, breaking opaque\n// type boundaries: e.g., a module could `export opaque type T = {}` and\n// provide two constants `ONE = {}` and `TWO = {}` (different objects),\n// and then expect that any value of type `T` would be identical to\n// either `ONE` or `TWO`. Using strict reference equality for array and\n// object types would be sound, but would not usually be what was\n// wanted, as it wouldn't match ~any actual output of `JSON.parse`.\nexport function exactly<T: string | number | boolean | null>(\n  ts: $ReadOnlyArray<T>\n): Parser<T> {\n  return new Parser((x) => {\n    for (const t of ts) {\n      if (x === t) {\n        return success(t);\n      }\n    }\n    const expected: string =\n      ts.length === 1 ? String(ts[0]) : `one of ${JSON.stringify(ts)}`;\n    return failure(`expected ${expected}, got ${typename(x)}`);\n  });\n}\n\n// Transform the output of a parser with a pure function. For instance,\n// if `p: Parser<number>` and `f = (n: number) => n % 2 === 0`, then\n// `fmap(p, f)` is a `Parser<boolean>` that first uses `p` to parse its\n// input to a number and then checks whether the number is even.\n//\n// If the function `f` throws, the thrown value will be converted to\n// string and returned as a parse error. (The string conversion takes\n// `e.message` if the thrown value `e` is an `Error`, else just converts\n// with the `String` builtin.)\n//\n// This can be used for \"strong validation\". If `U` is a (possibly\n// opaque) subtype of `T`, and `f: (T) => U` is a checked downcast that\n// either returns a `U` or throws an error, then `fmap` can transform a\n// `Parser<T>` into a validating `Parser<U>`, where the fact that the\n// validation has been performed is encoded at the type level. Thus:\n//\n//    import * as C from \".../combo\";\n//    import {NodeAddress, type NodeAddressT} from \".../core/graph\";\n//\n//    const addressParser: Parser<NodeAddressT> =\n//      C.fmap(C.array(C.string), NodeAddress.fromParts);\n//\n// As a degenerate case, it can also be used for \"weak validation\",\n// where the types `T` and `U` are the same and the function `f` simply\n// returns its argument or throws, but in this case there is nothing\n// preventing a user of a `Parser<T>` from simply forgetting to\n// validate. Prefer strong validation when possible.\nexport function fmap<T, U>(p: Parser<T>, f: (T) => U): Parser<U> {\n  return new Parser((x) => {\n    const maybeT = p.parse(x);\n    if (!maybeT.ok) {\n      return failure(maybeT.err);\n    }\n    const t = maybeT.value;\n    let u: U;\n    try {\n      u = f(t);\n    } catch (e) {\n      if (e instanceof Error) {\n        return failure(e.message);\n      } else {\n        return failure(String(e));\n      }\n    }\n    return success(u);\n  });\n}\n\n// replacer for stringify.JSON, in order to replace empty array with just `[]`.\n//\n// this replacer function can be extended and universally be used with other\n// aspect like empty objects.\nfunction emptyArrayReplacer(key: string, value: any) {\n  // check if the array is empty.\n  if (Array.isArray(value) && value.length === 0) {\n    return [];\n  }\n\n  return value;\n}\n\n// Create a parser that tries each of the given parsers on the same\n// input, taking the first successful parse or failing if all parsers\n// fail. In the failure case, the provided `errorFn` will be called with\n// the error messages from all the sub-parsers to form the resulting\n// error; the default error function includes the full text of all the\n// error messages, but a user-supplied error function may act with\n// domain-specific precision.\n//\n// One use case is for parsing unions, including discriminated unions:\n//\n//    type Expr =\n//      | {|+type: \"CONSTANT\", +value: number|}\n//      | {|+type: \"VARIABLE\", +name: string|};\n//    const exprParser: C.Parser<Expr> = C.orElse([\n//      C.fmap(C.number, (value) => ({type: \"CONSTANT\", value})),\n//      C.fmap(C.string, (name) => ({type: \"VARIABLE\", name})),\n//    ]);\n//\n// Another is to use `pure` to provide a default value:\n//\n//    const lenientNumber: C.Parser<number | \"(unknown)\"> = C.orElse([\n//      C.number,\n//      C.pure(\"(unknown)\"),\n//    ]);\n//\n// This last parser will always succeed, because `C.pure(v)` always\n// succeeds and always returns `v`.\nexport function orElse<T: $ReadOnlyArray<Parser<mixed>>>(\n  parsers: T,\n  errorFn?: (string[]) => string = (errors) =>\n    `no parse matched: ${stringify(errors, {\n      replacer: emptyArrayReplacer,\n      spacer: 4,\n    })}`\n): Parser<$ElementType<$TupleMap<T, ExtractParserOutput>, number>> {\n  return new Parser((x) => {\n    const errors = [];\n    for (const parser of parsers) {\n      const result = parser.parse(x);\n      if (result.ok) {\n        return success((result.value: any));\n      } else {\n        errors.push(result.err);\n      }\n    }\n    return failure(errorFn(errors));\n  });\n}\n\nexport function array<T>(p: Parser<T>): Parser<T[]> {\n  return new Parser((x) => {\n    if (!Array.isArray(x)) {\n      return failure(\"expected array, got \" + typename(x));\n    }\n    const result = Array(x.length);\n    for (let i = 0; i < result.length; i++) {\n      const raw = x[i];\n      const parsed = p.parse(raw);\n      if (!parsed.ok) {\n        return failure(`index ${i}: ${parsed.err}`);\n      }\n      result[i] = parsed.value;\n    }\n    return success(result);\n  });\n}\n\n// Fields for an object type. Each is either a bare parser or the result\n// of `rename(\"oldFieldName\", p)` for a parser `p`, to be used when the\n// field name in the output type is to be different from the field name\n// in the input type.\nexport type Field<+T> = Parser<T> | RenameField<T>;\nexport opaque type RenameField<+T>: {+_phantomT: T} = RenameFieldImpl<T>;\nexport type Fields = {+[string]: Field<mixed>};\n\n// Like `ExtractParserOutput`, but works on `Field`s even when the\n// bound ascription is checked outside of this module.\ntype FieldOutput<F: Field<mixed>> = $PropertyType<F, \"_phantomT\">;\ntype ExtractFieldOutput = <F: Field<mixed>>(F) => FieldOutput<F>;\n\nexport function rename<T>(oldKey: string, parser: Parser<T>): RenameField<T> {\n  return new RenameFieldImpl(oldKey, parser);\n}\n\nclass RenameFieldImpl<+T> extends Parser<T> {\n  +oldKey: string;\n\n  constructor(oldKey: string, parser: Parser<T>) {\n    super(parser._f);\n    this.oldKey = oldKey;\n  }\n}\n\n// Parser combinator for an object type all of whose fields are\n// required.\ntype PObjectAllRequired = <FReq: Fields>(\n  required: FReq\n) => Parser<$ObjMap<FReq, ExtractFieldOutput>>;\n\n// Parser combinator for an object type with some required fields (maybe\n// none) and some optional ones.\ntype PObjectWithOptionals = <FReq: Fields, FOpt: Fields>(\n  required: FReq,\n  optional: FOpt\n) => Parser<\n  $Exact<{\n    ...$Exact<$ObjMap<FReq, ExtractFieldOutput>>,\n    ...$Rest<$Exact<$ObjMap<FOpt, ExtractFieldOutput>>, {}>,\n  }>\n>;\n\n// Parser combinator for an object type where all fields are optional.\n// Special case of `PObjectWithOptionals`.\ntype PObjectShape = <FOpt: Fields>(\n  optional: FOpt\n) => Parser<$Rest<$Exact<$ObjMap<FOpt, ExtractFieldOutput>>, {}>>;\n\n// Parser combinator for an object type with some required fields (maybe\n// none) and maybe some optional ones. (This is an intersection type\n// rather than a normal function with optional second argument to force\n// inference to pick a branch based on arity rather than inferring an\n// `empty` type.)\ntype PObject = PObjectAllRequired & PObjectWithOptionals;\n\n// Create a parser for an object type, with required fields and\n// (optionally) optional fields. The returned parser will silently drop\n// extraneous fields on values that it parses, to facilitate forward and\n// backward compatibility.\nexport const object: PObject = (function object(\n  requiredFields,\n  optionalFields?\n) {\n  const newKeysSeen = new Set();\n  const fields: Array<{|\n    +oldKey: string,\n    +newKey: string,\n    +required: boolean,\n    +parser: Parser<mixed>,\n  |}> = [];\n  const fieldsets = [\n    {inputFields: requiredFields, required: true},\n    {inputFields: optionalFields || {}, required: false},\n  ];\n  for (const {inputFields, required} of fieldsets) {\n    for (const newKey of Object.keys(inputFields)) {\n      const parser = inputFields[newKey];\n      if (newKeysSeen.has(newKey)) {\n        throw new Error(\"duplicate key: \" + JSON.stringify(newKey));\n      }\n      newKeysSeen.add(newKey);\n      const oldKey = parser instanceof RenameFieldImpl ? parser.oldKey : newKey;\n      fields.push({oldKey, newKey, parser, required});\n    }\n  }\n  return new Parser((x) => {\n    if (typeof x !== \"object\" || Array.isArray(x) || x == null) {\n      return failure(\"expected object, got \" + typename(x));\n    }\n    const result = {};\n    for (const {oldKey, newKey, parser, required} of fields) {\n      const raw = x[oldKey];\n      if (raw === undefined) {\n        if (required) {\n          return failure(\"missing key: \" + JSON.stringify(oldKey));\n        } else {\n          continue;\n        }\n      }\n      const parsed = parser.parse(raw);\n      if (!parsed.ok) {\n        return failure(`key ${JSON.stringify(oldKey)}: ${parsed.err}`);\n      }\n      result[newKey] = parsed.value;\n    }\n    return success(result);\n  });\n}: any);\n\n// Create a parser for an object type all of whose fields are optional.\n// Shorthand for `object` with an empty first argument.\nexport const shape: PObjectShape = function shape(fields) {\n  return object({}, fields);\n};\n\n// Create a parser for a tuple: a fixed-length array with possibly\n// heterogeneous element types. For instance,\n//\n//    C.tuple([C.string, C.number, C.boolean])\n//\n// is a parser that accepts length-3 arrays whose first element is a\n// string, second element is a number, and third element is a boolean.\nexport function tuple<T: Iterable<Parser<mixed>>>(\n  parsers: T\n): Parser<$TupleMap<T, ExtractParserOutput>> {\n  const ps = Array.from(parsers);\n  return new Parser((x) => {\n    if (!Array.isArray(x)) {\n      return failure(\"expected array, got \" + typename(x));\n    }\n    if (x.length !== ps.length) {\n      return failure(`expected array of length ${ps.length}, got ${x.length}`);\n    }\n    const result = Array(ps.length);\n    for (let i = 0; i < result.length; i++) {\n      const raw = x[i];\n      const parser = ps[i];\n      const parsed = parser.parse(raw);\n      if (!parsed.ok) {\n        return failure(`index ${i}: ${parsed.err}`);\n      }\n      result[i] = parsed.value;\n    }\n    return success(result);\n  });\n}\n\n// Parser combinator for a dictionary whose keys are arbitrary strings.\ntype PDictStringKey = <V>(Parser<V>) => Parser<{|[string]: V|}>;\n// Parser combinator for a dictionary whose keys are a specified subtype\n// of string.\ntype PDictCustomKey = <V, K: string>(\n  Parser<V>,\n  Parser<K>\n) => Parser<{|[K]: V|}>;\ntype PDict = PDictStringKey & PDictCustomKey;\n\n// Create a parser for objects with arbitrary string keys and\n// homogeneous values. For instance, a set of package versions:\n//\n//    {\"better-sqlite3\": \"^7.0.0\", \"react\": \"^16.13.0\"}\n//\n// might be parsed by the following parser:\n//\n//    C.dict(C.fmap(C.string, (s) => SemVer.parse(s)))\n//\n// Objects may have any number of entries, including zero.\n//\n// An optional second argument may be passed to refine the keys to a\n// subtype of `string`, such as an opaque subtype (`NodeAddressT`) or a\n// string enum (`\"ONE\" | \"TWO\"`). Fails if the key parser gives the same\n// output for two distinct keys.\nexport const dict: PDict = (function dict<V, K: string>(\n  valueParser,\n  keyParser: Parser<K> = (string: any) // safe when called as `PDict`\n): Parser<{[K]: V}> {\n  return new Parser((x) => {\n    if (typeof x !== \"object\" || Array.isArray(x) || x == null) {\n      return failure(\"expected object, got \" + typename(x));\n    }\n    const rawKeys: Map<K, string> = new Map();\n    const result: {|[K]: V|} = ({}: any);\n    for (const rawKey of Object.keys(x)) {\n      const parsedKey = keyParser.parse(rawKey);\n      if (!parsedKey.ok) {\n        return failure(`key ${JSON.stringify(rawKey)}: ${parsedKey.err}`);\n      }\n      const oldRawKey = rawKeys.get(parsedKey.value);\n      if (oldRawKey != null) {\n        const s = JSON.stringify;\n        return failure(\n          `conflicting keys ${s(oldRawKey)} and ${s(rawKey)} ` +\n            `both have logical key ${s(parsedKey.value)}`\n        );\n      }\n      rawKeys.set(parsedKey.value, rawKey);\n      const rawValue = x[rawKey];\n      const parsedValue = valueParser.parse(rawValue);\n      if (!parsedValue.ok) {\n        return failure(`value ${JSON.stringify(rawKey)}: ${parsedValue.err}`);\n      }\n      result[parsedKey.value] = parsedValue.value;\n    }\n    return success(result);\n  });\n}: any);\n\nexport const delimited: (string) => Parser<string> = (delimiter) =>\n  fmap(string, (s) => s.split(delimiter)[0]);\n","// @flow\n\nimport stringify from \"json-stable-stringify\";\nimport deepFreeze from \"deep-freeze\";\n\nimport * as MapUtil from \"../util/map\";\nimport * as C from \"../util/combo\";\n\nexport interface AddressModule<Address: string> {\n  /**\n   * Assert at runtime that the provided address is actually a valid\n   * address of this kind, throwing an error if it is not. If `what` is\n   * provided, it will be included in the error message.\n   */\n  assertValid(address: Address, what?: string): void;\n\n  /**\n   * Assert at runtime that the provided array is a valid array of\n   * address parts (i.e., a valid input to `fromParts`), throwing an\n   * error if it is not. If `what` is provided, it will be included in\n   * the error message.\n   */\n  assertValidParts(parts: $ReadOnlyArray<string>, what?: string): void;\n\n  /**\n   * The empty address (the identity for `append`). Equivalent to\n   * `fromParts([])`.\n   */\n  empty: Address;\n\n  /**\n   * Convert an array of address parts to an address. The input must be\n   * a non-null array of non-null strings, none of which contains the\n   * NUL character. This is the inverse of `toParts`.\n   */\n  fromParts(parts: $ReadOnlyArray<string>): Address;\n\n  /**\n   * Convert an address to the array of parts that it represents. This\n   * is the inverse of `fromParts`.\n   */\n  toParts(address: Address): string[];\n\n  /**\n   * Pretty-print an address. The result will be human-readable and\n   * contain only printable characters. Clients should not make any\n   * assumptions about the format.\n   */\n  toString(address: Address): string;\n\n  /**\n   * Construct an address by extending the given address with the given\n   * additional components. This function is equivalent to:\n   *\n   *     return fromParts([...toParts(address), ...components]);\n   *\n   * but may be more efficient.\n   */\n  append(address: Address, ...components: string[]): Address;\n\n  /**\n   * Test whether the given address has the given prefix. This function\n   * is equivalent to:\n   *\n   *     const prefixParts = toParts(prefix);\n   *     const addressParts = toParts(address);\n   *     const actualPrefix = addressParts.slice(0, prefixParts.length);\n   *     return deepEqual(prefix, actualPrefix);\n   *\n   * (where `deepEqual` checks value equality on arrays of strings), but\n   * may be more efficient.\n   *\n   * Note that this is an array-wise prefix, not a string-wise-prefix:\n   * e.g., `toParts([\"ban\"])` is not a prefix of `toParts([\"banana\"])`.\n   */\n  hasPrefix(address: Address, prefix: Address): boolean;\n\n  /**\n   * Interpret the provided string as an Address.\n   *\n   * Addresses are natively stored as strings. This method verifies\n   * that the provided \"raw\" address is actually an Address, so that\n   * you can have a type-level assurance that a string is an Address.\n   *\n   * This is useful if e.g. you are loading serialized Addresses.\n   *\n   * Throws an error if the string is not a valid Address.\n   */\n  fromRaw(raw: string): Address;\n\n  /**\n   * A parser for Addresses.\n   *\n   * Convenience wrapper `fromRaw`.\n   */\n  parser: C.Parser<Address>;\n}\n\nexport type Options = {|\n  /**\n   * The name of this kind of address, like `NodeAddress`.\n   */\n  +name: string,\n\n  /**\n   * A unique nonce for the runtime representation of this address. For\n   * compact serialization, this should be short; a single letter\n   * suffices.\n   */\n  +nonce: string,\n\n  /**\n   * For the purposes of nice error messages: in response to an address\n   * of the wrong kind, we can inform the user what kind of address they\n   * passed (e.g., \"expected NodeAddress, got EdgeAddress\"). This\n   * dictionary maps another address module's nonce to the name of that\n   * module.\n   */\n  +otherNonces?: Map<string, string>,\n|};\n\nexport function makeAddressModule(options: Options): AddressModule<string> {\n  type Address = string; // for readability and interface consistency\n  const {name, nonce} = options;\n  const otherNonces = new Map(options.otherNonces || new Map());\n\n  const separator = \"\\0\";\n  if (nonce.indexOf(separator) !== -1) {\n    throw new Error(`invalid nonce (contains NUL): ${stringify(nonce)}`);\n  }\n\n  const nonceWithSeparator = nonce + separator;\n  const otherNoncesWithSeparators = MapUtil.mapKeys(\n    otherNonces,\n    (otherNonce) => {\n      if (otherNonce === nonce) {\n        throw new Error(\n          `primary nonce listed as otherNonce: ${stringify(nonce)}`\n        );\n      }\n      if (otherNonce.indexOf(separator) !== -1) {\n        throw new Error(\n          `invalid otherNonce (contains NUL): ${stringify(otherNonce)}`\n        );\n      }\n      return otherNonce + separator;\n    }\n  );\n\n  function assertValid(address: Address, what?: string): void {\n    // istanbul ignore if\n    if (process.env.NODE_ENV !== \"test\") {\n      // Catching invalid addresses in test code should be sufficient\n      return;\n    }\n    const prefix = what == null ? \"\" : `${what}: `;\n    if (address == null) {\n      throw new Error(prefix + `expected ${name}, got: ${String(address)}`);\n    }\n    if (!address.endsWith(separator)) {\n      throw new Error(prefix + `expected ${name}, got: ${stringify(address)}`);\n    }\n    if (!address.startsWith(nonceWithSeparator)) {\n      for (const [\n        otherNonceWithSeparator,\n        otherName,\n      ] of otherNoncesWithSeparators) {\n        if (address.startsWith(otherNonceWithSeparator)) {\n          throw new Error(\n            prefix + `expected ${name}, got ${otherName}: ${stringify(address)}`\n          );\n        }\n      }\n      throw new Error(prefix + `expected ${name}, got: ${stringify(address)}`);\n    }\n  }\n\n  function partsString(parts: $ReadOnlyArray<string>): string {\n    // This is needed to properly print arrays containing `undefined`.\n    return \"[\" + parts.map((p) => String(stringify(p))).join(\",\") + \"]\";\n  }\n\n  function assertValidParts(\n    parts: $ReadOnlyArray<string>,\n    what?: string\n  ): void {\n    // istanbul ignore if\n    if (process.env.NODE_ENV !== \"test\") {\n      // Catching invalid parts in test code should be sufficient\n      return;\n    }\n    const prefix = what == null ? \"\" : `${what}: `;\n    if (parts == null) {\n      throw new Error(\n        prefix + `expected array of parts, got: ${String(parts)}`\n      );\n    }\n    parts.forEach((s: string) => {\n      if (s == null) {\n        throw new Error(\n          prefix +\n            `expected array of parts, got ${String(s)} in: ${partsString(\n              parts\n            )}`\n        );\n      }\n      if (s.indexOf(separator) !== -1) {\n        const where = `${stringify(s)} in ${partsString(parts)}`;\n        throw new Error(prefix + `part contains NUL character: ${where}`);\n      }\n    });\n  }\n\n  function nullDelimited(components: $ReadOnlyArray<string>): string {\n    return [...components, \"\"].join(separator);\n  }\n\n  function fromParts(parts: $ReadOnlyArray<string>): Address {\n    assertValidParts(parts);\n    return nonce + separator + nullDelimited(parts);\n  }\n\n  const empty = fromParts([]);\n\n  function toParts(address: Address): string[] {\n    assertValid(address);\n    const parts = address.split(separator);\n    return parts.slice(1, parts.length - 1);\n  }\n\n  function toString(address: Address): string {\n    const parts = toParts(address);\n    return `${name}${stringify(parts)}`;\n  }\n\n  function append(address: Address, ...parts: string[]): Address {\n    assertValid(address);\n    assertValidParts(parts);\n    return address + nullDelimited(parts);\n  }\n\n  function hasPrefix(address: Address, prefix: Address): boolean {\n    assertValid(address, \"address\");\n    assertValid(prefix, \"prefix\");\n    return address.startsWith(prefix);\n  }\n\n  function fromRaw(address: string): Address {\n    if (!address.endsWith(separator)) {\n      throw new Error(\n        `address does not end with separator: ${stringify(address)}`\n      );\n    }\n    if (!address.startsWith(nonceWithSeparator)) {\n      for (const [\n        otherNonceWithSeparator,\n        otherName,\n      ] of otherNoncesWithSeparators) {\n        if (address.startsWith(otherNonceWithSeparator)) {\n          throw new Error(\n            `expected ${name}, got ${otherName}: ${stringify(address)}`\n          );\n        }\n      }\n      throw new Error(`expected ${name}, got: ${stringify(address)}`);\n    }\n    return address;\n  }\n\n  const parser: C.Parser<Address> = C.fmap(C.string, fromRaw);\n\n  const result = {\n    assertValid,\n    assertValidParts,\n    empty,\n    fromParts,\n    toParts,\n    toString,\n    append,\n    hasPrefix,\n    fromRaw,\n    parser,\n  };\n  return deepFreeze(result);\n}\n","// @flow\n\nimport * as C from \"./combo\";\nexport type Compatible<T> = [CompatInfo, T];\ntype CompatInfo = {|\n  +type: string,\n  +version: string,\n|};\n\nexport function toCompat<T>(compatInfo: CompatInfo, obj: T): Compatible<T> {\n  return [compatInfo, obj];\n}\n\n/**\n * Load an object from compatibilized state created by `toCompat`.\n * The object has an expected type and version, and may optionally have\n * handler functions for transforming previous versions into a canonical state.\n * If a handler is present for the current version, it will be applied.\n * Throws an error if the compatibilized object is the wrong type, or if its version\n * is not current and there was no handler for its version.\n */\nexport function fromCompat<T>(\n  expectedCompatInfo: CompatInfo,\n  obj: Compatible<any>,\n  handlers: ?{[version: string]: (any) => T}\n): T {\n  if (!Array.isArray(obj) || obj.length !== 2) {\n    throw new Error(\n      \"Tried to load object that didn't have compatibility defined\"\n    );\n  }\n  const {type, version} = obj[0];\n  let result = obj[1];\n\n  const {type: expectedType, version: expectedVersion} = expectedCompatInfo;\n  if (type !== expectedType) {\n    throw new Error(`Expected type to be ${expectedType} but got ${type}`);\n  }\n\n  if (handlers != null && handlers[version] != null) {\n    result = handlers[version](result);\n  } else if (version !== expectedVersion) {\n    throw new Error(`${type}: tried to load unsupported version ${version}`);\n  }\n  return result;\n}\n\nconst headerParser = C.object({type: C.string, version: C.string});\nconst wrappedParser = C.tuple([headerParser, C.raw]);\n\nexport function compatibleParser<T>(\n  expectedType: string,\n  handlers: {+[version: string]: C.Parser<T>}\n): C.Parser<T> {\n  return new C.Parser((x) => {\n    const wrapResult = wrappedParser.parse(x);\n    if (!wrapResult.ok) {\n      return {ok: false, err: `unable to unwrap compatible: ${wrapResult.err}`};\n    }\n    const [{type, version}, raw] = wrapResult.value;\n    if (type !== expectedType) {\n      return {\n        ok: false,\n        err: `expected type \"${expectedType}\" but got \"${type}\"`,\n      };\n    }\n    if (!Object.prototype.hasOwnProperty.call(handlers, version)) {\n      return {ok: false, err: `no \"${type}/${version}\" handler`};\n    }\n    const parseResult = handlers[version].parse(raw);\n    if (parseResult.ok) {\n      return parseResult;\n    } else {\n      return {ok: false, err: `${type}/${version}: ${parseResult.err}`};\n    }\n  });\n}\n","// @flow\n\n/**\n * Utilities for working with nullable types: `?T = T | null | void`.\n *\n * These functions use the native runtime representation, as opposed to\n * creating an `Optional<T>` wrapper class. This ensures that they have\n * minimal runtime cost (just a function call), and that they are\n * trivially interoperable with other code.\n *\n * When a value of type `?T` is `null` or `undefined`, we say that it is\n * _absent_. Otherwise, it is _present_.\n *\n * Some functions that typically appear in such libraries are not\n * needed:\n *\n *   - `join` (`??T => ?T`) can be implemented as the identity function,\n *     because the Flow types `??T` and `?T` are equivalent;\n *   - `flatMap` (`?T => (T => ?U) => ?U`) can be implemented simply as\n *     `map`, again because `??T` and `?T` are equivalent;\n *   - `first` (`?T => ?T => ?T`) can be implemented simply as `orElse`,\n *     again because `??T` and `?T` are equivalent;\n *   - `isPresent` (`?T => boolean`) doesn't provide much value over the\n *     equivalent abstract disequality check;\n *   - constructors like `empty` (`() => ?T`) and `of` (`T => ?T`) are\n *     entirely spurious.\n *\n * Other functions could reasonably be implemented, but have been left\n * out because they have rarely been needed:\n *\n *   - `filter` (`?T => (T => boolean) => ?T`);\n *   - `forEach` (`?T => (T => void) => void`);\n *   - `orElseGet` (`?T => (() => T) => T`), which is useful in the case\n *      where constructing the default value is expensive.\n *\n * (Of these three, `orElseGet` would probably be the most useful for\n * our existing codebase.)\n */\n\n/**\n * Apply the given function inside the nullable. If the input is absent,\n * then it will be returned unchanged. Otherwise, the given function\n * will be applied.\n */\nexport function map<T, U>(x: ?T, f: (T) => U): ?U {\n  return x != null ? f(x) : x;\n}\n\n/**\n * Extract the value from a nullable. If the input is present, it will\n * be returned. Otherwise, an error will be thrown with the provided\n * message (defaulting to the string representation of the absent input).\n */\nexport function get<T>(x: ?T, errorMessage?: string): T {\n  if (x == null) {\n    throw new Error(errorMessage != null ? errorMessage : String(x));\n  } else {\n    return x;\n  }\n}\n\n/**\n * Extract the value from a nullable. If the input is present, it will\n * be returned. Otherwise, an error will be thrown, with message given\n * by the provided function.\n */\nexport function orThrow<T>(x: ?T, getErrorMessage: () => string): T {\n  if (x == null) {\n    throw new Error(getErrorMessage());\n  } else {\n    return x;\n  }\n}\n\n/**\n * Extract the value from a nullable, using the provided default value\n * in case the input is absent.\n */\nexport function orElse<T>(x: ?T, defaultValue: T): T {\n  return x != null ? x : defaultValue;\n}\n\n/**\n * Filter nulls and undefined out of an array, returning a new array.\n *\n * The functionality is easy to implement without a util method (just call\n * `filter`); however Flow doesn't infer the type of the output array based on\n * the callback that was passed to filter. This method basically wraps filter\n * in a type-aware way.\n */\nexport function filterList<T>(xs: $ReadOnlyArray<?T>): T[] {\n  // A type-safe way to implement this would be:\n  /*:: (xs.flatMap((x) => x == null ? [] : [x]): T[]); */\n  // For performance, we instead take an unsafe route.\n  return ((xs.filter((x) => x != null): any): T[]);\n}\n","// @flow\n\nimport deepEqual from \"lodash.isequal\";\nimport deepFreeze from \"deep-freeze\";\n\nimport {makeAddressModule, type AddressModule} from \"./address\";\nimport {toCompat, fromCompat, type Compatible} from \"../util/compat\";\nimport * as NullUtil from \"../util/null\";\nimport {type TimestampMs} from \"../util/timestamp\";\n\n/**\n * This module contains the Graph, which is one of the most fundamental pieces\n * of SourceCred. SourceCred uses this graph to model all of the contributions\n * that make up a project, and the relationships between those contributions.\n *\n * If you aren't familiar with computer science graphs, now would be a good\n * time to refresh. See [this StackOverflow answer][1] for an introduction, and\n * [Wikipedia][2] for a more thorough overview. This Graph is used by\n * SourceCred as a \"Contribution Graph\", where every node is a contribution or\n * contributor (e.g. a pull request, or a GitHub user identity) and every edge\n * represents a connection between contributions or contributors (e.g. a pull\n * request contains a comment, or a comment is authored by a user).\n *\n * [1]: https://softwareengineering.stackexchange.com/questions/168058/what-are-graphs-in-laymens-terms#168067\n * [2]: https://en.wikipedia.org/wiki/Graph_(abstract_data_type)\n *\n * The Graph serves a simple function: it keeps track of which Nodes exist, and\n * what Edges join those nodes to each other. Nodes and Edges are both identified\n * by Addresses; specifically, `NodeAddressT`s and `EdgeAddressT`s.\n *\n * In both cases, addresses are modeled as arrays of strings. For example,\n * you might want to give an address to your favorite node. You can do so as\n * follows:\n *\n * const myAddress: NodeAddressT = NodeAddress.fromParts([\"my\", \"favorite\"])\n *\n * Edge Addresses are quite similar, except you use the EdgeAddress module.\n *\n * We model addresses as arrays of strings so that plugins can apply\n * hierarchical namespacing for the address. In general, for any address, the\n * first piece should be the name of the organization that owns the plugin, and\n * the second piece should be the name of the plugin. Pieces thereafter are\n * namespaced by the plugin's internal logic. For example, SourceCred has a\n * Git plugin, and that plugin produces addresses like\n * [\"sourcecred\", \"git\", \"commit\", \"9cba0e9e212a287ce26e8d7c2d273e1025c9f9bf\"].\n *\n * This enables \"prefix matching\" for finding only certain types of nodes. For\n * example, if we wanted to find every Git commit in the graph, we\n * could use the following code:\n *\n * const commitPrefix = NodeAddress.fromParts([\"sourcecred\", \"git\", \"commit\"]);\n * const commitNodes = graph.nodes({prefix: commitPrefix});\n *\n * The graph represents nodes as the `Node` data type, which includes an\n * address (NodeAddressT) as well as a few other fields that are needed for\n * calculating and displaying cred. The Graph is intended to be a lightweight\n * data structure, so only data directly needed for cred analysis is included.\n * If there's other data you want to store (e.g. the full text of posts that\n * are tracked in the graph), you can use the node address as a key for a\n * separate database.\n *\n * Edges are represented by `Edge` objects. They have `src` and `dst` fields.\n * These fields represent the \"source\" of the edge and the \"destination\" of the\n * edge respectively, and both fields contain `NodeAddressT`s. The edge also\n * has its own address, which is an `EdgeAddressT`.\n *\n * Graphs are allowed to contain Edges whose `src` or `dst` are not present.\n * Such edges are called 'Dangling Edges'. An edge may convert from dangling to\n * non-dangling (if it is added before its src or dst), and it may convert from\n * non-dangling to dangling (if its src or dst are removed).\n *\n * Supporting dangling edges is important, because it means that we can require\n * metadata be present for a Node (e.g. its creation timestamp), and still\n * allow graph creators that do not know a node's metadata to create references\n * to it. (Of course, they still need to know the node's address).\n *\n * Here's a toy example of creating a graph:\n *\n * ```js\n * const prAddress = NodeAddress.fromParts([\"pull_request\", \"1\"]);\n * const prDescription = \"My Fancy Pull Request\"\n * const pr: Node = {address: prAddress, description: prDescription, timestampMs: +Date.now()}\n * const myAddress = NodeAddress.fromParts([\"user\", \"decentralion\"]);\n * const myDescription = \"@decentralion\"\n * const me: Node = {addess: myAddress, description: myDescription, timestampMs: null}\n * const authoredAddress = EdgeAddress.fromParts([\"authored\", \"pull_request\", \"1\"]);\n * const edge = {src: me, dst: pr, address: authoredAddress, timestampMs: +Date.now()};\n *\n * const g = new Graph();\n * g.addNode(pr);\n * g.addNode(me);\n * g.addEdge(edge);\n * ```\n *\n * Graph has a number of accessor methods:\n * - `hasNode` to check if a node address is in the Graph\n * - `node` to retrieve a node by its address\n * - `nodes` to iterate over the nodes in the graph\n * - `hasEdge` to check if an edge address is in the Graph\n * - `isDanglingEdge` to check if an edge is dangling\n * - `edge` to retrieve an edge by its address\n * - `edges` to iterate over the edges in the graph\n * - `neighbors` to find all the edges and nodes adjacent to a node\n *    (also supports filtering by direction, by node prefix, or edge prefix)\n *\n * The Graph also has a few other convenience methods, like toJSON/fromJSON\n * for serialization, and `Graph.merge` for combining multiple graphs.\n */\nexport opaque type NodeAddressT: string = string;\nexport opaque type EdgeAddressT: string = string;\nexport const NodeAddress: AddressModule<NodeAddressT> = (makeAddressModule({\n  name: \"NodeAddress\",\n  nonce: \"N\",\n  otherNonces: new Map().set(\"E\", \"EdgeAddress\"),\n}): AddressModule<string>);\nexport const EdgeAddress: AddressModule<EdgeAddressT> = (makeAddressModule({\n  name: \"EdgeAddress\",\n  nonce: \"E\",\n  otherNonces: new Map().set(\"N\", \"NodeAddress\"),\n}): AddressModule<string>);\n\n/**\n * Represents a node in the graph.\n */\nexport type Node = {|\n  +address: NodeAddressT,\n  // Brief (ideally oneline) description for the node.\n  // Markdown is supported.\n  +description: string,\n  // When this node was created.\n  // Should be null for a \"timeless\" node, where we don't\n  // want to model that node as having been created at any particular\n  // point in time. User nodes are a good example of this.\n  +timestampMs: TimestampMs | null,\n|};\n\n/**\n * An edge between two nodes.\n */\nexport type Edge = {|\n  +address: EdgeAddressT,\n  +src: NodeAddressT,\n  +dst: NodeAddressT,\n  +timestampMs: TimestampMs,\n|};\n\nconst COMPAT_INFO = {type: \"sourcecred/graph\", version: \"0.8.0\"};\n\nexport type Neighbor = {|+node: Node, +edge: Edge|};\n\nexport opaque type DirectionT = symbol;\nexport const Direction: {|\n  +IN: DirectionT,\n  +OUT: DirectionT,\n  +ANY: DirectionT,\n|} = deepFreeze({\n  IN: Symbol(\"IN\"),\n  OUT: Symbol(\"OUT\"),\n  ANY: Symbol(\"ANY\"),\n});\n\nexport type NeighborsOptions = {|\n  +direction: DirectionT,\n  +nodePrefix: NodeAddressT,\n  +edgePrefix: EdgeAddressT,\n|};\n\nexport type EdgesOptions = {|\n  // An edge address prefix. Only show edges whose addresses match this prefix.\n  +addressPrefix?: EdgeAddressT,\n  // A node address prefix. Only show edges whose src matches\n  // this prefix.\n  +srcPrefix?: NodeAddressT,\n  // A node address prefix. Only show edges whose dst matches\n  // this prefix.\n  +dstPrefix?: NodeAddressT,\n  // Determines whether dangling edges should be included in the results.\n  +showDangling: boolean,\n|};\n\ntype AddressJSON = string[]; // Result of calling {Node,Edge}Address.toParts\ntype Integer = number;\ntype IndexedNodeJSON = {|\n  +index: Integer,\n  +description: string,\n  +timestampMs: TimestampMs | null,\n|};\ntype IndexedEdgeJSON = {|\n  +address: AddressJSON,\n  +srcIndex: Integer,\n  +dstIndex: Integer,\n  +timestampMs: TimestampMs,\n|};\n\nexport type GraphJSON = Compatible<{|\n  // A node address can be present because it corresponds to a node, or because\n  // it is referenced by a dangling edge.\n  +sortedNodeAddresses: AddressJSON[],\n  +nodes: IndexedNodeJSON[],\n  +edges: IndexedEdgeJSON[],\n|}>;\n\nexport type ModificationCount = number;\n\n// Internal-only type used to cache the sorted node and edge address order.\n// The modification count is used as the cache key.\ntype CachedOrder = {|\n  +nodeOrder: $ReadOnlyArray<NodeAddressT>,\n  +edgeOrder: $ReadOnlyArray<EdgeAddressT>,\n  +modificationCount: number,\n|};\n\n/**\n * Specifies how to contract a graph, collapsing several old nodes\n * into a single new node, and re-writing edges for consistency.\n */\nexport type NodeContraction = {|\n  +old: $ReadOnlyArray<NodeAddressT>,\n  +replacement: Node,\n|};\n\nexport class Graph {\n  _nodes: Map<NodeAddressT, Node>;\n  _edges: Map<EdgeAddressT, Edge>;\n  // Map every node address present in the graph to its inEdges (edges for\n  // which it is a dst) and outEdges (edges for which it is a src)\n  _incidentEdges: Map<NodeAddressT, {|+inEdges: Edge[], +outEdges: Edge[]|}>;\n\n  // Incremented each time that any change is made to the graph. Used to\n  // check for comodification and to avoid needlessly checking\n  // invariants.\n  _modificationCount: ModificationCount;\n  _cachedOrder: CachedOrder;\n  _invariantsLastChecked: {|+when: ModificationCount, +failure: ?string|};\n\n  constructor(): void {\n    this._modificationCount = 0;\n    this._invariantsLastChecked = {\n      when: -1,\n      failure: \"Invariants never checked\",\n    };\n    this._cachedOrder = {\n      nodeOrder: [],\n      edgeOrder: [],\n      modificationCount: 0,\n    };\n    this._nodes = new Map();\n    this._edges = new Map();\n    this._incidentEdges = new Map();\n    this._maybeCheckInvariants();\n  }\n\n  _checkForComodification(since: ModificationCount) {\n    // TODO(perf): Consider eliding this in production.\n    const now = this._modificationCount;\n    if (now === since) {\n      this._maybeCheckInvariants();\n      return;\n    }\n    if (now > since) {\n      throw new Error(\"Concurrent modification detected\");\n    }\n    if (now < since) {\n      throw new Error(\n        \"Invariant violation: expected modification count in the future\"\n      );\n    }\n  }\n\n  _markModification() {\n    // TODO(perf): Consider eliding this in production.\n    if (this._modificationCount >= Number.MAX_SAFE_INTEGER) {\n      throw new Error(\n        `Graph cannot be modified more than ${this._modificationCount} times.`\n      );\n    }\n    this._modificationCount++;\n    this._maybeCheckInvariants();\n  }\n\n  /**\n   * A node address is 'referenced' if it is either present in the graph, or is\n   * the src or dst of some edge.\n   *\n   * Referenced nodes always have an entry in this._incidentEdges (regardless\n   * of whether they are incident to any edges).\n   *\n   * This method ensures that a given node address has a reference.\n   */\n  _reference(n: NodeAddressT) {\n    if (!this._incidentEdges.has(n)) {\n      this._incidentEdges.set(n, {inEdges: [], outEdges: []});\n    }\n  }\n\n  /**\n   * A node stops being referenced as soon as it is both not in the graph, and is\n   * not incident to any edge. This method must be called after any operation which\n   * might cause a node address to no longer be referenced, so that the node can\n   * be unreferenced if appropriate.\n   */\n  _unreference(n: NodeAddressT) {\n    const incidence = this._incidentEdges.get(n);\n    if (incidence != null) {\n      const {inEdges, outEdges} = incidence;\n      if (\n        !this._nodes.has(n) &&\n        inEdges.length === 0 &&\n        outEdges.length === 0\n      ) {\n        this._incidentEdges.delete(n);\n      }\n    }\n  }\n\n  _getOrder(): CachedOrder {\n    const modificationCount = this._modificationCount;\n    if (this._cachedOrder.modificationCount !== modificationCount) {\n      const edgeOrder = Array.from(this._edges.keys()).sort();\n      const nodeOrder = Array.from(this._nodes.keys()).sort();\n      this._cachedOrder = {nodeOrder, edgeOrder, modificationCount};\n    }\n    return this._cachedOrder;\n  }\n\n  /**\n   * Returns how many times the graph has been modified.\n   *\n   * This value is exposed so that users of Graph can cache computations over\n   * the graph with confidence, knowing that they will be able to check the\n   * modification count to know when their cache is potentially invalid.\n   *\n   * This value may increase any time the graph is potentially modified, even\n   * if no modification actually occurs; for example, if a client calls\n   * `addNode`, the modification count may increase even if the added node was\n   * already present in the graph.\n   *\n   * This value is not serialized, and is ignored when checking equality, i.e.\n   * two graphs may be semantically equal even when they have different\n   * modification counts.\n   */\n  modificationCount(): ModificationCount {\n    return this._modificationCount;\n  }\n\n  /**\n   * Adds a new node to the graph.\n   *\n   * If the node already exists in the graph, no action is taken and no error\n   * is thrown. (This operation is idempotent).\n   *\n   * Returns `this` for chaining.\n   */\n  addNode(node: Node): this {\n    const {address} = node;\n    NodeAddress.assertValid(address);\n    this._reference(address);\n    const existingNode = this._nodes.get(address);\n    if (existingNode == null) {\n      this._nodes.set(address, node);\n    } else {\n      if (!deepEqual(node, existingNode)) {\n        const strNode = nodeToString(node);\n        const strExisting = nodeToString(existingNode);\n        throw new Error(\n          `conflict between new node ${strNode} and existing ${strExisting}`\n        );\n      }\n    }\n    this._markModification();\n    this._maybeCheckInvariants();\n    return this;\n  }\n\n  /**\n   * Remove a node from the graph.\n   *\n   * If the node does not exist in the graph, no action is taken and no error\n   * is thrown. (This operation is idempotent.)\n   *\n   * Removing a node which is incident to some edges is allowed; such edges will\n   * become dangling edges. See the discussion of 'Dangling Edges' in the module docstring\n   * for details.\n   *\n   * Returns `this` for chaining.\n   */\n  removeNode(a: NodeAddressT): this {\n    NodeAddress.assertValid(a);\n    this._nodes.delete(a);\n    this._unreference(a);\n    this._markModification();\n    this._maybeCheckInvariants();\n    return this;\n  }\n\n  /**\n   * Test whether there exists a Node corresponding to the given NodeAddress.\n   *\n   * This will return false for node addresses which are referenced by some\n   * edge, but not actually present in the graph.\n   */\n  hasNode(a: NodeAddressT): boolean {\n    NodeAddress.assertValid(a);\n    const result = this._nodes.has(a);\n    this._maybeCheckInvariants();\n    return result;\n  }\n\n  /**\n   * Returns the Node matching a given NodeAddressT, if such a node exists,\n   * or undefined otherwise.\n   */\n  node(address: NodeAddressT): ?Node {\n    NodeAddress.assertValid(address);\n    const result = this._nodes.get(address);\n    this._maybeCheckInvariants();\n    return result;\n  }\n\n  /**\n   * Returns an iterator over all of the nodes in the graph.\n   *\n   * Optionally, the caller can provide a node prefix. If\n   * provided, the iterator will only contain nodes matching that\n   * prefix. See semantics of [Address.hasPrefix][1] for details.\n   *\n   * Clients must not modify the graph during iteration. If they do so, an\n   * error may be thrown at the iteration call site.\n   *\n   * Nodes are yielded in address-sorted order.\n   *\n   * [1]: https://github.com/sourcecred/sourcecred/blob/7c7fa2d83d4fd5ba38efb2b2f4e0244235ac1312/src/core/address.js#L74\n   */\n  nodes(options?: {|+prefix: NodeAddressT|}): Iterator<Node> {\n    const prefix = options != null ? options.prefix : NodeAddress.empty;\n    if (prefix == null) {\n      throw new Error(`Invalid prefix: ${String(prefix)}`);\n    }\n    const result = this._nodesIterator(this._modificationCount, prefix);\n    this._maybeCheckInvariants();\n    return result;\n  }\n\n  *_nodesIterator(\n    initialModificationCount: ModificationCount,\n    prefix: NodeAddressT\n  ): Iterator<Node> {\n    for (const address of this._getOrder().nodeOrder) {\n      if (NodeAddress.hasPrefix(address, prefix)) {\n        const node = NullUtil.get(this._nodes.get(address));\n        this._checkForComodification(initialModificationCount);\n        this._maybeCheckInvariants();\n        yield node;\n      }\n    }\n    this._checkForComodification(initialModificationCount);\n    this._maybeCheckInvariants();\n  }\n\n  /**\n   * Add an edge to the graph.\n   *\n   * It is permitted to add an edge if its src or dst are not in the graph. See\n   * the discussion of 'Dangling Edges' in the module docstring for semantics.\n   *\n   * It is an error to add an edge if a distinct edge with the same address\n   * already exists in the graph (i.e., if the source or destination are\n   * different).\n   *\n   * Adding an edge that already exists to the graph is a no-op. (This\n   * operation is idempotent.)\n   *\n   * Returns `this` for chaining.\n   */\n  addEdge(edge: Edge): this {\n    NodeAddress.assertValid(edge.src, \"edge.src\");\n    NodeAddress.assertValid(edge.dst, \"edge.dst\");\n    EdgeAddress.assertValid(edge.address, \"edge.address\");\n\n    this._reference(edge.src);\n    this._reference(edge.dst);\n    const existingEdge = this._edges.get(edge.address);\n    if (existingEdge != null) {\n      if (\n        existingEdge.src !== edge.src ||\n        existingEdge.dst !== edge.dst ||\n        existingEdge.address !== edge.address ||\n        existingEdge.timestampMs !== edge.timestampMs\n      ) {\n        const strEdge = edgeToString(edge);\n        const strExisting = edgeToString(existingEdge);\n        throw new Error(\n          `conflict between new edge ${strEdge} and existing ${strExisting}`\n        );\n      }\n    } else {\n      this._edges.set(edge.address, edge);\n      const {inEdges} = NullUtil.get(this._incidentEdges.get(edge.dst));\n      const {outEdges} = NullUtil.get(this._incidentEdges.get(edge.src));\n      inEdges.push(edge);\n      outEdges.push(edge);\n    }\n    this._edges.set(edge.address, edge);\n    this._markModification();\n    this._maybeCheckInvariants();\n    return this;\n  }\n\n  /**\n   * Remove an edge from the graph.\n   *\n   * Calling removeEdge on an address that does not correspond to any edge in\n   * the graph is a no-op. (This method is idempotent.)\n   *\n   * Returns `this` for chaining.\n   */\n  removeEdge(address: EdgeAddressT): this {\n    EdgeAddress.assertValid(address);\n    const edge = this._edges.get(address);\n    if (edge != null) {\n      this._edges.delete(address);\n      const {inEdges} = NullUtil.get(this._incidentEdges.get(edge.dst));\n      const {outEdges} = NullUtil.get(this._incidentEdges.get(edge.src));\n      // TODO(perf): This is linear in the degree of the endpoints of the\n      // edge. Consider storing in non-list form (e.g., `inEdges` and\n      // `outEdges` fields in `_incidentEdges` could be `Set<EdgeAddressT>`).\n      [inEdges, outEdges].forEach((edges) => {\n        const index = edges.findIndex((edge) => edge.address === address);\n        if (index === -1) {\n          const strAddress = EdgeAddress.toString(address);\n          throw new Error(\n            `Invariant violation when removing edge@${strAddress}`\n          );\n        }\n        edges.splice(index, 1);\n      });\n      this._unreference(edge.src);\n      this._unreference(edge.dst);\n    }\n    this._markModification();\n    this._maybeCheckInvariants();\n    return this;\n  }\n\n  /**\n   * Test whether the graph contains an edge with the given address.\n   */\n  hasEdge(address: EdgeAddressT): boolean {\n    EdgeAddress.assertValid(address);\n    const result = this._edges.has(address);\n    this._maybeCheckInvariants();\n    return result;\n  }\n\n  /**\n   * Test whether there is a dangling edge at the given address.\n   *\n   * Returns true if the edge is present, and is dangling.\n   * Returns false if the edge is present, and is not dangling.\n   * Returns undefined if the edge is not present.\n   *\n   * See the module docstring for more details on dangling edges.\n   */\n  isDanglingEdge(address: EdgeAddressT): boolean | typeof undefined {\n    EdgeAddress.assertValid(address);\n    const edge = this.edge(address);\n    let result: boolean | typeof undefined;\n    if (edge != null) {\n      const {src, dst} = edge;\n      result = !this.hasNode(src) || !this.hasNode(dst);\n    }\n    this._maybeCheckInvariants();\n    return result;\n  }\n\n  /**\n   * Returns the Edge matching a given EdgeAddressT, if such an edge exists, or\n   * null otherwise.\n   */\n  edge(address: EdgeAddressT): ?Edge {\n    EdgeAddress.assertValid(address);\n    const result = this._edges.get(address);\n    this._maybeCheckInvariants();\n    return result;\n  }\n\n  /**\n   * Returns an iterator over edges in the graph, optionally filtered by edge\n   * address prefix, source address prefix, and/or destination address prefix.\n   *\n   * The caller must pass an options object with a boolean field `showDangling`,\n   * which determines whether dangling edges will be included in the results.\n   * The caller may also pass fields `addressPrefix`, `srcPrefix`, and `dstPrefix`\n   * to perform prefix-based address filtering of edges that are returned.\n   * (See the module docstring for more context on dangling edges.)\n   *\n   * Suppose that you want to find every edge that represents authorship by a\n   * user. If all authorship edges have the `AUTHORS_EDGE_PREFIX` prefix, and\n   * all user nodes have the `USER_NODE_PREFIX` prefix, then you could call:\n   *\n   * graph.edges({\n   *  showDangling: true,  // or false, irrelevant for this example\n   *  addressPrefix: AUTHORS_EDGE_PREFIX,\n   *  srcPrefix: USER_NODE_PREFIX,\n   * });\n   *\n   * In this example, as `dstPrefix` was left unset, it will default to\n   * `NodeAddress.empty`, which is a prefix of every node address.\n   *\n   * Clients must not modify the graph during iteration. If they do so, an\n   * error may be thrown at the iteration call site.\n   *\n   * The edges are yielded in sorted address order.\n   */\n  edges(options: EdgesOptions): Iterator<Edge> {\n    if (options == null) {\n      throw new Error(\"Options are required for Graph.edges\");\n    }\n    const {showDangling} = options;\n    const addressPrefix = NullUtil.orElse(\n      options.addressPrefix,\n      EdgeAddress.empty\n    );\n    const srcPrefix = NullUtil.orElse(options.srcPrefix, NodeAddress.empty);\n    const dstPrefix = NullUtil.orElse(options.dstPrefix, NodeAddress.empty);\n\n    const result = this._edgesIterator(\n      this._modificationCount,\n      showDangling,\n      addressPrefix,\n      srcPrefix,\n      dstPrefix\n    );\n    this._maybeCheckInvariants();\n    return result;\n  }\n\n  *_edgesIterator(\n    initialModificationCount: ModificationCount,\n    showDangling: boolean,\n    addressPrefix: EdgeAddressT,\n    srcPrefix: NodeAddressT,\n    dstPrefix: NodeAddressT\n  ): Iterator<Edge> {\n    for (const address of this._getOrder().edgeOrder) {\n      const edge = NullUtil.get(this._edges.get(address));\n      if (\n        (showDangling || this.isDanglingEdge(edge.address) === false) &&\n        EdgeAddress.hasPrefix(edge.address, addressPrefix) &&\n        NodeAddress.hasPrefix(edge.src, srcPrefix) &&\n        NodeAddress.hasPrefix(edge.dst, dstPrefix)\n      ) {\n        this._checkForComodification(initialModificationCount);\n        this._maybeCheckInvariants();\n        yield edge;\n      }\n    }\n    this._checkForComodification(initialModificationCount);\n    this._maybeCheckInvariants();\n  }\n\n  /**\n   * Find the `Neighbors` that are incident to a chosen root node.\n   *\n   * A `Neighbor` contains an edge that is incident to the root,\n   * and the node at the other endpoint of the edge. This may be\n   * either the source or destination of the edge, depending on whether the\n   * edge is an in-edge or an out-edge from the perspective of the root. For\n   * convenience, a `Neighbor` is thus an object that includes both the edge\n   * and the adjacent node.\n   *\n   * Every non-dangling edge incident to the root corresponds to exactly one\n   * neighbor, but note that multiple neighbors may have the same `node` in the\n   * case that there are multiple edges with the same source and destination.\n   *\n   * Callers to `neighbors` must provide `NeighborsOptions` as follows:\n   *\n   * - direction: one of Direction.IN, direction.OUT, or Direction.ANY.\n   *   - Direction.IN finds neigbhors where root is the destination of the\n   *     edge.\n   *   - Direction.OUT finds neigbhors where root is the source of the edge.\n   *   - Direction.ANY finds neigbhors where root is the source or destination\n   *     of the edge.\n   *\n   * - nodePrefix: A NodeAddressT to use as a prefix filter for the adjacent node.\n   *   If you want all nodes, use `NodeAddress`.empty.\n   *\n   * - edgePrefix: An EdgeAddressT to use as a prefix filter for the edge.\n   *   If you want all edges, use `EdgeAddress`.empty.\n   *\n   * Calling `neighbors` on a node that is not present in the graph is an error.\n   *\n   * If the root node has an edge for which it is both the source and the\n   * destination (a loop edge), there will be one `Neighbor` with the root node\n   * and the loop edge.\n   *\n   * No `Neighbors` will be created for dangling edges, as such edges do not\n   * correspond to any Node in the graph.\n   *\n   * Clients must not modify the graph during iteration. If they do so, an\n   * error may be thrown at the iteration call site. The iteration order is\n   * undefined.\n   */\n  neighbors(node: NodeAddressT, options: NeighborsOptions): Iterator<Neighbor> {\n    if (!this.hasNode(node)) {\n      throw new Error(`Node does not exist: ${NodeAddress.toString(node)}`);\n    }\n    const result = this._neighbors(node, options, this._modificationCount);\n    this._maybeCheckInvariants();\n    return result;\n  }\n\n  *_neighbors(\n    node: NodeAddressT,\n    options: NeighborsOptions,\n    initialModificationCount: ModificationCount\n  ): Iterator<Neighbor> {\n    const nodeFilter = (n) => NodeAddress.hasPrefix(n, options.nodePrefix);\n    const edgeFilter = (e) => EdgeAddress.hasPrefix(e, options.edgePrefix);\n    const direction = options.direction;\n    const adjacencies: {edges: Edge[], direction: string}[] = [];\n    if (direction === Direction.IN || direction === Direction.ANY) {\n      const {inEdges} = NullUtil.get(this._incidentEdges.get(node));\n      adjacencies.push({edges: inEdges, direction: \"IN\"});\n    }\n    if (direction === Direction.OUT || direction === Direction.ANY) {\n      const {outEdges} = NullUtil.get(this._incidentEdges.get(node));\n      adjacencies.push({edges: outEdges, direction: \"OUT\"});\n    }\n\n    for (const adjacency of adjacencies) {\n      for (const edge of adjacency.edges) {\n        if (direction === Direction.ANY && adjacency.direction === \"IN\") {\n          if (edge.src === edge.dst) {\n            continue; // don't yield loop edges twice.\n          }\n        }\n        const neighborNodeAddress =\n          adjacency.direction === \"IN\" ? edge.src : edge.dst;\n        const neighborNode = this.node(neighborNodeAddress);\n        if (\n          nodeFilter(neighborNodeAddress) &&\n          edgeFilter(edge.address) &&\n          neighborNode != null\n        ) {\n          this._checkForComodification(initialModificationCount);\n          this._maybeCheckInvariants();\n          yield {edge, node: neighborNode};\n        }\n      }\n    }\n    this._checkForComodification(initialModificationCount);\n    this._maybeCheckInvariants();\n  }\n\n  /**\n   * Checks whether this graph is equal to another graph.\n   *\n   * Two Graphs are considered equal if they have identical sets of nodes\n   * and edges. Insertion order is irrelevant.\n   *\n   * Runs in time `O(n + e)`, where `n` is the number of nodes and `e` is the\n   * number of edges.\n   */\n  equals(that: Graph): boolean {\n    if (!(that instanceof Graph)) {\n      throw new Error(`Expected Graph, got ${String(that)}`);\n    }\n    const result =\n      deepEqual(this._nodes, that._nodes) &&\n      deepEqual(this._edges, that._edges);\n    this._maybeCheckInvariants();\n    return result;\n  }\n\n  /**\n   * Produce a copy of this graph.\n   *\n   * The copy is equal to the original, but distinct, so that they may be\n   * modified independently.\n   */\n  copy(): Graph {\n    const result = Graph.merge([this]);\n    this._maybeCheckInvariants();\n    return result;\n  }\n\n  /**\n   * Serialize a Graph into a plain JavaScript object.\n   */\n  toJSON(): GraphJSON {\n    // Unlike Array.from(this.nodes()).map((x) => x.address), this will include\n    // node references. Including node references is necessary so that we can\n    // index edges' src and dst consistently, even for dangling edges.\n    const sortedNodeAddresses = Array.from(this._incidentEdges.keys()).sort();\n    const nodeAddressToSortedIndex = new Map();\n    sortedNodeAddresses.forEach((address, i) => {\n      nodeAddressToSortedIndex.set(address, i);\n    });\n    const sortedEdges = Array.from(this.edges({showDangling: true}));\n    const indexedEdges: IndexedEdgeJSON[] = sortedEdges.map(\n      ({src, dst, address, timestampMs}) => {\n        const srcIndex = NullUtil.get(nodeAddressToSortedIndex.get(src));\n        const dstIndex = NullUtil.get(nodeAddressToSortedIndex.get(dst));\n        return {\n          srcIndex,\n          dstIndex,\n          address: EdgeAddress.toParts(address),\n          timestampMs,\n        };\n      }\n    );\n    const sortedNodes = Array.from(this.nodes());\n    const indexedNodes: IndexedNodeJSON[] = sortedNodes.map(\n      ({address, description, timestampMs}) => {\n        const index = NullUtil.get(nodeAddressToSortedIndex.get(address));\n        return {index, description, timestampMs};\n      }\n    );\n    const rawJSON = {\n      sortedNodeAddresses: sortedNodeAddresses.map((x) =>\n        NodeAddress.toParts(x)\n      ),\n      edges: indexedEdges,\n      nodes: indexedNodes,\n    };\n    const result = toCompat(COMPAT_INFO, rawJSON);\n    this._maybeCheckInvariants();\n    return result;\n  }\n\n  /**\n   * Deserializes a GraphJSON into a new Graph.\n   */\n  static fromJSON(compatJson: GraphJSON): Graph {\n    const {\n      nodes: nodesJSON,\n      edges: edgesJSON,\n      sortedNodeAddresses: sortedNodeAddressesJSON,\n    } = fromCompat(COMPAT_INFO, compatJson);\n    const sortedNodeAddresses = sortedNodeAddressesJSON.map(\n      NodeAddress.fromParts\n    );\n    const result = new Graph();\n    nodesJSON.forEach((j: IndexedNodeJSON) => {\n      const n: Node = {\n        address: sortedNodeAddresses[j.index],\n        description: j.description,\n        timestampMs: j.timestampMs,\n      };\n      result.addNode(n);\n    });\n    edgesJSON.forEach(({address, srcIndex, dstIndex, timestampMs}) => {\n      const src = sortedNodeAddresses[srcIndex];\n      const dst = sortedNodeAddresses[dstIndex];\n      result.addEdge({\n        address: EdgeAddress.fromParts(address),\n        src: src,\n        dst: dst,\n        timestampMs,\n      });\n    });\n    return result;\n  }\n\n  /**\n   * Compute the union of the given graphs. The result is a new graph that has\n   * all of the nodes and all of the edges from all the provided graphs.\n   *\n   * If two of the given graphs have edges with the same address, the edges\n   * must be equal (i.e. must have the same source and destination in each\n   * graph). If this is not the case, an error will be thrown.\n   *\n   * Example usage:\n   *\n   * const g1 = new Graph().addNode(a).addNode(b).addEdge(e);\n   * const g2 = new Graph().addNode(b).addNode(c).addEdge(f);\n   * const g3 = Graph.merge([g1, g2]);\n   * Array.from(g3.nodes()).length;  // 3\n   * Array.from(g3.edges()).length;  // 2\n   * const g1 = new Graph().addNode(a).addNode(b).addEdge(x);\n   * const g2 = new Graph().addNode(c);\n   * const g3 = Graph.merge([g1, g2]);\n   *\n   * The newly created graph is a separate instance from any of the input graphs,\n   * and may be mutated independently.\n   */\n  static merge(graphs: Iterable<Graph>): Graph {\n    const result = new Graph();\n    for (const graph of graphs) {\n      for (const node of graph.nodes()) {\n        result.addNode(node);\n      }\n      for (const edge of graph.edges({showDangling: true})) {\n        result.addEdge(edge);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Create a new graph, in which some nodes have been contracted together.\n   *\n   * contractNodes takes a list of NodeContractions, each of which specifies a\n   * replacement node, and a list of old node addresses to map onto the new\n   * node. A new graph will be returned where the new node is added, none of\n   * the old nodes are present, and every edge incident to one of the old nodes\n   * has been re-written so that it is incident to the new node instead.\n   *\n   * If the same node addresses is \"old\" for several contractions, all incident\n   * edges will be re-written to connect to whichever contraction came last.\n   *\n   * If the replacement node is present in the graph, no error will be thrown,\n   * provided that the replacement node is consistent with the one in the graph.\n   *\n   * If there is a \"chain\" of remaps (i.e. a->b and b->c), then an error will\n   * be thrown, as support for chaining has not yet been implemented.\n   *\n   * The original Graph is not mutated.\n   *\n   * contractNodes runs in O(n+e+k), where `n` is the number of nodes, `e` is the\n   * number of edges, and `k` is the number of contractions. If needed, we can\n   * improve the peformance by mutating the original graph instead of creating\n   * a new one.\n   */\n  contractNodes(contractions: $ReadOnlyArray<NodeContraction>): Graph {\n    const remap = new Map();\n    const replacements = new Set();\n    const contracted = new Graph();\n    for (const {old, replacement} of contractions) {\n      for (const addr of old) {\n        if (replacements.has(addr)) {\n          throw new Error(\n            `Chained contractions are not supported: ${NodeAddress.toString(\n              addr\n            )}`\n          );\n        }\n        remap.set(addr, replacement.address);\n      }\n      replacements.add(replacement.address);\n      contracted.addNode(replacement);\n    }\n    for (const node of this.nodes()) {\n      if (!remap.has(node.address)) {\n        contracted.addNode(node);\n      }\n    }\n    for (const edge of this.edges({showDangling: true})) {\n      const src = NullUtil.orElse(remap.get(edge.src), edge.src);\n      const dst = NullUtil.orElse(remap.get(edge.dst), edge.dst);\n      const newEdge = {...edge, src, dst};\n      contracted.addEdge(newEdge);\n    }\n    return contracted;\n  }\n\n  checkInvariants() {\n    if (this._invariantsLastChecked.when !== this._modificationCount) {\n      let failure: ?string = null;\n      try {\n        this._checkInvariants();\n      } catch (e) {\n        failure = e.message;\n      } finally {\n        this._invariantsLastChecked = {\n          when: this._modificationCount,\n          failure,\n        };\n      }\n    }\n    if (this._invariantsLastChecked.failure != null) {\n      throw new Error(this._invariantsLastChecked.failure);\n    }\n  }\n\n  _checkInvariants() {\n    // Definition. A node `n` is in the graph if `n` is deep-equal to\n    // `_nodes.get(n.address)`.\n    //\n    // Definition. An edge `e` is in the graph if `e` is deep-equal to\n    // `_edges.get(e.address)`.\n    //\n    // Definition. A *logical value* is an equivalence class of ECMAScript\n    // values modulo deep equality (or, from context, an element of such a\n    // class).\n\n    // Invariant 1. A node address `na` is 'referenced' if `_incidentEdges.has(na)`.\n    // 1.1 If a node is in the graph, then it is referenced by its address.\n    // 1.2 If a node has any incident edge, then it is referenced.\n    // 1.3 If a node is not in the graph and does not have incident edges, then\n    // it is not referenced.\n    const referencedNodesEncountered = new Set();\n    // 1.1\n    for (const [address, node] of this._nodes) {\n      if (node.address !== address) {\n        throw new Error(\n          `bad node address for ${NodeAddress.toString(address)}`\n        );\n      }\n      if (!this._incidentEdges.has(address)) {\n        throw new Error(\n          `missing incident-edges for ${NodeAddress.toString(address)}`\n        );\n      }\n      referencedNodesEncountered.add(address);\n    }\n    // 1.2\n    for (const edge of this._edges.values()) {\n      if (!this._incidentEdges.has(edge.src)) {\n        throw new Error(\n          `missing incident-edges for src of: ${edgeToString(edge)}`\n        );\n      }\n      referencedNodesEncountered.add(edge.src);\n      if (!this._incidentEdges.has(edge.dst)) {\n        throw new Error(\n          `missing incident-edges for dst of: ${edgeToString(edge)}`\n        );\n      }\n      referencedNodesEncountered.add(edge.dst);\n    }\n    // Check 1.3 by implication: for every address in\n    // referencedNodesEncountered, we've explicitly checked that it is present\n    // in _incidentEdges.\n    //\n    // Therefore, if the number of keys in _incidentEdges differs from the\n    // number of elements in referencedNodesEncountered, it must be because\n    // some elements in _incidentEdges were not present in\n    // referencedNodesEncountered, which means that they did not correspond to\n    // a node in the graph and did not have incident edges.\n    const numIncidentEntries = Array.from(this._incidentEdges.keys()).length;\n    if (numIncidentEntries !== referencedNodesEncountered.size) {\n      throw new Error(\"extra addresses in incident-edges\");\n    }\n\n    // Invariant 2. For an edge address `a`, if `_edges.has(a)` and\n    // `_edges.get(a) === e`, then:\n    //  1. `e.address` equals `a`;\n    //  2. `e.src` is referenced;\n    //  3. `e.dst` is referenced;\n    //  4. `_incidentEdges.get(e.dst).inEdges` contains `e`; and\n    //  5. `_incidentEdges.get(e.src).outEdges` contains `e`.\n    //\n    // 2.2 and 2.3 are implied by 2.4 and 2.5 respectively (as a node's address\n    // being available in _incidentEdges means that it is referenced). So we may\n    // ignore them.\n    //\n    // We check 2.1 here, and check 2.4 and 2.5 later for improved performance.\n    for (const [address, edge] of this._edges.entries()) {\n      if (edge.address !== address) {\n        throw new Error(\n          `bad edge address: ${edgeToString(edge)} does not match ${address}`\n        );\n      }\n    }\n\n    // Invariant 3. Suppose that `_incidentEdges.has(n)` and, let `es` be\n    // `_incidentEdges.get(n).inEdges`. Then\n    //  1. `es` contains any logical value at most once;\n    //  2. if `es` contains `e`, then `e` is in the graph; and\n    //  3. if `es` contains `e`, then `e.dst === n`.\n    //\n    // Invariant 4. Suppose that `_incidentEdges.has(n)` and, let `es` be\n    // `_incidentEdges.get(n).outEdges`. Then\n    //  1. `es` contains any logical value at most once;\n    //  2. if `es` contains `e`, then `e` is in the graph; and\n    //  3. if `es` contains `e`, then `e.src === n`.\n    //\n    // Note that Invariant 3.1 is equivalent to the following:\n    //\n    //     Invariant 3.1*. If `a` is an address, then there is at most\n    //     one index `i` such that `es[i].address` is `a`.\n    //\n    // It is immediate that 3.1* implies 3.1. To see that 3.1 implies\n    // 3.1*, suppose that `i` and `j` are such that `es[i].address` and\n    // `es[j].address` are both `a`. Then, by Invariant 3.2, each of\n    // `es[i]` and `es[j]` is in the graph, so each is deep-equal to\n    // `_edges.get(a)`. Therefore, `es[i]` and `es[j]` are deep-equal to\n    // each other. By 3.1, `es` contains a logical value at most once,\n    // so `i` must be equal to `j`.\n    //\n    // Therefore, it is valid to verify that 3.1*, which we will do. The\n    // same logic of course applies to Invariant 4.1.\n    const inEdgesSeen: Set<EdgeAddressT> = new Set();\n    const outEdgesSeen: Set<EdgeAddressT> = new Set();\n    const incidentEntries = Array.from(this._incidentEdges.entries());\n    for (const {seen, entries, baseNodeAccessor, kind} of [\n      {\n        seen: inEdgesSeen,\n        entries: incidentEntries.map(([a, {inEdges}]) => [a, inEdges]),\n        baseNodeAccessor: (e) => e.dst,\n        kind: \"in-edge\",\n      },\n      {\n        seen: outEdgesSeen,\n        entries: incidentEntries.map(([a, {outEdges}]) => [a, outEdges]),\n        baseNodeAccessor: (e) => e.src,\n        kind: \"out-edge\",\n      },\n    ]) {\n      for (const [base, edges] of entries) {\n        for (const edge of edges) {\n          // 3.1/4.1\n          if (seen.has(edge.address)) {\n            throw new Error(`duplicate ${kind}: ${edgeToString(edge)}`);\n          }\n          seen.add(edge.address);\n          const expected = this._edges.get(edge.address);\n          // 3.2/4.2\n          if (!deepEqual(edge, expected)) {\n            if (expected == null) {\n              throw new Error(`spurious ${kind}: ${edgeToString(edge)}`);\n            } else {\n              const vs = `${edgeToString(edge)} vs. ${edgeToString(expected)}`;\n              throw new Error(`bad ${kind}: ${vs}`);\n            }\n          }\n          // 3.3/4.3\n          const expectedBase = baseNodeAccessor(edge);\n          if (base !== baseNodeAccessor(edge)) {\n            throw new Error(\n              `bad ${kind}: ${edgeToString(edge)} should be ` +\n                `should be anchored at ${NodeAddress.toString(expectedBase)}`\n            );\n          }\n        }\n      }\n    }\n\n    // We now return to check 2.4 and 2.5, with the help of the\n    // structures that we have built up in checking Invariants 3 and 4.\n    for (const edge of this._edges.values()) {\n      // That `_incidentEdges.get(n).inEdges` contains `e` for some `n` is\n      // sufficient to show that `_incidentEdges.get(e.dst).inEdges` contains\n      // `e`: if `n` were something other than `e.dst`, then we would have a\n      // failure of invariant 3.3, which would have been caught earlier.\n      // Likewise for outEdges.\n      if (!inEdgesSeen.has(edge.address)) {\n        throw new Error(`missing in-edge: ${edgeToString(edge)}`);\n      }\n      if (!outEdgesSeen.has(edge.address)) {\n        throw new Error(`missing out-edge: ${edgeToString(edge)}`);\n      }\n    }\n  }\n\n  _maybeCheckInvariants() {\n    if (process.env.NODE_ENV === \"test\") {\n      // TODO(perf): If this method becomes really slow, we can disable\n      // it on specific tests wherein we construct large graphs.\n      this.checkInvariants();\n    }\n  }\n}\n\n/**\n * Convert a node into a human readable string.\n *\n * The precise behavior is an implementation detail and subject to change.\n */\nexport function nodeToString(node: Node): string {\n  const address = NodeAddress.toString(node.address);\n  const timestamp =\n    node.timestampMs == null ? \"null\" : String(node.timestampMs);\n  return `{address: ${address}, description: ${node.description}, timestampMs: ${timestamp}}`;\n}\n\n/**\n * Convert an edge into a human readable string.\n *\n * The precise behavior is an implementation detail and subject to change.\n */\nexport function edgeToString(edge: Edge): string {\n  const address = EdgeAddress.toString(edge.address);\n  const src = NodeAddress.toString(edge.src);\n  const dst = NodeAddress.toString(edge.dst);\n  return `{address: ${address}, src: ${src}, dst: ${dst}, timestampMs: ${edge.timestampMs}}`;\n}\n\n/**\n * Convert an edge to an object whose fields are human-readable.\n * This is useful for storing edges in human-readable formats that\n * should not include NUL characters, such as Jest snapshots.\n */\nexport function edgeToStrings(\n  edge: Edge\n): {|\n  +address: string,\n  +src: string,\n  +dst: string,\n  +timestampMs: TimestampMs,\n|} {\n  return {\n    address: EdgeAddress.toString(edge.address),\n    src: NodeAddress.toString(edge.src),\n    dst: NodeAddress.toString(edge.dst),\n    timestampMs: edge.timestampMs,\n  };\n}\n\nexport function edgeToParts(\n  edge: Edge\n): {|\n  +addressParts: string[],\n  +srcParts: string[],\n  +dstParts: string[],\n  +timestampMs: TimestampMs,\n|} {\n  const addressParts = EdgeAddress.toParts(edge.address);\n  const srcParts = NodeAddress.toParts(edge.src);\n  const dstParts = NodeAddress.toParts(edge.dst);\n  const timestampMs = edge.timestampMs;\n  return {addressParts, srcParts, dstParts, timestampMs};\n}\n\nexport type NodeDiff = {|\n  +first: ?Node,\n  +second: ?Node,\n|};\n\nexport type EdgeDiff = {|\n  +first: ?Edge,\n  +second: ?Edge,\n|};\n\nexport type GraphComparison = {|\n  +graphsAreEqual: boolean,\n  +nodeDiffs: $ReadOnlyArray<NodeDiff>,\n  +edgeDiffs: $ReadOnlyArray<EdgeDiff>,\n|};\n\nexport function compareGraphs(\n  firstGraph: Graph,\n  secondGraph: Graph\n): GraphComparison {\n  const nodeDiffs = [];\n  const edgeDiffs = [];\n  const graphsAreEqual = firstGraph.equals(secondGraph);\n\n  if (!graphsAreEqual) {\n    for (const firstNode of firstGraph.nodes()) {\n      const secondNode = secondGraph.node(firstNode.address);\n      if (!deepEqual(firstNode, secondNode))\n        nodeDiffs.push({first: firstNode, second: secondNode});\n    }\n    for (const secondNode of secondGraph.nodes()) {\n      const firstNode = firstGraph.node(secondNode.address);\n      if (!firstNode) {\n        nodeDiffs.push({first: firstNode, second: secondNode});\n      }\n    }\n\n    for (const firstEdge of firstGraph.edges({showDangling: true})) {\n      const secondEdge = secondGraph.edge(firstEdge.address);\n      if (!deepEqual(firstEdge, secondEdge))\n        edgeDiffs.push({first: firstEdge, second: secondEdge});\n    }\n    for (const secondEdge of secondGraph.edges({showDangling: true})) {\n      const firstEdge = firstGraph.edge(secondEdge.address);\n      if (!firstEdge) {\n        edgeDiffs.push({first: firstEdge, second: secondEdge});\n      }\n    }\n  }\n\n  return {\n    graphsAreEqual,\n    nodeDiffs,\n    edgeDiffs,\n  };\n}\n","// @flow\n\nimport deepFreeze from \"deep-freeze\";\nimport type {PluginDeclaration} from \"../../analysis/pluginDeclaration\";\nimport type {NodeType, EdgeType} from \"../../analysis/types\";\nimport {\n  NodeAddress,\n  EdgeAddress,\n  type NodeAddressT,\n  type EdgeAddressT,\n} from \"../../core/graph\";\n\nexport const nodePrefix: NodeAddressT = NodeAddress.fromParts([\n  \"sourcecred\",\n  \"discourse\",\n]);\nexport const edgePrefix: EdgeAddressT = EdgeAddress.fromParts([\n  \"sourcecred\",\n  \"discourse\",\n]);\n\nexport const topicNodeType: NodeType = deepFreeze({\n  name: \"Topic\",\n  pluralName: \"Topics\",\n  prefix: NodeAddress.append(nodePrefix, \"topic\"),\n  defaultWeight: 0,\n  description:\n    \"A topic (or post-container) in a Discourse instance. Every topic has at least one post.\",\n});\n\nexport const postNodeType: NodeType = deepFreeze({\n  name: \"Post\",\n  pluralName: \"Posts\",\n  prefix: NodeAddress.append(nodePrefix, \"post\"),\n  defaultWeight: 0,\n  description: \"A post in some topic in a Discourse instance.\",\n});\n\nexport const userNodeType: NodeType = deepFreeze({\n  name: \"User\",\n  pluralName: \"Users\",\n  prefix: NodeAddress.append(nodePrefix, \"user\"),\n  defaultWeight: 0,\n  description: \"A user account on a particular Discourse instance.\",\n});\n\nexport const likeNodeType: NodeType = deepFreeze({\n  name: \"Like\",\n  pluralName: \"Likes\",\n  prefix: NodeAddress.append(nodePrefix, \"like\"),\n  defaultWeight: 4,\n  description: \"A like by some user, directed at some post\",\n});\n\nexport const topicContainsPostEdgeType: EdgeType = deepFreeze({\n  forwardName: \"contains post\",\n  backwardName: \"is contained by topic\",\n  prefix: EdgeAddress.append(edgePrefix, \"topicContainsPost\"),\n  defaultWeight: {forwards: 1 / 8, backwards: 1},\n  description: \"Connects a topic to the posts that it contains.\",\n});\n\nexport const topicHasLikedPostEdgeType: EdgeType = deepFreeze({\n  forwardName: \"has post with likes\",\n  backwardName: \"is liked post within topic\",\n  prefix: EdgeAddress.append(edgePrefix, \"topicHasLikedPost\"),\n  defaultWeight: {forwards: 1, backwards: 0},\n  description:\n    \"Connects a topic to posts with likes, with weight proportional to the number of likes\",\n});\n\nexport const postRepliesEdgeType: EdgeType = deepFreeze({\n  forwardName: \"post is reply to\",\n  backwardName: \"post replied to by\",\n  prefix: EdgeAddress.append(edgePrefix, \"replyTo\"),\n  defaultWeight: {forwards: 1, backwards: 0},\n  description: \"Connects a post to the post that it is a reply to.\",\n});\n\nexport const authorsTopicEdgeType: EdgeType = deepFreeze({\n  forwardName: \"authors topic\",\n  backwardName: \"topic is authored by\",\n  prefix: EdgeAddress.append(edgePrefix, \"authors\", \"topic\"),\n  defaultWeight: {forwards: 0, backwards: 0},\n  description: \"Connects an author to a topic they created.\",\n});\n\nexport const authorsPostEdgeType: EdgeType = deepFreeze({\n  forwardName: \"authors post\",\n  backwardName: \"post is authored by\",\n  prefix: EdgeAddress.append(edgePrefix, \"authors\", \"post\"),\n  defaultWeight: {forwards: 1 / 4, backwards: 1},\n  description: \"Connects an author to a post they've created.\",\n});\n\nexport const createsLikeEdgeType: EdgeType = deepFreeze({\n  forwardName: \"creates like\",\n  backwardName: \"like created by\",\n  prefix: EdgeAddress.append(edgePrefix, \"createsLike\"),\n  defaultWeight: {forwards: 1, backwards: 0},\n  description: \"Connects a Discourse user to a like that they created.\",\n});\n\nexport const likesEdgeType: EdgeType = deepFreeze({\n  forwardName: \"likes\",\n  backwardName: \"is liked by\",\n  prefix: EdgeAddress.append(edgePrefix, \"likes\"),\n  defaultWeight: {forwards: 1, backwards: 0},\n  description: \"Connects a Discourse like to a post that was liked.\",\n});\n\nexport const referencesPostEdgeType: EdgeType = deepFreeze({\n  forwardName: \"references post\",\n  backwardName: \"post is referenced by\",\n  prefix: EdgeAddress.append(edgePrefix, \"references\", \"post\"),\n  defaultWeight: {forwards: 1 / 2, backwards: 0},\n  description: \"Connects a Discourse post to another post it referenced.\",\n});\n\nexport const referencesTopicEdgeType: EdgeType = deepFreeze({\n  forwardName: \"references topic\",\n  backwardName: \"topic is referenced by\",\n  prefix: EdgeAddress.append(edgePrefix, \"references\", \"topic\"),\n  defaultWeight: {forwards: 1 / 2, backwards: 0},\n  description: \"Connects a Discourse post to a topic it referenced.\",\n});\n\nexport const referencesUserEdgeType: EdgeType = deepFreeze({\n  forwardName: \"mentions\",\n  backwardName: \"is mentioned by\",\n  prefix: EdgeAddress.append(edgePrefix, \"references\", \"user\"),\n  defaultWeight: {forwards: 1 / 2, backwards: 0},\n  description: \"Connects a Discourse post to a user it mentions\",\n});\n\nexport const declaration: PluginDeclaration = deepFreeze({\n  name: \"Discourse\",\n  nodePrefix,\n  edgePrefix,\n  nodeTypes: [userNodeType, topicNodeType, postNodeType, likeNodeType],\n  edgeTypes: [\n    postRepliesEdgeType,\n    authorsTopicEdgeType,\n    authorsPostEdgeType,\n    topicContainsPostEdgeType,\n    topicHasLikedPostEdgeType,\n    likesEdgeType,\n    createsLikeEdgeType,\n    referencesPostEdgeType,\n    referencesTopicEdgeType,\n    referencesUserEdgeType,\n  ],\n  userTypes: [userNodeType],\n});\n","// @flow\n\nimport {NodeAddress, type NodeAddressT} from \"../../core/graph\";\n\nimport {type PostId, type TopicId, type LikeAction} from \"./fetch\";\n\nimport {\n  topicNodeType,\n  postNodeType,\n  userNodeType,\n  likeNodeType,\n} from \"./declaration\";\n\nexport function topicAddress(serverUrl: string, id: TopicId): NodeAddressT {\n  return NodeAddress.append(topicNodeType.prefix, serverUrl, String(id));\n}\n\nexport function postAddress(serverUrl: string, id: PostId): NodeAddressT {\n  return NodeAddress.append(postNodeType.prefix, serverUrl, String(id));\n}\n\nexport function userAddress(serverUrl: string, username: string): NodeAddressT {\n  return NodeAddress.append(userNodeType.prefix, serverUrl, username);\n}\n\nexport function likeAddress(serverUrl: string, like: LikeAction): NodeAddressT {\n  return NodeAddress.append(\n    likeNodeType.prefix,\n    serverUrl,\n    like.username,\n    String(like.postId)\n  );\n}\n","// @flow\n\nimport deepFreeze from \"deep-freeze\";\nimport type {PluginDeclaration} from \"../../analysis/pluginDeclaration\";\nimport type {NodeType, EdgeType} from \"../../analysis/types\";\nimport {\n  NodeAddress,\n  EdgeAddress,\n  type NodeAddressT,\n  type EdgeAddressT,\n} from \"../../core/graph\";\n\nexport const nodePrefix: NodeAddressT = NodeAddress.fromParts([\n  \"sourcecred\",\n  \"discord\",\n]);\nexport const edgePrefix: EdgeAddressT = EdgeAddress.fromParts([\n  \"sourcecred\",\n  \"discord\",\n]);\n\nexport const memberNodeType: NodeType = deepFreeze({\n  name: \"Member\",\n  pluralName: \"Members\",\n  prefix: NodeAddress.append(nodePrefix, \"MEMBER\"),\n  defaultWeight: 0,\n  description: \"A member of the Discord server\",\n});\n\nexport const messageNodeType: NodeType = deepFreeze({\n  name: \"Message\",\n  pluralName: \"Messages\",\n  prefix: NodeAddress.append(nodePrefix, \"MESSAGE\"),\n  defaultWeight: 0,\n  description: \"A Discord message, posted in a particular channel\",\n});\n\nexport const reactionNodeType: NodeType = deepFreeze({\n  name: \"Reaction\",\n  pluralName: \"Reactions\",\n  prefix: NodeAddress.append(nodePrefix, \"REACTION\"),\n  defaultWeight: 1,\n  description: \"A reaction by some user, directed at some message\",\n});\n\nexport const authorsMessageEdgeType: EdgeType = deepFreeze({\n  forwardName: \"authors message\",\n  backwardName: \"message is authored by\",\n  prefix: EdgeAddress.append(edgePrefix, \"AUTHORS\", \"MESSAGE\"),\n  defaultWeight: {forwards: 1 / 4, backwards: 1},\n  description: \"Connects an author to a message they've created.\",\n});\n\nexport const addsReactionEdgeType: EdgeType = deepFreeze({\n  forwardName: \"adds reaction\",\n  backwardName: \"reaction added by\",\n  prefix: EdgeAddress.append(edgePrefix, \"ADDS_REACTION\"),\n  defaultWeight: {forwards: 1, backwards: 1 / 16},\n  description: \"Connects a member to a reaction that they added.\",\n});\n\nexport const reactsToEdgeType: EdgeType = deepFreeze({\n  forwardName: \"reacts to\",\n  backwardName: \"is reacted to by\",\n  prefix: EdgeAddress.append(edgePrefix, \"REACTS_TO\"),\n  defaultWeight: {forwards: 1, backwards: 1 / 16},\n  description: \"Connects a reaction to a message that it reacts to.\",\n});\n\nexport const mentionsEdgeType: EdgeType = deepFreeze({\n  forwardName: \"mentions\",\n  backwardName: \"is mentioned by\",\n  prefix: EdgeAddress.append(edgePrefix, \"MENTIONS\"),\n  defaultWeight: {forwards: 1, backwards: 1 / 16},\n  description: \"Connects a message to the member being mentioned.\",\n});\n\nexport const propsEdgeType: EdgeType = deepFreeze({\n  forwardName: \"gives props to\",\n  backwardName: \"recieves props from\",\n  prefix: EdgeAddress.append(edgePrefix, \"PROPS\"),\n  // We set the default forward weight to 19x because message authors get a\n  // 1x weight by default, so in the most common case of a props with a\n  // single recipient, the props author will get 5% of the Cred and the\n  // props-ee will get 95%.\n  defaultWeight: {forwards: 19, backwards: 1 / 16},\n  description: \"Connects a props message to the person getting props\",\n});\n\nexport const declaration: PluginDeclaration = deepFreeze({\n  name: \"Discord\",\n  nodePrefix,\n  edgePrefix,\n  nodeTypes: [memberNodeType, messageNodeType, reactionNodeType],\n  edgeTypes: [\n    authorsMessageEdgeType,\n    addsReactionEdgeType,\n    reactsToEdgeType,\n    mentionsEdgeType,\n    propsEdgeType,\n  ],\n  userTypes: [memberNodeType],\n});\n","// @flow\n\n// https://discordapp.com/developers/docs/reference#snowflakes\nexport type Snowflake = string;\nexport const ZeroSnowflake: Snowflake = \"0\";\n\nexport type Guild = {|\n  +id: Snowflake,\n  +name: string,\n  +permissions: number,\n|};\n\nexport type BotToken = string;\n\n// https://discordapp.com/developers/docs/resources/channel#channel-object-channel-types\nexport type ChannelType =\n  | \"GUILD_TEXT\"\n  | \"DM\"\n  | \"GUILD_VOICE\"\n  | \"GROUP_DM\"\n  | \"GUILD_CATEGORY\"\n  | \"GUILD_NEWS\"\n  | \"GUILD_STORE\"\n  | \"UNKNOWN\";\n\nexport function channelTypeFromId(id: number): ChannelType {\n  switch (id) {\n    case 0:\n      return \"GUILD_TEXT\";\n    case 1:\n      return \"DM\";\n    case 2:\n      return \"GUILD_VOICE\";\n    case 3:\n      return \"GROUP_DM\";\n    case 4:\n      return \"GUILD_CATEGORY\";\n    case 5:\n      return \"GUILD_NEWS\";\n    case 6:\n      return \"GUILD_STORE\";\n    default: {\n      return \"UNKNOWN\";\n    }\n  }\n}\n\nexport type Channel = {|\n  +id: Snowflake,\n  +type: ChannelType,\n  +name: string,\n  +nsfw?: boolean,\n  +parentId?: Snowflake,\n|};\n\nexport type Role = {|\n  +id: Snowflake,\n  +name: string,\n|};\n\nexport type User = {|\n  +id: Snowflake,\n  +username: string,\n  +discriminator: string,\n  +bot: boolean,\n|};\n\nexport type GuildMember = {|\n  +user: User,\n  +nick: ?string,\n  +roles: $ReadOnlyArray<Snowflake>,\n|};\n\nexport type Emoji = {|\n  +id: ?Snowflake,\n  +name: string,\n|};\n\nexport type EmojiRef = string;\n\nexport function emojiToRef({id, name}: Emoji): EmojiRef {\n  // Built-in emoji, unicode names.\n  if (!id) return name;\n\n  // Custom emoji.\n  return `${name}:${id}`;\n}\n\nexport function refToEmoji(ref: EmojiRef): Emoji {\n  const [name, id] = ref.split(\":\");\n  if (!id) return {id: null, name};\n  return {id, name};\n}\n\nexport type Message = {|\n  +id: Snowflake,\n  +channelId: Snowflake,\n  +authorId: Snowflake,\n  // Could be a message from a webhook, meaning the authorId isn't a user.\n  +nonUserAuthor: boolean,\n  +timestampMs: number,\n  +content: string,\n  // Normally includes reaction counters, but we don't care about counters.\n  // We could filter based on which types of emoji have been added though.\n  +reactionEmoji: $ReadOnlyArray<Emoji>,\n  // Snowflake of user IDs.\n  +mentions: $ReadOnlyArray<Mention>,\n|};\n\nexport type Mention = {|\n  +userId: Snowflake,\n  +count: number,\n|};\n\nexport type Reaction = {|\n  +channelId: Snowflake,\n  +messageId: Snowflake,\n  +authorId: Snowflake,\n  +emoji: Emoji,\n|};\n","// @flow\n\n/*\n * A template tag function that performs dedenting on the template, but\n * not its arguments.\n *\n * For instance, given the template\n *\n *     |dedent`\\\n *     |    one ${one}\n *     |        two ${two}\n *     |    done`,\n *\n * where `one === \"1\"` and `two === \"\\n    2\"`, the template string\n * would expand to \"one 1\\n    two\\n    2\\ndone\". Note that four spaces\n * of indentation were stripped off of each of \"one\" and \"two\", but not\n * from \"2\".\n *\n * Lines that contain only whitespace are not used for measuring.\n */\nexport default function dedent(strings: string[], ...values: string[]): string {\n  const lineLengths = strings\n    .join(\"\")\n    .split(\"\\n\")\n    .filter((line) => line.trim().length !== 0)\n    .map((line) => line.length - line.trimLeft().length);\n  const trimAmount = Math.min.apply(null, lineLengths);\n\n  const parts = [];\n  for (let i = 0; i < strings.length; i++) {\n    const trimmed = strings[i]\n      .split(\"\\n\")\n      .map((line, j) => (i === 0 || j > 0 ? line.substr(trimAmount) : line))\n      .join(\"\\n\");\n    parts.push(trimmed);\n    if (i < values.length) {\n      parts.push(values[i]);\n    }\n  }\n  return parts.join(\"\");\n}\n","// @flow\n\nimport type Database from \"better-sqlite3\";\nimport stringify from \"json-stable-stringify\";\nimport * as Model from \"./models\";\nimport dedent from \"../../util/dedent\";\n\nconst VERSION = \"discord_mirror_v1\";\n\nexport class SqliteMirrorRepository {\n  +_db: Database;\n\n  constructor(db: Database, guild: Model.Snowflake) {\n    if (db == null) throw new Error(\"db: \" + String(db));\n    this._db = db;\n    this._transaction(() => {\n      this._initialize(guild);\n    });\n  }\n\n  _transaction(queries: () => void) {\n    const db = this._db;\n    if (db.inTransaction) {\n      throw new Error(\"already in transaction\");\n    }\n    try {\n      db.prepare(\"BEGIN\").run();\n      queries();\n      if (db.inTransaction) {\n        db.prepare(\"COMMIT\").run();\n      }\n    } finally {\n      if (db.inTransaction) {\n        db.prepare(\"ROLLBACK\").run();\n      }\n    }\n  }\n\n  _initialize(guild: Model.Snowflake) {\n    const db = this._db;\n    // We store the config in a singleton table `meta`, whose unique row\n    // has primary key `0`. Only the first ever insert will succeed; we\n    // are locked into the first config.\n    db.prepare(\n      dedent`\\\n        CREATE TABLE IF NOT EXISTS meta (\n            zero INTEGER PRIMARY KEY,\n            config TEXT NOT NULL\n        )\n      `\n    ).run();\n\n    const config = stringify({\n      version: VERSION,\n      guild,\n    });\n\n    const existingConfig: string | void = db\n      .prepare(\"SELECT config FROM meta\")\n      .pluck()\n      .get();\n    if (existingConfig === config) {\n      // Already set up; nothing to do.\n      return;\n    } else if (existingConfig !== undefined) {\n      throw new Error(\n        \"Database already populated with incompatible server or version\"\n      );\n    }\n    db.prepare(\"INSERT INTO meta (zero, config) VALUES (0, ?)\").run(config);\n\n    const tables = [\n      dedent`\\\n        CREATE TABLE channels (\n            id TEXT PRIMARY KEY,\n            type TEXT NOT NULL,\n            name TEXT NOT NULL,\n            parent_id TEXT\n        )\n      `,\n      dedent`\\\n        CREATE TABLE members (\n            user_id TEXT PRIMARY KEY,\n            username TEXT NOT NULL,\n            discriminator TEXT NOT NULL,\n            bot INTEGER NOT NULL,\n            nick TEXT\n        )\n      `,\n      dedent`\\\n        CREATE TABLE member_roles (\n            user_id TEXT,\n            role TEXT NOT NULL,\n            CONSTRAINT user_role PRIMARY KEY (user_id, role)\n        )\n      `,\n      dedent`\\\n        CREATE TABLE messages (\n            id TEXT PRIMARY KEY,\n            channel_id TEXT NOT NULL,\n            author_id TEXT NOT NULL,\n            non_user_author INTEGER NOT NULL,\n            timestamp_ms INTEGER NOT NULL,\n            content TEXT NOT NULL\n        )\n      `,\n      dedent`\\\n        CREATE TABLE message_reactions (\n            channel_id TEXT NOT NULL,\n            message_id TEXT NOT NULL,\n            author_id TEXT NOT NULL,\n            emoji TEXT NOT NULL,\n            CONSTRAINT value_object PRIMARY KEY (channel_id, message_id, author_id, emoji)\n        )\n      `,\n      dedent`\\\n        CREATE TABLE message_mentions (\n            channel_id TEXT NOT NULL,\n            message_id TEXT NOT NULL,\n            user_id TEXT NOT NULL,\n            count INTEGER NOT NULL,\n            CONSTRAINT value_object PRIMARY KEY (channel_id, message_id, user_id)\n        )\n      `,\n    ];\n    for (const sql of tables) {\n      db.prepare(sql).run();\n    }\n  }\n\n  members(): $ReadOnlyArray<Model.GuildMember> {\n    return this._db\n      .prepare(\n        dedent`\\\n        SELECT\n          user_id,\n          username,\n          discriminator,\n          bot,\n          nick\n        FROM members`\n      )\n      .all()\n      .map((x) => ({\n        user: {\n          id: x.user_id,\n          username: x.username,\n          discriminator: x.discriminator,\n          bot: x.bot === 1,\n        },\n        nick: x.nick,\n        roles: this.memberRoles(x.user_id),\n      }));\n  }\n\n  memberRoles(user: Model.Snowflake): $ReadOnlyArray<Model.Snowflake> {\n    return this._db\n      .prepare(\n        dedent`\\\n        SELECT\n          user_id,\n          role\n        FROM member_roles\n        WHERE user_id = :user_id`\n      )\n      .all({user_id: user})\n      .map((x) => x.role);\n  }\n\n  channels(): $ReadOnlyArray<Model.Channel> {\n    return this._db\n      .prepare(\n        dedent`\\\n        SELECT\n          id,\n          type,\n          name,\n          parent_id\n        FROM channels`\n      )\n      .all()\n      .map((res) => ({\n        id: res.id,\n        type: res.type,\n        name: res.name,\n        parentId: res.parent_id,\n      }));\n  }\n\n  messages(channel: Model.Snowflake): $ReadOnlyArray<Model.Message> {\n    return this._db\n      .prepare(\n        dedent`\\\n        SELECT\n          id,\n          channel_id,\n          author_id,\n          non_user_author,\n          timestamp_ms,\n          content\n        FROM messages\n        WHERE channel_id = :channel_id`\n      )\n      .all({channel_id: channel})\n      .map((m) => ({\n        id: m.id,\n        channelId: m.channel_id,\n        authorId: m.author_id,\n        nonUserAuthor: m.non_user_author === 1,\n        timestampMs: m.timestamp_ms,\n        content: m.content,\n        reactionEmoji: this.reactionEmoji(m.channel_id, m.id),\n        mentions: this.mentions(m.channel_id, m.id),\n      }));\n  }\n\n  nthMessageFromTail(channel: Model.Snowflake, n: number): ?Model.Message {\n    const count = this._db\n      .prepare(\n        dedent`\\\n        SELECT count(*) as count\n        FROM messages\n        WHERE channel_id = :channel_id`\n      )\n      .get({channel_id: channel}).count;\n\n    if (count < n) return null;\n    const offset = count - n;\n    const m = this._db\n      .prepare(\n        dedent`\\\n        SELECT\n          id,\n          channel_id,\n          author_id,\n          non_user_author,\n          timestamp_ms,\n          content\n        FROM messages\n        WHERE channel_id = :channel_id\n        ORDER BY timestamp_ms\n        LIMIT 1\n        OFFSET :offset\n        `\n      )\n      .get({channel_id: channel, offset});\n\n    return {\n      id: m.id,\n      channelId: m.channel_id,\n      authorId: m.author_id,\n      nonUserAuthor: m.non_user_author === 1,\n      timestampMs: m.timestamp_ms,\n      content: m.content,\n      reactionEmoji: this.reactionEmoji(m.channel_id, m.id),\n      mentions: this.mentions(m.channel_id, m.id),\n    };\n  }\n\n  mentions(\n    channel: Model.Snowflake,\n    message: Model.Snowflake\n  ): $ReadOnlyArray<Model.Mention> {\n    return this._db\n      .prepare(\n        dedent`\\\n        SELECT user_id, count\n        FROM message_mentions\n        WHERE channel_id = :channel_id\n          AND message_id = :message_id`\n      )\n      .all({channel_id: channel, message_id: message})\n      .map((res) => ({userId: res.user_id, count: res.count}));\n  }\n\n  reactionEmoji(\n    channel: Model.Snowflake,\n    message: Model.Snowflake\n  ): $ReadOnlyArray<Model.Emoji> {\n    return this._db\n      .prepare(\n        dedent`\\\n        SELECT DISTINCT\n          emoji\n        FROM message_reactions\n        WHERE channel_id = :channel_id\n          AND message_id = :message_id`\n      )\n      .all({channel_id: channel, message_id: message})\n      .map((e) => Model.refToEmoji(e.emoji));\n  }\n\n  reactions(\n    channel: Model.Snowflake,\n    message: Model.Snowflake\n  ): $ReadOnlyArray<Model.Reaction> {\n    return this._db\n      .prepare(\n        dedent`\\\n        SELECT\n          channel_id,\n          message_id,\n          author_id,\n          emoji\n        FROM message_reactions\n        WHERE channel_id = :channel_id\n          AND message_id = :message_id`\n      )\n      .all({channel_id: channel, message_id: message})\n      .map((r) => ({\n        channelId: r.channel_id,\n        messageId: r.message_id,\n        authorId: r.author_id,\n        emoji: Model.refToEmoji(r.emoji),\n      }));\n  }\n\n  addChannel(channel: Model.Channel) {\n    this._db\n      .prepare(\n        dedent`\\\n          INSERT OR IGNORE INTO channels (\n              id,\n              type,\n              name,\n              parent_id\n          ) VALUES (\n              :id,\n              :type,\n              :name,\n              :parent_id\n          )\n        `\n      )\n      .run({\n        id: channel.id,\n        type: channel.type,\n        name: channel.name,\n        parent_id: channel.parentId || null,\n      });\n  }\n\n  addMessage(message: Model.Message) {\n    this._db\n      .prepare(\n        dedent`\\\n          INSERT OR IGNORE INTO messages (\n              id,\n              channel_id,\n              author_id,\n              non_user_author,\n              timestamp_ms,\n              content\n          ) VALUES (\n              :id,\n              :channel_id,\n              :author_id,\n              :non_user_author,\n              :timestamp_ms,\n              :content\n          )\n        `\n      )\n      .run({\n        id: message.id,\n        channel_id: message.channelId,\n        author_id: message.authorId,\n        non_user_author: Number(message.nonUserAuthor),\n        timestamp_ms: message.timestampMs,\n        content: message.content,\n      });\n\n    for (const mention of message.mentions) {\n      this.addMention(message, mention);\n    }\n  }\n\n  addReaction(reaction: Model.Reaction) {\n    this._db\n      .prepare(\n        dedent`\\\n          INSERT OR IGNORE INTO message_reactions (\n              channel_id,\n              message_id,\n              author_id,\n              emoji\n          ) VALUES (\n              :channel_id,\n              :message_id,\n              :author_id,\n              :emoji\n          )\n        `\n      )\n      .run({\n        channel_id: reaction.channelId,\n        message_id: reaction.messageId,\n        author_id: reaction.authorId,\n        emoji: Model.emojiToRef(reaction.emoji),\n      });\n  }\n\n  addMention(message: Model.Message, mention: Model.Mention) {\n    this._db\n      .prepare(\n        dedent`\\\n          INSERT OR IGNORE INTO message_mentions (\n              channel_id,\n              message_id,\n              user_id,\n              count\n          ) VALUES (\n              :channel_id,\n              :message_id,\n              :user_id,\n              :count\n          )\n        `\n      )\n      .run({\n        channel_id: message.channelId,\n        message_id: message.id,\n        user_id: mention.userId,\n        count: mention.count,\n      });\n  }\n\n  addMember(member: Model.GuildMember) {\n    this._db\n      .prepare(\n        dedent`\\\n          INSERT OR IGNORE INTO members (\n              user_id,\n              username,\n              discriminator,\n              bot,\n              nick\n          ) VALUES (\n              :user_id,\n              :username,\n              :discriminator,\n              :bot,\n              :nick\n          )\n        `\n      )\n      .run({\n        user_id: member.user.id,\n        username: member.user.username,\n        discriminator: member.user.discriminator,\n        bot: Number(member.user.bot),\n        nick: member.nick || null,\n      });\n\n    for (const role of member.roles) {\n      this.addMemberRole(member.user.id, role);\n    }\n  }\n\n  addMemberRole(user: Model.Snowflake, role: Model.Snowflake) {\n    this._db\n      .prepare(\n        dedent`\\\n          INSERT OR IGNORE INTO member_roles (\n              user_id,\n              role\n          ) VALUES (\n              :user_id,\n              :role\n          )\n        `\n      )\n      .run({\n        user_id: user,\n        role,\n      });\n  }\n}\n","// @flow\n\nimport deepEqual from \"lodash.isequal\";\nimport * as MapUtil from \"../util/map\";\nimport * as C from \"../util/combo\";\nimport {\n  type NodeAddressT,\n  type EdgeAddressT,\n  NodeAddress,\n  EdgeAddress,\n} from \"../core/graph\";\nimport {toCompat, type Compatible, compatibleParser} from \"../util/compat\";\n\n/**\n * Represents the weight for a particular Node (or node address prefix).\n * Weight 1 is the default value and signifies normal importance.\n * Weights are linear, so 2 is twice as important as 1.\n */\nexport type NodeWeight = number;\n\nexport type NodeOperator = (NodeWeight, NodeWeight) => NodeWeight;\n\n/**\n * Represents the forwards and backwards weights for a particular Edge (or\n * edge address prefix).\n * Weight 1 is the default value and signifies normal importance.\n * Weights are linear, so 2 is twice as important as 1.\n */\nexport type EdgeWeight = {|+forwards: number, +backwards: number|};\nexport const edgeWeightParser: C.Parser<EdgeWeight> = C.object({\n  forwards: C.number,\n  backwards: C.number,\n});\n\nexport type EdgeOperator = (EdgeWeight, EdgeWeight) => EdgeWeight;\n\n/**\n * Represents the weights for nodes and edges.\n *\n * The weights are stored by address prefix, i.e. multiple weights may apply\n * to a given node or edge.\n */\nexport type WeightsT = {|\n  nodeWeights: Map<NodeAddressT, NodeWeight>,\n  // Map from an edge prefix or address to a weight\n  edgeWeights: Map<EdgeAddressT, EdgeWeight>,\n|};\n\n/**\n * Creates new, empty weights.\n */\nexport function empty(): WeightsT {\n  return {\n    nodeWeights: new Map(),\n    edgeWeights: new Map(),\n  };\n}\n\nexport function copy(w: WeightsT): WeightsT {\n  return {\n    nodeWeights: new Map(w.nodeWeights),\n    edgeWeights: new Map(w.edgeWeights),\n  };\n}\n\n/** Merge multiple Weights together.\n *\n * The resultant Weights will have every weight specified by each of the input\n * weights.\n *\n * When there are overlaps (i.e. the same address is present in two or more of\n * the Weights), then the appropriate resolver will be invoked to resolve the\n * conflict. The resolver takes two weights and combines them to return a new\n * weight.\n *\n * When no resolvers are explicitly provided, merge defaults to\n * conservative \"error on conflict\" resolvers.\n */\nexport function merge(\n  ws: $ReadOnlyArray<WeightsT>,\n  resolvers: ?{|+nodeResolver: NodeOperator, +edgeResolver: EdgeOperator|}\n): WeightsT {\n  if (resolvers == null) {\n    const nodeResolver = (_unused_a, _unused_b) => {\n      throw new Error(\n        \"node weight conflict detected, but no resolver specified\"\n      );\n    };\n    const edgeResolver = (_unused_a, _unused_b) => {\n      throw new Error(\n        \"edge weight conflict detected, but no resolver specified\"\n      );\n    };\n    resolvers = {nodeResolver, edgeResolver};\n  }\n  const weights: WeightsT = empty();\n  const {nodeWeights, edgeWeights} = weights;\n  const {nodeResolver, edgeResolver} = resolvers;\n  for (const w of ws) {\n    for (const [addr, val] of w.nodeWeights.entries()) {\n      const existing = nodeWeights.get(addr);\n      if (existing == null) {\n        nodeWeights.set(addr, val);\n      } else {\n        try {\n          nodeWeights.set(addr, nodeResolver(existing, val));\n        } catch (e) {\n          throw new Error(`${e} when resolving ${NodeAddress.toString(addr)}`);\n        }\n      }\n    }\n    for (const [addr, val] of w.edgeWeights.entries()) {\n      const existing = edgeWeights.get(addr);\n      if (existing == null) {\n        edgeWeights.set(addr, val);\n      } else {\n        try {\n          edgeWeights.set(addr, edgeResolver(existing, val));\n        } catch (e) {\n          throw new Error(\n            `Error ${e} when resolving ${EdgeAddress.toString(addr)}`\n          );\n        }\n      }\n    }\n  }\n  return weights;\n}\n\nexport type SerializedWeights_0_2_0 = {|\n  +nodeWeights: {[NodeAddressT]: NodeWeight},\n  +edgeWeights: {[EdgeAddressT]: EdgeWeight},\n|};\n\nfunction serialize_0_2_0(weights: WeightsT): SerializedWeights_0_2_0 {\n  return {\n    nodeWeights: MapUtil.toObject(weights.nodeWeights),\n    edgeWeights: MapUtil.toObject(weights.edgeWeights),\n  };\n}\n\nfunction deserialize_0_2_0(weights: SerializedWeights_0_2_0): WeightsT {\n  return {\n    nodeWeights: MapUtil.fromObject(weights.nodeWeights),\n    edgeWeights: MapUtil.fromObject(weights.edgeWeights),\n  };\n}\n\nconst Parse_0_2_0: C.Parser<SerializedWeights_0_2_0> = (() => {\n  return C.object({\n    nodeWeights: C.dict(C.number, NodeAddress.parser),\n    edgeWeights: C.dict(edgeWeightParser, EdgeAddress.parser),\n  });\n})();\n\nconst COMPAT_INFO = {type: \"sourcecred/weights\", version: \"0.2.0\"};\n\nexport const parser: C.Parser<WeightsT> = compatibleParser(COMPAT_INFO.type, {\n  \"0.2.0\": C.fmap(Parse_0_2_0, deserialize_0_2_0),\n});\n\nexport type WeightsJSON_0_2_0 = Compatible<SerializedWeights_0_2_0>;\nexport type WeightsJSON = WeightsJSON_0_2_0;\n\nexport function toJSON(weights: WeightsT): WeightsJSON {\n  return toCompat(COMPAT_INFO, serialize_0_2_0(weights));\n}\n\nexport function fromJSON(json: WeightsJSON): WeightsT {\n  return parser.parseOrThrow(json);\n}\n\nexport type NodeWeightDiff = {|\n  +address: NodeAddressT,\n  +first: ?NodeWeight,\n  +second: ?NodeWeight,\n|};\n\nexport type EdgeWeightDiff = {|\n  +address: EdgeAddressT,\n  +first: ?EdgeWeight,\n  +second: ?EdgeWeight,\n|};\n\nexport type WeightsComparison = {|\n  +weightsAreEqual: boolean,\n  +nodeWeightDiffs: $ReadOnlyArray<NodeWeightDiff>,\n  +edgeWeightDiffs: $ReadOnlyArray<EdgeWeightDiff>,\n|};\n\nexport function compareWeights(\n  firstWeights: WeightsT,\n  secondWeights: WeightsT\n): WeightsComparison {\n  const nodeWeightDiffs = [];\n  const edgeWeightDiffs = [];\n\n  const nodeAddresses = new Set([\n    ...firstWeights.nodeWeights.keys(),\n    ...secondWeights.nodeWeights.keys(),\n  ]);\n  for (const address of nodeAddresses) {\n    const first = firstWeights.nodeWeights.get(address);\n    const second = secondWeights.nodeWeights.get(address);\n    if (!deepEqual(first, second)) {\n      nodeWeightDiffs.push({\n        address,\n        first,\n        second,\n      });\n    }\n  }\n  const edgeAddresses = new Set([\n    ...firstWeights.edgeWeights.keys(),\n    ...secondWeights.edgeWeights.keys(),\n  ]);\n  for (const address of edgeAddresses) {\n    const first = firstWeights.edgeWeights.get(address);\n    const second = secondWeights.edgeWeights.get(address);\n    if (!deepEqual(first, second)) {\n      edgeWeightDiffs.push({\n        address,\n        first,\n        second,\n      });\n    }\n  }\n  const weightsAreEqual =\n    nodeWeightDiffs.length === 0 && edgeWeightDiffs.length === 0;\n\n  return {\n    weightsAreEqual,\n    nodeWeightDiffs,\n    edgeWeightDiffs,\n  };\n}\n","// @flow\n\nimport * as Model from \"./models\";\nimport {orElse} from \"../../util/null\";\nimport {type NodeWeight} from \"../../core/weights\";\nimport {type GraphReaction} from \"./createGraph\";\n\nexport type RoleWeightConfig = {|\n  +defaultWeight: NodeWeight,\n  +weights: {[Model.Snowflake]: NodeWeight},\n|};\n\nexport type ChannelWeightConfig = {|\n  +defaultWeight: NodeWeight,\n  // May contain channel IDs or channel category IDs\n  +weights: {[Model.Snowflake]: NodeWeight},\n|};\n\nexport type EmojiWeightMap = {[Model.Snowflake]: NodeWeight};\nexport type ReactionWeightConfig = {|\n  +weights: EmojiWeightMap,\n  +defaultWeight: NodeWeight,\n  +applyAveraging: boolean,\n  +confidenceDampener?: number,\n|};\n\nexport type WeightConfig = {|\n  +roleWeights: RoleWeightConfig,\n  +channelWeights: ChannelWeightConfig,\n  +emojiWeights: ReactionWeightConfig,\n|};\n\nexport function reactionWeight(options: {|\n  +weights: WeightConfig,\n  +message: Model.Message,\n  +reaction: Model.Reaction,\n  +reactingMember: Model.GuildMember,\n  +propsChannels: Set<Model.Snowflake>,\n  +reactions: $ReadOnlyArray<GraphReaction>,\n  +channelParentId: ?Model.Snowflake,\n|}): NodeWeight {\n  const {\n    weights,\n    message,\n    reaction,\n    reactingMember,\n    propsChannels,\n    reactions,\n    channelParentId,\n  } = options;\n  if (\n    message.authorId === reaction.authorId &&\n    !propsChannels.has(message.channelId)\n  ) {\n    // Self-reactions do not mint Cred\n    // on channels that are not props channels\n    return 0;\n  }\n\n  const roleMultipliedReactingMembers = weights.emojiWeights.applyAveraging\n    ? Array.from(\n        new Set(\n          reactions\n            .filter(({reaction}) => reaction.authorId !== message.authorId)\n            .map(({reactingMember}) => reactingMember)\n        )\n      ).reduce(\n        (total, member) => total + _roleWeight(weights.roleWeights, member),\n        0\n      ) + (weights.emojiWeights.confidenceDampener || 0)\n    : null;\n  const averagingMultiplier = roleMultipliedReactingMembers\n    ? 1 / roleMultipliedReactingMembers\n    : 1;\n\n  return (\n    _roleWeight(weights.roleWeights, reactingMember) *\n    channelWeight(weights.channelWeights, reaction.channelId, channelParentId) *\n    _emojiWeight(weights.emojiWeights, reaction) *\n    averagingMultiplier\n  );\n}\n\nexport function _roleWeight(\n  config: RoleWeightConfig,\n  member: Model.GuildMember\n): NodeWeight {\n  const {defaultWeight, weights} = config;\n  let weight = defaultWeight;\n  for (const role of member.roles) {\n    const matchingWeight = weights[role];\n    if (matchingWeight != null && matchingWeight > weight) {\n      weight = matchingWeight;\n    }\n  }\n  return weight;\n}\n\nexport function channelWeight(\n  config: ChannelWeightConfig,\n  channelId: Model.Snowflake,\n  channelParentId: ?Model.Snowflake\n): NodeWeight {\n  const {defaultWeight, weights} = config;\n  return orElse(\n    channelParentId\n      ? orElse(weights[channelId], weights[channelParentId])\n      : weights[channelId],\n    defaultWeight\n  );\n}\n\nexport function _emojiWeight(\n  config: ReactionWeightConfig,\n  reaction: Model.Reaction\n): NodeWeight {\n  const {defaultWeight, weights} = config;\n  return orElse(weights[Model.emojiToRef(reaction.emoji)], defaultWeight);\n}\n","// @flow\n\nimport {escape} from \"entities\";\nimport {type WeightedGraph as WeightedGraphT} from \"../../core/weightedGraph\";\nimport {empty as emptyWeights} from \"../../core/weights\";\nimport {\n  Graph,\n  NodeAddress,\n  EdgeAddress,\n  type Node,\n  type Edge,\n  type NodeAddressT,\n  type EdgeAddressT,\n} from \"../../core/graph\";\nimport {SqliteMirrorRepository} from \"./mirrorRepository\";\nimport {\n  memberNodeType,\n  messageNodeType,\n  reactionNodeType,\n  authorsMessageEdgeType,\n  addsReactionEdgeType,\n  reactsToEdgeType,\n  mentionsEdgeType,\n  propsEdgeType,\n} from \"./declaration\";\nimport * as Model from \"./models\";\n\nimport {type DiscordConfig} from \"./config\";\nimport {reactionWeight} from \"./reactionWeights\";\n\n// Display this many characters in description.\nconst MESSAGE_LENGTH = 30;\n\nfunction messageUrl(\n  guild: Model.Snowflake,\n  channel: Model.Snowflake,\n  message: Model.Snowflake\n) {\n  return `https://discordapp.com/channels/${guild}/${channel}/${message}`;\n}\n\nexport function userAddress(userId: Model.Snowflake): NodeAddressT {\n  return NodeAddress.append(memberNodeType.prefix, \"user\", userId);\n}\n\nexport function memberAddress(member: Model.GuildMember): NodeAddressT {\n  return NodeAddress.append(\n    memberNodeType.prefix,\n    member.user.bot ? \"bot\" : \"user\",\n    member.user.id\n  );\n}\n\nfunction messageAddress(message: Model.Message): NodeAddressT {\n  return NodeAddress.append(\n    messageNodeType.prefix,\n    message.channelId,\n    message.id\n  );\n}\n\nfunction reactionAddress(reaction: Model.Reaction): NodeAddressT {\n  // Hacky order, so we can boost categories.\n  return NodeAddress.append(\n    reactionNodeType.prefix,\n    reaction.channelId,\n    Model.emojiToRef(reaction.emoji),\n    reaction.authorId,\n    reaction.messageId\n  );\n}\n\nfunction memberNode(member: Model.GuildMember): Node {\n  const description = `discord/${escape(member.user.username.slice(0, 20))}#${\n    member.user.discriminator\n  }`;\n  return {\n    address: memberAddress(member),\n    description,\n    timestampMs: null,\n  };\n}\n\nfunction messageNode(\n  message: Model.Message,\n  guild: Model.Snowflake,\n  channelName: string\n): Node {\n  const url = messageUrl(guild, message.channelId, message.id);\n  const partialMessage = escape(message.content.substring(0, MESSAGE_LENGTH));\n  const description = `#${channelName} message [\"${partialMessage}...\"](${url})`;\n  return {\n    address: messageAddress(message),\n    description,\n    timestampMs: message.timestampMs,\n  };\n}\n\nfunction authorsMessageEdge(\n  message: Model.Message,\n  author: Model.GuildMember\n): Edge {\n  const address: EdgeAddressT = EdgeAddress.append(\n    authorsMessageEdgeType.prefix,\n    author.user.bot ? \"bot\" : \"user\",\n    author.user.id,\n    message.channelId,\n    message.id\n  );\n  return {\n    address,\n    timestampMs: message.timestampMs,\n    src: memberAddress(author),\n    dst: messageAddress(message),\n  };\n}\n\nfunction reactionNode(\n  reaction: Model.Reaction,\n  timestampMs: number,\n  guild: Model.Snowflake\n): Node {\n  const msgUrl = messageUrl(guild, reaction.channelId, reaction.messageId);\n  const reactionStr = reaction.emoji.id\n    ? `:${reaction.emoji.name}:`\n    : reaction.emoji.name;\n  const description = `Reacted \\`${reactionStr}\\` to message [${reaction.messageId}](${msgUrl})`;\n  return {\n    address: reactionAddress(reaction),\n    description,\n    timestampMs,\n  };\n}\n\nfunction addsReactionEdge(\n  reaction: Model.Reaction,\n  member: Model.GuildMember,\n  timestampMs: number\n): Edge {\n  const address: EdgeAddressT = EdgeAddress.append(\n    addsReactionEdgeType.prefix,\n    member.user.bot ? \"bot\" : \"user\",\n    member.user.id,\n    Model.emojiToRef(reaction.emoji),\n    reaction.channelId,\n    reaction.messageId\n  );\n  return {\n    address,\n    // TODO: for now using timestamp of the message,\n    // as reactions don't have timestamps.\n    timestampMs,\n    src: memberAddress(member),\n    dst: reactionAddress(reaction),\n  };\n}\n\nfunction reactsToEdge(reaction: Model.Reaction, message: Model.Message): Edge {\n  const address: EdgeAddressT = EdgeAddress.append(\n    reactsToEdgeType.prefix,\n    Model.emojiToRef(reaction.emoji),\n    reaction.authorId,\n    reaction.channelId,\n    reaction.messageId\n  );\n  return {\n    address,\n    // TODO: for now using timestamp of the message,\n    // as reactions don't have timestamps.\n    timestampMs: message.timestampMs,\n    src: reactionAddress(reaction),\n    dst: messageAddress(message),\n  };\n}\n\nfunction mentionsEdge(message: Model.Message, member: Model.GuildMember): Edge {\n  const address: EdgeAddressT = EdgeAddress.append(\n    mentionsEdgeType.prefix,\n    message.channelId,\n    message.authorId,\n    message.id,\n    member.user.bot ? \"bot\" : \"user\",\n    member.user.id\n  );\n  return {\n    address,\n    timestampMs: message.timestampMs,\n    src: messageAddress(message),\n    dst: memberAddress(member),\n  };\n}\n\nfunction propsEdge(message: Model.Message, member: Model.GuildMember): Edge {\n  const address: EdgeAddressT = EdgeAddress.append(\n    propsEdgeType.prefix,\n    message.channelId,\n    message.authorId,\n    message.id,\n    member.user.bot ? \"bot\" : \"user\",\n    member.user.id\n  );\n  return {\n    address,\n    timestampMs: message.timestampMs,\n    src: messageAddress(message),\n    dst: memberAddress(member),\n  };\n}\n\nexport type GraphReaction = {|\n  +reaction: Model.Reaction,\n  +reactingMember: Model.GuildMember,\n|};\n\nexport type GraphMention = {|\n  +member: Model.GuildMember,\n  +count: number,\n|};\n\n/**\n * All of the information necessary to add a message to\n * the graph, along with its reactions and its mentions.\n */\nexport type GraphMessage = {|\n  +message: Model.Message,\n  +author: Model.GuildMember | null,\n  +reactions: $ReadOnlyArray<GraphReaction>,\n  +mentions: $ReadOnlyArray<GraphMention>,\n  // Included so we can apply any channel-based rules (e.g. creating props\n  // edges instead of mentions edges) at graph construction time.\n  +channelId: Model.Snowflake,\n  // Included because we want the channel name in the node description.\n  +channelName: string,\n  +channelParentId?: Model.Snowflake,\n|};\n\n/**\n * Find all of the messages that should go into the graph.\n * This will deliberately ignore messages that have no reactions, since\n * they have no Cred impact and don't need to go into the graph.\n */\nexport function* findGraphMessages(\n  repo: SqliteMirrorRepository\n): Iterable<GraphMessage> {\n  const memberMap = new Map(repo.members().map((m) => [m.user.id, m]));\n  for (const channel of repo.channels()) {\n    for (const message of repo.messages(channel.id)) {\n      if (message.nonUserAuthor) {\n        continue;\n      }\n\n      const reactions = [];\n      for (const reaction of repo.reactions(channel.id, message.id)) {\n        const reactingMember = memberMap.get(reaction.authorId);\n        if (!reactingMember) {\n          // Probably this user left the server.\n          // Let's ignore this reaction (keeping the rest of the message)\n          continue;\n        }\n        reactions.push({reaction, reactingMember});\n      }\n\n      const mentions = [];\n      for (const {userId, count} of message.mentions) {\n        const mentionedMember = memberMap.get(userId);\n        if (!mentionedMember) {\n          // Probably this user left the server.\n          // We'll skip this mention (keeping the rest of the message)\n          continue;\n        }\n        mentions.push({member: mentionedMember, count});\n      }\n      if (mentions.length === 0 && reactions.length === 0) {\n        // No valid mentions or reactions, meaning this message won't have real Cred effects.\n        // let's skip it.\n        continue;\n      }\n\n      const author = memberMap.get(message.authorId) || null;\n\n      yield {\n        message,\n        author,\n        reactions,\n        mentions,\n        channelName: channel.name,\n        channelId: channel.id,\n        channelParentId: channel.parentId,\n      };\n    }\n  }\n}\n\nexport function createGraph(\n  config: DiscordConfig,\n  repo: SqliteMirrorRepository\n): WeightedGraphT {\n  const graphMessages = findGraphMessages(repo);\n  return _createGraphFromMessages(config, graphMessages);\n}\n\nexport function _createGraphFromMessages(\n  config: DiscordConfig,\n  messages: Iterable<GraphMessage>\n): WeightedGraphT {\n  const wg = {\n    graph: new Graph(),\n    weights: emptyWeights(),\n  };\n  const {guildId, weights} = config;\n  const propsChannels = new Set(config.propsChannels);\n\n  for (const graphMessage of messages) {\n    const {\n      message,\n      author,\n      reactions,\n      mentions,\n      channelName,\n      channelId,\n      channelParentId,\n    } = graphMessage;\n\n    let messageWeight = 0;\n    for (const {reaction, reactingMember} of reactions) {\n      const weight = reactionWeight({\n        weights,\n        message,\n        reaction,\n        reactingMember,\n        propsChannels,\n        reactions,\n        channelParentId,\n      });\n      messageWeight += weight;\n      if (weight && !config.simplifyGraph) {\n        const node = reactionNode(reaction, message.timestampMs, guildId);\n        wg.weights.nodeWeights.set(node.address, weight);\n        wg.graph.addNode(node);\n        wg.graph.addNode(memberNode(reactingMember));\n        wg.graph.addEdge(reactsToEdge(reaction, message));\n        wg.graph.addEdge(\n          addsReactionEdge(reaction, reactingMember, message.timestampMs)\n        );\n      }\n    }\n    if (!messageWeight) continue;\n\n    if (author) {\n      wg.graph.addNode(memberNode(author));\n      wg.graph.addEdge(authorsMessageEdge(message, author));\n    }\n    wg.graph.addNode(messageNode(message, guildId, channelName));\n    if (config.simplifyGraph)\n      wg.weights.nodeWeights.set(messageAddress(message), messageWeight);\n\n    for (const {member, count} of mentions) {\n      wg.graph.addNode(memberNode(member));\n      let edge;\n      if (propsChannels.has(channelId)) {\n        edge = propsEdge(message, member);\n      } else {\n        edge = mentionsEdge(message, member);\n      }\n      wg.graph.addEdge(edge);\n      if (count > 1)\n        wg.weights.edgeWeights.set(edge.address, {\n          forwards: count,\n          backwards: 1,\n        });\n    }\n  }\n\n  return wg;\n}\n","// @flow\n\nimport * as C from \"../../util/combo\";\n\n/**\n * A Name is an identity name which has the following properties:\n * - It consists of alphanumeric ASCII and of dashes, which makes it suitable\n *   for including in urls (so we can give each contributor a hardcoded URL\n *   showing their contributions, Cred, and Grain).\n * - It is unique within an instance. Also, no two identities may have names that both\n *   have the same lowercase representation.\n * - It's chosen by (and changeable by) the owner of the identity.\n */\nexport opaque type Name: string = string;\nconst NAME_PATTERN = /^[A-Za-z0-9-]+$/;\n\n// Based on the length of an Ethereum address (with '0x' prefix)\nconst MAXIMUM_NAME_LENGTH = 42;\n\n/**\n * Parse a Name from a string.\n *\n * Throws an error if the Name is invalid.\n */\nexport function nameFromString(name: string): Name {\n  if (!name.match(NAME_PATTERN)) {\n    throw new Error(`invalid name: ${name}`);\n  }\n  if (name.length > MAXIMUM_NAME_LENGTH) {\n    throw new Error(`name too long: ${name}`);\n  }\n  return name;\n}\n\nconst COERCE_PATTERN = /[^A-Za-z0-9-]/g;\n/**\n * Attempt to coerce a string into a valid name, by replacing invalid\n * characters like `_` or `#` with hyphens.\n *\n * This can still error, if given a very long string or the empty string, it\n * will fail rather than try to change the name length.\n */\nexport function coerce(name: string): Name {\n  const coerced = name.replace(COERCE_PATTERN, \"-\");\n  return nameFromString(coerced);\n}\n\nexport const parser: C.Parser<Name> = C.fmap(C.string, nameFromString);\n","// @flow\n\nimport {escape} from \"entities\";\nimport {SqliteMirrorRepository} from \"./mirrorRepository\";\nimport * as Model from \"./models\";\nimport {memberAddress} from \"./createGraph\";\nimport {type IdentityProposal} from \"../../core/ledger/identityProposal\";\nimport {coerce, nameFromString} from \"../../core/identity/name\";\n\nexport function createIdentity(member: Model.GuildMember): IdentityProposal {\n  let name = member.nick || member.user.username;\n  name = coerce(name.slice(0, 39));\n  if (name.match(/^-+$/)) {\n    name = coerce(\"discord-\" + member.user.id);\n  }\n  const description = `discord/${escape(name)}#${member.user.discriminator}`;\n  const alias = {\n    description,\n    address: memberAddress(member),\n  };\n  const type = member.user.bot ? \"BOT\" : \"USER\";\n  return {\n    pluginName: nameFromString(\"discord\"),\n    name,\n    type,\n    alias,\n  };\n}\n\nexport function createIdentities(\n  repo: SqliteMirrorRepository\n): $ReadOnlyArray<IdentityProposal> {\n  return repo.members().map((m) => createIdentity(m));\n}\n","// @flow\n\nimport {createIdentity, createIdentities} from \"./createIdentities\";\n\nexport const identity = {\n  createIdentities,\n  createIdentity,\n};\n","// @flow\n\nimport deepFreeze from \"deep-freeze\";\nimport type {PluginDeclaration} from \"../../analysis/pluginDeclaration\";\nimport type {NodeType, EdgeType} from \"../../analysis/types\";\nimport {\n  NodeAddress,\n  EdgeAddress,\n  type NodeAddressT,\n  type EdgeAddressT,\n} from \"../../core/graph\";\nimport type {NodeEntryField} from \"./nodeEntry\";\n\nexport const nodePrefix: NodeAddressT = NodeAddress.fromParts([\n  \"sourcecred\",\n  \"initiatives\",\n]);\nexport const edgePrefix: EdgeAddressT = EdgeAddress.fromParts([\n  \"sourcecred\",\n  \"initiatives\",\n]);\n\nexport const initiativeNodeType: NodeType = deepFreeze({\n  name: \"Initiative\",\n  pluralName: \"Initiatives\",\n  prefix: NodeAddress.append(nodePrefix, \"initiative\"),\n  defaultWeight: 1,\n  description:\n    \"An initiative supernode, describing a scoped improvement to a project from proposal to completion.\",\n});\n\n// Changes capitalization for the field for display purposes.\nexport function _formatNodeEntryField(field: NodeEntryField): string {\n  return field[0].toUpperCase() + field.substring(1).toLowerCase();\n}\n\nfunction nodeEntryType(field: NodeEntryField): NodeType {\n  const displayField = _formatNodeEntryField(field);\n  return deepFreeze({\n    name: `${displayField} Entry`,\n    pluralName: `${displayField} Entries`,\n    prefix: NodeAddress.append(nodePrefix, String(field)),\n    defaultWeight: 1,\n    description:\n      `A ${displayField.toLowerCase()} entry node, to easily include` +\n      `contributions when other plugins don't add it to the graph.`,\n  });\n}\n\n// Note: we're exporting an object map with `NodeEntryField` as the key type.\n// This allows a generalized lookup of the NodeType in graphing logic.\nexport const nodeEntryTypes: {[NodeEntryField]: NodeType} = deepFreeze({\n  CONTRIBUTION: nodeEntryType(\"CONTRIBUTION\"),\n  DEPENDENCY: nodeEntryType(\"DEPENDENCY\"),\n  REFERENCE: nodeEntryType(\"REFERENCE\"),\n});\n\n// Keeping with convention of other declarations, also name each type.\nexport const contributionEntryType = nodeEntryTypes.CONTRIBUTION;\nexport const dependencyEntryType = nodeEntryTypes.DEPENDENCY;\nexport const referenceEntryType = nodeEntryTypes.REFERENCE;\n\n/*\n  Note on the forward and backward naming convention.\n  It follows the core/graph.js documentation to use\n  a <subject> <verb> <object> format to figure out\n  the directionality.\n*/\n\n/**\n * An initiative (src) DEPENDS ON (verb) a dependency (dst).\n * Forward: depending on something shows the value of the dependency.\n * Backward: having a dependency does not endorse the iniative, but does flow\n * some cred to incentivize reuse and attribution.\n */\nexport const dependsOnEdgeType: EdgeType = deepFreeze({\n  forwardName: \"depends on\",\n  backwardName: \"is a dependency for\",\n  prefix: EdgeAddress.append(edgePrefix, \"dependsOn\"),\n  defaultWeight: {forwards: 1, backwards: 1 / 16},\n  description: \"Connects an initiative to it's dependencies.\",\n});\n\n/**\n * An initiative (src) REFERENCES (verb) a reference (dst).\n * Forward: referencing from an initiative shows the value of the reference.\n * But we assume a reference likely needs some refinement to be used by the initiative,\n * so it flows less cred than to a dependency.\n * Backward: having reference material does not endorse the iniative, but does flow\n * some cred to incentivize using existing research and attribution.\n */\nexport const referencesEdgeType: EdgeType = deepFreeze({\n  forwardName: \"references\",\n  backwardName: \"is referenced for\",\n  prefix: EdgeAddress.append(edgePrefix, \"references\"),\n  defaultWeight: {forwards: 1 / 2, backwards: 1 / 16},\n  description: \"Connects an initiative to it's references.\",\n});\n\n/**\n * A contribution (src) CONTRIBUTES TO (verb) an initiative (dst).\n * Forward: a contribution towards the initiative is also an endorsement of the\n * value of that initiative.\n * Backward: an initiative in large part consists of it's contributions, so the\n * value of an initiative caries over to it's contributions.\n */\nexport const contributesToEdgeType: EdgeType = deepFreeze({\n  forwardName: \"contributes to\",\n  backwardName: \"is contributed to by\",\n  prefix: EdgeAddress.append(edgePrefix, \"contributesTo\"),\n  defaultWeight: {forwards: 1, backwards: 1},\n  description: \"Connects an initiative to it's contributions.\",\n});\n\n/**\n * A contributor (src) CONTRIBUTES TO (verb) an entry node (dst).\n * Forward: a contributor towards the entry node has a small endorsement of that\n * contribution. Though a high weight would risk contributors' own cred gets\n * \"lost to alpha\".\n * Backward: flows the value of the contribution to the contributors.\n */\nexport const contributesToEntryEdgeType: EdgeType = deepFreeze({\n  forwardName: \"contributes to entry\",\n  backwardName: \"entry is contributed to by\",\n  prefix: EdgeAddress.append(edgePrefix, \"contributesToEntry\"),\n  defaultWeight: {forwards: 1 / 16, backwards: 1},\n  description: \"Connects a contributor to an entry node.\",\n});\n\n/**\n * A user (src) CHAMPIONS (verb) an initiative (dst).\n * Meaning forward is the user claiming and committing they will champion an\n * initiative. And backward is the return of cred based on the completion and\n * succesful championing of the ininiative.\n *\n * Forward: a user championing an iniative is also an endorsement of the value\n * of that initiative.\n * Backward: an initiative likely received a lot of ongoing support from it's\n * champion. We're assuming this is more support than individual contributions.\n */\nexport const championsEdgeType: EdgeType = deepFreeze({\n  forwardName: \"champions\",\n  backwardName: \"is championed by\",\n  prefix: EdgeAddress.append(edgePrefix, \"champions\"),\n  defaultWeight: {forwards: 1, backwards: 4},\n  description: \"Connects an initiative to users who champion it.\",\n});\n\nexport const declaration: PluginDeclaration = deepFreeze({\n  name: \"Initiatives\",\n  nodePrefix,\n  edgePrefix,\n  nodeTypes: [\n    initiativeNodeType,\n    contributionEntryType,\n    dependencyEntryType,\n    referenceEntryType,\n  ],\n  edgeTypes: [\n    dependsOnEdgeType,\n    referencesEdgeType,\n    contributesToEdgeType,\n    championsEdgeType,\n    contributesToEntryEdgeType,\n  ],\n  userTypes: [],\n});\n","// @flow\n\n// TODO(#638): Allow projects to specify bots via configuration,\n// rather than depending on this single souce of truth\nexport function botSet(): Set<string> {\n  return new Set([\n    \"codecov\",\n    \"codecov-io\",\n    \"credbot\",\n    \"facebook-github-bot\",\n    \"gitcoinbot\",\n    \"gitter-badger\",\n    \"googlebot\",\n    \"greenkeeper\",\n    \"greenkeeperio-bot\",\n    \"metamaskbot\",\n    \"nodejs-github-bot\",\n    \"stickler-ci\",\n    \"tensorflow-gardener\",\n    \"tensorflow-jenkins\",\n    \"tensorflowbutler\",\n    \"github-actions\",\n    \"vercel\",\n    \"codecov-commenter\",\n    \"transifex-integration\",\n    \"dependabot\",\n  ]);\n}\n","// @flow\n\nimport deepFreeze from \"deep-freeze\";\nimport {NodeAddress, type NodeAddressT} from \"../../core/graph\";\nimport {botSet} from \"./bots\";\n\nexport opaque type RawAddress: NodeAddressT = NodeAddressT;\n\nconst GITHUB_PREFIX = NodeAddress.fromParts([\"sourcecred\", \"github\"]);\nexport function _githubAddress(...parts: string[]): RawAddress {\n  return NodeAddress.append(GITHUB_PREFIX, ...parts);\n}\n\nexport const REPO_TYPE: \"REPO\" = \"REPO\";\nexport const ISSUE_TYPE: \"ISSUE\" = \"ISSUE\";\nexport const PULL_TYPE: \"PULL\" = \"PULL\";\nexport const REVIEW_TYPE: \"REVIEW\" = \"REVIEW\";\nexport const COMMENT_TYPE: \"COMMENT\" = \"COMMENT\";\nexport const COMMIT_TYPE: \"COMMIT\" = \"COMMIT\";\nexport const USERLIKE_TYPE: \"USERLIKE\" = \"USERLIKE\";\nexport const USER_SUBTYPE: \"USER\" = \"USER\";\nexport const BOT_SUBTYPE: \"BOT\" = \"BOT\";\n\nexport const Prefix: {|\n  base: NodeAddressT,\n  bot: RawAddress,\n  comment: RawAddress,\n  commit: RawAddress,\n  issue: RawAddress,\n  issueComment: RawAddress,\n  pull: RawAddress,\n  pullComment: RawAddress,\n  repo: RawAddress,\n  review: RawAddress,\n  reviewComment: RawAddress,\n  user: RawAddress,\n  userlike: RawAddress,\n|} = deepFreeze({\n  base: GITHUB_PREFIX,\n  repo: _githubAddress(REPO_TYPE),\n  issue: _githubAddress(ISSUE_TYPE),\n  pull: _githubAddress(PULL_TYPE),\n  review: _githubAddress(REVIEW_TYPE),\n  comment: _githubAddress(COMMENT_TYPE),\n  commit: _githubAddress(COMMIT_TYPE),\n  userlike: _githubAddress(USERLIKE_TYPE),\n  user: _githubAddress(USERLIKE_TYPE, USER_SUBTYPE),\n  bot: _githubAddress(USERLIKE_TYPE, BOT_SUBTYPE),\n  reviewComment: _githubAddress(COMMENT_TYPE, REVIEW_TYPE),\n  issueComment: _githubAddress(COMMENT_TYPE, ISSUE_TYPE),\n  pullComment: _githubAddress(COMMENT_TYPE, PULL_TYPE),\n});\n\n/**\n * Return the address corresponding to a GitHub login.\n *\n * If the login is considered a bot, then a bot address is returned. Otherwise,\n * a regular user address is returned. The method does not attempt to find out\n * whether the address should actually be an organization address, as we don't\n * yet handle organization addresses.\n *\n * Note: The signature will need to be refactored when we make the list of bots\n * a configuration option rather than a hardcoded constant.\n */\nexport function loginAddress(username: string): RawAddress {\n  const bots = botSet();\n  if (bots.has(username)) {\n    return NodeAddress.append(Prefix.bot, username);\n  } else {\n    return NodeAddress.append(Prefix.user, username);\n  }\n}\n\nexport type RepoAddress = {|\n  +type: typeof REPO_TYPE,\n  +owner: string,\n  +name: string,\n|};\nexport type IssueAddress = {|\n  +type: typeof ISSUE_TYPE,\n  +repo: RepoAddress,\n  +number: string,\n|};\nexport type PullAddress = {|\n  +type: typeof PULL_TYPE,\n  +repo: RepoAddress,\n  +number: string,\n|};\nexport type ReviewAddress = {|\n  +type: typeof REVIEW_TYPE,\n  +pull: PullAddress,\n  +id: string,\n|};\nexport type CommentAddress = {|\n  +type: typeof COMMENT_TYPE,\n  +parent: CommentableAddress,\n  +id: string,\n|};\nexport type CommitAddress = {|\n  +type: typeof COMMIT_TYPE,\n  +id: string,\n|};\nexport type UserlikeAddress = {|\n  +type: typeof USERLIKE_TYPE,\n  +subtype: typeof USER_SUBTYPE | typeof BOT_SUBTYPE,\n  +login: string,\n|};\n\nexport type StructuredAddress =\n  | RepoAddress\n  | IssueAddress\n  | PullAddress\n  | ReviewAddress\n  | CommentAddress\n  | CommitAddress\n  | UserlikeAddress;\n\n// Each of these types has 0 or more \"AUTHORS\" edges, each of which\n// leads to a UserlikeAddress.  Note: It is not true that every\n// Authorable has at least one author, as when GitHub accounts are\n// deleted, they leave behind posts without authors.\nexport type AuthorableAddress =\n  | IssueAddress\n  | PullAddress\n  | ReviewAddress\n  | CommentAddress\n  | CommitAddress;\n\n// Each of these types has text content, which means\n// it may be the source of a reference to a ReferentAddress.\nexport type TextContentAddress =\n  | IssueAddress\n  | PullAddress\n  | ReviewAddress\n  | CommentAddress\n  | CommitAddress;\n\n// Each of these types may be referred to by something\n// with text content.\nexport type ReferentAddress =\n  | RepoAddress\n  | IssueAddress\n  | PullAddress\n  | ReviewAddress\n  | CommentAddress\n  | CommitAddress\n  | UserlikeAddress;\n\n// Each of these types is structurally the child of some\n// entity with a ParentAddress.\nexport type ChildAddress =\n  | IssueAddress // child of RepoAddress\n  | PullAddress // child of RepoAddress\n  | ReviewAddress // child of PullAddress\n  | CommentAddress; // child of IssueAddress, PullAddress, or ReviewAddress\n\n// Each of these types may have child nodes (see ChildAddress).\nexport type ParentAddress =\n  | RepoAddress\n  | IssueAddress\n  | PullAddress\n  | ReviewAddress;\n\n// GitHub allows you to react to these types\nexport type ReactableAddress = IssueAddress | PullAddress | CommentAddress;\n\n// Each of these types may have Comments as children\nexport type CommentableAddress = IssueAddress | PullAddress | ReviewAddress;\n\n// Verify that Commentable is a subtype of Parent\nconst _unused_static = (_: CommentableAddress): ParentAddress => _;\n\nexport function fromRaw(x: RawAddress): StructuredAddress {\n  function fail() {\n    return new Error(`Bad address: ${NodeAddress.toString(x)}`);\n  }\n  if (!NodeAddress.hasPrefix(x, GITHUB_PREFIX)) {\n    throw fail();\n  }\n  const [_unused_sc, _unused_gh, kind, ...rest] = NodeAddress.toParts(x);\n  switch (kind) {\n    case REPO_TYPE: {\n      if (rest.length !== 2) {\n        throw fail();\n      }\n      const [owner, name] = rest;\n      return {type: REPO_TYPE, owner, name};\n    }\n    case ISSUE_TYPE: {\n      if (rest.length !== 3) {\n        throw fail();\n      }\n      const [owner, name, number] = rest;\n      const repo = {type: REPO_TYPE, owner, name};\n      return {type: ISSUE_TYPE, repo, number};\n    }\n    case PULL_TYPE: {\n      if (rest.length !== 3) {\n        throw fail();\n      }\n      const [owner, name, number] = rest;\n      const repo = {type: REPO_TYPE, owner, name};\n      return {type: PULL_TYPE, repo, number};\n    }\n    case REVIEW_TYPE: {\n      if (rest.length !== 4) {\n        throw fail();\n      }\n      const [owner, name, pullNumber, id] = rest;\n      const repo = {type: REPO_TYPE, owner, name};\n      const pull = {type: PULL_TYPE, repo, number: pullNumber};\n      return {type: REVIEW_TYPE, pull, id};\n    }\n    case COMMENT_TYPE: {\n      if (rest.length < 1) {\n        throw fail();\n      }\n      const [subkind, ...subrest] = rest;\n      switch (subkind) {\n        case ISSUE_TYPE: {\n          if (subrest.length !== 4) {\n            throw fail();\n          }\n          const [owner, name, issueNumber, id] = subrest;\n          const repo = {type: REPO_TYPE, owner, name};\n          const issue = {type: ISSUE_TYPE, repo, number: issueNumber};\n          return {type: COMMENT_TYPE, parent: issue, id};\n        }\n        case PULL_TYPE: {\n          if (subrest.length !== 4) {\n            throw fail();\n          }\n          const [owner, name, pullNumber, id] = subrest;\n          const repo = {type: REPO_TYPE, owner, name};\n          const pull = {type: PULL_TYPE, repo, number: pullNumber};\n          return {type: COMMENT_TYPE, parent: pull, id};\n        }\n        case REVIEW_TYPE: {\n          if (subrest.length !== 5) {\n            throw fail();\n          }\n          const [owner, name, pullNumber, reviewFragment, id] = subrest;\n          const repo = {type: REPO_TYPE, owner, name};\n          const pull = {type: PULL_TYPE, repo, number: pullNumber};\n          const review = {type: REVIEW_TYPE, pull, id: reviewFragment};\n          return {type: COMMENT_TYPE, parent: review, id};\n        }\n        default:\n          throw fail();\n      }\n    }\n    case COMMIT_TYPE: {\n      if (rest.length !== 1) {\n        throw fail();\n      }\n      const [id] = rest;\n      return {type: COMMIT_TYPE, id};\n    }\n    case USERLIKE_TYPE: {\n      if (rest.length !== 2) {\n        throw fail();\n      }\n      const [subtype, login] = rest;\n      if (subtype !== \"USER\" && subtype !== \"BOT\") {\n        throw fail();\n      }\n      return {type: USERLIKE_TYPE, subtype, login};\n    }\n    default:\n      throw fail();\n  }\n}\n\nexport function toRaw(x: StructuredAddress): RawAddress {\n  switch (x.type) {\n    case REPO_TYPE:\n      return NodeAddress.append(Prefix.repo, x.owner, x.name);\n    case ISSUE_TYPE:\n      return NodeAddress.append(\n        Prefix.issue,\n        x.repo.owner,\n        x.repo.name,\n        x.number\n      );\n    case PULL_TYPE:\n      return NodeAddress.append(\n        Prefix.pull,\n        x.repo.owner,\n        x.repo.name,\n        x.number\n      );\n    case REVIEW_TYPE:\n      return NodeAddress.append(\n        Prefix.review,\n        x.pull.repo.owner,\n        x.pull.repo.name,\n        x.pull.number,\n        x.id\n      );\n    case COMMENT_TYPE:\n      switch (x.parent.type) {\n        case ISSUE_TYPE:\n          return NodeAddress.append(\n            Prefix.issueComment,\n            x.parent.repo.owner,\n            x.parent.repo.name,\n            x.parent.number,\n            x.id\n          );\n        case PULL_TYPE:\n          return NodeAddress.append(\n            Prefix.pullComment,\n            x.parent.repo.owner,\n            x.parent.repo.name,\n            x.parent.number,\n            x.id\n          );\n        case REVIEW_TYPE:\n          return NodeAddress.append(\n            Prefix.reviewComment,\n            x.parent.pull.repo.owner,\n            x.parent.pull.repo.name,\n            x.parent.pull.number,\n            x.parent.id,\n            x.id\n          );\n        default:\n          throw new Error(`Bad comment parent type: ${(x.parent.type: empty)}`);\n      }\n    case USERLIKE_TYPE:\n      switch (x.subtype) {\n        case \"BOT\":\n          return NodeAddress.append(Prefix.bot, x.login);\n        case \"USER\":\n          return NodeAddress.append(Prefix.user, x.login);\n        default:\n          throw new Error((x.subtype: empty));\n      }\n    case COMMIT_TYPE:\n      return NodeAddress.append(Prefix.commit, x.id);\n    default:\n      throw new Error(`Unexpected type ${(x.type: empty)}`);\n  }\n}\n","// @flow\n\nimport deepFreeze from \"deep-freeze\";\nimport {NodeAddress, type NodeAddressT} from \"../../core/graph\";\nimport type {Hash} from \"./types\";\n\nexport opaque type RawAddress: NodeAddressT = NodeAddressT;\n\nconst GIT_PREFIX = NodeAddress.fromParts([\"sourcecred\", \"git\"]);\nexport function _gitAddress(...parts: string[]): RawAddress {\n  return NodeAddress.append(GIT_PREFIX, ...parts);\n}\n\nexport const COMMIT_TYPE: \"COMMIT\" = \"COMMIT\";\n\nexport const Prefix: {|base: NodeAddressT, commit: RawAddress|} = deepFreeze({\n  base: GIT_PREFIX,\n  commit: _gitAddress(COMMIT_TYPE),\n});\n\nexport type CommitAddress = {|\n  +type: typeof COMMIT_TYPE,\n  +hash: Hash,\n|};\n\nexport type StructuredAddress = CommitAddress;\n\nexport function fromRaw(x: RawAddress): StructuredAddress {\n  function fail() {\n    return new Error(`Bad address: ${NodeAddress.toString(x)}`);\n  }\n  if (!NodeAddress.hasPrefix(x, GIT_PREFIX)) {\n    throw fail();\n  }\n  const [_unused_sc, _unused_git, _type, ...rest] = NodeAddress.toParts(x);\n  const type: $ElementType<StructuredAddress, \"type\"> = (_type: any);\n  switch (type) {\n    case \"COMMIT\": {\n      if (rest.length !== 1) throw fail();\n      const [hash] = rest;\n      return {type: COMMIT_TYPE, hash};\n    }\n    default:\n      // eslint-disable-next-line no-unused-expressions\n      (type: empty);\n      throw fail();\n  }\n}\n\nexport function toRaw(x: StructuredAddress): RawAddress {\n  switch (x.type) {\n    case COMMIT_TYPE:\n      return NodeAddress.append(Prefix.commit, x.hash);\n    default:\n      throw new Error(`Unexpected type ${(x.type: empty)}`);\n  }\n}\n","// @flow\n\n// Autogenerated file. Do not edit.\n\nimport deepFreeze from \"deep-freeze\";\n\nexport type Actor = Bot | Organization | User;\n\nexport type Blob = {|\n  +__typename: \"Blob\",\n  +id: string,\n  +oid: GitObjectID,\n|};\n\nexport type Bot = {|\n  +__typename: \"Bot\",\n  +id: string,\n  +login: String,\n  +url: URI,\n|};\n\nexport type Commit = {|\n  +__typename: \"Commit\",\n  +author: null | {|\n    +date: null | GitTimestamp,\n    +user: null | Bot | User,\n  |},\n  +authoredDate: GitTimestamp,\n  +id: string,\n  +message: String,\n  +oid: GitObjectID,\n  +parents: $ReadOnlyArray<null | Commit>,\n  +url: URI,\n|};\n\nexport type DateTime = string;\n\nexport type GitObject = Blob | Commit | Tag | Tree;\n\nexport type GitObjectID = string;\n\nexport type GitTimestamp = string;\n\nexport type Int = number;\n\nexport type Issue = {|\n  +__typename: \"Issue\",\n  +author: null | Actor,\n  +body: String,\n  +comments: $ReadOnlyArray<null | IssueComment>,\n  +createdAt: DateTime,\n  +id: string,\n  +number: Int,\n  +reactions: $ReadOnlyArray<null | Reaction>,\n  +title: String,\n  +url: URI,\n|};\n\nexport type IssueComment = {|\n  +__typename: \"IssueComment\",\n  +author: null | Actor,\n  +body: String,\n  +createdAt: DateTime,\n  +id: string,\n  +reactions: $ReadOnlyArray<null | Reaction>,\n  +url: URI,\n|};\n\nexport type Organization = {|\n  +__typename: \"Organization\",\n  +id: string,\n  +login: String,\n  +url: URI,\n|};\n\nexport type PullRequest = {|\n  +__typename: \"PullRequest\",\n  +additions: Int,\n  +author: null | Actor,\n  +baseRefName: String,\n  +body: String,\n  +comments: $ReadOnlyArray<null | IssueComment>,\n  +createdAt: DateTime,\n  +deletions: Int,\n  +id: string,\n  +mergeCommit: null | Commit,\n  +number: Int,\n  +reactions: $ReadOnlyArray<null | Reaction>,\n  +reviews: $ReadOnlyArray<null | PullRequestReview>,\n  +title: String,\n  +url: URI,\n|};\n\nexport type PullRequestReview = {|\n  +__typename: \"PullRequestReview\",\n  +author: null | Actor,\n  +body: String,\n  +comments: $ReadOnlyArray<null | PullRequestReviewComment>,\n  +createdAt: DateTime,\n  +id: string,\n  +state: PullRequestReviewState,\n  +url: URI,\n|};\n\nexport type PullRequestReviewComment = {|\n  +__typename: \"PullRequestReviewComment\",\n  +author: null | Actor,\n  +body: String,\n  +createdAt: DateTime,\n  +id: string,\n  +reactions: $ReadOnlyArray<null | Reaction>,\n  +url: URI,\n|};\n\nexport type PullRequestReviewState =\n  | \"APPROVED\"\n  | \"CHANGES_REQUESTED\"\n  | \"COMMENTED\"\n  | \"DISMISSED\"\n  | \"PENDING\";\n\nexport const PullRequestReviewState$Values: {|\n  +\"APPROVED\": \"APPROVED\",\n  +\"CHANGES_REQUESTED\": \"CHANGES_REQUESTED\",\n  +\"COMMENTED\": \"COMMENTED\",\n  +\"DISMISSED\": \"DISMISSED\",\n  +\"PENDING\": \"PENDING\",\n|} = deepFreeze({\n  \"APPROVED\": \"APPROVED\",\n  \"CHANGES_REQUESTED\": \"CHANGES_REQUESTED\",\n  \"COMMENTED\": \"COMMENTED\",\n  \"DISMISSED\": \"DISMISSED\",\n  \"PENDING\": \"PENDING\",\n});\n\nexport type Reaction = {|\n  +__typename: \"Reaction\",\n  +content: ReactionContent,\n  +createdAt: DateTime,\n  +id: string,\n  +user: null | Organization | User,\n|};\n\nexport type ReactionContent =\n  | \"CONFUSED\"\n  | \"EYES\"\n  | \"HEART\"\n  | \"HOORAY\"\n  | \"LAUGH\"\n  | \"ROCKET\"\n  | \"THUMBS_DOWN\"\n  | \"THUMBS_UP\";\n\nexport const ReactionContent$Values: {|\n  +\"CONFUSED\": \"CONFUSED\",\n  +\"EYES\": \"EYES\",\n  +\"HEART\": \"HEART\",\n  +\"HOORAY\": \"HOORAY\",\n  +\"LAUGH\": \"LAUGH\",\n  +\"ROCKET\": \"ROCKET\",\n  +\"THUMBS_DOWN\": \"THUMBS_DOWN\",\n  +\"THUMBS_UP\": \"THUMBS_UP\",\n|} = deepFreeze({\n  \"CONFUSED\": \"CONFUSED\",\n  \"EYES\": \"EYES\",\n  \"HEART\": \"HEART\",\n  \"HOORAY\": \"HOORAY\",\n  \"LAUGH\": \"LAUGH\",\n  \"ROCKET\": \"ROCKET\",\n  \"THUMBS_DOWN\": \"THUMBS_DOWN\",\n  \"THUMBS_UP\": \"THUMBS_UP\",\n});\n\nexport type Ref = {|\n  +__typename: \"Ref\",\n  +id: string,\n  +target: null | GitObject,\n|};\n\nexport type Repository = {|\n  +__typename: \"Repository\",\n  +createdAt: DateTime,\n  +defaultBranchRef: null | Ref,\n  +id: string,\n  +issues: $ReadOnlyArray<null | Issue>,\n  +name: String,\n  +owner: null | RepositoryOwner,\n  +pullRequests: $ReadOnlyArray<null | PullRequest>,\n  +url: URI,\n|};\n\nexport type RepositoryOwner = Organization | User;\n\nexport type String = string;\n\nexport type Tag = {|\n  +__typename: \"Tag\",\n  +id: string,\n  +oid: GitObjectID,\n|};\n\nexport type Tree = {|\n  +__typename: \"Tree\",\n  +id: string,\n  +oid: GitObjectID,\n|};\n\nexport type URI = string;\n\nexport type User = {|\n  +__typename: \"User\",\n  +id: string,\n  +login: String,\n  +url: URI,\n|};\n","// @flow\n\nimport deepFreeze from \"deep-freeze\";\nimport {\n  type Edge,\n  type EdgeAddressT,\n  EdgeAddress,\n  NodeAddress,\n} from \"../../core/graph\";\nimport * as GithubNode from \"./nodes\";\nimport * as GitNode from \"../git/nodes\";\nimport {\n  type ReactionContent,\n  ReactionContent$Values as Reactions,\n} from \"./graphqlTypes\";\nimport {type TimestampMs} from \"../../util/timestamp\";\n\nexport opaque type RawAddress: EdgeAddressT = EdgeAddressT;\n\nexport const AUTHORS_TYPE = \"AUTHORS\";\nexport const MERGED_AS_TYPE = \"MERGED_AS\";\nexport const HAS_PARENT_TYPE = \"HAS_PARENT\";\nexport const REFERENCES_TYPE = \"REFERENCES\";\nexport const REACTS_TYPE = \"REACTS\";\n// GitHub tracks its own notion of a commit, which has a particular\n// database id, is scoped to a particular repository, and has a canonical url\n// on GitHub. The CORRESPONDS_TO_COMMIT_TYPE edges connect the GitHub commits\n// to the corresponding Git commit.\nexport const CORRESPONDS_TO_COMMIT_TYPE = \"CORRESPONDS_TO_COMMIT_TYPE\";\n\nconst GITHUB_PREFIX = EdgeAddress.fromParts([\"sourcecred\", \"github\"]);\nfunction githubEdgeAddress(...parts: string[]): RawAddress {\n  return EdgeAddress.append(GITHUB_PREFIX, ...parts);\n}\n\nexport const Prefix: {|\n  authors: RawAddress,\n  base: EdgeAddressT,\n  correspondsToCommit: RawAddress,\n  hasParent: RawAddress,\n  mergedAs: RawAddress,\n  reacts: RawAddress,\n  reactsHeart: RawAddress,\n  reactsHooray: RawAddress,\n  reactsRocket: RawAddress,\n  reactsThumbsUp: RawAddress,\n  references: RawAddress,\n|} = deepFreeze({\n  base: GITHUB_PREFIX,\n  authors: githubEdgeAddress(AUTHORS_TYPE),\n  mergedAs: githubEdgeAddress(MERGED_AS_TYPE),\n  references: githubEdgeAddress(REFERENCES_TYPE),\n  hasParent: githubEdgeAddress(HAS_PARENT_TYPE),\n  reacts: githubEdgeAddress(REACTS_TYPE),\n  reactsThumbsUp: githubEdgeAddress(REACTS_TYPE, Reactions.THUMBS_UP),\n  reactsHeart: githubEdgeAddress(REACTS_TYPE, Reactions.HEART),\n  reactsHooray: githubEdgeAddress(REACTS_TYPE, Reactions.HOORAY),\n  reactsRocket: githubEdgeAddress(REACTS_TYPE, Reactions.ROCKET),\n  correspondsToCommit: githubEdgeAddress(CORRESPONDS_TO_COMMIT_TYPE),\n});\n\nexport type AuthorsAddress = {|\n  +type: typeof AUTHORS_TYPE,\n  +author: GithubNode.UserlikeAddress,\n  +content: GithubNode.AuthorableAddress,\n|};\nexport type MergedAsAddress = {|\n  +type: typeof MERGED_AS_TYPE,\n  +pull: GithubNode.PullAddress,\n|};\nexport type HasParentAddress = {|\n  +type: typeof HAS_PARENT_TYPE,\n  +child: GithubNode.ChildAddress,\n|};\nexport type ReferencesAddress = {|\n  +type: typeof REFERENCES_TYPE,\n  +referrer: GithubNode.TextContentAddress,\n  +referent: GithubNode.ReferentAddress,\n|};\nexport type ReactsAddress = {|\n  +type: typeof REACTS_TYPE,\n  +reactionType: ReactionContent,\n  +user: GithubNode.UserlikeAddress,\n  +reactable: GithubNode.ReactableAddress,\n|};\nexport type CorrespondsToCommitAddress = {|\n  +type: typeof CORRESPONDS_TO_COMMIT_TYPE,\n  +githubCommit: GithubNode.CommitAddress,\n|};\n\nexport type StructuredAddress =\n  | AuthorsAddress\n  | MergedAsAddress\n  | HasParentAddress\n  | ReferencesAddress\n  | ReactsAddress\n  | CorrespondsToCommitAddress;\n\nexport const createEdge: {|\n  authors: (\n    author: GithubNode.UserlikeAddress,\n    content: GithubNode.AuthorableAddress,\n    timestampMs: TimestampMs\n  ) => Edge,\n  correspondsToCommit: (\n    githubCommit: GithubNode.CommitAddress,\n    gitCommit: GitNode.CommitAddress,\n    timestampMs: TimestampMs\n  ) => Edge,\n  hasParent: (\n    child: GithubNode.ChildAddress,\n    parent: GithubNode.ParentAddress,\n    timestampMs: TimestampMs\n  ) => Edge,\n  mergedAs: (\n    pull: GithubNode.PullAddress,\n    commit: GithubNode.CommitAddress,\n    timestampMs: TimestampMs\n  ) => Edge,\n  reacts: (\n    reactionType: ReactionContent,\n    user: GithubNode.UserlikeAddress,\n    reactable: GithubNode.ReactableAddress,\n    timestampMs: TimestampMs\n  ) => Edge,\n  references: (\n    referrer: GithubNode.TextContentAddress,\n    referent: GithubNode.ReferentAddress,\n    timestampMs: TimestampMs\n  ) => Edge,\n|} = deepFreeze({\n  authors: (\n    author: GithubNode.UserlikeAddress,\n    content: GithubNode.AuthorableAddress,\n    timestampMs: TimestampMs\n  ): Edge => ({\n    address: toRaw({type: AUTHORS_TYPE, author, content}),\n    src: GithubNode.toRaw(author),\n    dst: GithubNode.toRaw(content),\n    timestampMs,\n  }),\n  mergedAs: (\n    pull: GithubNode.PullAddress,\n    commit: GithubNode.CommitAddress,\n    timestampMs: TimestampMs\n  ): Edge => ({\n    address: toRaw({type: MERGED_AS_TYPE, pull}),\n    src: GithubNode.toRaw(pull),\n    dst: GithubNode.toRaw(commit),\n    timestampMs,\n  }),\n  correspondsToCommit: (\n    githubCommit: GithubNode.CommitAddress,\n    gitCommit: GitNode.CommitAddress,\n    timestampMs: TimestampMs\n  ): Edge => ({\n    address: toRaw({type: CORRESPONDS_TO_COMMIT_TYPE, githubCommit}),\n    src: GithubNode.toRaw(githubCommit),\n    dst: GitNode.toRaw(gitCommit),\n    timestampMs,\n  }),\n  hasParent: (\n    child: GithubNode.ChildAddress,\n    parent: GithubNode.ParentAddress,\n    timestampMs: TimestampMs\n  ): Edge => ({\n    address: toRaw({type: HAS_PARENT_TYPE, child}),\n    src: GithubNode.toRaw(child),\n    dst: GithubNode.toRaw(parent),\n    timestampMs,\n  }),\n  references: (\n    referrer: GithubNode.TextContentAddress,\n    referent: GithubNode.ReferentAddress,\n    timestampMs: TimestampMs\n  ): Edge => ({\n    address: toRaw({type: REFERENCES_TYPE, referrer, referent}),\n    src: GithubNode.toRaw(referrer),\n    dst: GithubNode.toRaw(referent),\n    timestampMs,\n  }),\n  reacts: (\n    reactionType: ReactionContent,\n    user: GithubNode.UserlikeAddress,\n    reactable: GithubNode.ReactableAddress,\n    timestampMs: TimestampMs\n  ): Edge => ({\n    address: toRaw({\n      type: REACTS_TYPE,\n      user,\n      reactionType,\n      reactable,\n    }),\n    src: GithubNode.toRaw(user),\n    dst: GithubNode.toRaw(reactable),\n    timestampMs,\n  }),\n});\n\nfunction lengthEncode(x: GithubNode.RawAddress): $ReadOnlyArray<string> {\n  const parts = NodeAddress.toParts(x);\n  return [String(parts.length), ...parts];\n}\nfunction lengthDecode(\n  x: $ReadOnlyArray<string>,\n  fail: () => Error\n): {|+parts: $ReadOnlyArray<string>, +rest: $ReadOnlyArray<string>|} {\n  if (x.length === 0) {\n    // Not length-encoded.\n    throw fail();\n  }\n  const [lengthString, ...allParts] = x;\n  const length = parseInt(lengthString, 10);\n  if (isNaN(length)) {\n    throw fail();\n  }\n  if (length > allParts.length) {\n    // Not enough elements.\n    throw fail();\n  }\n  return {parts: allParts.slice(0, length), rest: allParts.slice(length)};\n}\nfunction multiLengthDecode(x: $ReadOnlyArray<string>, fail: () => Error) {\n  let remaining = x;\n  const partses = [];\n  while (remaining.length > 0) {\n    const {parts, rest} = lengthDecode(remaining, fail);\n    partses.push(parts);\n    remaining = rest;\n  }\n  return partses;\n}\n\nexport function fromRaw(x: RawAddress): StructuredAddress {\n  function fail() {\n    return new Error(`Bad address: ${EdgeAddress.toString(x)}`);\n  }\n  if (!EdgeAddress.hasPrefix(x, GITHUB_PREFIX)) {\n    throw fail();\n  }\n  const [_unused_sc, _unused_gh, kind, ...rest] = EdgeAddress.toParts(x);\n  switch (kind) {\n    case AUTHORS_TYPE: {\n      const parts = multiLengthDecode(rest, fail);\n      if (parts.length !== 2) {\n        throw fail();\n      }\n      const [authorParts, contentParts] = parts;\n      const author: GithubNode.UserlikeAddress = (GithubNode.fromRaw(\n        (NodeAddress.fromParts(authorParts): any)\n      ): any);\n      const content: GithubNode.AuthorableAddress = (GithubNode.fromRaw(\n        (NodeAddress.fromParts(contentParts): any)\n      ): any);\n      return ({type: AUTHORS_TYPE, author, content}: AuthorsAddress);\n    }\n    case MERGED_AS_TYPE: {\n      const parts = multiLengthDecode(rest, fail);\n      if (parts.length !== 1) {\n        throw fail();\n      }\n      const [pullParts] = parts;\n      const pull: GithubNode.PullAddress = (GithubNode.fromRaw(\n        (NodeAddress.fromParts(pullParts): any)\n      ): any);\n      return ({type: MERGED_AS_TYPE, pull}: MergedAsAddress);\n    }\n    case HAS_PARENT_TYPE: {\n      const parts = multiLengthDecode(rest, fail);\n      if (parts.length !== 1) {\n        throw fail();\n      }\n      const [childParts] = parts;\n      const child: GithubNode.ChildAddress = (GithubNode.fromRaw(\n        (NodeAddress.fromParts(childParts): any)\n      ): any);\n      return ({type: HAS_PARENT_TYPE, child}: HasParentAddress);\n    }\n    case REFERENCES_TYPE: {\n      const parts = multiLengthDecode(rest, fail);\n      if (parts.length !== 2) {\n        throw fail();\n      }\n      const [referrerParts, referentParts] = parts;\n      const referrer: GithubNode.TextContentAddress = (GithubNode.fromRaw(\n        (NodeAddress.fromParts(referrerParts): any)\n      ): any);\n      const referent: GithubNode.ReferentAddress = (GithubNode.fromRaw(\n        (NodeAddress.fromParts(referentParts): any)\n      ): any);\n      return ({type: REFERENCES_TYPE, referrer, referent}: ReferencesAddress);\n    }\n    case REACTS_TYPE: {\n      const [rawReactionType, ...rest2] = rest;\n      const reactionType = Reactions[rawReactionType];\n      if (reactionType == null) {\n        throw fail();\n      }\n      const parts = multiLengthDecode(rest2, fail);\n      if (parts.length !== 2) {\n        throw fail();\n      }\n      const [userParts, reactableParts] = parts;\n      const user: GithubNode.UserlikeAddress = (GithubNode.fromRaw(\n        (NodeAddress.fromParts(userParts): any)\n      ): any);\n      const reactable: GithubNode.ReactableAddress = (GithubNode.fromRaw(\n        (NodeAddress.fromParts(reactableParts): any)\n      ): any);\n      return {type: REACTS_TYPE, reactionType, user, reactable};\n    }\n    default:\n      throw fail();\n  }\n}\n\nexport function toRaw(x: StructuredAddress): RawAddress {\n  switch (x.type) {\n    case AUTHORS_TYPE:\n      return EdgeAddress.append(\n        Prefix.authors,\n        ...lengthEncode(GithubNode.toRaw(x.author)),\n        ...lengthEncode(GithubNode.toRaw(x.content))\n      );\n    case MERGED_AS_TYPE:\n      return EdgeAddress.append(\n        Prefix.mergedAs,\n        ...lengthEncode(GithubNode.toRaw(x.pull))\n      );\n    case HAS_PARENT_TYPE:\n      return EdgeAddress.append(\n        Prefix.hasParent,\n        ...lengthEncode(GithubNode.toRaw(x.child))\n      );\n    case REFERENCES_TYPE:\n      return EdgeAddress.append(\n        Prefix.references,\n        ...lengthEncode(GithubNode.toRaw(x.referrer)),\n        ...lengthEncode(GithubNode.toRaw(x.referent))\n      );\n    case REACTS_TYPE:\n      return EdgeAddress.append(\n        Prefix.reacts,\n        x.reactionType,\n        ...lengthEncode(GithubNode.toRaw(x.user)),\n        ...lengthEncode(GithubNode.toRaw(x.reactable))\n      );\n    case CORRESPONDS_TO_COMMIT_TYPE:\n      return EdgeAddress.append(\n        Prefix.correspondsToCommit,\n        ...lengthEncode(GithubNode.toRaw(x.githubCommit))\n      );\n    default:\n      throw new Error((x.type: empty));\n  }\n}\n","// @flow\n\nimport deepFreeze from \"deep-freeze\";\nimport type {PluginDeclaration} from \"../../analysis/pluginDeclaration\";\nimport * as N from \"./nodes\";\nimport * as E from \"./edges\";\nimport type {NodeAddressT} from \"../../core/graph\";\nimport dedent from \"../../util/dedent\";\n\nexport const repoNodeType: {|\n  +defaultWeight: number,\n  +description: string,\n  +name: string,\n  +pluralName: string,\n  +prefix: NodeAddressT,\n|} = deepFreeze({\n  name: \"Repository\",\n  pluralName: \"Repositories\",\n  prefix: N.Prefix.repo,\n  defaultWeight: 0,\n  description: \"NodeType for a GitHub repository\",\n});\n\nconst issueNodeType = deepFreeze({\n  name: \"Issue\",\n  pluralName: \"Issues\",\n  prefix: N.Prefix.issue,\n  defaultWeight: 0,\n  description: \"NodeType for a GitHub issue\",\n});\n\nconst pullNodeType = deepFreeze({\n  name: \"Pull request\",\n  pluralName: \"Pull requests\",\n  prefix: N.Prefix.pull,\n  defaultWeight: 4,\n  description: \"NodeType for a GitHub pull request\",\n});\n\nconst reviewNodeType = deepFreeze({\n  name: \"Pull request review\",\n  pluralName: \"Pull request reviews\",\n  prefix: N.Prefix.review,\n  defaultWeight: 1,\n  description: \"NodeType for a GitHub code review\",\n});\n\nconst commentNodeType = deepFreeze({\n  name: \"Comment\",\n  pluralName: \"Comments\",\n  prefix: N.Prefix.comment,\n  defaultWeight: 0,\n  description: \"NodeType for a GitHub comment\",\n});\n\nconst commitNodeType = deepFreeze({\n  name: \"Commit\",\n  pluralName: \"Commits\",\n  prefix: N.Prefix.commit,\n  defaultWeight: 0,\n  description:\n    \"Represents a particular Git commit on GitHub, i.e. scoped to a particular repository\",\n});\n\nexport const userNodeType: {|\n  +defaultWeight: number,\n  +description: string,\n  +name: string,\n  +pluralName: string,\n  +prefix: NodeAddressT,\n|} = deepFreeze({\n  name: \"User\",\n  pluralName: \"Users\",\n  prefix: N.Prefix.user,\n  defaultWeight: 0,\n  description: \"NodeType for a GitHub user\",\n});\n\nconst botNodeType = deepFreeze({\n  name: \"Bot\",\n  pluralName: \"Bots\",\n  prefix: N.Prefix.bot,\n  defaultWeight: 0,\n  description: \"NodeType for a GitHub bot account\",\n});\n\nconst nodeTypes = deepFreeze([\n  repoNodeType,\n  issueNodeType,\n  pullNodeType,\n  reviewNodeType,\n  commentNodeType,\n  commitNodeType,\n  userNodeType,\n  botNodeType,\n]);\n\nconst authorsEdgeType = deepFreeze({\n  forwardName: \"authors\",\n  backwardName: \"is authored by\",\n  defaultWeight: {forwards: 1 / 2, backwards: 1},\n  prefix: E.Prefix.authors,\n  description: dedent`\\\n    Connects a GitHub account to a post that they authored.\n\n    Examples of posts include issues, pull requests, and comments.\n  `,\n});\n\nconst hasParentEdgeType = deepFreeze({\n  forwardName: \"has parent\",\n  backwardName: \"has child\",\n  defaultWeight: {forwards: 1, backwards: 1 / 4},\n  prefix: E.Prefix.hasParent,\n  description: dedent`\\\n    Connects a GitHub entity to its child entities.\n\n    For example, a Repository has Issues and Pull Requests as children, and a\n    Pull Request has comments and reviews as children.\n  `,\n});\n\nconst mergedAsEdgeType = deepFreeze({\n  forwardName: \"merges\",\n  backwardName: \"is merged by\",\n  defaultWeight: {forwards: 1 / 2, backwards: 1},\n  prefix: E.Prefix.mergedAs,\n  description: dedent`\\\n    Connects a GitHub pull request to the Git commit that it merges.\n  `,\n});\n\nconst referencesEdgeType = deepFreeze({\n  forwardName: \"references\",\n  backwardName: \"is referenced by\",\n  defaultWeight: {forwards: 1, backwards: 0},\n  prefix: E.Prefix.references,\n  description: dedent`\\\n    Connects a GitHub post to an entity that it references.\n\n    For example, if you write a GitHub issue comment that says \"thanks\n    @username for pull #1337\", it will create references edges to both the user\n    @username, and to pull #1337 in the same repository.\n  `,\n});\n\nconst reactsHeartEdgeType = deepFreeze({\n  forwardName: \"reacted  to\",\n  backwardName: \"got  from\",\n  defaultWeight: {forwards: 2, backwards: 0},\n  prefix: E.Prefix.reactsHeart,\n  description: dedent`\\\n    Connects users to posts to which they gave a  reaction.\n  `,\n});\n\nconst reactsThumbsUpEdgeType = deepFreeze({\n  forwardName: \"reacted  to\",\n  backwardName: \"got  from\",\n  defaultWeight: {forwards: 1, backwards: 0},\n  prefix: E.Prefix.reactsThumbsUp,\n  description: dedent`\\\n    Connects users to posts to which they gave a  reaction.\n  `,\n});\n\nconst reactsHoorayEdgeType = deepFreeze({\n  forwardName: \"reacted  to\",\n  backwardName: \"got  from\",\n  defaultWeight: {forwards: 4, backwards: 0},\n  prefix: E.Prefix.reactsHooray,\n  description: dedent`\\\n    Connects users to posts to which they gave a  reaction.\n  `,\n});\n\nconst reactsRocketEdgeType = deepFreeze({\n  forwardName: \"reacted  to\",\n  backwardName: \"got  from\",\n  defaultWeight: {forwards: 1, backwards: 0},\n  prefix: E.Prefix.reactsRocket,\n  description: dedent`\\\n    Connects users to posts to which they gave a  reaction.\n  `,\n});\n\nconst correspondsToCommitEdgeType = deepFreeze({\n  forwardName: \"corresponds to Git commit\",\n  backwardName: \"merged on GitHub as\",\n  defaultWeight: {forwards: 1, backwards: 1},\n  prefix: E.Prefix.correspondsToCommit,\n  description: dedent`\\\n    Connects a commit on GitHub to the corresponding raw Git commit.\n  `,\n});\n\nconst edgeTypes = deepFreeze([\n  authorsEdgeType,\n  hasParentEdgeType,\n  mergedAsEdgeType,\n  referencesEdgeType,\n  reactsThumbsUpEdgeType,\n  reactsHeartEdgeType,\n  reactsHoorayEdgeType,\n  reactsRocketEdgeType,\n  correspondsToCommitEdgeType,\n]);\n\nexport const declaration: PluginDeclaration = deepFreeze({\n  name: \"GitHub\",\n  nodePrefix: N.Prefix.base,\n  edgePrefix: E.Prefix.base,\n  nodeTypes: nodeTypes,\n  edgeTypes: edgeTypes,\n  userTypes: [userNodeType],\n});\n","// @flow\n\nimport deepFreeze from \"deep-freeze\";\nimport type {PluginDeclaration} from \"../../analysis/pluginDeclaration\";\nimport type {NodeType} from \"../../analysis/types\";\nimport {\n  NodeAddress,\n  EdgeAddress,\n  type NodeAddressT,\n  type EdgeAddressT,\n} from \"../../core/graph\";\n\nexport const nodePrefix: NodeAddressT = NodeAddress.fromParts([\n  \"sourcecred\",\n  \"ethereum\",\n]);\n\nexport const edgePrefix: EdgeAddressT = EdgeAddress.fromParts([\n  \"sourcecred\",\n  \"ethereum\",\n]);\n\nexport const ethAddressEntryType: NodeType = deepFreeze({\n  name: `Ethereum Address Entry`,\n  pluralName: `Ethereum Address Entries`,\n  prefix: nodePrefix,\n  defaultWeight: 0,\n  description:\n    `A Ethereum address, that can be utilized by a participant` +\n    `to receive grain payouts, and linked to their identity.`,\n});\n\nexport const declaration: PluginDeclaration = deepFreeze({\n  name: \"Ethereum\",\n  nodePrefix,\n  edgePrefix,\n  nodeTypes: [ethAddressEntryType],\n  edgeTypes: [],\n  userTypes: [ethAddressEntryType],\n});\n","// @flow\n\nimport stringify from \"json-stable-stringify\";\nimport * as C from \"./combo\";\n\n/**\n * JsonLog tracks and serializes append-only logs of JSON values.\n *\n * At its heart, it's basically a simple wrapper around an array, which\n * enforces the rule that items may be appended to it, but never removed.\n *\n * It also provides serialization logic. We store the log as a\n * newline-delimited stream of JSON values, with a one-to-one correspondence\n * between POSIX lines and elements in the sequence. That is, the serialized\n * form of an element will never contain an embedded newline, and there are no\n * empty lines. JSON streams can be easily inspected and manipulatedwith tools\n * like `jq` as well as standard Unix filters, and can be stored and\n * transmitted efficiently in Git repositories thanks to packfiles and delta\n * compression.\n *\n * Elements of a `JsonLog` are always parsed using a Combo.Parser, which\n * ensures type safety at runtime.\n */\nexport class JsonLog<T: C.JsonObject> {\n  +_items: T[];\n\n  constructor() {\n    this._items = [];\n  }\n\n  append(item: T): JsonLog<T> {\n    this._items.push(item);\n    return this;\n  }\n\n  extend(items: Iterable<T>): JsonLog<T> {\n    for (const item of items) {\n      this._items.push(item);\n    }\n    return this;\n  }\n\n  values(): Iterator<T> {\n    return this._items.values();\n  }\n\n  toString(): string {\n    const lines = this._items.map((x) => stringify(x) + \"\\n\");\n    return lines.join(\"\");\n  }\n\n  static fromString(log: string, parser: C.Parser<T>): JsonLog<T> {\n    const result = new JsonLog();\n    _extractLogLines(log).forEach((line, i) => {\n      let parsed;\n      try {\n        parsed = parser.parse(JSON.parse(line));\n      } catch (e) {\n        throw new Error(`line ${i + 1} is not valid JSON: ${e}`);\n      }\n      if (parsed.ok) {\n        result.append(parsed.value);\n      } else {\n        throw new Error(`line ${i + 1}: ${parsed.err}`);\n      }\n    });\n    return result;\n  }\n}\n\nfunction _extractLogLines(log: string): string[] {\n  // In the legacy format, all automatically written ledgers erroneously\n  // lacked trailing LF, but some hand-edited ones have them. In the new\n  // format, all automatically written ledgers include a trailing LF.\n  // Strip it, if present, for ease of `split(\"\\n\")`.\n  log = log.trimRight();\n  // If the file is empty, return no entries to parse\n  if (log.length === 0) {\n    return [];\n  }\n  if (log.startsWith(\"[\")) {\n    // Temporarily compatibility measure for raw JSON arrays (not NDJSON),\n    // in the specific form written by previous versions of this module.\n    if (log === \"[]\") {\n      return [];\n    }\n    const dataLines = log.split(\"\\n\").slice(1, -1);\n    return dataLines.map((line) =>\n      line.endsWith(\",\") ? line.slice(0, -1) : line\n    );\n  }\n  return log.split(\"\\n\");\n}\n","// @flow\n\nimport {type NodeAddressT, NodeAddress} from \"../../core/graph\";\nimport {nodePrefix} from \"./declaration\";\nimport {type EthAddress} from \"./ethAddress\";\n\nexport function nodeAddressForEthAddress(address: EthAddress): NodeAddressT {\n  return NodeAddress.append(nodePrefix, address);\n}\n","// @flow\n\nimport {type IdentityProposal} from \"../../core/ledger/identityProposal\";\nimport {coerce, nameFromString} from \"../../core/identity/name\";\nimport {JsonLog} from \"../../util/jsonLog\";\nimport {type EthAddress} from \"./ethAddress\";\nimport {nodeAddressForEthAddress} from \"./ethAddressNode\";\n\nexport function createIdentity(address: EthAddress): IdentityProposal {\n  const alias = {\n    description: address,\n    address: nodeAddressForEthAddress(address),\n  };\n\n  return {\n    pluginName: nameFromString(\"ethereum\"),\n    name: coerce(address),\n    type: \"USER\",\n    alias,\n  };\n}\n\nexport function createIdentities(\n  ethAddresses: JsonLog<EthAddress>\n): $ReadOnlyArray<IdentityProposal> {\n  return Array.from(ethAddresses.values()).map(createIdentity);\n}\n","// @flow\n\nimport {isAddress, toChecksumAddress} from \"web3-utils\";\n\nimport * as C from \"../../util/combo\";\nimport {compatibleParser} from \"../../util/compat\";\n\nexport opaque type EthAddress: string = string;\n\nexport const ETH_CURRENCY_ADDRESS: EthAddress =\n  \"0x0000000000000000000000000000000000000000\";\n\n/**\n * parseAddress will accept any 20-byte hexadecimal ethereum address encoded as\n * a string, optionally prefixed with `0x`.\n *\n * Per EIP-55 (https://eips.ethereum.org/EIPS/eip-55), parseAddress throws if\n * the provided string is mixed-case but not checksum-encoded. All valid\n * addresses in lower- and upper-case format will not throw.\n *\n * For consistency, all valid addresses are converted and returned in\n * mixed-case form with the `0x` prefix included\n *\n * valid formats:\n * \"2Ccc7cD913677553766873483ed9eEDdB77A0Bb0\"\n * \"0x2Ccc7cD913677553766873483ed9eEDdB77A0Bb0\"\n * \"0X2CCC7CD913677553766873483ED9EEDDB77A0BB0\"\n * \"0x2ccc7cd913677553766873483ed9eeddb77a0bb0\"\n *\n * invalid formats:\n * \"0x2ccc7cD913677553766873483ed9eEDdB77A0Bb0\"\n * \"2ccc7cD913677553766873483ed9eEDdB77A0Bb0\"\n */\nexport function parseAddress(s: string): EthAddress {\n  if (!isAddress(s)) {\n    throw new Error(`not a valid ethereum address: ${s}`);\n  }\n  return toChecksumAddress(s);\n}\n\n// Utilized for a more readable and recognizable address. This is\n// needed to allow the address to fit within the Identity name requirements\nexport function truncateEthAddress(address: EthAddress): string {\n  const prefix = address.slice(0, 6);\n  const suffix = address.slice(-4);\n  return `${prefix}...${suffix}`;\n}\n\nexport const ethAddressParser: C.Parser<EthAddress> = C.fmap(\n  C.string,\n  parseAddress\n);\n\nexport const COMPAT_INFO = {\n  type: \"sourcecred/ethAddress\",\n  version: \"0.0.1\",\n};\n\nconst addressEntriesParser = C.array(ethAddressParser);\n\nexport const parser: C.Parser<\n  Array<EthAddress>\n> = compatibleParser(COMPAT_INFO.type, {\"0.0.1\": addressEntriesParser});\n","// @flow\n\nimport {createIdentity, createIdentities} from \"./createIdentities\";\nimport {parseAddress, truncateEthAddress} from \"./ethAddress\";\nimport {nodeAddressForEthAddress} from \"./ethAddressNode\";\n\nexport const address = {\n  parseAddress,\n  truncateEthAddress,\n  nodeAddressForEthAddress,\n};\n\nexport const identity = {\n  createIdentities,\n  createIdentity,\n};\n","// @flow\n\nimport {\n  type NodeAddressT,\n  type EdgeAddressT,\n  NodeAddress,\n  EdgeAddress,\n} from \"../core/graph\";\nimport {type EdgeWeight, edgeWeightParser} from \"../core/weights\";\nimport * as G from \"../util/combo\";\n\n/**\n * This module defines `NodeType`s and `EdgeType`s, both of which are\n * data structures containing shared metadata that describes many nodes or edges\n * in the graph. Nodes can be \"members\" of zero or more `NodeType`s, and edges can\n * be \"members\" of zero or more `EdgeType`s. Membership is determined based on the\n * type's `prefix`, which is an address. A node or edge is considered a member of\n * a type if that type's prefix is a prefix of the node's address.\n *\n * To make this more concrete, let's consider a specific example. Suppose we define\n * the following nodes:\n *\n * const pullNode = NodeAddress.fromParts([\"github\", \"pull\", \"repo\", \"34\"]);\n * const commitNode = NodeAddress.fromParts([\"git\", \"commit\", \"e1337\"]);\n * const pullType: NodeType = {\n *  name: \"Pull request\",\n *  prefix: NodeAddress.fromParts([\"github\", \"pull\"]),\n *  // ... more properties as required\n * };\n * const githubType: NodeType = {\n *   name: \"GitHub node\",\n *   prefix: NodeAddress.fromParts([\"github\"])\n * };\n *\n * Then the `pullNode` is considered a member of the `pullType` and `githubType`,\n * while the `commitNode` is not a member of either type.\n *\n * The concept of a \"type\" is useful to SourceCred because it let's us express\n * that groups of nodes are conceptually related, and that we should treat them similarly.\n * Most saliently, we use types to assign default weights to groups of nodes, and to\n * aggregate them for better UI organization. The fact that the SourceCred UI can group\n * all pull requests together, and assign a default weight to all of them, is possible\n * because the GitHub plugin defines a pull request node type.\n *\n * While a node or edge can theoretically be a member of multiple types, in practice we\n * generally treat the node or edge as though it is only a member of its most specific type.\n * In the example above, we would treat any individual pull request as though it is only\n * a member of the pull request node type. That may change in the future. In general,\n * the type system is not wholly finalized; when it does become finalized, we will\n * likely move it into src/core. See [#710] for context.\n *\n * [#710]: https://github.com/sourcecred/sourcecred/issues/710\n */\n\n/**\n * Represents a \"Type\" of node in the graph. See the module docstring\n * for context.\n */\nexport type NodeType = {|\n  // The name for an individual node of this type.\n  // For example, for the GitHub PULL_REQUEST node type, the name is \"Pull\n  // request\". The first letter of the name should be capitalized.\n  +name: string,\n  // The name for multiple nodes of this type.\n  // For example, for the GitHub PULL_REQUEST node type, the pluralName is\n  // \"Pull requests\". The first letter of this name should be capitalized.\n  +pluralName: string,\n  // The address that will be used to test whether a node is a member\n  // of this NodeType. A given node `n` is a member of the type `t` if\n  // `NodeAddress.hasPrefix(n, t.prefix) == true`\n  +prefix: NodeAddressT,\n  // The default weight to assign to nodes of this type. We use `1` to mean \"of\n  // normal importance\", and the weights scale linearly from there (i.e. 2\n  // means twice as important).\n  +defaultWeight: number,\n  // The `description` property should be a human-readable string that makes\n  // it clear to a user what each NodeType does\n  +description: string,\n|};\n\nexport const nodeTypeParser: G.Parser<NodeType> = G.object({\n  name: G.string,\n  pluralName: G.string,\n  prefix: NodeAddress.parser,\n  defaultWeight: G.number,\n  description: G.string,\n});\n\n/**\n * Represents a \"Type\" of edge in the graph. See the module docstring\n * for context.\n */\nexport type EdgeType = {|\n  // A brief descriptive name of what the \"forward\" direction of the edge\n  // means. For example, for the GitHub REFERENCES edge type, the forwardName\n  // is \"references\"\n  +forwardName: string,\n\n  // A brief descriptive name of what the \"backward\" direction of the edge\n  // means. For example, for the GitHub REFERENCES edge type, the backwardName\n  // is \"referenced by\"\n  +backwardName: string,\n\n  // The default forwards and backwards weights for this edge.\n  // We use `1` as a default value (\"of normal importance\").\n  // The weights have linear importance, i.e. 2 is twice as important as 1.\n  +defaultWeight: EdgeWeight,\n\n  // The address that will be used to test whether an edge is a member\n  // of this EdgeType. A given edge `e` is a member of the type `t` if\n  // `EdgeAddress.hasPrefix(e.address, t.prefix) == true`\n  +prefix: EdgeAddressT,\n\n  // The `description` property should be a human-readable string that makes\n  // it clear to a user what each EdgeType does.\n  //\n  // By convention, the first line of the description should be a sentence\n  // beginning with the word \"Connects\", which describes what kinds of nodes\n  // the edge connects and why. Optionally, you may provide examples and additional\n  // context after one blank link. Here is an example (for the \"Merged As\" edge).\n  //\n  // ```js\n  // const mergedAsDescription = dedent`\\\n  //  Connects a GitHub pull request to the Git commit it merged.\n  //\n  //  A pull request can have either one or zero Merged As edges, depending on\n  //  whether or not it was ever merged.\n  //  `\n  // ```\n  //\n  // (Note the use of the `util/dedent.js` makes it easier to write multi-lined\n  // strings with clean formatting.)\n  +description: string,\n|};\n\nexport const edgeTypeParser: G.Parser<EdgeType> = G.object({\n  forwardName: G.string,\n  backwardName: G.string,\n  defaultWeight: edgeWeightParser,\n  prefix: EdgeAddress.parser,\n  description: G.string,\n});\n\nexport type NodeAndEdgeTypes = {|\n  +nodeTypes: NodeType[],\n  +edgeTypes: EdgeType[],\n|};\n","// @flow\n\nimport {\n  type NodeAddressT,\n  type EdgeAddressT,\n  NodeAddress,\n  EdgeAddress,\n} from \"../core/graph\";\nimport type {EdgeType, NodeType, NodeAndEdgeTypes} from \"./types\";\nimport {nodeTypeParser, edgeTypeParser} from \"./types\";\nimport * as Weights from \"../core/weights\";\nimport {type WeightsT} from \"../core/weights\";\nimport * as C from \"../util/combo\";\n\n// TODO(@decentralion): Maybe merge this file with analysis/types\n\nexport type PluginDeclaration = {|\n  +name: string,\n  +nodePrefix: NodeAddressT,\n  +edgePrefix: EdgeAddressT,\n  +nodeTypes: $ReadOnlyArray<NodeType>,\n  +edgeTypes: $ReadOnlyArray<EdgeType>,\n  // Which node types represent user identities.\n  // This is used to exclude user node types from the weight configuration UI\n  +userTypes: $ReadOnlyArray<NodeType>,\n|};\n\nexport const declarationParser: C.Parser<PluginDeclaration> = C.object({\n  name: C.string,\n  nodePrefix: NodeAddress.parser,\n  edgePrefix: EdgeAddress.parser,\n  nodeTypes: C.array(nodeTypeParser),\n  edgeTypes: C.array(edgeTypeParser),\n  userTypes: C.array(nodeTypeParser),\n});\n\nexport function combineTypes(\n  decs: $ReadOnlyArray<PluginDeclaration>\n): NodeAndEdgeTypes {\n  const nodeTypes = [].concat(...decs.map((x) => x.nodeTypes));\n  const edgeTypes = [].concat(...decs.map((x) => x.edgeTypes));\n  return {nodeTypes, edgeTypes};\n}\n\nexport function weightsForDeclaration(dec: PluginDeclaration): WeightsT {\n  const weights = Weights.empty();\n  const {nodeTypes, edgeTypes} = dec;\n  for (const {prefix, defaultWeight} of nodeTypes) {\n    weights.nodeWeights.set(prefix, defaultWeight);\n  }\n  for (const {prefix, defaultWeight} of edgeTypes) {\n    weights.edgeWeights.set(prefix, defaultWeight);\n  }\n  return weights;\n}\n","// @flow\n\n// Universally unique identifiers. As in the UUID4 spec, we use\n// uniformly random 128-bit payloads, but we represent them more\n// compactly as base64 strings (22 characters long) rather than hex\n// strings (36 characters with a bunch of hyphens). We also ensure that\n// the serialized form is clean for machine and human eyes.\n\nimport {encode as base64Encode, decode as base64Decode} from \"base-64\";\nimport getRandomValues from \"./getRandomValues\";\n\nimport * as C from \"./combo\";\n\nexport opaque type Uuid: string = string;\n\n// Any UUIDs that we generate will be purely alphanumeric and will not\n// contain consecutive pairs of certain letters. Non-alphanumeric base64\n// characters are either +/ or -_, depending on encoding. The former set\n// is not URL-safe, and the latter set is not safe for command line\n// arguments (IDs starting with hyphens) or easy legibility (consecutive\n// hyphens or underscores). Consecutive occurrences of /csfhuit/i are\n// forbidden per a heuristic given by <https://hashids.org/#cursing> to\n// avoid common English curse words.\nconst _RE_UNCLEAN = /[+/\\-_]|[csfhuit]{2}/i;\n\nfunction isClean(s: string): boolean {\n  return !s.match(_RE_UNCLEAN);\n}\n\n// Generate an unpadded base64 string of a uniformly random 128-bit\n// payload. This may be unclean.\nfunction randomUuidUnchecked(): string {\n  const bytes = getRandomValues(new Uint8Array(16));\n  const blob = [...bytes].map((n) => String.fromCharCode(n)).join(\"\");\n  return base64Encode(blob).slice(0, -2); // drop \"==\" padding\n}\n\n// Generate this many uniformly random UUIDs looking for a clean one.\n// The total failure probability drops off exponentially with each try.\n//\n// To model the probability that `randomUuidUnchecked` emits a clean ID,\n// consider a DFA with three states INIT, DANGER, and FAIL. If we ever\n// see a non-alphanumeric character, go straight to FAIL (which\n// absorbs). If we see one of the characters that must not appear twice\n// consecutively, more from INIT to DANGER or DANGER to FAIL. If we see\n// any other character, move from DANGER back to INIT. Then this is a\n// Markov chain with transitions:\n//\n//   - INIT: 48/64 to INIT, 14/64 to DANGER, 2/64 to FAIL;\n//   - DANGER: 48/64 to INIT, 16/64 to FAIL;\n//   - FAIL: always back to FAIL.\n//\n// A 128-bit payload is base-64 encoded by 21 uniform code units plus\n// one final code unit with less entropy (only 2 bits), but for\n// simplicity we'll just model this as 22 uniform code units, which is\n// very nearly correct. Then the probability of emitting an unclean ID\n// is the probability that after 22 steps in this Markov chain starting\n// from INIT we end up at FAIL---\n//\n//     $ octave --no-gui\n//     >> A = [48 14 2; 48 0 16; 0 0 64] / 64;\n//     >> A^22\n//     ans =\n//\n//        0.15839   0.03738   0.80424\n//        0.12815   0.03024   0.84161\n//        0.00000   0.00000   1.00000\n//\n// ---which is about 80.4%. So any individual attempt is likely to fail,\n// but after five attempts the probability of total failure is only\n// 33.6%, and it drops off exponentially from there.\nconst _MAX_ATTEMPTS = 1024;\n\n/**\n * Generate a uniformly random clean ID.\n */\nexport function random(): Uuid {\n  for (let i = 0; i < _MAX_ATTEMPTS; i++) {\n    const result: string = randomUuidUnchecked();\n    if (isClean(result)) {\n      // Because we use rejection sampling, this is uniformly random\n      // among clean IDs.\n      return (result: Uuid);\n    }\n  }\n  // This is vanishingly unlikely (p ~= 10^-97). Something is wrong.\n  // istanbul ignore next\n  throw new Error(\n    `failed to generate clean UUID after ${_MAX_ATTEMPTS} attempts`\n  );\n}\n\n/**\n * Parse a serialized UUID. This is the left inverse of the trivial\n * injection from `Uuid` to `string`, and throws on invalid input.\n */\nexport function fromString(s: string): Uuid {\n  if (s.endsWith(\"=\")) {\n    throw new Error(\"expected unpadded string: \" + JSON.stringify(s));\n  }\n  if (s.length !== 22) {\n    throw new Error(\"expected length-22 string: \" + JSON.stringify(s));\n  }\n  if (!isClean(s)) {\n    throw new Error(\n      \"unclean UUID: \" + JSON.stringify(s) + JSON.stringify(_RE_UNCLEAN.exec(s))\n    );\n  }\n  let bytes;\n  try {\n    bytes = base64Decode(s);\n  } catch (e) {\n    throw new Error(\"invalid base64 string: \" + JSON.stringify(s));\n  }\n  if (base64Encode(bytes) !== s + \"==\") {\n    // e.g., \"z\" === atob(\"eg\") === atob(\"eh\")\n    throw new Error(\"non-canonical base64 string: \" + JSON.stringify(s));\n  }\n  return s;\n}\n\n/**\n * Parse a serialized UUID. This expects to parse a JSON string value\n * with the same semantics as `fromString`.\n */\nexport const parser: C.Parser<Uuid> = C.fmap(C.string, fromString);\n\nexport const delimitedUuidParser: C.Parser<Uuid> = C.fmap(\n  C.delimited(\"//\"),\n  (s) => fromString(s)\n);\n","// @flow\n\n/*\n * API shim for `window.crypto.getRandomValues` in the browser, for\n * compatibility with browser, Node, Jest, and Observable.\n *\n * Forked from NPM `get-random-bytes` by Kenan Yildirim, which is\n * released under the MIT License.\n */\n\n/**\n * Fill the given buffer with cryptographically secure random bytes. The\n * buffer length must not exceed 65536.\n */\nexport default function getRandomValues(buf: Uint8Array): Uint8Array {\n  if (typeof window !== \"undefined\") {\n    if (window.crypto && window.crypto.getRandomValues) {\n      return window.crypto.getRandomValues(buf);\n    }\n    if (\n      typeof window.msCrypto === \"object\" &&\n      typeof window.msCrypto.getRandomValues === \"function\"\n    ) {\n      return window.msCrypto.getRandomValues(buf);\n    }\n  }\n\n  if (typeof require !== \"undefined\") {\n    // Late-import `crypto` to avoid `require` in Observable notebooks,\n    // and avoid using a literal `require(...)` to prevent Webpack from\n    // rewriting this. (Getting Webpack externals to work properly is\n    // daunting.)\n    //\n    /* eslint-disable camelcase */\n    /* eslint-disable no-undef */\n    const realRequire =\n      // $FlowExpectedError[cannot-resolve-name]\n      typeof __non_webpack_require__ !== \"undefined\"\n        ? __non_webpack_require__\n        : require; /* needed for Jest */\n    const nodeCrypto = realRequire(\"crypto\");\n    if (buf.length > 65536) {\n      const e = new Error();\n      (e: any).code = 22;\n      e.message = `Quota exceeded: requested ${buf.length} > 65536 bytes`;\n      e.name = \"QuotaExceededError\";\n      throw e;\n    }\n    const bytes = nodeCrypto.randomBytes(buf.length);\n    buf.set(bytes);\n    return buf;\n  }\n  throw new Error(\"No secure random number generator available.\");\n}\n","// @flow\n\nimport {type Uuid, parser, delimitedUuidParser} from \"../../util/uuid\";\n\nexport type IdentityId = Uuid;\nexport const identityIdParser = parser;\nexport const delimitedIdentityIdParser = delimitedUuidParser;\n","// @flow\n\nimport {type NodeAddressT, NodeAddress} from \"../../core/graph\";\nimport * as C from \"../../util/combo\";\n\n/**\n * An Alias is basically another graph Node which resolves to this identity. We\n * ignore the timestamp because it's generally not significant for users; we\n * keep the address out of obvious necessity, and we keep the description so we\n * can describe this alias in UIs (e.g. the ledger admin panel).\n */\nexport type Alias = {|\n  +description: string,\n  +address: NodeAddressT,\n|};\n\nexport const parser: C.Parser<Alias> = C.object({\n  address: NodeAddress.parser,\n  description: C.string,\n});\n","// @flow\n\nimport * as C from \"../../util/combo\";\nimport deepFreeze from \"deep-freeze\";\n\nconst ValidIdentityTypes = {\n  USER: \"USER\",\n  PROJECT: \"PROJECT\",\n  ORGANIZATION: \"ORGANIZATION\",\n  BOT: \"BOT\",\n};\n\n// export a read-only version of the ValidIdentityTypes object for programmatic reference\nexport const IdentityTypes: typeof ValidIdentityTypes = deepFreeze(\n  ValidIdentityTypes\n);\nexport type IdentityType = $Keys<typeof IdentityTypes>;\nexport const parser: C.Parser<IdentityType> = C.exactly(\n  Object.keys(IdentityTypes)\n);\n","// @flow\n\nimport * as C from \"../../util/combo\";\nimport {\n  type Uuid,\n  random as randomUuid,\n  parser as uuidParser,\n} from \"../../util/uuid\";\nimport {type Name, parser as nameParser, nameFromString} from \"./name\";\nimport {type Alias, parser as aliasParser} from \"./alias\";\nimport {type IdentityType, parser as identityTypeParser} from \"./identityType\";\nimport {\n  type NodeAddressT,\n  NodeAddress,\n  type Node as GraphNode,\n  type NodeContraction,\n} from \"../../core/graph\";\n\nexport type IdentityId = Uuid;\n\nexport type Identity = {|\n  // UUID, assigned when the identity is created.\n  +id: IdentityId,\n  +name: Name,\n  +subtype: IdentityType,\n  // The identity's own node address.\n  // The address is guaranteed to start with IDENTITY_PREFIX, and to\n  // include the identity id for uniqueness. Beyond that, you may NOT make any\n  // assumptions about the particular address structure. Remember that these\n  // addresses are permanent.\n  +address: NodeAddressT,\n  // Every other node in the graph that this identity corresponds to.\n  // Does not include the identity's \"own\" address, i.e. the result\n  // of calling (identityAddress(identity.id)).\n  +aliases: $ReadOnlyArray<Alias>,\n|};\n\n// It's not in the typical [owner, name] format because it isn't provided by a plugin.\n// Instead, it's a raw type owned by SourceCred project.\nexport const IDENTITY_PREFIX: NodeAddressT = NodeAddress.fromParts([\n  \"sourcecred\",\n  \"core\",\n  \"IDENTITY\",\n]);\n\nexport function newIdentity(subtype: IdentityType, name: string): Identity {\n  const id = randomUuid();\n  try {\n    identityTypeParser.parseOrThrow(subtype);\n  } catch (e) {\n    throw new Error(`invalid identity subtype: ${subtype}`);\n  }\n  return {\n    id,\n    subtype,\n    address: NodeAddress.append(IDENTITY_PREFIX, id),\n    name: nameFromString(name),\n    aliases: [],\n  };\n}\n\nexport function graphNode({name, address}: Identity): GraphNode {\n  return {\n    address,\n    description: name,\n    timestampMs: null,\n  };\n}\n\nexport function contractions(\n  identities: $ReadOnlyArray<Identity>\n): $ReadOnlyArray<NodeContraction> {\n  return identities.map((i) => ({\n    replacement: graphNode(i),\n    old: i.aliases.map((a) => a.address),\n  }));\n}\n\nexport const parser: C.Parser<Identity> = C.object({\n  id: uuidParser,\n  subtype: identityTypeParser,\n  name: nameParser,\n  address: NodeAddress.parser,\n  aliases: C.array(aliasParser),\n});\n","// @flow\n\nimport {\n  ethAddressParser,\n  type EthAddress,\n} from \"../../plugins/ethereum/ethAddress\";\nimport stringify from \"json-stable-stringify\";\nimport * as C from \"../../util/combo\";\n\n/**\n * EvmChainId is represented in the form of a stringified integer for all\n * EVM-based chains, including mainnet (1), and xDai (100).\n * The reason for this is that ethereum's client configuration utilizes\n * a number to represent chainId, and this way we can just transpose that\n * chainId here as a component of the currency Id, since the web3 client will\n * return a stringified integer when the chainId is requested.\n */\nexport opaque type EvmChainId: string = string;\n\nexport function parseEvmChainId(id: string): EvmChainId {\n  const result = parseInt(id, 10).toString();\n  if (Number.isNaN(result) || result !== id) {\n    throw new Error(`Invalid EVM chainId value: ${id}`);\n  }\n  return id;\n}\n\nexport type Evm = {|\n  +type: \"EVM\",\n  +chainId: EvmChainId,\n  /**\n   * tokenAddress is a subset of all available EthAddresses.\n   *\n   * A token address is the address of the token contract for an ERC20 token,\n   * or the 20 byte-length equivalent of 0x0, which is the conventional address\n   * used to represent ETH on the ethereum mainnet, or the native currency on an\n   * EVM-based sidechain. See here for more details on these semantics:\n   * https://ethereum.org/en/developers/docs/intro-to-ethereum/#eth\n   */\n  +tokenAddress: EthAddress,\n|};\n\n/**\n * Example protocol symbols: \"BTC\" for bitcoin and \"FIL\" for Filecoin\n */\nexport opaque type ProtocolSymbol: string = string;\n\nexport const protocolSymbolParser: C.Parser<ProtocolSymbol> = C.exactly([\n  \"BTC\",\n  \"FIL\",\n]);\n\n/**\n * Chains like Bitcoin and Filecoin do not have \"production\" sidechains so\n * we represent them as a string, as specified in the ProtocolSymbol type\n */\nexport type Protocol = {|\n  +type: \"PROTOCOL\",\n  +chainId: ProtocolSymbol,\n|};\n\nexport type ChainId = EvmChainId | ProtocolSymbol;\nexport type Currency = Evm | Protocol;\n\nexport const evmChainParser: C.Parser<EvmChainId> = C.fmap(\n  C.string,\n  parseEvmChainId\n);\n\nexport const evmParser: C.Parser<Evm> = C.object({\n  type: C.exactly([\"EVM\"]),\n  chainId: evmChainParser,\n  tokenAddress: ethAddressParser,\n});\n\nexport const protocolParser: C.Parser<Protocol> = C.object({\n  type: C.exactly([\"PROTOCOL\"]),\n  chainId: protocolSymbolParser,\n});\n\n// @topocount TODO: enable protocolIdParser once we support its address types\nexport const currencyParser: C.Parser<Currency> = C.orElse([\n  evmParser,\n  protocolParser,\n]);\n\n/**\n * The Currency key must be stringified to ensure the data is retrievable.\n * Keying on the raw Currency object means keying on the object reference,\n * rather than the contents of the object.\n */\nexport opaque type CurrencyKey = string;\n\nexport function getCurrencyKey(currency: Currency): CurrencyKey {\n  return stringify(currency);\n}\n\nexport function buildCurrency(\n  chainId: string,\n  tokenAddress?: string\n): Currency {\n  return tokenAddress\n    ? evmParser.parseOrThrow({\n        type: \"EVM\",\n        chainId,\n        tokenAddress,\n      })\n    : protocolParser.parseOrThrow({\n        type: \"PROTOCOL\",\n        chainId,\n      });\n}\n","// @flow\n\nimport * as C from \"../util/combo\";\nimport * as NullUtil from \"../util/null\";\nimport {\n  type Currency as IntegrationCurrency,\n  currencyParser as integrationCurrencyParser,\n} from \"../core/ledger/currency\";\n/**\n * Shape of currencyDetails.json on disk\n */\ntype SerializedCurrencyDetails = {|\n  +currencyName?: string,\n  +currencySuffix?: string,\n  +decimalsToDisplay?: number,\n  +integrationCurrency?: IntegrationCurrency,\n|};\n\n/**\n * Shape of currencyDetails json in memory after parsing\n */\nexport type CurrencyDetails = {|\n  +name: string,\n  +suffix: string,\n  +decimals: number,\n  +integrationCurrency?: IntegrationCurrency,\n|};\n\nexport const DEFAULT_NAME = \"Grain\";\nexport const DEFAULT_SUFFIX = \"g\";\nexport const DEFAULT_DECIMALS = 2;\n\n/**\n * Utilized by combo.fmap to enforce default currency values\n * when parsing. This engenders a \"canonical default\" since there\n * will be no need to add default fallbacks when handling currency\n * detail values after parsing the serialized file.\n */\nfunction upgrade(c: SerializedCurrencyDetails): CurrencyDetails {\n  if (\n    typeof c.decimalsToDisplay === \"number\" &&\n    (c.decimalsToDisplay > 18 || c.decimalsToDisplay < 0)\n  )\n    throw new Error(\"currencyConfig: decimalsToDisplay must be between 0-18\");\n\n  return {\n    name: NullUtil.orElse(c.currencyName, DEFAULT_NAME),\n    suffix: NullUtil.orElse(c.currencySuffix, DEFAULT_SUFFIX),\n    decimals: NullUtil.orElse(c.decimalsToDisplay, DEFAULT_DECIMALS),\n    integrationCurrency: c.integrationCurrency,\n  };\n}\n\nexport function defaultCurrencyConfig(): CurrencyDetails {\n  return {\n    name: DEFAULT_NAME,\n    suffix: DEFAULT_SUFFIX,\n    decimals: DEFAULT_DECIMALS,\n  };\n}\n\nexport const parser: C.Parser<CurrencyDetails> = C.fmap(\n  C.object(\n    {},\n    {\n      currencyName: C.string,\n      currencySuffix: C.string,\n      decimalsToDisplay: C.number,\n      integrationCurrency: integrationCurrencyParser,\n    }\n  ),\n  upgrade\n);\n","// @flow\n\nimport * as P from \"../../util/combo\";\nimport bigInt from \"big-integer\";\nimport {DEFAULT_SUFFIX} from \"../../api/currencyConfig\";\n\n/**\n * This module contains the types for tracking Grain, which is the native\n * project-specific, cred-linked token created in SourceCred instances. In\n * practice, projects can call these tokens anything they want, but we will\n * refer to the tokens as \"Grain\" throughout the codebase. The conserved\n * properties of all Grains are that they are minted/distributed based on cred\n * scores, and that they can be used to Boost contributions in a cred graph.\n *\n * We track Grain using big integer arithmetic, so that we can be precise with\n * Grain values and avoid float imprecision issues. Following the convention of\n * ERC20 tokens, we track Grain at 18 decimals of precision, although we can\n * make this project-specific if there's a future need.\n *\n * At rest, we represent Grain as strings. This is a convenient decision around\n * serialization boundaries, so that we can just directly stringify objects containing\n * Grain values and it will Just Work. The downside is that we need to convert them to/fro\n * string representations any time we need to do Grain arithmetic, which could create\n * perf hot spots. If so, we can factor out the hot loop and do them in a way\n * that has less overhead. You can see context for this decision in [#1936] and [#1938].\n *\n * Ideally, we would just use the native [BigInt] type. However, at time of\n * writing it's not well supported by [flow] or Safari, so we use the\n * big-integer library. That library delegates out to native BigInt when\n * available, so this should be fine.\n *\n * Since the big-integer library does have a sensible `toString` method defined\n * on the integers, we could switch to representing Grain at rest via\n * big-integers rather than as strings. However, this would require re-writing\n * a lot of test code. If perf becomes an issue that would be a principled fix.\n *\n * [BigInt]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt\n * [flow]: https://github.com/facebook/flow/issues/6639\n * [#1936]: https://github.com/sourcecred/sourcecred/pull/1936\n * [#1938]: https://github.com/sourcecred/sourcecred/pull/1938\n */\nexport opaque type Grain: string = string;\n\nexport const ZERO: Grain = \"0\";\n\n// How many digits of precision there are in \"one\" grain\nexport const DECIMAL_PRECISION = 18;\n\n// One \"full\" grain\nexport const ONE: Grain = bigInt(10).pow(DECIMAL_PRECISION).toString();\n\nexport function add(a: Grain, b: Grain): Grain {\n  return bigInt(a).plus(bigInt(b)).toString();\n}\nexport function sub(a: Grain, b: Grain): Grain {\n  return bigInt(a).subtract(bigInt(b)).toString();\n}\nexport function mul(a: Grain, b: Grain): Grain {\n  return bigInt(a).times(bigInt(b)).toString();\n}\nexport function div(a: Grain, b: Grain): Grain {\n  return bigInt(a).divide(bigInt(b)).toString();\n}\nexport function lt(a: Grain, b: Grain): boolean {\n  return bigInt(a).lt(bigInt(b));\n}\nexport function gt(a: Grain, b: Grain): boolean {\n  return bigInt(a).gt(bigInt(b));\n}\nexport function lte(a: Grain, b: Grain): boolean {\n  return bigInt(a).leq(bigInt(b));\n}\nexport function gte(a: Grain, b: Grain): boolean {\n  return bigInt(a).geq(bigInt(b));\n}\nexport function eq(a: Grain, b: Grain): boolean {\n  return bigInt(a).eq(bigInt(b));\n}\n\nexport function fromString(s: string): Grain {\n  return bigInt(s).toString();\n}\n\n/**\n * Formats a grain balance as a human-readable number, dividing the\n * raw grain balance by `one`.\n *\n * The client controls how many digits of precision are shown; by default, we\n * display zero digits. Grain balances will have commas added as\n * thousands-separators if the balance is greater than 1000g.\n *\n * The client also specifies a suffix; by default, we use 'g' for grain.\n *\n * Here are some examples of its behavior, pretending that we use 2 decimals\n * of precision for readability:\n *\n * format(133700042n) === \"1,337,000g\"\n * format(133700042n, 2) === \"1,337,000.42g\"\n * format(133700042n, 2, \"seeds\") === \"1,337,000.42seeds\"\n * format(133700042n, 2, \"\") === \"1,337,000.42\"\n *\n */\nexport function format(\n  grain: Grain,\n  decimals: number = 0,\n  suffix: string = DEFAULT_SUFFIX\n): string {\n  if (\n    !Number.isInteger(decimals) ||\n    decimals < 0 ||\n    decimals > DECIMAL_PRECISION\n  ) {\n    throw new Error(\n      `decimals must be integer in range [0..${DECIMAL_PRECISION}]`\n    );\n  }\n  const isNegative = grain[0] === \"-\";\n  let digits = [...grain];\n  if (isNegative) {\n    // Remove the negative sign for consistency, we'll prepend it back at the end\n    digits = digits.slice(1, digits.length);\n  }\n\n  // If the number is less than one, we need to pad it with zeros at the front\n  if (digits.length < DECIMAL_PRECISION + 1) {\n    digits = [\n      ...new Array(DECIMAL_PRECISION + 1 - digits.length).fill(\"0\"),\n      ...digits,\n    ];\n  }\n  // If we have more than 1000 grain, then we will insert commas for\n  // readability\n  const integerDigits = digits.length - DECIMAL_PRECISION;\n  const numCommasToInsert = Math.floor((integerDigits - 1) / 3);\n  for (let i = 0; i < numCommasToInsert; i++) {\n    // Count digits backwards from the last integer.\n    // Since we are moving from high index to low, we don't need to adjust for\n    // the fact that we're mutating the length of the array as we go... if you\n    // are concerned, rest assured that this logic is tested :)\n    digits.splice(integerDigits - i * 3 - 3, 0, \",\");\n  }\n  if (decimals > 0) {\n    // Insert a decimal point at the right spot\n    digits.splice(digits.length - DECIMAL_PRECISION, 0, \".\");\n  }\n  // Slice away all the unwanted precision\n  digits = digits.slice(0, digits.length - DECIMAL_PRECISION + decimals);\n  if (isNegative) {\n    // re-insert the negative sign, if appropriate\n    digits.splice(0, 0, \"-\");\n  }\n  return digits.join(\"\") + suffix;\n}\n\n/**\n * Formats a grain balance as a human-readable number using the format()\n * method, but trims any unnecessary decimal information.\n *\n * The intended use is for UI presentation where less visual clutter is\n * desired.\n *\n * Here are some examples of its behavior\n *\n * formatAndTrim(100000000000000) === \"0.0001g\"\n * formatAndTrim(150000000000000000000) === \"150g\"\n * formatAndTrim(15000000000000000000000) === \"15,000g\"\n * formatAndTrim(15000000000000000000000, \"seeds\") === \"15,000seeds\"\n * formatAndTrim(15000000000000000000000, \"\") === \"15,000\"\n *\n */\nexport function formatAndTrim(\n  grain: Grain,\n  suffix: string = DEFAULT_SUFFIX\n): string {\n  return format(grain, DECIMAL_PRECISION, \"\").replace(/\\.?0+$/, \"\") + suffix;\n}\n\n/**\n * Multiply a grain amount by a floating point number.\n *\n * Use this method when you need to multiply a grain balance by a floating\n * point number, e.g. a ratio.\n *\n * Note that this method is imprecise. It is not safe to assume, for example,\n * that `multiply(g, 1/3) + multiply(g, 2/3) === g` due to loss of precision.\n * However, the errors will be small in absolute terms (i.e. tiny compared to\n * one full grain).\n *\n * See some messy analysis of the numerical errors here:\n * https://observablehq.com/@decentralion/grain-arithmetic\n */\nexport function multiplyFloat(grain: Grain, num: number): Grain {\n  if (!isFinite(num)) {\n    throw new Error(`invalid input: num is ${num}`);\n  }\n  if (num === 1) {\n    // The one case where we can be sure to return a correct answer :)\n    return grain;\n  }\n\n  const floatProduct = Number(grain) * num;\n  return bigInt(Math.floor(floatProduct)).toString();\n}\n\nexport function divideFloat(dividend: Grain, divisor: number): Grain {\n  return multiplyFloat(dividend, 1 / divisor);\n}\n\n/**\n * Convert an integer number (in floating-point representation) into a precise\n * Grain value.\n */\nexport function fromInteger(x: number): Grain {\n  if (!isFinite(x) || Math.floor(x) !== x) {\n    throw new Error(`not an integer: ${x}`);\n  }\n  return bigInt(ONE).times(bigInt(x)).toString();\n}\n\n/**\n * Accept human-readable numbers strings and convert them to precise grain amounts\n *\n * This is most useful for processing form input values before passing them\n * into the ledger, since all form fields return strings\n *\n * In this case, a \"float string\" is a string that returns a number value\n * when passed into `parseFloat`\n *\n * The reason to circumvent any floating point values is to avoid losses in\n * precision. By modifying the string directly in a predictable pattern, we can\n * convert uer-generated floating point values to grain at full fidelity, and avoid\n * any fuzzy floating point arithmetic\n *\n * The tradeoff here is around versatility. Values with more decimals than the\n * allowable precision will yield an error when passed in.\n */\nexport function fromFloatString(\n  x: string,\n  precision: number = DECIMAL_PRECISION\n): Grain {\n  if (typeof x !== \"string\") {\n    throw new Error(`not a string: ${x}`);\n  }\n  if (!(isFinite(x) && x.trim())) {\n    throw new Error(`input not a valid number: ${x}`);\n  }\n\n  const [whole = \"\", dec = \"\"] = x.split(\".\");\n  if (dec.length > precision) {\n    throw new Error(\n      `Provided decimals ${dec.length} exceed allowable precision ${precision}`\n    );\n  }\n  const paddedDecimal = dec.padEnd(precision, \"0\");\n\n  return bigInt(`${whole}${paddedDecimal}`).toString();\n}\n\n// Returns a string containing a float representation of the grain,\n// which can be rehydrated into grain losslessly using fromFloatString\n// Example: toFloatString(15000111000000000000000) === \"15000.111\"\nexport const toFloatString = (g: Grain): string => {\n  return formatAndTrim(g, \"\").replace(/,/g, \"\");\n};\n\n/**\n * Approximately create a grain balance from a float.\n *\n * This method tries to convert the floating point `amt` into a grain\n * balance. For example, `grain(1)` approximately equals `ONE`.\n *\n * Do not assume this will be precise! For example, `grain(0.1337)` results in\n * `133700000000000016n`. This method is intended for test code.\n *\n * This is a shorthand for `multiplyFloat(ONE, amt)`.\n */\nexport function fromApproximateFloat(f: number): Grain {\n  return multiplyFloat(ONE, f);\n}\n\n/**\n * Approximates the division of two grain values\n *\n * This naive implementation of grain division converts the given values\n * to floats and performs simple floating point division.\n *\n * Do not assume this will be precise!\n */\nexport function toFloatRatio(numerator: Grain, denominator: Grain): number {\n  return Number(numerator) / Number(denominator);\n}\n\n/**\n * Splits a budget of Grain proportional to floating-point scores.\n *\n * splitBudget guarantees that the total amount distributed will precisely\n * equal the budget. This is a surprisingly challenging property to ensure, and\n * it explains the complexity of this algorithm. We stress-test the method with\n * extremely uneven share distribution (e.g. a split where some users' scores\n * are 10**100 larger than others).\n *\n * The algorithm can be arbitrarily unfair at the atto-Grain level; for\n * example, in the case `splitBudget(fromString(\"1\"), [1, 100])` it will give\n * all the Grain to the first account, even though it only has 1/100th the score\n * of the second account. However, since Grain is tracked with 18 decimal point\n * precision, these tiny biases mean very little in practice. In testing, when\n * splitting one full Grain (i.e. 10**18 attoGrain), we haven't seen discrepancies\n * over ~100 attoGrain, or one billion-million-th of a full Grain.\n */\nexport function splitBudget(\n  budget: Grain,\n  scores: $ReadOnlyArray<number>\n): $ReadOnlyArray<Grain> {\n  if (lt(budget, ZERO)) {\n    throw new Error(\"negative budget\");\n  }\n\n  const totalScore = scores.reduce((a, b) => a + b, 0);\n  if (!isFinite(totalScore)) {\n    throw new Error(`scores must all be finite, got: ${totalScore}`);\n  }\n  if (totalScore <= 0) {\n    throw new Error(`total score must be positive, got: ${totalScore}`);\n  }\n\n  let scoreRemaining = totalScore;\n  let budgetRemaining = budget;\n  const pieces = scores.map((s) => {\n    if (s < 0) {\n      throw new Error(\"negative score: \" + s);\n    }\n    if (s === 0 || scoreRemaining === 0) {\n      // You would think that s === 0 implies scoreRemaining === 0, but\n      // testing in extreme circumstances reveals that both checks are needed.\n      return \"0\";\n    }\n    let fraction = s / scoreRemaining;\n    if (fraction > 1) {\n      fraction = 1;\n    }\n    const piece = multiplyFloat(budgetRemaining, fraction);\n\n    /**\n     * Uncomment below if you want to measure the discrepancy caused by\n     * forcing fracion=1 whenever fraction > 1.\n     *\n     * In testing, when distributing one full Grain across wildly unequal\n     * scores, it never produced more than ~hundreds of attoGrain discrepancy.\n     */\n    /*\n    const altPiece = multiplyFloat(budgetRemaining, s / scoreRemaining);\n    if (altPiece !== piece) {\n      const delta = sub(altPiece, piece);\n      console.error(\n        `${delta} discrepancy due to capping ${s} / ${scoreRemaining} from ${\n          s / scoreRemaining\n        } to 1`\n      );\n    }\n    */\n\n    budgetRemaining = sub(budgetRemaining, piece);\n    scoreRemaining -= s;\n    return piece;\n  });\n\n  // istanbul ignore if\n  if (lt(budgetRemaining, \"0\")) {\n    // Per the contract of the function, this should never happen.\n    throw new Error(\"invariant error: budget overspent: \" + budgetRemaining);\n  }\n  if (gt(budgetRemaining, \"0\")) {\n    /**\n     * Uncomment below if you want to measure the discrepancy caused by this\n     * \"giveaway-leftovers\" approach. In testing, when run with wildly varying\n     * shares, it never produced more than ~hundreds of attoGrain discrepancy.\n     */\n    /*\n    console.error(\n      `${budgetRemaining} discrepancy being resolved via giveaway to last share`\n    );\n    */\n    pieces[pieces.length - 1] = add(pieces[pieces.length - 1], budgetRemaining);\n  }\n  return pieces;\n}\n\n/**\n * Sum a sequence of Grain values.\n */\nexport function sum(xs: Iterable<Grain>): Grain {\n  let total = bigInt(0);\n  for (const x of xs) {\n    total = total.add(bigInt(x));\n  }\n  return total.toString();\n}\n\nexport const parser: P.Parser<Grain> = P.fmap(P.string, fromString);\n","export default function sum(values, valueof) {\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        sum += value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        sum += value;\n      }\n    }\n  }\n  return sum;\n}\n","// @flow\n\nimport * as G from \"./grain\";\nimport * as P from \"../../util/combo\";\n\n/**\n * The NonnegativeGrain type ensures Grain amount is >= 0,\n * which is particularly useful in the case of policy budgets\n * or grain transfers.\n */\nexport opaque type NonnegativeGrain: G.Grain = G.Grain;\n\nexport function fromGrain(g: G.Grain): NonnegativeGrain {\n  if (G.lt(g, G.ZERO)) {\n    throw new Error(`Grain amount must be nonnegative, got ${g}`);\n  }\n  return g;\n}\n\nexport function fromInteger(n: number): NonnegativeGrain {\n  return fromGrain(G.fromInteger(n));\n}\n\nexport function fromString(s: string): NonnegativeGrain {\n  return fromGrain(G.fromString(s));\n}\n\nexport function fromFloatString(s: string): NonnegativeGrain {\n  return fromGrain(G.fromFloatString(s));\n}\n\nexport const grainParser: P.Parser<NonnegativeGrain> = P.fmap(\n  G.parser,\n  fromGrain\n);\nexport const numberParser: P.Parser<NonnegativeGrain> = P.fmap(\n  P.number,\n  fromInteger\n);\nexport const numberOrFloatStringParser: P.Parser<NonnegativeGrain> = P.orElse([\n  P.fmap(P.integer, fromInteger),\n  P.fmap(P.string, fromFloatString),\n]);\nexport const stringParser: P.Parser<NonnegativeGrain> = P.fmap(\n  P.string,\n  fromString\n);\n","// @flow\nimport {sum} from \"d3-array\";\nimport * as G from \"../grain\";\nimport * as P from \"../../../util/combo\";\nimport {type GrainReceipt} from \"../grainAllocation\";\nimport {\n  type NonnegativeGrain,\n  grainParser,\n  numberOrFloatStringParser,\n} from \"../nonnegativeGrain\";\nimport {type CredGrainView} from \"../../credGrainView\";\nimport {type TimestampMs} from \"../../../util/timestamp\";\n/**\n * The Balanced policy attempts to pay Grain to everyone so that their\n * lifetime Grain payouts are consistent with their lifetime Cred scores.\n *\n * We recommend use of the Balanced strategy as it takes new information into\n * account-- for example, if a user's contributions earned little Cred in the\n * past, but are now seen as more valuable, the Balanced policy will take this\n * into account and pay them more, to fully appreciate their past\n * contributions.\n */\nexport type Balanced = \"BALANCED\";\n\nexport type BalancedPolicy = {|\n  +policyType: Balanced,\n  +budget: NonnegativeGrain,\n  +numIntervalsLookback: number,\n|};\n\nexport type BalancedConfig = {|\n  +policyType: Balanced,\n  +budget: string | number,\n  +numIntervalsLookback: number,\n|};\n\n/**\n * Allocate a fixed budget of Grain to the users who were \"most underpaid\".\n *\n * We consider a user underpaid if they have received a smaller proportion of\n * past earnings than their share of score. They are balanced paid if their\n * proportion of earnings is equal to their score share, and they are overpaid\n * if their proportion of earnings is higher than their share of the score.\n *\n * We start by imagining a hypothetical world, where the entire grain supply of\n * the project (including this allocation) was allocated according to the\n * current scores. Based on this, we can calculate the \"balanced\" lifetime earnings\n * for each participant. Usually, some will be \"underpaid\" (they received less\n * than this amount) and others are \"overpaid\".\n *\n * We can sum across all users who were underpaid to find the \"total\n * underpayment\".\n *\n * Now that we've calculated each actor's underpayment, and the total\n * underpayment, we divide the allocation's grain budget across users in\n * proportion to their underpayment.\n *\n * You should use this allocation when you want to divide a fixed budget of grain\n * across participants in a way that aligns long-term payment with total cred\n * scores.\n */\nexport function balancedReceipts(\n  policy: BalancedPolicy,\n  credGrainView: CredGrainView,\n  effectiveTimestamp: TimestampMs\n): $ReadOnlyArray<GrainReceipt> {\n  if (policy.numIntervalsLookback < 0) {\n    throw new Error(\n      `numIntervalsLookback must be at least 0, got ${policy.numIntervalsLookback}`\n    );\n  }\n  if (!Number.isInteger(policy.numIntervalsLookback)) {\n    throw new Error(\n      `numIntervalsLookback must be an integer, got ${policy.numIntervalsLookback}`\n    );\n  }\n\n  const timeLimitedCredGrainView = credGrainView.withTimeScopeFromLookback(\n    effectiveTimestamp,\n    policy.numIntervalsLookback\n  );\n  const timeLimitedParticipants = timeLimitedCredGrainView.activeParticipants();\n\n  const totalCred = sum(\n    timeLimitedParticipants.map((participant) => participant.cred)\n  );\n\n  const totalEverPaid = G.sum(\n    timeLimitedParticipants.map((participant) => participant.grainEarned)\n  );\n\n  const targetTotalDistributed = G.add(totalEverPaid, policy.budget);\n  const targetGrainPerCred = G.multiplyFloat(\n    targetTotalDistributed,\n    1 / totalCred\n  );\n\n  const userUnderpayment = timeLimitedParticipants.map((participant) => {\n    const lookbackCred = sum(participant.credPerInterval);\n    const target = G.multiplyFloat(targetGrainPerCred, lookbackCred);\n\n    if (G.gt(target, participant.grainEarned)) {\n      return G.sub(target, participant.grainEarned);\n    } else {\n      return G.ZERO;\n    }\n  });\n\n  const floatUnderpayment = userUnderpayment.map((x) => Number(x));\n  const grainAmounts = G.splitBudget(policy.budget, floatUnderpayment);\n  return timeLimitedParticipants.map(({identity}, i) => ({\n    id: identity.id,\n    amount: grainAmounts[i],\n  }));\n}\n\nexport const balancedRawParser: P.Parser<BalancedConfig> = P.object({\n  policyType: P.exactly([\"BALANCED\"]),\n  budget: P.orElse([P.string, P.number]),\n  numIntervalsLookback: P.number,\n});\n\nexport const balancedConfigParser: P.Parser<BalancedPolicy> = P.object({\n  policyType: P.exactly([\"BALANCED\"]),\n  budget: numberOrFloatStringParser,\n  numIntervalsLookback: P.number,\n});\n\nexport const balancedPolicyParser: P.Parser<BalancedPolicy> = P.fmap(\n  P.object(\n    {\n      policyType: P.exactly([\"BALANCED\"]),\n      budget: grainParser,\n    },\n    {\n      numIntervalsLookback: P.number,\n    }\n  ),\n  (policy) => ({\n    ...policy,\n    numIntervalsLookback:\n      policy.numIntervalsLookback != null ? policy.numIntervalsLookback : 0,\n  })\n);\n\nexport function toString(policy: BalancedPolicy): string {\n  return [\n    policy.policyType + \" Policy\",\n    \"Budget \" + G.format(policy.budget, 3),\n  ].join(`\\n`);\n}\n","// @flow\n\nimport * as G from \"../grain\";\nimport * as P from \"../../../util/combo\";\nimport {type GrainReceipt} from \"../grainAllocation\";\nimport {type CredGrainView} from \"../../credGrainView\";\nimport {\n  type NonnegativeGrain,\n  grainParser,\n  numberOrFloatStringParser,\n} from \"../nonnegativeGrain\";\nimport {type TimestampMs} from \"../../../util/timestamp\";\n\n/**\n * The Immediate policy evenly distributes its Grain budget across users\n * based on their Cred in the most recent interval.\n *\n * It's used when you want to ensure that everyone gets some consistent reward\n * for participating (even if they may be \"overpaid\" in a lifetime sense).\n * We recommend using a smaller budget for the Immediate policy.\n */\nexport type Immediate = \"IMMEDIATE\";\n\nexport type ImmediatePolicy = {|\n  +policyType: Immediate,\n  +budget: NonnegativeGrain,\n  +numIntervalsLookback: number,\n|};\n\nexport type ImmediateConfig = {|\n  +policyType: Immediate,\n  +budget: string | number,\n  +numIntervalsLookback: number,\n|};\n\n/**\n * Split a grain budget in proportion to the cred scores in\n * the most recent time interval, with the option to extend the interval\n * to include the last {numIntervalsLookback} weeks.\n */\nexport function immediateReceipts(\n  policy: ImmediatePolicy,\n  credGrainView: CredGrainView,\n  effectiveTimestamp: TimestampMs\n): $ReadOnlyArray<GrainReceipt> {\n  // Default to 1 interval to preserve back-compat with old ledger events\n\n  if (policy.numIntervalsLookback < 1) {\n    throw new Error(\n      `numIntervalsLookback must be at least 1, got ${policy.numIntervalsLookback}`\n    );\n  }\n  if (!Number.isInteger(policy.numIntervalsLookback)) {\n    throw new Error(\n      `numIntervalsLookback must be an integer, got ${policy.numIntervalsLookback}`\n    );\n  }\n\n  const timeLimitedCredGrainView = credGrainView.withTimeScopeFromLookback(\n    effectiveTimestamp,\n    policy.numIntervalsLookback\n  );\n  const timeLimitedParticipants = timeLimitedCredGrainView.activeParticipants();\n\n  const shortTermCredPerIdentity = timeLimitedParticipants.map((p) => p.cred);\n  const amounts = G.splitBudget(policy.budget, shortTermCredPerIdentity);\n\n  return timeLimitedParticipants.map(({identity}, i) => ({\n    id: identity.id,\n    amount: amounts[i],\n  }));\n}\n\nexport const immediateRawParser: P.Parser<ImmediateConfig> = P.object({\n  policyType: P.exactly([\"IMMEDIATE\"]),\n  budget: P.orElse([P.string, P.number]),\n  numIntervalsLookback: P.number,\n});\n\nexport const immediateConfigParser: P.Parser<ImmediatePolicy> = P.object({\n  policyType: P.exactly([\"IMMEDIATE\"]),\n  budget: numberOrFloatStringParser,\n  numIntervalsLookback: P.number,\n});\n\nexport const immediatePolicyParser: P.Parser<ImmediatePolicy> = P.fmap(\n  P.object(\n    {\n      policyType: P.exactly([\"IMMEDIATE\"]),\n      budget: grainParser,\n    },\n    {\n      numIntervalsLookback: P.number,\n    }\n  ),\n  (policy) => ({\n    ...policy,\n    numIntervalsLookback:\n      policy.numIntervalsLookback != null ? policy.numIntervalsLookback : 1,\n  })\n);\n\nexport function toString(policy: ImmediatePolicy): string {\n  return [\n    policy.policyType + \" Policy\",\n    \"Budget \" + G.format(policy.budget, 3),\n  ].join(`\\n`);\n}\n","// @flow\n\nimport * as G from \"../grain\";\nimport * as P from \"../../../util/combo\";\nimport {type CredGrainView} from \"../../credGrainView\";\nimport {type TimestampMs} from \"../../../util/timestamp\";\nimport {type GrainReceipt} from \"../grainAllocation\";\nimport {\n  type NonnegativeGrain,\n  grainParser,\n  numberOrFloatStringParser,\n} from \"../nonnegativeGrain\";\nimport {delimitedIdentityIdParser, type IdentityId} from \"../../identity\";\n\n/**\n * The Recent policy distributes cred using a time discount factor, weighing\n * recent contributions higher. The policy takes a history of cred scores, progressively\n * discounting past cred scores, and then taking the sum over the discounted scores.\n *\n * A cred score at time t reads as follows: \"The discounted cred c' at a timestep which is\n * n timesteps back from the most recent one is its cred score c multiplied by the discount\n * factor to the nth power.\"\n *\n * c' =  c * (1 - discount) ** n\n *\n * Discounts range from 0 to 1, with a higher discount weighing recent contribution\n * higher.\n *\n * Note that this is a generalization of the Immediate policy, where Immediate\n * is the same as Recent with a full discount, i.e. a discount factor 1 (100%).\n *\n */\nexport type Recent = \"RECENT\";\n\nexport type RecentPolicy = {|\n  +policyType: Recent,\n  +budget: NonnegativeGrain,\n  +discount: Discount,\n  +exclusions: $ReadOnlyArray<IdentityId>,\n|};\n\nexport type RecentConfig = {|\n  +policyType: Recent,\n  +budget: string | number,\n  +discount: Discount,\n  +exclusions?: $ReadOnlyArray<IdentityId>,\n|};\n\n/**\n * Split a grain budget based on exponentially weighted recent\n * cred.\n */\nexport function recentReceipts(\n  policy: RecentPolicy,\n  credGrainView: CredGrainView,\n  effectiveTimestamp: TimestampMs\n): $ReadOnlyArray<GrainReceipt> {\n  const lookback = 0;\n\n  const timeLimitedCredGrainView = credGrainView.withTimeScopeFromLookback(\n    effectiveTimestamp,\n    lookback\n  );\n  const timeLimitedParticipants = timeLimitedCredGrainView\n    .activeParticipants()\n    .filter(\n      (participant) => !policy.exclusions.includes(participant.identity.id)\n    );\n\n  const computeDecayedCred = (participant) => {\n    return participant.credPerInterval.reduce(\n      (acc, cred) => acc * (1 - policy.discount) + cred,\n      0\n    );\n  };\n  const decayedCredPerIdentity = timeLimitedParticipants.map(\n    computeDecayedCred\n  );\n\n  const amounts = G.splitBudget(policy.budget, decayedCredPerIdentity);\n\n  return timeLimitedParticipants.map(({identity}, i) => ({\n    id: identity.id,\n    amount: amounts[i],\n  }));\n}\n\nexport const recentRawParser: P.Parser<RecentConfig> = P.object(\n  {\n    policyType: P.exactly([\"RECENT\"]),\n    budget: P.orElse([P.string, P.number]),\n    discount: P.fmap(P.number, toDiscount),\n  },\n  {\n    exclusions: P.array(delimitedIdentityIdParser),\n  }\n);\n\nexport const recentConfigParser: P.Parser<RecentPolicy> = P.fmap(\n  P.object(\n    {\n      policyType: P.exactly([\"RECENT\"]),\n      budget: numberOrFloatStringParser,\n      discount: P.fmap(P.number, toDiscount),\n    },\n    {\n      exclusions: P.array(delimitedIdentityIdParser),\n    }\n  ),\n  (config) => ({...config, exclusions: config.exclusions || []})\n);\n\nexport const recentPolicyParser: P.Parser<RecentPolicy> = P.fmap(\n  P.object(\n    {\n      policyType: P.exactly([\"RECENT\"]),\n      budget: grainParser,\n      discount: P.fmap(P.number, toDiscount),\n    },\n    {\n      exclusions: P.array(delimitedIdentityIdParser),\n    }\n  ),\n  (config) => ({...config, exclusions: config.exclusions || []})\n);\n\nexport opaque type Discount: number = number;\nexport function toDiscount(n: number): Discount {\n  if (n < 0 || n > 1) {\n    throw new Error(`Discount must be in range [0,1]`);\n  }\n\n  return n;\n}\n\nexport function toString(policy: RecentPolicy): string {\n  return [\n    policy.policyType + \" Policy\",\n    \"Budget \" + G.format(policy.budget, 3),\n    \"Discount: \" + policy.discount,\n  ].join(`\\n`);\n}\n","// @flow\n\nimport {parser as uuidParser} from \"../../../util/uuid\";\nimport * as P from \"../../../util/combo\";\nimport {type IdentityId, type Identity} from \"../../identity\";\nimport * as G from \"../grain\";\nimport {type GrainReceipt} from \"../grainAllocation\";\nimport {\n  type NonnegativeGrain,\n  grainParser,\n  numberOrFloatStringParser,\n} from \"../nonnegativeGrain\";\n\n/**\n * The Special policy is a power-maintainer tool for directly paying Grain\n * to a target identity. I'm including it because we will use it to create\n * \"initialization\" payouts to contributors with prior Grain balances in our old\n * ledger.\n *\n * This has potential for abuse, I don't recommend making it easy to make special\n * payouts from the UI, since it subverts the \"Grain comes from Cred\" model.\n */\nexport type Special = \"SPECIAL\";\n\nexport type SpecialPolicy = {|\n  +policyType: Special,\n  +budget: NonnegativeGrain,\n  +memo: string,\n  +recipient: IdentityId,\n|};\n\nexport type SpecialConfig = {|\n  +policyType: Special,\n  +budget: string | number,\n  +memo: string,\n  +recipient: IdentityId,\n|};\n\nexport function specialReceipts(\n  policy: SpecialPolicy,\n  identities: $ReadOnlyArray<Identity>\n): $ReadOnlyArray<GrainReceipt> {\n  for (const {id} of identities) {\n    if (id === policy.recipient) {\n      return [{id, amount: policy.budget}];\n    }\n  }\n  throw new Error(`no active grain account for identity: ${policy.recipient}`);\n}\n\nexport const specialRawParser: P.Parser<SpecialConfig> = P.object({\n  policyType: P.exactly([\"SPECIAL\"]),\n  budget: P.orElse([P.string, P.number]),\n  memo: P.string,\n  recipient: uuidParser,\n});\n\nexport const specialConfigParser: P.Parser<SpecialPolicy> = P.object({\n  policyType: P.exactly([\"SPECIAL\"]),\n  budget: numberOrFloatStringParser,\n  memo: P.string,\n  recipient: uuidParser,\n});\n\nexport const specialPolicyParser: P.Parser<SpecialPolicy> = P.object({\n  policyType: P.exactly([\"SPECIAL\"]),\n  budget: grainParser,\n  memo: P.string,\n  recipient: uuidParser,\n});\n\nexport function toString(policy: SpecialPolicy): string {\n  return [\n    policy.policyType + \" Policy\",\n    \"Budget \" + G.format(policy.budget, 3),\n    \"Memo: \" + policy.memo,\n    \"Recepient: \" + policy.recipient,\n  ].join(`\\n`);\n}\n","// @flow\n\nimport * as P from \"../../../util/combo\";\nimport {\n  type BalancedPolicy,\n  type BalancedConfig,\n  balancedReceipts,\n  balancedPolicyParser,\n  balancedConfigParser,\n  balancedRawParser,\n  toString as toStringBalanced,\n} from \"./balanced\";\nimport {\n  type ImmediatePolicy,\n  type ImmediateConfig,\n  immediateReceipts,\n  immediatePolicyParser,\n  immediateConfigParser,\n  immediateRawParser,\n  toString as toStringImmediate,\n} from \"./immediate\";\nimport {\n  type RecentPolicy,\n  type RecentConfig,\n  recentReceipts,\n  recentPolicyParser,\n  recentConfigParser,\n  recentRawParser,\n  toString as toStringRecent,\n} from \"./recent\";\nimport {\n  type SpecialPolicy,\n  type SpecialConfig,\n  specialReceipts,\n  specialPolicyParser,\n  specialConfigParser,\n  specialRawParser,\n  toString as toStringSpecial,\n} from \"./special\";\n\nexport {balancedReceipts, balancedPolicyParser};\nexport {immediateReceipts, immediatePolicyParser};\nexport {recentReceipts, recentPolicyParser};\nexport {specialReceipts, specialPolicyParser};\n\nexport type AllocationPolicy =\n  | BalancedPolicy\n  | ImmediatePolicy\n  | RecentPolicy\n  | SpecialPolicy;\n\nexport type AllocationConfig =\n  | BalancedConfig\n  | ImmediateConfig\n  | RecentConfig\n  | SpecialConfig;\n\n// Simply verifies and types what is in a config with no mutations.\nexport const allocationConfigParser: P.Parser<AllocationConfig> = P.orElse([\n  balancedRawParser,\n  immediateRawParser,\n  recentRawParser,\n  specialRawParser,\n]);\n\n// Mutates a config into a policy.\nexport const policyConfigParser: P.Parser<AllocationPolicy> = P.orElse([\n  balancedConfigParser,\n  immediateConfigParser,\n  recentConfigParser,\n  specialConfigParser,\n]);\n\n// Verifies and possibly mutates a serialized policy into a\n// deserialized policy. This is for use with the ledger log.\nexport const allocationPolicyParser: P.Parser<AllocationPolicy> = P.orElse([\n  balancedPolicyParser,\n  immediatePolicyParser,\n  recentPolicyParser,\n  specialPolicyParser,\n]);\n\nexport function toString(policy: AllocationPolicy): string {\n  switch (policy.policyType) {\n    case \"BALANCED\":\n      return toStringBalanced(policy);\n    case \"IMMEDIATE\":\n      return toStringImmediate(policy);\n    case \"RECENT\":\n      return toStringRecent(policy);\n    case \"SPECIAL\":\n      return toStringSpecial(policy);\n  }\n}\n","// @flow\n\n/**\n * In SourceCred, projects regularly distribute Grain to contributors based on\n * their Cred scores. This is called a \"Distribution\". This module contains the\n * logic for computing distributions.\n */\nimport * as G from \"./grain\";\nimport * as P from \"../../util/combo\";\nimport {type CredGrainView} from \"../credGrainView\";\nimport {type TimestampMs} from \"../../util/timestamp\";\n\nimport {\n  type Uuid,\n  random as randomUuid,\n  parser as uuidParser,\n} from \"../../util/uuid\";\nimport {type IdentityId, type Identity} from \"../identity\";\nimport {\n  type AllocationPolicy,\n  allocationPolicyParser,\n  balancedReceipts,\n  immediateReceipts,\n  recentReceipts,\n  specialReceipts,\n} from \"./policies\";\n\nexport type AllocationId = Uuid;\n\nexport type GrainReceipt = {|\n  +id: IdentityId,\n  +amount: G.Grain,\n|};\n\nexport type Allocation = {|\n  +id: AllocationId,\n  +policy: AllocationPolicy,\n  +receipts: $ReadOnlyArray<GrainReceipt>,\n|};\n\nexport function computeAllocation(\n  policy: AllocationPolicy,\n  credGrainView: CredGrainView,\n  effectiveTimestamp: TimestampMs\n): Allocation {\n  const validatedPolicy = _validatePolicy(policy);\n  credGrainView.validateForGrainAllocation();\n  return _validateAllocationBudget({\n    policy,\n    receipts: receipts(validatedPolicy, credGrainView, effectiveTimestamp),\n    id: randomUuid(),\n  });\n}\n\n/* This is a simplified case that should not require a credGrainView */\nexport function computeAllocationSpecial(\n  policy: AllocationPolicy,\n  identities: $ReadOnlyArray<Identity>\n): Allocation {\n  const validatedPolicy = _validatePolicy(policy);\n  if (validatedPolicy.policyType === \"SPECIAL\") {\n    return _validateAllocationBudget({\n      policy,\n      receipts: specialReceipts(validatedPolicy, identities),\n      id: randomUuid(),\n    });\n  } else {\n    throw new Error(\n      `SpecialPolicyRequired. Got: ${validatedPolicy.policyType}`\n    );\n  }\n}\n\nfunction _validatePolicy(p: AllocationPolicy) {\n  allocationPolicyParser.parseOrThrow(p);\n  if (G.lt(p.budget, G.ZERO)) {\n    throw new Error(`invalid budget: ${p.budget}`);\n  }\n  return p;\n}\n\n// Exported for test purposes.\nexport function _validateAllocationBudget(a: Allocation): Allocation {\n  const amt = G.sum(a.receipts.map((a) => a.amount));\n  if (amt !== a.policy.budget) {\n    throw new Error(\n      `allocation has budget of ${a.policy.budget} but distributed ${amt}`\n    );\n  }\n  return a;\n}\n\nfunction receipts(\n  policy: AllocationPolicy,\n  credGrainView: CredGrainView,\n  effectiveTimestamp: TimestampMs\n): $ReadOnlyArray<GrainReceipt> {\n  switch (policy.policyType) {\n    case \"IMMEDIATE\":\n      return immediateReceipts(policy, credGrainView, effectiveTimestamp);\n    case \"RECENT\":\n      return recentReceipts(policy, credGrainView, effectiveTimestamp);\n    case \"BALANCED\":\n      return balancedReceipts(policy, credGrainView, effectiveTimestamp);\n    case \"SPECIAL\":\n      const identities = credGrainView\n        .activeParticipants()\n        .map((participant) => participant.identity);\n      return specialReceipts(policy, identities);\n    // istanbul ignore next: unreachable per Flow\n    default:\n      throw new Error(`Unknown policyType: ${(policy.policyType: empty)}`);\n  }\n}\n\nconst grainReceiptParser: P.Parser<GrainReceipt> = P.object({\n  id: uuidParser,\n  amount: G.parser,\n});\nexport const allocationParser: P.Parser<Allocation> = P.object({\n  policy: allocationPolicyParser,\n  id: uuidParser,\n  receipts: P.array(grainReceiptParser),\n});\n","// @flow\n\nimport * as C from \"../../util/combo\";\nimport * as Uuid from \"../../util/uuid\";\nimport {type TimestampMs} from \"../../util/timestamp\";\nimport {type Allocation, allocationParser} from \"./grainAllocation\";\n\nexport type DistributionId = Uuid.Uuid;\n\nexport type Distribution = {|\n  +id: DistributionId,\n  +allocations: $ReadOnlyArray<Allocation>,\n  +credTimestamp: TimestampMs,\n|};\n\nexport const parser: C.Parser<Distribution> = C.object({\n  id: Uuid.parser,\n  allocations: C.array(allocationParser),\n  credTimestamp: C.number,\n});\n","// @flow\n\n/**\n * This module contains the ledger, for accumulating state updates related to\n * identity identities and Grain distribution.\n *\n * A key requirement for the ledger is that we need to store an ordered log of\n * every action that's happened in the ledger, so that we can audit the ledger\n * state to ensure its integrity.\n */\nimport {\n  type IdentityId,\n  type Name,\n  type IdentityType,\n  nameParser,\n  nameFromString,\n  type Alias,\n  aliasParser,\n  type Identity,\n  newIdentity,\n  identityParser,\n  identityTypeParser,\n} from \"../identity\";\nimport {\n  type Currency,\n  type CurrencyKey,\n  type ChainId,\n  currencyParser,\n  buildCurrency,\n  getCurrencyKey,\n} from \"./currency\";\nimport {type NodeAddressT, NodeAddress} from \"../graph\";\nimport {type TimestampMs} from \"../../util/timestamp\";\nimport * as NullUtil from \"../../util/null\";\nimport * as uuid from \"../../util/uuid\";\nimport {\n  type Distribution,\n  type DistributionId,\n  parser as distributionParser,\n} from \"./distribution\";\nimport {\n  ethAddressParser,\n  type EthAddress,\n} from \"../../plugins/ethereum/ethAddress\";\nimport * as G from \"./grain\";\nimport {JsonLog} from \"../../util/jsonLog\";\nimport * as C from \"../../util/combo\";\nimport {\n  type Allocation,\n  type AllocationId,\n  type GrainReceipt,\n} from \"./grainAllocation\";\n\n/**\n * Timestamped record of a grain payment\n * made to an Identity from a specific Allocation.\n */\ntype AllocationReceipt = {|\n  +allocationId: AllocationId,\n  +grainReceipt: GrainReceipt,\n  +credTimestampMs: TimestampMs,\n|};\n\n/**\n * Every Identity in the ledger has an Account.\n */\ntype MutableAccount = {|\n  identity: Identity,\n  // The current Grain balance of this account\n  balance: G.Grain,\n  // The amount of Grain this account has received in past Distributions\n  paid: G.Grain,\n  // A history of Grain allocations to the account in chronological order.\n  // Includes allocations received directly and via identity merge.\n  allocationHistory: Array<AllocationReceipt>,\n  // Whether or not the account is currently \"active\". An inactive account\n  // may not receive or transfer Grain. Accounts start inactive, and must\n  // be explicitly activated.\n  active: boolean,\n  // key-value store of blockchain addresses the account receives grain to\n  payoutAddresses: PayableAddressStore,\n  // An array of IdentityIds from target accounts that have been merged into\n  // the account. This allows for reverse-lookups of IdentityIds if this\n  // account is ever a merge target, so those identityIds can be pointed\n  // towards the new base account.\n  mergedIdentityIds: Array<IdentityId>,\n|};\nexport type Account = $ReadOnly<MutableAccount>;\n\n// Only Eth Addresses are supported at the moment\nexport type PayoutAddress = EthAddress;\n\n/**\n * PayableAddressStore maps currencies to a participant's\n * address capable of accepting the currency. This structure exists to\n * accomodate safe migration for grain/payout token changes. Users must verify\n * themselves that the address they are supplying is capable of receiving their\n * share of a grain distribution.\n */\ntype PayableAddressStore = Map<CurrencyKey, PayoutAddress>;\n\n/**\n * The Ledger is an append-only auditable data store which tracks\n * - Identities and what aliases they possess\n * - Identities' grain balances\n *\n * Every time the ledger state is changed, a corresponding Action is added to\n * the ledger's action log. The ledger state may be serialized by saving the\n * action log, and then reconstructed by replaying the action log. The\n * corresponding methods are `actionLog` and `Ledger.fromActionLog`.\n *\n * None of these methods are idempotent, since they all modify the Ledger state\n * on success by adding a new action to the log. Therefore, they will all fail\n * if they would not cause any change to the ledger's logical state, so as to\n * prevent the ledger from permanently accumulating no-op clutter in the log.\n *\n * It's important that any API method that fails (e.g. trying to add a\n * conflicting identity) fails without mutating the ledger state; this way we avoid\n * ever getting the ledger in a corrupted state. To make this easier to test,\n * the test code uses deep equality testing on the ledger before/after\n * attempting illegal actions. To ensure that this testing works, we should\n * avoid adding any ledger state that can't be verified by deep equality\n * checking (e.g. don't store state in functions or closures that aren't\n * attached to the Ledger object).\n *\n * Every Ledger action has a timestamp, and the Ledger's actions must always be\n * in timestamp-sorted order. Adding a new Action with a timestamp older than a\n * previous action is illegal.\n */\nexport class Ledger {\n  _ledgerEventLog: JsonLog<LedgerEvent>;\n  _nameToId: Map<Name, IdentityId>;\n  _lowercaseNames: Set<string>;\n  _aliasAddressToIdentity: Map<NodeAddressT, IdentityId>;\n  _accounts: Map<IdentityId, MutableAccount>;\n  _allocations: Map<AllocationId, $ReadOnly<Allocation>>;\n  _distributions: Map<DistributionId, $ReadOnly<Distribution>>;\n  _allocationsToDistributions: Map<AllocationId, DistributionId>;\n  _latestTimestamp: TimestampMs = -Infinity;\n  _lastDistributionTimestamp: TimestampMs | null = null;\n  _shouldTrackGrainIntegration: boolean = false;\n  _grainIntegrationStatuses: Map<DistributionId, boolean>;\n\n  constructor() {\n    this._ledgerEventLog = new JsonLog();\n    this._nameToId = new Map();\n    this._lowercaseNames = new Set();\n    this._aliasAddressToIdentity = new Map();\n    this._accounts = new Map();\n    this._allocations = new Map();\n    this._distributions = new Map();\n    this._allocationsToDistributions = new Map();\n    this._grainIntegrationStatuses = new Map();\n  }\n\n  /**\n   * Return all the Accounts in the ledger.\n   */\n  accounts(): $ReadOnlyArray<Account> {\n    return Array.from(new Set(this._accounts.values()));\n  }\n\n  /**\n   * Get the Account associated with a particular identity.\n   *\n   * If the identity is not in the ledger, an error is thrown.\n   */\n  account(id: IdentityId): Account {\n    // This wrapper ensures it's a read-only type\n    return this._mutableAccount(id);\n  }\n\n  _mutableAccount(id: IdentityId): MutableAccount {\n    const result = this._accounts.get(id);\n    if (result == null) {\n      throw new Error(`no Account for identity: ${id}`);\n    }\n    return result;\n  }\n\n  /**\n   * Return whether the IdentityName in question is available.\n   *\n   * For convenience in test code (and consistency with createIdentity and renameIdentity),\n   * the name is provided as a string. If the string is not a valid name, an error will be\n   * thrown.\n   */\n  nameAvailable(name: string): boolean {\n    // Error if the name is not valid.\n    nameFromString(name);\n    // We don't need to explicitly test the name itself, since if a name\n    // is reserved, its lowercased version is also reserved.\n    return !this._lowercaseNames.has(name.toLowerCase());\n  }\n\n  /**\n   * Return the account matching a given NodeAddress, if one exists.\n   *\n   * Returns null if there is no account matching that address.\n   */\n  accountByAddress(address: NodeAddressT): Account | null {\n    const identityId = this._aliasAddressToIdentity.get(address);\n    if (identityId == null) {\n      return null;\n    }\n    return this.account(identityId);\n  }\n\n  /**\n   * Return the account with the given name, if one exists.\n   *\n   * Returns null if there is no account matching that address.\n   *\n   * Note: This is case sensitive.\n   */\n  accountByName(name: string): Account | null {\n    const identityId = this._nameToId.get(nameFromString(name));\n    if (identityId == null) {\n      return null;\n    }\n    return this.account(identityId);\n  }\n\n  /**\n   * Get the Allocation associated with a particular Allocation ID.\n   *\n   * If the ID is not in the ledger, an error is thrown.\n   */\n  allocation(id: AllocationId): Allocation {\n    const allocation = this._allocations.get(id);\n    if (allocation == null) throw new Error(`no Allocation for id: ${id}`);\n    return allocation;\n  }\n\n  /**\n   * Get an Iterator over all Allocations in the order they occur in the Ledger.\n   */\n  allocations(): Iterator<Allocation> {\n    return this._allocations.values();\n  }\n\n  /**\n   * Get the Distribution associated with a particular Distribution ID.\n   *\n   * If the ID is not in the ledger, an error is thrown.\n   */\n  distribution(id: DistributionId): Distribution {\n    const distribution = this._distributions.get(id);\n    if (distribution == null) throw new Error(`no Distribution for id: ${id}`);\n    return distribution;\n  }\n\n  /**\n   * Get an Iterator over all Distributions in the order they occur in the Ledger.\n   */\n  distributions(): Iterator<Distribution> {\n    return this._distributions.values();\n  }\n\n  /**\n   * Get the Distribution associated with a particular Allocation ID.\n   *\n   * If the Allocation ID is not associated with a distribution, an error is thrown.\n   */\n  distributionByAllocationId(allocationId: AllocationId): Distribution {\n    const distributionId = this._allocationsToDistributions.get(allocationId);\n    if (distributionId == null)\n      throw new Error(`no Distribution for allocation id: ${allocationId}`);\n    return this.distribution(distributionId);\n  }\n\n  /**\n   * Create an account in the ledger.\n   *\n   * This will reserve the identity's name, and its innate address.\n   *\n   * This returns the newly created Identity's ID, so that the caller\n   * store it for future reference.\n   *\n   * Will fail if the name is not valid, or already taken.\n   */\n  createIdentity(type: IdentityType, name: string): IdentityId {\n    const identity = newIdentity(type, name);\n    const action = {\n      type: \"CREATE_IDENTITY\",\n      identity,\n    };\n    this._createAndProcessEvent(action);\n    return NullUtil.get(this._nameToId.get(identity.name));\n  }\n  _createIdentity({identity}: CreateIdentity) {\n    if (this._nameToId.has(identity.name)) {\n      // This identity already exists; return.\n      throw new Error(`createIdentity: name already taken: ${identity.name}`);\n    }\n    if (this._lowercaseNames.has(identity.name.toLowerCase())) {\n      throw new Error(\n        `createIdentity: already have same name with different capitalization: ${identity.name}`\n      );\n    }\n    if (identity.aliases.length !== 0) {\n      throw new Error(`createIdentity: new identities may not have aliases`);\n    }\n    // istanbul ignore if\n    if (this._aliasAddressToIdentity.has(identity.address)) {\n      // This should never happen, as it implies a UUID conflict.\n      throw new Error(\n        `createIdentity: innate address already claimed ${identity.id}`\n      );\n    }\n\n    // Mutations! Method must not fail after this comment.\n    this._nameToId.set(identity.name, identity.id);\n    this._lowercaseNames.add(identity.name.toLowerCase());\n    // Reserve this identity's own address\n    this._aliasAddressToIdentity.set(identity.address, identity.id);\n    // Every identity has a corresponding Account.\n    this._accounts.set(identity.id, {\n      balance: G.ZERO,\n      paid: G.ZERO,\n      identity,\n      active: false,\n      allocationHistory: [],\n      payoutAddresses: new Map(),\n      // seed this array with the account's own identityId\n      mergedIdentityIds: [identity.id],\n    });\n  }\n\n  /**\n   * Merge two identities together.\n   *\n   * One identity is considered the \"base\" and the other is the \"target\".\n   * The target is absorbed into the base, meaning:\n   * - Base gets the Grain balance, and lifetime paid amount added to its account.\n   * - Base gets every alias that the target had.\n   * - Base gets the target's own address as an alias.\n   * - The target account is removed from the ledger.\n   * - The target's login name is freed.\n   *\n   * Attempting to merge an identity that doesn't exist, or to merge an identity into\n   * itself, will error.\n   */\n  mergeIdentities(opts: {base: IdentityId, target: IdentityId}): Ledger {\n    const {base, target} = opts;\n    const action = {\n      type: \"MERGE_IDENTITIES\",\n      base,\n      target,\n    };\n    this._createAndProcessEvent(action);\n    return this;\n  }\n  _mergeIdentities({base, target}: MergeIdentities) {\n    const baseAccount = this._mutableAccount(base);\n    const targetAccount = this.account(target);\n    const baseIdentity = baseAccount.identity;\n    const targetIdentity = targetAccount.identity;\n    if (base === target) {\n      throw new Error(\n        `tried to merge identity @${baseIdentity.name} with itself`\n      );\n    }\n\n    const updatedAliases = baseIdentity.aliases.slice();\n    const transferAlias = (alias: Alias) => {\n      updatedAliases.push(alias);\n      this._aliasAddressToIdentity.set(alias.address, baseIdentity.id);\n    };\n    // Mutation follows. Nothing after this line may throw.\n    targetIdentity.aliases.forEach((a) => transferAlias(a));\n    const innateAlias = {\n      address: targetIdentity.address,\n      description: `identity @${targetIdentity.name} (id: ${targetIdentity.id})`,\n    };\n    transferAlias(innateAlias);\n    const updatedIdentity = {\n      ...baseIdentity,\n      aliases: updatedAliases,\n    };\n    baseAccount.identity = updatedIdentity;\n    baseAccount.paid = G.add(baseAccount.paid, targetAccount.paid);\n    baseAccount.allocationHistory = baseAccount.allocationHistory\n      .concat(targetAccount.allocationHistory)\n      .sort((a, b) => a.credTimestampMs - b.credTimestampMs);\n    // merge payout payoutAddresses under one account, but don't overwrite base\n    // account entries\n    baseAccount.payoutAddresses = new Map([\n      ...targetAccount.payoutAddresses.entries(),\n      ...baseAccount.payoutAddresses.entries(),\n    ]);\n    baseAccount.balance = G.add(baseAccount.balance, targetAccount.balance);\n    targetAccount.mergedIdentityIds.forEach((id) => {\n      this._accounts.set(id, baseAccount);\n      baseAccount.mergedIdentityIds.push(id);\n    });\n    this._nameToId.delete(targetIdentity.name);\n    this._lowercaseNames.delete(targetIdentity.name.toLowerCase());\n  }\n\n  /**\n   * Change a identity's name.\n   *\n   * Will fail if no identity matches the identityId, or if the identity already has that\n   * name, or if the identity's new name is claimed by another identity.\n   */\n  renameIdentity(identityId: IdentityId, newName: string): Ledger {\n    this._createAndProcessEvent({\n      type: \"RENAME_IDENTITY\",\n      identityId,\n      newName: nameFromString(newName),\n    });\n    return this;\n  }\n  _renameIdentity({identityId, newName}: RenameIdentity) {\n    if (!this._accounts.has(identityId)) {\n      throw new Error(`renameIdentity: no identity matches id ${identityId}`);\n    }\n    const account = this._mutableAccount(identityId);\n    const existingIdentity = account.identity;\n    const existingName = existingIdentity.name;\n    if (existingName === newName) {\n      // We error rather than silently succeed because we don't want the ledger\n      // to get polluted with no-op records (no successful operations are\n      // idempotent, since they do add to the ledger logs)\n      throw new Error(`renameIdentity: identity already has name ${newName}`);\n    }\n    if (this._nameToId.has(newName)) {\n      // We already checked that the name is not owned by this identity,\n      // so it is a conflict. Fail.\n      throw new Error(`renameIdentity: conflict on name ${newName}`);\n    }\n    const lowerCased = newName.toLowerCase();\n    if (\n      this._lowercaseNames.has(lowerCased) &&\n      lowerCased !== existingName.toLowerCase()\n    ) {\n      throw new Error(\n        `renameIdentity: already have same name with different capitalization: ${newName}`\n      );\n    }\n    const updatedIdentity = {\n      id: identityId,\n      name: newName,\n      subtype: existingIdentity.subtype,\n      address: existingIdentity.address,\n      aliases: existingIdentity.aliases,\n    };\n\n    // Mutations! Method must not fail after this comment.\n    this._nameToId.delete(existingIdentity.name);\n    this._nameToId.set(newName, identityId);\n    this._lowercaseNames.delete(existingIdentity.name.toLowerCase());\n    this._lowercaseNames.add(newName.toLowerCase());\n    account.identity = updatedIdentity;\n  }\n\n  /**\n   * Add an alias for a identity.\n   *\n   * If that alias is associated with past Grain payments (because it\n   * was unlinked from another identity), those past Grain payments will be\n   * associated with the newly linked identity.\n   *\n   * Will fail if the identity does not exist.\n   * Will fail if the alias is already claimed by any identity.\n   */\n  addAlias(identityId: IdentityId, alias: Alias): Ledger {\n    this._createAndProcessEvent({\n      type: \"ADD_ALIAS\",\n      identityId,\n      alias,\n    });\n    return this;\n  }\n  _addAlias({identityId, alias}: AddAlias) {\n    if (!this._accounts.has(identityId)) {\n      throw new Error(`addAlias: no identity matches id ${identityId}`);\n    }\n    const account = this._mutableAccount(identityId);\n    const existingIdentity = account.identity;\n    const existingAliases = existingIdentity.aliases;\n    if (existingAliases.map((a) => a.address).indexOf(alias.address) !== -1) {\n      throw new Error(\n        `addAlias: identity already has alias: ${\n          existingIdentity.name\n        }, ${NodeAddress.toString(alias.address)}`\n      );\n    }\n    if (this._aliasAddressToIdentity.has(alias.address)) {\n      // Some other identity has this alias; fail.\n      throw new Error(\n        `addAlias: alias ${NodeAddress.toString(alias.address)} already bound`\n      );\n    }\n\n    // Mutations below; method must not fail after this line.\n    this._aliasAddressToIdentity.set(alias.address, identityId);\n    const updatedAliases = existingIdentity.aliases.slice();\n    updatedAliases.push(alias);\n    const updatedIdentity = {\n      id: existingIdentity.id,\n      name: existingIdentity.name,\n      subtype: existingIdentity.subtype,\n      aliases: updatedAliases,\n      address: existingIdentity.address,\n    };\n    account.identity = updatedIdentity;\n  }\n\n  /**\n   * Activate an account, making it eligible to send and recieve Grain.\n   *\n   * If the account is already active, this will no-op (without emitting any\n   * event).\n   */\n  activate(id: IdentityId): Ledger {\n    if (!this._accounts.has(id)) {\n      throw new Error(`identity ${id} not found`);\n    }\n    const {active} = this.account(id);\n    if (active) {\n      // no-op; account already active\n      return this;\n    } else {\n      this._createAndProcessEvent({\n        type: \"TOGGLE_ACTIVATION\",\n        identityId: id,\n      });\n      return this;\n    }\n  }\n\n  /**\n   * Deactivate an account, making it ineligible to send or recieve Grain.\n   *\n   * The account's Grain balance will remain untouched until it is reactivated.\n   *\n   * If the account is already inactive, this will no-op (without emitting any\n   * event).\n   */\n  deactivate(id: IdentityId): Ledger {\n    if (!this._accounts.has(id)) {\n      throw new Error(`identity ${id} not found`);\n    }\n    const {active} = this.account(id);\n    if (active) {\n      this._createAndProcessEvent({\n        type: \"TOGGLE_ACTIVATION\",\n        identityId: id,\n      });\n      return this;\n    } else {\n      // no-op; account already inactive\n      return this;\n    }\n  }\n  _toggleActivation({identityId}: ToggleActivation) {\n    const account = this._mutableAccount(identityId);\n    // Cannot fail below this line.\n    account.active = !account.active;\n  }\n\n  /**\n   * Canonicalize a Grain distribution in the ledger.\n   *\n   * Fails if any of the recipients are not active.\n   */\n  distributeGrain(distribution: Distribution): Ledger {\n    this._createAndProcessEvent({\n      type: \"DISTRIBUTE_GRAIN\",\n      distribution,\n    });\n    return this;\n  }\n  _distributeGrain({distribution}: DistributeGrain) {\n    const parseResult = distributionParser.parse(distribution);\n    if (!parseResult.ok) {\n      throw new Error(`invalid distribution: ${parseResult.err}`);\n    }\n    for (const {receipts} of distribution.allocations) {\n      for (const {id, amount} of receipts) {\n        if (!this._accounts.has(id)) {\n          throw new Error(`cannot distribute; invalid id ${id}`);\n        }\n        if (G.lt(amount, G.ZERO)) {\n          throw new Error(`negative Grain amount: ${amount}`);\n        }\n        const {active} = this.account(id);\n        if (!active) {\n          throw new Error(`attempt to distribute to inactive account: ${id}`);\n        }\n      }\n    }\n    // Mutations beckon: method must not fail after this comment\n    this._distributions.set(distribution.id, distribution);\n    for (const allocation of distribution.allocations) {\n      this._allocations.set(allocation.id, allocation);\n      this._allocationsToDistributions.set(allocation.id, distribution.id);\n      for (const grainReceipt of allocation.receipts) {\n        this._allocateGrain({\n          grainReceipt,\n          allocationId: allocation.id,\n          credTimestampMs: distribution.credTimestamp,\n        });\n      }\n    }\n    if (\n      this._lastDistributionTimestamp === null ||\n      distribution.credTimestamp > this._lastDistributionTimestamp\n    ) {\n      this._lastDistributionTimestamp = distribution.credTimestamp;\n    }\n    if (this._shouldTrackGrainIntegration) {\n      this._grainIntegrationStatuses.set(distribution.id, false);\n    }\n  }\n\n  /**\n   * Transfer Grain from one account to another.\n   *\n   * Fails if the sender does not have enough Grain, or if the Grain amount is\n   * negative.\n   * Fails if either the sender or the receipient have not been activated.\n   * Self-transfers are supported.\n   * An optional memo may be added.\n   *\n   * Note: The arguments need to be bundled together in an object with named\n   * keys, to avoid getting confused about which positional argument is `from`\n   * and which one is `to`.\n   */\n  transferGrain(opts: {|\n    from: IdentityId,\n    to: IdentityId,\n    amount: G.Grain,\n    memo: string | null,\n  |}): this {\n    const {from, to, amount, memo} = opts;\n    this._createAndProcessEvent({\n      from,\n      to,\n      amount,\n      memo,\n      type: \"TRANSFER_GRAIN\",\n    });\n    return this;\n  }\n  _transferGrain({from, to, amount}: TransferGrain) {\n    if (!this._accounts.has(from)) {\n      throw new Error(`invalid sender: ${from}`);\n    }\n    if (!this._accounts.has(to)) {\n      throw new Error(`invalid recipient: ${to}`);\n    }\n    const fromAccount = this._mutableAccount(from);\n    const toAccount = this._mutableAccount(to);\n    if (!fromAccount.active) {\n      throw new Error(`transfer from inactive account: ${from}`);\n    }\n    if (!toAccount.active) {\n      throw new Error(`transfer to inactive account: ${to}`);\n    }\n    if (G.lt(amount, G.ZERO)) {\n      throw new Error(`cannot transfer negative Grain amount: ${amount}`);\n    }\n    if (G.gt(amount, fromAccount.balance)) {\n      throw new Error(\n        `transferGrain: ${from} has insufficient balance for transfer: ${amount} > ${fromAccount.balance}`\n      );\n    }\n\n    // Mutation ahead: May not fail after this comment\n    fromAccount.balance = G.sub(fromAccount.balance, amount);\n    toAccount.balance = G.add(toAccount.balance, amount);\n  }\n\n  changeIdentityType(identityId: IdentityId, newType: IdentityType): Ledger {\n    this._createAndProcessEvent({\n      type: \"CHANGE_IDENTITY_TYPE\",\n      newType,\n      identityId,\n    });\n    return this;\n  }\n  _changeIdentityType({identityId, newType}: ChangeIdentityType) {\n    const parseResult = identityTypeParser.parse(newType);\n    if (!parseResult.ok) {\n      throw new Error(`changeIdentityType: invalid type ${newType}`);\n    }\n    if (!this._accounts.has(identityId)) {\n      throw new Error(\n        `changeIdentityType: no identity matches id ${identityId}`\n      );\n    }\n    const account = this._mutableAccount(identityId);\n    const existingIdentity = account.identity;\n    if (existingIdentity.subtype === newType) {\n      // We error rather than silently succeed because we don't want the ledger\n      // to get polluted with no-op records (no successful operations are\n      // idempotent, since they do add to the ledger logs)\n      throw new Error(\n        `changeIdentityType: identity already has type ${newType}`\n      );\n    }\n    const updatedIdentity = {\n      id: identityId,\n      name: existingIdentity.name,\n      subtype: newType,\n      address: existingIdentity.address,\n      aliases: existingIdentity.aliases,\n    };\n\n    // Mutations! Method must not fail after this comment.\n    account.identity = updatedIdentity;\n  }\n\n  /**\n   * setPayoutAddress allows participants to set a payable address to collect\n   * grain. These addresses are keyed on a specific currency, which ensures that\n   * users don't erroneously receive a grain distribution to an address that\n   * cannot handle it (such as a custodial wallet, or rigidly-designed\n   * contract) and effectively lose that reward.\n   *\n   * An address may be deleted by passing in `null` for the\n   * `payoutAddress` parameter. This is useful in case the underlying private key\n   * is compromised or the exchange hosting a custodial account is hacked.\n   */\n  setPayoutAddress(\n    id: IdentityId,\n    payoutAddress: PayoutAddress | null,\n    chainId: ChainId,\n    tokenAddress?: EthAddress\n  ): Ledger {\n    this._createAndProcessEvent({\n      type: \"SET_PAYOUT_ADDRESS\",\n      id,\n      payoutAddress,\n      currency: buildCurrency(chainId, tokenAddress),\n    });\n    return this;\n  }\n  _setPayoutAddress({id, currency, payoutAddress}: SetPayoutAddress) {\n    if (!this._accounts.has(id)) {\n      throw new Error(`setPayoutAddress: no identity matches id ${id}`);\n    }\n    const account = this._mutableAccount(id);\n    const currencyResult = currencyParser.parse(currency);\n    if (!currencyResult.ok) {\n      throw new Error(\n        `Invalid chainId or tokenAddress:\n        ${currencyResult.err}`\n      );\n    }\n    if (payoutAddress !== null) {\n      const addressResult = ethAddressParser.parse(payoutAddress);\n      if (!addressResult.ok) {\n        throw new Error(\n          `setPayoutAddress: invalid payout address: ${payoutAddress}`\n        );\n      }\n      // Mutations! Method must not fail below this comment.\n      account.payoutAddresses.set(\n        getCurrencyKey(currencyResult.value),\n        payoutAddress\n      );\n      return;\n    }\n    // else (payoutAddress === null) and we delete the entry\n    account.payoutAddresses.delete(getCurrencyKey(currencyResult.value));\n  }\n\n  /**\n   * no-ops if integration tracking is already enabled\n   */\n  enableIntegrationTracking(): Ledger {\n    if (!this._shouldTrackGrainIntegration) {\n      this._createAndProcessEvent({\n        type: \"ENABLE_GRAIN_INTEGRATION\",\n      });\n    }\n    return this;\n  }\n\n  /**\n   * no-ops if integration tracking is already disabled\n   */\n  disableIntegrationTracking(): Ledger {\n    if (this._shouldTrackGrainIntegration) {\n      this._createAndProcessEvent({\n        type: \"DISABLE_GRAIN_INTEGRATION\",\n      });\n    }\n    return this;\n  }\n\n  _enableGrainIntegrationTracking(_: EnableGrainIntegration) {\n    this._shouldTrackGrainIntegration = true;\n  }\n\n  _disableGrainIntegrationTracking(_: DisableGrainIntegration) {\n    this._shouldTrackGrainIntegration = false;\n    this._grainIntegrationStatuses.clear();\n  }\n\n  /**\n   * Mark integrations as executed.\n   * Validates that:\n   * a) executions are tracked\n   * b) executions are not yet marked as executed\n   * c) distribution tracking is enabled\n   */\n  markDistributionExecuted(id: DistributionId): Ledger {\n    if (!this._shouldTrackGrainIntegration) {\n      throw new Error(\"integration tracking not enabled\");\n    }\n    if (this._grainIntegrationStatuses.get(id) === undefined) {\n      throw new Error(\"Distribution not eligible to executed\");\n    }\n    if (this._grainIntegrationStatuses.get(id) === true) {\n      throw new Error(\"Integration has already executed this distribution\");\n    }\n    this._createAndProcessEvent({\n      type: \"MARK_DISTRIBUTION_EXECUTED\",\n      id,\n    });\n    return this;\n  }\n  _markDistributionExecuted({id}: MarkDistributionExecuted) {\n    this._grainIntegrationStatuses.set(id, true);\n  }\n\n  /**\n   * Is cleared each time `disableIntegrationTracking` is called\n   */\n  trackedDistributions(): Iterator<DistributionId> {\n    return this._grainIntegrationStatuses.keys();\n  }\n\n  /**\n   * Returns the status of a tracked distribution\n   * If the distribution has not been executed by the integration, `false` is\n   * returned.\n   * If the distribution has been executed, `true` is returned.\n   * If the distribution is untracked, `undefined` is returned.\n   */\n  isGrainIntegrationExecuted(id: DistributionId): ?boolean {\n    return this._grainIntegrationStatuses.get(id);\n  }\n\n  /**\n   * Retrieve the log of all actions in the Ledger's history.\n   *\n   * May be used to reconstruct the Ledger after serialization.\n   */\n  eventLog(): LedgerLog {\n    return Array.from(this._ledgerEventLog.values());\n  }\n\n  /**\n   * Reconstruct a Ledger from a LedgerLog.\n   */\n  static fromEventLog(log: LedgerLog): Ledger {\n    const ledger = new Ledger();\n    for (const e of log) {\n      ledger._processEvent(e);\n    }\n    return ledger;\n  }\n\n  /**\n   * Serialize the events as a JsonLog-style newline-delimited JSON\n   * string.\n   */\n  serialize(): string {\n    return this._ledgerEventLog.toString();\n  }\n\n  /**\n   * Parse events serialized as a JsonLog-style newline-delimited JSON\n   * string (e.g., by `serialize`).\n   */\n  static parse(eventLog: string): Ledger {\n    const jsonLog = JsonLog.fromString(eventLog, ledgerEventParser);\n    return Ledger.fromEventLog(Array.from(jsonLog.values()));\n  }\n\n  /**\n   * Return the cred-effective timestamp for the last Grain distribution.\n   *\n   * We provide this because we may want to have a policy that issues one\n   * distribution for each interval in the history of the project.\n   *\n   * If there were never any distributions, then null will be returned.\n   */\n  lastDistributionTimestamp(): TimestampMs | null {\n    return this._lastDistributionTimestamp;\n  }\n\n  _processAction(action: Action) {\n    switch (action.type) {\n      case \"CREATE_IDENTITY\":\n        this._createIdentity(action);\n        break;\n      case \"RENAME_IDENTITY\":\n        this._renameIdentity(action);\n        break;\n      case \"ADD_ALIAS\":\n        this._addAlias(action);\n        break;\n      case \"MERGE_IDENTITIES\":\n        this._mergeIdentities(action);\n        break;\n      case \"TOGGLE_ACTIVATION\":\n        this._toggleActivation(action);\n        break;\n      case \"DISTRIBUTE_GRAIN\":\n        this._distributeGrain(action);\n        break;\n      case \"TRANSFER_GRAIN\":\n        this._transferGrain(action);\n        break;\n      case \"CHANGE_IDENTITY_TYPE\":\n        this._changeIdentityType(action);\n        break;\n      case \"SET_PAYOUT_ADDRESS\":\n        this._setPayoutAddress(action);\n        break;\n      case \"ENABLE_GRAIN_INTEGRATION\":\n        this._enableGrainIntegrationTracking(action);\n        break;\n      case \"DISABLE_GRAIN_INTEGRATION\":\n        this._disableGrainIntegrationTracking(action);\n        break;\n      case \"MARK_DISTRIBUTION_EXECUTED\":\n        this._markDistributionExecuted(action);\n        break;\n      // istanbul ignore next: unreachable per Flow\n      default:\n        throw new Error(`Unknown type: ${(action.type: empty)}`);\n    }\n  }\n\n  _processEvent(e: LedgerEvent) {\n    const {action, ledgerTimestamp} = e;\n    if (ledgerTimestamp == null || !isFinite(ledgerTimestamp)) {\n      throw new Error(`ledger: invalid timestamp ${ledgerTimestamp}`);\n    }\n    if (ledgerTimestamp < this._latestTimestamp) {\n      throw new Error(\n        `ledger: out-of-order timestamp: ${ledgerTimestamp} < ${this._latestTimestamp}`\n      );\n    }\n    this._processAction(action);\n    this._latestTimestamp = ledgerTimestamp;\n    this._ledgerEventLog.append(e);\n  }\n\n  _createAndProcessEvent(action: Action) {\n    const ledgerTimestamp = _getTimestamp();\n    const ledgerEvent = {\n      ledgerTimestamp,\n      action,\n      version: \"1\",\n      uuid: uuid.random(),\n    };\n    this._processEvent(ledgerEvent);\n  }\n\n  // Helper method for recording that Grain was allocated to a identity.\n  // Increases the identity's paid amount and balance in sync.\n  _allocateGrain(params: {|\n    +grainReceipt: GrainReceipt,\n    +allocationId: AllocationId,\n    +credTimestampMs: TimestampMs,\n  |}) {\n    const account = this._mutableAccount(params.grainReceipt.id);\n    account.paid = G.add(params.grainReceipt.amount, account.paid);\n    account.allocationHistory.push(params);\n    account.balance = G.add(params.grainReceipt.amount, account.balance);\n  }\n}\n\nexport type LedgerLog = $ReadOnlyArray<LedgerEvent>;\n\nexport type LedgerEvent = {|\n  +action: Action,\n  +ledgerTimestamp: TimestampMs,\n  +version: \"1\",\n  +uuid: uuid.Uuid,\n|};\n\n/**\n * The Actions are used to store the history of Ledger changes.\n */\ntype Action =\n  | CreateIdentity\n  | RenameIdentity\n  | AddAlias\n  | MergeIdentities\n  | ToggleActivation\n  | DistributeGrain\n  | TransferGrain\n  | ChangeIdentityType\n  | SetPayoutAddress\n  | EnableGrainIntegration\n  | DisableGrainIntegration\n  | MarkDistributionExecuted;\n\ntype CreateIdentity = {|\n  +type: \"CREATE_IDENTITY\",\n  +identity: Identity,\n|};\nconst createIdentityParser: C.Parser<CreateIdentity> = C.object({\n  type: C.exactly([\"CREATE_IDENTITY\"]),\n  identity: identityParser,\n});\n\ntype RenameIdentity = {|\n  +type: \"RENAME_IDENTITY\",\n  +identityId: IdentityId,\n  +newName: Name,\n|};\nconst renameIdentityParser: C.Parser<RenameIdentity> = C.object({\n  type: C.exactly([\"RENAME_IDENTITY\"]),\n  identityId: uuid.parser,\n  newName: nameParser,\n});\n\ntype ChangeIdentityType = {|\n  +type: \"CHANGE_IDENTITY_TYPE\",\n  +identityId: IdentityId,\n  +newType: IdentityType,\n|};\nconst changeIdentityTypeParser = C.object({\n  type: C.exactly([\"CHANGE_IDENTITY_TYPE\"]),\n  identityId: uuid.parser,\n  newType: identityTypeParser,\n});\n\nexport type AddAlias = {|\n  +type: \"ADD_ALIAS\",\n  +identityId: IdentityId,\n  +alias: Alias,\n|};\nconst addAliasParser: C.Parser<AddAlias> = C.object({\n  type: C.exactly([\"ADD_ALIAS\"]),\n  identityId: uuid.parser,\n  alias: aliasParser,\n});\n\ntype MergeIdentities = {|\n  +type: \"MERGE_IDENTITIES\",\n  +base: IdentityId,\n  +target: IdentityId,\n|};\nconst mergeIdentitiesParser: C.Parser<MergeIdentities> = C.object({\n  type: C.exactly([\"MERGE_IDENTITIES\"]),\n  base: uuid.parser,\n  target: uuid.parser,\n});\n\ntype ToggleActivation = {|\n  +type: \"TOGGLE_ACTIVATION\",\n  +identityId: IdentityId,\n|};\nconst toggleActivationParser: C.Parser<ToggleActivation> = C.object({\n  type: C.exactly([\"TOGGLE_ACTIVATION\"]),\n  identityId: uuid.parser,\n});\n\ntype DistributeGrain = {|\n  +type: \"DISTRIBUTE_GRAIN\",\n  +distribution: Distribution,\n|};\nconst distributeGrainParser: C.Parser<DistributeGrain> = C.object({\n  type: C.exactly([\"DISTRIBUTE_GRAIN\"]),\n  distribution: distributionParser,\n});\n\nexport type TransferGrain = {|\n  +type: \"TRANSFER_GRAIN\",\n  +from: IdentityId,\n  +to: IdentityId,\n  +amount: G.Grain,\n  +memo: string | null,\n|};\n\ntype SetPayoutAddress = {|\n  +type: \"SET_PAYOUT_ADDRESS\",\n  +id: IdentityId,\n  +currency: Currency,\n  +payoutAddress: EthAddress | null,\n|};\n\nconst setPayoutAddressParser: C.Parser<SetPayoutAddress> = C.object({\n  type: C.exactly([\"SET_PAYOUT_ADDRESS\"]),\n  id: uuid.parser,\n  currency: currencyParser,\n  payoutAddress: ethAddressParser,\n});\n\nconst transferGrainParser: C.Parser<TransferGrain> = C.object({\n  type: C.exactly([\"TRANSFER_GRAIN\"]),\n  from: uuid.parser,\n  to: uuid.parser,\n  amount: G.parser,\n  memo: C.orElse([C.string, C.null_]),\n});\n\ntype EnableGrainIntegration = {|\n  +type: \"ENABLE_GRAIN_INTEGRATION\",\n|};\n\nconst enableGrainIntegrationParser: C.Parser<EnableGrainIntegration> = C.object(\n  {\n    type: C.exactly([\"ENABLE_GRAIN_INTEGRATION\"]),\n  }\n);\n\ntype DisableGrainIntegration = {|\n  +type: \"DISABLE_GRAIN_INTEGRATION\",\n|};\n\nconst disableGrainIntegrationParser: C.Parser<DisableGrainIntegration> = C.object(\n  {\n    type: C.exactly([\"DISABLE_GRAIN_INTEGRATION\"]),\n  }\n);\n\ntype MarkDistributionExecuted = {|\n  +type: \"MARK_DISTRIBUTION_EXECUTED\",\n  +id: DistributionId,\n|};\n\nconst executeDistributionParser: C.Parser<MarkDistributionExecuted> = C.object({\n  type: C.exactly([\"MARK_DISTRIBUTION_EXECUTED\"]),\n  id: uuid.parser,\n});\n\nconst actionParser: C.Parser<Action> = C.orElse([\n  createIdentityParser,\n  renameIdentityParser,\n  changeIdentityTypeParser,\n  addAliasParser,\n  mergeIdentitiesParser,\n  toggleActivationParser,\n  distributeGrainParser,\n  transferGrainParser,\n  setPayoutAddressParser,\n  enableGrainIntegrationParser,\n  disableGrainIntegrationParser,\n  executeDistributionParser,\n]);\n\nconst ledgerEventParser: C.Parser<LedgerEvent> = C.object({\n  action: actionParser,\n  ledgerTimestamp: C.number,\n  version: C.exactly([\"1\"]),\n  uuid: uuid.parser,\n});\n\nconst _getTimestamp = () => Date.now();\n","// @flow\n\nimport stringify from \"json-stable-stringify\";\nimport * as C from \"../../util/combo\";\nimport {Ledger} from \"./ledger\";\nimport {\n  type Name,\n  nameFromString,\n  nameParser,\n  type Alias,\n  aliasParser,\n  type IdentityType,\n  identityTypeParser,\n} from \"../identity\";\nimport type {IdentityId} from \"../identity\";\n\n/**\n * An IdentityProposal allows a plugin to report a participant identity,\n * for inclusion in the ledger.\n *\n * The proposal has an `alias`, which includes a node address for the identity.\n * If some account already has that address, then the proposal may be ignored.\n *\n * If no account has that address, then the proposal will be added as a new\n * identity in the ledger.\n *\n * The proposal has a proposed name for the identity, and a name for the\n * plugin. The plugin name will be used as a discriminator if there's already a\n * different identity with that name.\n *\n * If the name and discriminator combo is taken, then a further numeric\n * discriminator will be added.\n *\n * When the identity is created, it will have its own identity address, per\n * usual, and then the alias will be added. We give the plugin control over the\n * full alias because aliases include helpful descriptions which are shown in\n * the UI, and the plugin should choose an appropriate description.\n */\nexport type IdentityProposal = {|\n  +name: Name,\n  +pluginName: Name,\n  +alias: Alias,\n  +type: IdentityType,\n|};\n\nexport const parser: C.Parser<IdentityProposal> = C.object({\n  name: nameParser,\n  pluginName: nameParser,\n  alias: aliasParser,\n  type: identityTypeParser,\n});\n\nexport const identityProposalsParser: C.Parser<\n  $ReadOnlyArray<IdentityProposal>\n> = C.array(parser);\n\n/**\n * Given a Ledger and an IdentityProposal, ensure that some Ledger account\n * exists for the proposed identity and return the identity ID.\n *\n * If there is already an account matching the node address of the proposal's\n * alias, then the ledger is unchanged.\n *\n * Otherwise, a new account will be created per the semantics of the\n * IdentityProposal type.\n */\nexport function ensureIdentityExists(\n  ledger: Ledger,\n  proposal: IdentityProposal\n): IdentityId {\n  const existingAccount = ledger.accountByAddress(proposal.alias.address);\n  if (existingAccount != null) {\n    // there is already some account that includes this address; do nothing\n    return existingAccount.identity.id;\n  }\n  const name = _chooseIdentityName(proposal, (n) => ledger.nameAvailable(n));\n  const id = ledger.createIdentity(proposal.type, name);\n  ledger.addAlias(id, proposal.alias);\n  return id;\n}\n\nconst MAX_NUMERIC_DISCRIMINATOR = 100;\nexport function _chooseIdentityName(\n  proposal: IdentityProposal,\n  checkAvailability: (Name) => boolean\n): Name {\n  if (checkAvailability(proposal.name)) {\n    return proposal.name;\n  }\n  const withPluginDiscriminator = nameFromString(\n    proposal.name + \"-\" + proposal.pluginName\n  );\n  if (checkAvailability(withPluginDiscriminator)) {\n    return withPluginDiscriminator;\n  }\n  for (let i = 1; i < MAX_NUMERIC_DISCRIMINATOR; i++) {\n    const withNumericDiscriminator = nameFromString(\n      withPluginDiscriminator + \"-\" + i\n    );\n    if (checkAvailability(withNumericDiscriminator)) {\n      return withNumericDiscriminator;\n    }\n  }\n  throw new Error(`unable to find an identity name for ${stringify(proposal)}`);\n}\n","// @flow\n\nimport {Graph, type GraphJSON} from \"./graph\";\nimport {type WeightsT, type WeightsJSON} from \"./weights\";\nimport * as Weights from \"./weights\";\nimport {toCompat, fromCompat, type Compatible} from \"../util/compat\";\n\n/** The WeightedGraph a Graph alongside associated Weights\n *\n * Any combination of Weights and Graph can make a valid WeightedGraph. If the\n * Weights contains weights for node or edge addresses that are not present in\n * the graph, then those weights will be ignored. If the graph contains nodes\n * or edges which do not correspond to any weights, then default weights will\n * be inferred.\n */\nexport type WeightedGraph = {|+graph: Graph, +weights: WeightsT|};\n\nconst COMPAT_INFO = {type: \"sourcecred/weightedGraph\", version: \"0.1.0\"};\n\nexport type WeightedGraphJSON = Compatible<{|\n  +graphJSON: GraphJSON,\n  +weightsJSON: WeightsJSON,\n|}>;\n\n/**\n * Create a new, empty WeightedGraph.\n */\nexport function empty(): WeightedGraph {\n  return {graph: new Graph(), weights: Weights.empty()};\n}\n\nexport function toJSON(w: WeightedGraph): WeightedGraphJSON {\n  const graphJSON = w.graph.toJSON();\n  const weightsJSON = Weights.toJSON(w.weights);\n  return toCompat(COMPAT_INFO, {graphJSON, weightsJSON});\n}\n\nexport function fromJSON(j: WeightedGraphJSON): WeightedGraph {\n  const {graphJSON, weightsJSON} = fromCompat(COMPAT_INFO, j);\n  const graph = Graph.fromJSON(graphJSON);\n  const weights = Weights.fromJSON(weightsJSON);\n  return {graph, weights};\n}\n\n/**\n * Merge multiple WeightedGraphs together.\n *\n * This delegates to the semantics of Graph.merge and Weights.merge.\n */\nexport function merge(ws: $ReadOnlyArray<WeightedGraph>): WeightedGraph {\n  const graph = Graph.merge(ws.map((w) => w.graph));\n  const weights = Weights.merge(ws.map((w) => w.weights));\n  return {graph, weights};\n}\n\n/**\n * Create a new WeightedGraph where default weights have been overriden.\n *\n * This takes a base WeightedGraph along with a set of \"override\" weights. The\n * new graph has the union of both the base and override weights; wherever\n * there is a conflict, the override weights will replace the base weights.\n * This is useful in situations where we want to let the user manually specify\n * some weights, and ensure that the user's decisions will trump any defaults.\n *\n * This method does not mutuate any of the original arguments. For performance\n * reasons, it is not a full copy; the input and output WeightedGraphs have the\n * exact same underlying Graph, which should not be modified.\n */\nexport function overrideWeights(\n  wg: WeightedGraph,\n  overrides: WeightsT\n): WeightedGraph {\n  const weights = Weights.merge([wg.weights, overrides], {\n    nodeResolver: (a, b) => b,\n    edgeResolver: (a, b) => b,\n  });\n  return {graph: wg.graph, weights};\n}\n","// @flow\n\nimport {\n  // $FlowIssue[missing-export]\n  TextEncoder as importedTextEncoder,\n  TextDecoder as importedTextDecoder,\n} from \"util\";\n\nlet encoder, decoder;\n// ensure jest skips this condition\nif (typeof window !== \"undefined\" && typeof process === \"undefined\") {\n  if (!(window.TextEncoder && window.TextDecoder)) {\n    throw new Error(\"No Encoder classes available.\");\n  }\n  decoder = window.TextDecoder;\n  encoder = window.TextEncoder;\n} else {\n  // load imported libraries or fallback to globals if imports are unavailable\n  /* eslint-disable no-undef */\n  // $FlowIssue[cannot-resolve-name]\n  decoder = importedTextDecoder || globalThis.TextDecoder;\n  // $FlowIssue[cannot-resolve-name]\n  encoder = importedTextEncoder || globalThis.TextEncoder;\n}\n\n// $FlowIssue[incompatible-call]\nconst decode: (a: Uint8Array) => string = (a) => new decoder().decode(a);\nconst encode: (s: string) => Uint8Array = (s) => new encoder().encode(s);\n\nexport {encode, decode};\n","// @flow\n\nimport {DataStorage} from \"../core/storage\";\nimport {decode} from \"../core/storage/textEncoding\";\nimport * as P from \"./combo\";\n\nconst notFound = (e): boolean => e.code === \"ENOENT\" || e.number === 404;\n\n/**\n * Load and parse a JSON file from DataStorage.\n *\n * If the file cannot be read, then an error is thrown.\n * If parsing fails, an error is thrown.\n */\nexport async function loadJson<T>(\n  storage: DataStorage,\n  path: string,\n  parser: P.Parser<T>\n): Promise<T> {\n  const contents = await storage.get(path);\n  return parser.parseOrThrow(JSON.parse(decode(contents)));\n}\n\n/**\n * Load and parse a JSON file from DataStorage, with a default to use if the\n * file is not found.\n *\n * This is intended as a convenience for situations where the user may\n * optionally provide configuration in a json file.\n *\n * The default must be provided as a function that returns a default, to\n * accommodate situations where the object may be mutable, or where constructing\n * the default may be expensive.\n *\n * If no file is present at that location, then the default constructor is\n * invoked to create a default value, and that is returned.\n *\n * If attempting to load the file fails for any reason other than ENOENT or a\n * 404 (e.g. the path actually is a directory), then the error is thrown.\n *\n * If parsing fails, an error is thrown.\n */\nexport async function loadJsonWithDefault<T>(\n  storage: DataStorage,\n  path: string,\n  parser: P.Parser<T>,\n  def: () => T\n): Promise<T> {\n  try {\n    const contents = await storage.get(path);\n    return parser.parseOrThrow(JSON.parse(decode(contents)));\n  } catch (e) {\n    if (notFound(e)) {\n      console.log(`File not found at path: ${path}. Defaulting.`);\n      return def();\n    } else {\n      throw e;\n    }\n  }\n}\n\n/**\n * Read a text file from DataStorage, with a default string value to use if the\n * file is not found. The file is read in the default encoding, UTF-8.\n *\n * This is intended as a convenience for situations where the user may\n * optionally provide configuration in a non-JSON file saved to disk.\n *\n * The default must be provided as a function that returns a default, in\n * case constructing the default may be expensive.\n *\n * If no file is present at that location, then the default constructor is\n * invoked to create a default value, and that is returned.\n *\n * If attempting to load the file fails for any reason other than ENOENT or a\n * 404 (e.g. the path actually is a directory), then the error is thrown.\n */\nexport async function loadFileWithDefault(\n  storage: DataStorage,\n  path: string,\n  def: () => string\n): Promise<string> {\n  try {\n    return decode(await storage.get(path));\n  } catch (e) {\n    if (notFound(e)) {\n      return def();\n    } else {\n      throw e;\n    }\n  }\n}\n","\n/*! pako 2.0.3 https://github.com/nodeca/pako @license (MIT AND Zlib) */\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n/* eslint-disable space-unary-ops */\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n//const Z_FILTERED          = 1;\n//const Z_HUFFMAN_ONLY      = 2;\n//const Z_RLE               = 3;\nconst Z_FIXED               = 4;\n//const Z_DEFAULT_STRATEGY  = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\nconst Z_BINARY              = 0;\nconst Z_TEXT                = 1;\n//const Z_ASCII             = 1; // = Z_TEXT\nconst Z_UNKNOWN             = 2;\n\n/*============================================================================*/\n\n\nfunction zero(buf) { let len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n// From zutil.h\n\nconst STORED_BLOCK = 0;\nconst STATIC_TREES = 1;\nconst DYN_TREES    = 2;\n/* The three kinds of block type */\n\nconst MIN_MATCH    = 3;\nconst MAX_MATCH    = 258;\n/* The minimum and maximum match lengths */\n\n// From deflate.h\n/* ===========================================================================\n * Internal compression state.\n */\n\nconst LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\n\nconst LITERALS      = 256;\n/* number of literal bytes 0..255 */\n\nconst L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\n\nconst D_CODES       = 30;\n/* number of distance codes */\n\nconst BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\n\nconst HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\n\nconst MAX_BITS      = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nconst Buf_size      = 16;\n/* size of bit buffer in bi_buf */\n\n\n/* ===========================================================================\n * Constants\n */\n\nconst MAX_BL_BITS = 7;\n/* Bit length codes must not exceed MAX_BL_BITS bits */\n\nconst END_BLOCK   = 256;\n/* end of block literal code */\n\nconst REP_3_6     = 16;\n/* repeat previous bit length 3-6 times (2 bits of repeat count) */\n\nconst REPZ_3_10   = 17;\n/* repeat a zero length 3-10 times  (3 bits of repeat count) */\n\nconst REPZ_11_138 = 18;\n/* repeat a zero length 11-138 times  (7 bits of repeat count) */\n\n/* eslint-disable comma-spacing,array-bracket-spacing */\nconst extra_lbits =   /* extra bits for each length code */\n  new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]);\n\nconst extra_dbits =   /* extra bits for each distance code */\n  new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]);\n\nconst extra_blbits =  /* extra bits for each bit length code */\n  new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]);\n\nconst bl_order =\n  new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);\n/* eslint-enable comma-spacing,array-bracket-spacing */\n\n/* The lengths of the bit length codes are sent in order of decreasing\n * probability, to avoid transmitting the lengths for unused bit length codes.\n */\n\n/* ===========================================================================\n * Local data. These are initialized only once.\n */\n\n// We pre-fill arrays with 0 to avoid uninitialized gaps\n\nconst DIST_CODE_LEN = 512; /* see definition of array dist_code below */\n\n// !!!! Use flat array instead of structure, Freq = i*2, Len = i*2+1\nconst static_ltree  = new Array((L_CODES + 2) * 2);\nzero(static_ltree);\n/* The static literal tree. Since the bit lengths are imposed, there is no\n * need for the L_CODES extra codes used during heap construction. However\n * The codes 286 and 287 are needed to build a canonical tree (see _tr_init\n * below).\n */\n\nconst static_dtree  = new Array(D_CODES * 2);\nzero(static_dtree);\n/* The static distance tree. (Actually a trivial tree since all codes use\n * 5 bits.)\n */\n\nconst _dist_code    = new Array(DIST_CODE_LEN);\nzero(_dist_code);\n/* Distance codes. The first 256 values correspond to the distances\n * 3 .. 258, the last 256 values correspond to the top 8 bits of\n * the 15 bit distances.\n */\n\nconst _length_code  = new Array(MAX_MATCH - MIN_MATCH + 1);\nzero(_length_code);\n/* length code for each normalized match length (0 == MIN_MATCH) */\n\nconst base_length   = new Array(LENGTH_CODES);\nzero(base_length);\n/* First normalized length for each code (0 = MIN_MATCH) */\n\nconst base_dist     = new Array(D_CODES);\nzero(base_dist);\n/* First normalized distance for each code (0 = distance of 1) */\n\n\nfunction StaticTreeDesc(static_tree, extra_bits, extra_base, elems, max_length) {\n\n  this.static_tree  = static_tree;  /* static tree or NULL */\n  this.extra_bits   = extra_bits;   /* extra bits for each code or NULL */\n  this.extra_base   = extra_base;   /* base index for extra_bits */\n  this.elems        = elems;        /* max number of elements in the tree */\n  this.max_length   = max_length;   /* max bit length for the codes */\n\n  // show if `static_tree` has data or dummy - needed for monomorphic objects\n  this.has_stree    = static_tree && static_tree.length;\n}\n\n\nlet static_l_desc;\nlet static_d_desc;\nlet static_bl_desc;\n\n\nfunction TreeDesc(dyn_tree, stat_desc) {\n  this.dyn_tree = dyn_tree;     /* the dynamic tree */\n  this.max_code = 0;            /* largest code with non zero frequency */\n  this.stat_desc = stat_desc;   /* the corresponding static tree */\n}\n\n\n\nconst d_code = (dist) => {\n\n  return dist < 256 ? _dist_code[dist] : _dist_code[256 + (dist >>> 7)];\n};\n\n\n/* ===========================================================================\n * Output a short LSB first on the stream.\n * IN assertion: there is enough room in pendingBuf.\n */\nconst put_short = (s, w) => {\n//    put_byte(s, (uch)((w) & 0xff));\n//    put_byte(s, (uch)((ush)(w) >> 8));\n  s.pending_buf[s.pending++] = (w) & 0xff;\n  s.pending_buf[s.pending++] = (w >>> 8) & 0xff;\n};\n\n\n/* ===========================================================================\n * Send a value on a given number of bits.\n * IN assertion: length <= 16 and value fits in length bits.\n */\nconst send_bits = (s, value, length) => {\n\n  if (s.bi_valid > (Buf_size - length)) {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    put_short(s, s.bi_buf);\n    s.bi_buf = value >> (Buf_size - s.bi_valid);\n    s.bi_valid += length - Buf_size;\n  } else {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    s.bi_valid += length;\n  }\n};\n\n\nconst send_code = (s, c, tree) => {\n\n  send_bits(s, tree[c * 2]/*.Code*/, tree[c * 2 + 1]/*.Len*/);\n};\n\n\n/* ===========================================================================\n * Reverse the first len bits of a code, using straightforward code (a faster\n * method would use a table)\n * IN assertion: 1 <= len <= 15\n */\nconst bi_reverse = (code, len) => {\n\n  let res = 0;\n  do {\n    res |= code & 1;\n    code >>>= 1;\n    res <<= 1;\n  } while (--len > 0);\n  return res >>> 1;\n};\n\n\n/* ===========================================================================\n * Flush the bit buffer, keeping at most 7 bits in it.\n */\nconst bi_flush = (s) => {\n\n  if (s.bi_valid === 16) {\n    put_short(s, s.bi_buf);\n    s.bi_buf = 0;\n    s.bi_valid = 0;\n\n  } else if (s.bi_valid >= 8) {\n    s.pending_buf[s.pending++] = s.bi_buf & 0xff;\n    s.bi_buf >>= 8;\n    s.bi_valid -= 8;\n  }\n};\n\n\n/* ===========================================================================\n * Compute the optimal bit lengths for a tree and update the total bit length\n * for the current block.\n * IN assertion: the fields freq and dad are set, heap[heap_max] and\n *    above are the tree nodes sorted by increasing frequency.\n * OUT assertions: the field len is set to the optimal bit length, the\n *     array bl_count contains the frequencies for each bit length.\n *     The length opt_len is updated; static_len is also updated if stree is\n *     not null.\n */\nconst gen_bitlen = (s, desc) =>\n//    deflate_state *s;\n//    tree_desc *desc;    /* the tree descriptor */\n{\n  const tree            = desc.dyn_tree;\n  const max_code        = desc.max_code;\n  const stree           = desc.stat_desc.static_tree;\n  const has_stree       = desc.stat_desc.has_stree;\n  const extra           = desc.stat_desc.extra_bits;\n  const base            = desc.stat_desc.extra_base;\n  const max_length      = desc.stat_desc.max_length;\n  let h;              /* heap index */\n  let n, m;           /* iterate over the tree elements */\n  let bits;           /* bit length */\n  let xbits;          /* extra bits */\n  let f;              /* frequency */\n  let overflow = 0;   /* number of elements with bit length too large */\n\n  for (bits = 0; bits <= MAX_BITS; bits++) {\n    s.bl_count[bits] = 0;\n  }\n\n  /* In a first pass, compute the optimal bit lengths (which may\n   * overflow in the case of the bit length tree).\n   */\n  tree[s.heap[s.heap_max] * 2 + 1]/*.Len*/ = 0; /* root of the heap */\n\n  for (h = s.heap_max + 1; h < HEAP_SIZE; h++) {\n    n = s.heap[h];\n    bits = tree[tree[n * 2 + 1]/*.Dad*/ * 2 + 1]/*.Len*/ + 1;\n    if (bits > max_length) {\n      bits = max_length;\n      overflow++;\n    }\n    tree[n * 2 + 1]/*.Len*/ = bits;\n    /* We overwrite tree[n].Dad which is no longer needed */\n\n    if (n > max_code) { continue; } /* not a leaf node */\n\n    s.bl_count[bits]++;\n    xbits = 0;\n    if (n >= base) {\n      xbits = extra[n - base];\n    }\n    f = tree[n * 2]/*.Freq*/;\n    s.opt_len += f * (bits + xbits);\n    if (has_stree) {\n      s.static_len += f * (stree[n * 2 + 1]/*.Len*/ + xbits);\n    }\n  }\n  if (overflow === 0) { return; }\n\n  // Trace((stderr,\"\\nbit length overflow\\n\"));\n  /* This happens for example on obj2 and pic of the Calgary corpus */\n\n  /* Find the first bit length which could increase: */\n  do {\n    bits = max_length - 1;\n    while (s.bl_count[bits] === 0) { bits--; }\n    s.bl_count[bits]--;      /* move one leaf down the tree */\n    s.bl_count[bits + 1] += 2; /* move one overflow item as its brother */\n    s.bl_count[max_length]--;\n    /* The brother of the overflow item also moves one step up,\n     * but this does not affect bl_count[max_length]\n     */\n    overflow -= 2;\n  } while (overflow > 0);\n\n  /* Now recompute all bit lengths, scanning in increasing frequency.\n   * h is still equal to HEAP_SIZE. (It is simpler to reconstruct all\n   * lengths instead of fixing only the wrong ones. This idea is taken\n   * from 'ar' written by Haruhiko Okumura.)\n   */\n  for (bits = max_length; bits !== 0; bits--) {\n    n = s.bl_count[bits];\n    while (n !== 0) {\n      m = s.heap[--h];\n      if (m > max_code) { continue; }\n      if (tree[m * 2 + 1]/*.Len*/ !== bits) {\n        // Trace((stderr,\"code %d bits %d->%d\\n\", m, tree[m].Len, bits));\n        s.opt_len += (bits - tree[m * 2 + 1]/*.Len*/) * tree[m * 2]/*.Freq*/;\n        tree[m * 2 + 1]/*.Len*/ = bits;\n      }\n      n--;\n    }\n  }\n};\n\n\n/* ===========================================================================\n * Generate the codes for a given tree and bit counts (which need not be\n * optimal).\n * IN assertion: the array bl_count contains the bit length statistics for\n * the given tree and the field len is set for all tree elements.\n * OUT assertion: the field code is set for all tree elements of non\n *     zero code length.\n */\nconst gen_codes = (tree, max_code, bl_count) =>\n//    ct_data *tree;             /* the tree to decorate */\n//    int max_code;              /* largest code with non zero frequency */\n//    ushf *bl_count;            /* number of codes at each bit length */\n{\n  const next_code = new Array(MAX_BITS + 1); /* next code value for each bit length */\n  let code = 0;              /* running code value */\n  let bits;                  /* bit index */\n  let n;                     /* code index */\n\n  /* The distribution counts are first used to generate the code values\n   * without bit reversal.\n   */\n  for (bits = 1; bits <= MAX_BITS; bits++) {\n    next_code[bits] = code = (code + bl_count[bits - 1]) << 1;\n  }\n  /* Check that the bit counts in bl_count are consistent. The last code\n   * must be all ones.\n   */\n  //Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,\n  //        \"inconsistent bit counts\");\n  //Tracev((stderr,\"\\ngen_codes: max_code %d \", max_code));\n\n  for (n = 0;  n <= max_code; n++) {\n    let len = tree[n * 2 + 1]/*.Len*/;\n    if (len === 0) { continue; }\n    /* Now reverse the bits */\n    tree[n * 2]/*.Code*/ = bi_reverse(next_code[len]++, len);\n\n    //Tracecv(tree != static_ltree, (stderr,\"\\nn %3d %c l %2d c %4x (%x) \",\n    //     n, (isgraph(n) ? n : ' '), len, tree[n].Code, next_code[len]-1));\n  }\n};\n\n\n/* ===========================================================================\n * Initialize the various 'constant' tables.\n */\nconst tr_static_init = () => {\n\n  let n;        /* iterates over tree elements */\n  let bits;     /* bit counter */\n  let length;   /* length value */\n  let code;     /* code value */\n  let dist;     /* distance index */\n  const bl_count = new Array(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  // do check in _tr_init()\n  //if (static_init_done) return;\n\n  /* For some embedded targets, global variables are not initialized: */\n/*#ifdef NO_INIT_GLOBAL_POINTERS\n  static_l_desc.static_tree = static_ltree;\n  static_l_desc.extra_bits = extra_lbits;\n  static_d_desc.static_tree = static_dtree;\n  static_d_desc.extra_bits = extra_dbits;\n  static_bl_desc.extra_bits = extra_blbits;\n#endif*/\n\n  /* Initialize the mapping length (0..255) -> length code (0..28) */\n  length = 0;\n  for (code = 0; code < LENGTH_CODES - 1; code++) {\n    base_length[code] = length;\n    for (n = 0; n < (1 << extra_lbits[code]); n++) {\n      _length_code[length++] = code;\n    }\n  }\n  //Assert (length == 256, \"tr_static_init: length != 256\");\n  /* Note that the length 255 (match length 258) can be represented\n   * in two different ways: code 284 + 5 bits or code 285, so we\n   * overwrite length_code[255] to use the best encoding:\n   */\n  _length_code[length - 1] = code;\n\n  /* Initialize the mapping dist (0..32K) -> dist code (0..29) */\n  dist = 0;\n  for (code = 0; code < 16; code++) {\n    base_dist[code] = dist;\n    for (n = 0; n < (1 << extra_dbits[code]); n++) {\n      _dist_code[dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: dist != 256\");\n  dist >>= 7; /* from now on, all distances are divided by 128 */\n  for (; code < D_CODES; code++) {\n    base_dist[code] = dist << 7;\n    for (n = 0; n < (1 << (extra_dbits[code] - 7)); n++) {\n      _dist_code[256 + dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: 256+dist != 512\");\n\n  /* Construct the codes of the static literal tree */\n  for (bits = 0; bits <= MAX_BITS; bits++) {\n    bl_count[bits] = 0;\n  }\n\n  n = 0;\n  while (n <= 143) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  while (n <= 255) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 9;\n    n++;\n    bl_count[9]++;\n  }\n  while (n <= 279) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 7;\n    n++;\n    bl_count[7]++;\n  }\n  while (n <= 287) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  /* Codes 286 and 287 do not exist, but we must include them in the\n   * tree construction to get a canonical Huffman tree (longest code\n   * all ones)\n   */\n  gen_codes(static_ltree, L_CODES + 1, bl_count);\n\n  /* The static distance tree is trivial: */\n  for (n = 0; n < D_CODES; n++) {\n    static_dtree[n * 2 + 1]/*.Len*/ = 5;\n    static_dtree[n * 2]/*.Code*/ = bi_reverse(n, 5);\n  }\n\n  // Now data ready and we can init static trees\n  static_l_desc = new StaticTreeDesc(static_ltree, extra_lbits, LITERALS + 1, L_CODES, MAX_BITS);\n  static_d_desc = new StaticTreeDesc(static_dtree, extra_dbits, 0,          D_CODES, MAX_BITS);\n  static_bl_desc = new StaticTreeDesc(new Array(0), extra_blbits, 0,         BL_CODES, MAX_BL_BITS);\n\n  //static_init_done = true;\n};\n\n\n/* ===========================================================================\n * Initialize a new block.\n */\nconst init_block = (s) => {\n\n  let n; /* iterates over tree elements */\n\n  /* Initialize the trees. */\n  for (n = 0; n < L_CODES;  n++) { s.dyn_ltree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < D_CODES;  n++) { s.dyn_dtree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < BL_CODES; n++) { s.bl_tree[n * 2]/*.Freq*/ = 0; }\n\n  s.dyn_ltree[END_BLOCK * 2]/*.Freq*/ = 1;\n  s.opt_len = s.static_len = 0;\n  s.last_lit = s.matches = 0;\n};\n\n\n/* ===========================================================================\n * Flush the bit buffer and align the output on a byte boundary\n */\nconst bi_windup = (s) =>\n{\n  if (s.bi_valid > 8) {\n    put_short(s, s.bi_buf);\n  } else if (s.bi_valid > 0) {\n    //put_byte(s, (Byte)s->bi_buf);\n    s.pending_buf[s.pending++] = s.bi_buf;\n  }\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n};\n\n/* ===========================================================================\n * Copy a stored block, storing first the length and its\n * one's complement if requested.\n */\nconst copy_block = (s, buf, len, header) =>\n//DeflateState *s;\n//charf    *buf;    /* the input data */\n//unsigned len;     /* its length */\n//int      header;  /* true if block header must be written */\n{\n  bi_windup(s);        /* align on byte boundary */\n\n  if (header) {\n    put_short(s, len);\n    put_short(s, ~len);\n  }\n//  while (len--) {\n//    put_byte(s, *buf++);\n//  }\n  s.pending_buf.set(s.window.subarray(buf, buf + len), s.pending);\n  s.pending += len;\n};\n\n/* ===========================================================================\n * Compares to subtrees, using the tree depth as tie breaker when\n * the subtrees have equal frequency. This minimizes the worst case length.\n */\nconst smaller = (tree, n, m, depth) => {\n\n  const _n2 = n * 2;\n  const _m2 = m * 2;\n  return (tree[_n2]/*.Freq*/ < tree[_m2]/*.Freq*/ ||\n         (tree[_n2]/*.Freq*/ === tree[_m2]/*.Freq*/ && depth[n] <= depth[m]));\n};\n\n/* ===========================================================================\n * Restore the heap property by moving down the tree starting at node k,\n * exchanging a node with the smallest of its two sons if necessary, stopping\n * when the heap property is re-established (each father smaller than its\n * two sons).\n */\nconst pqdownheap = (s, tree, k) =>\n//    deflate_state *s;\n//    ct_data *tree;  /* the tree to restore */\n//    int k;               /* node to move down */\n{\n  const v = s.heap[k];\n  let j = k << 1;  /* left son of k */\n  while (j <= s.heap_len) {\n    /* Set j to the smallest of the two sons: */\n    if (j < s.heap_len &&\n      smaller(tree, s.heap[j + 1], s.heap[j], s.depth)) {\n      j++;\n    }\n    /* Exit if v is smaller than both sons */\n    if (smaller(tree, v, s.heap[j], s.depth)) { break; }\n\n    /* Exchange v with the smallest son */\n    s.heap[k] = s.heap[j];\n    k = j;\n\n    /* And continue down the tree, setting j to the left son of k */\n    j <<= 1;\n  }\n  s.heap[k] = v;\n};\n\n\n// inlined manually\n// const SMALLEST = 1;\n\n/* ===========================================================================\n * Send the block data compressed using the given Huffman trees\n */\nconst compress_block = (s, ltree, dtree) =>\n//    deflate_state *s;\n//    const ct_data *ltree; /* literal tree */\n//    const ct_data *dtree; /* distance tree */\n{\n  let dist;           /* distance of matched string */\n  let lc;             /* match length or unmatched char (if dist == 0) */\n  let lx = 0;         /* running index in l_buf */\n  let code;           /* the code to send */\n  let extra;          /* number of extra bits to send */\n\n  if (s.last_lit !== 0) {\n    do {\n      dist = (s.pending_buf[s.d_buf + lx * 2] << 8) | (s.pending_buf[s.d_buf + lx * 2 + 1]);\n      lc = s.pending_buf[s.l_buf + lx];\n      lx++;\n\n      if (dist === 0) {\n        send_code(s, lc, ltree); /* send a literal byte */\n        //Tracecv(isgraph(lc), (stderr,\" '%c' \", lc));\n      } else {\n        /* Here, lc is the match length - MIN_MATCH */\n        code = _length_code[lc];\n        send_code(s, code + LITERALS + 1, ltree); /* send the length code */\n        extra = extra_lbits[code];\n        if (extra !== 0) {\n          lc -= base_length[code];\n          send_bits(s, lc, extra);       /* send the extra length bits */\n        }\n        dist--; /* dist is now the match distance - 1 */\n        code = d_code(dist);\n        //Assert (code < D_CODES, \"bad d_code\");\n\n        send_code(s, code, dtree);       /* send the distance code */\n        extra = extra_dbits[code];\n        if (extra !== 0) {\n          dist -= base_dist[code];\n          send_bits(s, dist, extra);   /* send the extra distance bits */\n        }\n      } /* literal or match pair ? */\n\n      /* Check that the overlay between pending_buf and d_buf+l_buf is ok: */\n      //Assert((uInt)(s->pending) < s->lit_bufsize + 2*lx,\n      //       \"pendingBuf overflow\");\n\n    } while (lx < s.last_lit);\n  }\n\n  send_code(s, END_BLOCK, ltree);\n};\n\n\n/* ===========================================================================\n * Construct one Huffman tree and assigns the code bit strings and lengths.\n * Update the total bit length for the current block.\n * IN assertion: the field freq is set for all tree elements.\n * OUT assertions: the fields len and code are set to the optimal bit length\n *     and corresponding code. The length opt_len is updated; static_len is\n *     also updated if stree is not null. The field max_code is set.\n */\nconst build_tree = (s, desc) =>\n//    deflate_state *s;\n//    tree_desc *desc; /* the tree descriptor */\n{\n  const tree     = desc.dyn_tree;\n  const stree    = desc.stat_desc.static_tree;\n  const has_stree = desc.stat_desc.has_stree;\n  const elems    = desc.stat_desc.elems;\n  let n, m;          /* iterate over heap elements */\n  let max_code = -1; /* largest code with non zero frequency */\n  let node;          /* new node being created */\n\n  /* Construct the initial heap, with least frequent element in\n   * heap[SMALLEST]. The sons of heap[n] are heap[2*n] and heap[2*n+1].\n   * heap[0] is not used.\n   */\n  s.heap_len = 0;\n  s.heap_max = HEAP_SIZE;\n\n  for (n = 0; n < elems; n++) {\n    if (tree[n * 2]/*.Freq*/ !== 0) {\n      s.heap[++s.heap_len] = max_code = n;\n      s.depth[n] = 0;\n\n    } else {\n      tree[n * 2 + 1]/*.Len*/ = 0;\n    }\n  }\n\n  /* The pkzip format requires that at least one distance code exists,\n   * and that at least one bit should be sent even if there is only one\n   * possible code. So to avoid special checks later on we force at least\n   * two codes of non zero frequency.\n   */\n  while (s.heap_len < 2) {\n    node = s.heap[++s.heap_len] = (max_code < 2 ? ++max_code : 0);\n    tree[node * 2]/*.Freq*/ = 1;\n    s.depth[node] = 0;\n    s.opt_len--;\n\n    if (has_stree) {\n      s.static_len -= stree[node * 2 + 1]/*.Len*/;\n    }\n    /* node is 0 or 1 so it does not have extra bits */\n  }\n  desc.max_code = max_code;\n\n  /* The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,\n   * establish sub-heaps of increasing lengths:\n   */\n  for (n = (s.heap_len >> 1/*int /2*/); n >= 1; n--) { pqdownheap(s, tree, n); }\n\n  /* Construct the Huffman tree by repeatedly combining the least two\n   * frequent nodes.\n   */\n  node = elems;              /* next internal node of the tree */\n  do {\n    //pqremove(s, tree, n);  /* n = node of least frequency */\n    /*** pqremove ***/\n    n = s.heap[1/*SMALLEST*/];\n    s.heap[1/*SMALLEST*/] = s.heap[s.heap_len--];\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n    /***/\n\n    m = s.heap[1/*SMALLEST*/]; /* m = node of next least frequency */\n\n    s.heap[--s.heap_max] = n; /* keep the nodes sorted by frequency */\n    s.heap[--s.heap_max] = m;\n\n    /* Create a new node father of n and m */\n    tree[node * 2]/*.Freq*/ = tree[n * 2]/*.Freq*/ + tree[m * 2]/*.Freq*/;\n    s.depth[node] = (s.depth[n] >= s.depth[m] ? s.depth[n] : s.depth[m]) + 1;\n    tree[n * 2 + 1]/*.Dad*/ = tree[m * 2 + 1]/*.Dad*/ = node;\n\n    /* and insert the new node in the heap */\n    s.heap[1/*SMALLEST*/] = node++;\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n\n  } while (s.heap_len >= 2);\n\n  s.heap[--s.heap_max] = s.heap[1/*SMALLEST*/];\n\n  /* At this point, the fields freq and dad are set. We can now\n   * generate the bit lengths.\n   */\n  gen_bitlen(s, desc);\n\n  /* The field len is now set, we can generate the bit codes */\n  gen_codes(tree, max_code, s.bl_count);\n};\n\n\n/* ===========================================================================\n * Scan a literal or distance tree to determine the frequencies of the codes\n * in the bit length tree.\n */\nconst scan_tree = (s, tree, max_code) =>\n//    deflate_state *s;\n//    ct_data *tree;   /* the tree to be scanned */\n//    int max_code;    /* and its largest code of non zero frequency */\n{\n  let n;                     /* iterates over all tree elements */\n  let prevlen = -1;          /* last emitted length */\n  let curlen;                /* length of current code */\n\n  let nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  let count = 0;             /* repeat count of the current code */\n  let max_count = 7;         /* max repeat count */\n  let min_count = 4;         /* min repeat count */\n\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n  tree[(max_code + 1) * 2 + 1]/*.Len*/ = 0xffff; /* guard */\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      s.bl_tree[curlen * 2]/*.Freq*/ += count;\n\n    } else if (curlen !== 0) {\n\n      if (curlen !== prevlen) { s.bl_tree[curlen * 2]/*.Freq*/++; }\n      s.bl_tree[REP_3_6 * 2]/*.Freq*/++;\n\n    } else if (count <= 10) {\n      s.bl_tree[REPZ_3_10 * 2]/*.Freq*/++;\n\n    } else {\n      s.bl_tree[REPZ_11_138 * 2]/*.Freq*/++;\n    }\n\n    count = 0;\n    prevlen = curlen;\n\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n};\n\n\n/* ===========================================================================\n * Send a literal or distance tree in compressed form, using the codes in\n * bl_tree.\n */\nconst send_tree = (s, tree, max_code) =>\n//    deflate_state *s;\n//    ct_data *tree; /* the tree to be scanned */\n//    int max_code;       /* and its largest code of non zero frequency */\n{\n  let n;                     /* iterates over all tree elements */\n  let prevlen = -1;          /* last emitted length */\n  let curlen;                /* length of current code */\n\n  let nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  let count = 0;             /* repeat count of the current code */\n  let max_count = 7;         /* max repeat count */\n  let min_count = 4;         /* min repeat count */\n\n  /* tree[max_code+1].Len = -1; */  /* guard already set */\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      do { send_code(s, curlen, s.bl_tree); } while (--count !== 0);\n\n    } else if (curlen !== 0) {\n      if (curlen !== prevlen) {\n        send_code(s, curlen, s.bl_tree);\n        count--;\n      }\n      //Assert(count >= 3 && count <= 6, \" 3_6?\");\n      send_code(s, REP_3_6, s.bl_tree);\n      send_bits(s, count - 3, 2);\n\n    } else if (count <= 10) {\n      send_code(s, REPZ_3_10, s.bl_tree);\n      send_bits(s, count - 3, 3);\n\n    } else {\n      send_code(s, REPZ_11_138, s.bl_tree);\n      send_bits(s, count - 11, 7);\n    }\n\n    count = 0;\n    prevlen = curlen;\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n};\n\n\n/* ===========================================================================\n * Construct the Huffman tree for the bit lengths and return the index in\n * bl_order of the last bit length code to send.\n */\nconst build_bl_tree = (s) => {\n\n  let max_blindex;  /* index of last bit length code of non zero freq */\n\n  /* Determine the bit length frequencies for literal and distance trees */\n  scan_tree(s, s.dyn_ltree, s.l_desc.max_code);\n  scan_tree(s, s.dyn_dtree, s.d_desc.max_code);\n\n  /* Build the bit length tree: */\n  build_tree(s, s.bl_desc);\n  /* opt_len now includes the length of the tree representations, except\n   * the lengths of the bit lengths codes and the 5+5+4 bits for the counts.\n   */\n\n  /* Determine the number of bit length codes to send. The pkzip format\n   * requires that at least 4 bit length codes be sent. (appnote.txt says\n   * 3 but the actual value used is 4.)\n   */\n  for (max_blindex = BL_CODES - 1; max_blindex >= 3; max_blindex--) {\n    if (s.bl_tree[bl_order[max_blindex] * 2 + 1]/*.Len*/ !== 0) {\n      break;\n    }\n  }\n  /* Update opt_len to include the bit length tree and counts */\n  s.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4;\n  //Tracev((stderr, \"\\ndyn trees: dyn %ld, stat %ld\",\n  //        s->opt_len, s->static_len));\n\n  return max_blindex;\n};\n\n\n/* ===========================================================================\n * Send the header for a block using dynamic Huffman trees: the counts, the\n * lengths of the bit length codes, the literal tree and the distance tree.\n * IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.\n */\nconst send_all_trees = (s, lcodes, dcodes, blcodes) =>\n//    deflate_state *s;\n//    int lcodes, dcodes, blcodes; /* number of codes for each tree */\n{\n  let rank;                    /* index in bl_order */\n\n  //Assert (lcodes >= 257 && dcodes >= 1 && blcodes >= 4, \"not enough codes\");\n  //Assert (lcodes <= L_CODES && dcodes <= D_CODES && blcodes <= BL_CODES,\n  //        \"too many codes\");\n  //Tracev((stderr, \"\\nbl counts: \"));\n  send_bits(s, lcodes - 257, 5); /* not +255 as stated in appnote.txt */\n  send_bits(s, dcodes - 1,   5);\n  send_bits(s, blcodes - 4,  4); /* not -3 as stated in appnote.txt */\n  for (rank = 0; rank < blcodes; rank++) {\n    //Tracev((stderr, \"\\nbl code %2d \", bl_order[rank]));\n    send_bits(s, s.bl_tree[bl_order[rank] * 2 + 1]/*.Len*/, 3);\n  }\n  //Tracev((stderr, \"\\nbl tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_ltree, lcodes - 1); /* literal tree */\n  //Tracev((stderr, \"\\nlit tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_dtree, dcodes - 1); /* distance tree */\n  //Tracev((stderr, \"\\ndist tree: sent %ld\", s->bits_sent));\n};\n\n\n/* ===========================================================================\n * Check if the data type is TEXT or BINARY, using the following algorithm:\n * - TEXT if the two conditions below are satisfied:\n *    a) There are no non-portable control characters belonging to the\n *       \"black list\" (0..6, 14..25, 28..31).\n *    b) There is at least one printable character belonging to the\n *       \"white list\" (9 {TAB}, 10 {LF}, 13 {CR}, 32..255).\n * - BINARY otherwise.\n * - The following partially-portable control characters form a\n *   \"gray list\" that is ignored in this detection algorithm:\n *   (7 {BEL}, 8 {BS}, 11 {VT}, 12 {FF}, 26 {SUB}, 27 {ESC}).\n * IN assertion: the fields Freq of dyn_ltree are set.\n */\nconst detect_data_type = (s) => {\n  /* black_mask is the bit mask of black-listed bytes\n   * set bits 0..6, 14..25, and 28..31\n   * 0xf3ffc07f = binary 11110011111111111100000001111111\n   */\n  let black_mask = 0xf3ffc07f;\n  let n;\n\n  /* Check for non-textual (\"black-listed\") bytes. */\n  for (n = 0; n <= 31; n++, black_mask >>>= 1) {\n    if ((black_mask & 1) && (s.dyn_ltree[n * 2]/*.Freq*/ !== 0)) {\n      return Z_BINARY;\n    }\n  }\n\n  /* Check for textual (\"white-listed\") bytes. */\n  if (s.dyn_ltree[9 * 2]/*.Freq*/ !== 0 || s.dyn_ltree[10 * 2]/*.Freq*/ !== 0 ||\n      s.dyn_ltree[13 * 2]/*.Freq*/ !== 0) {\n    return Z_TEXT;\n  }\n  for (n = 32; n < LITERALS; n++) {\n    if (s.dyn_ltree[n * 2]/*.Freq*/ !== 0) {\n      return Z_TEXT;\n    }\n  }\n\n  /* There are no \"black-listed\" or \"white-listed\" bytes:\n   * this stream either is empty or has tolerated (\"gray-listed\") bytes only.\n   */\n  return Z_BINARY;\n};\n\n\nlet static_init_done = false;\n\n/* ===========================================================================\n * Initialize the tree data structures for a new zlib stream.\n */\nconst _tr_init = (s) =>\n{\n\n  if (!static_init_done) {\n    tr_static_init();\n    static_init_done = true;\n  }\n\n  s.l_desc  = new TreeDesc(s.dyn_ltree, static_l_desc);\n  s.d_desc  = new TreeDesc(s.dyn_dtree, static_d_desc);\n  s.bl_desc = new TreeDesc(s.bl_tree, static_bl_desc);\n\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n\n  /* Initialize the first block of the first file: */\n  init_block(s);\n};\n\n\n/* ===========================================================================\n * Send a stored block\n */\nconst _tr_stored_block = (s, buf, stored_len, last) =>\n//DeflateState *s;\n//charf *buf;       /* input block */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  send_bits(s, (STORED_BLOCK << 1) + (last ? 1 : 0), 3);    /* send block type */\n  copy_block(s, buf, stored_len, true); /* with header */\n};\n\n\n/* ===========================================================================\n * Send one empty static block to give enough lookahead for inflate.\n * This takes 10 bits, of which 7 may remain in the bit buffer.\n */\nconst _tr_align = (s) => {\n  send_bits(s, STATIC_TREES << 1, 3);\n  send_code(s, END_BLOCK, static_ltree);\n  bi_flush(s);\n};\n\n\n/* ===========================================================================\n * Determine the best encoding for the current block: dynamic trees, static\n * trees or store, and output the encoded block to the zip file.\n */\nconst _tr_flush_block = (s, buf, stored_len, last) =>\n//DeflateState *s;\n//charf *buf;       /* input block, or NULL if too old */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  let opt_lenb, static_lenb;  /* opt_len and static_len in bytes */\n  let max_blindex = 0;        /* index of last bit length code of non zero freq */\n\n  /* Build the Huffman trees unless a stored block is forced */\n  if (s.level > 0) {\n\n    /* Check if the file is binary or text */\n    if (s.strm.data_type === Z_UNKNOWN) {\n      s.strm.data_type = detect_data_type(s);\n    }\n\n    /* Construct the literal and distance trees */\n    build_tree(s, s.l_desc);\n    // Tracev((stderr, \"\\nlit data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n\n    build_tree(s, s.d_desc);\n    // Tracev((stderr, \"\\ndist data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n    /* At this point, opt_len and static_len are the total bit lengths of\n     * the compressed block data, excluding the tree representations.\n     */\n\n    /* Build the bit length tree for the above two trees, and get the index\n     * in bl_order of the last bit length code to send.\n     */\n    max_blindex = build_bl_tree(s);\n\n    /* Determine the best encoding. Compute the block lengths in bytes. */\n    opt_lenb = (s.opt_len + 3 + 7) >>> 3;\n    static_lenb = (s.static_len + 3 + 7) >>> 3;\n\n    // Tracev((stderr, \"\\nopt %lu(%lu) stat %lu(%lu) stored %lu lit %u \",\n    //        opt_lenb, s->opt_len, static_lenb, s->static_len, stored_len,\n    //        s->last_lit));\n\n    if (static_lenb <= opt_lenb) { opt_lenb = static_lenb; }\n\n  } else {\n    // Assert(buf != (char*)0, \"lost buf\");\n    opt_lenb = static_lenb = stored_len + 5; /* force a stored block */\n  }\n\n  if ((stored_len + 4 <= opt_lenb) && (buf !== -1)) {\n    /* 4: two words for the lengths */\n\n    /* The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.\n     * Otherwise we can't have processed more than WSIZE input bytes since\n     * the last block flush, because compression would have been\n     * successful. If LIT_BUFSIZE <= WSIZE, it is never too late to\n     * transform a block into a stored block.\n     */\n    _tr_stored_block(s, buf, stored_len, last);\n\n  } else if (s.strategy === Z_FIXED || static_lenb === opt_lenb) {\n\n    send_bits(s, (STATIC_TREES << 1) + (last ? 1 : 0), 3);\n    compress_block(s, static_ltree, static_dtree);\n\n  } else {\n    send_bits(s, (DYN_TREES << 1) + (last ? 1 : 0), 3);\n    send_all_trees(s, s.l_desc.max_code + 1, s.d_desc.max_code + 1, max_blindex + 1);\n    compress_block(s, s.dyn_ltree, s.dyn_dtree);\n  }\n  // Assert (s->compressed_len == s->bits_sent, \"bad compressed size\");\n  /* The above check is made mod 2^32, for files larger than 512 MB\n   * and uLong implemented on 32 bits.\n   */\n  init_block(s);\n\n  if (last) {\n    bi_windup(s);\n  }\n  // Tracev((stderr,\"\\ncomprlen %lu(%lu) \", s->compressed_len>>3,\n  //       s->compressed_len-7*last));\n};\n\n/* ===========================================================================\n * Save the match info and tally the frequency counts. Return true if\n * the current block must be flushed.\n */\nconst _tr_tally = (s, dist, lc) =>\n//    deflate_state *s;\n//    unsigned dist;  /* distance of matched string */\n//    unsigned lc;    /* match length-MIN_MATCH or unmatched char (if dist==0) */\n{\n  //let out_length, in_length, dcode;\n\n  s.pending_buf[s.d_buf + s.last_lit * 2]     = (dist >>> 8) & 0xff;\n  s.pending_buf[s.d_buf + s.last_lit * 2 + 1] = dist & 0xff;\n\n  s.pending_buf[s.l_buf + s.last_lit] = lc & 0xff;\n  s.last_lit++;\n\n  if (dist === 0) {\n    /* lc is the unmatched char */\n    s.dyn_ltree[lc * 2]/*.Freq*/++;\n  } else {\n    s.matches++;\n    /* Here, lc is the match length - MIN_MATCH */\n    dist--;             /* dist = match distance - 1 */\n    //Assert((ush)dist < (ush)MAX_DIST(s) &&\n    //       (ush)lc <= (ush)(MAX_MATCH-MIN_MATCH) &&\n    //       (ush)d_code(dist) < (ush)D_CODES,  \"_tr_tally: bad match\");\n\n    s.dyn_ltree[(_length_code[lc] + LITERALS + 1) * 2]/*.Freq*/++;\n    s.dyn_dtree[d_code(dist) * 2]/*.Freq*/++;\n  }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n\n//#ifdef TRUNCATE_BLOCK\n//  /* Try to guess if it is profitable to stop the current block here */\n//  if ((s.last_lit & 0x1fff) === 0 && s.level > 2) {\n//    /* Compute an upper bound for the compressed length */\n//    out_length = s.last_lit*8;\n//    in_length = s.strstart - s.block_start;\n//\n//    for (dcode = 0; dcode < D_CODES; dcode++) {\n//      out_length += s.dyn_dtree[dcode*2]/*.Freq*/ * (5 + extra_dbits[dcode]);\n//    }\n//    out_length >>>= 3;\n//    //Tracev((stderr,\"\\nlast_lit %u, in %ld, out ~%ld(%ld%%) \",\n//    //       s->last_lit, in_length, out_length,\n//    //       100L - out_length*100L/in_length));\n//    if (s.matches < (s.last_lit>>1)/*int /2*/ && out_length < (in_length>>1)/*int /2*/) {\n//      return true;\n//    }\n//  }\n//#endif\n\n  return (s.last_lit === s.lit_bufsize - 1);\n  /* We avoid equality with lit_bufsize because of wraparound at 64K\n   * on 16 bit machines and because stored blocks are restricted to\n   * 64K-1 bytes.\n   */\n};\n\nvar _tr_init_1  = _tr_init;\nvar _tr_stored_block_1 = _tr_stored_block;\nvar _tr_flush_block_1  = _tr_flush_block;\nvar _tr_tally_1 = _tr_tally;\nvar _tr_align_1 = _tr_align;\n\nvar trees = {\n\t_tr_init: _tr_init_1,\n\t_tr_stored_block: _tr_stored_block_1,\n\t_tr_flush_block: _tr_flush_block_1,\n\t_tr_tally: _tr_tally_1,\n\t_tr_align: _tr_align_1\n};\n\n// Note: adler32 takes 12% for level 0 and 2% for level 6.\n// It isn't worth it to make additional optimizations as in original.\n// Small size is preferable.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nconst adler32 = (adler, buf, len, pos) => {\n  let s1 = (adler & 0xffff) |0,\n      s2 = ((adler >>> 16) & 0xffff) |0,\n      n = 0;\n\n  while (len !== 0) {\n    // Set limit ~ twice less than 5552, to keep\n    // s2 in 31-bits, because we force signed ints.\n    // in other case %= will fail.\n    n = len > 2000 ? 2000 : len;\n    len -= n;\n\n    do {\n      s1 = (s1 + buf[pos++]) |0;\n      s2 = (s2 + s1) |0;\n    } while (--n);\n\n    s1 %= 65521;\n    s2 %= 65521;\n  }\n\n  return (s1 | (s2 << 16)) |0;\n};\n\n\nvar adler32_1 = adler32;\n\n// Note: we can't get significant speed boost here.\n// So write code to minimize size - no pregenerated tables\n// and array tools dependencies.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// Use ordinary array, since untyped makes no boost here\nconst makeTable = () => {\n  let c, table = [];\n\n  for (var n = 0; n < 256; n++) {\n    c = n;\n    for (var k = 0; k < 8; k++) {\n      c = ((c & 1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));\n    }\n    table[n] = c;\n  }\n\n  return table;\n};\n\n// Create table on load. Just 255 signed longs. Not a problem.\nconst crcTable = new Uint32Array(makeTable());\n\n\nconst crc32 = (crc, buf, len, pos) => {\n  const t = crcTable;\n  const end = pos + len;\n\n  crc ^= -1;\n\n  for (let i = pos; i < end; i++) {\n    crc = (crc >>> 8) ^ t[(crc ^ buf[i]) & 0xFF];\n  }\n\n  return (crc ^ (-1)); // >>> 0;\n};\n\n\nvar crc32_1 = crc32;\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar messages = {\n  2:      'need dictionary',     /* Z_NEED_DICT       2  */\n  1:      'stream end',          /* Z_STREAM_END      1  */\n  0:      '',                    /* Z_OK              0  */\n  '-1':   'file error',          /* Z_ERRNO         (-1) */\n  '-2':   'stream error',        /* Z_STREAM_ERROR  (-2) */\n  '-3':   'data error',          /* Z_DATA_ERROR    (-3) */\n  '-4':   'insufficient memory', /* Z_MEM_ERROR     (-4) */\n  '-5':   'buffer error',        /* Z_BUF_ERROR     (-5) */\n  '-6':   'incompatible version' /* Z_VERSION_ERROR (-6) */\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar constants = {\n\n  /* Allowed flush values; see deflate() and inflate() below for details */\n  Z_NO_FLUSH:         0,\n  Z_PARTIAL_FLUSH:    1,\n  Z_SYNC_FLUSH:       2,\n  Z_FULL_FLUSH:       3,\n  Z_FINISH:           4,\n  Z_BLOCK:            5,\n  Z_TREES:            6,\n\n  /* Return codes for the compression/decompression functions. Negative values\n  * are errors, positive values are used for special but normal events.\n  */\n  Z_OK:               0,\n  Z_STREAM_END:       1,\n  Z_NEED_DICT:        2,\n  Z_ERRNO:           -1,\n  Z_STREAM_ERROR:    -2,\n  Z_DATA_ERROR:      -3,\n  Z_MEM_ERROR:       -4,\n  Z_BUF_ERROR:       -5,\n  //Z_VERSION_ERROR: -6,\n\n  /* compression levels */\n  Z_NO_COMPRESSION:         0,\n  Z_BEST_SPEED:             1,\n  Z_BEST_COMPRESSION:       9,\n  Z_DEFAULT_COMPRESSION:   -1,\n\n\n  Z_FILTERED:               1,\n  Z_HUFFMAN_ONLY:           2,\n  Z_RLE:                    3,\n  Z_FIXED:                  4,\n  Z_DEFAULT_STRATEGY:       0,\n\n  /* Possible values of the data_type field (though see inflate()) */\n  Z_BINARY:                 0,\n  Z_TEXT:                   1,\n  //Z_ASCII:                1, // = Z_TEXT (deprecated)\n  Z_UNKNOWN:                2,\n\n  /* The deflate compression method */\n  Z_DEFLATED:               8\n  //Z_NULL:                 null // Use -1 or null inline, depending on var type\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nconst { _tr_init: _tr_init$1, _tr_stored_block: _tr_stored_block$1, _tr_flush_block: _tr_flush_block$1, _tr_tally: _tr_tally$1, _tr_align: _tr_align$1 } = trees;\n\n\n\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_NO_FLUSH, Z_PARTIAL_FLUSH, Z_FULL_FLUSH, Z_FINISH, Z_BLOCK,\n  Z_OK, Z_STREAM_END, Z_STREAM_ERROR, Z_DATA_ERROR, Z_BUF_ERROR,\n  Z_DEFAULT_COMPRESSION,\n  Z_FILTERED, Z_HUFFMAN_ONLY, Z_RLE, Z_FIXED: Z_FIXED$1, Z_DEFAULT_STRATEGY,\n  Z_UNKNOWN: Z_UNKNOWN$1,\n  Z_DEFLATED\n} = constants;\n\n/*============================================================================*/\n\n\nconst MAX_MEM_LEVEL = 9;\n/* Maximum value for memLevel in deflateInit2 */\nconst MAX_WBITS = 15;\n/* 32K LZ77 window */\nconst DEF_MEM_LEVEL = 8;\n\n\nconst LENGTH_CODES$1  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\nconst LITERALS$1      = 256;\n/* number of literal bytes 0..255 */\nconst L_CODES$1       = LITERALS$1 + 1 + LENGTH_CODES$1;\n/* number of Literal or Length codes, including the END_BLOCK code */\nconst D_CODES$1       = 30;\n/* number of distance codes */\nconst BL_CODES$1      = 19;\n/* number of codes used to transfer the bit lengths */\nconst HEAP_SIZE$1     = 2 * L_CODES$1 + 1;\n/* maximum heap size */\nconst MAX_BITS$1  = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nconst MIN_MATCH$1 = 3;\nconst MAX_MATCH$1 = 258;\nconst MIN_LOOKAHEAD = (MAX_MATCH$1 + MIN_MATCH$1 + 1);\n\nconst PRESET_DICT = 0x20;\n\nconst INIT_STATE = 42;\nconst EXTRA_STATE = 69;\nconst NAME_STATE = 73;\nconst COMMENT_STATE = 91;\nconst HCRC_STATE = 103;\nconst BUSY_STATE = 113;\nconst FINISH_STATE = 666;\n\nconst BS_NEED_MORE      = 1; /* block not completed, need more input or more output */\nconst BS_BLOCK_DONE     = 2; /* block flush performed */\nconst BS_FINISH_STARTED = 3; /* finish started, need only more output at next deflate */\nconst BS_FINISH_DONE    = 4; /* finish done, accept no more input or output */\n\nconst OS_CODE = 0x03; // Unix :) . Don't detect, use this default.\n\nconst err = (strm, errorCode) => {\n  strm.msg = messages[errorCode];\n  return errorCode;\n};\n\nconst rank = (f) => {\n  return ((f) << 1) - ((f) > 4 ? 9 : 0);\n};\n\nconst zero$1 = (buf) => {\n  let len = buf.length; while (--len >= 0) { buf[len] = 0; }\n};\n\n\n/* eslint-disable new-cap */\nlet HASH_ZLIB = (s, prev, data) => ((prev << s.hash_shift) ^ data) & s.hash_mask;\n// This hash causes less collisions, https://github.com/nodeca/pako/issues/135\n// But breaks binary compatibility\n//let HASH_FAST = (s, prev, data) => ((prev << 8) + (prev >> 8) + (data << 4)) & s.hash_mask;\nlet HASH = HASH_ZLIB;\n\n/* =========================================================================\n * Flush as much pending output as possible. All deflate() output goes\n * through this function so some applications may wish to modify it\n * to avoid allocating a large strm->output buffer and copying into it.\n * (See also read_buf()).\n */\nconst flush_pending = (strm) => {\n  const s = strm.state;\n\n  //_tr_flush_bits(s);\n  let len = s.pending;\n  if (len > strm.avail_out) {\n    len = strm.avail_out;\n  }\n  if (len === 0) { return; }\n\n  strm.output.set(s.pending_buf.subarray(s.pending_out, s.pending_out + len), strm.next_out);\n  strm.next_out += len;\n  s.pending_out += len;\n  strm.total_out += len;\n  strm.avail_out -= len;\n  s.pending -= len;\n  if (s.pending === 0) {\n    s.pending_out = 0;\n  }\n};\n\n\nconst flush_block_only = (s, last) => {\n  _tr_flush_block$1(s, (s.block_start >= 0 ? s.block_start : -1), s.strstart - s.block_start, last);\n  s.block_start = s.strstart;\n  flush_pending(s.strm);\n};\n\n\nconst put_byte = (s, b) => {\n  s.pending_buf[s.pending++] = b;\n};\n\n\n/* =========================================================================\n * Put a short in the pending buffer. The 16-bit value is put in MSB order.\n * IN assertion: the stream state is correct and there is enough room in\n * pending_buf.\n */\nconst putShortMSB = (s, b) => {\n\n  //  put_byte(s, (Byte)(b >> 8));\n//  put_byte(s, (Byte)(b & 0xff));\n  s.pending_buf[s.pending++] = (b >>> 8) & 0xff;\n  s.pending_buf[s.pending++] = b & 0xff;\n};\n\n\n/* ===========================================================================\n * Read a new buffer from the current input stream, update the adler32\n * and total number of bytes read.  All deflate() input goes through\n * this function so some applications may wish to modify it to avoid\n * allocating a large strm->input buffer and copying from it.\n * (See also flush_pending()).\n */\nconst read_buf = (strm, buf, start, size) => {\n\n  let len = strm.avail_in;\n\n  if (len > size) { len = size; }\n  if (len === 0) { return 0; }\n\n  strm.avail_in -= len;\n\n  // zmemcpy(buf, strm->next_in, len);\n  buf.set(strm.input.subarray(strm.next_in, strm.next_in + len), start);\n  if (strm.state.wrap === 1) {\n    strm.adler = adler32_1(strm.adler, buf, len, start);\n  }\n\n  else if (strm.state.wrap === 2) {\n    strm.adler = crc32_1(strm.adler, buf, len, start);\n  }\n\n  strm.next_in += len;\n  strm.total_in += len;\n\n  return len;\n};\n\n\n/* ===========================================================================\n * Set match_start to the longest match starting at the given string and\n * return its length. Matches shorter or equal to prev_length are discarded,\n * in which case the result is equal to prev_length and match_start is\n * garbage.\n * IN assertions: cur_match is the head of the hash chain for the current\n *   string (strstart) and its distance is <= MAX_DIST, and prev_length >= 1\n * OUT assertion: the match length is not greater than s->lookahead.\n */\nconst longest_match = (s, cur_match) => {\n\n  let chain_length = s.max_chain_length;      /* max hash chain length */\n  let scan = s.strstart; /* current string */\n  let match;                       /* matched string */\n  let len;                           /* length of current match */\n  let best_len = s.prev_length;              /* best match length so far */\n  let nice_match = s.nice_match;             /* stop if match long enough */\n  const limit = (s.strstart > (s.w_size - MIN_LOOKAHEAD)) ?\n      s.strstart - (s.w_size - MIN_LOOKAHEAD) : 0/*NIL*/;\n\n  const _win = s.window; // shortcut\n\n  const wmask = s.w_mask;\n  const prev  = s.prev;\n\n  /* Stop when cur_match becomes <= limit. To simplify the code,\n   * we prevent matches with the string of window index 0.\n   */\n\n  const strend = s.strstart + MAX_MATCH$1;\n  let scan_end1  = _win[scan + best_len - 1];\n  let scan_end   = _win[scan + best_len];\n\n  /* The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of 16.\n   * It is easy to get rid of this optimization if necessary.\n   */\n  // Assert(s->hash_bits >= 8 && MAX_MATCH == 258, \"Code too clever\");\n\n  /* Do not waste too much time if we already have a good match: */\n  if (s.prev_length >= s.good_match) {\n    chain_length >>= 2;\n  }\n  /* Do not look for matches beyond the end of the input. This is necessary\n   * to make deflate deterministic.\n   */\n  if (nice_match > s.lookahead) { nice_match = s.lookahead; }\n\n  // Assert((ulg)s->strstart <= s->window_size-MIN_LOOKAHEAD, \"need lookahead\");\n\n  do {\n    // Assert(cur_match < s->strstart, \"no future\");\n    match = cur_match;\n\n    /* Skip to next match if the match length cannot increase\n     * or if the match length is less than 2.  Note that the checks below\n     * for insufficient lookahead only occur occasionally for performance\n     * reasons.  Therefore uninitialized memory will be accessed, and\n     * conditional jumps will be made that depend on those values.\n     * However the length of the match is limited to the lookahead, so\n     * the output of deflate is not affected by the uninitialized values.\n     */\n\n    if (_win[match + best_len]     !== scan_end  ||\n        _win[match + best_len - 1] !== scan_end1 ||\n        _win[match]                !== _win[scan] ||\n        _win[++match]              !== _win[scan + 1]) {\n      continue;\n    }\n\n    /* The check at best_len-1 can be removed because it will be made\n     * again later. (This heuristic is not always a win.)\n     * It is not necessary to compare scan[2] and match[2] since they\n     * are always equal when the other bytes match, given that\n     * the hash keys are equal and that HASH_BITS >= 8.\n     */\n    scan += 2;\n    match++;\n    // Assert(*scan == *match, \"match[2]?\");\n\n    /* We check for insufficient lookahead only every 8th comparison;\n     * the 256th check will be made at strstart+258.\n     */\n    do {\n      /*jshint noempty:false*/\n    } while (_win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             scan < strend);\n\n    // Assert(scan <= s->window+(unsigned)(s->window_size-1), \"wild scan\");\n\n    len = MAX_MATCH$1 - (strend - scan);\n    scan = strend - MAX_MATCH$1;\n\n    if (len > best_len) {\n      s.match_start = cur_match;\n      best_len = len;\n      if (len >= nice_match) {\n        break;\n      }\n      scan_end1  = _win[scan + best_len - 1];\n      scan_end   = _win[scan + best_len];\n    }\n  } while ((cur_match = prev[cur_match & wmask]) > limit && --chain_length !== 0);\n\n  if (best_len <= s.lookahead) {\n    return best_len;\n  }\n  return s.lookahead;\n};\n\n\n/* ===========================================================================\n * Fill the window when the lookahead becomes insufficient.\n * Updates strstart and lookahead.\n *\n * IN assertion: lookahead < MIN_LOOKAHEAD\n * OUT assertions: strstart <= window_size-MIN_LOOKAHEAD\n *    At least one byte has been read, or avail_in == 0; reads are\n *    performed for at least two bytes (required for the zip translate_eol\n *    option -- not supported here).\n */\nconst fill_window = (s) => {\n\n  const _w_size = s.w_size;\n  let p, n, m, more, str;\n\n  //Assert(s->lookahead < MIN_LOOKAHEAD, \"already enough lookahead\");\n\n  do {\n    more = s.window_size - s.lookahead - s.strstart;\n\n    // JS ints have 32 bit, block below not needed\n    /* Deal with !@#$% 64K limit: */\n    //if (sizeof(int) <= 2) {\n    //    if (more == 0 && s->strstart == 0 && s->lookahead == 0) {\n    //        more = wsize;\n    //\n    //  } else if (more == (unsigned)(-1)) {\n    //        /* Very unlikely, but possible on 16 bit machine if\n    //         * strstart == 0 && lookahead == 1 (input done a byte at time)\n    //         */\n    //        more--;\n    //    }\n    //}\n\n\n    /* If the window is almost full and there is insufficient lookahead,\n     * move the upper half to the lower one to make room in the upper half.\n     */\n    if (s.strstart >= _w_size + (_w_size - MIN_LOOKAHEAD)) {\n\n      s.window.set(s.window.subarray(_w_size, _w_size + _w_size), 0);\n      s.match_start -= _w_size;\n      s.strstart -= _w_size;\n      /* we now have strstart >= MAX_DIST */\n      s.block_start -= _w_size;\n\n      /* Slide the hash table (could be avoided with 32 bit values\n       at the expense of memory usage). We slide even when level == 0\n       to keep the hash table consistent if we switch back to level > 0\n       later. (Using level 0 permanently is not an optimal usage of\n       zlib, so we don't care about this pathological case.)\n       */\n\n      n = s.hash_size;\n      p = n;\n\n      do {\n        m = s.head[--p];\n        s.head[p] = (m >= _w_size ? m - _w_size : 0);\n      } while (--n);\n\n      n = _w_size;\n      p = n;\n\n      do {\n        m = s.prev[--p];\n        s.prev[p] = (m >= _w_size ? m - _w_size : 0);\n        /* If n is not on any hash chain, prev[n] is garbage but\n         * its value will never be used.\n         */\n      } while (--n);\n\n      more += _w_size;\n    }\n    if (s.strm.avail_in === 0) {\n      break;\n    }\n\n    /* If there was no sliding:\n     *    strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&\n     *    more == window_size - lookahead - strstart\n     * => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)\n     * => more >= window_size - 2*WSIZE + 2\n     * In the BIG_MEM or MMAP case (not yet supported),\n     *   window_size == input_size + MIN_LOOKAHEAD  &&\n     *   strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.\n     * Otherwise, window_size == 2*WSIZE so more >= 2.\n     * If there was sliding, more >= WSIZE. So in all cases, more >= 2.\n     */\n    //Assert(more >= 2, \"more < 2\");\n    n = read_buf(s.strm, s.window, s.strstart + s.lookahead, more);\n    s.lookahead += n;\n\n    /* Initialize the hash value now that we have some input: */\n    if (s.lookahead + s.insert >= MIN_MATCH$1) {\n      str = s.strstart - s.insert;\n      s.ins_h = s.window[str];\n\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + 1]); */\n      s.ins_h = HASH(s, s.ins_h, s.window[str + 1]);\n//#if MIN_MATCH != 3\n//        Call update_hash() MIN_MATCH-3 more times\n//#endif\n      while (s.insert) {\n        /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n        s.ins_h = HASH(s, s.ins_h, s.window[str + MIN_MATCH$1 - 1]);\n\n        s.prev[str & s.w_mask] = s.head[s.ins_h];\n        s.head[s.ins_h] = str;\n        str++;\n        s.insert--;\n        if (s.lookahead + s.insert < MIN_MATCH$1) {\n          break;\n        }\n      }\n    }\n    /* If the whole input has less than MIN_MATCH bytes, ins_h is garbage,\n     * but this is not important since only literal bytes will be emitted.\n     */\n\n  } while (s.lookahead < MIN_LOOKAHEAD && s.strm.avail_in !== 0);\n\n  /* If the WIN_INIT bytes after the end of the current data have never been\n   * written, then zero those bytes in order to avoid memory check reports of\n   * the use of uninitialized (or uninitialised as Julian writes) bytes by\n   * the longest match routines.  Update the high water mark for the next\n   * time through here.  WIN_INIT is set to MAX_MATCH since the longest match\n   * routines allow scanning to strstart + MAX_MATCH, ignoring lookahead.\n   */\n//  if (s.high_water < s.window_size) {\n//    const curr = s.strstart + s.lookahead;\n//    let init = 0;\n//\n//    if (s.high_water < curr) {\n//      /* Previous high water mark below current data -- zero WIN_INIT\n//       * bytes or up to end of window, whichever is less.\n//       */\n//      init = s.window_size - curr;\n//      if (init > WIN_INIT)\n//        init = WIN_INIT;\n//      zmemzero(s->window + curr, (unsigned)init);\n//      s->high_water = curr + init;\n//    }\n//    else if (s->high_water < (ulg)curr + WIN_INIT) {\n//      /* High water mark at or above current data, but below current data\n//       * plus WIN_INIT -- zero out to current data plus WIN_INIT, or up\n//       * to end of window, whichever is less.\n//       */\n//      init = (ulg)curr + WIN_INIT - s->high_water;\n//      if (init > s->window_size - s->high_water)\n//        init = s->window_size - s->high_water;\n//      zmemzero(s->window + s->high_water, (unsigned)init);\n//      s->high_water += init;\n//    }\n//  }\n//\n//  Assert((ulg)s->strstart <= s->window_size - MIN_LOOKAHEAD,\n//    \"not enough room for search\");\n};\n\n/* ===========================================================================\n * Copy without compression as much as possible from the input stream, return\n * the current block state.\n * This function does not insert new strings in the dictionary since\n * uncompressible data is probably not useful. This function is used\n * only for the level=0 compression option.\n * NOTE: this function should be optimized to avoid extra copying from\n * window to pending_buf.\n */\nconst deflate_stored = (s, flush) => {\n\n  /* Stored blocks are limited to 0xffff bytes, pending_buf is limited\n   * to pending_buf_size, and each stored block has a 5 byte header:\n   */\n  let max_block_size = 0xffff;\n\n  if (max_block_size > s.pending_buf_size - 5) {\n    max_block_size = s.pending_buf_size - 5;\n  }\n\n  /* Copy as much as possible from input to output: */\n  for (;;) {\n    /* Fill the window as much as possible: */\n    if (s.lookahead <= 1) {\n\n      //Assert(s->strstart < s->w_size+MAX_DIST(s) ||\n      //  s->block_start >= (long)s->w_size, \"slide too late\");\n//      if (!(s.strstart < s.w_size + (s.w_size - MIN_LOOKAHEAD) ||\n//        s.block_start >= s.w_size)) {\n//        throw  new Error(\"slide too late\");\n//      }\n\n      fill_window(s);\n      if (s.lookahead === 0 && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n\n      if (s.lookahead === 0) {\n        break;\n      }\n      /* flush the current block */\n    }\n    //Assert(s->block_start >= 0L, \"block gone\");\n//    if (s.block_start < 0) throw new Error(\"block gone\");\n\n    s.strstart += s.lookahead;\n    s.lookahead = 0;\n\n    /* Emit a stored block if pending_buf will be full: */\n    const max_start = s.block_start + max_block_size;\n\n    if (s.strstart === 0 || s.strstart >= max_start) {\n      /* strstart == 0 is possible when wraparound on 16-bit machine */\n      s.lookahead = s.strstart - max_start;\n      s.strstart = max_start;\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n\n\n    }\n    /* Flush if we may have to slide, otherwise block_start may become\n     * negative and the data will be gone:\n     */\n    if (s.strstart - s.block_start >= (s.w_size - MIN_LOOKAHEAD)) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n\n  s.insert = 0;\n\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n\n  if (s.strstart > s.block_start) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_NEED_MORE;\n};\n\n/* ===========================================================================\n * Compress as much as possible from the input stream, return the current\n * block state.\n * This function does not perform lazy evaluation of matches and inserts\n * new strings in the dictionary only for unmatched strings or for short\n * matches. It is used only for the fast compression options.\n */\nconst deflate_fast = (s, flush) => {\n\n  let hash_head;        /* head of the hash chain */\n  let bflush;           /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) {\n        break; /* flush the current block */\n      }\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH$1) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH$1 - 1]);\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     * At this point we have always match_length < MIN_MATCH\n     */\n    if (hash_head !== 0/*NIL*/ && ((s.strstart - hash_head) <= (s.w_size - MIN_LOOKAHEAD))) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n    }\n    if (s.match_length >= MIN_MATCH$1) {\n      // check_match(s, s.strstart, s.match_start, s.match_length); // for debug only\n\n      /*** _tr_tally_dist(s, s.strstart - s.match_start,\n                     s.match_length - MIN_MATCH, bflush); ***/\n      bflush = _tr_tally$1(s, s.strstart - s.match_start, s.match_length - MIN_MATCH$1);\n\n      s.lookahead -= s.match_length;\n\n      /* Insert new strings in the hash table only if the match length\n       * is not too large. This saves time but degrades compression.\n       */\n      if (s.match_length <= s.max_lazy_match/*max_insert_length*/ && s.lookahead >= MIN_MATCH$1) {\n        s.match_length--; /* string at strstart already in table */\n        do {\n          s.strstart++;\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH$1 - 1]);\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n          /* strstart never exceeds WSIZE-MAX_MATCH, so there are\n           * always MIN_MATCH bytes ahead.\n           */\n        } while (--s.match_length !== 0);\n        s.strstart++;\n      } else\n      {\n        s.strstart += s.match_length;\n        s.match_length = 0;\n        s.ins_h = s.window[s.strstart];\n        /* UPDATE_HASH(s, s.ins_h, s.window[s.strstart+1]); */\n        s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + 1]);\n\n//#if MIN_MATCH != 3\n//                Call UPDATE_HASH() MIN_MATCH-3 more times\n//#endif\n        /* If lookahead < MIN_MATCH, ins_h is garbage, but it does not\n         * matter since it will be recomputed at next deflate call.\n         */\n      }\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s.window[s.strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = _tr_tally$1(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = ((s.strstart < (MIN_MATCH$1 - 1)) ? s.strstart : MIN_MATCH$1 - 1);\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n};\n\n/* ===========================================================================\n * Same as above, but achieves better compression. We use a lazy\n * evaluation for matches: a match is finally adopted only if there is\n * no better match at the next window position.\n */\nconst deflate_slow = (s, flush) => {\n\n  let hash_head;          /* head of hash chain */\n  let bflush;              /* set if current block must be flushed */\n\n  let max_insert;\n\n  /* Process the input block. */\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH$1) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH$1 - 1]);\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     */\n    s.prev_length = s.match_length;\n    s.prev_match = s.match_start;\n    s.match_length = MIN_MATCH$1 - 1;\n\n    if (hash_head !== 0/*NIL*/ && s.prev_length < s.max_lazy_match &&\n        s.strstart - hash_head <= (s.w_size - MIN_LOOKAHEAD)/*MAX_DIST(s)*/) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n\n      if (s.match_length <= 5 &&\n         (s.strategy === Z_FILTERED || (s.match_length === MIN_MATCH$1 && s.strstart - s.match_start > 4096/*TOO_FAR*/))) {\n\n        /* If prev_match is also MIN_MATCH, match_start is garbage\n         * but we will ignore the current match anyway.\n         */\n        s.match_length = MIN_MATCH$1 - 1;\n      }\n    }\n    /* If there was a match at the previous step and the current\n     * match is not better, output the previous match:\n     */\n    if (s.prev_length >= MIN_MATCH$1 && s.match_length <= s.prev_length) {\n      max_insert = s.strstart + s.lookahead - MIN_MATCH$1;\n      /* Do not insert strings in hash table beyond this. */\n\n      //check_match(s, s.strstart-1, s.prev_match, s.prev_length);\n\n      /***_tr_tally_dist(s, s.strstart - 1 - s.prev_match,\n                     s.prev_length - MIN_MATCH, bflush);***/\n      bflush = _tr_tally$1(s, s.strstart - 1 - s.prev_match, s.prev_length - MIN_MATCH$1);\n      /* Insert in hash table all strings up to the end of the match.\n       * strstart-1 and strstart are already inserted. If there is not\n       * enough lookahead, the last two strings are not inserted in\n       * the hash table.\n       */\n      s.lookahead -= s.prev_length - 1;\n      s.prev_length -= 2;\n      do {\n        if (++s.strstart <= max_insert) {\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH$1 - 1]);\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n        }\n      } while (--s.prev_length !== 0);\n      s.match_available = 0;\n      s.match_length = MIN_MATCH$1 - 1;\n      s.strstart++;\n\n      if (bflush) {\n        /*** FLUSH_BLOCK(s, 0); ***/\n        flush_block_only(s, false);\n        if (s.strm.avail_out === 0) {\n          return BS_NEED_MORE;\n        }\n        /***/\n      }\n\n    } else if (s.match_available) {\n      /* If there was no match at the previous position, output a\n       * single literal. If there was a match but the current match\n       * is longer, truncate the previous match to a single literal.\n       */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n      /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n      bflush = _tr_tally$1(s, 0, s.window[s.strstart - 1]);\n\n      if (bflush) {\n        /*** FLUSH_BLOCK_ONLY(s, 0) ***/\n        flush_block_only(s, false);\n        /***/\n      }\n      s.strstart++;\n      s.lookahead--;\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n    } else {\n      /* There is no previous match to compare with, wait for\n       * the next step to decide.\n       */\n      s.match_available = 1;\n      s.strstart++;\n      s.lookahead--;\n    }\n  }\n  //Assert (flush != Z_NO_FLUSH, \"no flush?\");\n  if (s.match_available) {\n    //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n    /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n    bflush = _tr_tally$1(s, 0, s.window[s.strstart - 1]);\n\n    s.match_available = 0;\n  }\n  s.insert = s.strstart < MIN_MATCH$1 - 1 ? s.strstart : MIN_MATCH$1 - 1;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_BLOCK_DONE;\n};\n\n\n/* ===========================================================================\n * For Z_RLE, simply look for runs of bytes, generate matches only of distance\n * one.  Do not maintain a hash table.  (It will be regenerated if this run of\n * deflate switches away from Z_RLE.)\n */\nconst deflate_rle = (s, flush) => {\n\n  let bflush;            /* set if current block must be flushed */\n  let prev;              /* byte at distance one to match */\n  let scan, strend;      /* scan goes up to strend for length of run */\n\n  const _win = s.window;\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the longest run, plus one for the unrolled loop.\n     */\n    if (s.lookahead <= MAX_MATCH$1) {\n      fill_window(s);\n      if (s.lookahead <= MAX_MATCH$1 && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* See how many times the previous byte repeats */\n    s.match_length = 0;\n    if (s.lookahead >= MIN_MATCH$1 && s.strstart > 0) {\n      scan = s.strstart - 1;\n      prev = _win[scan];\n      if (prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan]) {\n        strend = s.strstart + MAX_MATCH$1;\n        do {\n          /*jshint noempty:false*/\n        } while (prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 scan < strend);\n        s.match_length = MAX_MATCH$1 - (strend - scan);\n        if (s.match_length > s.lookahead) {\n          s.match_length = s.lookahead;\n        }\n      }\n      //Assert(scan <= s->window+(uInt)(s->window_size-1), \"wild scan\");\n    }\n\n    /* Emit match if have run of MIN_MATCH or longer, else emit literal */\n    if (s.match_length >= MIN_MATCH$1) {\n      //check_match(s, s.strstart, s.strstart - 1, s.match_length);\n\n      /*** _tr_tally_dist(s, 1, s.match_length - MIN_MATCH, bflush); ***/\n      bflush = _tr_tally$1(s, 1, s.match_length - MIN_MATCH$1);\n\n      s.lookahead -= s.match_length;\n      s.strstart += s.match_length;\n      s.match_length = 0;\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = _tr_tally$1(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n};\n\n/* ===========================================================================\n * For Z_HUFFMAN_ONLY, do not look for matches.  Do not maintain a hash table.\n * (It will be regenerated if this run of deflate switches away from Huffman.)\n */\nconst deflate_huff = (s, flush) => {\n\n  let bflush;             /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we have a literal to write. */\n    if (s.lookahead === 0) {\n      fill_window(s);\n      if (s.lookahead === 0) {\n        if (flush === Z_NO_FLUSH) {\n          return BS_NEED_MORE;\n        }\n        break;      /* flush the current block */\n      }\n    }\n\n    /* Output a literal byte */\n    s.match_length = 0;\n    //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n    /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n    bflush = _tr_tally$1(s, 0, s.window[s.strstart]);\n    s.lookahead--;\n    s.strstart++;\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n};\n\n/* Values for max_lazy_match, good_match and max_chain_length, depending on\n * the desired pack level (0..9). The values given below have been tuned to\n * exclude worst case performance for pathological files. Better values may be\n * found for specific files.\n */\nfunction Config(good_length, max_lazy, nice_length, max_chain, func) {\n\n  this.good_length = good_length;\n  this.max_lazy = max_lazy;\n  this.nice_length = nice_length;\n  this.max_chain = max_chain;\n  this.func = func;\n}\n\nconst configuration_table = [\n  /*      good lazy nice chain */\n  new Config(0, 0, 0, 0, deflate_stored),          /* 0 store only */\n  new Config(4, 4, 8, 4, deflate_fast),            /* 1 max speed, no lazy matches */\n  new Config(4, 5, 16, 8, deflate_fast),           /* 2 */\n  new Config(4, 6, 32, 32, deflate_fast),          /* 3 */\n\n  new Config(4, 4, 16, 16, deflate_slow),          /* 4 lazy matches */\n  new Config(8, 16, 32, 32, deflate_slow),         /* 5 */\n  new Config(8, 16, 128, 128, deflate_slow),       /* 6 */\n  new Config(8, 32, 128, 256, deflate_slow),       /* 7 */\n  new Config(32, 128, 258, 1024, deflate_slow),    /* 8 */\n  new Config(32, 258, 258, 4096, deflate_slow)     /* 9 max compression */\n];\n\n\n/* ===========================================================================\n * Initialize the \"longest match\" routines for a new zlib stream\n */\nconst lm_init = (s) => {\n\n  s.window_size = 2 * s.w_size;\n\n  /*** CLEAR_HASH(s); ***/\n  zero$1(s.head); // Fill with NIL (= 0);\n\n  /* Set the default configuration parameters:\n   */\n  s.max_lazy_match = configuration_table[s.level].max_lazy;\n  s.good_match = configuration_table[s.level].good_length;\n  s.nice_match = configuration_table[s.level].nice_length;\n  s.max_chain_length = configuration_table[s.level].max_chain;\n\n  s.strstart = 0;\n  s.block_start = 0;\n  s.lookahead = 0;\n  s.insert = 0;\n  s.match_length = s.prev_length = MIN_MATCH$1 - 1;\n  s.match_available = 0;\n  s.ins_h = 0;\n};\n\n\nfunction DeflateState() {\n  this.strm = null;            /* pointer back to this zlib stream */\n  this.status = 0;            /* as the name implies */\n  this.pending_buf = null;      /* output still pending */\n  this.pending_buf_size = 0;  /* size of pending_buf */\n  this.pending_out = 0;       /* next pending byte to output to the stream */\n  this.pending = 0;           /* nb of bytes in the pending buffer */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.gzhead = null;         /* gzip header information to write */\n  this.gzindex = 0;           /* where in extra, name, or comment */\n  this.method = Z_DEFLATED; /* can only be DEFLATED */\n  this.last_flush = -1;   /* value of flush param for previous deflate call */\n\n  this.w_size = 0;  /* LZ77 window size (32K by default) */\n  this.w_bits = 0;  /* log2(w_size)  (8..16) */\n  this.w_mask = 0;  /* w_size - 1 */\n\n  this.window = null;\n  /* Sliding window. Input bytes are read into the second half of the window,\n   * and move to the first half later to keep a dictionary of at least wSize\n   * bytes. With this organization, matches are limited to a distance of\n   * wSize-MAX_MATCH bytes, but this ensures that IO is always\n   * performed with a length multiple of the block size.\n   */\n\n  this.window_size = 0;\n  /* Actual size of window: 2*wSize, except when the user input buffer\n   * is directly used as sliding window.\n   */\n\n  this.prev = null;\n  /* Link to older string with same hash index. To limit the size of this\n   * array to 64K, this link is maintained only for the last 32K strings.\n   * An index in this array is thus a window index modulo 32K.\n   */\n\n  this.head = null;   /* Heads of the hash chains or NIL. */\n\n  this.ins_h = 0;       /* hash index of string to be inserted */\n  this.hash_size = 0;   /* number of elements in hash table */\n  this.hash_bits = 0;   /* log2(hash_size) */\n  this.hash_mask = 0;   /* hash_size-1 */\n\n  this.hash_shift = 0;\n  /* Number of bits by which ins_h must be shifted at each input\n   * step. It must be such that after MIN_MATCH steps, the oldest\n   * byte no longer takes part in the hash key, that is:\n   *   hash_shift * MIN_MATCH >= hash_bits\n   */\n\n  this.block_start = 0;\n  /* Window position at the beginning of the current output block. Gets\n   * negative when the window is moved backwards.\n   */\n\n  this.match_length = 0;      /* length of best match */\n  this.prev_match = 0;        /* previous match */\n  this.match_available = 0;   /* set if previous match exists */\n  this.strstart = 0;          /* start of string to insert */\n  this.match_start = 0;       /* start of matching string */\n  this.lookahead = 0;         /* number of valid bytes ahead in window */\n\n  this.prev_length = 0;\n  /* Length of the best match at previous step. Matches not greater than this\n   * are discarded. This is used in the lazy match evaluation.\n   */\n\n  this.max_chain_length = 0;\n  /* To speed up deflation, hash chains are never searched beyond this\n   * length.  A higher limit improves compression ratio but degrades the\n   * speed.\n   */\n\n  this.max_lazy_match = 0;\n  /* Attempt to find a better match only when the current match is strictly\n   * smaller than this value. This mechanism is used only for compression\n   * levels >= 4.\n   */\n  // That's alias to max_lazy_match, don't use directly\n  //this.max_insert_length = 0;\n  /* Insert new strings in the hash table only if the match length is not\n   * greater than this length. This saves time but degrades compression.\n   * max_insert_length is used only for compression levels <= 3.\n   */\n\n  this.level = 0;     /* compression level (1..9) */\n  this.strategy = 0;  /* favor or force Huffman coding*/\n\n  this.good_match = 0;\n  /* Use a faster search when the previous match is longer than this */\n\n  this.nice_match = 0; /* Stop searching when current match exceeds this */\n\n              /* used by trees.c: */\n\n  /* Didn't use ct_data typedef below to suppress compiler warning */\n\n  // struct ct_data_s dyn_ltree[HEAP_SIZE];   /* literal and length tree */\n  // struct ct_data_s dyn_dtree[2*D_CODES+1]; /* distance tree */\n  // struct ct_data_s bl_tree[2*BL_CODES+1];  /* Huffman tree for bit lengths */\n\n  // Use flat array of DOUBLE size, with interleaved fata,\n  // because JS does not support effective\n  this.dyn_ltree  = new Uint16Array(HEAP_SIZE$1 * 2);\n  this.dyn_dtree  = new Uint16Array((2 * D_CODES$1 + 1) * 2);\n  this.bl_tree    = new Uint16Array((2 * BL_CODES$1 + 1) * 2);\n  zero$1(this.dyn_ltree);\n  zero$1(this.dyn_dtree);\n  zero$1(this.bl_tree);\n\n  this.l_desc   = null;         /* desc. for literal tree */\n  this.d_desc   = null;         /* desc. for distance tree */\n  this.bl_desc  = null;         /* desc. for bit length tree */\n\n  //ush bl_count[MAX_BITS+1];\n  this.bl_count = new Uint16Array(MAX_BITS$1 + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  //int heap[2*L_CODES+1];      /* heap used to build the Huffman trees */\n  this.heap = new Uint16Array(2 * L_CODES$1 + 1);  /* heap used to build the Huffman trees */\n  zero$1(this.heap);\n\n  this.heap_len = 0;               /* number of elements in the heap */\n  this.heap_max = 0;               /* element of largest frequency */\n  /* The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.\n   * The same heap array is used to build all trees.\n   */\n\n  this.depth = new Uint16Array(2 * L_CODES$1 + 1); //uch depth[2*L_CODES+1];\n  zero$1(this.depth);\n  /* Depth of each subtree used as tie breaker for trees of equal frequency\n   */\n\n  this.l_buf = 0;          /* buffer index for literals or lengths */\n\n  this.lit_bufsize = 0;\n  /* Size of match buffer for literals/lengths.  There are 4 reasons for\n   * limiting lit_bufsize to 64K:\n   *   - frequencies can be kept in 16 bit counters\n   *   - if compression is not successful for the first block, all input\n   *     data is still in the window so we can still emit a stored block even\n   *     when input comes from standard input.  (This can also be done for\n   *     all blocks if lit_bufsize is not greater than 32K.)\n   *   - if compression is not successful for a file smaller than 64K, we can\n   *     even emit a stored file instead of a stored block (saving 5 bytes).\n   *     This is applicable only for zip (not gzip or zlib).\n   *   - creating new Huffman trees less frequently may not provide fast\n   *     adaptation to changes in the input data statistics. (Take for\n   *     example a binary file with poorly compressible code followed by\n   *     a highly compressible string table.) Smaller buffer sizes give\n   *     fast adaptation but have of course the overhead of transmitting\n   *     trees more frequently.\n   *   - I can't count above 4\n   */\n\n  this.last_lit = 0;      /* running index in l_buf */\n\n  this.d_buf = 0;\n  /* Buffer index for distances. To simplify the code, d_buf and l_buf have\n   * the same number of elements. To use different lengths, an extra flag\n   * array would be necessary.\n   */\n\n  this.opt_len = 0;       /* bit length of current block with optimal trees */\n  this.static_len = 0;    /* bit length of current block with static trees */\n  this.matches = 0;       /* number of string matches in current block */\n  this.insert = 0;        /* bytes at end of window left to insert */\n\n\n  this.bi_buf = 0;\n  /* Output buffer. bits are inserted starting at the bottom (least\n   * significant bits).\n   */\n  this.bi_valid = 0;\n  /* Number of valid bits in bi_buf.  All bits above the last valid bit\n   * are always zero.\n   */\n\n  // Used for window memory init. We safely ignore it for JS. That makes\n  // sense only for pointers and memory check tools.\n  //this.high_water = 0;\n  /* High water mark offset in window for initialized bytes -- bytes above\n   * this are set to zero in order to avoid memory check warnings when\n   * longest match routines access bytes past the input.  This is then\n   * updated to the new high water mark.\n   */\n}\n\n\nconst deflateResetKeep = (strm) => {\n\n  if (!strm || !strm.state) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n  strm.total_in = strm.total_out = 0;\n  strm.data_type = Z_UNKNOWN$1;\n\n  const s = strm.state;\n  s.pending = 0;\n  s.pending_out = 0;\n\n  if (s.wrap < 0) {\n    s.wrap = -s.wrap;\n    /* was made negative by deflate(..., Z_FINISH); */\n  }\n  s.status = (s.wrap ? INIT_STATE : BUSY_STATE);\n  strm.adler = (s.wrap === 2) ?\n    0  // crc32(0, Z_NULL, 0)\n  :\n    1; // adler32(0, Z_NULL, 0)\n  s.last_flush = Z_NO_FLUSH;\n  _tr_init$1(s);\n  return Z_OK;\n};\n\n\nconst deflateReset = (strm) => {\n\n  const ret = deflateResetKeep(strm);\n  if (ret === Z_OK) {\n    lm_init(strm.state);\n  }\n  return ret;\n};\n\n\nconst deflateSetHeader = (strm, head) => {\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  if (strm.state.wrap !== 2) { return Z_STREAM_ERROR; }\n  strm.state.gzhead = head;\n  return Z_OK;\n};\n\n\nconst deflateInit2 = (strm, level, method, windowBits, memLevel, strategy) => {\n\n  if (!strm) { // === Z_NULL\n    return Z_STREAM_ERROR;\n  }\n  let wrap = 1;\n\n  if (level === Z_DEFAULT_COMPRESSION) {\n    level = 6;\n  }\n\n  if (windowBits < 0) { /* suppress zlib wrapper */\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n\n  else if (windowBits > 15) {\n    wrap = 2;           /* write gzip wrapper instead */\n    windowBits -= 16;\n  }\n\n\n  if (memLevel < 1 || memLevel > MAX_MEM_LEVEL || method !== Z_DEFLATED ||\n    windowBits < 8 || windowBits > 15 || level < 0 || level > 9 ||\n    strategy < 0 || strategy > Z_FIXED$1) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n\n  if (windowBits === 8) {\n    windowBits = 9;\n  }\n  /* until 256-byte window bug fixed */\n\n  const s = new DeflateState();\n\n  strm.state = s;\n  s.strm = strm;\n\n  s.wrap = wrap;\n  s.gzhead = null;\n  s.w_bits = windowBits;\n  s.w_size = 1 << s.w_bits;\n  s.w_mask = s.w_size - 1;\n\n  s.hash_bits = memLevel + 7;\n  s.hash_size = 1 << s.hash_bits;\n  s.hash_mask = s.hash_size - 1;\n  s.hash_shift = ~~((s.hash_bits + MIN_MATCH$1 - 1) / MIN_MATCH$1);\n\n  s.window = new Uint8Array(s.w_size * 2);\n  s.head = new Uint16Array(s.hash_size);\n  s.prev = new Uint16Array(s.w_size);\n\n  // Don't need mem init magic for JS.\n  //s.high_water = 0;  /* nothing written to s->window yet */\n\n  s.lit_bufsize = 1 << (memLevel + 6); /* 16K elements by default */\n\n  s.pending_buf_size = s.lit_bufsize * 4;\n\n  //overlay = (ushf *) ZALLOC(strm, s->lit_bufsize, sizeof(ush)+2);\n  //s->pending_buf = (uchf *) overlay;\n  s.pending_buf = new Uint8Array(s.pending_buf_size);\n\n  // It is offset from `s.pending_buf` (size is `s.lit_bufsize * 2`)\n  //s->d_buf = overlay + s->lit_bufsize/sizeof(ush);\n  s.d_buf = 1 * s.lit_bufsize;\n\n  //s->l_buf = s->pending_buf + (1+sizeof(ush))*s->lit_bufsize;\n  s.l_buf = (1 + 2) * s.lit_bufsize;\n\n  s.level = level;\n  s.strategy = strategy;\n  s.method = method;\n\n  return deflateReset(strm);\n};\n\nconst deflateInit = (strm, level) => {\n\n  return deflateInit2(strm, level, Z_DEFLATED, MAX_WBITS, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY);\n};\n\n\nconst deflate = (strm, flush) => {\n\n  let beg, val; // for gzip header write only\n\n  if (!strm || !strm.state ||\n    flush > Z_BLOCK || flush < 0) {\n    return strm ? err(strm, Z_STREAM_ERROR) : Z_STREAM_ERROR;\n  }\n\n  const s = strm.state;\n\n  if (!strm.output ||\n      (!strm.input && strm.avail_in !== 0) ||\n      (s.status === FINISH_STATE && flush !== Z_FINISH)) {\n    return err(strm, (strm.avail_out === 0) ? Z_BUF_ERROR : Z_STREAM_ERROR);\n  }\n\n  s.strm = strm; /* just in case */\n  const old_flush = s.last_flush;\n  s.last_flush = flush;\n\n  /* Write the header */\n  if (s.status === INIT_STATE) {\n\n    if (s.wrap === 2) { // GZIP header\n      strm.adler = 0;  //crc32(0L, Z_NULL, 0);\n      put_byte(s, 31);\n      put_byte(s, 139);\n      put_byte(s, 8);\n      if (!s.gzhead) { // s->gzhead == Z_NULL\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, OS_CODE);\n        s.status = BUSY_STATE;\n      }\n      else {\n        put_byte(s, (s.gzhead.text ? 1 : 0) +\n                    (s.gzhead.hcrc ? 2 : 0) +\n                    (!s.gzhead.extra ? 0 : 4) +\n                    (!s.gzhead.name ? 0 : 8) +\n                    (!s.gzhead.comment ? 0 : 16)\n        );\n        put_byte(s, s.gzhead.time & 0xff);\n        put_byte(s, (s.gzhead.time >> 8) & 0xff);\n        put_byte(s, (s.gzhead.time >> 16) & 0xff);\n        put_byte(s, (s.gzhead.time >> 24) & 0xff);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, s.gzhead.os & 0xff);\n        if (s.gzhead.extra && s.gzhead.extra.length) {\n          put_byte(s, s.gzhead.extra.length & 0xff);\n          put_byte(s, (s.gzhead.extra.length >> 8) & 0xff);\n        }\n        if (s.gzhead.hcrc) {\n          strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending, 0);\n        }\n        s.gzindex = 0;\n        s.status = EXTRA_STATE;\n      }\n    }\n    else // DEFLATE header\n    {\n      let header = (Z_DEFLATED + ((s.w_bits - 8) << 4)) << 8;\n      let level_flags = -1;\n\n      if (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2) {\n        level_flags = 0;\n      } else if (s.level < 6) {\n        level_flags = 1;\n      } else if (s.level === 6) {\n        level_flags = 2;\n      } else {\n        level_flags = 3;\n      }\n      header |= (level_flags << 6);\n      if (s.strstart !== 0) { header |= PRESET_DICT; }\n      header += 31 - (header % 31);\n\n      s.status = BUSY_STATE;\n      putShortMSB(s, header);\n\n      /* Save the adler32 of the preset dictionary: */\n      if (s.strstart !== 0) {\n        putShortMSB(s, strm.adler >>> 16);\n        putShortMSB(s, strm.adler & 0xffff);\n      }\n      strm.adler = 1; // adler32(0L, Z_NULL, 0);\n    }\n  }\n\n//#ifdef GZIP\n  if (s.status === EXTRA_STATE) {\n    if (s.gzhead.extra/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n\n      while (s.gzindex < (s.gzhead.extra.length & 0xffff)) {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            break;\n          }\n        }\n        put_byte(s, s.gzhead.extra[s.gzindex] & 0xff);\n        s.gzindex++;\n      }\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (s.gzindex === s.gzhead.extra.length) {\n        s.gzindex = 0;\n        s.status = NAME_STATE;\n      }\n    }\n    else {\n      s.status = NAME_STATE;\n    }\n  }\n  if (s.status === NAME_STATE) {\n    if (s.gzhead.name/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.name.length) {\n          val = s.gzhead.name.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.gzindex = 0;\n        s.status = COMMENT_STATE;\n      }\n    }\n    else {\n      s.status = COMMENT_STATE;\n    }\n  }\n  if (s.status === COMMENT_STATE) {\n    if (s.gzhead.comment/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.comment.length) {\n          val = s.gzhead.comment.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.status = HCRC_STATE;\n      }\n    }\n    else {\n      s.status = HCRC_STATE;\n    }\n  }\n  if (s.status === HCRC_STATE) {\n    if (s.gzhead.hcrc) {\n      if (s.pending + 2 > s.pending_buf_size) {\n        flush_pending(strm);\n      }\n      if (s.pending + 2 <= s.pending_buf_size) {\n        put_byte(s, strm.adler & 0xff);\n        put_byte(s, (strm.adler >> 8) & 0xff);\n        strm.adler = 0; //crc32(0L, Z_NULL, 0);\n        s.status = BUSY_STATE;\n      }\n    }\n    else {\n      s.status = BUSY_STATE;\n    }\n  }\n//#endif\n\n  /* Flush as much pending output as possible */\n  if (s.pending !== 0) {\n    flush_pending(strm);\n    if (strm.avail_out === 0) {\n      /* Since avail_out is 0, deflate will be called again with\n       * more output space, but possibly with both pending and\n       * avail_in equal to zero. There won't be anything to do,\n       * but this is not an error situation so make sure we\n       * return OK instead of BUF_ERROR at next call of deflate:\n       */\n      s.last_flush = -1;\n      return Z_OK;\n    }\n\n    /* Make sure there is something to do and avoid duplicate consecutive\n     * flushes. For repeated and useless calls with Z_FINISH, we keep\n     * returning Z_STREAM_END instead of Z_BUF_ERROR.\n     */\n  } else if (strm.avail_in === 0 && rank(flush) <= rank(old_flush) &&\n    flush !== Z_FINISH) {\n    return err(strm, Z_BUF_ERROR);\n  }\n\n  /* User must not provide more input after the first FINISH: */\n  if (s.status === FINISH_STATE && strm.avail_in !== 0) {\n    return err(strm, Z_BUF_ERROR);\n  }\n\n  /* Start a new block or continue the current one.\n   */\n  if (strm.avail_in !== 0 || s.lookahead !== 0 ||\n    (flush !== Z_NO_FLUSH && s.status !== FINISH_STATE)) {\n    let bstate = (s.strategy === Z_HUFFMAN_ONLY) ? deflate_huff(s, flush) :\n      (s.strategy === Z_RLE ? deflate_rle(s, flush) :\n        configuration_table[s.level].func(s, flush));\n\n    if (bstate === BS_FINISH_STARTED || bstate === BS_FINISH_DONE) {\n      s.status = FINISH_STATE;\n    }\n    if (bstate === BS_NEED_MORE || bstate === BS_FINISH_STARTED) {\n      if (strm.avail_out === 0) {\n        s.last_flush = -1;\n        /* avoid BUF_ERROR next call, see above */\n      }\n      return Z_OK;\n      /* If flush != Z_NO_FLUSH && avail_out == 0, the next call\n       * of deflate should use the same flush parameter to make sure\n       * that the flush is complete. So we don't have to output an\n       * empty block here, this will be done at next call. This also\n       * ensures that for a very small output buffer, we emit at most\n       * one empty block.\n       */\n    }\n    if (bstate === BS_BLOCK_DONE) {\n      if (flush === Z_PARTIAL_FLUSH) {\n        _tr_align$1(s);\n      }\n      else if (flush !== Z_BLOCK) { /* FULL_FLUSH or SYNC_FLUSH */\n\n        _tr_stored_block$1(s, 0, 0, false);\n        /* For a full flush, this empty block will be recognized\n         * as a special marker by inflate_sync().\n         */\n        if (flush === Z_FULL_FLUSH) {\n          /*** CLEAR_HASH(s); ***/             /* forget history */\n          zero$1(s.head); // Fill with NIL (= 0);\n\n          if (s.lookahead === 0) {\n            s.strstart = 0;\n            s.block_start = 0;\n            s.insert = 0;\n          }\n        }\n      }\n      flush_pending(strm);\n      if (strm.avail_out === 0) {\n        s.last_flush = -1; /* avoid BUF_ERROR at next call, see above */\n        return Z_OK;\n      }\n    }\n  }\n  //Assert(strm->avail_out > 0, \"bug2\");\n  //if (strm.avail_out <= 0) { throw new Error(\"bug2\");}\n\n  if (flush !== Z_FINISH) { return Z_OK; }\n  if (s.wrap <= 0) { return Z_STREAM_END; }\n\n  /* Write the trailer */\n  if (s.wrap === 2) {\n    put_byte(s, strm.adler & 0xff);\n    put_byte(s, (strm.adler >> 8) & 0xff);\n    put_byte(s, (strm.adler >> 16) & 0xff);\n    put_byte(s, (strm.adler >> 24) & 0xff);\n    put_byte(s, strm.total_in & 0xff);\n    put_byte(s, (strm.total_in >> 8) & 0xff);\n    put_byte(s, (strm.total_in >> 16) & 0xff);\n    put_byte(s, (strm.total_in >> 24) & 0xff);\n  }\n  else\n  {\n    putShortMSB(s, strm.adler >>> 16);\n    putShortMSB(s, strm.adler & 0xffff);\n  }\n\n  flush_pending(strm);\n  /* If avail_out is zero, the application will call deflate again\n   * to flush the rest.\n   */\n  if (s.wrap > 0) { s.wrap = -s.wrap; }\n  /* write the trailer only once! */\n  return s.pending !== 0 ? Z_OK : Z_STREAM_END;\n};\n\n\nconst deflateEnd = (strm) => {\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  const status = strm.state.status;\n  if (status !== INIT_STATE &&\n    status !== EXTRA_STATE &&\n    status !== NAME_STATE &&\n    status !== COMMENT_STATE &&\n    status !== HCRC_STATE &&\n    status !== BUSY_STATE &&\n    status !== FINISH_STATE\n  ) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n  strm.state = null;\n\n  return status === BUSY_STATE ? err(strm, Z_DATA_ERROR) : Z_OK;\n};\n\n\n/* =========================================================================\n * Initializes the compression dictionary from the given byte\n * sequence without producing any compressed output.\n */\nconst deflateSetDictionary = (strm, dictionary) => {\n\n  let dictLength = dictionary.length;\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  const s = strm.state;\n  const wrap = s.wrap;\n\n  if (wrap === 2 || (wrap === 1 && s.status !== INIT_STATE) || s.lookahead) {\n    return Z_STREAM_ERROR;\n  }\n\n  /* when using zlib wrappers, compute Adler-32 for provided dictionary */\n  if (wrap === 1) {\n    /* adler32(strm->adler, dictionary, dictLength); */\n    strm.adler = adler32_1(strm.adler, dictionary, dictLength, 0);\n  }\n\n  s.wrap = 0;   /* avoid computing Adler-32 in read_buf */\n\n  /* if dictionary would fill window, just replace the history */\n  if (dictLength >= s.w_size) {\n    if (wrap === 0) {            /* already empty otherwise */\n      /*** CLEAR_HASH(s); ***/\n      zero$1(s.head); // Fill with NIL (= 0);\n      s.strstart = 0;\n      s.block_start = 0;\n      s.insert = 0;\n    }\n    /* use the tail */\n    // dictionary = dictionary.slice(dictLength - s.w_size);\n    let tmpDict = new Uint8Array(s.w_size);\n    tmpDict.set(dictionary.subarray(dictLength - s.w_size, dictLength), 0);\n    dictionary = tmpDict;\n    dictLength = s.w_size;\n  }\n  /* insert dictionary into window and hash */\n  const avail = strm.avail_in;\n  const next = strm.next_in;\n  const input = strm.input;\n  strm.avail_in = dictLength;\n  strm.next_in = 0;\n  strm.input = dictionary;\n  fill_window(s);\n  while (s.lookahead >= MIN_MATCH$1) {\n    let str = s.strstart;\n    let n = s.lookahead - (MIN_MATCH$1 - 1);\n    do {\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n      s.ins_h = HASH(s, s.ins_h, s.window[str + MIN_MATCH$1 - 1]);\n\n      s.prev[str & s.w_mask] = s.head[s.ins_h];\n\n      s.head[s.ins_h] = str;\n      str++;\n    } while (--n);\n    s.strstart = str;\n    s.lookahead = MIN_MATCH$1 - 1;\n    fill_window(s);\n  }\n  s.strstart += s.lookahead;\n  s.block_start = s.strstart;\n  s.insert = s.lookahead;\n  s.lookahead = 0;\n  s.match_length = s.prev_length = MIN_MATCH$1 - 1;\n  s.match_available = 0;\n  strm.next_in = next;\n  strm.input = input;\n  strm.avail_in = avail;\n  s.wrap = wrap;\n  return Z_OK;\n};\n\n\nvar deflateInit_1 = deflateInit;\nvar deflateInit2_1 = deflateInit2;\nvar deflateReset_1 = deflateReset;\nvar deflateResetKeep_1 = deflateResetKeep;\nvar deflateSetHeader_1 = deflateSetHeader;\nvar deflate_2 = deflate;\nvar deflateEnd_1 = deflateEnd;\nvar deflateSetDictionary_1 = deflateSetDictionary;\nvar deflateInfo = 'pako deflate (from Nodeca project)';\n\n/* Not implemented\nmodule.exports.deflateBound = deflateBound;\nmodule.exports.deflateCopy = deflateCopy;\nmodule.exports.deflateParams = deflateParams;\nmodule.exports.deflatePending = deflatePending;\nmodule.exports.deflatePrime = deflatePrime;\nmodule.exports.deflateTune = deflateTune;\n*/\n\nvar deflate_1 = {\n\tdeflateInit: deflateInit_1,\n\tdeflateInit2: deflateInit2_1,\n\tdeflateReset: deflateReset_1,\n\tdeflateResetKeep: deflateResetKeep_1,\n\tdeflateSetHeader: deflateSetHeader_1,\n\tdeflate: deflate_2,\n\tdeflateEnd: deflateEnd_1,\n\tdeflateSetDictionary: deflateSetDictionary_1,\n\tdeflateInfo: deflateInfo\n};\n\nconst _has = (obj, key) => {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n};\n\nvar assign = function (obj /*from1, from2, from3, ...*/) {\n  const sources = Array.prototype.slice.call(arguments, 1);\n  while (sources.length) {\n    const source = sources.shift();\n    if (!source) { continue; }\n\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be non-object');\n    }\n\n    for (const p in source) {\n      if (_has(source, p)) {\n        obj[p] = source[p];\n      }\n    }\n  }\n\n  return obj;\n};\n\n\n// Join array of chunks to single array.\nvar flattenChunks = (chunks) => {\n  // calculate data length\n  let len = 0;\n\n  for (let i = 0, l = chunks.length; i < l; i++) {\n    len += chunks[i].length;\n  }\n\n  // join chunks\n  const result = new Uint8Array(len);\n\n  for (let i = 0, pos = 0, l = chunks.length; i < l; i++) {\n    let chunk = chunks[i];\n    result.set(chunk, pos);\n    pos += chunk.length;\n  }\n\n  return result;\n};\n\nvar common = {\n\tassign: assign,\n\tflattenChunks: flattenChunks\n};\n\n// String encode/decode helpers\n\n\n// Quick check if we can use fast array to bin string conversion\n//\n// - apply(Array) can fail on Android 2.2\n// - apply(Uint8Array) can fail on iOS 5.1 Safari\n//\nlet STR_APPLY_UIA_OK = true;\n\ntry { String.fromCharCode.apply(null, new Uint8Array(1)); } catch (__) { STR_APPLY_UIA_OK = false; }\n\n\n// Table with utf8 lengths (calculated by first byte of sequence)\n// Note, that 5 & 6-byte values and some 4-byte values can not be represented in JS,\n// because max possible codepoint is 0x10ffff\nconst _utf8len = new Uint8Array(256);\nfor (let q = 0; q < 256; q++) {\n  _utf8len[q] = (q >= 252 ? 6 : q >= 248 ? 5 : q >= 240 ? 4 : q >= 224 ? 3 : q >= 192 ? 2 : 1);\n}\n_utf8len[254] = _utf8len[254] = 1; // Invalid sequence start\n\n\n// convert string to array (typed, when possible)\nvar string2buf = (str) => {\n  let buf, c, c2, m_pos, i, str_len = str.length, buf_len = 0;\n\n  // count binary size\n  for (m_pos = 0; m_pos < str_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;\n  }\n\n  // allocate buffer\n  buf = new Uint8Array(buf_len);\n\n  // convert\n  for (i = 0, m_pos = 0; i < buf_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    if (c < 0x80) {\n      /* one byte */\n      buf[i++] = c;\n    } else if (c < 0x800) {\n      /* two bytes */\n      buf[i++] = 0xC0 | (c >>> 6);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else if (c < 0x10000) {\n      /* three bytes */\n      buf[i++] = 0xE0 | (c >>> 12);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else {\n      /* four bytes */\n      buf[i++] = 0xf0 | (c >>> 18);\n      buf[i++] = 0x80 | (c >>> 12 & 0x3f);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    }\n  }\n\n  return buf;\n};\n\n// Helper\nconst buf2binstring = (buf, len) => {\n  // On Chrome, the arguments in a function call that are allowed is `65534`.\n  // If the length of the buffer is smaller than that, we can use this optimization,\n  // otherwise we will take a slower path.\n  if (len < 65534) {\n    if (buf.subarray && STR_APPLY_UIA_OK) {\n      return String.fromCharCode.apply(null, buf.length === len ? buf : buf.subarray(0, len));\n    }\n  }\n\n  let result = '';\n  for (let i = 0; i < len; i++) {\n    result += String.fromCharCode(buf[i]);\n  }\n  return result;\n};\n\n\n// convert array to string\nvar buf2string = (buf, max) => {\n  let i, out;\n  const len = max || buf.length;\n\n  // Reserve max possible length (2 words per char)\n  // NB: by unknown reasons, Array is significantly faster for\n  //     String.fromCharCode.apply than Uint16Array.\n  const utf16buf = new Array(len * 2);\n\n  for (out = 0, i = 0; i < len;) {\n    let c = buf[i++];\n    // quick process ascii\n    if (c < 0x80) { utf16buf[out++] = c; continue; }\n\n    let c_len = _utf8len[c];\n    // skip 5 & 6 byte codes\n    if (c_len > 4) { utf16buf[out++] = 0xfffd; i += c_len - 1; continue; }\n\n    // apply mask on first byte\n    c &= c_len === 2 ? 0x1f : c_len === 3 ? 0x0f : 0x07;\n    // join the rest\n    while (c_len > 1 && i < len) {\n      c = (c << 6) | (buf[i++] & 0x3f);\n      c_len--;\n    }\n\n    // terminated by end of string?\n    if (c_len > 1) { utf16buf[out++] = 0xfffd; continue; }\n\n    if (c < 0x10000) {\n      utf16buf[out++] = c;\n    } else {\n      c -= 0x10000;\n      utf16buf[out++] = 0xd800 | ((c >> 10) & 0x3ff);\n      utf16buf[out++] = 0xdc00 | (c & 0x3ff);\n    }\n  }\n\n  return buf2binstring(utf16buf, out);\n};\n\n\n// Calculate max possible position in utf8 buffer,\n// that will not break sequence. If that's not possible\n// - (very small limits) return max size as is.\n//\n// buf[] - utf8 bytes array\n// max   - length limit (mandatory);\nvar utf8border = (buf, max) => {\n\n  max = max || buf.length;\n  if (max > buf.length) { max = buf.length; }\n\n  // go back from last position, until start of sequence found\n  let pos = max - 1;\n  while (pos >= 0 && (buf[pos] & 0xC0) === 0x80) { pos--; }\n\n  // Very small and broken sequence,\n  // return max, because we should return something anyway.\n  if (pos < 0) { return max; }\n\n  // If we came to start of buffer - that means buffer is too small,\n  // return max too.\n  if (pos === 0) { return max; }\n\n  return (pos + _utf8len[buf[pos]] > max) ? pos : max;\n};\n\nvar strings = {\n\tstring2buf: string2buf,\n\tbuf2string: buf2string,\n\tutf8border: utf8border\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction ZStream() {\n  /* next input byte */\n  this.input = null; // JS specific, because we have no pointers\n  this.next_in = 0;\n  /* number of bytes available at input */\n  this.avail_in = 0;\n  /* total number of input bytes read so far */\n  this.total_in = 0;\n  /* next output byte should be put there */\n  this.output = null; // JS specific, because we have no pointers\n  this.next_out = 0;\n  /* remaining free space at output */\n  this.avail_out = 0;\n  /* total number of bytes output so far */\n  this.total_out = 0;\n  /* last error message, NULL if no error */\n  this.msg = ''/*Z_NULL*/;\n  /* not visible by applications */\n  this.state = null;\n  /* best guess about the data type: binary or text */\n  this.data_type = 2/*Z_UNKNOWN*/;\n  /* adler32 value of the uncompressed data */\n  this.adler = 0;\n}\n\nvar zstream = ZStream;\n\nconst toString = Object.prototype.toString;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_NO_FLUSH: Z_NO_FLUSH$1, Z_SYNC_FLUSH, Z_FULL_FLUSH: Z_FULL_FLUSH$1, Z_FINISH: Z_FINISH$1,\n  Z_OK: Z_OK$1, Z_STREAM_END: Z_STREAM_END$1,\n  Z_DEFAULT_COMPRESSION: Z_DEFAULT_COMPRESSION$1,\n  Z_DEFAULT_STRATEGY: Z_DEFAULT_STRATEGY$1,\n  Z_DEFLATED: Z_DEFLATED$1\n} = constants;\n\n/* ===========================================================================*/\n\n\n/**\n * class Deflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[deflate]],\n * [[deflateRaw]] and [[gzip]].\n **/\n\n/* internal\n * Deflate.chunks -> Array\n *\n * Chunks of output data, if [[Deflate#onData]] not overridden.\n **/\n\n/**\n * Deflate.result -> Uint8Array\n *\n * Compressed result, generated by default [[Deflate#onData]]\n * and [[Deflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Deflate#push]] with `Z_FINISH` / `true` param).\n **/\n\n/**\n * Deflate.err -> Number\n *\n * Error code after deflate finished. 0 (Z_OK) on success.\n * You will not need it in real life, because deflate errors\n * are possible only on wrong options or bad `onData` / `onEnd`\n * custom handlers.\n **/\n\n/**\n * Deflate.msg -> String\n *\n * Error message, if [[Deflate.err]] != 0\n **/\n\n\n/**\n * new Deflate(options)\n * - options (Object): zlib deflate options.\n *\n * Creates new deflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `level`\n * - `windowBits`\n * - `memLevel`\n * - `strategy`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw deflate\n * - `gzip` (Boolean) - create gzip wrapper\n * - `header` (Object) - custom header for gzip\n *   - `text` (Boolean) - true if compressed data believed to be text\n *   - `time` (Number) - modification time, unix timestamp\n *   - `os` (Number) - operation system code\n *   - `extra` (Array) - array of bytes with extra data (max 65536)\n *   - `name` (String) - file name (binary string)\n *   - `comment` (String) - comment (binary string)\n *   - `hcrc` (Boolean) - true if header crc should be added\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako')\n *   , chunk1 = new Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = new Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * const deflate = new pako.Deflate({ level: 3});\n *\n * deflate.push(chunk1, false);\n * deflate.push(chunk2, true);  // true -> last chunk\n *\n * if (deflate.err) { throw new Error(deflate.err); }\n *\n * console.log(deflate.result);\n * ```\n **/\nfunction Deflate(options) {\n  this.options = common.assign({\n    level: Z_DEFAULT_COMPRESSION$1,\n    method: Z_DEFLATED$1,\n    chunkSize: 16384,\n    windowBits: 15,\n    memLevel: 8,\n    strategy: Z_DEFAULT_STRATEGY$1\n  }, options || {});\n\n  let opt = this.options;\n\n  if (opt.raw && (opt.windowBits > 0)) {\n    opt.windowBits = -opt.windowBits;\n  }\n\n  else if (opt.gzip && (opt.windowBits > 0) && (opt.windowBits < 16)) {\n    opt.windowBits += 16;\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm = new zstream();\n  this.strm.avail_out = 0;\n\n  let status = deflate_1.deflateInit2(\n    this.strm,\n    opt.level,\n    opt.method,\n    opt.windowBits,\n    opt.memLevel,\n    opt.strategy\n  );\n\n  if (status !== Z_OK$1) {\n    throw new Error(messages[status]);\n  }\n\n  if (opt.header) {\n    deflate_1.deflateSetHeader(this.strm, opt.header);\n  }\n\n  if (opt.dictionary) {\n    let dict;\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      // If we need to compress text, change encoding to utf8.\n      dict = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      dict = new Uint8Array(opt.dictionary);\n    } else {\n      dict = opt.dictionary;\n    }\n\n    status = deflate_1.deflateSetDictionary(this.strm, dict);\n\n    if (status !== Z_OK$1) {\n      throw new Error(messages[status]);\n    }\n\n    this._dict_set = true;\n  }\n}\n\n/**\n * Deflate#push(data[, flush_mode]) -> Boolean\n * - data (Uint8Array|ArrayBuffer|String): input data. Strings will be\n *   converted to utf8 byte sequence.\n * - flush_mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n *\n * Sends input data to deflate pipe, generating [[Deflate#onData]] calls with\n * new compressed chunks. Returns `true` on success. The last data block must\n * have `flush_mode` Z_FINISH (or `true`). That will flush internal pending\n * buffers and call [[Deflate#onEnd]].\n *\n * On fail call [[Deflate#onEnd]] with error code and return false.\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nDeflate.prototype.push = function (data, flush_mode) {\n  const strm = this.strm;\n  const chunkSize = this.options.chunkSize;\n  let status, _flush_mode;\n\n  if (this.ended) { return false; }\n\n  if (flush_mode === ~~flush_mode) _flush_mode = flush_mode;\n  else _flush_mode = flush_mode === true ? Z_FINISH$1 : Z_NO_FLUSH$1;\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // If we need to compress text, change encoding to utf8.\n    strm.input = strings.string2buf(data);\n  } else if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  for (;;) {\n    if (strm.avail_out === 0) {\n      strm.output = new Uint8Array(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n\n    // Make sure avail_out > 6 to avoid repeating markers\n    if ((_flush_mode === Z_SYNC_FLUSH || _flush_mode === Z_FULL_FLUSH$1) && strm.avail_out <= 6) {\n      this.onData(strm.output.subarray(0, strm.next_out));\n      strm.avail_out = 0;\n      continue;\n    }\n\n    status = deflate_1.deflate(strm, _flush_mode);\n\n    // Ended => flush and finish\n    if (status === Z_STREAM_END$1) {\n      if (strm.next_out > 0) {\n        this.onData(strm.output.subarray(0, strm.next_out));\n      }\n      status = deflate_1.deflateEnd(this.strm);\n      this.onEnd(status);\n      this.ended = true;\n      return status === Z_OK$1;\n    }\n\n    // Flush if out buffer full\n    if (strm.avail_out === 0) {\n      this.onData(strm.output);\n      continue;\n    }\n\n    // Flush if requested and has data\n    if (_flush_mode > 0 && strm.next_out > 0) {\n      this.onData(strm.output.subarray(0, strm.next_out));\n      strm.avail_out = 0;\n      continue;\n    }\n\n    if (strm.avail_in === 0) break;\n  }\n\n  return true;\n};\n\n\n/**\n * Deflate#onData(chunk) -> Void\n * - chunk (Uint8Array): output data.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nDeflate.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Deflate#onEnd(status) -> Void\n * - status (Number): deflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called once after you tell deflate that the input stream is\n * complete (Z_FINISH). By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nDeflate.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === Z_OK$1) {\n    this.result = common.flattenChunks(this.chunks);\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * deflate(data[, options]) -> Uint8Array\n * - data (Uint8Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * Compress `data` with deflate algorithm and `options`.\n *\n * Supported options are:\n *\n * - level\n * - windowBits\n * - memLevel\n * - strategy\n * - dictionary\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako')\n * const data = new Uint8Array([1,2,3,4,5,6,7,8,9]);\n *\n * console.log(pako.deflate(data));\n * ```\n **/\nfunction deflate$1(input, options) {\n  const deflator = new Deflate(options);\n\n  deflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (deflator.err) { throw deflator.msg || messages[deflator.err]; }\n\n  return deflator.result;\n}\n\n\n/**\n * deflateRaw(data[, options]) -> Uint8Array\n * - data (Uint8Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction deflateRaw(input, options) {\n  options = options || {};\n  options.raw = true;\n  return deflate$1(input, options);\n}\n\n\n/**\n * gzip(data[, options]) -> Uint8Array\n * - data (Uint8Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but create gzip wrapper instead of\n * deflate one.\n **/\nfunction gzip(input, options) {\n  options = options || {};\n  options.gzip = true;\n  return deflate$1(input, options);\n}\n\n\nvar Deflate_1 = Deflate;\nvar deflate_2$1 = deflate$1;\nvar deflateRaw_1 = deflateRaw;\nvar gzip_1 = gzip;\nvar constants$1 = constants;\n\nvar deflate_1$1 = {\n\tDeflate: Deflate_1,\n\tdeflate: deflate_2$1,\n\tdeflateRaw: deflateRaw_1,\n\tgzip: gzip_1,\n\tconstants: constants$1\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// See state defs from inflate.js\nconst BAD = 30;       /* got a data error -- remain here until reset */\nconst TYPE = 12;      /* i: waiting for type bits, including last-flag bit */\n\n/*\n   Decode literal, length, and distance codes and write out the resulting\n   literal and match bytes until either not enough input or output is\n   available, an end-of-block is encountered, or a data error is encountered.\n   When large enough input and output buffers are supplied to inflate(), for\n   example, a 16K input buffer and a 64K output buffer, more than 95% of the\n   inflate execution time is spent in this routine.\n\n   Entry assumptions:\n\n        state.mode === LEN\n        strm.avail_in >= 6\n        strm.avail_out >= 258\n        start >= strm.avail_out\n        state.bits < 8\n\n   On return, state.mode is one of:\n\n        LEN -- ran out of enough output space or enough available input\n        TYPE -- reached end of block code, inflate() to interpret next block\n        BAD -- error in block data\n\n   Notes:\n\n    - The maximum input bits used by a length/distance pair is 15 bits for the\n      length code, 5 bits for the length extra, 15 bits for the distance code,\n      and 13 bits for the distance extra.  This totals 48 bits, or six bytes.\n      Therefore if strm.avail_in >= 6, then there is enough input to avoid\n      checking for available input while decoding.\n\n    - The maximum bytes that a single length/distance pair can output is 258\n      bytes, which is the maximum length that can be coded.  inflate_fast()\n      requires strm.avail_out >= 258 for each loop to avoid checking for\n      output space.\n */\nvar inffast = function inflate_fast(strm, start) {\n  let _in;                    /* local strm.input */\n  let last;                   /* have enough input while in < last */\n  let _out;                   /* local strm.output */\n  let beg;                    /* inflate()'s initial strm.output */\n  let end;                    /* while out < end, enough space available */\n//#ifdef INFLATE_STRICT\n  let dmax;                   /* maximum distance from zlib header */\n//#endif\n  let wsize;                  /* window size or zero if not using window */\n  let whave;                  /* valid bytes in the window */\n  let wnext;                  /* window write index */\n  // Use `s_window` instead `window`, avoid conflict with instrumentation tools\n  let s_window;               /* allocated sliding window, if wsize != 0 */\n  let hold;                   /* local strm.hold */\n  let bits;                   /* local strm.bits */\n  let lcode;                  /* local strm.lencode */\n  let dcode;                  /* local strm.distcode */\n  let lmask;                  /* mask for first level of length codes */\n  let dmask;                  /* mask for first level of distance codes */\n  let here;                   /* retrieved table entry */\n  let op;                     /* code bits, operation, extra bits, or */\n                              /*  window position, window bytes to copy */\n  let len;                    /* match length, unused bytes */\n  let dist;                   /* match distance */\n  let from;                   /* where to copy match from */\n  let from_source;\n\n\n  let input, output; // JS specific, because we have no pointers\n\n  /* copy state to local variables */\n  const state = strm.state;\n  //here = state.here;\n  _in = strm.next_in;\n  input = strm.input;\n  last = _in + (strm.avail_in - 5);\n  _out = strm.next_out;\n  output = strm.output;\n  beg = _out - (start - strm.avail_out);\n  end = _out + (strm.avail_out - 257);\n//#ifdef INFLATE_STRICT\n  dmax = state.dmax;\n//#endif\n  wsize = state.wsize;\n  whave = state.whave;\n  wnext = state.wnext;\n  s_window = state.window;\n  hold = state.hold;\n  bits = state.bits;\n  lcode = state.lencode;\n  dcode = state.distcode;\n  lmask = (1 << state.lenbits) - 1;\n  dmask = (1 << state.distbits) - 1;\n\n\n  /* decode literals and length/distances until end-of-block or not enough\n     input data or output space */\n\n  top:\n  do {\n    if (bits < 15) {\n      hold += input[_in++] << bits;\n      bits += 8;\n      hold += input[_in++] << bits;\n      bits += 8;\n    }\n\n    here = lcode[hold & lmask];\n\n    dolen:\n    for (;;) { // Goto emulation\n      op = here >>> 24/*here.bits*/;\n      hold >>>= op;\n      bits -= op;\n      op = (here >>> 16) & 0xff/*here.op*/;\n      if (op === 0) {                          /* literal */\n        //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n        //        \"inflate:         literal '%c'\\n\" :\n        //        \"inflate:         literal 0x%02x\\n\", here.val));\n        output[_out++] = here & 0xffff/*here.val*/;\n      }\n      else if (op & 16) {                     /* length base */\n        len = here & 0xffff/*here.val*/;\n        op &= 15;                           /* number of extra bits */\n        if (op) {\n          if (bits < op) {\n            hold += input[_in++] << bits;\n            bits += 8;\n          }\n          len += hold & ((1 << op) - 1);\n          hold >>>= op;\n          bits -= op;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", len));\n        if (bits < 15) {\n          hold += input[_in++] << bits;\n          bits += 8;\n          hold += input[_in++] << bits;\n          bits += 8;\n        }\n        here = dcode[hold & dmask];\n\n        dodist:\n        for (;;) { // goto emulation\n          op = here >>> 24/*here.bits*/;\n          hold >>>= op;\n          bits -= op;\n          op = (here >>> 16) & 0xff/*here.op*/;\n\n          if (op & 16) {                      /* distance base */\n            dist = here & 0xffff/*here.val*/;\n            op &= 15;                       /* number of extra bits */\n            if (bits < op) {\n              hold += input[_in++] << bits;\n              bits += 8;\n              if (bits < op) {\n                hold += input[_in++] << bits;\n                bits += 8;\n              }\n            }\n            dist += hold & ((1 << op) - 1);\n//#ifdef INFLATE_STRICT\n            if (dist > dmax) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break top;\n            }\n//#endif\n            hold >>>= op;\n            bits -= op;\n            //Tracevv((stderr, \"inflate:         distance %u\\n\", dist));\n            op = _out - beg;                /* max distance in output */\n            if (dist > op) {                /* see if copy from window */\n              op = dist - op;               /* distance back in window */\n              if (op > whave) {\n                if (state.sane) {\n                  strm.msg = 'invalid distance too far back';\n                  state.mode = BAD;\n                  break top;\n                }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//                if (len <= op - whave) {\n//                  do {\n//                    output[_out++] = 0;\n//                  } while (--len);\n//                  continue top;\n//                }\n//                len -= op - whave;\n//                do {\n//                  output[_out++] = 0;\n//                } while (--op > whave);\n//                if (op === 0) {\n//                  from = _out - dist;\n//                  do {\n//                    output[_out++] = output[from++];\n//                  } while (--len);\n//                  continue top;\n//                }\n//#endif\n              }\n              from = 0; // window index\n              from_source = s_window;\n              if (wnext === 0) {           /* very common case */\n                from += wsize - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              else if (wnext < op) {      /* wrap around window */\n                from += wsize + wnext - op;\n                op -= wnext;\n                if (op < len) {         /* some from end of window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = 0;\n                  if (wnext < len) {  /* some from start of window */\n                    op = wnext;\n                    len -= op;\n                    do {\n                      output[_out++] = s_window[from++];\n                    } while (--op);\n                    from = _out - dist;      /* rest from output */\n                    from_source = output;\n                  }\n                }\n              }\n              else {                      /* contiguous in window */\n                from += wnext - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              while (len > 2) {\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                len -= 3;\n              }\n              if (len) {\n                output[_out++] = from_source[from++];\n                if (len > 1) {\n                  output[_out++] = from_source[from++];\n                }\n              }\n            }\n            else {\n              from = _out - dist;          /* copy direct from output */\n              do {                        /* minimum length is three */\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                len -= 3;\n              } while (len > 2);\n              if (len) {\n                output[_out++] = output[from++];\n                if (len > 1) {\n                  output[_out++] = output[from++];\n                }\n              }\n            }\n          }\n          else if ((op & 64) === 0) {          /* 2nd level distance code */\n            here = dcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n            continue dodist;\n          }\n          else {\n            strm.msg = 'invalid distance code';\n            state.mode = BAD;\n            break top;\n          }\n\n          break; // need to emulate goto via \"continue\"\n        }\n      }\n      else if ((op & 64) === 0) {              /* 2nd level length code */\n        here = lcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n        continue dolen;\n      }\n      else if (op & 32) {                     /* end-of-block */\n        //Tracevv((stderr, \"inflate:         end of block\\n\"));\n        state.mode = TYPE;\n        break top;\n      }\n      else {\n        strm.msg = 'invalid literal/length code';\n        state.mode = BAD;\n        break top;\n      }\n\n      break; // need to emulate goto via \"continue\"\n    }\n  } while (_in < last && _out < end);\n\n  /* return unused bytes (on entry, bits < 8, so in won't go too far back) */\n  len = bits >> 3;\n  _in -= len;\n  bits -= len << 3;\n  hold &= (1 << bits) - 1;\n\n  /* update state and return */\n  strm.next_in = _in;\n  strm.next_out = _out;\n  strm.avail_in = (_in < last ? 5 + (last - _in) : 5 - (_in - last));\n  strm.avail_out = (_out < end ? 257 + (end - _out) : 257 - (_out - end));\n  state.hold = hold;\n  state.bits = bits;\n  return;\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nconst MAXBITS = 15;\nconst ENOUGH_LENS = 852;\nconst ENOUGH_DISTS = 592;\n//const ENOUGH = (ENOUGH_LENS+ENOUGH_DISTS);\n\nconst CODES = 0;\nconst LENS = 1;\nconst DISTS = 2;\n\nconst lbase = new Uint16Array([ /* Length codes 257..285 base */\n  3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,\n  35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0\n]);\n\nconst lext = new Uint8Array([ /* Length codes 257..285 extra */\n  16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18,\n  19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78\n]);\n\nconst dbase = new Uint16Array([ /* Distance codes 0..29 base */\n  1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,\n  257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,\n  8193, 12289, 16385, 24577, 0, 0\n]);\n\nconst dext = new Uint8Array([ /* Distance codes 0..29 extra */\n  16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22,\n  23, 23, 24, 24, 25, 25, 26, 26, 27, 27,\n  28, 28, 29, 29, 64, 64\n]);\n\nconst inflate_table = (type, lens, lens_index, codes, table, table_index, work, opts) =>\n{\n  const bits = opts.bits;\n      //here = opts.here; /* table entry for duplication */\n\n  let len = 0;               /* a code's length in bits */\n  let sym = 0;               /* index of code symbols */\n  let min = 0, max = 0;          /* minimum and maximum code lengths */\n  let root = 0;              /* number of index bits for root table */\n  let curr = 0;              /* number of index bits for current table */\n  let drop = 0;              /* code bits to drop for sub-table */\n  let left = 0;                   /* number of prefix codes available */\n  let used = 0;              /* code entries in table used */\n  let huff = 0;              /* Huffman code */\n  let incr;              /* for incrementing code, index */\n  let fill;              /* index for replicating entries */\n  let low;               /* low bits for current root entry */\n  let mask;              /* mask for low root bits */\n  let next;             /* next available space in table */\n  let base = null;     /* base value table to use */\n  let base_index = 0;\n//  let shoextra;    /* extra bits table to use */\n  let end;                    /* use base and extra for symbol > end */\n  const count = new Uint16Array(MAXBITS + 1); //[MAXBITS+1];    /* number of codes of each length */\n  const offs = new Uint16Array(MAXBITS + 1); //[MAXBITS+1];     /* offsets in table for each length */\n  let extra = null;\n  let extra_index = 0;\n\n  let here_bits, here_op, here_val;\n\n  /*\n   Process a set of code lengths to create a canonical Huffman code.  The\n   code lengths are lens[0..codes-1].  Each length corresponds to the\n   symbols 0..codes-1.  The Huffman code is generated by first sorting the\n   symbols by length from short to long, and retaining the symbol order\n   for codes with equal lengths.  Then the code starts with all zero bits\n   for the first code of the shortest length, and the codes are integer\n   increments for the same length, and zeros are appended as the length\n   increases.  For the deflate format, these bits are stored backwards\n   from their more natural integer increment ordering, and so when the\n   decoding tables are built in the large loop below, the integer codes\n   are incremented backwards.\n\n   This routine assumes, but does not check, that all of the entries in\n   lens[] are in the range 0..MAXBITS.  The caller must assure this.\n   1..MAXBITS is interpreted as that code length.  zero means that that\n   symbol does not occur in this code.\n\n   The codes are sorted by computing a count of codes for each length,\n   creating from that a table of starting indices for each length in the\n   sorted table, and then entering the symbols in order in the sorted\n   table.  The sorted table is work[], with that space being provided by\n   the caller.\n\n   The length counts are used for other purposes as well, i.e. finding\n   the minimum and maximum length codes, determining if there are any\n   codes at all, checking for a valid set of lengths, and looking ahead\n   at length counts to determine sub-table sizes when building the\n   decoding tables.\n   */\n\n  /* accumulate lengths for codes (assumes lens[] all in 0..MAXBITS) */\n  for (len = 0; len <= MAXBITS; len++) {\n    count[len] = 0;\n  }\n  for (sym = 0; sym < codes; sym++) {\n    count[lens[lens_index + sym]]++;\n  }\n\n  /* bound code lengths, force root to be within code lengths */\n  root = bits;\n  for (max = MAXBITS; max >= 1; max--) {\n    if (count[max] !== 0) { break; }\n  }\n  if (root > max) {\n    root = max;\n  }\n  if (max === 0) {                     /* no symbols to code at all */\n    //table.op[opts.table_index] = 64;  //here.op = (var char)64;    /* invalid code marker */\n    //table.bits[opts.table_index] = 1;   //here.bits = (var char)1;\n    //table.val[opts.table_index++] = 0;   //here.val = (var short)0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n\n    //table.op[opts.table_index] = 64;\n    //table.bits[opts.table_index] = 1;\n    //table.val[opts.table_index++] = 0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n    opts.bits = 1;\n    return 0;     /* no symbols, but wait for decoding to report error */\n  }\n  for (min = 1; min < max; min++) {\n    if (count[min] !== 0) { break; }\n  }\n  if (root < min) {\n    root = min;\n  }\n\n  /* check for an over-subscribed or incomplete set of lengths */\n  left = 1;\n  for (len = 1; len <= MAXBITS; len++) {\n    left <<= 1;\n    left -= count[len];\n    if (left < 0) {\n      return -1;\n    }        /* over-subscribed */\n  }\n  if (left > 0 && (type === CODES || max !== 1)) {\n    return -1;                      /* incomplete set */\n  }\n\n  /* generate offsets into symbol table for each length for sorting */\n  offs[1] = 0;\n  for (len = 1; len < MAXBITS; len++) {\n    offs[len + 1] = offs[len] + count[len];\n  }\n\n  /* sort symbols by length, by symbol order within each length */\n  for (sym = 0; sym < codes; sym++) {\n    if (lens[lens_index + sym] !== 0) {\n      work[offs[lens[lens_index + sym]]++] = sym;\n    }\n  }\n\n  /*\n   Create and fill in decoding tables.  In this loop, the table being\n   filled is at next and has curr index bits.  The code being used is huff\n   with length len.  That code is converted to an index by dropping drop\n   bits off of the bottom.  For codes where len is less than drop + curr,\n   those top drop + curr - len bits are incremented through all values to\n   fill the table with replicated entries.\n\n   root is the number of index bits for the root table.  When len exceeds\n   root, sub-tables are created pointed to by the root entry with an index\n   of the low root bits of huff.  This is saved in low to check for when a\n   new sub-table should be started.  drop is zero when the root table is\n   being filled, and drop is root when sub-tables are being filled.\n\n   When a new sub-table is needed, it is necessary to look ahead in the\n   code lengths to determine what size sub-table is needed.  The length\n   counts are used for this, and so count[] is decremented as codes are\n   entered in the tables.\n\n   used keeps track of how many table entries have been allocated from the\n   provided *table space.  It is checked for LENS and DIST tables against\n   the constants ENOUGH_LENS and ENOUGH_DISTS to guard against changes in\n   the initial root table size constants.  See the comments in inftrees.h\n   for more information.\n\n   sym increments through all symbols, and the loop terminates when\n   all codes of length max, i.e. all codes, have been processed.  This\n   routine permits incomplete codes, so another loop after this one fills\n   in the rest of the decoding tables with invalid code markers.\n   */\n\n  /* set up for code type */\n  // poor man optimization - use if-else instead of switch,\n  // to avoid deopts in old v8\n  if (type === CODES) {\n    base = extra = work;    /* dummy value--not used */\n    end = 19;\n\n  } else if (type === LENS) {\n    base = lbase;\n    base_index -= 257;\n    extra = lext;\n    extra_index -= 257;\n    end = 256;\n\n  } else {                    /* DISTS */\n    base = dbase;\n    extra = dext;\n    end = -1;\n  }\n\n  /* initialize opts for loop */\n  huff = 0;                   /* starting code */\n  sym = 0;                    /* starting code symbol */\n  len = min;                  /* starting code length */\n  next = table_index;              /* current table to fill in */\n  curr = root;                /* current table index bits */\n  drop = 0;                   /* current bits to drop from code for index */\n  low = -1;                   /* trigger new sub-table when len > root */\n  used = 1 << root;          /* use root table entries */\n  mask = used - 1;            /* mask for comparing low */\n\n  /* check available table space */\n  if ((type === LENS && used > ENOUGH_LENS) ||\n    (type === DISTS && used > ENOUGH_DISTS)) {\n    return 1;\n  }\n\n  /* process all codes and make table entries */\n  for (;;) {\n    /* create table entry */\n    here_bits = len - drop;\n    if (work[sym] < end) {\n      here_op = 0;\n      here_val = work[sym];\n    }\n    else if (work[sym] > end) {\n      here_op = extra[extra_index + work[sym]];\n      here_val = base[base_index + work[sym]];\n    }\n    else {\n      here_op = 32 + 64;         /* end of block */\n      here_val = 0;\n    }\n\n    /* replicate for those indices with low len bits equal to huff */\n    incr = 1 << (len - drop);\n    fill = 1 << curr;\n    min = fill;                 /* save offset to next table */\n    do {\n      fill -= incr;\n      table[next + (huff >> drop) + fill] = (here_bits << 24) | (here_op << 16) | here_val |0;\n    } while (fill !== 0);\n\n    /* backwards increment the len-bit code huff */\n    incr = 1 << (len - 1);\n    while (huff & incr) {\n      incr >>= 1;\n    }\n    if (incr !== 0) {\n      huff &= incr - 1;\n      huff += incr;\n    } else {\n      huff = 0;\n    }\n\n    /* go to next symbol, update count, len */\n    sym++;\n    if (--count[len] === 0) {\n      if (len === max) { break; }\n      len = lens[lens_index + work[sym]];\n    }\n\n    /* create new sub-table if needed */\n    if (len > root && (huff & mask) !== low) {\n      /* if first time, transition to sub-tables */\n      if (drop === 0) {\n        drop = root;\n      }\n\n      /* increment past last table */\n      next += min;            /* here min is 1 << curr */\n\n      /* determine length of next table */\n      curr = len - drop;\n      left = 1 << curr;\n      while (curr + drop < max) {\n        left -= count[curr + drop];\n        if (left <= 0) { break; }\n        curr++;\n        left <<= 1;\n      }\n\n      /* check for enough space */\n      used += 1 << curr;\n      if ((type === LENS && used > ENOUGH_LENS) ||\n        (type === DISTS && used > ENOUGH_DISTS)) {\n        return 1;\n      }\n\n      /* point entry in root table to sub-table */\n      low = huff & mask;\n      /*table.op[low] = curr;\n      table.bits[low] = root;\n      table.val[low] = next - opts.table_index;*/\n      table[low] = (root << 24) | (curr << 16) | (next - table_index) |0;\n    }\n  }\n\n  /* fill in remaining table entry if code is incomplete (guaranteed to have\n   at most one remaining entry, since if the code is incomplete, the\n   maximum code length that was allowed to get this far is one bit) */\n  if (huff !== 0) {\n    //table.op[next + huff] = 64;            /* invalid code marker */\n    //table.bits[next + huff] = len - drop;\n    //table.val[next + huff] = 0;\n    table[next + huff] = ((len - drop) << 24) | (64 << 16) |0;\n  }\n\n  /* set return parameters */\n  //opts.table_index += used;\n  opts.bits = root;\n  return 0;\n};\n\n\nvar inftrees = inflate_table;\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n\n\n\n\n\nconst CODES$1 = 0;\nconst LENS$1 = 1;\nconst DISTS$1 = 2;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_FINISH: Z_FINISH$2, Z_BLOCK: Z_BLOCK$1, Z_TREES,\n  Z_OK: Z_OK$2, Z_STREAM_END: Z_STREAM_END$2, Z_NEED_DICT, Z_STREAM_ERROR: Z_STREAM_ERROR$1, Z_DATA_ERROR: Z_DATA_ERROR$1, Z_MEM_ERROR, Z_BUF_ERROR: Z_BUF_ERROR$1,\n  Z_DEFLATED: Z_DEFLATED$2\n} = constants;\n\n\n/* STATES ====================================================================*/\n/* ===========================================================================*/\n\n\nconst    HEAD = 1;       /* i: waiting for magic header */\nconst    FLAGS = 2;      /* i: waiting for method and flags (gzip) */\nconst    TIME = 3;       /* i: waiting for modification time (gzip) */\nconst    OS = 4;         /* i: waiting for extra flags and operating system (gzip) */\nconst    EXLEN = 5;      /* i: waiting for extra length (gzip) */\nconst    EXTRA = 6;      /* i: waiting for extra bytes (gzip) */\nconst    NAME = 7;       /* i: waiting for end of file name (gzip) */\nconst    COMMENT = 8;    /* i: waiting for end of comment (gzip) */\nconst    HCRC = 9;       /* i: waiting for header crc (gzip) */\nconst    DICTID = 10;    /* i: waiting for dictionary check value */\nconst    DICT = 11;      /* waiting for inflateSetDictionary() call */\nconst        TYPE$1 = 12;      /* i: waiting for type bits, including last-flag bit */\nconst        TYPEDO = 13;    /* i: same, but skip check to exit inflate on new block */\nconst        STORED = 14;    /* i: waiting for stored size (length and complement) */\nconst        COPY_ = 15;     /* i/o: same as COPY below, but only first time in */\nconst        COPY = 16;      /* i/o: waiting for input or output to copy stored block */\nconst        TABLE = 17;     /* i: waiting for dynamic block table lengths */\nconst        LENLENS = 18;   /* i: waiting for code length code lengths */\nconst        CODELENS = 19;  /* i: waiting for length/lit and distance code lengths */\nconst            LEN_ = 20;      /* i: same as LEN below, but only first time in */\nconst            LEN = 21;       /* i: waiting for length/lit/eob code */\nconst            LENEXT = 22;    /* i: waiting for length extra bits */\nconst            DIST = 23;      /* i: waiting for distance code */\nconst            DISTEXT = 24;   /* i: waiting for distance extra bits */\nconst            MATCH = 25;     /* o: waiting for output space to copy string */\nconst            LIT = 26;       /* o: waiting for output space to write literal */\nconst    CHECK = 27;     /* i: waiting for 32-bit check value */\nconst    LENGTH = 28;    /* i: waiting for 32-bit length (gzip) */\nconst    DONE = 29;      /* finished check, done -- remain here until reset */\nconst    BAD$1 = 30;       /* got a data error -- remain here until reset */\nconst    MEM = 31;       /* got an inflate() memory error -- remain here until reset */\nconst    SYNC = 32;      /* looking for synchronization bytes to restart inflate() */\n\n/* ===========================================================================*/\n\n\n\nconst ENOUGH_LENS$1 = 852;\nconst ENOUGH_DISTS$1 = 592;\n//const ENOUGH =  (ENOUGH_LENS+ENOUGH_DISTS);\n\nconst MAX_WBITS$1 = 15;\n/* 32K LZ77 window */\nconst DEF_WBITS = MAX_WBITS$1;\n\n\nconst zswap32 = (q) => {\n\n  return  (((q >>> 24) & 0xff) +\n          ((q >>> 8) & 0xff00) +\n          ((q & 0xff00) << 8) +\n          ((q & 0xff) << 24));\n};\n\n\nfunction InflateState() {\n  this.mode = 0;             /* current inflate mode */\n  this.last = false;          /* true if processing last block */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.havedict = false;      /* true if dictionary provided */\n  this.flags = 0;             /* gzip header method and flags (0 if zlib) */\n  this.dmax = 0;              /* zlib header max distance (INFLATE_STRICT) */\n  this.check = 0;             /* protected copy of check value */\n  this.total = 0;             /* protected copy of output count */\n  // TODO: may be {}\n  this.head = null;           /* where to save gzip header information */\n\n  /* sliding window */\n  this.wbits = 0;             /* log base 2 of requested window size */\n  this.wsize = 0;             /* window size or zero if not using window */\n  this.whave = 0;             /* valid bytes in the window */\n  this.wnext = 0;             /* window write index */\n  this.window = null;         /* allocated sliding window, if needed */\n\n  /* bit accumulator */\n  this.hold = 0;              /* input bit accumulator */\n  this.bits = 0;              /* number of bits in \"in\" */\n\n  /* for string and stored block copying */\n  this.length = 0;            /* literal or length of data to copy */\n  this.offset = 0;            /* distance back to copy string from */\n\n  /* for table and code decoding */\n  this.extra = 0;             /* extra bits needed */\n\n  /* fixed and dynamic code tables */\n  this.lencode = null;          /* starting table for length/literal codes */\n  this.distcode = null;         /* starting table for distance codes */\n  this.lenbits = 0;           /* index bits for lencode */\n  this.distbits = 0;          /* index bits for distcode */\n\n  /* dynamic table building */\n  this.ncode = 0;             /* number of code length code lengths */\n  this.nlen = 0;              /* number of length code lengths */\n  this.ndist = 0;             /* number of distance code lengths */\n  this.have = 0;              /* number of code lengths in lens[] */\n  this.next = null;              /* next available space in codes[] */\n\n  this.lens = new Uint16Array(320); /* temporary storage for code lengths */\n  this.work = new Uint16Array(288); /* work area for code table building */\n\n  /*\n   because we don't have pointers in js, we use lencode and distcode directly\n   as buffers so we don't need codes\n  */\n  //this.codes = new Int32Array(ENOUGH);       /* space for code tables */\n  this.lendyn = null;              /* dynamic table for length/literal codes (JS specific) */\n  this.distdyn = null;             /* dynamic table for distance codes (JS specific) */\n  this.sane = 0;                   /* if false, allow invalid distance too far */\n  this.back = 0;                   /* bits back of last unprocessed length/lit */\n  this.was = 0;                    /* initial length of match */\n}\n\n\nconst inflateResetKeep = (strm) => {\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR$1; }\n  const state = strm.state;\n  strm.total_in = strm.total_out = state.total = 0;\n  strm.msg = ''; /*Z_NULL*/\n  if (state.wrap) {       /* to support ill-conceived Java test suite */\n    strm.adler = state.wrap & 1;\n  }\n  state.mode = HEAD;\n  state.last = 0;\n  state.havedict = 0;\n  state.dmax = 32768;\n  state.head = null/*Z_NULL*/;\n  state.hold = 0;\n  state.bits = 0;\n  //state.lencode = state.distcode = state.next = state.codes;\n  state.lencode = state.lendyn = new Int32Array(ENOUGH_LENS$1);\n  state.distcode = state.distdyn = new Int32Array(ENOUGH_DISTS$1);\n\n  state.sane = 1;\n  state.back = -1;\n  //Tracev((stderr, \"inflate: reset\\n\"));\n  return Z_OK$2;\n};\n\n\nconst inflateReset = (strm) => {\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR$1; }\n  const state = strm.state;\n  state.wsize = 0;\n  state.whave = 0;\n  state.wnext = 0;\n  return inflateResetKeep(strm);\n\n};\n\n\nconst inflateReset2 = (strm, windowBits) => {\n  let wrap;\n\n  /* get the state */\n  if (!strm || !strm.state) { return Z_STREAM_ERROR$1; }\n  const state = strm.state;\n\n  /* extract wrap request from windowBits parameter */\n  if (windowBits < 0) {\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n  else {\n    wrap = (windowBits >> 4) + 1;\n    if (windowBits < 48) {\n      windowBits &= 15;\n    }\n  }\n\n  /* set number of window bits, free window if different */\n  if (windowBits && (windowBits < 8 || windowBits > 15)) {\n    return Z_STREAM_ERROR$1;\n  }\n  if (state.window !== null && state.wbits !== windowBits) {\n    state.window = null;\n  }\n\n  /* update state and reset the rest of it */\n  state.wrap = wrap;\n  state.wbits = windowBits;\n  return inflateReset(strm);\n};\n\n\nconst inflateInit2 = (strm, windowBits) => {\n\n  if (!strm) { return Z_STREAM_ERROR$1; }\n  //strm.msg = Z_NULL;                 /* in case we return an error */\n\n  const state = new InflateState();\n\n  //if (state === Z_NULL) return Z_MEM_ERROR;\n  //Tracev((stderr, \"inflate: allocated\\n\"));\n  strm.state = state;\n  state.window = null/*Z_NULL*/;\n  const ret = inflateReset2(strm, windowBits);\n  if (ret !== Z_OK$2) {\n    strm.state = null/*Z_NULL*/;\n  }\n  return ret;\n};\n\n\nconst inflateInit = (strm) => {\n\n  return inflateInit2(strm, DEF_WBITS);\n};\n\n\n/*\n Return state with length and distance decoding tables and index sizes set to\n fixed code decoding.  Normally this returns fixed tables from inffixed.h.\n If BUILDFIXED is defined, then instead this routine builds the tables the\n first time it's called, and returns those tables the first time and\n thereafter.  This reduces the size of the code by about 2K bytes, in\n exchange for a little execution time.  However, BUILDFIXED should not be\n used for threaded applications, since the rewriting of the tables and virgin\n may not be thread-safe.\n */\nlet virgin = true;\n\nlet lenfix, distfix; // We have no pointers in JS, so keep tables separate\n\n\nconst fixedtables = (state) => {\n\n  /* build fixed huffman tables if first call (may not be thread safe) */\n  if (virgin) {\n    lenfix = new Int32Array(512);\n    distfix = new Int32Array(32);\n\n    /* literal/length table */\n    let sym = 0;\n    while (sym < 144) { state.lens[sym++] = 8; }\n    while (sym < 256) { state.lens[sym++] = 9; }\n    while (sym < 280) { state.lens[sym++] = 7; }\n    while (sym < 288) { state.lens[sym++] = 8; }\n\n    inftrees(LENS$1,  state.lens, 0, 288, lenfix,   0, state.work, { bits: 9 });\n\n    /* distance table */\n    sym = 0;\n    while (sym < 32) { state.lens[sym++] = 5; }\n\n    inftrees(DISTS$1, state.lens, 0, 32,   distfix, 0, state.work, { bits: 5 });\n\n    /* do this just once */\n    virgin = false;\n  }\n\n  state.lencode = lenfix;\n  state.lenbits = 9;\n  state.distcode = distfix;\n  state.distbits = 5;\n};\n\n\n/*\n Update the window with the last wsize (normally 32K) bytes written before\n returning.  If window does not exist yet, create it.  This is only called\n when a window is already in use, or when output has been written during this\n inflate call, but the end of the deflate stream has not been reached yet.\n It is also called to create a window for dictionary data when a dictionary\n is loaded.\n\n Providing output buffers larger than 32K to inflate() should provide a speed\n advantage, since only the last 32K of output is copied to the sliding window\n upon return from inflate(), and since all distances after the first 32K of\n output will fall in the output data, making match copies simpler and faster.\n The advantage may be dependent on the size of the processor's data caches.\n */\nconst updatewindow = (strm, src, end, copy) => {\n\n  let dist;\n  const state = strm.state;\n\n  /* if it hasn't been done already, allocate space for the window */\n  if (state.window === null) {\n    state.wsize = 1 << state.wbits;\n    state.wnext = 0;\n    state.whave = 0;\n\n    state.window = new Uint8Array(state.wsize);\n  }\n\n  /* copy state->wsize or less output bytes into the circular window */\n  if (copy >= state.wsize) {\n    state.window.set(src.subarray(end - state.wsize, end), 0);\n    state.wnext = 0;\n    state.whave = state.wsize;\n  }\n  else {\n    dist = state.wsize - state.wnext;\n    if (dist > copy) {\n      dist = copy;\n    }\n    //zmemcpy(state->window + state->wnext, end - copy, dist);\n    state.window.set(src.subarray(end - copy, end - copy + dist), state.wnext);\n    copy -= dist;\n    if (copy) {\n      //zmemcpy(state->window, end - copy, copy);\n      state.window.set(src.subarray(end - copy, end), 0);\n      state.wnext = copy;\n      state.whave = state.wsize;\n    }\n    else {\n      state.wnext += dist;\n      if (state.wnext === state.wsize) { state.wnext = 0; }\n      if (state.whave < state.wsize) { state.whave += dist; }\n    }\n  }\n  return 0;\n};\n\n\nconst inflate = (strm, flush) => {\n\n  let state;\n  let input, output;          // input/output buffers\n  let next;                   /* next input INDEX */\n  let put;                    /* next output INDEX */\n  let have, left;             /* available input and output */\n  let hold;                   /* bit buffer */\n  let bits;                   /* bits in bit buffer */\n  let _in, _out;              /* save starting available input and output */\n  let copy;                   /* number of stored or match bytes to copy */\n  let from;                   /* where to copy match bytes from */\n  let from_source;\n  let here = 0;               /* current decoding table entry */\n  let here_bits, here_op, here_val; // paked \"here\" denormalized (JS specific)\n  //let last;                   /* parent table entry */\n  let last_bits, last_op, last_val; // paked \"last\" denormalized (JS specific)\n  let len;                    /* length to copy for repeats, bits to drop */\n  let ret;                    /* return code */\n  const hbuf = new Uint8Array(4);    /* buffer for gzip header crc calculation */\n  let opts;\n\n  let n; // temporary variable for NEED_BITS\n\n  const order = /* permutation of code lengths */\n    new Uint8Array([ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ]);\n\n\n  if (!strm || !strm.state || !strm.output ||\n      (!strm.input && strm.avail_in !== 0)) {\n    return Z_STREAM_ERROR$1;\n  }\n\n  state = strm.state;\n  if (state.mode === TYPE$1) { state.mode = TYPEDO; }    /* skip check */\n\n\n  //--- LOAD() ---\n  put = strm.next_out;\n  output = strm.output;\n  left = strm.avail_out;\n  next = strm.next_in;\n  input = strm.input;\n  have = strm.avail_in;\n  hold = state.hold;\n  bits = state.bits;\n  //---\n\n  _in = have;\n  _out = left;\n  ret = Z_OK$2;\n\n  inf_leave: // goto emulation\n  for (;;) {\n    switch (state.mode) {\n      case HEAD:\n        if (state.wrap === 0) {\n          state.mode = TYPEDO;\n          break;\n        }\n        //=== NEEDBITS(16);\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((state.wrap & 2) && hold === 0x8b1f) {  /* gzip header */\n          state.check = 0/*crc32(0L, Z_NULL, 0)*/;\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32_1(state.check, hbuf, 2, 0);\n          //===//\n\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          state.mode = FLAGS;\n          break;\n        }\n        state.flags = 0;           /* expect zlib header */\n        if (state.head) {\n          state.head.done = false;\n        }\n        if (!(state.wrap & 1) ||   /* check if zlib header allowed */\n          (((hold & 0xff)/*BITS(8)*/ << 8) + (hold >> 8)) % 31) {\n          strm.msg = 'incorrect header check';\n          state.mode = BAD$1;\n          break;\n        }\n        if ((hold & 0x0f)/*BITS(4)*/ !== Z_DEFLATED$2) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD$1;\n          break;\n        }\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n        len = (hold & 0x0f)/*BITS(4)*/ + 8;\n        if (state.wbits === 0) {\n          state.wbits = len;\n        }\n        else if (len > state.wbits) {\n          strm.msg = 'invalid window size';\n          state.mode = BAD$1;\n          break;\n        }\n\n        // !!! pako patch. Force use `options.windowBits` if passed.\n        // Required to always use max window size by default.\n        state.dmax = 1 << state.wbits;\n        //state.dmax = 1 << len;\n\n        //Tracev((stderr, \"inflate:   zlib header ok\\n\"));\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = hold & 0x200 ? DICTID : TYPE$1;\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        break;\n      case FLAGS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.flags = hold;\n        if ((state.flags & 0xff) !== Z_DEFLATED$2) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD$1;\n          break;\n        }\n        if (state.flags & 0xe000) {\n          strm.msg = 'unknown header flags set';\n          state.mode = BAD$1;\n          break;\n        }\n        if (state.head) {\n          state.head.text = ((hold >> 8) & 1);\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32_1(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = TIME;\n        /* falls through */\n      case TIME:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.time = hold;\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC4(state.check, hold)\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          hbuf[2] = (hold >>> 16) & 0xff;\n          hbuf[3] = (hold >>> 24) & 0xff;\n          state.check = crc32_1(state.check, hbuf, 4, 0);\n          //===\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = OS;\n        /* falls through */\n      case OS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.xflags = (hold & 0xff);\n          state.head.os = (hold >> 8);\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32_1(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = EXLEN;\n        /* falls through */\n      case EXLEN:\n        if (state.flags & 0x0400) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length = hold;\n          if (state.head) {\n            state.head.extra_len = hold;\n          }\n          if (state.flags & 0x0200) {\n            //=== CRC2(state.check, hold);\n            hbuf[0] = hold & 0xff;\n            hbuf[1] = (hold >>> 8) & 0xff;\n            state.check = crc32_1(state.check, hbuf, 2, 0);\n            //===//\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        else if (state.head) {\n          state.head.extra = null/*Z_NULL*/;\n        }\n        state.mode = EXTRA;\n        /* falls through */\n      case EXTRA:\n        if (state.flags & 0x0400) {\n          copy = state.length;\n          if (copy > have) { copy = have; }\n          if (copy) {\n            if (state.head) {\n              len = state.head.extra_len - state.length;\n              if (!state.head.extra) {\n                // Use untyped array for more convenient processing later\n                state.head.extra = new Uint8Array(state.head.extra_len);\n              }\n              state.head.extra.set(\n                input.subarray(\n                  next,\n                  // extra field is limited to 65536 bytes\n                  // - no need for additional size check\n                  next + copy\n                ),\n                /*len + copy > state.head.extra_max - len ? state.head.extra_max : copy,*/\n                len\n              );\n              //zmemcpy(state.head.extra + len, next,\n              //        len + copy > state.head.extra_max ?\n              //        state.head.extra_max - len : copy);\n            }\n            if (state.flags & 0x0200) {\n              state.check = crc32_1(state.check, input, copy, next);\n            }\n            have -= copy;\n            next += copy;\n            state.length -= copy;\n          }\n          if (state.length) { break inf_leave; }\n        }\n        state.length = 0;\n        state.mode = NAME;\n        /* falls through */\n      case NAME:\n        if (state.flags & 0x0800) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            // TODO: 2 or 1 bytes?\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.name_max*/)) {\n              state.head.name += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n\n          if (state.flags & 0x0200) {\n            state.check = crc32_1(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.name = null;\n        }\n        state.length = 0;\n        state.mode = COMMENT;\n        /* falls through */\n      case COMMENT:\n        if (state.flags & 0x1000) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.comm_max*/)) {\n              state.head.comment += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n          if (state.flags & 0x0200) {\n            state.check = crc32_1(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.comment = null;\n        }\n        state.mode = HCRC;\n        /* falls through */\n      case HCRC:\n        if (state.flags & 0x0200) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if (hold !== (state.check & 0xffff)) {\n            strm.msg = 'header crc mismatch';\n            state.mode = BAD$1;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        if (state.head) {\n          state.head.hcrc = ((state.flags >> 9) & 1);\n          state.head.done = true;\n        }\n        strm.adler = state.check = 0;\n        state.mode = TYPE$1;\n        break;\n      case DICTID:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        strm.adler = state.check = zswap32(hold);\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = DICT;\n        /* falls through */\n      case DICT:\n        if (state.havedict === 0) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          return Z_NEED_DICT;\n        }\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = TYPE$1;\n        /* falls through */\n      case TYPE$1:\n        if (flush === Z_BLOCK$1 || flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case TYPEDO:\n        if (state.last) {\n          //--- BYTEBITS() ---//\n          hold >>>= bits & 7;\n          bits -= bits & 7;\n          //---//\n          state.mode = CHECK;\n          break;\n        }\n        //=== NEEDBITS(3); */\n        while (bits < 3) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.last = (hold & 0x01)/*BITS(1)*/;\n        //--- DROPBITS(1) ---//\n        hold >>>= 1;\n        bits -= 1;\n        //---//\n\n        switch ((hold & 0x03)/*BITS(2)*/) {\n          case 0:                             /* stored block */\n            //Tracev((stderr, \"inflate:     stored block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = STORED;\n            break;\n          case 1:                             /* fixed block */\n            fixedtables(state);\n            //Tracev((stderr, \"inflate:     fixed codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = LEN_;             /* decode codes */\n            if (flush === Z_TREES) {\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n              break inf_leave;\n            }\n            break;\n          case 2:                             /* dynamic block */\n            //Tracev((stderr, \"inflate:     dynamic codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = TABLE;\n            break;\n          case 3:\n            strm.msg = 'invalid block type';\n            state.mode = BAD$1;\n        }\n        //--- DROPBITS(2) ---//\n        hold >>>= 2;\n        bits -= 2;\n        //---//\n        break;\n      case STORED:\n        //--- BYTEBITS() ---// /* go to byte boundary */\n        hold >>>= bits & 7;\n        bits -= bits & 7;\n        //---//\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((hold & 0xffff) !== ((hold >>> 16) ^ 0xffff)) {\n          strm.msg = 'invalid stored block lengths';\n          state.mode = BAD$1;\n          break;\n        }\n        state.length = hold & 0xffff;\n        //Tracev((stderr, \"inflate:       stored length %u\\n\",\n        //        state.length));\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = COPY_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case COPY_:\n        state.mode = COPY;\n        /* falls through */\n      case COPY:\n        copy = state.length;\n        if (copy) {\n          if (copy > have) { copy = have; }\n          if (copy > left) { copy = left; }\n          if (copy === 0) { break inf_leave; }\n          //--- zmemcpy(put, next, copy); ---\n          output.set(input.subarray(next, next + copy), put);\n          //---//\n          have -= copy;\n          next += copy;\n          left -= copy;\n          put += copy;\n          state.length -= copy;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       stored end\\n\"));\n        state.mode = TYPE$1;\n        break;\n      case TABLE:\n        //=== NEEDBITS(14); */\n        while (bits < 14) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.nlen = (hold & 0x1f)/*BITS(5)*/ + 257;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ndist = (hold & 0x1f)/*BITS(5)*/ + 1;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ncode = (hold & 0x0f)/*BITS(4)*/ + 4;\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n//#ifndef PKZIP_BUG_WORKAROUND\n        if (state.nlen > 286 || state.ndist > 30) {\n          strm.msg = 'too many length or distance symbols';\n          state.mode = BAD$1;\n          break;\n        }\n//#endif\n        //Tracev((stderr, \"inflate:       table sizes ok\\n\"));\n        state.have = 0;\n        state.mode = LENLENS;\n        /* falls through */\n      case LENLENS:\n        while (state.have < state.ncode) {\n          //=== NEEDBITS(3);\n          while (bits < 3) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.lens[order[state.have++]] = (hold & 0x07);//BITS(3);\n          //--- DROPBITS(3) ---//\n          hold >>>= 3;\n          bits -= 3;\n          //---//\n        }\n        while (state.have < 19) {\n          state.lens[order[state.have++]] = 0;\n        }\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        //state.next = state.codes;\n        //state.lencode = state.next;\n        // Switch to use dynamic table\n        state.lencode = state.lendyn;\n        state.lenbits = 7;\n\n        opts = { bits: state.lenbits };\n        ret = inftrees(CODES$1, state.lens, 0, 19, state.lencode, 0, state.work, opts);\n        state.lenbits = opts.bits;\n\n        if (ret) {\n          strm.msg = 'invalid code lengths set';\n          state.mode = BAD$1;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       code lengths ok\\n\"));\n        state.have = 0;\n        state.mode = CODELENS;\n        /* falls through */\n      case CODELENS:\n        while (state.have < state.nlen + state.ndist) {\n          for (;;) {\n            here = state.lencode[hold & ((1 << state.lenbits) - 1)];/*BITS(state.lenbits)*/\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          if (here_val < 16) {\n            //--- DROPBITS(here.bits) ---//\n            hold >>>= here_bits;\n            bits -= here_bits;\n            //---//\n            state.lens[state.have++] = here_val;\n          }\n          else {\n            if (here_val === 16) {\n              //=== NEEDBITS(here.bits + 2);\n              n = here_bits + 2;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              if (state.have === 0) {\n                strm.msg = 'invalid bit length repeat';\n                state.mode = BAD$1;\n                break;\n              }\n              len = state.lens[state.have - 1];\n              copy = 3 + (hold & 0x03);//BITS(2);\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n            }\n            else if (here_val === 17) {\n              //=== NEEDBITS(here.bits + 3);\n              n = here_bits + 3;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 3 + (hold & 0x07);//BITS(3);\n              //--- DROPBITS(3) ---//\n              hold >>>= 3;\n              bits -= 3;\n              //---//\n            }\n            else {\n              //=== NEEDBITS(here.bits + 7);\n              n = here_bits + 7;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 11 + (hold & 0x7f);//BITS(7);\n              //--- DROPBITS(7) ---//\n              hold >>>= 7;\n              bits -= 7;\n              //---//\n            }\n            if (state.have + copy > state.nlen + state.ndist) {\n              strm.msg = 'invalid bit length repeat';\n              state.mode = BAD$1;\n              break;\n            }\n            while (copy--) {\n              state.lens[state.have++] = len;\n            }\n          }\n        }\n\n        /* handle error breaks in while */\n        if (state.mode === BAD$1) { break; }\n\n        /* check for end-of-block code (better have one) */\n        if (state.lens[256] === 0) {\n          strm.msg = 'invalid code -- missing end-of-block';\n          state.mode = BAD$1;\n          break;\n        }\n\n        /* build code tables -- note: do not change the lenbits or distbits\n           values here (9 and 6) without reading the comments in inftrees.h\n           concerning the ENOUGH constants, which depend on those values */\n        state.lenbits = 9;\n\n        opts = { bits: state.lenbits };\n        ret = inftrees(LENS$1, state.lens, 0, state.nlen, state.lencode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.lenbits = opts.bits;\n        // state.lencode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid literal/lengths set';\n          state.mode = BAD$1;\n          break;\n        }\n\n        state.distbits = 6;\n        //state.distcode.copy(state.codes);\n        // Switch to use dynamic table\n        state.distcode = state.distdyn;\n        opts = { bits: state.distbits };\n        ret = inftrees(DISTS$1, state.lens, state.nlen, state.ndist, state.distcode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.distbits = opts.bits;\n        // state.distcode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid distances set';\n          state.mode = BAD$1;\n          break;\n        }\n        //Tracev((stderr, 'inflate:       codes ok\\n'));\n        state.mode = LEN_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case LEN_:\n        state.mode = LEN;\n        /* falls through */\n      case LEN:\n        if (have >= 6 && left >= 258) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          inffast(strm, _out);\n          //--- LOAD() ---\n          put = strm.next_out;\n          output = strm.output;\n          left = strm.avail_out;\n          next = strm.next_in;\n          input = strm.input;\n          have = strm.avail_in;\n          hold = state.hold;\n          bits = state.bits;\n          //---\n\n          if (state.mode === TYPE$1) {\n            state.back = -1;\n          }\n          break;\n        }\n        state.back = 0;\n        for (;;) {\n          here = state.lencode[hold & ((1 << state.lenbits) - 1)];  /*BITS(state.lenbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if (here_bits <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if (here_op && (here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.lencode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        state.length = here_val;\n        if (here_op === 0) {\n          //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n          //        \"inflate:         literal '%c'\\n\" :\n          //        \"inflate:         literal 0x%02x\\n\", here.val));\n          state.mode = LIT;\n          break;\n        }\n        if (here_op & 32) {\n          //Tracevv((stderr, \"inflate:         end of block\\n\"));\n          state.back = -1;\n          state.mode = TYPE$1;\n          break;\n        }\n        if (here_op & 64) {\n          strm.msg = 'invalid literal/length code';\n          state.mode = BAD$1;\n          break;\n        }\n        state.extra = here_op & 15;\n        state.mode = LENEXT;\n        /* falls through */\n      case LENEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", state.length));\n        state.was = state.length;\n        state.mode = DIST;\n        /* falls through */\n      case DIST:\n        for (;;) {\n          here = state.distcode[hold & ((1 << state.distbits) - 1)];/*BITS(state.distbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if ((here_bits) <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if ((here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.distcode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        if (here_op & 64) {\n          strm.msg = 'invalid distance code';\n          state.mode = BAD$1;\n          break;\n        }\n        state.offset = here_val;\n        state.extra = (here_op) & 15;\n        state.mode = DISTEXT;\n        /* falls through */\n      case DISTEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.offset += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n//#ifdef INFLATE_STRICT\n        if (state.offset > state.dmax) {\n          strm.msg = 'invalid distance too far back';\n          state.mode = BAD$1;\n          break;\n        }\n//#endif\n        //Tracevv((stderr, \"inflate:         distance %u\\n\", state.offset));\n        state.mode = MATCH;\n        /* falls through */\n      case MATCH:\n        if (left === 0) { break inf_leave; }\n        copy = _out - left;\n        if (state.offset > copy) {         /* copy from window */\n          copy = state.offset - copy;\n          if (copy > state.whave) {\n            if (state.sane) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD$1;\n              break;\n            }\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//          Trace((stderr, \"inflate.c too far\\n\"));\n//          copy -= state.whave;\n//          if (copy > state.length) { copy = state.length; }\n//          if (copy > left) { copy = left; }\n//          left -= copy;\n//          state.length -= copy;\n//          do {\n//            output[put++] = 0;\n//          } while (--copy);\n//          if (state.length === 0) { state.mode = LEN; }\n//          break;\n//#endif\n          }\n          if (copy > state.wnext) {\n            copy -= state.wnext;\n            from = state.wsize - copy;\n          }\n          else {\n            from = state.wnext - copy;\n          }\n          if (copy > state.length) { copy = state.length; }\n          from_source = state.window;\n        }\n        else {                              /* copy from output */\n          from_source = output;\n          from = put - state.offset;\n          copy = state.length;\n        }\n        if (copy > left) { copy = left; }\n        left -= copy;\n        state.length -= copy;\n        do {\n          output[put++] = from_source[from++];\n        } while (--copy);\n        if (state.length === 0) { state.mode = LEN; }\n        break;\n      case LIT:\n        if (left === 0) { break inf_leave; }\n        output[put++] = state.length;\n        left--;\n        state.mode = LEN;\n        break;\n      case CHECK:\n        if (state.wrap) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            // Use '|' instead of '+' to make sure that result is signed\n            hold |= input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          _out -= left;\n          strm.total_out += _out;\n          state.total += _out;\n          if (_out) {\n            strm.adler = state.check =\n                /*UPDATE(state.check, put - _out, _out);*/\n                (state.flags ? crc32_1(state.check, output, _out, put - _out) : adler32_1(state.check, output, _out, put - _out));\n\n          }\n          _out = left;\n          // NB: crc32 stored as signed 32-bit int, zswap32 returns signed too\n          if ((state.flags ? hold : zswap32(hold)) !== state.check) {\n            strm.msg = 'incorrect data check';\n            state.mode = BAD$1;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   check matches trailer\\n\"));\n        }\n        state.mode = LENGTH;\n        /* falls through */\n      case LENGTH:\n        if (state.wrap && state.flags) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if (hold !== (state.total & 0xffffffff)) {\n            strm.msg = 'incorrect length check';\n            state.mode = BAD$1;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   length matches trailer\\n\"));\n        }\n        state.mode = DONE;\n        /* falls through */\n      case DONE:\n        ret = Z_STREAM_END$2;\n        break inf_leave;\n      case BAD$1:\n        ret = Z_DATA_ERROR$1;\n        break inf_leave;\n      case MEM:\n        return Z_MEM_ERROR;\n      case SYNC:\n        /* falls through */\n      default:\n        return Z_STREAM_ERROR$1;\n    }\n  }\n\n  // inf_leave <- here is real place for \"goto inf_leave\", emulated via \"break inf_leave\"\n\n  /*\n     Return from inflate(), updating the total counts and the check value.\n     If there was no progress during the inflate() call, return a buffer\n     error.  Call updatewindow() to create and/or update the window state.\n     Note: a memory error from inflate() is non-recoverable.\n   */\n\n  //--- RESTORE() ---\n  strm.next_out = put;\n  strm.avail_out = left;\n  strm.next_in = next;\n  strm.avail_in = have;\n  state.hold = hold;\n  state.bits = bits;\n  //---\n\n  if (state.wsize || (_out !== strm.avail_out && state.mode < BAD$1 &&\n                      (state.mode < CHECK || flush !== Z_FINISH$2))) {\n    if (updatewindow(strm, strm.output, strm.next_out, _out - strm.avail_out)) ;\n  }\n  _in -= strm.avail_in;\n  _out -= strm.avail_out;\n  strm.total_in += _in;\n  strm.total_out += _out;\n  state.total += _out;\n  if (state.wrap && _out) {\n    strm.adler = state.check = /*UPDATE(state.check, strm.next_out - _out, _out);*/\n      (state.flags ? crc32_1(state.check, output, _out, strm.next_out - _out) : adler32_1(state.check, output, _out, strm.next_out - _out));\n  }\n  strm.data_type = state.bits + (state.last ? 64 : 0) +\n                    (state.mode === TYPE$1 ? 128 : 0) +\n                    (state.mode === LEN_ || state.mode === COPY_ ? 256 : 0);\n  if (((_in === 0 && _out === 0) || flush === Z_FINISH$2) && ret === Z_OK$2) {\n    ret = Z_BUF_ERROR$1;\n  }\n  return ret;\n};\n\n\nconst inflateEnd = (strm) => {\n\n  if (!strm || !strm.state /*|| strm->zfree == (free_func)0*/) {\n    return Z_STREAM_ERROR$1;\n  }\n\n  let state = strm.state;\n  if (state.window) {\n    state.window = null;\n  }\n  strm.state = null;\n  return Z_OK$2;\n};\n\n\nconst inflateGetHeader = (strm, head) => {\n\n  /* check state */\n  if (!strm || !strm.state) { return Z_STREAM_ERROR$1; }\n  const state = strm.state;\n  if ((state.wrap & 2) === 0) { return Z_STREAM_ERROR$1; }\n\n  /* save header structure */\n  state.head = head;\n  head.done = false;\n  return Z_OK$2;\n};\n\n\nconst inflateSetDictionary = (strm, dictionary) => {\n  const dictLength = dictionary.length;\n\n  let state;\n  let dictid;\n  let ret;\n\n  /* check state */\n  if (!strm /* == Z_NULL */ || !strm.state /* == Z_NULL */) { return Z_STREAM_ERROR$1; }\n  state = strm.state;\n\n  if (state.wrap !== 0 && state.mode !== DICT) {\n    return Z_STREAM_ERROR$1;\n  }\n\n  /* check for correct dictionary identifier */\n  if (state.mode === DICT) {\n    dictid = 1; /* adler32(0, null, 0)*/\n    /* dictid = adler32(dictid, dictionary, dictLength); */\n    dictid = adler32_1(dictid, dictionary, dictLength, 0);\n    if (dictid !== state.check) {\n      return Z_DATA_ERROR$1;\n    }\n  }\n  /* copy dictionary to window using updatewindow(), which will amend the\n   existing dictionary if appropriate */\n  ret = updatewindow(strm, dictionary, dictLength, dictLength);\n  if (ret) {\n    state.mode = MEM;\n    return Z_MEM_ERROR;\n  }\n  state.havedict = 1;\n  // Tracev((stderr, \"inflate:   dictionary set\\n\"));\n  return Z_OK$2;\n};\n\n\nvar inflateReset_1 = inflateReset;\nvar inflateReset2_1 = inflateReset2;\nvar inflateResetKeep_1 = inflateResetKeep;\nvar inflateInit_1 = inflateInit;\nvar inflateInit2_1 = inflateInit2;\nvar inflate_2 = inflate;\nvar inflateEnd_1 = inflateEnd;\nvar inflateGetHeader_1 = inflateGetHeader;\nvar inflateSetDictionary_1 = inflateSetDictionary;\nvar inflateInfo = 'pako inflate (from Nodeca project)';\n\n/* Not implemented\nmodule.exports.inflateCopy = inflateCopy;\nmodule.exports.inflateGetDictionary = inflateGetDictionary;\nmodule.exports.inflateMark = inflateMark;\nmodule.exports.inflatePrime = inflatePrime;\nmodule.exports.inflateSync = inflateSync;\nmodule.exports.inflateSyncPoint = inflateSyncPoint;\nmodule.exports.inflateUndermine = inflateUndermine;\n*/\n\nvar inflate_1 = {\n\tinflateReset: inflateReset_1,\n\tinflateReset2: inflateReset2_1,\n\tinflateResetKeep: inflateResetKeep_1,\n\tinflateInit: inflateInit_1,\n\tinflateInit2: inflateInit2_1,\n\tinflate: inflate_2,\n\tinflateEnd: inflateEnd_1,\n\tinflateGetHeader: inflateGetHeader_1,\n\tinflateSetDictionary: inflateSetDictionary_1,\n\tinflateInfo: inflateInfo\n};\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction GZheader() {\n  /* true if compressed data believed to be text */\n  this.text       = 0;\n  /* modification time */\n  this.time       = 0;\n  /* extra flags (not used when writing a gzip file) */\n  this.xflags     = 0;\n  /* operating system */\n  this.os         = 0;\n  /* pointer to extra field or Z_NULL if none */\n  this.extra      = null;\n  /* extra field length (valid if extra != Z_NULL) */\n  this.extra_len  = 0; // Actually, we don't need it in JS,\n                       // but leave for few code modifications\n\n  //\n  // Setup limits is not necessary because in js we should not preallocate memory\n  // for inflate use constant limit in 65536 bytes\n  //\n\n  /* space at extra (only when reading header) */\n  // this.extra_max  = 0;\n  /* pointer to zero-terminated file name or Z_NULL */\n  this.name       = '';\n  /* space at name (only when reading header) */\n  // this.name_max   = 0;\n  /* pointer to zero-terminated comment or Z_NULL */\n  this.comment    = '';\n  /* space at comment (only when reading header) */\n  // this.comm_max   = 0;\n  /* true if there was or will be a header crc */\n  this.hcrc       = 0;\n  /* true when done reading gzip header (not used when writing a gzip file) */\n  this.done       = false;\n}\n\nvar gzheader = GZheader;\n\nconst toString$1 = Object.prototype.toString;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nconst {\n  Z_NO_FLUSH: Z_NO_FLUSH$2, Z_FINISH: Z_FINISH$3,\n  Z_OK: Z_OK$3, Z_STREAM_END: Z_STREAM_END$3, Z_NEED_DICT: Z_NEED_DICT$1, Z_STREAM_ERROR: Z_STREAM_ERROR$2, Z_DATA_ERROR: Z_DATA_ERROR$2, Z_MEM_ERROR: Z_MEM_ERROR$1\n} = constants;\n\n/* ===========================================================================*/\n\n\n/**\n * class Inflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[inflate]]\n * and [[inflateRaw]].\n **/\n\n/* internal\n * inflate.chunks -> Array\n *\n * Chunks of output data, if [[Inflate#onData]] not overridden.\n **/\n\n/**\n * Inflate.result -> Uint8Array|String\n *\n * Uncompressed result, generated by default [[Inflate#onData]]\n * and [[Inflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Inflate#push]] with `Z_FINISH` / `true` param).\n **/\n\n/**\n * Inflate.err -> Number\n *\n * Error code after inflate finished. 0 (Z_OK) on success.\n * Should be checked if broken data possible.\n **/\n\n/**\n * Inflate.msg -> String\n *\n * Error message, if [[Inflate.err]] != 0\n **/\n\n\n/**\n * new Inflate(options)\n * - options (Object): zlib inflate options.\n *\n * Creates new inflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `windowBits`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw inflate\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n * By default, when no options set, autodetect deflate/gzip data format via\n * wrapper header.\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako')\n * const chunk1 = new Uint8Array([1,2,3,4,5,6,7,8,9])\n * const chunk2 = new Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * const inflate = new pako.Inflate({ level: 3});\n *\n * inflate.push(chunk1, false);\n * inflate.push(chunk2, true);  // true -> last chunk\n *\n * if (inflate.err) { throw new Error(inflate.err); }\n *\n * console.log(inflate.result);\n * ```\n **/\nfunction Inflate(options) {\n  this.options = common.assign({\n    chunkSize: 1024 * 64,\n    windowBits: 15,\n    to: ''\n  }, options || {});\n\n  const opt = this.options;\n\n  // Force window size for `raw` data, if not set directly,\n  // because we have no header for autodetect.\n  if (opt.raw && (opt.windowBits >= 0) && (opt.windowBits < 16)) {\n    opt.windowBits = -opt.windowBits;\n    if (opt.windowBits === 0) { opt.windowBits = -15; }\n  }\n\n  // If `windowBits` not defined (and mode not raw) - set autodetect flag for gzip/deflate\n  if ((opt.windowBits >= 0) && (opt.windowBits < 16) &&\n      !(options && options.windowBits)) {\n    opt.windowBits += 32;\n  }\n\n  // Gzip header has no info about windows size, we can do autodetect only\n  // for deflate. So, if window size not set, force it to max when gzip possible\n  if ((opt.windowBits > 15) && (opt.windowBits < 48)) {\n    // bit 3 (16) -> gzipped data\n    // bit 4 (32) -> autodetect gzip/deflate\n    if ((opt.windowBits & 15) === 0) {\n      opt.windowBits |= 15;\n    }\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm   = new zstream();\n  this.strm.avail_out = 0;\n\n  let status  = inflate_1.inflateInit2(\n    this.strm,\n    opt.windowBits\n  );\n\n  if (status !== Z_OK$3) {\n    throw new Error(messages[status]);\n  }\n\n  this.header = new gzheader();\n\n  inflate_1.inflateGetHeader(this.strm, this.header);\n\n  // Setup dictionary\n  if (opt.dictionary) {\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      opt.dictionary = strings.string2buf(opt.dictionary);\n    } else if (toString$1.call(opt.dictionary) === '[object ArrayBuffer]') {\n      opt.dictionary = new Uint8Array(opt.dictionary);\n    }\n    if (opt.raw) { //In raw mode we need to set the dictionary early\n      status = inflate_1.inflateSetDictionary(this.strm, opt.dictionary);\n      if (status !== Z_OK$3) {\n        throw new Error(messages[status]);\n      }\n    }\n  }\n}\n\n/**\n * Inflate#push(data[, flush_mode]) -> Boolean\n * - data (Uint8Array|ArrayBuffer): input data\n * - flush_mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE\n *   flush modes. See constants. Skipped or `false` means Z_NO_FLUSH,\n *   `true` means Z_FINISH.\n *\n * Sends input data to inflate pipe, generating [[Inflate#onData]] calls with\n * new output chunks. Returns `true` on success. If end of stream detected,\n * [[Inflate#onEnd]] will be called.\n *\n * `flush_mode` is not needed for normal operation, because end of stream\n * detected automatically. You may try to use it for advanced things, but\n * this functionality was not tested.\n *\n * On fail call [[Inflate#onEnd]] with error code and return false.\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nInflate.prototype.push = function (data, flush_mode) {\n  const strm = this.strm;\n  const chunkSize = this.options.chunkSize;\n  const dictionary = this.options.dictionary;\n  let status, _flush_mode, last_avail_out;\n\n  if (this.ended) return false;\n\n  if (flush_mode === ~~flush_mode) _flush_mode = flush_mode;\n  else _flush_mode = flush_mode === true ? Z_FINISH$3 : Z_NO_FLUSH$2;\n\n  // Convert data if needed\n  if (toString$1.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  for (;;) {\n    if (strm.avail_out === 0) {\n      strm.output = new Uint8Array(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n\n    status = inflate_1.inflate(strm, _flush_mode);\n\n    if (status === Z_NEED_DICT$1 && dictionary) {\n      status = inflate_1.inflateSetDictionary(strm, dictionary);\n\n      if (status === Z_OK$3) {\n        status = inflate_1.inflate(strm, _flush_mode);\n      } else if (status === Z_DATA_ERROR$2) {\n        // Replace code with more verbose\n        status = Z_NEED_DICT$1;\n      }\n    }\n\n    // Skip snyc markers if more data follows and not raw mode\n    while (strm.avail_in > 0 &&\n           status === Z_STREAM_END$3 &&\n           strm.state.wrap > 0 &&\n           data[strm.next_in] !== 0)\n    {\n      inflate_1.inflateReset(strm);\n      status = inflate_1.inflate(strm, _flush_mode);\n    }\n\n    switch (status) {\n      case Z_STREAM_ERROR$2:\n      case Z_DATA_ERROR$2:\n      case Z_NEED_DICT$1:\n      case Z_MEM_ERROR$1:\n        this.onEnd(status);\n        this.ended = true;\n        return false;\n    }\n\n    // Remember real `avail_out` value, because we may patch out buffer content\n    // to align utf8 strings boundaries.\n    last_avail_out = strm.avail_out;\n\n    if (strm.next_out) {\n      if (strm.avail_out === 0 || status === Z_STREAM_END$3) {\n\n        if (this.options.to === 'string') {\n\n          let next_out_utf8 = strings.utf8border(strm.output, strm.next_out);\n\n          let tail = strm.next_out - next_out_utf8;\n          let utf8str = strings.buf2string(strm.output, next_out_utf8);\n\n          // move tail & realign counters\n          strm.next_out = tail;\n          strm.avail_out = chunkSize - tail;\n          if (tail) strm.output.set(strm.output.subarray(next_out_utf8, next_out_utf8 + tail), 0);\n\n          this.onData(utf8str);\n\n        } else {\n          this.onData(strm.output.length === strm.next_out ? strm.output : strm.output.subarray(0, strm.next_out));\n        }\n      }\n    }\n\n    // Must repeat iteration if out buffer is full\n    if (status === Z_OK$3 && last_avail_out === 0) continue;\n\n    // Finalize if end of stream reached.\n    if (status === Z_STREAM_END$3) {\n      status = inflate_1.inflateEnd(this.strm);\n      this.onEnd(status);\n      this.ended = true;\n      return true;\n    }\n\n    if (strm.avail_in === 0) break;\n  }\n\n  return true;\n};\n\n\n/**\n * Inflate#onData(chunk) -> Void\n * - chunk (Uint8Array|String): output data. When string output requested,\n *   each chunk will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nInflate.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Inflate#onEnd(status) -> Void\n * - status (Number): inflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called either after you tell inflate that the input stream is\n * complete (Z_FINISH). By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nInflate.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === Z_OK$3) {\n    if (this.options.to === 'string') {\n      this.result = this.chunks.join('');\n    } else {\n      this.result = common.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * inflate(data[, options]) -> Uint8Array|String\n * - data (Uint8Array): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Decompress `data` with inflate/ungzip and `options`. Autodetect\n * format via wrapper header by default. That's why we don't provide\n * separate `ungzip` method.\n *\n * Supported options are:\n *\n * - windowBits\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n *\n * ##### Example:\n *\n * ```javascript\n * const pako = require('pako');\n * const input = pako.deflate(new Uint8Array([1,2,3,4,5,6,7,8,9]));\n * let output;\n *\n * try {\n *   output = pako.inflate(input);\n * } catch (err)\n *   console.log(err);\n * }\n * ```\n **/\nfunction inflate$1(input, options) {\n  const inflator = new Inflate(options);\n\n  inflator.push(input);\n\n  // That will never happens, if you don't cheat with options :)\n  if (inflator.err) throw inflator.msg || messages[inflator.err];\n\n  return inflator.result;\n}\n\n\n/**\n * inflateRaw(data[, options]) -> Uint8Array|String\n * - data (Uint8Array): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * The same as [[inflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction inflateRaw(input, options) {\n  options = options || {};\n  options.raw = true;\n  return inflate$1(input, options);\n}\n\n\n/**\n * ungzip(data[, options]) -> Uint8Array|String\n * - data (Uint8Array): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Just shortcut to [[inflate]], because it autodetects format\n * by header.content. Done for convenience.\n **/\n\n\nvar Inflate_1 = Inflate;\nvar inflate_2$1 = inflate$1;\nvar inflateRaw_1 = inflateRaw;\nvar ungzip = inflate$1;\nvar constants$2 = constants;\n\nvar inflate_1$1 = {\n\tInflate: Inflate_1,\n\tinflate: inflate_2$1,\n\tinflateRaw: inflateRaw_1,\n\tungzip: ungzip,\n\tconstants: constants$2\n};\n\nconst { Deflate: Deflate$1, deflate: deflate$2, deflateRaw: deflateRaw$1, gzip: gzip$1 } = deflate_1$1;\n\nconst { Inflate: Inflate$1, inflate: inflate$2, inflateRaw: inflateRaw$1, ungzip: ungzip$1 } = inflate_1$1;\n\n\n\nvar Deflate_1$1 = Deflate$1;\nvar deflate_1$2 = deflate$2;\nvar deflateRaw_1$1 = deflateRaw$1;\nvar gzip_1$1 = gzip$1;\nvar Inflate_1$1 = Inflate$1;\nvar inflate_1$2 = inflate$2;\nvar inflateRaw_1$1 = inflateRaw$1;\nvar ungzip_1 = ungzip$1;\nvar constants_1 = constants;\n\nvar pako = {\n\tDeflate: Deflate_1$1,\n\tdeflate: deflate_1$2,\n\tdeflateRaw: deflateRaw_1$1,\n\tgzip: gzip_1$1,\n\tInflate: Inflate_1$1,\n\tinflate: inflate_1$2,\n\tinflateRaw: inflateRaw_1$1,\n\tungzip: ungzip_1,\n\tconstants: constants_1\n};\n\nexport default pako;\nexport { Deflate_1$1 as Deflate, Inflate_1$1 as Inflate, constants_1 as constants, deflate_1$2 as deflate, deflateRaw_1$1 as deflateRaw, gzip_1$1 as gzip, inflate_1$2 as inflate, inflateRaw_1$1 as inflateRaw, ungzip_1 as ungzip };\n","// @flow\n\nimport {WritableDataStorage, DataStorage} from \"./index\";\nimport {inflate, deflate} from \"pako\";\n/**\n * The ZipStorage class composes with other WritableDataStorage implementations.\n * It compresses `value`s before passing them into the underlying `baseStorage`\n * implementation, and decompresses them upon receit  from `baseStorage`.\n */\nexport class ZipStorage implements DataStorage {\n  +_baseStorage: DataStorage;\n\n  constructor(baseStorage: DataStorage) {\n    this._baseStorage = baseStorage;\n  }\n\n  async get(key: string): Promise<Uint8Array> {\n    const data = await this._baseStorage.get(key);\n    return inflate(data, {to: \"Uint8Array\"});\n  }\n}\n\nexport class WritableZipStorage\n  extends ZipStorage\n  implements WritableDataStorage {\n  +_baseStorage: WritableDataStorage;\n\n  constructor(baseStorage: WritableDataStorage) {\n    super(baseStorage);\n    this._baseStorage = baseStorage;\n  }\n\n  async set(key: string, value: Uint8Array): Promise<void> {\n    this._baseStorage.set(key, deflate(value));\n  }\n}\n","// @flow\n\nimport {DataStorage} from \"./index\";\nimport fetch from \"cross-fetch\";\n\n/**\n * This class serves as a simple wrapper for http GET requests using fetch.\n * If an empty string is passed as the base, the base will be interpretted\n * as '.'\n */\nexport class NetworkStorage implements DataStorage {\n  _base: string;\n\n  constructor(base: string) {\n    this._base = base;\n  }\n\n  /**\n   * This get method will error if a non-200 or 300-level status was returned,\n   * or if the resource traverses above the base path.\n   */\n  async get(resource: string): Promise<Uint8Array> {\n    const path = new URL(resource, this._base).href;\n    if (!path.startsWith(this._base))\n      throw new Error(\n        `Path traversal is not allowed. ${path} does not begin with ${this._base} -- try adding trailing / to base`\n      );\n    const result = await fetch(path);\n    if (!result.ok) {\n      const error = new Error(\n        `Error fetching ${resource}: ${result.status} ${result.statusText}`\n      );\n      error.number = result.status;\n      throw error;\n    }\n\n    return new Uint8Array(await result.arrayBuffer());\n  }\n}\n","// @flow\n\nimport * as P from \"../util/combo\";\n\n/**\n * A PluginId uniquely identifies a Plugin.\n *\n * Each PluginId takes a `owner/name` format, as in\n * `sourcecred/github`.\n *\n * PluginIds are canonically lower-case.\n */\nexport opaque type PluginId: string = string;\n\nconst regex = /^[a-z0-9-]+$/;\n\nexport function fromString(s: string): PluginId {\n  s = s.toLowerCase();\n  const pieces = s.split(\"/\");\n  if (pieces.length !== 2) {\n    throw new Error(`PluginId must have exactly one \"/\" separator; got \"${s}\"`);\n  }\n  if (!pieces[0].match(regex)) {\n    throw new Error(`plugin owner not valid: \"${pieces[0]}\"`);\n  }\n  if (!pieces[1].match(regex)) {\n    throw new Error(`plugin name not valid: \"${pieces[1]}\"`);\n  }\n  return s;\n}\n\nexport function getPluginOwner(id: PluginId): string {\n  return id.split(\"/\")[0];\n}\n\nexport function getPluginName(id: PluginId): string {\n  return id.split(\"/\")[1];\n}\n\nexport const parser: P.Parser<PluginId> = P.fmap(P.string, fromString);\n","// @flow\n\nimport deepFreeze from \"deep-freeze\";\nimport type {PluginDeclaration} from \"../../analysis/pluginDeclaration\";\nimport {type PluginId, getPluginName, getPluginOwner} from \"../../api/pluginId\";\nimport {NodeAddress, EdgeAddress, type NodeAddressT} from \"../../core/graph\";\n\nexport function contributionNodeType(\n  id: PluginId\n): {|\n  +defaultWeight: number,\n  +description: string,\n  +name: string,\n  +pluralName: string,\n  +prefix: NodeAddressT,\n|} {\n  return deepFreeze({\n    name: \"Contribution\",\n    pluralName: \"Contributions\",\n    prefix: NodeAddress.fromParts([\n      getPluginOwner(id),\n      getPluginName(id),\n      \"CONTRIBUTION\",\n    ]),\n    defaultWeight: 1,\n    description: \"NodeType for a generic contribution\",\n  });\n}\n\nexport function participantNodeType(\n  id: PluginId\n): {|\n  +defaultWeight: number,\n  +description: string,\n  +name: string,\n  +pluralName: string,\n  +prefix: NodeAddressT,\n|} {\n  return deepFreeze({\n    name: \"Participant\",\n    pluralName: \"Participant\",\n    prefix: NodeAddress.fromParts([\n      getPluginOwner(id),\n      getPluginName(id),\n      \"PARTICIPANT\",\n    ]),\n    defaultWeight: 1,\n    description: \"NodeType for a generic participant\",\n  });\n}\n\nfunction participatedInEdgeType(id: PluginId) {\n  return deepFreeze({\n    forwardName: \"participated in\",\n    backwardName: \"had participation from\",\n    defaultWeight: {forwards: 1 / 2, backwards: 1},\n    prefix: EdgeAddress.fromParts([\n      getPluginOwner(id),\n      getPluginName(id),\n      \"PARTICIPATES_IN\",\n    ]),\n    description: \"NodeType for a generic participant-contribution relationship\",\n  });\n}\n\nexport function declaration(id: PluginId): PluginDeclaration {\n  return deepFreeze({\n    name: getPluginName(id),\n    nodePrefix: NodeAddress.fromParts([getPluginOwner(id), getPluginName(id)]),\n    edgePrefix: EdgeAddress.fromParts([getPluginOwner(id), getPluginName(id)]),\n    nodeTypes: [participantNodeType(id), contributionNodeType(id)],\n    edgeTypes: [participatedInEdgeType(id)],\n    userTypes: [participantNodeType(id)],\n  });\n}\n","// @flow\n\nimport type {Plugin, PluginDirectoryContext} from \"../../api/plugin\";\nimport {\n  type PluginDeclaration,\n  declarationParser,\n} from \"../../analysis/pluginDeclaration\";\nimport {join as pathJoin} from \"path\";\nimport type {TaskReporter} from \"../../util/taskReporter\";\nimport type {ReferenceDetector} from \"../../core/references\";\nimport {\n  type WeightedGraph,\n  fromJSON as weightedGraphFromJSON,\n  type WeightedGraphJSON,\n  empty as emptyWeightedGraph,\n} from \"../../core/weightedGraph\";\nimport {loadJson, loadJsonWithDefault} from \"../../util/storage\";\nimport {merge as mergeWeights} from \"../../core/weights\";\nimport {weightsForDeclaration} from \"../../analysis/pluginDeclaration\";\nimport type {PluginId} from \"../../api/pluginId\";\nimport {ZipStorage} from \"../../core/storage/zip\";\nimport {\n  type IdentityProposal,\n  identityProposalsParser,\n} from \"../../core/ledger/identityProposal\";\nimport * as Combo from \"../../util/combo\";\nimport type {DataStorage} from \"../../core/storage\";\nimport {NetworkStorage} from \"../../core/storage/networkStorage\";\nimport {declaration as defaultDeclaration} from \"./defaultDeclaration\";\nimport * as C from \"../../util/combo\";\n\nexport const ExternalPluginIdOwner = \"external\";\n\nconst FileNames = {\n  GRAPH: \"graph.json\",\n  GRAPH_ZIP: \"graph\",\n  DECLARATION: \"declaration.json\",\n  IDENTITIES: \"identityProposals.json\",\n};\ntype FileType = $Keys<typeof FileNames>;\n\ntype ExternalPluginConfig = {|\n  +graphUrl: string,\n  +declarationUrl?: string,\n  +identityProposalsUrl?: string,\n|};\n\nconst configParser: C.Parser<ExternalPluginConfig> = C.object(\n  {\n    graphUrl: C.string,\n  },\n  {\n    declarationUrl: C.string,\n    identityProposalsUrl: C.string,\n  }\n);\n\n/**\nA dynamic plugin that allows 3rd parties to rapidly pipe data into an instance.\n\nThe External plugin can be used multiple times, because it simply uses the \nPluginId pattern \"external/X\" where X can be any name (but preferably an agreed \nupon name between the 3rd-party software and the instance maintainer).\n\nThe External plugin loads its graph and optionally its declaration and \nidentityProposals from either:\n1. the plugin config folder on disk\n    - To use this method, simply place the files into the \n      `config/plugins/external/X` folder.\n2. a base url that statically serves the files\n    - To use this method, simply serve the files statically with cross-origin \n      enabled in the same directory, and add a `config.json` file in the \n      instance's `config/plugins/external/X` folder with form: \n      `{ \"Url\": \"https://www.myhost.com/path/to/directory\" }`\n\nSupported files for either method are:\n1. `graph.json`/`graph.json.gzip` (required) - works whether or not it is \n    compressed using our library\n2. `declaration.json` (optional) - if omitted, a default declaration with\n    minimal node/edge types is used, but also graphs don't have to adhere to the\n    declaration if they don't desire to be configured using our \n    Weight Configuration UI.\n3. `identityProposals.json` (optional) - if omitted, no identities are proposed\n\n*/\nexport class ExternalPlugin implements Plugin {\n  id: PluginId;\n  storage: ?DataStorage;\n  defaultConfigDirectory: PluginDirectoryContext;\n  config: ?ExternalPluginConfig;\n\n  constructor(options: {|\n    +pluginId: PluginId,\n    +storage?: DataStorage,\n    +config?: ExternalPluginConfig,\n  |}) {\n    if (!options.storage && !options.config)\n      throw new Error(\n        \"Must provide either config or storage parameter to construct ExternalPlugin.\"\n      );\n    this.id = options.pluginId;\n    this.storage = options.storage;\n    this.defaultConfigDirectory = {\n      configDirectory: () => pathJoin(\"config/plugins/\", options.pluginId),\n      cacheDirectory: () => pathJoin(\"cache/\", options.pluginId),\n    };\n    this.config = options.config;\n  }\n\n  async getConfig(\n    ctx: PluginDirectoryContext\n  ): Promise<ExternalPluginConfig | void> {\n    if (this.config) return this.config;\n    const path = pathJoin(ctx.configDirectory(), \"config.json\");\n    if (!this.storage)\n      throw \"Something is wrong. Either storage or config should exist.\";\n    return loadJsonWithDefault(\n      this.storage,\n      path,\n      configParser,\n      () => undefined\n    );\n  }\n\n  async getStorage(\n    ctx: PluginDirectoryContext,\n    file: FileType\n  ): Promise<{\n    storage: DataStorage,\n    path: string,\n  } | void> {\n    const config = await this.getConfig(ctx);\n    if (config) {\n      switch (file) {\n        case \"GRAPH\":\n        case \"GRAPH_ZIP\":\n          return {storage: new NetworkStorage(config.graphUrl), path: \"\"};\n        case \"DECLARATION\":\n          return config.declarationUrl\n            ? {\n                storage: new NetworkStorage(config.declarationUrl),\n                path: \"\",\n              }\n            : undefined;\n        case \"IDENTITIES\":\n          return config.identityProposalsUrl\n            ? {\n                storage: new NetworkStorage(config.identityProposalsUrl),\n                path: \"\",\n              }\n            : undefined;\n      }\n    }\n    if (!this.storage)\n      throw \"Something is wrong. Either storage or config should exist.\";\n    return {\n      storage: this.storage,\n      path: pathJoin(ctx.configDirectory(), FileNames[file]),\n    };\n  }\n\n  async declaration(): Promise<PluginDeclaration> {\n    const result = await this.getStorage(\n      this.defaultConfigDirectory,\n      \"DECLARATION\"\n    );\n    const json = result\n      ? await loadJsonWithDefault(\n          result.storage,\n          result.path,\n          declarationParser,\n          () => null\n        )\n      : null;\n    return json ? json : defaultDeclaration(this.id);\n  }\n\n  async load(\n    _unused_ctx: PluginDirectoryContext,\n    _unused_reporter: TaskReporter\n  ): Promise<void> {\n    return;\n  }\n\n  async graph(\n    ctx: PluginDirectoryContext,\n    _unused_rd: ReferenceDetector\n  ): Promise<WeightedGraph> {\n    const result = await this.getStorage(ctx, \"GRAPH\");\n    const zipResult = await this.getStorage(ctx, \"GRAPH_ZIP\");\n    if (!result || !zipResult)\n      throw \"Something is wrong. Graph must have storage or config.\";\n    const graphJSON = await loadJson(\n      result.storage,\n      result.path,\n      ((Combo.raw: any): Combo.Parser<WeightedGraphJSON>)\n    ).catch(() => {\n      return loadJson(\n        new ZipStorage(zipResult.storage),\n        zipResult.path,\n        ((Combo.raw: any): Combo.Parser<WeightedGraphJSON>)\n      );\n    });\n    const wg = weightedGraphFromJSON(graphJSON);\n    const declarationWeights = weightsForDeclaration(await this.declaration());\n    return {\n      graph: wg.graph,\n      weights: mergeWeights([wg.weights, declarationWeights]),\n    };\n  }\n\n  async referenceDetector(\n    _unused_ctx: PluginDirectoryContext\n  ): Promise<ReferenceDetector> {\n    return {addressFromUrl: () => undefined};\n  }\n\n  async identities(\n    ctx: PluginDirectoryContext\n  ): Promise<$ReadOnlyArray<IdentityProposal>> {\n    const result = await this.getStorage(ctx, \"IDENTITIES\");\n    return result\n      ? await loadJsonWithDefault(\n          result.storage,\n          result.path,\n          identityProposalsParser,\n          () => []\n        )\n      : [];\n  }\n}\n\n/**\nA way for 3rd-party developers to easily test their External Plugin.\nAfter generating a WeightedGraph, a Declaration, and IdentityProposals,\na developer could instantiate a ConstructorPlugin and pass it into our\n`graph` API using our library in environments such as Observable.\nThis is a prerequisite for testing using `credrank` because of the \nIdentityProposals. Once satisfied with the result, they can serve their files\nfor consumption by an ExternalPlugin configuration.\n */\nexport class ConstructorPlugin {\n  _weightedGraph: WeightedGraph;\n  _identityProposals: $ReadOnlyArray<IdentityProposal>;\n  _declaration: PluginDeclaration;\n\n  constructor(options: {|\n    +weightedGraph?: WeightedGraph,\n    +identityProposals?: $ReadOnlyArray<IdentityProposal>,\n    +declaration?: PluginDeclaration,\n    +pluginId?: PluginId,\n  |}) {\n    this._weightedGraph = options.weightedGraph || emptyWeightedGraph();\n    this._identityProposals = options.identityProposals || [];\n    if (options.declaration) this._declaration = options.declaration;\n    else if (options.pluginId)\n      this._declaration = defaultDeclaration(options.pluginId);\n    else throw new Error(\"Must provide either a declaration or a pluginId\");\n  }\n\n  async declaration(): Promise<PluginDeclaration> {\n    return this._declaration;\n  }\n\n  async load(\n    _unused_ctx: PluginDirectoryContext,\n    _unused_reporter: TaskReporter\n  ): Promise<void> {}\n\n  async graph(\n    _unused_ctx: PluginDirectoryContext,\n    _unused_rd: ReferenceDetector\n  ): Promise<WeightedGraph> {\n    return this._weightedGraph;\n  }\n\n  async referenceDetector(\n    _unused_ctx: PluginDirectoryContext\n  ): Promise<ReferenceDetector> {\n    return {addressFromUrl: () => undefined};\n  }\n\n  async identities(\n    _unused_ctx: PluginDirectoryContext\n  ): Promise<$ReadOnlyArray<IdentityProposal>> {\n    return this._identityProposals;\n  }\n}\n","// @flow\n\nimport {type Edge, type Graph, type NodeAddressT} from \"../graph\";\nimport {type Distribution} from \"./distribution\";\nimport {type Probability, type NodeDistribution} from \"./nodeDistribution\";\nimport {type SparseMarkovChain} from \"./markovChain\";\nimport * as MapUtil from \"../../util/map\";\nimport * as NullUtil from \"../../util/null\";\n\nexport type Adjacency =\n  | {|+type: \"SYNTHETIC_LOOP\"|}\n  | {|+type: \"IN_EDGE\", +edge: Edge|}\n  | {|+type: \"OUT_EDGE\", +edge: Edge|};\nexport type Connection = {|\n  +adjacency: Adjacency,\n  // This `weight` is a conditional probability: given that you're at\n  // the source of this connection's adjacency, what's the\n  // probability that you travel along this connection to the target?\n  +weight: Probability,\n|};\n\nexport function adjacencySource(\n  target: NodeAddressT,\n  adjacency: Adjacency\n): NodeAddressT {\n  switch (adjacency.type) {\n    case \"SYNTHETIC_LOOP\":\n      return target;\n    case \"IN_EDGE\":\n      return adjacency.edge.src;\n    case \"OUT_EDGE\":\n      return adjacency.edge.dst;\n    default:\n      throw new Error((adjacency.type: empty));\n  }\n}\n\nexport type NodeToConnections = Map<NodeAddressT, $ReadOnlyArray<Connection>>;\n\ntype NodeAddressMarkovChain = Map<\n  NodeAddressT,\n  /* in-neighbors */ Map<NodeAddressT, Probability>\n>;\n\nexport type OrderedSparseMarkovChain = {|\n  +nodeOrder: $ReadOnlyArray<NodeAddressT>,\n  +chain: SparseMarkovChain,\n|};\n\nexport type EdgeWeight = {|\n  +forwards: number, // weight from src to dst\n  +backwards: number, // weight from dst to src\n|};\n\nexport function createConnections(\n  graph: Graph,\n  edgeWeight: (Edge) => EdgeWeight,\n  syntheticLoopWeight: number\n): NodeToConnections {\n  const result = new Map();\n  const totalOutWeight: Map<NodeAddressT, number> = new Map();\n  for (const node of graph.nodes()) {\n    result.set(node.address, []);\n    totalOutWeight.set(node.address, 0);\n  }\n\n  function processConnection(target: NodeAddressT, connection: Connection) {\n    const connections = NullUtil.get(result.get(target));\n    (((connections: $ReadOnlyArray<Connection>): any): Connection[]).push(\n      connection\n    );\n    const source = adjacencySource(target, connection.adjacency);\n    const priorOutWeight = NullUtil.get(totalOutWeight.get(source));\n    totalOutWeight.set(source, priorOutWeight + connection.weight);\n  }\n\n  // Add self-loops.\n  for (const node of graph.nodes()) {\n    processConnection(node.address, {\n      adjacency: {type: \"SYNTHETIC_LOOP\"},\n      weight: syntheticLoopWeight,\n    });\n  }\n\n  // Process edges.\n  for (const edge of graph.edges({showDangling: false})) {\n    const {forwards, backwards} = edgeWeight(edge);\n    const {src, dst} = edge;\n    processConnection(dst, {\n      adjacency: {type: \"IN_EDGE\", edge},\n      weight: forwards,\n    });\n    processConnection(src, {\n      adjacency: {type: \"OUT_EDGE\", edge},\n      weight: backwards,\n    });\n  }\n\n  // Normalize in-weights.\n  for (const [target, connections] of result.entries()) {\n    for (const connection of connections) {\n      const source = adjacencySource(target, connection.adjacency);\n      const normalization = NullUtil.get(totalOutWeight.get(source));\n      const newWeight: typeof connection.weight =\n        connection.weight / normalization;\n      // (any-cast because property is not writable)\n      (connection: any).weight = newWeight;\n    }\n  }\n\n  return result;\n}\n\nfunction createNodeAddressMarkovChain(\n  ntc: NodeToConnections\n): NodeAddressMarkovChain {\n  return MapUtil.mapValues(ntc, (target, connections) => {\n    const inNeighbors = new Map();\n    for (const connection of connections) {\n      const source = adjacencySource(target, connection.adjacency);\n      inNeighbors.set(\n        source,\n        connection.weight + NullUtil.orElse(inNeighbors.get(source), 0)\n      );\n    }\n    return inNeighbors;\n  });\n}\n\nfunction nodeAddressMarkovChainToOrderedSparseMarkovChain(\n  chain: NodeAddressMarkovChain\n): OrderedSparseMarkovChain {\n  const nodeOrder = Array.from(chain.keys());\n  const addressToIndex: Map<NodeAddressT, number> = new Map();\n  nodeOrder.forEach((node, index) => {\n    addressToIndex.set(node, index);\n  });\n  return {\n    nodeOrder,\n    chain: nodeOrder.map((dst) => {\n      const theseNeighbors = NullUtil.get(chain.get(dst));\n      const result = {\n        neighbor: new Uint32Array(theseNeighbors.size),\n        weight: new Float64Array(theseNeighbors.size),\n      };\n      let i = 0;\n      for (const [src, weight] of theseNeighbors.entries()) {\n        const srcIndex = NullUtil.get(addressToIndex.get(src));\n        result.neighbor[i] = srcIndex;\n        result.weight[i] = weight;\n        i++;\n      }\n      return result;\n    }),\n  };\n}\n\nexport function createOrderedSparseMarkovChain(\n  connections: NodeToConnections\n): OrderedSparseMarkovChain {\n  const chain = createNodeAddressMarkovChain(connections);\n  return nodeAddressMarkovChainToOrderedSparseMarkovChain(chain);\n}\n\n/**\n * Return an equivalent form of the given chain whose `nodeOrder` is the\n * provided array, which must be a permutation of the node order of the\n * original chain.\n */\nexport function permute(\n  old: OrderedSparseMarkovChain,\n  newOrder: $ReadOnlyArray<NodeAddressT>\n): OrderedSparseMarkovChain {\n  const newIndices: {[NodeAddressT]: number} = {};\n  const oldIndices: {[NodeAddressT]: number} = {};\n  newOrder.forEach((node, i) => {\n    newIndices[node] = i;\n  });\n  old.nodeOrder.forEach((node, i) => {\n    oldIndices[node] = i;\n  });\n  const newChain = [];\n  for (const node of newOrder) {\n    const {neighbor: oldNeighbors, weight} = old.chain[oldIndices[node]];\n    const newNeighbors = oldNeighbors.map(\n      (oldIndex) => newIndices[old.nodeOrder[oldIndex]]\n    );\n    newChain.push({neighbor: newNeighbors, weight});\n  }\n  return {\n    nodeOrder: newOrder,\n    chain: newChain,\n  };\n}\n\n/**\n * Return an equivalent form of the given chain such that for for each\n * node, the entries in `chain[node].neighbors` are sorted.\n */\nexport function normalizeNeighbors(\n  old: OrderedSparseMarkovChain\n): OrderedSparseMarkovChain {\n  return {\n    nodeOrder: old.nodeOrder,\n    chain: old.chain.map(({neighbor, weight}) => {\n      if (neighbor.length !== weight.length) {\n        throw new Error(`${neighbor.length} !== ${weight.length}`);\n      }\n      const entries = Array(neighbor.length)\n        .fill(null)\n        .map((_, i) => ({neighbor: neighbor[i], weight: weight[i]}));\n      entries.sort((a, b) => a.neighbor - b.neighbor);\n      return {\n        neighbor: new Uint32Array(entries.map((x) => x.neighbor)),\n        weight: new Float64Array(entries.map((x) => x.weight)),\n      };\n    }),\n  };\n}\n\nexport function normalize(\n  old: OrderedSparseMarkovChain\n): OrderedSparseMarkovChain {\n  return normalizeNeighbors(permute(old, old.nodeOrder.slice().sort()));\n}\n\nexport function distributionToNodeDistribution(\n  nodeOrder: $ReadOnlyArray<NodeAddressT>,\n  pi: Distribution\n): NodeDistribution {\n  const result = new Map();\n  nodeOrder.forEach((node, i) => {\n    const probability = pi[i];\n    result.set(node, probability);\n  });\n  return result;\n}\n","// @flow\n\n/**\n * A distribution over the integers `0` through `n - 1`, where `n` is\n * the length of the array. The value at index `i` is the probability of\n * `i` in the distribution. The values should sum to 1.\n */\nexport type Distribution = Float64Array;\n\nexport function uniformDistribution(n: number): Distribution {\n  if (isNaN(n) || !isFinite(n) || n !== Math.floor(n) || n <= 0) {\n    throw new Error(\"expected positive integer, but got: \" + n);\n  }\n  return new Float64Array(n).fill(1 / n);\n}\n\n/**\n * Compute the maximum difference (in absolute value) between components in two\n * distributions.\n *\n * Equivalent to $\\norm{pi0 - pi1}_\\infty$.\n */\nexport function computeDelta(pi0: Distribution, pi1: Distribution): number {\n  if (pi0.length === 0 || pi0.length !== pi1.length) {\n    throw new Error(\"invalid input\");\n  }\n  let maxDelta = -Infinity;\n  // Here, we assume that `pi0.nodeOrder` and `pi1.nodeOrder` are the\n  // same (i.e., there has been no permutation).\n  pi0.forEach((x, i) => {\n    const delta = Math.abs(x - pi1[i]);\n    maxDelta = Math.max(delta, maxDelta);\n  });\n  return maxDelta;\n}\n","// @flow\n\nimport {computeDelta, type Distribution} from \"./distribution\";\n/**\n * The data inputs to running PageRank.\n *\n * We keep these separate from the PagerankOptions below,\n * because we expect that within a given context, every call to\n * findStationaryDistribution (or other Pagerank functions) will\n * have different PagerankParams, but often have the same PagerankOptions.\n */\nexport type PagerankParams = {|\n  // The Markov Chain to run PageRank on.\n  +chain: SparseMarkovChain,\n  // The initial distribution to start from.\n  +pi0: Distribution,\n  // The seed vector that PageRank 'teleports' back to.\n  +seed: Distribution,\n  // The probability of teleporting back to the seed vector.\n  // If alpha=0, then the seed vector is irrelevant.\n  // If alpha=1, then it trivially converges to the seed vector.\n  +alpha: number,\n|};\n\n/**\n * PagerankOptions allows the user to tweak PageRank's behavior, especially around\n * convergence.\n */\nexport type PagerankOptions = {|\n  // Causes runtime information to get logged to console.\n  +verbose: boolean,\n  // A distribution is considered stationary if the action of the Markov\n  // chain on the distribution does not change any component by more than\n  // `convergenceThreshold` in absolute value.\n  +convergenceThreshold: number,\n  // We will run maxIterations markov chain steps at most.\n  +maxIterations: number,\n  // To prevent locking the rest of the application, PageRank will yield control\n  // after this many miliseconds, allowing UI updates, etc.\n  +yieldAfterMs: number,\n|};\n\nexport type StationaryDistributionResult = {|\n  // The final distribution after attempting to find the stationary distribution\n  // of the Markov chain.\n  +pi: Distribution,\n\n  // Reports how close the returned distribution is to being converged.\n  //\n  // If the convergenceDelta is near zero, then the distribution is well-converged\n  // (stationary).\n  //\n  // Specifically: let `x` be the distribution being returned, and let `x'` be the\n  // distribution after one additional Markov action, i.e.\n  // `x' = sparseMarkovChainAction(chain, x)`\n  // Then the convergence delta is the maximum difference in absolute value between components\n  // in `x` and `x'`.\n  +convergenceDelta: number,\n|};\n\n/**\n * A representation of a sparse transition matrix that is convenient for\n * computations on Markov chains.\n *\n * A Markov chain has nodes indexed from `0` to `n - 1`, where `n` is\n * the length of the chain. The elements of the chain represent the\n * incoming edges to each node. Specifically, for each node `v`, the\n * in-degree of `v` equals the length of both `chain[v].neighbor` and\n * `chain[v].weight`. For each `i` from `0` to the degree of `v`\n * (exclusive), there is an edge to `v` from `chain[v].neighbor[i]` with\n * weight `chain[v].weight[i]`.\n *\n * In other words, `chain[v]` is a sparse-vector representation of\n * column `v` of the transition matrix of the Markov chain.\n */\nexport type SparseMarkovChain = $ReadOnlyArray<{|\n  +neighbor: Uint32Array,\n  +weight: Float64Array,\n|}>;\n\nexport function sparseMarkovChainFromTransitionMatrix(\n  matrix: $ReadOnlyArray<$ReadOnlyArray<number>>\n): SparseMarkovChain {\n  const n = matrix.length;\n  matrix.forEach((row, i) => {\n    if (row.length !== n) {\n      throw new Error(\n        `expected rows to have length ${n}, but row ${i} has ${row.length}`\n      );\n    }\n  });\n  matrix.forEach((row, i) => {\n    row.forEach((value, j) => {\n      if (isNaN(value) || !isFinite(value) || value < 0) {\n        throw new Error(\n          `expected positive real entries, but [${i}][${j}] is ${value}`\n        );\n      }\n    });\n  });\n  matrix.forEach((row, i) => {\n    const rowsum = row.reduce((a, b) => a + b, 0);\n    if (Math.abs(rowsum - 1) > 1e-6) {\n      throw new Error(\n        `expected rows to sum to 1, but row ${i} sums to ${rowsum}`\n      );\n    }\n  });\n  return matrix.map((_, j) => {\n    const column = matrix\n      .map((row, i) => [i, row[j]])\n      .filter(([_, p]) => p > 0);\n    return {\n      neighbor: new Uint32Array(column.map(([i, _]) => i)),\n      weight: new Float64Array(column.map(([_, p]) => p)),\n    };\n  });\n}\n\nfunction sparseMarkovChainActionInto(\n  chain: SparseMarkovChain,\n  seed: Distribution,\n  alpha: number,\n  input: Distribution,\n  output: Distribution\n): void {\n  chain.forEach(({neighbor, weight}, dst) => {\n    const inDegree = neighbor.length; // (also `weight.length`)\n    let probability = alpha * seed[dst];\n    for (let i = 0; i < inDegree; i++) {\n      const src = neighbor[i];\n      probability += (1 - alpha) * input[src] * weight[i];\n    }\n    output[dst] = probability;\n  });\n}\n\nexport function sparseMarkovChainAction(\n  chain: SparseMarkovChain,\n  seed: Distribution,\n  alpha: number,\n  pi: Distribution\n): Distribution {\n  const result = new Float64Array(pi.length);\n  sparseMarkovChainActionInto(chain, seed, alpha, pi, result);\n  return result;\n}\n\nfunction* findStationaryDistributionGenerator(\n  params: PagerankParams,\n  options: {|\n    +verbose: boolean,\n    // A distribution is considered stationary if the action of the Markov\n    // chain on the distribution does not change any component by more than\n    // `convergenceThreshold` in absolute value.\n    +convergenceThreshold: number,\n    // We will run maxIterations markov chain steps at most.\n    +maxIterations: number,\n  |}\n): Generator<void, StationaryDistributionResult, void> {\n  const {chain, pi0, seed, alpha} = params;\n  let pi = new Float64Array(pi0);\n  let scratch = new Float64Array(pi.length);\n\n  let nIterations = 0;\n  while (true) {\n    if (nIterations >= options.maxIterations) {\n      if (options.verbose) {\n        console.log(`[${nIterations}] FAILED to converge`);\n      }\n      // We need to do one more step so that we can compute the empirical convergence\n      // delta for the returned distribution.\n      sparseMarkovChainActionInto(chain, seed, alpha, pi, scratch);\n      const convergenceDelta = computeDelta(pi, scratch);\n      return {pi, convergenceDelta};\n    }\n    nIterations++;\n    sparseMarkovChainActionInto(chain, seed, alpha, pi, scratch);\n    // We compute the convergenceDelta between 'scratch' (the newest\n    // distribution) and 'pi' (the distribution from the previous step). If the\n    // delta is below threshold, then the distribution from the last step was\n    // already converged and we return it (not scratch). Otherwise, we assign\n    // `scratch` to `distribution` and try again.\n    const convergenceDelta = computeDelta(pi, scratch);\n    if (options.verbose) {\n      console.log(`[${nIterations}] delta = ${convergenceDelta}`);\n    }\n    if (convergenceDelta < options.convergenceThreshold) {\n      if (options.verbose) {\n        console.log(`[${nIterations}] CONVERGED`);\n      }\n      return {pi, convergenceDelta};\n    }\n    [scratch, pi] = [pi, scratch];\n    yield;\n  }\n  // ESLint knows that this next line is unreachable, but Flow doesn't. :-)\n  // eslint-disable-next-line no-unreachable\n  throw new Error(\"Unreachable.\");\n}\n\nexport function findStationaryDistribution(\n  params: PagerankParams,\n  options: PagerankOptions\n): Promise<StationaryDistributionResult> {\n  const gen = findStationaryDistributionGenerator(params, {\n    verbose: options.verbose,\n    convergenceThreshold: options.convergenceThreshold,\n    maxIterations: options.maxIterations,\n  });\n  return new Promise((resolve, _unused_reject) => {\n    const {yieldAfterMs} = options;\n    const tick = () => {\n      const start = Date.now();\n      do {\n        const result = gen.next();\n        if (result.done) {\n          if (result.value == null) {\n            // Should never happen.\n            throw new Error(String(result.value));\n          }\n          resolve(result.value);\n          return;\n        }\n      } while (Date.now() - start < yieldAfterMs);\n      setTimeout(tick, 0);\n    };\n    tick();\n  });\n}\n","// @flow\n\nimport {type AddressModule} from \"./address\";\nimport {\n  NodeAddress,\n  type NodeAddressT,\n  EdgeAddress,\n  type EdgeAddressT,\n} from \"./graph\";\nimport * as NullUtil from \"../util/null\";\n\nconst EMPTY_ENTRY_SYMBOL: symbol = Symbol(\"EMPTY\");\n\ntype Entry<V> = {|+map: RecursiveMap<V>, value: V | typeof EMPTY_ENTRY_SYMBOL|};\ntype RecursiveMap<V> = Map<string, Entry<V>>;\nclass BaseTrie<K: string, V> {\n  addressModule: AddressModule<K>;\n  entry: Entry<V>;\n\n  /**\n   * Create an empty trie backed by the given address module.\n   */\n  constructor(m: AddressModule<K>) {\n    this.addressModule = m;\n    this.entry = {value: EMPTY_ENTRY_SYMBOL, map: new Map()};\n  }\n\n  /**\n   * Add key `k` to this trie with value `v`. Return `this`.\n   */\n  add(k: K, val: V): this {\n    const parts = this.addressModule.toParts(k);\n    let entry = this.entry;\n    for (const part of parts) {\n      if (!entry.map.has(part)) {\n        entry.map.set(part, {map: new Map(), value: EMPTY_ENTRY_SYMBOL});\n      }\n      entry = NullUtil.get(entry.map.get(part));\n    }\n    if (entry.value !== EMPTY_ENTRY_SYMBOL) {\n      throw new Error(\n        `Tried to overwrite entry at ${this.addressModule.toString(k)}`\n      );\n    }\n    entry.value = val;\n    return this;\n  }\n\n  /**\n   * Get the values in this trie along the path to `k`.\n   *\n   * More specifically, this method has the following observable\n   * behavior. Let `inits` be the list of all prefixes of `k`, ordered\n   * by length (shortest to longest). Observe that the length of `inits`\n   * is `n + 1`, where `n` is the number of parts of `k`; `inits` begins\n   * with the empty address and ends with `k` itself. Initialize the\n   * result to an empty array. For each prefix `p` in `inits`, if `p`\n   * was added to this trie with value `v`, then append `v` to\n   * `result`. Return `result`.\n   */\n  get(k: K): V[] {\n    const parts = this.addressModule.toParts(k);\n    const result: V[] = [];\n    let entry: Entry<V> = this.entry;\n    // nb: if parts has length `n`, there are `n+1` opportunities to add a\n    // value to the resultant array, which is correct as there may be `n+1`\n    // appropriate values to return: one for each part, and another for the\n    // empty address.\n    for (const part of parts) {\n      if (entry.value !== EMPTY_ENTRY_SYMBOL) {\n        const value: V = (entry.value: any);\n        result.push(value);\n      }\n      const tmpEntry = entry.map.get(part);\n      if (tmpEntry == null) {\n        return result;\n      } else {\n        entry = tmpEntry;\n      }\n    }\n    if (entry.value !== EMPTY_ENTRY_SYMBOL) {\n      const value: V = (entry.value: any);\n      result.push(value);\n    }\n    return result;\n  }\n\n  /**\n   * Get the last stored value `v` in the path to key `k`.\n   * Returns undefined if no value is available.\n   */\n  getLast(k: K): ?V {\n    const path = this.get(k);\n    return path[path.length - 1];\n  }\n}\n\nexport class NodeTrie<V> extends BaseTrie<NodeAddressT, V> {\n  constructor() {\n    super(NodeAddress);\n  }\n}\n\nexport class EdgeTrie<V> extends BaseTrie<EdgeAddressT, V> {\n  constructor() {\n    super(EdgeAddress);\n  }\n}\n","// @flow\n\nimport type {NodeAddressT, EdgeAddressT} from \"../graph\";\nimport type {WeightsT, EdgeWeight, NodeWeight} from \"../weights\";\nimport {NodeTrie, EdgeTrie} from \"../trie\";\n\nexport type NodeWeightEvaluator = (NodeAddressT) => NodeWeight;\nexport type EdgeWeightEvaluator = (EdgeAddressT) => EdgeWeight;\n\n/**\n * Given the weights and types, produce a NodeWeightEvaluator, which assigns a\n * numerical weight to any node.\n *\n * The weights are interpreted as prefixes, i.e. a given address may match\n * multiple weights. When this is the case, the matching weights are multiplied\n * together. When no weights match, a default weight of 1 is returned.\n *\n * We currently take the NodeTypes and use them to 'fill in' default type\n * weights if no weight for the type's prefix is explicitly set. This is a\n * legacy affordance; shortly we will remove the NodeTypes and require that the\n * plugins provide the type weights when the Weights object is constructed.\n */\nexport function nodeWeightEvaluator(weights: WeightsT): NodeWeightEvaluator {\n  const nodeTrie: NodeTrie<NodeWeight> = new NodeTrie();\n  for (const [prefix, weight] of weights.nodeWeights.entries()) {\n    nodeTrie.add(prefix, weight);\n  }\n  return function nodeWeight(a: NodeAddressT): NodeWeight {\n    const matchingWeights = nodeTrie.get(a);\n    return matchingWeights.reduce((a, b) => a * b, 1);\n  };\n}\n\n/**\n * Given the weights and the types, produce an EdgeWeightEvaluator,\n * which will assign an EdgeWeight to any edge.\n *\n * The edge weights are interpreted as prefix matchers, so a single edge may\n * match zero or more EdgeWeights. The weight for the edge will be the product\n * of all matching EdgeWeights (with 1 as the default forwards and backwards\n * weight.)\n *\n * The types are used to 'fill in' extra type weights. This is a temporary\n * state of affairs; we will change plugins to include the type weights\n * directly in the weights object, so that producing weight evaluators will no\n * longer depend on having plugin declarations on hand.\n */\nexport function edgeWeightEvaluator(weights: WeightsT): EdgeWeightEvaluator {\n  const edgeTrie: EdgeTrie<EdgeWeight> = new EdgeTrie();\n  for (const [prefix, weight] of weights.edgeWeights.entries()) {\n    edgeTrie.add(prefix, weight);\n  }\n  return function evaluator(address: EdgeAddressT): EdgeWeight {\n    const weights = edgeTrie.get(address);\n    return weights.reduce(\n      (a: EdgeWeight, b: EdgeWeight) => ({\n        forwards: a.forwards * b.forwards,\n        backwards: a.backwards * b.backwards,\n      }),\n      {forwards: 1, backwards: 1}\n    );\n  };\n}\n","//@flow\n\nexport type PluckFn<T> = (T) => any;\n\nconst identity = (x) => x;\n\n/**\n * Sorting utility. Accepts an array and optionally any number of \"pluck\"\n * functions to get the value to sort by. Will create a shallow copy, and sort in ascending order.\n * - `arr`: The input array to sort\n * - `pluckArgs`: (0...n) Functions to get the value to sort by. Defaults to identity.\n */\nexport default function sortBy<T>(\n  arr: $ReadOnlyArray<T>,\n  ...pluckArgs: PluckFn<T>[]\n): T[] {\n  const plucks: PluckFn<T>[] = pluckArgs.length === 0 ? [identity] : pluckArgs;\n\n  function sortByCompare(a: T, b: T) {\n    for (const pluck of plucks) {\n      const valA = pluck(a);\n      const valB = pluck(b);\n      if (valA > valB) return 1;\n      if (valA < valB) return -1;\n    }\n    return 0;\n  }\n\n  return [...arr].sort(sortByCompare);\n}\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;\n  }\n\n  interval.floor = function(date) {\n    return floori(date = new Date(+date)), date;\n  };\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [], previous;\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","import interval from \"./interval.js\";\nimport {durationWeek} from \"./duration.js\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","export const durationSecond = 1000;\nexport const durationMinute = durationSecond * 60;\nexport const durationHour = durationMinute * 60;\nexport const durationDay = durationHour * 24;\nexport const durationWeek = durationDay * 7;\nexport const durationMonth = durationDay * 30;\nexport const durationYear = durationDay * 365;\n","// @flow\n\nimport {max, min} from \"d3-array\";\nimport sortBy from \"../util/sortBy\";\nimport {utcWeek} from \"d3-time\";\nimport * as NullUtil from \"../util/null\";\nimport type {TimestampMs} from \"../util/timestamp\";\nimport type {Node, Edge, Graph} from \"./graph\";\nimport * as C from \"../util/combo\";\n\n/**\n * Represents a time interval\n * The interval is half open [startTimeMs, endTimeMs),\n * i.e. if a timestamp is exactly on the interval boundary, it will fall at the\n * start of the older interval.\n */\nexport type Interval = {|\n  +startTimeMs: TimestampMs,\n  +endTimeMs: TimestampMs,\n|};\n\n/**\n * An interval sequence is an array of intervals with the following guarantees:\n * - Every interval has positive time span (i.e. the end time is greater\n *   than the start time).\n * - Every interval except for the first starts at the same time that the\n *   previous interval ended.\n * - No interval may have a NaN start or end time. (Infinity is OK.)\n */\nexport opaque type IntervalSequence: $ReadOnlyArray<Interval> = $ReadOnlyArray<Interval>;\n\nexport function intervalSequence(\n  intervals: $ReadOnlyArray<Interval>\n): IntervalSequence {\n  let lastEndTime = null;\n  for (const {startTimeMs, endTimeMs} of intervals) {\n    if (isNaN(startTimeMs) || isNaN(endTimeMs)) {\n      throw new Error(`NaN in interval [${startTimeMs}, ${endTimeMs}]`);\n    }\n    if (lastEndTime != null && startTimeMs !== lastEndTime) {\n      throw new Error(\n        `last interval ended at ${lastEndTime} but this interval starts at ${startTimeMs}`\n      );\n    }\n    if (endTimeMs <= startTimeMs) {\n      throw new Error(\n        `interval must have positive length, but got [${startTimeMs}, ${endTimeMs}]`\n      );\n    }\n    lastEndTime = endTimeMs;\n  }\n  // Reconstruct the objects so mutating the input won't break the IntervalSequence\n  return intervals.map(({startTimeMs, endTimeMs}) => ({\n    startTimeMs,\n    endTimeMs,\n  }));\n}\n\nexport const intervalSequenceParser: C.Parser<IntervalSequence> = C.array(\n  C.object({\n    startTimeMs: C.number,\n    endTimeMs: C.number,\n  })\n).fmap((arr) => intervalSequence(arr));\n\n/**\n * Represents a slice of a time-partitioned graph\n * Includes the interval, as well as all of the nodes and edges whose timestamps\n * are within the interval.\n */\nexport type GraphInterval = {|\n  +interval: Interval,\n  +nodes: $ReadOnlyArray<Node>,\n  +edges: $ReadOnlyArray<Edge>,\n|};\n\nexport type GraphIntervalPartition = $ReadOnlyArray<GraphInterval>;\n\ntype TimefulNode = {|...Node, timestampMs: TimestampMs|};\n\n/**\n * Partition a graph based on time intervals.\n *\n * The intervals are always one week long, as calculated using d3.utcWeek.\n * The result may contain empty intervals.\n * If the graph is empty, no intervals are returned.\n * Timeless nodes are not included in the partition, nor are dangling edges.\n */\nexport function partitionGraph(graph: Graph): GraphIntervalPartition {\n  const nodes = Array.from(graph.nodes());\n  const timefulNodes: $ReadOnlyArray<TimefulNode> = (nodes.filter(\n    (x) => x.timestampMs != null\n  ): any);\n  const sortedNodes = sortBy(timefulNodes, (x) => x.timestampMs);\n  const edges = Array.from(graph.edges({showDangling: false}));\n  const sortedEdges = sortBy(edges, (x) => x.timestampMs);\n  const intervals = graphIntervals(graph);\n  let nodeIndex = 0;\n  let edgeIndex = 0;\n  return intervals.map((interval) => {\n    const nodes = [];\n    const edges = [];\n    while (\n      nodeIndex < sortedNodes.length &&\n      sortedNodes[nodeIndex].timestampMs < interval.endTimeMs\n    ) {\n      nodes.push(sortedNodes[nodeIndex++]);\n    }\n    while (\n      edgeIndex < sortedEdges.length &&\n      sortedEdges[edgeIndex].timestampMs < interval.endTimeMs\n    ) {\n      edges.push(sortedEdges[edgeIndex++]);\n    }\n    return {interval, nodes, edges};\n  });\n}\n\n/**\n * Produce an array of Intervals which cover all the node and edge timestamps\n * for a graph.\n *\n * The intervals are one week long, and are aligned on clean week boundaries.\n *\n * This function is basically a wrapper around weekIntervals that makes sure\n * the graph's nodes and edges are all accounted for properly.\n */\nexport function graphIntervals(graph: Graph): IntervalSequence {\n  const nodeTimestamps = Array.from(graph.nodes())\n    .map((x) => x.timestampMs)\n    .filter((x) => x != null)\n    // Unnecessary map is to satisfy flow that the array doesn't contain null.\n    .map((x) => NullUtil.get(x));\n  const edgeTimestamps = Array.from(graph.edges({showDangling: false})).map(\n    (x) => x.timestampMs\n  );\n  if (nodeTimestamps.length === 0 && edgeTimestamps.length === 0) {\n    return [];\n  }\n  const allTimestamps = nodeTimestamps.concat(edgeTimestamps);\n  const start = min(allTimestamps);\n  const end = max(allTimestamps);\n  return weekIntervals(start, end);\n}\n\n/**\n * Produce an array of week-long intervals to cover the startTime and endTime.\n *\n * Each interval is one week long and aligned on week boundaries, as produced\n * by d3.utcWeek. The weeks always use UTC boundaries to ensure consistent\n * output regardless of which timezone the user is in.\n *\n * Assuming that the inputs are valid, there will always be at least one\n * interval, so that that interval can cover the input timestamps. (E.g. if\n * startMs and endMs are the same value, then the produced interval will be the\n * start and end of the last week that starts on or before startMs.)\n */\nexport function weekIntervals(\n  startMs: number,\n  endMs: number\n): IntervalSequence {\n  if (!isFinite(startMs) || !isFinite(endMs)) {\n    throw new Error(\"invalid non-finite input\");\n  }\n  if (typeof startMs !== \"number\" || typeof endMs !== \"number\") {\n    throw new Error(\"start or end are not numbers\");\n  }\n  if (startMs > endMs) {\n    throw new Error(\"start time after end time\");\n  }\n  // Promote the window to the nearest week boundaries, to ensure that\n  // utcWeek.range will not return an empty array.\n  // We add one to the endTime so that just in case we're exactly on a week\n  // boundary, we still get at least one interval.\n  startMs = utcWeek.floor(startMs);\n  endMs = utcWeek.ceil(endMs + 1);\n  const boundaries = utcWeek.range(startMs, endMs);\n  boundaries.push(endMs);\n  const intervals = [];\n  for (let i = 0; i < boundaries.length - 1; i++) {\n    intervals.push({\n      startTimeMs: +boundaries[i],\n      endTimeMs: +boundaries[i + 1],\n    });\n  }\n  return intervalSequence(intervals);\n}\n","export default function min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n","export default function max(values, valueof) {\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  }\n  return max;\n}\n","// @flow\n\nimport findLast from \"lodash.findlast\";\nimport {type IdentityId, identityIdParser} from \"../identity/id\";\nimport type {TimestampMs} from \"../../util/timestamp\";\nimport * as C from \"../../util/combo\";\n\n/**\n  This module allows participants to attribute their cred to other participants.\n  This feature should not be used to make cred sellable/transferable, but\n  instead is intended to allow participants to acknowledge that a portion of\n  their creditted outputs are directly generated/supported by the labor of\n  others. (e.g. when a contributor has a personal assistant working behind the \n  scenes)\n*/\n\n/** \n  A timestamped configuration representing a decimal proportion of cred flow,\n  which can be applied to a participant pair.\n*/\nexport type PersonalAttributionProportion = {|\n  // The start time from which epochs should begin using the proportion\n  +timestampMs: TimestampMs,\n  // decimal proportion (0-1) of cred that should flow between 2 participants\n  +proportionValue: number,\n|};\n/**\n  A recipient of cred attribution and a chronological log of proportion\n  configurations.\n */\nexport type AttributionRecipient = {|\n  +toParticipantId: IdentityId,\n  +proportions: $ReadOnlyArray<PersonalAttributionProportion>,\n|};\n/**\n  A participant that is attributing their cred, and a log of how they are\n  attributing it.\n */\nexport type PersonalAttribution = {|\n  +fromParticipantId: IdentityId,\n  +recipients: $ReadOnlyArray<AttributionRecipient>,\n|};\n/**\n  A list of participants who are attributing their cred, with logs of how\n  they are attributing it.\n */\nexport type PersonalAttributions = $ReadOnlyArray<PersonalAttribution>;\nexport const personalAttributionsParser: C.Parser<PersonalAttributions> = C.array(\n  C.object({\n    fromParticipantId: identityIdParser,\n    recipients: C.array(\n      C.object({\n        toParticipantId: identityIdParser,\n        proportions: C.array(\n          C.object({timestampMs: C.number, proportionValue: C.number})\n        ),\n      })\n    ),\n  })\n);\n\n/**\n  Validates that:\n  1. There is only 1 entry per fromParticipantId.\n  1. Each fromParticipantId only has 1 entry per toParticipantId.\n  2. Proportions are in chronological order.\n  3. Proportions are a number between 0 and 1.\n*/\nexport function validatePersonalAttributions(\n  personalAttributions: PersonalAttributions\n) {\n  personalAttributions.forEach((pa, index) => {\n    if (\n      personalAttributions.findIndex(\n        (x) => x.fromParticipantId === pa.fromParticipantId\n      ) !== index\n    )\n      throw `More than one PersonalAttribution object found with fromParticipantId [${pa.fromParticipantId}]`;\n    pa.recipients.forEach((ar, index) => {\n      if (\n        pa.recipients.findIndex(\n          (x) => x.toParticipantId === ar.toParticipantId\n        ) !== index\n      )\n        throw `More than one AttributionRecipient object found with toParticipantId [${ar.toParticipantId}] for fromParticipantId [${pa.fromParticipantId}] `;\n      ar.proportions.forEach((proportion, index) => {\n        if (\n          index > 0 &&\n          proportion.timestampMs < ar.proportions[index - 1].timestampMs\n        )\n          throw `Personal Attribution proportions not in chronological order for [${pa.fromParticipantId}] to [${ar.toParticipantId}]`;\n        if (proportion.proportionValue < 0 || 1 < proportion.proportionValue)\n          throw `Personal Attribution proportion value must be between 0 and 1, inclusive. Found [${proportion.proportionValue}].`;\n      });\n    });\n  });\n}\n\n/**\n  This is the intermediary data structure used to index personal attributions\n  data, making lookups faster. It can be interpreted as:\n\n  $ReadOnlyMap<\n    fromParticipantId,\n    $ReadOnlyMap<toParticipantId, AttributionRecipient>\n  >\n */\ntype Index = $ReadOnlyMap<\n  IdentityId,\n  $ReadOnlyMap<IdentityId, AttributionRecipient>\n>;\n\n/**\n  An indexed store of PersonalAttributions that includes optimized queries\n  needed by credrank.\n */\nexport class IndexedPersonalAttributions {\n  _index: Index;\n\n  /**\n    Validates and indexes the input.\n  */\n  constructor(\n    personalAttributions: PersonalAttributions,\n    epochStarts: $ReadOnlyArray<TimestampMs>\n  ) {\n    validatePersonalAttributions(personalAttributions);\n    this._index = this._getIndexFromList(personalAttributions);\n    this._validateIndex(this._index, epochStarts);\n  }\n\n  _getIndexFromList(personalAttributions: PersonalAttributions): Index {\n    const index = new Map();\n    for (const personalAttribution of personalAttributions) {\n      const recipientsIndex = new Map();\n      for (const attributionRecipient of personalAttribution.recipients) {\n        recipientsIndex.set(\n          attributionRecipient.toParticipantId,\n          attributionRecipient\n        );\n      }\n      index.set(personalAttribution.fromParticipantId, recipientsIndex);\n    }\n    return index;\n  }\n\n  /**\n    Validates that:\n    1. No participant is attributing more than 100% of their cred in any epoch.\n  */\n  _validateIndex(index: Index, epochStarts: $ReadOnlyArray<TimestampMs>) {\n    for (const recipientsIndex of index.values()) {\n      for (const epochStart of epochStarts) {\n        const sum = this._getSumProportionValue(\n          epochStart,\n          Array.from(recipientsIndex.values())\n        );\n        if (sum && sum > 1)\n          throw `Sum of Personal Attributions for epoch [${epochStart}] is greater than 1. Found: [${sum}].`;\n      }\n    }\n  }\n\n  /**\n    Returns a non-indexed, json-friendly PersonalAttributions. The order\n    may be changed from the original PersonalAttributions that was used to\n    construct this object, but the elements are the same and the order is\n    generated consistently.\n   */\n  toPersonalAttributions(): PersonalAttributions {\n    return Array.from(this._index.entries()).map(\n      ([fromParticipantId, recipientsIndex]) => {\n        return {\n          fromParticipantId,\n          recipients: Array.from(recipientsIndex.values()),\n        };\n      }\n    );\n  }\n\n  /**\n    Return the IDs of all of the recipients that receive a non-zero proportion\n    of the given participant's cred in the given epoch.\n   */\n  recipientsForEpochAndParticipant(\n    epochStart: TimestampMs,\n    fromParticipantId: IdentityId\n  ): $ReadOnlyArray<IdentityId> {\n    const recipientsIndex = this._index.get(fromParticipantId);\n    if (!recipientsIndex) return [];\n    return Array.from(recipientsIndex.values())\n      .filter(({proportions}) =>\n        this._getProportionValue(epochStart, proportions)\n      )\n      .map(({toParticipantId}) => toParticipantId);\n  }\n\n  /**\n    Returns the decimal proportion of the fromParticipant's cred that should \n    flow to the toParticipant in the given epoch.\n   */\n  getProportionValue(\n    epochStart: TimestampMs,\n    fromParticipantId: IdentityId,\n    toParticipantId: IdentityId\n  ): number | null {\n    const recipientsIndex = this._index.get(fromParticipantId);\n    if (!recipientsIndex)\n      throw `Could not find PersonalAttribution from [${fromParticipantId}]`;\n\n    const attributionRecipient = recipientsIndex.get(toParticipantId);\n    if (!attributionRecipient)\n      throw `Could not find AttributionRecipient from [${fromParticipantId}] to [${toParticipantId}]`;\n\n    return this._getProportionValue(\n      epochStart,\n      attributionRecipient.proportions\n    );\n  }\n\n  _getProportionValue(\n    epochStart: TimestampMs,\n    proportions: $ReadOnlyArray<PersonalAttributionProportion>\n  ): number | null {\n    if (proportions.length && epochStart < proportions[0].timestampMs)\n      return null;\n    const relevantProportion = findLast(\n      proportions,\n      (proportion) => proportion.timestampMs <= epochStart\n    );\n    return relevantProportion ? relevantProportion.proportionValue : null;\n  }\n\n  /**\n    Returns the total decimal proportion of the fromParticipant's cred that \n    should flow to other participants in the given epoch.\n   */\n  getSumProportionValue(\n    epochStart: TimestampMs,\n    fromParticipantId: IdentityId\n  ): number | null {\n    const recipientsIndex = this._index.get(fromParticipantId);\n    if (!recipientsIndex) return null;\n    return this._getSumProportionValue(\n      epochStart,\n      Array.from(recipientsIndex.values())\n    );\n  }\n\n  _getSumProportionValue(\n    epochStart: TimestampMs,\n    attributionRecipients: $ReadOnlyArray<AttributionRecipient>\n  ): number | null {\n    const proportionValues = attributionRecipients\n      .map(({proportions}) => this._getProportionValue(epochStart, proportions))\n      .filter((proportionValue) => proportionValue !== null);\n    if (proportionValues.length === 0) return null;\n    return proportionValues.reduce((a, b) => (b ? a + b : a), 0);\n  }\n}\n","// @flow\n\nimport * as C from \"../../util/combo\";\nimport {type NodeAddressT, NodeAddress} from \"../graph\";\n\nexport type MarkovNode = {|\n  // Node address, unique within a Markov process graph. This is either\n  // the address of a contribution node or an address under the\n  // `sourcecred/core` namespace.\n  +address: NodeAddressT,\n  // Markdown source description, as in `Node` from `core/graph`.\n  +description: string,\n  // Amount of cred to mint at this node.\n  +mint: number,\n|};\n\nexport const parser: C.Parser<MarkovNode> = C.object({\n  address: NodeAddress.parser,\n  description: C.string,\n  mint: C.number,\n});\n","// @flow\n\nimport {makeAddressModule, type AddressModule} from \"../address\";\nimport {type NodeAddressT, type EdgeAddressT, EdgeAddress} from \"../graph\";\nexport type TransitionProbability = number;\nexport type MarkovEdge = {|\n  // Address of the underlying edge. Note that this attribute alone does\n  // not uniquely identify an edge in the Markov process graph; the\n  // primary key is `(address, reversed)`, not just `address`. For edges\n  // not in the underlying graph (e.g., fibration edges), this will be\n  // an address under the `sourcecred/core` namespace.\n  +address: EdgeAddressT,\n  // If this came from an underlying graph edge or an epoch webbing\n  // edge, have its `src` and `dst` been swapped in the process of\n  // handling the reverse component of a bidirectional edge?\n  +reversed: boolean,\n  // Source node at the Markov chain level.\n  +src: NodeAddressT,\n  // Destination node at the Markov chain level.\n  +dst: NodeAddressT,\n  // Transition probability: $Pr[X_{n+1} = dst | X_{n} = src]$. Must sum\n  // to 1.0 for a given `src`.\n  +transitionProbability: TransitionProbability,\n|};\n\nexport opaque type MarkovEdgeAddressT: string = string;\nexport const MarkovEdgeAddress: AddressModule<MarkovEdgeAddressT> = (makeAddressModule(\n  {\n    name: \"MarkovEdgeAddress\",\n    nonce: \"ME\",\n    otherNonces: new Map().set(\"N\", \"NodeAddress\").set(\"E\", \"EdgeAddress\"),\n  }\n): AddressModule<string>);\n\nexport function markovEdgeAddress(\n  edgeAddress: EdgeAddressT,\n  direction: \"B\" | /* Backward */ \"F\" /* Forward */\n): MarkovEdgeAddressT {\n  return MarkovEdgeAddress.fromParts([\n    direction,\n    ...EdgeAddress.toParts(edgeAddress),\n  ]);\n}\n\nexport function markovEdgeAddressFromMarkovEdge(\n  edge: MarkovEdge\n): MarkovEdgeAddressT {\n  return markovEdgeAddress(\n    edge.address,\n    edge.reversed ? \"B\" /* Backward */ : \"F\" /* Forward */\n  );\n}\n","// @flow\n/**\n * This module contains logic for creating nodes and edges that act as \"gadgets\" in CredRank.\n * They are most directly used by markovProcessGraph.js\n */\n\nimport {type Uuid, fromString as uuidFromString} from \"../../util/uuid\";\nimport {type NodeAddressT, NodeAddress} from \"../graph\";\nimport type {TimestampMs} from \"../../util/timestamp\";\nimport type {MarkovNode} from \"./markovNode\";\nimport stringify from \"json-stable-stringify\";\n\nexport const GADGET_NODE_PREFIX: NodeAddressT = NodeAddress.fromParts([\n  \"sourcecred\",\n  \"core\",\n  \"gadget\",\n]);\n\nexport interface NodeGadget<T> {\n  // Prefix shared by all nodes generated by this gadget.\n  prefix: NodeAddressT;\n  // Convert a \"structured address\" for nodes of this gadget into raw node addresses.\n  toRaw: (T) => NodeAddressT;\n  // Convert an address generated by this gadget into a structured address. Should\n  // error if the address was not generated by this gadget.\n  fromRaw(NodeAddressT): T;\n  // Generate a full node for this gadget from the structured address.\n  node: (T) => MarkovNode;\n}\n\nexport const seedGadget: NodeGadget<void> = (() => {\n  const description: string = \"\\u{1f331}\"; // U+1F331 SEEDLING\n  const prefix = NodeAddress.append(GADGET_NODE_PREFIX, \"SEED\");\n  const toRaw = () => prefix;\n  const fromRaw = (address) => {\n    if (address !== prefix) {\n      throw new Error(`not seed node: ${address}`);\n    }\n    return;\n  };\n  const node = () => ({address: prefix, description, mint: 0});\n  return Object.freeze({prefix, toRaw, fromRaw, node});\n})();\n\nexport type EpochAccumulatorAddress = {|\n  +epochStart: TimestampMs,\n|};\nexport const accumulatorGadget: NodeGadget<EpochAccumulatorAddress> = (() => {\n  const prefix = NodeAddress.append(GADGET_NODE_PREFIX, \"EPOCH_ACCUMULATOR\");\n  const prefixLength = NodeAddress.toParts(prefix).length;\n  function toRaw(addr) {\n    return NodeAddress.append(prefix, String(addr.epochStart));\n  }\n  function fromRaw(addr) {\n    if (!NodeAddress.hasPrefix(addr, prefix)) {\n      throw new Error(\n        \"Not an accumulator node address: \" + NodeAddress.toString(addr)\n      );\n    }\n    const parts = NodeAddress.toParts(addr).slice(prefixLength);\n    if (parts.length !== 1) {\n      throw new Error(`extra parts: ${stringify(parts)}`);\n    }\n    const epochStart = +parts[0];\n    if (String(epochStart) !== parts[0]) {\n      throw new Error(`bad epoch representation: ${parts[0]}`);\n    }\n    return {\n      epochStart,\n    };\n  }\n  function node(addr) {\n    return {\n      address: toRaw(addr),\n      description: `Epoch accumulator starting ${addr.epochStart} ms past epoch`,\n      mint: 0,\n    };\n  }\n  return Object.freeze({prefix, toRaw, fromRaw, node});\n})();\n\nexport type ParticipantEpochAddress = {|\n  +owner: Uuid,\n  +epochStart: TimestampMs,\n|};\nexport const epochGadget: NodeGadget<ParticipantEpochAddress> = (() => {\n  const prefix = NodeAddress.append(GADGET_NODE_PREFIX, \"USER_EPOCH\");\n  const epochPrefixLength = NodeAddress.toParts(prefix).length;\n  function toRaw(addr: ParticipantEpochAddress): NodeAddressT {\n    return NodeAddress.append(prefix, String(addr.epochStart), addr.owner);\n  }\n  function fromRaw(addr: NodeAddressT): ParticipantEpochAddress {\n    if (!NodeAddress.hasPrefix(addr, prefix)) {\n      throw new Error(\n        \"Not an epoch node address: \" + NodeAddress.toString(addr)\n      );\n    }\n    const parts = NodeAddress.toParts(addr).slice(epochPrefixLength);\n    const epochStart = +parts[0];\n    const owner = uuidFromString(parts[1]);\n    return {\n      owner,\n      epochStart,\n    };\n  }\n  function node(addr) {\n    return {\n      address: toRaw(addr),\n      description: `Participant epoch for ${addr.owner} starting ${addr.epochStart} ms past epoch`,\n      mint: 0,\n    };\n  }\n  return Object.freeze({prefix, toRaw, fromRaw, node});\n})();\n","// @flow\n\nimport type {TimestampMs} from \"../../util/timestamp\";\nimport {fromString as uuidFromString, type Uuid} from \"../../util/uuid\";\nimport {\n  NodeAddress,\n  type NodeAddressT,\n  EdgeAddress,\n  type EdgeAddressT,\n} from \"../graph\";\nimport {\n  type MarkovEdge,\n  type MarkovEdgeAddressT,\n  type TransitionProbability,\n  MarkovEdgeAddress,\n  markovEdgeAddress,\n} from \"./markovEdge\";\nimport {\n  seedGadget,\n  accumulatorGadget,\n  type ParticipantEpochAddress,\n  epochGadget,\n} from \"./nodeGadgets\";\nimport {type IdentityId} from \"../identity/id\";\n\nexport interface EdgeGadget<T> {\n  prefix: MarkovEdgeAddressT;\n  toRaw: (T) => MarkovEdgeAddressT;\n  fromRaw: (MarkovEdgeAddressT) => T;\n  markovEdge: (T, TransitionProbability) => MarkovEdge;\n}\n\ntype MakeSeedGadgetArgs<T> = {|\n  +edgePrefix: EdgeAddressT,\n  +seedIsSrc: boolean,\n  +toParts: (T) => string[],\n  +fromParts: (string[]) => T,\n|};\n/**\n * A helper function for creating a gadget only produces edges incident to seed.\n * We assume that it has a function for converting from the target type into node address parts, which will\n * be used to produce a unique edge address, and which are the address parts for the src or dst.\n * If seedIsSrc is true, then the seed is the src and the dst will be the target. Otherwise, the seed is the dst\n * and the target will be the src.\n * These markov edges are never reversed.\n */\nfunction makeSeedGadget<T>({\n  edgePrefix,\n  seedIsSrc,\n  toParts,\n  fromParts,\n}: MakeSeedGadgetArgs<T>): EdgeGadget<T> {\n  const prefix = markovEdgeAddress(edgePrefix, \"F\");\n  const prefixLength = MarkovEdgeAddress.toParts(prefix).length;\n  const toRaw = (target) =>\n    MarkovEdgeAddress.append(prefix, ...toParts(target));\n  const fromRaw = (addr) =>\n    fromParts(MarkovEdgeAddress.toParts(addr).slice(prefixLength));\n  const markovEdge = (target, transitionProbability) => {\n    const seed = seedGadget.prefix;\n    const targetAddress = NodeAddress.fromParts(toParts(target));\n    return {\n      address: EdgeAddress.append(edgePrefix, ...toParts(target)),\n      reversed: false,\n      src: seedIsSrc ? seed : targetAddress,\n      dst: seedIsSrc ? targetAddress : seed,\n      transitionProbability,\n    };\n  };\n  return Object.freeze({prefix, toRaw, fromRaw, markovEdge});\n}\n\nexport const GADGET_EDGE_PREFIX: EdgeAddressT = EdgeAddress.fromParts([\n  \"sourcecred\",\n  \"core\",\n  \"gadget\",\n]);\n\nexport const radiationGadget: EdgeGadget<NodeAddressT> = makeSeedGadget({\n  edgePrefix: EdgeAddress.append(GADGET_EDGE_PREFIX, \"RADIATION\"),\n  seedIsSrc: false,\n  toParts: (x) => NodeAddress.toParts(x),\n  fromParts: (x) => NodeAddress.fromParts(x),\n});\n\nexport const seedMintGadget: EdgeGadget<NodeAddressT> = makeSeedGadget({\n  edgePrefix: EdgeAddress.append(GADGET_EDGE_PREFIX, \"SEED_MINT\"),\n  seedIsSrc: true,\n  toParts: (x) => NodeAddress.toParts(x),\n  fromParts: (x) => NodeAddress.fromParts(x),\n});\n\n/**\n * The payout gadget creates edges that connect participant epoch nodes to the\n * epoch accumulator nodes. Each payout edge represents the flow of Cred from a\n * participant's epoch back to the seed (by means of the accumulator). Thus,\n * the Cred flow on this edge actually represents Cred score for the\n * participant. (The Cred score of the epoch node can't be seen as the user's\n * score, because some of it flows to other contributions, to other epoch\n * nodes, etc.)\n */\nexport const payoutGadget: EdgeGadget<ParticipantEpochAddress> = (() => {\n  const edgePrefix = EdgeAddress.append(GADGET_EDGE_PREFIX, \"PAYOUT\");\n  const prefix = markovEdgeAddress(edgePrefix, \"F\");\n  const prefixLength = MarkovEdgeAddress.toParts(prefix).length;\n  const toRaw = ({epochStart, owner}) =>\n    MarkovEdgeAddress.append(prefix, String(epochStart), owner);\n  const fromRaw = (addr) => {\n    const parts = MarkovEdgeAddress.toParts(addr).slice(prefixLength);\n    const epochStart = +parts[0];\n    const owner = uuidFromString(parts[1]);\n    return {epochStart, owner};\n  };\n  const markovEdge = ({owner, epochStart}, transitionProbability) => ({\n    address: EdgeAddress.append(edgePrefix, String(epochStart), owner),\n    reversed: false,\n    src: epochGadget.toRaw({owner, epochStart}),\n    dst: accumulatorGadget.toRaw({epochStart}),\n    transitionProbability,\n  });\n  return Object.freeze({prefix, toRaw, fromRaw, markovEdge});\n})();\n\nexport type WebbingAddress = {|\n  +thisStart: TimestampMs,\n  +lastStart: TimestampMs,\n  +owner: Uuid,\n|};\nconst webbingEdgePrefix = EdgeAddress.append(\n  GADGET_EDGE_PREFIX,\n  \"EPOCH_WEBBING\"\n);\n\n/**\n * The forward webbing edges flow Cred forwards from participant epoch nodes to\n * the temporally next epoch node from the same participant. The intention is\n * to \"smooth out\" Cred over time by having some of it flow forwards in time.\n */\nexport const forwardWebbingGadget: EdgeGadget<WebbingAddress> = (() => {\n  const prefix = markovEdgeAddress(webbingEdgePrefix, \"F\");\n  const prefixLength = MarkovEdgeAddress.toParts(prefix).length;\n  const toRaw = ({thisStart, lastStart, owner}) =>\n    MarkovEdgeAddress.append(\n      prefix,\n      String(lastStart),\n      String(thisStart),\n      owner\n    );\n  const fromRaw = (address) => {\n    const parts = MarkovEdgeAddress.toParts(address).slice(prefixLength);\n    const lastStart = +parts[0];\n    const thisStart = +parts[1];\n    const owner = uuidFromString(parts[2]);\n    return {lastStart, thisStart, owner};\n  };\n  const markovEdge = ({thisStart, lastStart, owner}, transitionProbability) => {\n    const thisEpoch = {epochStart: thisStart, owner};\n    const lastEpoch = {epochStart: lastStart, owner};\n    return {\n      address: EdgeAddress.append(\n        webbingEdgePrefix,\n        String(lastStart),\n        String(thisStart),\n        owner\n      ),\n      reversed: false,\n      src: epochGadget.toRaw(lastEpoch),\n      dst: epochGadget.toRaw(thisEpoch),\n      transitionProbability,\n    };\n  };\n  return {prefix, toRaw, fromRaw, markovEdge};\n})();\n\n/**\n * The backward webbing edges flow Cred backwards from participant epoch nodes\n * to the temporally previous epoch node from the same participant. The\n * intention is to \"smooth out\" Cred over time by having some of it flow\n * backwards in time.\n */\nexport const backwardWebbingGadget: EdgeGadget<WebbingAddress> = (() => {\n  const prefix = markovEdgeAddress(webbingEdgePrefix, \"B\");\n  const prefixLength = MarkovEdgeAddress.toParts(prefix).length;\n  const toRaw = ({thisStart, lastStart, owner}) =>\n    MarkovEdgeAddress.append(\n      prefix,\n      String(lastStart),\n      String(thisStart),\n      owner\n    );\n  const fromRaw = (address) => {\n    const parts = MarkovEdgeAddress.toParts(address).slice(prefixLength);\n    const lastStart = +parts[0];\n    const thisStart = +parts[1];\n    const owner = uuidFromString(parts[2]);\n    return {lastStart, thisStart, owner};\n  };\n  const markovEdge = ({thisStart, lastStart, owner}, transitionProbability) => {\n    const thisEpoch = {epochStart: thisStart, owner};\n    const lastEpoch = {epochStart: lastStart, owner};\n    return {\n      address: EdgeAddress.append(\n        webbingEdgePrefix,\n        String(lastStart),\n        String(thisStart),\n        owner\n      ),\n      reversed: true,\n      src: epochGadget.toRaw(thisEpoch),\n      dst: epochGadget.toRaw(lastEpoch),\n      transitionProbability,\n    };\n  };\n  return {prefix, toRaw, fromRaw, markovEdge};\n})();\n\nexport type PersonalAttributionAddress = {|\n  +epochStart: TimestampMs,\n  +fromParticipantId: IdentityId,\n  +toParticipantId: IdentityId,\n|};\n\nexport const personalAttributionGadget: EdgeGadget<PersonalAttributionAddress> = (() => {\n  const edgePrefix = EdgeAddress.append(GADGET_EDGE_PREFIX, \"ATTRIBUTION\");\n  const prefix = markovEdgeAddress(edgePrefix, \"F\");\n  const prefixLength = MarkovEdgeAddress.toParts(prefix).length;\n  const toRaw = ({epochStart, fromParticipantId, toParticipantId}) =>\n    MarkovEdgeAddress.append(\n      prefix,\n      String(epochStart),\n      fromParticipantId,\n      toParticipantId\n    );\n  const fromRaw = (addr) => {\n    const parts = MarkovEdgeAddress.toParts(addr).slice(prefixLength);\n    const epochStart = +parts[0];\n    const fromParticipantId = uuidFromString(parts[1]);\n    const toParticipantId = uuidFromString(parts[2]);\n    return {epochStart, fromParticipantId, toParticipantId};\n  };\n  const markovEdge = (\n    {epochStart, fromParticipantId, toParticipantId},\n    transitionProbability\n  ) => ({\n    address: EdgeAddress.append(\n      edgePrefix,\n      String(epochStart),\n      fromParticipantId,\n      toParticipantId\n    ),\n    reversed: false,\n    src: epochGadget.toRaw({owner: fromParticipantId, epochStart}),\n    dst: epochGadget.toRaw({owner: toParticipantId, epochStart}),\n    transitionProbability,\n  });\n  return Object.freeze({prefix, toRaw, fromRaw, markovEdge});\n})();\n","// @flow\n\n/**\n * Data structure representing a particular kind of Markov process, as\n * kind of a middle ground between the semantic SourceCred graph (in the\n * `core/graph` module) and a literal transition matrix. Unlike the core\n * graph, edges in a Markov process graph are unidirectional, edge\n * weights are raw transition probabilities (which must sum to 1) rather\n * than unnormalized weights, and there are no dangling edges. Unlike a\n * fully general transition matrix, parallel edges are still reified,\n * not collapsed; nodes have weights, representing sources of flow; and\n * a few SourceCred-specific concepts are made first-class:\n * specifically, cred minting and time period fibration. The\n * \"teleportation vector\" from PageRank is also made explicit via the\n * \"adjoined seed node\" graph transformation strategy, so this data\n * structure can form well-defined Markov processes even from graphs\n * with nodes with no out-weight. Because the graph reifies the\n * teleportation and temporal fibration, the associated parameters are\n * \"baked in\" to weights of the Markov process graph.\n *\n * We use the term \"fibration\" to refer to a graph transformation where\n * each scoring node is split into one node per epoch, and incident\n * edges are rewritten to point to the appropriate epoch nodes. The term\n * is vaguely inspired from the notion of a fiber bundle, though the\n * analogy is not precise.\n *\n * The Markov process graphs in this module have three kinds of nodes:\n *\n *   - *base nodes*, which are in 1-to-1 correspondence with the nodes\n *     in the underlying core graph that are not scoring nodes;\n *   - *user-epoch nodes*, which are created for each time period for\n *     each scoring node; and\n *   - *epoch accumulators*, which are created once for each epoch to\n *     aggregate over the epoch nodes,\n *   - the *seed node*, which reifies the teleportation vector and\n *     forces well-definedness and ergodicity of the Markov process (for\n *     nonzero alpha, and assuming that there is at least one edge in\n *     the underlying graph).\n *\n * The edges include:\n *\n *   - *base edges* due to edges in the underlying graph, whose\n *     endpoints are lifted to the corresponding base nodes or to\n *     user-epoch nodes for endpoints that have been fibrated;\n *   - *radiation edges* edges from nodes to the seed node;\n *   - *minting edges* from the seed node to cred-minting nodes;\n *   - *webbing edges* between temporally adjacent user-epoch nodes; and\n *   - *payout edges* from a user-epoch node to the accumulator for its\n *     epoch.\n *\n * A Markov process graph can be converted to a pure Markov chain for\n * spectral analysis via the `toMarkovChain` method.\n */\n\nimport deepFreeze from \"deep-freeze\";\nimport {type Uuid, parser as uuidParser} from \"../../util/uuid\";\nimport * as C from \"../../util/combo\";\nimport sortedIndex from \"lodash.sortedindex\";\nimport {\n  type NodeAddressT,\n  NodeAddress,\n  type EdgeAddressT,\n  EdgeAddress,\n} from \"../graph\";\nimport {type WeightedGraph as WeightedGraphT} from \"../weightedGraph\";\nimport {\n  nodeWeightEvaluator,\n  edgeWeightEvaluator,\n} from \"../algorithm/weightEvaluator\";\nimport * as NullUtil from \"../../util/null\";\nimport * as MapUtil from \"../../util/map\";\nimport type {TimestampMs} from \"../../util/timestamp\";\nimport {type SparseMarkovChain} from \"../algorithm/markovChain\";\nimport {type IntervalSequence, intervalSequence} from \"../interval\";\nimport {\n  personalAttributionsParser,\n  type PersonalAttributions,\n  IndexedPersonalAttributions,\n} from \"./personalAttribution\";\n\nimport {type MarkovNode, parser as markovNodeParser} from \"./markovNode\";\n\nimport {\n  type MarkovEdge,\n  type MarkovEdgeAddressT,\n  type TransitionProbability,\n  MarkovEdgeAddress,\n  markovEdgeAddressFromMarkovEdge,\n} from \"./markovEdge\";\n\nimport {\n  seedGadget,\n  accumulatorGadget,\n  epochGadget,\n  GADGET_NODE_PREFIX,\n} from \"./nodeGadgets\";\n\nimport {\n  radiationGadget,\n  seedMintGadget,\n  payoutGadget,\n  forwardWebbingGadget,\n  backwardWebbingGadget,\n  personalAttributionGadget,\n} from \"./edgeGadgets\";\n\nexport type Participant = {|\n  +address: NodeAddressT,\n  +description: string,\n  +id: Uuid,\n|};\n\nexport const participantParser: C.Parser<Participant> = C.object({\n  address: NodeAddress.parser,\n  description: C.string,\n  id: uuidParser,\n});\n\nexport type OrderedSparseMarkovChain = {|\n  +nodeOrder: $ReadOnlyArray<NodeAddressT>,\n  +chain: SparseMarkovChain,\n|};\n\nexport type Arguments = {|\n  +weightedGraph: WeightedGraphT,\n  +participants: $ReadOnlyArray<Participant>,\n  +intervals: IntervalSequence,\n  +parameters: Parameters,\n  +personalAttributions: PersonalAttributions,\n|};\n\nexport type Parameters = {|\n  // Transition probability from every organic node back to the seed node.\n  +alpha: TransitionProbability,\n  // Transition probability for payout edges from epoch nodes to their\n  // owners.\n  +beta: TransitionProbability,\n  // Transition probability for webbing edges from an epoch node to the\n  // next epoch node for the same owner.\n  +gammaForward: TransitionProbability,\n  +gammaBackward: TransitionProbability,\n|};\n\nexport const parametersParser: C.Parser<Parameters> = C.object({\n  alpha: C.number,\n  beta: C.number,\n  gammaForward: C.number,\n  gammaBackward: C.number,\n});\n\n// A MarkovEdge in which the src and dst have been replaced with indices instead\n// of full addresses. The indexing is based on the order of nodes in the MarkovProcessGraphJSON.\nexport type IndexedMarkovEdge = {|\n  +address: EdgeAddressT,\n  +reversed: boolean,\n  +src: number,\n  +dst: number,\n  +transitionProbability: TransitionProbability,\n|};\n\nconst indexedEdgeParser: C.Parser<IndexedMarkovEdge> = C.object({\n  address: EdgeAddress.parser,\n  reversed: C.boolean,\n  src: C.number,\n  dst: C.number,\n  transitionProbability: C.number,\n});\n\nexport type MarkovProcessGraphJSON = {|\n  +nodes: $ReadOnlyArray<MarkovNode>,\n  +indexedEdges: $ReadOnlyArray<IndexedMarkovEdge>,\n  +participants: $ReadOnlyArray<Participant>,\n  +epochStarts: $ReadOnlyArray<number>,\n  +lastEpochEndMs: number,\n  +parameters: Parameters,\n  +radiationTransitionProbabilities: $ReadOnlyArray<number>,\n  // Array of [nodeIndex, transitionProbability] tuples representing all of the\n  // connections from the seed node to nodes minting Cred.\n  +indexedMints: $ReadOnlyArray<[number, number]>,\n  +personalAttributions: PersonalAttributions,\n|};\n\nexport class MarkovProcessGraph {\n  _nodes: $ReadOnlyMap<NodeAddressT, MarkovNode>;\n  _edges: $ReadOnlyMap<MarkovEdgeAddressT, MarkovEdge>;\n  _participants: $ReadOnlyArray<Participant>;\n  _epochStarts: $ReadOnlyArray<number>;\n  +_lastEpochEndMs: number;\n  _parameters: Parameters;\n  _mintTransitionProbabilties: $ReadOnlyMap<NodeAddressT, number>;\n  _radiationTransitionProbabilties: $ReadOnlyArray<number>;\n  _nodeIndex: $ReadOnlyMap<NodeAddressT, number>;\n  _edgeIndex: $ReadOnlyMap<MarkovEdgeAddressT, number>;\n  _indexedPersonalAttributions: IndexedPersonalAttributions;\n\n  constructor(\n    nodes: Map<NodeAddressT, MarkovNode>,\n    edges: Map<MarkovEdgeAddressT, MarkovEdge>,\n    participants: $ReadOnlyArray<Participant>,\n    epochStarts: $ReadOnlyArray<number>,\n    lastEpochEndMs: number,\n    parameters: Parameters,\n    // Map from each node address to the proportion of total minting (i.e. its\n    // transition probability from the seed node). Must sum to about 1.\n    mintTransitionProbabilities: $ReadOnlyMap<NodeAddressT, number>,\n    // Transition probabilities for radiation edges, in node order\n    radiationTransitionProbabilities: $ReadOnlyArray<number>,\n    indexedPersonalAttributions: IndexedPersonalAttributions\n  ) {\n    this._nodes = nodes;\n    this._edges = edges;\n    this._epochStarts = deepFreeze(epochStarts);\n    this._lastEpochEndMs = lastEpochEndMs;\n    this._participants = deepFreeze(participants);\n    this._parameters = deepFreeze(parameters);\n    this._radiationTransitionProbabilties = deepFreeze(\n      radiationTransitionProbabilities\n    );\n    this._mintTransitionProbabilties = mintTransitionProbabilities;\n    // Precompute the index maps\n    this._nodeIndex = new Map(\n      [..._nodeOrder(nodes, epochStarts, participants)].map((a, i) => [a, i])\n    );\n    this._edgeIndex = new Map(\n      [\n        ...edges.keys(),\n        ...virtualizedMarkovEdgeAddresses(\n          epochStarts,\n          participants,\n          mintTransitionProbabilities,\n          _nodeOrder(nodes, epochStarts, participants),\n          indexedPersonalAttributions\n        ),\n      ].map((a, i) => [a, i])\n    );\n    this._indexedPersonalAttributions = indexedPersonalAttributions;\n  }\n\n  static new(args: Arguments): MarkovProcessGraph {\n    const {\n      weightedGraph,\n      participants,\n      parameters,\n      intervals,\n      personalAttributions,\n    } = args;\n    const {alpha, beta, gammaForward, gammaBackward} = parameters;\n    const _nodes = new Map();\n    const _edges = new Map();\n\n    const _scoringAddressToId = new Map(\n      participants.map((p) => [p.address, p.id])\n    );\n    const _scoringAddresses = new Set(participants.map((p) => p.address));\n\n    // _nodeOutMasses[a] = sum(e.pr for e in edges if e.src == a)\n    // Used for computing remainder-to-seed edges.\n    const _nodeOutMasses = new Map();\n\n    // Amount of mass allocated to contribution edges flowing from epoch\n    // nodes.\n    const epochTransitionRemainder: number = (() => {\n      const valid = (x) => x >= 0 && x <= 1;\n      if (\n        !valid(beta) ||\n        !valid(gammaForward) ||\n        !valid(gammaBackward) ||\n        !valid(alpha)\n      ) {\n        throw new Error(\n          \"Invalid transition probability: \" +\n            [beta, gammaForward, gammaBackward, alpha].join(\" or \")\n        );\n      }\n      const result = 1 - (alpha + beta + gammaForward + gammaBackward);\n      if (result < 0) {\n        throw new Error(\"Overlarge transition probability: \" + (1 - result));\n      }\n      return result;\n    })();\n\n    if (intervals.length === 0) {\n      throw new Error(\"need at least one interval\");\n    }\n    const epochStarts = intervals.map((x) => x.startTimeMs);\n    const lastEpochEndMs = intervals[intervals.length - 1].endTimeMs;\n    const addNode = (node: MarkovNode) => {\n      if (_nodes.has(node.address)) {\n        throw new Error(\"Node conflict: \" + node.address);\n      }\n      _nodes.set(node.address, node);\n    };\n    const addEdge = (edge: MarkovEdge) => {\n      const mae = markovEdgeAddressFromMarkovEdge(edge);\n      if (_edges.has(mae)) {\n        throw new Error(\"Edge conflict: \" + mae);\n      }\n      _edges.set(mae, edge);\n      recordTransitionProbability(edge);\n    };\n    const recordTransitionProbability = (edge: MarkovEdge) => {\n      const pr = edge.transitionProbability;\n      if (pr < 0 || pr > 1) {\n        const mae = markovEdgeAddressFromMarkovEdge(edge);\n        const name = MarkovEdgeAddress.toString(mae);\n        throw new Error(`Invalid transition probability for ${name}: ${pr}`);\n      }\n      _nodeOutMasses.set(edge.src, (_nodeOutMasses.get(edge.src) || 0) + pr);\n    };\n\n    const indexedPersonalAttributions = new IndexedPersonalAttributions(\n      personalAttributions,\n      epochStarts\n    );\n\n    // Add graph nodes\n    const nwe = nodeWeightEvaluator(weightedGraph.weights);\n    for (const node of weightedGraph.graph.nodes()) {\n      if (_scoringAddresses.has(node.address)) {\n        // Scoring nodes are not included in the Markov process graph:\n        // the cred for a scoring node is given implicitly by the\n        // weight-sum of its epoch accumulation edges.\n        continue;\n      }\n      const weight = nwe(node.address);\n      if (weight < 0 || !Number.isFinite(weight)) {\n        const name = NodeAddress.toString(node.address);\n        throw new Error(`Bad node weight for ${name}: ${weight}`);\n      }\n      if (NodeAddress.hasPrefix(node.address, GADGET_NODE_PREFIX)) {\n        throw new Error(\n          \"Unexpected core node in underlying graph: \" +\n            NodeAddress.toString(node.address)\n        );\n      }\n      addNode({\n        address: node.address,\n        description: node.description,\n        mint: weight,\n      });\n    }\n\n    // Add epoch nodes, epoch accumulators, payout edges, and epoch webbing\n    let lastEpochStart = null;\n    for (const epochStart of epochStarts) {\n      for (const participant of participants) {\n        const thisEpoch = {\n          owner: participant.id,\n          epochStart,\n        };\n        recordTransitionProbability(payoutGadget.markovEdge(thisEpoch, beta));\n        if (lastEpochStart != null) {\n          const webbingAddress = {\n            thisStart: epochStart,\n            lastStart: lastEpochStart,\n            owner: participant.id,\n          };\n          recordTransitionProbability(\n            forwardWebbingGadget.markovEdge(webbingAddress, gammaForward)\n          );\n          recordTransitionProbability(\n            backwardWebbingGadget.markovEdge(webbingAddress, gammaBackward)\n          );\n        } else {\n          // There is no lastEpochStart, which means this is the first epoch. We will instead create a \"backwards\"\n          // edge which is actually a loop, so as to avoid Cred distortion where scores are biased downward\n          // for the first epoch.\n          const webbingAddress = {\n            thisStart: epochStart,\n            lastStart: epochStart,\n            owner: participant.id,\n          };\n          const edge = backwardWebbingGadget.markovEdge(\n            webbingAddress,\n            gammaBackward\n          );\n          recordTransitionProbability(edge);\n        }\n      }\n      lastEpochStart = epochStart;\n    }\n    if (lastEpochStart == null) {\n      // Just to satisfy flow when adding the final \"forward\" webbing edges (which are loops).\n      throw new Error(`invariant violation: there were no epochs`);\n    }\n    // Now for the last epochStart, we create a \"forwards\" webbing edge which is actually a loop, as as to\n    // avoid Cred distortion where the scores are biased downward for the last epoch.\n    for (const participant of participants) {\n      const webbingAddress = {\n        thisStart: lastEpochStart,\n        lastStart: lastEpochStart,\n        owner: participant.id,\n      };\n      const edge = forwardWebbingGadget.markovEdge(\n        webbingAddress,\n        gammaForward\n      );\n      recordTransitionProbability(edge);\n    }\n\n    const mintTransitionProbabilities = new Map();\n    // Add minting edges, from the seed to positive-weight graph nodes\n    {\n      let totalNodeWeight = 0.0;\n      const positiveNodeWeights: Map<NodeAddressT, number> = new Map();\n      for (const {address, mint} of _nodes.values()) {\n        if (mint > 0) {\n          totalNodeWeight += mint;\n          positiveNodeWeights.set(address, mint);\n        }\n      }\n      if (!(totalNodeWeight > 0)) {\n        throw new Error(\"No outflow from seed; add cred-minting nodes\");\n      }\n      for (const [address, weight] of positiveNodeWeights) {\n        mintTransitionProbabilities.set(address, weight / totalNodeWeight);\n      }\n    }\n\n    /**\n     * Find an epoch node, or just the original node if it's not a\n     * scoring address.\n     */\n    const rewriteEpochNode = (\n      address: NodeAddressT,\n      edgeTimestampMs: TimestampMs\n    ): NodeAddressT => {\n      const owner = _scoringAddressToId.get(address);\n      if (owner == null) {\n        return address;\n      }\n      const epochEndIndex = sortedIndex(epochStarts, edgeTimestampMs);\n      const epochStartIndex = epochEndIndex - 1;\n      const epochTimestampMs = epochStarts[epochStartIndex];\n      return epochGadget.toRaw({\n        owner,\n        epochStart: epochTimestampMs,\n      });\n    };\n\n    // Add graph edges. First, split by direction.\n    type _UnidirectionalGraphEdge = {|\n      +address: EdgeAddressT,\n      +reversed: boolean,\n      +src: NodeAddressT,\n      +dst: NodeAddressT,\n      +timestamp: TimestampMs,\n      +weight: number,\n    |};\n    const unidirectionalGraphEdges = function* (): Iterator<_UnidirectionalGraphEdge> {\n      const ewe = edgeWeightEvaluator(weightedGraph.weights);\n      for (const edge of (function* () {\n        for (const edge of weightedGraph.graph.edges({showDangling: false})) {\n          const weight = ewe(edge.address);\n          yield {\n            address: edge.address,\n            reversed: false,\n            src: edge.src,\n            dst: edge.dst,\n            timestamp: edge.timestampMs,\n            weight: weight.forwards,\n          };\n          yield {\n            address: edge.address,\n            reversed: true,\n            src: edge.dst,\n            dst: edge.src,\n            timestamp: edge.timestampMs,\n            weight: weight.backwards,\n          };\n        }\n      })()) {\n        if (edge.weight > 0) {\n          yield edge;\n        }\n      }\n    };\n\n    const srcNodes: Map<\n      NodeAddressT /* domain: nodes with positive weight from base edges */,\n      {totalOutWeight: number, outEdges: _UnidirectionalGraphEdge[]}\n    > = new Map();\n    for (const graphEdge of unidirectionalGraphEdges()) {\n      const src = rewriteEpochNode(graphEdge.src, graphEdge.timestamp);\n      let datum = srcNodes.get(src);\n      if (datum == null) {\n        datum = {totalOutWeight: 0, outEdges: []};\n        srcNodes.set(src, datum);\n      }\n      datum.totalOutWeight += graphEdge.weight;\n      datum.outEdges.push(graphEdge);\n    }\n    for (const [src, {totalOutWeight, outEdges}] of srcNodes) {\n      const totalOutPr = NodeAddress.hasPrefix(src, epochGadget.prefix)\n        ? epochTransitionRemainder\n        : 1 - alpha;\n      for (const outEdge of outEdges) {\n        const pr = (outEdge.weight / totalOutWeight) * totalOutPr;\n        addEdge({\n          address: outEdge.address,\n          reversed: outEdge.reversed,\n          src: rewriteEpochNode(outEdge.src, outEdge.timestamp),\n          dst: rewriteEpochNode(outEdge.dst, outEdge.timestamp),\n          transitionProbability: pr,\n        });\n      }\n    }\n\n    function* realAndVirtualNodes(): Iterator<MarkovNode> {\n      yield* _nodes.values();\n      for (const nodeAddress of virtualizedNodeAddresses(\n        epochStarts,\n        participants\n      )) {\n        yield NullUtil.get(virtualizedNode(nodeAddress));\n      }\n    }\n\n    const radiationTransitionProbabilities = [...realAndVirtualNodes()].map(\n      (node) => {\n        return 1 - NullUtil.orElse(_nodeOutMasses.get(node.address), 0);\n      }\n    );\n\n    return new MarkovProcessGraph(\n      _nodes,\n      _edges,\n      participants,\n      epochStarts,\n      lastEpochEndMs,\n      parameters,\n      mintTransitionProbabilities,\n      radiationTransitionProbabilities,\n      indexedPersonalAttributions\n    );\n  }\n\n  epochStarts(): $ReadOnlyArray<number> {\n    return this._epochStarts;\n  }\n\n  intervals(): IntervalSequence {\n    const es = this._epochStarts;\n    const intervals = [];\n    for (let i = 0; i < es.length; i++) {\n      const startTimeMs = es[i];\n      const endTimeMs = i + 1 < es.length ? es[i + 1] : this._lastEpochEndMs;\n      intervals.push({startTimeMs, endTimeMs});\n    }\n    return intervalSequence(intervals);\n  }\n\n  participants(): $ReadOnlyArray<Participant> {\n    return this._participants;\n  }\n\n  parameters(): Parameters {\n    return this._parameters;\n  }\n\n  /**\n   * Return the node address's canonical index in the\n   * node order, if it is present.\n   */\n  nodeIndex(address: NodeAddressT): number | null {\n    return NullUtil.orElse(this._nodeIndex.get(address), null);\n  }\n\n  /**\n   * Returns a canonical ordering of the nodes in the graph.\n   *\n   * No assumptions should be made about the node order, other than\n   * that it is stable for any given MarkovProcessGraph.\n   */\n  *nodeOrder(): Iterator<NodeAddressT> {\n    yield* _nodeOrder(this._nodes, this._epochStarts, this._participants);\n  }\n\n  node(address: NodeAddressT): MarkovNode | null {\n    NodeAddress.assertValid(address);\n    return this._nodes.get(address) || virtualizedNode(address);\n  }\n\n  /**\n   * Iterate over the nodes in the graph. If a prefix is provided,\n   * only nodes matching that prefix will be returned.\n   *\n   * The nodes are always iterated over in the node order.\n   */\n  *nodes(options?: {|+prefix: NodeAddressT|}): Iterator<MarkovNode> {\n    const prefix = options ? options.prefix : NodeAddress.empty;\n    for (const [address, markovNode] of this._nodes) {\n      if (NodeAddress.hasPrefix(address, prefix)) {\n        yield markovNode;\n      }\n    }\n    for (const address of virtualizedNodeAddresses(\n      this._epochStarts,\n      this._participants\n    )) {\n      if (NodeAddress.hasPrefix(address, prefix)) {\n        yield NullUtil.get(virtualizedNode(address));\n      }\n    }\n  }\n\n  /**\n   * Return the edge address's canonical index in the\n   * edge order, if it is present.\n   */\n  edgeIndex(address: MarkovEdgeAddressT): number | null {\n    return NullUtil.orElse(this._edgeIndex.get(address), null);\n  }\n\n  /**\n   * Returns a canonical ordering of the edges in the graph.\n   *\n   * No assumptions should be made about the edge order, other than\n   * that it is stable for any given MarkovProcessGraph.\n   */\n  *edgeOrder(): Iterator<MarkovEdgeAddressT> {\n    yield* this._edges.keys();\n    yield* virtualizedMarkovEdgeAddresses(\n      this._epochStarts,\n      this._participants,\n      this._mintTransitionProbabilties,\n      this.nodeOrder(),\n      this._indexedPersonalAttributions\n    );\n  }\n\n  edge(address: MarkovEdgeAddressT): MarkovEdge | null {\n    MarkovEdgeAddress.assertValid(address);\n    return (\n      this._edges.get(address) ||\n      virtualizedMarkovEdge(\n        address,\n        this._parameters,\n        this._nodeIndex,\n        this._mintTransitionProbabilties,\n        this._radiationTransitionProbabilties,\n        this._indexedPersonalAttributions\n      )\n    );\n  }\n\n  /**\n   * Iterate over the edges in the graph.\n   *\n   * The edges are always iterated over in the edge order.\n   */\n  *edges(): Iterator<MarkovEdge> {\n    yield* this._edges.values();\n    for (const addr of virtualizedMarkovEdgeAddresses(\n      this._epochStarts,\n      this._participants,\n      this._mintTransitionProbabilties,\n      this.nodeOrder(),\n      this._indexedPersonalAttributions\n    )) {\n      yield NullUtil.get(\n        virtualizedMarkovEdge(\n          addr,\n          this._parameters,\n          this._nodeIndex,\n          this._mintTransitionProbabilties,\n          this._radiationTransitionProbabilties,\n          this._indexedPersonalAttributions\n        )\n      );\n    }\n  }\n\n  *inNeighbors(nodeAddress: NodeAddressT): Iterator<MarkovEdge> {\n    for (const edge of this.edges()) {\n      if (edge.dst !== nodeAddress) {\n        continue;\n      }\n      yield edge;\n    }\n  }\n\n  toMarkovChain(): OrderedSparseMarkovChain {\n    // We will need to map over the nodes, so we array-ify it upfront\n    const nodes = Array.from(this.nodes());\n\n    // Check that out-edges sum to about 1.\n    const nodeOutMasses = new Map();\n    for (const {address} of nodes) {\n      nodeOutMasses.set(address, 0);\n    }\n    for (const edge of this.edges()) {\n      const a = edge.src;\n      nodeOutMasses.set(\n        a,\n        NullUtil.get(nodeOutMasses.get(a)) + edge.transitionProbability\n      );\n    }\n    for (const [node, outMass] of nodeOutMasses) {\n      const discrepancy = outMass - 1;\n      if (Math.abs(discrepancy) > 1e-3) {\n        const name = NodeAddress.toString(node);\n        throw new Error(\n          `Transition weights for ${name} do not sum to 1.0: ${outMass}`\n        );\n      }\n    }\n\n    const inNeighbors: Map<NodeAddressT, MarkovEdge[]> = new Map();\n    for (const edge of this.edges()) {\n      MapUtil.pushValue(inNeighbors, edge.dst, edge);\n    }\n\n    const chain = nodes.map(({address}) => {\n      const inEdges = NullUtil.orElse(inNeighbors.get(address), []);\n      const inDegree = inEdges.length;\n      const neighbor = new Uint32Array(inDegree);\n      const weight = new Float64Array(inDegree);\n      inEdges.forEach((e, i) => {\n        // Note: We don't group-by src, so there may be multiple `j`\n        // such that `neighbor[j] === k` for a given `k` when there are\n        // parallel edges in the source graph. This should just work\n        // down the stack.\n        const srcIndex = this.nodeIndex(e.src);\n        if (srcIndex == null) {\n          throw new Error(e.src);\n        }\n        neighbor[i] = srcIndex;\n        weight[i] = e.transitionProbability;\n      });\n      return {neighbor, weight};\n    });\n\n    return {nodeOrder: nodes.map((x) => x.address), chain};\n  }\n\n  toJSON(): MarkovProcessGraphJSON {\n    const indexedEdges = Array.from(this._edges.values()).map((e) => ({\n      address: e.address,\n      reversed: e.reversed,\n      src: NullUtil.get(this.nodeIndex(e.src)),\n      dst: NullUtil.get(this.nodeIndex(e.dst)),\n      transitionProbability: e.transitionProbability,\n    }));\n    const indexedMints = Array.from(\n      this._mintTransitionProbabilties\n    ).map(([addr, pr]) => [NullUtil.get(this.nodeIndex(addr)), pr]);\n    return {\n      nodes: [...this._nodes.values()],\n      indexedEdges,\n      participants: this._participants,\n      epochStarts: this._epochStarts,\n      lastEpochEndMs: this._lastEpochEndMs,\n      parameters: this._parameters,\n      radiationTransitionProbabilities: this._radiationTransitionProbabilties,\n      indexedMints,\n      personalAttributions: this._indexedPersonalAttributions.toPersonalAttributions(),\n    };\n  }\n\n  static fromJSON(j: MarkovProcessGraphJSON): MarkovProcessGraph {\n    const {\n      nodes,\n      indexedEdges,\n      participants,\n      epochStarts,\n      lastEpochEndMs,\n      parameters,\n      radiationTransitionProbabilities,\n      indexedMints,\n      personalAttributions,\n    } = j;\n    const nodeOrder = [\n      ...nodes.map((n) => n.address),\n      ...virtualizedNodeAddresses(epochStarts, participants),\n    ];\n    const edges = indexedEdges.map((e) => ({\n      address: e.address,\n      reversed: e.reversed,\n      src: nodeOrder[e.src],\n      dst: nodeOrder[e.dst],\n      transitionProbability: e.transitionProbability,\n    }));\n    const mintTransitionProbabilities = new Map(\n      indexedMints.map(([i, pr]) => [nodeOrder[i], pr])\n    );\n    const indexedPersonalAttributions = new IndexedPersonalAttributions(\n      personalAttributions,\n      epochStarts\n    );\n\n    return new MarkovProcessGraph(\n      new Map(nodes.map((n) => [n.address, n])),\n      new Map(edges.map((e) => [markovEdgeAddressFromMarkovEdge(e), e])),\n      participants,\n      epochStarts,\n      lastEpochEndMs,\n      parameters,\n      mintTransitionProbabilities,\n      radiationTransitionProbabilities,\n      indexedPersonalAttributions\n    );\n  }\n}\n\n/**\n * Yield the canonical node order.\n * This has been separated from the class because we need it at construction time, etc.\n */\nfunction* _nodeOrder(\n  nodes: $ReadOnlyMap<NodeAddressT, MarkovNode>,\n  epochStarts: $ReadOnlyArray<TimestampMs>,\n  participants: $ReadOnlyArray<Participant>\n): Iterable<NodeAddressT> {\n  yield* nodes.keys();\n  yield* virtualizedNodeAddresses(epochStarts, participants);\n}\n\n/**\n * Return an array containing the node addresses for every\n * virtualized node. The order must be stable.\n */\nfunction* virtualizedNodeAddresses(\n  epochStarts: $ReadOnlyArray<TimestampMs>,\n  participants: $ReadOnlyArray<Participant>\n): Iterable<NodeAddressT> {\n  yield seedGadget.prefix;\n  for (const epochStart of epochStarts) {\n    yield accumulatorGadget.toRaw({epochStart});\n    for (const {id} of participants) {\n      yield epochGadget.toRaw({owner: id, epochStart});\n    }\n  }\n}\n\nfunction virtualizedNode(address: NodeAddressT): MarkovNode | null {\n  // Perf tweak: Check the most common node types first, and rarest\n  // last.\n  if (NodeAddress.hasPrefix(address, epochGadget.prefix)) {\n    return epochGadget.node(epochGadget.fromRaw(address));\n  }\n  if (NodeAddress.hasPrefix(address, accumulatorGadget.prefix)) {\n    return accumulatorGadget.node(accumulatorGadget.fromRaw(address));\n  }\n  if (NodeAddress.hasPrefix(address, seedGadget.prefix)) {\n    return seedGadget.node();\n  }\n  return null;\n}\n\nfunction* virtualizedMarkovEdgeAddresses(\n  epochStarts: $ReadOnlyArray<TimestampMs>,\n  participants: $ReadOnlyArray<Participant>,\n  mintTransitionProbabilities: $ReadOnlyMap<NodeAddressT, number>,\n  nodeOrder: Iterable<NodeAddressT>,\n  indexedPersonalAttributions: IndexedPersonalAttributions\n): Iterable<MarkovEdgeAddressT> {\n  let lastStart = null;\n  for (const epochStart of epochStarts) {\n    for (const {id} of participants) {\n      yield payoutGadget.toRaw({owner: id, epochStart});\n      for (const toParticipantId of indexedPersonalAttributions.recipientsForEpochAndParticipant(\n        epochStart,\n        id\n      )) {\n        yield personalAttributionGadget.toRaw({\n          epochStart,\n          fromParticipantId: id,\n          toParticipantId,\n        });\n      }\n      if (lastStart != null) {\n        const webbingAddress = {thisStart: epochStart, lastStart, owner: id};\n        yield forwardWebbingGadget.toRaw(webbingAddress);\n        yield backwardWebbingGadget.toRaw(webbingAddress);\n      } else {\n        const webbingAddress = {\n          thisStart: epochStart,\n          lastStart: epochStart,\n          owner: id,\n        };\n        yield backwardWebbingGadget.toRaw(webbingAddress);\n      }\n    }\n    lastStart = epochStart;\n  }\n  if (lastStart == null) {\n    // Needed to satisfy flow when adding the final \"forward\" webbing edges (which are loops).\n    throw new Error(`invariant violation: there were no epochs`);\n  }\n  for (const {id} of participants) {\n    const webbingAddress = {thisStart: lastStart, lastStart, owner: id};\n    yield forwardWebbingGadget.toRaw(webbingAddress);\n  }\n  for (const addr of mintTransitionProbabilities.keys()) {\n    yield seedMintGadget.toRaw(addr);\n  }\n  for (const addr of nodeOrder) {\n    if (addr === seedGadget.prefix) {\n      continue;\n    }\n    yield radiationGadget.toRaw(addr);\n  }\n}\n\nfunction virtualizedMarkovEdge(\n  address: MarkovEdgeAddressT,\n  parameters: Parameters,\n  nodeIndex: $ReadOnlyMap<NodeAddressT, number>,\n  mintTransitionProbabilities: $ReadOnlyMap<NodeAddressT, number>,\n  radiationTransitionProbabilities: $ReadOnlyArray<number>,\n  indexedPersonalAttributions: IndexedPersonalAttributions\n): MarkovEdge | null {\n  if (MarkovEdgeAddress.hasPrefix(address, radiationGadget.prefix)) {\n    const nodeAddress = radiationGadget.fromRaw(address);\n    const index = NullUtil.get(nodeIndex.get(nodeAddress));\n    const probability = radiationTransitionProbabilities[index];\n    return radiationGadget.markovEdge(nodeAddress, probability);\n  }\n  if (MarkovEdgeAddress.hasPrefix(address, seedMintGadget.prefix)) {\n    const nodeAddress = seedMintGadget.fromRaw(address);\n    const probability = NullUtil.get(\n      mintTransitionProbabilities.get(nodeAddress)\n    );\n    return seedMintGadget.markovEdge(nodeAddress, probability);\n  }\n  if (MarkovEdgeAddress.hasPrefix(address, payoutGadget.prefix)) {\n    const payoutAddress = payoutGadget.fromRaw(address);\n    const sumOfPersonalAttributions =\n      indexedPersonalAttributions.getSumProportionValue(\n        payoutAddress.epochStart,\n        payoutAddress.owner\n      ) || 0;\n    return payoutGadget.markovEdge(\n      payoutGadget.fromRaw(address),\n      parameters.beta - sumOfPersonalAttributions * parameters.beta\n    );\n  }\n  if (MarkovEdgeAddress.hasPrefix(address, forwardWebbingGadget.prefix)) {\n    return forwardWebbingGadget.markovEdge(\n      forwardWebbingGadget.fromRaw(address),\n      parameters.gammaForward\n    );\n  }\n  if (MarkovEdgeAddress.hasPrefix(address, backwardWebbingGadget.prefix)) {\n    return backwardWebbingGadget.markovEdge(\n      backwardWebbingGadget.fromRaw(address),\n      parameters.gammaBackward\n    );\n  }\n  if (MarkovEdgeAddress.hasPrefix(address, personalAttributionGadget.prefix)) {\n    const personalAttributionAddress = personalAttributionGadget.fromRaw(\n      address\n    );\n    const proportionValue =\n      indexedPersonalAttributions.getProportionValue(\n        personalAttributionAddress.epochStart,\n        personalAttributionAddress.fromParticipantId,\n        personalAttributionAddress.toParticipantId\n      ) || 0;\n    if (proportionValue === 0) return null;\n    return personalAttributionGadget.markovEdge(\n      personalAttributionGadget.fromRaw(address),\n      parameters.beta * proportionValue\n    );\n  }\n  return null;\n}\n\nexport const jsonParser: C.Parser<MarkovProcessGraphJSON> = C.object({\n  nodes: C.array(markovNodeParser),\n  indexedEdges: C.array(indexedEdgeParser),\n  participants: C.array(participantParser),\n  epochStarts: C.array(C.number),\n  lastEpochEndMs: C.number,\n  parameters: parametersParser,\n  radiationTransitionProbabilities: C.array(C.number),\n  indexedMints: C.array(C.tuple([C.number, C.number])),\n  personalAttributions: personalAttributionsParser,\n});\n\nexport const parser: C.Parser<MarkovProcessGraph> = C.fmap(\n  jsonParser,\n  MarkovProcessGraph.fromJSON\n);\n","// @flow\n\nimport * as C from \"../../util/combo\";\nimport * as NullUtil from \"../../util/null\";\nimport {type Uuid} from \"../../util/uuid\";\nimport {type NodeAddressT, type EdgeAddressT} from \"../graph\";\nimport {\n  MarkovProcessGraph,\n  type MarkovProcessGraphJSON,\n  jsonParser as markovProcessGraphJSONParser,\n} from \"./markovProcessGraph\";\nimport {type MarkovEdge, type TransitionProbability} from \"./markovEdge\";\nimport {payoutGadget} from \"./edgeGadgets\";\nimport {type IntervalSequence} from \"../interval\";\n\nexport type Node = {|\n  +address: NodeAddressT,\n  +description: string,\n  +cred: number,\n  +mint: number,\n|};\n\nexport type Edge = {|\n  +address: EdgeAddressT,\n  +reversed: boolean,\n  +src: NodeAddressT,\n  +dst: NodeAddressT,\n  +transitionProbability: TransitionProbability,\n  +credFlow: number,\n|};\n\nexport type Participant = {|\n  +address: NodeAddressT,\n  +description: string,\n  +cred: number,\n  +credPerInterval: $ReadOnlyArray<number>,\n  +id: Uuid,\n|};\n\nexport type CredGraphJSON = {|\n  +mpg: MarkovProcessGraphJSON,\n  // scores for each node in the same node order used by the markov process graph\n  +scores: $ReadOnlyArray<number>,\n|};\n\nexport class CredGraph {\n  _mpg: MarkovProcessGraph;\n  // Scores for each node, tracked in the MPG node order\n  _scores: $ReadOnlyArray<number>;\n\n  constructor(\n    markovProcessGraph: MarkovProcessGraph,\n    scores: $ReadOnlyArray<number>\n  ) {\n    this._mpg = markovProcessGraph;\n    this._scores = scores;\n  }\n\n  _cred(addr: NodeAddressT): number {\n    const index = NullUtil.get(this._mpg.nodeIndex(addr));\n    return this._scores[index];\n  }\n\n  _credFlow(edge: MarkovEdge): number {\n    const srcCred /* heh */ = this._cred(edge.src);\n    return srcCred * edge.transitionProbability;\n  }\n\n  node(addr: NodeAddressT): ?Node {\n    const node = this._mpg.node(addr);\n    if (node == null) return undefined;\n    return {...node, cred: this._cred(addr)};\n  }\n\n  *nodes(): Iterator<Node> {\n    for (const node of this._mpg.nodes()) {\n      yield {...node, cred: this._cred(node.address)};\n    }\n  }\n\n  *edges(): Iterator<Edge> {\n    for (const edge of this._mpg.edges()) {\n      yield {...edge, credFlow: this._credFlow(edge)};\n    }\n  }\n\n  *participants(): Iterator<Participant> {\n    for (const {address, description, id} of this._mpg.participants()) {\n      const epochs = this._mpg.epochStarts().map((epochStart) => ({\n        owner: id,\n        epochStart,\n      }));\n      let totalCred = 0;\n      const credPerInterval = epochs.map((e) => {\n        const payoutAddress = payoutGadget.toRaw(e);\n        const payoutMarkovEdge = NullUtil.get(this._mpg.edge(payoutAddress));\n        const cred = this._credFlow(payoutMarkovEdge);\n        totalCred += cred;\n        return cred;\n      });\n      yield {address, description, credPerInterval, cred: totalCred, id};\n    }\n  }\n\n  intervals(): IntervalSequence {\n    return this._mpg.intervals();\n  }\n\n  *inNeighbors(addr: NodeAddressT): Iterator<Edge> {\n    for (const edge of this._mpg.inNeighbors(addr)) {\n      yield {...edge, credFlow: this._credFlow(edge)};\n    }\n  }\n\n  toJSON(): CredGraphJSON {\n    const mpgJson = this._mpg.toJSON();\n    return {\n      mpg: mpgJson,\n      scores: this._scores,\n    };\n  }\n\n  static fromJSON(j: CredGraphJSON): CredGraph {\n    return new CredGraph(MarkovProcessGraph.fromJSON(j.mpg), j.scores);\n  }\n}\n\nexport const jsonParser: C.Parser<CredGraphJSON> = C.object({\n  mpg: markovProcessGraphJSONParser,\n  scores: C.array(C.number),\n});\n\nexport const parser: C.Parser<CredGraph> = C.fmap(\n  jsonParser,\n  CredGraph.fromJSON\n);\n","// @flow\n\n/**\n * This module exposes a class that accesses participant data, aggregating\n * between a CredGraph and a Ledger.\n *\n * It is useful for cases where you want to view a participant's Cred and Grain\n * data simultaneously, for example for creating summary dashboards.\n */\nimport {sum} from \"d3-array\";\nimport deepFreeze from \"deep-freeze\";\nimport {\n  CredGraph,\n  type Participant as GraphParticipant,\n} from \"./credrank/credGraph\";\nimport {type Identity, type IdentityId, identityParser} from \"./identity\";\nimport * as G from \"./ledger/grain\";\nimport {type Grain, add, ZERO} from \"./ledger/grain\";\nimport {Ledger, type Account} from \"./ledger/ledger\";\nimport {type TimestampMs} from \"../util/timestamp\";\nimport findLastIndex from \"lodash.findlastindex\";\nimport {\n  type IntervalSequence,\n  intervalSequence,\n  intervalSequenceParser,\n} from \"./interval\";\nimport * as C from \"../util/combo\";\n\n/**\n * Cred and Grain data for a given participant.\n *\n * Implicitly has an associated time scope, which will\n * be the time scope of the CredGrainView or TimeScopedCredGrainView that\n * generated this.\n *\n * The indices of credPerInterval/grainEarnedPerInterval correspond to the\n * same indices in the IntervalSequence of the CredGrainView or\n * TimeScopedCredGrainView that generated this.\n */\nexport type ParticipantCredGrain = {|\n  // Is the user active\n  +active: boolean,\n  +identity: Identity,\n  // Total Cred earned during the time scope.\n  +cred: number,\n  // Cred earned in each interval within the time scope.\n  +credPerInterval: $ReadOnlyArray<number>,\n  // Total Grain earned during the time scope.\n  +grainEarned: Grain,\n  // Grain earned in each interval within the time scope.\n  +grainEarnedPerInterval: $ReadOnlyArray<Grain>,\n|};\n\nexport type CredGrainViewJSON = {|\n  +participants: $ReadOnlyArray<ParticipantCredGrain>,\n  +intervals: IntervalSequence,\n|};\nexport const credGrainViewParser: C.Parser<CredGrainView> = C.object({\n  participants: C.array(\n    C.object({\n      active: C.boolean,\n      identity: identityParser,\n      cred: C.number,\n      credPerInterval: C.array(C.number),\n      grainEarned: G.parser,\n      grainEarnedPerInterval: C.array(G.parser),\n    })\n  ),\n  intervals: intervalSequenceParser,\n}).fmap((json) => CredGrainView.fromJSON(json));\n\n/**\n * Aggregates data across a CredGraph and Ledger.\n *\n * By default, it includes data across all time present in the instance.\n * Callers can call `withTimeScope` to get a `TimeScopedCredGrainView` which\n * returns data that only includes a continuous subset of cred and grain data\n * across time.\n */\nexport class CredGrainView {\n  _participants: $ReadOnlyArray<ParticipantCredGrain>;\n  _intervals: IntervalSequence;\n  _credTotals: Array<number>;\n  _grainTotals: Array<Grain>;\n\n  constructor(\n    participants: $ReadOnlyArray<ParticipantCredGrain>,\n    intervals: IntervalSequence\n  ) {\n    this._participants = participants;\n    this._intervals = intervals;\n    this._credTotals = [];\n    this._grainTotals = [];\n    participants.forEach((participant) => {\n      for (let i = 0; i < this._intervals.length; i++) {\n        this._credTotals[i] =\n          participant.credPerInterval[i] + (this._credTotals[i] || 0);\n        this._grainTotals[i] = add(\n          participant.grainEarnedPerInterval[i],\n          this._grainTotals[i] || ZERO\n        );\n      }\n    });\n  }\n\n  static _calculateGrainEarnedPerInterval(\n    account: Account,\n    intervals: IntervalSequence\n  ): $ReadOnlyArray<Grain> {\n    let allocationIndex = 0;\n    return intervals.map((interval) => {\n      let grain = G.ZERO;\n      while (\n        account.allocationHistory.length - 1 >= allocationIndex &&\n        interval.startTimeMs <\n          account.allocationHistory[allocationIndex].credTimestampMs &&\n        account.allocationHistory[allocationIndex].credTimestampMs <=\n          interval.endTimeMs\n      ) {\n        grain = G.add(\n          grain,\n          account.allocationHistory[allocationIndex].grainReceipt.amount\n        );\n        allocationIndex++;\n      }\n      return grain;\n    });\n  }\n\n  validateForGrainAllocation() {\n    if (this.activeParticipants().length === 0) {\n      throw new Error(`must have at least one identity to allocate grain to`);\n    }\n\n    this.activeParticipants().forEach((p) => {\n      p.credPerInterval.forEach((c) => {\n        if (typeof c !== \"number\") {\n          throw new Error(`Non numeric cred value found`);\n        }\n        if (c < 0) {\n          throw new Error(`negative cred in interval data`);\n        }\n      });\n\n      if (typeof p.cred !== \"number\") {\n        throw new Error(`Non numeric cred value found`);\n      }\n\n      if (p.credPerInterval.length !== this.intervals().length) {\n        throw new Error(`participant cred per interval length mismatch`);\n      }\n\n      if (p.grainEarnedPerInterval.length !== this.intervals().length) {\n        throw new Error(`participant grain per interval length mismatch`);\n      }\n\n      if (sum(p.credPerInterval) !== p.cred) {\n        throw new Error(\n          `participant cred per interval mismatched with participant cred total`\n        );\n      }\n\n      if (!G.eq(G.sum(p.grainEarnedPerInterval), p.grainEarned)) {\n        throw new Error(\n          `participant grain per interval mismatched with participant grain total:`\n        );\n      }\n\n      p.grainEarnedPerInterval.forEach((g) => {\n        if (g < G.ZERO) {\n          throw new Error(`negative grain paid in interval data`);\n        }\n      });\n    });\n\n    if (sum(this.totalCredPerInterval()) < 1)\n      throw new Error(\n        \"cred is zero. Make sure your plugins are configured correctly and remember to run 'yarn go' to calculate the cred scores.\"\n      );\n  }\n\n  withTimeScope(\n    startTimeMs: TimestampMs,\n    endTimeMs: TimestampMs\n  ): TimeScopedCredGrainView {\n    return new TimeScopedCredGrainView(this, startTimeMs, endTimeMs);\n  }\n\n  withTimeScopeFromLookback(\n    effectiveTimestamp: TimestampMs,\n    numIntervalsLookback: number\n  ): TimeScopedCredGrainView {\n    const intervalsBeforeEffective = this._intervals.filter(\n      (interval) => interval.endTimeMs <= effectiveTimestamp\n    );\n\n    if (!numIntervalsLookback)\n      return new TimeScopedCredGrainView(this, -Infinity, effectiveTimestamp);\n\n    if (\n      !intervalsBeforeEffective ||\n      intervalsBeforeEffective.length <= numIntervalsLookback\n    )\n      return new TimeScopedCredGrainView(this, -Infinity, effectiveTimestamp);\n\n    return new TimeScopedCredGrainView(\n      this,\n      intervalsBeforeEffective[\n        intervalsBeforeEffective.length - numIntervalsLookback\n      ].startTimeMs,\n      effectiveTimestamp\n    );\n  }\n\n  intervals(): IntervalSequence {\n    return this._intervals;\n  }\n\n  participants(): $ReadOnlyArray<ParticipantCredGrain> {\n    return this._participants;\n  }\n\n  activeParticipants(): $ReadOnlyArray<ParticipantCredGrain> {\n    return this._participants.filter((participant) => participant.active);\n  }\n\n  // This is imprecise, due to floating point rounding.\n  totalCredPerInterval(): $ReadOnlyArray<number> {\n    return this._credTotals;\n  }\n\n  totalGrainPerInterval(): $ReadOnlyArray<Grain> {\n    return this._grainTotals;\n  }\n\n  toJSON(): CredGrainViewJSON {\n    return {\n      participants: this._participants,\n      intervals: this._intervals,\n    };\n  }\n\n  static fromJSON(json: CredGrainViewJSON): CredGrainView {\n    return new CredGrainView(json.participants, json.intervals);\n  }\n\n  static fromCredGraphAndLedger(\n    credGraph: CredGraph,\n    ledger: Ledger\n  ): CredGrainView {\n    const intervals = deepFreeze(credGraph.intervals());\n\n    const graphParticipants = new Map<IdentityId, GraphParticipant>();\n    for (const participant of credGraph.participants()) {\n      graphParticipants.set(participant.id, participant);\n    }\n\n    const participants = deepFreeze(\n      ledger.accounts().map((account) => {\n        const graphParticipant = graphParticipants.get(account.identity.id);\n        if (!graphParticipant)\n          throw new Error(\n            `The graph is missing account [${account.identity.name}: ${account.identity.id}] that exists in the ledger. Try recalculating the scores.`\n          );\n\n        const grainEarnedPerInterval = this._calculateGrainEarnedPerInterval(\n          account,\n          intervals\n        );\n        return {\n          active: account.active,\n          identity: account.identity,\n          cred: graphParticipant.cred,\n          credPerInterval: graphParticipant.credPerInterval,\n          grainEarned: account.paid,\n          grainEarnedPerInterval,\n        };\n      })\n    );\n    return new CredGrainView(participants, intervals);\n  }\n}\n\n/**\n * This class's contructor stores a continuous subset of the originalIntervals\n * and participant cred/grain data where intervals are only included if their\n * start and end times are both within the provided startTimeMs and endTimeMs,\n * inclusively.\n */\nexport class TimeScopedCredGrainView {\n  _participants: $ReadOnlyArray<ParticipantCredGrain>;\n  _intervals: IntervalSequence;\n  _credTotals: $ReadOnlyArray<number>;\n  _grainTotals: $ReadOnlyArray<Grain>;\n\n  constructor(\n    credGrainView: CredGrainView,\n    startTimeMs: TimestampMs,\n    endTimeMs: TimestampMs\n  ) {\n    const originalIntervals = credGrainView.intervals();\n    let inclusiveStartIndex = originalIntervals.findIndex(\n      (interval) => startTimeMs <= interval.startTimeMs\n    );\n    if (inclusiveStartIndex === -1)\n      inclusiveStartIndex = originalIntervals.length;\n\n    const exclusiveEndIndex =\n      findLastIndex(\n        originalIntervals,\n        (interval) => interval.endTimeMs <= endTimeMs\n      ) + 1;\n\n    this._intervals = deepFreeze(\n      intervalSequence(\n        originalIntervals.slice(inclusiveStartIndex, exclusiveEndIndex)\n      )\n    );\n    this._participants = deepFreeze(\n      credGrainView.participants().map((participant) => {\n        const credPerInterval = participant.credPerInterval.slice(\n          inclusiveStartIndex,\n          exclusiveEndIndex\n        );\n        const grainEarnedPerInterval = participant.grainEarnedPerInterval.slice(\n          inclusiveStartIndex,\n          exclusiveEndIndex\n        );\n        return {\n          active: participant.active,\n          identity: participant.identity,\n          cred: credPerInterval.reduce((a, b) => a + b, 0),\n          credPerInterval,\n          grainEarned: grainEarnedPerInterval.reduce(\n            (a, b) => G.add(a, b || G.ZERO),\n            G.ZERO\n          ),\n          grainEarnedPerInterval,\n        };\n      })\n    );\n    this._credTotals = credGrainView\n      .totalCredPerInterval()\n      .slice(inclusiveStartIndex, exclusiveEndIndex);\n    this._grainTotals = credGrainView\n      .totalGrainPerInterval()\n      .slice(inclusiveStartIndex, exclusiveEndIndex);\n  }\n\n  intervals(): IntervalSequence {\n    return this._intervals;\n  }\n\n  participants(): $ReadOnlyArray<ParticipantCredGrain> {\n    return this._participants;\n  }\n\n  activeParticipants(): $ReadOnlyArray<ParticipantCredGrain> {\n    return this._participants.filter((participant) => participant.active);\n  }\n\n  // This is imprecise, due to floating point rounding.\n  totalCredPerInterval(): $ReadOnlyArray<number> {\n    return this._credTotals;\n  }\n\n  totalGrainPerInterval(): $ReadOnlyArray<Grain> {\n    return this._grainTotals;\n  }\n}\n","// @flow\n\nimport * as uuid from \"../../util/uuid\";\nimport {type TimestampMs} from \"../../util/timestamp\";\nimport {computeAllocation} from \"./grainAllocation\";\nimport {type AllocationPolicy} from \"./policies\";\nimport {type CredGrainView} from \"../credGrainView\";\nimport {type Distribution} from \"./distribution\";\n\n/**\n * Compute a single Distribution using CredAccountData.\n *\n * The distribution will include the provided policies.\n * It will be computed using only Cred intervals that are finished as of the\n * effectiveTimestamp.\n *\n * Note: This method is untested as it is just a bit of plubming; flow gives me\n * confidence that the semantics are correct.\n **/\nexport function computeDistribution(\n  policies: $ReadOnlyArray<AllocationPolicy>,\n  credGrainView: CredGrainView,\n  effectiveTimestamp: TimestampMs\n): Distribution {\n  const allocations = policies.map((p) =>\n    computeAllocation(p, credGrainView, effectiveTimestamp)\n  );\n  const distribution = {\n    id: uuid.random(),\n    allocations,\n    credTimestamp: effectiveTimestamp,\n  };\n  return distribution;\n}\n","// @flow\n\nimport {type TimestampMs} from \"../../util/timestamp\";\nimport * as NullUtil from \"../../util/null\";\nimport {type IntervalSequence, intervalSequence} from \"../interval\";\nimport {Ledger} from \"./ledger\";\nimport {CredGraph} from \"../credrank/credGraph\";\nimport {computeDistribution} from \"./computeDistribution\";\nimport {type Distribution} from \"./distribution\";\nimport {CredGrainView} from \"../credGrainView\";\nimport type {GrainConfig} from \"../../api/grainConfig\";\n\n/**\n * Iteratively compute and distribute Grain, based on the provided CredGraph,\n * into the provided Ledger, according to the specified DistributionPolicy.\n *\n * Here are some examples of how it works:\n *\n * - The last time there was a distribution was two days ago. Since then,\n *   no new Cred Intervals have been completed. This method will no-op.\n *\n * - The last time there was a distribution was last week. Since then, one new\n *   Cred Interval has been completed. The method will apply one Distribution.\n *\n * - The last time there was a distribution was a month ago. Since then, four\n *   Cred Intervals have been completed. The method will apply four Distributions,\n *   unless maxOldDistributions is set to a lower number (e.g. 2), in which case\n *   that maximum number of distributions will be applied.\n *\n * It returns the list of applied distributions, which may be helpful for\n * diagnostics, printing a summary, etc.\n */\nexport function applyDistributions(\n  config: GrainConfig,\n  credGraph: CredGraph,\n  ledger: Ledger,\n  currentTimestamp: TimestampMs,\n  allowMultipleDistributionsPerInterval: boolean\n): $ReadOnlyArray<Distribution> {\n  const credIntervals = credGraph.intervals();\n  const distributionIntervals = _chooseDistributionIntervals(\n    credIntervals,\n    NullUtil.orElse(ledger.lastDistributionTimestamp(), -Infinity),\n    currentTimestamp,\n    config.maxSimultaneousDistributions,\n    allowMultipleDistributionsPerInterval\n  );\n  return distributionIntervals.map((interval) => {\n    // Recompute for every endpoint because the Ledger will be in a different state\n    // (wrt paid balances)\n\n    const credGrainView = CredGrainView.fromCredGraphAndLedger(\n      credGraph,\n      ledger\n    );\n    const distribution = computeDistribution(\n      config.allocationPolicies,\n      credGrainView,\n      interval.endTimeMs\n    );\n    ledger.distributeGrain(distribution);\n    return distribution;\n  });\n}\n\nexport function _chooseDistributionIntervals(\n  credIntervals: IntervalSequence,\n  lastDistributionTimestamp: TimestampMs,\n  currentTimestamp: TimestampMs,\n  maxSimultaneousDistributions: number,\n  allowMultipleDistributionsPerInterval: boolean\n): IntervalSequence {\n  // Slice off the final interval--we may assume that it is not yet finished.\n  const completeIntervals = credIntervals.filter(\n    (x) => x.endTimeMs <= currentTimestamp\n  );\n  const undistributedIntervals = completeIntervals.filter(\n    (i) => i.endTimeMs > lastDistributionTimestamp\n  );\n  const sequence = undistributedIntervals.slice(\n    undistributedIntervals.length - maxSimultaneousDistributions,\n    undistributedIntervals.length\n  );\n  if (allowMultipleDistributionsPerInterval && !sequence.length)\n    return intervalSequence(\n      completeIntervals.slice(completeIntervals.length - 1)\n    );\n  return intervalSequence(sequence);\n}\n","// @flow\n\n/**\n * This module outputs aggregated data that combines Cred Scores with Ledger\n * Account data.\n *\n * We use this internally when creating Grain distributions using a Ledger and\n * a Cred View. It's also an experimental output format which gives overall\n * information on the cred in an instance. We may remove it or make breaking\n * changes to it in the future.\n */\nimport {sum} from \"d3-array\";\nimport {Ledger, type Account} from \"./ledger\";\nimport {NodeAddress, type NodeAddressT} from \"../graph\";\nimport {type IntervalSequence} from \"../interval\";\nimport {type Alias} from \"../identity\";\nimport {CredGraph} from \"../credrank/credGraph\";\n\nexport type Cred = $ReadOnlyArray<number>;\n\nexport type CredAccount = {|\n  +cred: Cred,\n  +totalCred: number,\n  +account: Account,\n|};\n\nexport type UnclaimedAlias = {|\n  +alias: Alias,\n  +totalCred: number,\n  +cred: Cred,\n|};\n\nexport type CredAccountData = {|\n  // Regular accounts: an identity with Cred, and potentially Grain\n  +accounts: $ReadOnlyArray<CredAccount>,\n  // Unclaimed aliases: An account on some platform that hasn't yet been\n  // connected to any SourceCred identity\n  +unclaimedAliases: $ReadOnlyArray<UnclaimedAlias>,\n  // For interpreting the Cred data associated with cred accounts and\n  // unclaimed accounts.\n  +intervals: IntervalSequence,\n|};\n\nexport function computeCredAccounts(\n  ledger: Ledger,\n  credGraph: CredGraph\n): CredAccountData {\n  const grainAccounts = ledger.accounts();\n  const userlikeInfo = new Map();\n  const intervals = credGraph.intervals();\n  const noIntervals = intervals.length === 0;\n  for (const {\n    address,\n    description,\n    credPerInterval,\n  } of credGraph.participants()) {\n    if (noIntervals) {\n      userlikeInfo.set(address, {cred: [], description});\n    } else if (credPerInterval === null) {\n      throw new Error(\n        `userlike ${NodeAddress.toString(address)} does not have detailed cred`\n      );\n    } else {\n      userlikeInfo.set(address, {cred: credPerInterval, description});\n    }\n  }\n  return _computeCredAccounts(grainAccounts, userlikeInfo, intervals);\n}\n\nexport function _computeCredAccounts(\n  grainAccounts: $ReadOnlyArray<Account>,\n  userlikeInfo: Map<NodeAddressT, {|+cred: Cred, +description: string|}>,\n  intervals: IntervalSequence\n): CredAccountData {\n  const aliasAddresses: Set<NodeAddressT> = new Set();\n  const accountAddresses: Set<NodeAddressT> = new Set();\n\n  const accounts = [];\n  const unclaimedAliases = [];\n\n  for (const account of grainAccounts) {\n    accountAddresses.add(account.identity.address);\n    for (const alias of account.identity.aliases) {\n      aliasAddresses.add(alias.address);\n    }\n    const info = userlikeInfo.get(account.identity.address);\n    if (info == null) {\n      throw new Error(\n        `cred sync error: no info for account ${account.identity.name}`\n      );\n    }\n    const {cred} = info;\n    const credAccount = {account, cred, totalCred: sum(cred)};\n    accounts.push(credAccount);\n  }\n\n  for (const [address, info] of userlikeInfo.entries()) {\n    if (accountAddresses.has(address)) {\n      // This userlike actually has an explicit account\n      continue;\n    }\n    const {cred, description} = info;\n    if (aliasAddresses.has(address)) {\n      throw new Error(\n        `cred sync error: alias ${NodeAddress.toString(\n          address\n        )} (aka ${description}) included in Cred scores`\n      );\n    }\n    unclaimedAliases.push({\n      alias: {address, description},\n      cred,\n      totalCred: sum(cred),\n    });\n  }\n  return {accounts, unclaimedAliases, intervals};\n}\n","// @flow\n\nimport {Ledger} from \"./ledger\";\nimport type {LedgerEvent} from \"./ledger\";\nimport diffBy from \"lodash.differenceby\";\n\nexport type LedgerDiff = $ReadOnlyArray<LedgerEvent>;\n\n/**\n * Returns an array of ledger events that exist in ledger \"a\" but not in \"b\".\n * An event is considered equal to another if it has the same uuid.\n *\n * This will not return any events from \"b\" that don't exist in \"a\", so the\n * order of the params matters.\n *\n * Example 1:\n *  - Ledger A: [1, 2, 3]\n *  - Ledger B: [1, 3, 4, 5]\n *  - Returns: [2]\n *\n * Example 2:\n *  - Ledger A: [1, 3, 4, 5]\n *  - Ledger B: [1, 2, 3]\n *  - Returns: [4, 5]\n */\nexport function diffLedger(a: Ledger, b: Ledger): LedgerDiff {\n  return diffBy(a.eventLog(), b.eventLog(), \"uuid\");\n}\n","// @flow\n\nimport {applyDistributions} from \"./applyDistributions\";\nimport {computeDistribution} from \"./computeDistribution\";\nimport {computeCredAccounts} from \"./credAccounts\";\n\nexport {diffLedger} from \"./diffLedger\";\nexport {ensureIdentityExists} from \"./identityProposal\";\n\nexport const distributions = {\n  applyDistributions,\n  computeDistribution,\n  computeCredAccounts,\n};\n","// @flow\n\nimport {Ledger, type LedgerLog} from \"../core/ledger/ledger\";\nimport {diffLedger, type LedgerDiff} from \"../core/ledger/diffLedger\";\nimport type {WritableDataStorage} from \"../core/storage\";\nimport {decode, encode} from \"../core/storage/textEncoding\";\n\n/**\n * Generic adaptor for persisting a Ledger to some storage backend\n * (e.g. GitHub, local filesystem, a database, etc)\n */\nexport interface LedgerStorage {\n  read(): Promise<Ledger>;\n  write(ledger: Ledger): Promise<void>;\n}\n\ntype LedgerManagerConfig = {|\n  +storage: WritableDataStorage,\n  +initLogs?: LedgerLog,\n  +path?: string,\n|};\n\ntype ReloadResult = {|\n  +error: string | null,\n  +localChanges: LedgerDiff,\n  +remoteChanges: LedgerDiff,\n|};\n\nexport class LedgerManager {\n  _ledger: Ledger;\n  +_storage: WritableDataStorage;\n  _path: string;\n\n  constructor(config: LedgerManagerConfig) {\n    this._path = config.path ?? \"data/ledger.json\";\n    this._storage = config.storage;\n    this._ledger = config.initLogs\n      ? Ledger.fromEventLog(config.initLogs)\n      : new Ledger();\n  }\n\n  get ledger(): Ledger {\n    return this._ledger;\n  }\n\n  /**\n   * Returns a list of LedgerEvents that have not been persisted to storage yet\n   */\n  _getLocalChanges(remoteLedger: Ledger): LedgerDiff {\n    return diffLedger(this._ledger, remoteLedger);\n  }\n\n  /**\n   * Returns a list of LedgerEvents in the persisted ledger that have not been\n   * applied to the local ledger.\n   */\n  _getRemoteChanges(remoteLedger: Ledger): LedgerDiff {\n    return diffLedger(remoteLedger, this._ledger);\n  }\n\n  /**\n   * Persists the local (in-memory) Ledger to the ledger storage. Reloads the\n   * remote ledger from storage right before persisting it to minimize the\n   * possibility of overwriting remote changes that were not synced to the local\n   * ledger and ensure consistency of the ledger events (e.g. no double spends).\n   *\n   * A race condition is present in this function: if client A runs reloadLedger\n   * and then client B writes to the remote ledger before client A finishes writing,\n   * then the changes to the ledger that client B made would be overwritten by the\n   * changes from client A. The correctness and consistency of the ledger will still\n   * be maintained, its just that client B might experience data loss of whatever\n   * events they were trying to sync. To detect if this has occurred, we reload\n   * the ledger again after writing the data to ensure the local changes were\n   * not overwritten. If they were, we can show an error message to client B with\n   * a list of changes that failed to sync.\n   */\n  async persist(): Promise<ReloadResult> {\n    // START RACE CONDITION\n    const preWriteReloadRes = await this.reloadLedger();\n    if (preWriteReloadRes.error) {\n      return preWriteReloadRes;\n    }\n    await this._storage.set(this._path, encode(this._ledger.serialize()));\n    // END RACE CONDITION\n\n    // Reload ledger again to ensure all the changes were persisted into storage\n    const postWriteReloadRes = await this.reloadLedger();\n    if (postWriteReloadRes.error) {\n      return postWriteReloadRes;\n    }\n\n    if (postWriteReloadRes.localChanges.length !== 0) {\n      return {\n        ...postWriteReloadRes,\n        error: \"Some local changes have not been persisted\",\n      };\n    }\n\n    return postWriteReloadRes;\n  }\n\n  /** Reloads the persisted Ledger from storage and replays any local changes\n   *  on top of any new remote changes, if they exist.\n   *\n   *  Will return the list of new remote changes as well as a list of local\n   *  changes that have not been persisted yet. This data is useful for the\n   *  end user to know:\n   *  - what changes they have yet to save\n   *  - what new remote changes have been applied\n   *  - if there are any inconsistencies as a result of new remote changes that\n   *    conflict with the local changes (e.g. double spend)\n   */\n  async reloadLedger(): Promise<ReloadResult> {\n    let remoteLedger: Ledger;\n    try {\n      remoteLedger = await this._getLedger();\n    } catch (e) {\n      return {\n        error: e.message,\n        remoteChanges: [],\n        localChanges: [],\n      };\n    }\n\n    const localChanges = this._getLocalChanges(remoteLedger);\n    const remoteChanges = this._getRemoteChanges(remoteLedger);\n\n    if (!remoteChanges.length) {\n      return {error: null, remoteChanges: [], localChanges};\n    }\n\n    try {\n      // Replay local actions, will throw if any local changes break ledger consistency\n      for (const event of localChanges) {\n        remoteLedger._createAndProcessEvent(event.action);\n      }\n\n      this._ledger = remoteLedger;\n      return {\n        error: null,\n        remoteChanges,\n        localChanges,\n      };\n    } catch (e) {\n      // Reset local ledger to the remote state\n      this._ledger = await this._getLedger();\n\n      return {\n        error: `Unable to apply local changes: ${e.message}, resetting to remote ledger`,\n        remoteChanges,\n        localChanges,\n      };\n    }\n  }\n\n  async _getLedger(): Promise<Ledger> {\n    const encodedLedger = await this._storage.get(this._path);\n    return Ledger.parse(decode(encodedLedger));\n  }\n}\n","// @flow\n\n// Right now all RepoIds are assumed to refer to GitHub repos.\n// In the future, we may support other identifiers.\nexport opaque type RepoId: {|\n  +name: string,\n  +owner: string,\n|} = {|\n  +name: string,\n  +owner: string,\n|};\n\nexport opaque type RepoIdString: string = string;\n\nexport const githubOwnerPattern = \"[A-Za-z0-9-]+\";\nexport const githubRepoPattern = \"[A-Za-z0-9-._]+\";\n\nexport function makeRepoId(owner: string, name: string): RepoId {\n  const validOwner = new RegExp(`^${githubOwnerPattern}$`);\n  const validRepo = new RegExp(`^${githubRepoPattern}$`);\n  if (!owner.match(validOwner)) {\n    throw new Error(`Invalid repository owner: ${JSON.stringify(owner)}`);\n  }\n  if (!name.match(validRepo)) {\n    throw new Error(`Invalid repository name: ${JSON.stringify(name)}`);\n  }\n  return {owner, name};\n}\n\nexport function stringToRepoId(x: string): RepoId {\n  const pieces = x.split(\"/\");\n  if (pieces.length !== 2) {\n    throw new Error(`Invalid repo string: ${x}`);\n  }\n  return makeRepoId(pieces[0], pieces[1]);\n}\n\nexport function repoIdToString(x: RepoId): RepoIdString {\n  return `${x.owner}/${x.name}`;\n}\n","var alphabetByEncoding = {};\nvar alphabetByValue = new Array(64);\nfor (var i = 0, start = \"A\".charCodeAt(0), limit = \"Z\".charCodeAt(0); i + start <= limit; i++) {\n    var char = String.fromCharCode(i + start);\n    alphabetByEncoding[char] = i;\n    alphabetByValue[i] = char;\n}\nfor (var i = 0, start = \"a\".charCodeAt(0), limit = \"z\".charCodeAt(0); i + start <= limit; i++) {\n    var char = String.fromCharCode(i + start);\n    var index = i + 26;\n    alphabetByEncoding[char] = index;\n    alphabetByValue[index] = char;\n}\nfor (var i = 0; i < 10; i++) {\n    alphabetByEncoding[i.toString(10)] = i + 52;\n    var char = i.toString(10);\n    var index = i + 52;\n    alphabetByEncoding[char] = index;\n    alphabetByValue[index] = char;\n}\nalphabetByEncoding[\"+\"] = 62;\nalphabetByValue[62] = \"+\";\nalphabetByEncoding[\"/\"] = 63;\nalphabetByValue[63] = \"/\";\nvar bitsPerLetter = 6;\nvar bitsPerByte = 8;\nvar maxLetterValue = 63;\nexport function fromBase64(input) {\n    var totalByteLength = (input.length / 4) * 3;\n    if (input.substr(-2) === \"==\") {\n        totalByteLength -= 2;\n    }\n    else if (input.substr(-1) === \"=\") {\n        totalByteLength--;\n    }\n    var out = new ArrayBuffer(totalByteLength);\n    var dataView = new DataView(out);\n    for (var i = 0; i < input.length; i += 4) {\n        var bits = 0;\n        var bitLength = 0;\n        for (var j = i, limit = i + 3; j <= limit; j++) {\n            if (input[j] !== \"=\") {\n                if (!(input[j] in alphabetByEncoding)) {\n                    throw new TypeError(\"Invalid character \" + input[j] + \" in base64 string.\");\n                }\n                bits |= alphabetByEncoding[input[j]] << ((limit - j) * bitsPerLetter);\n                bitLength += bitsPerLetter;\n            }\n            else {\n                bits >>= bitsPerLetter;\n            }\n        }\n        var chunkOffset = (i / 4) * 3;\n        bits >>= bitLength % bitsPerByte;\n        var byteLength = Math.floor(bitLength / bitsPerByte);\n        for (var k = 0; k < byteLength; k++) {\n            var offset = (byteLength - k - 1) * bitsPerByte;\n            dataView.setUint8(chunkOffset + k, (bits & (255 << offset)) >> offset);\n        }\n    }\n    return new Uint8Array(out);\n}\nexport function toBase64(input) {\n    var str = \"\";\n    for (var i = 0; i < input.length; i += 3) {\n        var bits = 0;\n        var bitLength = 0;\n        for (var j = i, limit = Math.min(i + 3, input.length); j < limit; j++) {\n            bits |= input[j] << ((limit - j - 1) * bitsPerByte);\n            bitLength += bitsPerByte;\n        }\n        var bitClusterCount = Math.ceil(bitLength / bitsPerLetter);\n        bits <<= bitClusterCount * bitsPerLetter - bitLength;\n        for (var k = 1; k <= bitClusterCount; k++) {\n            var offset = (bitClusterCount - k) * bitsPerLetter;\n            str += alphabetByValue[(bits & (maxLetterValue << offset)) >> offset];\n        }\n        str += \"==\".slice(0, 4 - bitClusterCount);\n    }\n    return str;\n}\n","// @flow\n\nimport type {DataStorage, WritableDataStorage} from \"./index\";\nimport {stringToRepoId} from \"../../plugins/github/repoId\";\nimport type {GithubToken} from \"../../plugins/github/token\";\nimport type {RepoId} from \"../../plugins/github/repoId\";\nimport fetch from \"cross-fetch\";\nimport {decode as base64Decode} from \"base-64\";\nimport {encode} from \"./textEncoding\";\nimport {toBase64} from \"@aws-sdk/util-base64-browser\";\n\n// content keyword for matching GitHub's API terminology.\nconst GET_CONTENT_QUERY = `\nquery getContent($owner: String!, $repo: String!, $expression:String!) {\n  repository(owner: $owner, name: $repo) {\n    object(expression: $expression) {\n      ... on Blob {\n        oid\n      }\n    }\n  }\n}\n`;\n\ntype CreateBlobRes = {\n  sha: string,\n  url: string,\n};\n\ntype Opts = {\n  apiToken: GithubToken,\n  repo: string,\n  branch: string,\n};\n\ntype Author = {\n  name: string,\n  email: string,\n};\n\nexport class GithubStorage implements DataStorage {\n  static ENDPOINT: string = \"https://api.github.com\";\n\n  constructor(opts: Opts) {\n    this._token = opts.apiToken;\n    this._repoId = stringToRepoId(opts.repo);\n    this._branch = opts.branch;\n  }\n\n  _token: GithubToken;\n  _repoId: RepoId;\n  _branch: string;\n\n  /**\n   * get method loads the content specified by path in the GitHub repository.\n   *\n   * @param path relative path to the content.\n   * @returns {Promise<Uint8Array>}\n   */\n  async get(path: string): Promise<Uint8Array> {\n    const options = {\n      method: \"POST\",\n      headers: {\n        Authorization: `Bearer ${this._token}`,\n      },\n      body: JSON.stringify({\n        query: GET_CONTENT_QUERY,\n        variables: {\n          owner: this._repoId.owner,\n          repo: this._repoId.name,\n          expression: `${this._branch}:${path}`,\n        },\n      }),\n    };\n\n    const result = await fetch(`${GithubStorage.ENDPOINT}/graphql`, options);\n\n    const {data} = await result.json();\n    const blobSha = data.repository.object.oid;\n\n    const contentBlobRes = await fetch(\n      `${this._getRepoEndpoint()}/git/blobs/${blobSha}`,\n      {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${this._token}`,\n        },\n      }\n    );\n\n    const contentDataBase64 = await contentBlobRes.json();\n    const rawContent = base64Decode(contentDataBase64.content);\n    return encode(rawContent);\n  }\n\n  _getRepoEndpoint(): string {\n    const {owner, name} = this._repoId;\n    return `${GithubStorage.ENDPOINT}/repos/${owner}/${name}`;\n  }\n}\n\nexport class WritableGithubStorage\n  extends GithubStorage\n  implements WritableDataStorage {\n  async set(\n    path: string,\n    content: Uint8Array,\n    message?: string,\n    author?: Author\n  ): Promise<void> {\n    // Get latest commit hash of target branch\n    const targetBranchResult = await fetch(\n      `${this._getRepoEndpoint()}/git/ref/heads/${this._branch}`,\n      {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${this._token}`,\n        },\n      }\n    );\n\n    const targetBranchData = await targetBranchResult.json();\n    const baseCommit = targetBranchData.object.sha;\n\n    // Create new blob from the new content.\n    const createBlobResult = await fetch(\n      `${this._getRepoEndpoint()}/git/blobs`,\n      {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${this._token}`,\n        },\n        body: JSON.stringify({\n          owner: this._repoId.owner,\n          repo: this._repoId.name,\n          content: toBase64(content),\n          encoding: \"base64\",\n        }),\n      }\n    );\n\n    const createBlobData = await createBlobResult.json();\n    const createBlobSha = createBlobData.sha;\n\n    // Create a new tree from the latest commit and update the content blob\n    const uploadBlobResult = await fetch(\n      `${this._getRepoEndpoint()}/git/trees`,\n      {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${this._token}`,\n        },\n        body: JSON.stringify({\n          tree: [\n            {\n              sha: createBlobSha,\n              type: \"blob\",\n              path: path,\n              mode: \"100644\", // see https://docs.github.com/en/rest/reference/git#create-a-tree\n            },\n          ],\n          base_tree: baseCommit,\n        }),\n      }\n    );\n\n    const uploadContentBlobTree: CreateBlobRes = await uploadBlobResult.json();\n\n    // Create a commit with the new tree on top of the target branch\n    const commitContentResult = await fetch(\n      `${this._getRepoEndpoint()}/git/commits`,\n      {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${this._token}`,\n        },\n        body: JSON.stringify({\n          message: message ?? \"\",\n          tree: uploadContentBlobTree.sha,\n          parents: [baseCommit],\n          author: author ?? {\n            name: \"credbot\",\n            email: \"credbot@users.noreply.github.com\",\n          },\n        }),\n      }\n    );\n    const newCommit = await commitContentResult.json();\n\n    // Update the target branch to point to the new commit\n    await fetch(`${this._getRepoEndpoint()}/git/refs/heads/${this._branch}`, {\n      method: \"PATCH\",\n      headers: {\n        Authorization: `Bearer ${this._token}`,\n      },\n      body: JSON.stringify({\n        sha: newCommit.sha,\n      }),\n    });\n  }\n}\n","// @flow\n\nimport * as C from \"./combo\";\n\n/**\n * We have a convention of using TimestampMs as our default representation.\n * However TimestampISO has the benefit of being human readable / writable,\n * so it's used for serialization and display as well.\n * We'll validate types at runtime, as there's a fair chance we'll use these\n * functions to parse data that came from a Flow `any` type (like JSON).\n */\n\n// A timestamp representation in ms since epoch.\nexport type TimestampMs = number;\n\n// A timestamp representation in ISO 8601 format.\nexport opaque type TimestampISO: string = string;\n\n/**\n * Creates a TimestampISO from a TimestampMs-like input.\n *\n * Since much of the previous types have used `number` as a type instead of\n * TimestampMs. Accepting `number` will give an easier upgrade path, rather\n * than a forced refactor across the codebase.\n */\nexport function toISO(timestampLike: TimestampMs | number): TimestampISO {\n  const timestampMs: TimestampMs = validateTimestampMs(timestampLike);\n  return new Date(timestampMs).toISOString();\n}\n\n/**\n * Creates a TimestampMs from a TimestampISO.\n */\nexport function fromISO(timestampISO: TimestampISO | string): TimestampMs {\n  if (typeof timestampISO !== \"string\") {\n    throw new TypeError(\n      `TimestampISO values must be strings, ` +\n        `received: ${String(timestampISO)}`\n    );\n  }\n  const parsed = Date.parse(timestampISO);\n  if (Number.isNaN(parsed)) {\n    throw new RangeError(\n      `Could not parse TimestampISO, are you sure it's a valid ISO format? ` +\n        `received: ${String(timestampISO)}`\n    );\n  }\n  return parsed;\n}\n\n/**\n * Validate that a number is potentially a valid timestamp.\n *\n * This checks that the number is a finite integer, which avoids some potential\n * numbers that are not valid timestamps.\n */\nexport function validateTimestampMs(timestampMs: number): TimestampMs {\n  const asNumber = Number(timestampMs);\n  if (\n    timestampMs === null ||\n    timestampMs === undefined ||\n    !Number.isInteger(asNumber)\n  ) {\n    throw new TypeError(\n      `Numbers representing TimestampMs values must be finite integers, ` +\n        `received: ${String(timestampMs)}`\n    );\n  }\n  return new Date(asNumber).valueOf();\n}\n\nexport function validateTimestampISO(timestampISO: string): TimestampISO {\n  // Verify that it can be converted without throwing an error\n  fromISO(timestampISO);\n  return timestampISO;\n}\n\nexport const timestampMsParser: C.Parser<TimestampMs> = C.fmap(\n  C.number,\n  validateTimestampMs\n);\nexport const timestampISOParser: C.Parser<TimestampISO> = C.fmap(\n  C.string,\n  validateTimestampISO\n);\n","// @flow\n\n/**\n * This module defines configuration for the Dependencies system, a system\n * which allows a project to mint excess Cred for its dependencies.\n *\n * To learn about the semantics of the dependencies system, read the module\n * docstring for core/bonusMinting.js\n *\n * At a high level, this config type allows the instance maintainer to specify\n * identities (usually PROJECT-type identities) to mint extra Cred over time,\n * as a fraction of the baseline instance Cred.\n *\n * In the future, we'll likely build a UI to manage this config. However, right\n * now it's designed for hand-editability. Also, we really want to be able to\n * ship a default config that adds a SourceCred account (if one doesn't already\n * exist), activates it (if it was just created), and then flows it some Cred.\n *\n * With that in mind, here's how the config works:\n * - User makes a new config, specifying a name for the identity. The user does\n *   not manually write in an id.\n * - The config is validated against the ledger. If the config has an id, we\n *   verify that there's a matching identity in the ledger with that name\n *   (erroring if not). If the config doesn't have an id, we check if there is\n *   an identity in the ledger with that name. If there is, we write the id\n *   into the config. If there isn't, we create a new identity with the name,\n *   activate it (if told to do so by the config), and then write the id into\n *   the config.\n * - Afterwards, we save the config (which is guaranteed to have an id) back to\n *   disk.\n *\n * You'll note that the state in the config is a mix of human generated\n * (choosing the name) and automatically maintained (the id). It's something of\n * a weird compromise, but it accomplishes the design objective of having state\n * that's easy for humans to write by hand, but also tracks the vital\n * information by identity id (which is immutable) rather than by name (which\n * is re-nameable).\n *\n * Note that at present, when the identity in question is re-named, the config\n * must be manually updated to account for the rename. In the future (when the\n * config is automatically maintained) we'll remove this requirement. (Likely\n * we'll stop tracking the identities by name at all in the config; that's an\n * affordance to make the files generatable by hand.)\n */\nimport * as C from \"../util/combo\";\nimport {Ledger} from \"../core/ledger/ledger\";\nimport {\n  type TimestampISO,\n  timestampISOParser,\n  fromISO,\n  toISO,\n} from \"../util/timestamp\";\nimport {type IdentityId, type Name, nameParser} from \"../core/identity\";\nimport {parser as uuidParser} from \"../util/uuid\";\nimport {type BonusPolicy} from \"../core/bonusMinting\";\n\n// A finite nonnegative value (usually in range [0, 1]) which specifies how\n// much extra Cred to mint for a given dependency, as a proportion of the raw\n// contributor Cred in the instance. Thus, if a dependency has a weight of 0.1,\n// then extra Cred will be minted for the dependency equal to 10% of the raw Cred\n// in the instance. (Raw Cred being Cred before doing any dependency minting.)\nexport type DependencyWeight = number;\n\nexport type DependencyConfig = {|\n  // The id of the dependency in the ledger. If unset, it will be set automatically\n  // the first time the dependency config is used in cred analysis.\n  +id?: IdentityId,\n  // The Name of the dependency in question. This is intended as a convenience\n  // for the user; the user can write in a name here, and it will be used to\n  // automatically add the dependency to the ledger (if needed) and then to\n  // automatically add the id to the config.\n  //\n  // If the id is set on the config, and the name doesn't match the identity name\n  // in the ledger, an error will be thrown. This is to prevent users from changing\n  // the name here in the config and (incorrectly) believing that suffices to start\n  // flowing Cred to a new identity, after the id has already been set.\n  //\n  // Thus, if the dependency identity is re-named in the ledger, this file will\n  // also need to be edited to reflect the new name.\n  +name: Name,\n  // The time periods for which we're minting Cred. Each period has a start time and a\n  // mint weight; it is assumed to end as soon as the next period begins.\n  +periods: $ReadOnlyArray<MintPeriod>,\n  // Whether the dependency should be \"active\" for Grain collection by default.\n  // If this is true, then when the corresponding account is auto-created in the\n  // ledger, it will also be automatically activated.\n  // (Mostly included so we can have SourceCred default opt-in to receiving Grain\n  // in new instances.)\n  // Defaults to false if unset.\n  +autoActivateOnIdentityCreation?: boolean,\n\n  // If this is set, then a default time period will be injected in the\n  // dependency config with the weight set to this value (e.g. 0.05 = 5% additional cred minted).\n  // (Mostly included so we can have SourceCred receiving cred by default)\n  // Does not inject a starting period if unset.\n  +autoInjectStartingPeriodWeight?: number,\n|};\n\nexport type MintPeriod = {|\n  +startTime: TimestampISO,\n  +weight: number,\n|};\n\nexport const mintPeriodParser: C.Parser<MintPeriod> = C.object({\n  startTime: timestampISOParser,\n  weight: C.number,\n});\n\nfunction checkWeightValid(x: number): number {\n  if (x < 0) throw new Error(`must be a non-negative number, got ${x}`);\n  return x;\n}\n\nexport const dependencyConfigParser: C.Parser<DependencyConfig> = C.object(\n  {\n    name: nameParser,\n    periods: C.array(mintPeriodParser),\n  },\n  {\n    id: uuidParser,\n    autoActivateOnIdentityCreation: C.boolean,\n    autoInjectStartingPeriodWeight: C.fmap(C.number, checkWeightValid),\n  }\n);\n\nexport type DependenciesConfig = $ReadOnlyArray<DependencyConfig>;\nexport const parser: C.Parser<DependenciesConfig> = C.array(\n  dependencyConfigParser\n);\n\nexport function ensureIdentityExists(\n  dep: DependencyConfig,\n  ledger: Ledger\n): DependencyConfig {\n  const depId = dep.id;\n  if (depId == null) {\n    const existingAccount = ledger.accountByName(dep.name);\n    if (existingAccount != null) {\n      // Already created an account; let's just return a config with the id\n      // set.\n      const id = existingAccount.identity.id;\n      return {...dep, id};\n    } else {\n      // Create a new Identity for this dependency.\n      const id = ledger.createIdentity(\"PROJECT\", dep.name);\n      if (dep.autoActivateOnIdentityCreation) {\n        ledger.activate(id);\n      }\n      const weight = dep.autoInjectStartingPeriodWeight;\n      if (weight != null && !dep.periods.length) {\n        return {\n          ...dep,\n          id,\n          periods: [\n            {\n              \"startTime\": toISO(Date.now()),\n              weight,\n            },\n          ],\n        };\n      }\n      return {...dep, id};\n    }\n  } else {\n    let identity;\n    try {\n      identity = ledger.account(depId).identity;\n    } catch {\n      throw new Error(\n        `The identity for the dependency ${dep.name} has been deleted from the ledger, or the ledger has been reset. ` +\n          `If this was intentional, go to your dependencies.json file and delete the 'id' attribute to reset.`\n      );\n    }\n    if (identity.name !== dep.name) {\n      throw new Error(\n        `dependency name discrepancy: dep has name ${dep.name} in ` +\n          `config, but name ${identity.name} in the ledger. ` +\n          `if you deliberately renamed this dep in the ledger, please re-name it in the config as well.`\n      );\n    }\n    return dep;\n  }\n}\n\nexport function toBonusPolicy(\n  config: DependencyConfig,\n  ledger: Ledger\n): BonusPolicy {\n  const {id} = config;\n  if (id == null) {\n    throw new Error(\n      `cannot convert config to policy before it has an id. ensureIdentityExists must be called first.`\n    );\n  }\n  const address = ledger.account(id).identity.address;\n  const periods = config.periods.map(({startTime, weight}) => ({\n    weight,\n    startTimeMs: fromISO(startTime),\n  }));\n  return {address, periods};\n}\n","// @flow\n\n/**\n * This module adds a system for specifying \"bonus minting\" policies. The core\n * idea for bonus minting is that extra Cred is conjured out of thin air (as a\n * \"bonus\") and distributed to a chosen recipient. This system is intended to\n * be used for minting Cred for project-level dependencies. For example, we\n * would like users of SourceCred to mint some extra Cred and flow it to the\n * SourceCred project.\n *\n * In CredRank, we handle this by creating extra nodes in the graph which mint\n * the bonus Cred, and it flows directly from those nodes to the intended\n * recipients.\n *\n * The total amount of Cred that may be minted is unbounded; for example, if\n * the dependencies have a total weight of 0.2, then the total Cred will be\n * 120% of the base Cred, but if the dependencies had a total weight of 1, then\n * the total Cred would be double the base Cred. This was a deliberate design\n * decision so that dependency minting would feel \"non-rival\", i.e. there is\n * not a fixed budget of dependency cred that must be split between the\n * dependencies. In some cases, it may be reasonable for the total Cred flowing\n * to a project's dependencies to be larger than the total Cred flowing\n * directly to the project's contributors; consider that the total amount of\n * time/effort invested in building all the dependencies may be orders of\n * magnitude larger than investment in the project itself.\n */\nimport {\n  type NodeAddressT,\n  NodeAddress,\n  type Node as GraphNode,\n  type Edge as GraphEdge,\n  type EdgeAddressT,\n  EdgeAddress,\n  Graph,\n} from \"./graph\";\nimport {type WeightedGraph as WeightedGraphT} from \"./weightedGraph\";\nimport {empty as emptyWeights, type EdgeWeight} from \"./weights\";\nimport {type TimestampMs} from \"../util/timestamp\";\nimport {type IntervalSequence, type Interval, partitionGraph} from \"./interval\";\nimport {nodeWeightEvaluator} from \"./algorithm/weightEvaluator\";\n\nexport type BonusPolicy = {|\n  // The node address that will receieve the extra minted Cred\n  +address: NodeAddressT,\n  // Information on how the Cred minting weight varies in time.\n  +periods: $ReadOnlyArray<BonusPeriod>,\n|};\n\nexport type BonusPeriod = {|\n  // What proportion of the project's raw Cred should be minted to this\n  // dependency during this period. For example, if the weight is 0.05, and the\n  // project has a pre-dependencies total Cred of 1000 in a given interval,\n  // then this dependency will receive an additional 50 Cred.\n  +weight: number,\n  // Timestamp or number because we allow -Infinity as the first \"timestamp\"\n  // Within any policy, the period timestamps must be in sorted order, or else\n  // an error will be thrown.\n  +startTimeMs: TimestampMs | number,\n|};\n\nexport type ComputedBonusMinting = $ReadOnlyArray<BonusMintOverTime>;\n\nexport type BonusMintOverTime = {|\n  +recipient: GraphNode,\n  // Recipient's bonus minting in each interval.\n  +bonusIntervals: $ReadOnlyArray<BonusInterval>,\n|};\n\nexport type BonusInterval = {|\n  +interval: Interval,\n  // The amount of bonus Cred to mint in this interval.\n  +amount: number,\n|};\n\nexport function computeBonusMinting(\n  wg: WeightedGraphT,\n  policies: $ReadOnlyArray<BonusPolicy>\n): ComputedBonusMinting {\n  const mintIntervals = _computeMintIntervals(wg);\n  return policies.map((policy) => {\n    const recipient = wg.graph.node(policy.address);\n    if (recipient == null) {\n      throw new Error(\n        `bonus recipient not in graph: ${NodeAddress.toString(policy.address)}`\n      );\n    }\n    return {\n      recipient,\n      bonusIntervals: _bonusIntervals(mintIntervals, policy.periods),\n    };\n  });\n}\n\nexport function _bonusIntervals(\n  mintIntervals: $ReadOnlyArray<MintInterval>,\n  periods: $ReadOnlyArray<BonusPeriod>\n): $ReadOnlyArray<BonusInterval> {\n  let nextIndex = 0;\n  let weight = 0;\n\n  return mintIntervals.map(({interval, totalMint}) => {\n    while (\n      nextIndex < periods.length &&\n      periods[nextIndex].startTimeMs <= interval.startTimeMs\n    ) {\n      weight = periods[nextIndex].weight;\n      nextIndex++;\n    }\n    return {\n      interval,\n      amount: totalMint * weight,\n    };\n  });\n}\n\nexport function createBonusGraph(\n  bonusMints: ComputedBonusMinting\n): WeightedGraphT {\n  const graph = new Graph();\n  const weights = emptyWeights();\n  for (const {recipient, bonusIntervals} of bonusMints) {\n    graph.addNode(recipient);\n    for (const {interval, amount} of bonusIntervals) {\n      if (amount === 0) {\n        continue;\n      }\n      graph.addNode(bonusNode(recipient, interval));\n      graph.addEdge(bonusEdge(recipient, interval));\n      weights.nodeWeights.set(bonusNodeAddress(recipient, interval), amount);\n    }\n  }\n  weights.edgeWeights.set(BONUS_EDGE_PREFIX, BONUS_EDGE_WEIGHT);\n  return {graph, weights};\n}\n\nexport const BONUS_NODE_PREFIX: NodeAddressT = NodeAddress.fromParts([\n  \"sourcecred\",\n  \"core\",\n  \"BONUS\",\n]);\n\nexport function bonusNodeAddress(\n  recipient: GraphNode,\n  interval: Interval\n): NodeAddressT {\n  return NodeAddress.append(\n    BONUS_NODE_PREFIX,\n    String(interval.startTimeMs),\n    ...NodeAddress.toParts(recipient.address)\n  );\n}\n\nexport function bonusNode(recipient: GraphNode, interval: Interval): GraphNode {\n  return {\n    address: bonusNodeAddress(recipient, interval),\n    timestampMs: interval.startTimeMs,\n    description: `bonus minting for ${recipient.description} starting ${interval.startTimeMs}`,\n  };\n}\n\nexport const BONUS_EDGE_PREFIX: EdgeAddressT = EdgeAddress.fromParts([\n  \"sourcecred\",\n  \"core\",\n  \"BONUS\",\n]);\n\nexport const BONUS_EDGE_WEIGHT: EdgeWeight = Object.freeze({\n  forwards: 1,\n  // setting the backward weight to non-zero has a material effect on the\n  // resultant Cred scores, since it means that the bonus minting node acts as\n  // a mini Cred accumulator in a tight loop with the recipient. Setting this\n  // to 0 results in somewhat lower Cred for the mint recipient, and I like\n  // biasing conservatively here.\n  backwards: 0,\n});\n\nexport function bonusEdgeAddress(\n  recipient: GraphNode,\n  interval: Interval\n): EdgeAddressT {\n  return EdgeAddress.append(\n    BONUS_EDGE_PREFIX,\n    String(interval.startTimeMs),\n    ...NodeAddress.toParts(recipient.address)\n  );\n}\n\nexport function bonusEdge(recipient: GraphNode, interval: Interval): GraphEdge {\n  return {\n    src: bonusNodeAddress(recipient, interval),\n    dst: recipient.address,\n    address: bonusEdgeAddress(recipient, interval),\n    timestampMs: interval.startTimeMs,\n  };\n}\n\n// How much total Cred minting occured in a particular interval, for a particular graph?\nexport type MintInterval = {|\n  +interval: Interval,\n  +totalMint: number,\n|};\nexport function _computeMintIntervals(\n  wg: WeightedGraphT\n): $ReadOnlyArray<MintInterval> {\n  const nwe = nodeWeightEvaluator(wg.weights);\n  const partition = partitionGraph(wg.graph);\n  return partition.map(({interval, nodes}) => {\n    let totalMint = 0;\n    for (const {address} of nodes) {\n      totalMint += nwe(address);\n    }\n    return {interval, totalMint};\n  });\n}\n\n// ========================= DEPRECATED =========================\n// Everything below this line has TimelineCred specific logic, and will be\n// removed when we switch to CredRank.\n\n/**\n * The ProcessedBonusPolicy is a BonusPolicy which has\n * been transformed so that it matches the abstractions available when\n * we're doing raw cred computation: instead of an address, we track an index\n * into the canonical node order, and rather than arbitrary client-provided\n * periods, we compute the weight for each Interval.\n *\n * TODO(#1686, @decentralion): Remove this once we switch to CredRank.\n */\nexport type ProcessedBonusPolicy = {|\n  +nodeIndex: number,\n  +intervalWeights: $ReadOnlyArray<number>,\n|};\n\nexport function processBonusPolicy(\n  policy: BonusPolicy,\n  nodeOrder: $ReadOnlyArray<NodeAddressT>,\n  intervals: IntervalSequence\n): ProcessedBonusPolicy {\n  const {address, periods} = policy;\n  const nodeIndex = nodeOrder.indexOf(address);\n  if (nodeIndex === -1) {\n    throw new Error(\n      `address not in nodeOrder: ${NodeAddress.toString(address)}`\n    );\n  }\n  const intervalStarts = intervals.map((i) => i.startTimeMs);\n  const intervalWeights = _alignPeriodsToIntervals(periods, intervalStarts);\n  return {nodeIndex, intervalWeights};\n}\n\nexport function _alignPeriodsToIntervals(\n  periods: $ReadOnlyArray<BonusPeriod>,\n  intervalStarts: $ReadOnlyArray<TimestampMs>\n): $ReadOnlyArray<number> {\n  if (periods.length === 0) {\n    return intervalStarts.map(() => 0);\n  }\n  // Validate the periods to make sure they are in order and the weights\n  // are finite and non-negative\n  let currentStartTimeMs = periods[0].startTimeMs;\n  for (const {startTimeMs, weight} of periods) {\n    if (currentStartTimeMs > startTimeMs) {\n      throw new Error(\n        `mint periods out of order: ${currentStartTimeMs} > ${startTimeMs}`\n      );\n    }\n    currentStartTimeMs = startTimeMs;\n    if (weight < 0 || !Number.isFinite(weight)) {\n      throw new Error(`invalid mint weight: ${weight}`);\n    }\n  }\n  let currentPeriodIndex = -1;\n  let currentWeight = 0;\n  // We always return the weight of the latest period whose startTimeMs was\n  // less than or equal to the interval's start.\n  return intervalStarts.map((s) => {\n    while (\n      currentPeriodIndex < periods.length - 1 &&\n      periods[currentPeriodIndex + 1].startTimeMs <= s\n    ) {\n      currentPeriodIndex++;\n      currentWeight = periods[currentPeriodIndex].weight;\n    }\n    return currentWeight;\n  });\n}\n","// @flow\n\nimport {sum} from \"d3-array\";\nimport findLast from \"lodash.findlast\";\nimport * as NullUtil from \"../util/null\";\nimport * as Weights from \"./weights\";\nimport * as C from \"../util/combo\";\nimport {type NodeAddressT, NodeAddress} from \"./graph\";\nimport {type WeightedGraph as WeightedGraphT} from \"./weightedGraph\";\nimport {\n  nodeWeightEvaluator,\n  type NodeWeightEvaluator,\n} from \"./algorithm/weightEvaluator\";\nimport {partitionGraph, type GraphIntervalPartition} from \"./interval\";\nimport type {TimestampMs} from \"../util/timestamp\";\n\n/**\n * This module adds logic for imposing a Cred minting budget on a graph.\n *\n * Basically, we allow specifiying a budget where nodes matching a particular\n * address may mint at most a fixed amount of Cred per period. Since every\n * plugin writes nodes with a distinct prefix, this may be used to specify\n * plugin-level Cred budgets. The same mechanism could also be used to\n * implement more finely-grained budgets, e.g. for specific node types.\n */\n\nexport type IntervalLength = \"WEEKLY\";\n\nexport const intervalLengthParser: C.Parser<IntervalLength> = C.exactly([\n  \"WEEKLY\",\n]);\n\nexport type BudgetPeriod = {|\n  // When this budget policy starts\n  +startTimeMs: TimestampMs,\n  // How much Cred can be minted per interval\n  +budgetValue: number,\n|};\n\nexport type BudgetEntry = {|\n  +prefix: NodeAddressT,\n  +periods: $ReadOnlyArray<BudgetPeriod>,\n|};\n\nexport type Budget = {|\n  +entries: $ReadOnlyArray<BudgetEntry>,\n  +intervalLength: IntervalLength,\n|};\n\n/**\n * Given a WeightedGraph and a budget, return a new WeightedGraph which ensures\n * that the budget constraint is satisfied.\n *\n * Concretely, this means that the weights in the Graph may be reduced, as\n * necessary, in order to bring the total minted Cred within an interval down\n * to the budget's requirements.\n */\nexport function applyBudget(\n  wg: WeightedGraphT,\n  budget: Budget\n): WeightedGraphT {\n  // It'd be really nice to support the case where some budgets are subsets of\n  // other budgets. As an example, imagine saying: The GitHub plugin can mint\n  // at most 1000 Cred per week, and within that, this particular GitHub repo\n  // can mint at most 200, that one can mint at most 400, etc. However, I\n  // didn't want to figure out the math for solving those constraints just yet,\n  // since the initial use case of limiting minting per plugin doesn't need to\n  // worry about intersections between the budgets.\n  //\n  // So let's just throw an error if there are any overlapping prefixes for\n  // now, and we can improve the implementation later once we want to do more\n  // sophisticated budget policies.\n  if (_anyCommonPrefixes(budget.entries.map((x) => x.prefix))) {\n    throw new Error(`budget prefix conflict detected`);\n  }\n  if (budget.intervalLength !== \"WEEKLY\") {\n    throw new Error(`non-weekly budgets not supported`);\n  }\n\n  const reweighting = _computeReweighting(wg, budget);\n  return _reweightGraph(wg, reweighting);\n}\n\nexport type AddressWeight = {|+address: NodeAddressT, +weight: number|};\n\n// Interpreted as an array of mutiplicative weight changes,\n// i.e. for each AddressWeight, the node at the address\n// should be re-weighted by the corresponding weight\nexport type Reweighting = $ReadOnlyArray<AddressWeight>;\n\n/**\n * Given the WeightedGraph and the Budget, returns an array of every {addres,\n * weight} pair where the address needs to be re-weighted in order to satisfy\n * the budget constraint.\n */\nexport function _computeReweighting(\n  wg: WeightedGraphT,\n  budget: Budget\n): Reweighting {\n  const evaluator = nodeWeightEvaluator(wg.weights);\n  const partition = partitionGraph(wg.graph);\n  const reweightingsForEachBudget: $ReadOnlyArray<Reweighting> = budget.entries.map(\n    (entry) => _reweightingForEntry({evaluator, partition, entry})\n  );\n  return [].concat(...reweightingsForEachBudget);\n}\n\n/**\n * Given a the time-partitioned graph, the weight evaluator, and a particular\n * entry for the budget, return every {address, weight} pair where the\n * corresponding address needs to be reweighted in order to satisfy this budget\n * entry.\n */\nexport function _reweightingForEntry(args: {\n  evaluator: NodeWeightEvaluator,\n  partition: GraphIntervalPartition,\n  entry: BudgetEntry,\n}): Reweighting {\n  const {evaluator, partition, entry} = args;\n  const {periods, prefix} = entry;\n\n  // Check that the budget's periods are in time-sorted order.\n  if (!inSortedOrder(periods.map((x) => x.startTimeMs))) {\n    throw new Error(\n      `budget for ${NodeAddress.toString(prefix)} has periods out-of-order`\n    );\n  }\n\n  const results = [];\n  for (const {interval, nodes} of partition) {\n    const budgetValue = _findCurrentBudgetValue(periods, interval.startTimeMs);\n    const addresses = nodes.map((n) => n.address);\n    const filteredAddresses = addresses.filter((a) =>\n      NodeAddress.hasPrefix(a, prefix)\n    );\n    const addressWeights = filteredAddresses.map((a) => ({\n      address: a,\n      weight: evaluator(a),\n    }));\n    const normalizer = _computeWeightNormalizer(addressWeights, budgetValue);\n    // If the normalizer is exactly 1, no re-weighting is necessary.\n    if (normalizer !== 1) {\n      // Re-weight every address matching this budget entry\n      // equally.\n      for (const address of filteredAddresses) {\n        results.push({address, weight: normalizer});\n      }\n    }\n  }\n  return results;\n}\n\n/**\n * Given a WeightedGraph and the reweighting, return a new WeightedGraph which\n * has had its weights updated accordingly, without mutating the original\n * WeightedGraph.\n */\nexport function _reweightGraph(\n  wg: WeightedGraphT,\n  reweighting: Reweighting\n): WeightedGraphT {\n  const newWeights = Weights.copy(wg.weights);\n  for (const {address, weight} of reweighting) {\n    const existingWeight = NullUtil.orElse(\n      wg.weights.nodeWeights.get(address),\n      1\n    );\n    newWeights.nodeWeights.set(address, existingWeight * weight);\n  }\n\n  return {graph: wg.graph.copy(), weights: newWeights};\n}\n\n/**\n * Given an array of node addresses, return true if any node address is a prefix\n * of another address.\n *\n * This method runs in O(n^2). This should be fine because it's intended to be\n * run on small arrays (~one per plugin). If this becomes a performance\n * hotpsot, we can write a more performant version.\n */\nexport function _anyCommonPrefixes(\n  addresses: $ReadOnlyArray<NodeAddressT>\n): boolean {\n  for (let i = 0; i < addresses.length; i++) {\n    for (let j = i; j < addresses.length; j++) {\n      if (i === j) {\n        continue;\n      }\n      // Check both if A is prefix of B and if B is prefix of A\n      // (not symmetrical)\n      if (NodeAddress.hasPrefix(addresses[i], addresses[j])) {\n        return true;\n      }\n      if (NodeAddress.hasPrefix(addresses[j], addresses[i])) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nfunction inSortedOrder(xs: $ReadOnlyArray<number>): boolean {\n  let last = -Infinity;\n  for (const x of xs) {\n    if (x < last) {\n      return false;\n    }\n    last = x;\n  }\n  return true;\n}\n\n// Given an array of periods, and a timestamp, choose the last period whose\n// startTimeMs is <= the timestamp, and then return its budget. Returns\n// Infinity if there is no matching budget.\nexport function _findCurrentBudgetValue(\n  periods: $ReadOnlyArray<BudgetPeriod>,\n  timestamp: TimestampMs\n): number {\n  const currentPeriod = findLast(\n    periods,\n    (period) => period.startTimeMs <= timestamp\n  );\n  return currentPeriod ? currentPeriod.budgetValue : Infinity;\n}\n\n// For the given array of AddressWeights, and a budget that they must fit within, return\n// a normalization coefficient which can be used to reweight all of these AddressWeights\n// so that they fit within the budget. Will be a number in the range [0, 1], where 0\n// implies the budget is 0 (so everything gets set to 0) and 1 implies the AddressWeights\n// are already fitting within the budget.\nexport function _computeWeightNormalizer(\n  aws: $ReadOnlyArray<AddressWeight>,\n  budgetValue: number\n): number {\n  const totalWeight = sum(aws, (aw) => aw.weight);\n  if (totalWeight <= budgetValue) {\n    return 1;\n  } else {\n    return budgetValue / totalWeight;\n  }\n}\n","// @flow\n\nimport {sum} from \"d3-array\";\nimport * as NullUtil from \"../../util/null\";\nimport {\n  findStationaryDistribution,\n  type PagerankParams,\n  type PagerankOptions,\n} from \"../algorithm/markovChain\";\n\nimport {distributionToNodeDistribution} from \"../algorithm/graphToMarkovChain\";\n\nimport {uniformDistribution} from \"../algorithm/distribution\";\nimport {accumulatorGadget} from \"./nodeGadgets\";\nimport {\n  MarkovProcessGraph,\n  type Parameters as MarkovProcessGraphParameters,\n} from \"./markovProcessGraph\";\nimport {type PersonalAttributions} from \"./personalAttribution\";\nimport {CredGraph} from \"./credGraph\";\nimport {type WeightedGraph} from \"../weightedGraph\";\nimport {Ledger} from \"../ledger/ledger\";\nimport {graphIntervals} from \"../interval\";\n\nexport const DEFAULT_MAX_ITERATIONS = 255;\nexport const DEFAULT_CONVERGENCE_THRESHOLD = 1e-7;\nexport const DEFAULT_YIELD_AFTER_MS = 30;\nexport const DEFAULT_VERBOSE = false;\n\nconst DEFAULT_ALPHA = 0.1;\nconst DEFAULT_BETA = 0.4;\nconst DEFAULT_GAMMA_FORWARD = 0.1;\nconst DEFAULT_GAMMA_BACKWARD = 0.1;\n\n/**\n * Compute CredRank results given a WeightedGraph, a Ledger, and optional\n * parameters.\n */\nexport function credrank(\n  weightedGraph: WeightedGraph,\n  ledger: Ledger,\n  personalAttributions?: PersonalAttributions = [],\n  markovProcessGraphParameters?: $Shape<MarkovProcessGraphParameters> = {},\n  pagerankOptions?: $Shape<PagerankOptions>\n): Promise<CredGraph> {\n  const defaultParameters: MarkovProcessGraphParameters = {\n    alpha: DEFAULT_ALPHA,\n    beta: DEFAULT_BETA,\n    gammaForward: DEFAULT_GAMMA_FORWARD,\n    gammaBackward: DEFAULT_GAMMA_BACKWARD,\n  };\n\n  const parameters: MarkovProcessGraphParameters = {\n    ...defaultParameters,\n    ...markovProcessGraphParameters,\n  };\n  const participants = ledger.accounts().map(({identity}) => ({\n    description: identity.name,\n    address: identity.address,\n    id: identity.id,\n  }));\n  const intervals = graphIntervals(weightedGraph.graph);\n  const mpg = MarkovProcessGraph.new({\n    weightedGraph,\n    participants,\n    parameters,\n    intervals,\n    personalAttributions,\n  });\n  return markovProcessGraphPagerank(mpg, pagerankOptions);\n}\n\n/**\n * Given a MarkovProcessGraph, compute PageRank scores on it.\n */\nexport async function markovProcessGraphPagerank(\n  mpg: MarkovProcessGraph,\n  options?: $Shape<PagerankOptions> = {}\n): Promise<CredGraph> {\n  const defaultOptions: PagerankOptions = {\n    maxIterations: DEFAULT_MAX_ITERATIONS,\n    convergenceThreshold: DEFAULT_CONVERGENCE_THRESHOLD,\n    yieldAfterMs: DEFAULT_YIELD_AFTER_MS,\n    verbose: DEFAULT_VERBOSE,\n  };\n  options = {...defaultOptions, ...options};\n  const osmc = mpg.toMarkovChain();\n  const params: PagerankParams = {\n    chain: osmc.chain,\n    pi0: uniformDistribution(osmc.nodeOrder.length),\n    seed: uniformDistribution(osmc.nodeOrder.length),\n    alpha: 0,\n  };\n  const distributionResult = await findStationaryDistribution(params, options);\n  const pi = distributionToNodeDistribution(\n    osmc.nodeOrder,\n    distributionResult.pi\n  );\n\n  const matchingScore = sum(\n    Array.from(mpg.nodes({prefix: accumulatorGadget.prefix})).map((n) =>\n      NullUtil.get(pi.get(n.address))\n    )\n  );\n  let totalNodeWeight = 0;\n  for (const {mint: weight} of mpg.nodes()) {\n    totalNodeWeight += weight;\n  }\n  const scores = osmc.nodeOrder.map(\n    (_, i) => (distributionResult.pi[i] / matchingScore) * totalNodeWeight\n  );\n  return new CredGraph(mpg, scores);\n}\n","// @flow\n\nimport {\n  type IdentityId,\n  type Name,\n  identityIdParser,\n  nameParser,\n} from \"../../core/identity\";\nimport {type Ledger} from \"../../core/ledger/ledger\";\nimport {\n  type TimestampISO,\n  timestampISOParser,\n  fromISO,\n} from \"../../util/timestamp\";\nimport * as C from \"../../util/combo\";\nimport {type PersonalAttributions} from \"../../core/credrank/personalAttribution\";\n\n/**\n  This type resembles the JSON schema for configuring personal attributions,\n  which allows participants to attribute their cred to other participants.\n  This feature should not be used to make cred sellable/transferable, but\n  instead is intended to allow participants to acknowledge that a portion of\n  their credited outputs are directly generated/supported by the labor of\n  others. (e.g. when a contributor has a personal assistant working behind the \n  scenes)\n */\nexport type PersonalAttributionsConfig = Array<{|\n  // The name of a participant that is flowing cred to others\n  fromParticipantName: Name,\n  // The id of the participant. Will be autopopulated if absent.\n  fromParticipantId?: IdentityId,\n  +recipients: Array<{|\n    // The name of a participant that is receiving cred\n    // from the \"fromParticipant\"\n    toParticipantName: Name,\n    // The id of the participant. Will be autopopulated if absent.\n    toParticipantId?: IdentityId,\n    // A chronological log of changes to the proportion of cred flowing from the\n    // fromParticipant to the toParticipant each epoch. Each proportion\n    // continues to be in effect each epoch until a new proportion takes effect.\n    +proportions: Array<{|\n      // The Month/Day/Year that the decimalProportion should take effect,\n      // e.g. \"1/30/2021\"\n      +startDate: TimestampISO,\n      // The 0-1 representation of the percentage of cred that should flow from\n      // the fromParticipant to the toParticipant each epoch\n      +decimalProportion: number,\n    |}>,\n  |}>,\n|}>;\n\n/**\n  Adds the IdentityIds where only IdentityNames are provided, and updates names\n  and ids to reflect the account's current identity after merging/renaming.\n */\nexport function updatePersonalAttributionsConfig(\n  config: PersonalAttributionsConfig,\n  ledger: Ledger\n): PersonalAttributionsConfig {\n  return config.map(({fromParticipantId, fromParticipantName, recipients}) => {\n    const id = fromParticipantId\n      ? ledger.account(fromParticipantId).identity.id\n      : ledger.accountByName(fromParticipantName)?.identity.id;\n    if (!id) throw new Error(`${fromParticipantName} does not exist.`);\n    const name = ledger.account(id).identity.name;\n    return {\n      fromParticipantId: id,\n      fromParticipantName: name,\n      recipients: recipients.map(\n        ({toParticipantId, toParticipantName, proportions}) => {\n          const id = toParticipantId\n            ? ledger.account(toParticipantId).identity.id\n            : ledger.accountByName(toParticipantName)?.identity.id;\n          if (!id) throw new Error(`${toParticipantName} does not exist.`);\n          const name = ledger.account(id).identity.name;\n          return {\n            toParticipantId: id,\n            toParticipantName: name,\n            proportions,\n          };\n        }\n      ),\n    };\n  });\n}\n\nexport function toPersonalAttributions(\n  config: PersonalAttributionsConfig\n): PersonalAttributions {\n  return config.map(({fromParticipantId, recipients}) => {\n    if (!fromParticipantId)\n      throw new Error(\"PersonalAttributionConfig must be updated before use.\");\n    return {\n      fromParticipantId,\n      recipients: recipients.map(({toParticipantId, proportions}) => {\n        if (!toParticipantId)\n          throw new Error(\n            \"PersonalAttributionConfig must be updated before use.\"\n          );\n        return {\n          toParticipantId,\n          proportions: proportions.map(({startDate, decimalProportion}) => ({\n            timestampMs: fromISO(startDate),\n            proportionValue: decimalProportion,\n          })),\n        };\n      }),\n    };\n  });\n}\n\nconst proportionParser = C.number.fmap((n) => {\n  if (n < 0 || n > 1) {\n    throw new Error(`Proportion ${n} is not in range [0,1]`);\n  }\n  return n;\n});\n\nexport const personalAttributionsConfigParser: C.Parser<PersonalAttributionsConfig> = C.array(\n  C.object(\n    {\n      fromParticipantName: nameParser,\n      recipients: C.array(\n        C.object(\n          {\n            toParticipantName: nameParser,\n            proportions: C.array(\n              C.object({\n                startDate: timestampISOParser,\n                decimalProportion: proportionParser,\n              })\n            ),\n          },\n          {\n            toParticipantId: identityIdParser,\n          }\n        )\n      ),\n    },\n    {fromParticipantId: identityIdParser}\n  )\n);\n","// @flow\n\nimport {CredGraph} from \"../../core/credrank/credGraph\";\nimport {CredGrainView} from \"../../core/credGrainView\";\nimport {\n  type WeightedGraph,\n  merge,\n  overrideWeights,\n} from \"../../core/weightedGraph\";\nimport {\n  ensureIdentityExists,\n  toBonusPolicy,\n  type DependenciesConfig,\n} from \"../../api/dependenciesConfig\";\nimport {Ledger} from \"../../core/ledger/ledger\";\nimport {computeBonusMinting, createBonusGraph} from \"../../core/bonusMinting\";\nimport {applyBudget, type Budget} from \"../../core/mintBudget\";\nimport {type WeightsT} from \"../../core/weights\";\nimport {contractions as identityContractions} from \"../../core/identity\";\nimport {credrank as computeCredrank} from \"../../core/credrank/compute\";\nimport {\n  type PersonalAttributionsConfig,\n  updatePersonalAttributionsConfig,\n  toPersonalAttributions,\n} from \"../config/personalAttributionsConfig\";\n\nexport type CredrankInput = {|\n  +pluginGraphs: $ReadOnlyArray<WeightedGraph>,\n  +ledger: Ledger,\n  +dependencies: DependenciesConfig,\n  +weightOverrides: WeightsT,\n  +pluginsBudget: Budget | null,\n  +personalAttributions: PersonalAttributionsConfig,\n|};\n\nexport type CredrankOutput = {|\n  +credGraph: CredGraph,\n  +credGrainView: CredGrainView,\n  +ledger: Ledger,\n  +dependencies: DependenciesConfig,\n  +personalAttributions: PersonalAttributionsConfig,\n|};\n\n/**\n  A primary SourceCred API that combines the given inputs into a single\n  WeightedGraph and then runs the CredRank algorithm on it to create a CredGraph\n  containing the cred scores of nodes/participants.\n\n  Might mutate the ledger that is passed in.\n */\nexport async function credrank(input: CredrankInput): Promise<CredrankOutput> {\n  let weightedGraph = overrideWeights(\n    merge(input.pluginGraphs),\n    input.weightOverrides\n  );\n\n  // important that this happens before identity contractions\n  const dependenciesWithIds = input.dependencies.map((d) =>\n    // This mutates the ledger, adding new identities when needed.\n    ensureIdentityExists(d, input.ledger)\n  );\n  const identities = input.ledger.accounts().map((a) => a.identity);\n  const contractedGraph = weightedGraph.graph.contractNodes(\n    identityContractions(identities)\n  );\n  weightedGraph = {\n    graph: contractedGraph,\n    weights: weightedGraph.weights,\n  };\n  if (input.pluginsBudget) {\n    weightedGraph = applyBudget(weightedGraph, input.pluginsBudget);\n  }\n\n  const dependencyBonuses = dependenciesWithIds.map((d) =>\n    toBonusPolicy(d, input.ledger)\n  );\n  const bonusGraph = createBonusGraph(\n    computeBonusMinting(weightedGraph, dependencyBonuses)\n  );\n  weightedGraph = merge([weightedGraph, bonusGraph]);\n\n  const updatedPersonalAttributionsConfig = updatePersonalAttributionsConfig(\n    input.personalAttributions,\n    input.ledger\n  );\n\n  const credGraph = await computeCredrank(\n    weightedGraph,\n    input.ledger,\n    toPersonalAttributions(updatedPersonalAttributionsConfig)\n  );\n  return {\n    credGraph,\n    credGrainView: CredGrainView.fromCredGraphAndLedger(\n      credGraph,\n      input.ledger\n    ),\n    ledger: input.ledger,\n    dependencies: dependenciesWithIds,\n    personalAttributions: updatedPersonalAttributionsConfig,\n  };\n}\n","// @flow\n\nconst chalk = require(\"chalk\");\n\nexport type TaskId = string;\n\ntype MsSinceEpoch = number;\ntype ConsoleLog = (string) => void;\ntype GetTime = () => MsSinceEpoch;\n\nexport interface TaskReporter {\n  start(taskId: TaskId): TaskReporter;\n  finish(taskId: TaskId): TaskReporter;\n}\n\n/**\n * This class is a lightweight utility for reporting task progress to the\n * command line.\n *\n * - When a task is started, it's printed to the CLI with a \" GO \" label.\n * - When it's finished, it's printed with a \"DONE\" label, along with the time\n * elapsed.\n * - Tasks are tracked and represented by string id.\n * - The same task id may be re-used after the first task with that id is\n * finished.\n */\nexport class LoggingTaskReporter implements TaskReporter {\n  // Maps the task to the time\n  activeTasks: Map<TaskId, MsSinceEpoch>;\n  _consoleLog: ConsoleLog;\n  _getTime: GetTime;\n\n  constructor(consoleLog?: ConsoleLog, getTime?: GetTime) {\n    this._consoleLog = consoleLog || console.log;\n    this._getTime =\n      getTime ||\n      function () {\n        return +new Date();\n      };\n    this.activeTasks = new Map();\n  }\n\n  start(taskId: TaskId): this {\n    if (this.activeTasks.has(taskId)) {\n      throw new Error(`task ${taskId} already registered`);\n    }\n    this.activeTasks.set(taskId, this._getTime());\n    this._consoleLog(startMessage(taskId));\n    return this;\n  }\n\n  finish(taskId: TaskId): this {\n    const startTime = this.activeTasks.get(taskId);\n    if (startTime == null) {\n      throw new Error(`task ${taskId} not registered`);\n    }\n    const elapsedTime = this._getTime() - startTime;\n    this._consoleLog(finishMessage(taskId, elapsedTime));\n    this.activeTasks.delete(taskId);\n    return this;\n  }\n}\n\nexport type TaskEntry = {taskId: TaskId, type: \"START\" | \"FINISH\"};\n/**\n * SilentTaskReporter is a task reporter that collects some information, but does not\n * emit any visible notifications.\n *\n * It can be used for testing purposes, or as a default TaskReporter for cases where\n * we don't want to default to emitting anything to console.\n *\n * Rather than emitting any messages or taking timing information, it allows retrieving\n * the sequence of task updates that were sent to the reporter.\n * This makes it easy for test code to verify that the TaskReporter was sent the right\n * sequence of tasks.\n *\n * Callers can also check what tasks are still active (e.g. to verify that there are no\n * active tasks unfinished at the end of a method.)\n */\nexport class SilentTaskReporter implements TaskReporter {\n  _activeTasks: Set<TaskId>;\n  _entries: TaskEntry[];\n  constructor() {\n    this._activeTasks = new Set();\n    this._entries = [];\n  }\n  start(taskId: TaskId): this {\n    if (this._activeTasks.has(taskId)) {\n      throw new Error(`task ${taskId} already active`);\n    }\n    this._activeTasks.add(taskId);\n    this._entries.push({taskId, type: \"START\"});\n    return this;\n  }\n  finish(taskId: TaskId): this {\n    if (!this._activeTasks.has(taskId)) {\n      throw new Error(`task ${taskId} not active`);\n    }\n    this._activeTasks.delete(taskId);\n    this._entries.push({taskId, type: \"FINISH\"});\n    return this;\n  }\n  entries(): TaskEntry[] {\n    return this._entries.slice();\n  }\n  activeTasks(): TaskId[] {\n    return Array.from(this._activeTasks);\n  }\n}\n\n/**\n * ScopedTaskReporter is a higher-order task reporter\n * for generating opaque scopes meant to be passed into child contexts.\n *\n * In this case, a scope is a log prefix indicating the parent context\n * in which the current task is running.\n *\n * This allows for reliable filtering and searching on existing tasks\n * by prefix. Care should be taken to ensure that the same prefix does\n * not exist in peer task contexts, so far as error handling is concerned,\n * or a filter may incorrectly catch and finish a still-running task while\n * error-handling. This risk can be mitigated by only designating prefixes via\n * a Scoped Task Reporter, as opposed to passing prefixes into the `start`\n * and `finish` methods manually. For example, this block will always throw:\n *\n * function f(top: SilentTaskReporter) {\n *  top.start(\"my-prefix: foo\");\n *  const scoped = new ScopedTaskReporter(top, \"my-prefix\");\n *  scoped.start(\"foo\"); // Error: task my-prefix: foo already active\n * }\n */\nexport class ScopedTaskReporter implements TaskReporter {\n  _delegate: TaskReporter;\n  _prefix: string;\n\n  constructor(delegate: TaskReporter, prefix: string) {\n    this._delegate = delegate;\n    this._prefix = prefix;\n  }\n\n  _scoped(taskId: TaskId): TaskId {\n    return `${this._prefix}: ${taskId}`;\n  }\n\n  start(taskId: TaskId): this {\n    this._delegate.start(this._scoped(taskId));\n    return this;\n  }\n\n  finish(taskId: TaskId): this {\n    this._delegate.finish(this._scoped(taskId));\n    return this;\n  }\n}\n\nexport function formatTimeElapsed(elapsed: MsSinceEpoch): string {\n  if (elapsed < 0) {\n    throw new Error(\"nonegative time expected\");\n  }\n  if (elapsed < 10 * 1000) {\n    return `${elapsed}ms`;\n  }\n  const seconds = Math.round(elapsed / 1000);\n  const minutes = Math.floor(seconds / 60);\n  if (minutes === 0) return `${seconds}s`;\n  const hours = Math.floor(minutes / 60);\n  if (hours === 0) return `${minutes}m ${seconds % 60}s`;\n  const days = Math.floor(hours / 24);\n  if (days === 0) return `${hours}h ${minutes % 60}m`;\n  return `${days}d ${hours % 24}h`;\n}\n\nexport function startMessage(taskId: string): string {\n  const label = chalk.bgBlue.bold.white(\"  GO  \");\n  const message = `${label} ${taskId}`;\n  return message;\n}\n\nexport function finishMessage(taskId: string, elapsedTimeMs: number): string {\n  const elapsed = formatTimeElapsed(elapsedTimeMs);\n  const label = chalk.bgGreen.bold.white(\" DONE \");\n  const message = `${label} ${taskId}: ${elapsed}`;\n  return message;\n}\n","//@flow\n\nimport type {NodeAddressT} from \"../graph\";\nimport type {ReferenceDetector, URL} from \"./referenceDetector\";\n\n/**\n * A class for composing ReferenceDetectors. Calls ReferenceDetectors in the order\n * they're given in the constructor, returning the first NodeAddressT it encounters.\n */\nexport class CascadingReferenceDetector implements ReferenceDetector {\n  refs: $ReadOnlyArray<ReferenceDetector>;\n\n  constructor(refs: $ReadOnlyArray<ReferenceDetector>) {\n    this.refs = refs;\n  }\n\n  addressFromUrl(url: URL): ?NodeAddressT {\n    for (const ref of this.refs) {\n      const addr = ref.addressFromUrl(url);\n      if (addr) return addr;\n    }\n  }\n}\n","// @flow\n\nimport {type WeightedGraph} from \"../../core/weightedGraph\";\nimport {Ledger} from \"../../core/ledger/ledger\";\nimport type {PluginDirectoryContext} from \"../plugin\";\nimport {type PluginId} from \"../pluginId\";\nimport {Plugin} from \"../plugin\";\nimport {type TaskReporter, SilentTaskReporter} from \"../../util/taskReporter\";\nimport {CascadingReferenceDetector} from \"../../core/references/cascadingReferenceDetector\";\nimport {type ReferenceDetector} from \"../../core/references/referenceDetector\";\nimport {ensureIdentityExists} from \"../../core/ledger/identityProposal\";\n\nexport type GraphInput = {|\n  +plugins: Array<{|\n    +plugin: Plugin,\n    +directoryContext: PluginDirectoryContext,\n    +pluginId: PluginId,\n  |}>,\n  +ledger: Ledger,\n|};\n\nexport type GraphOutput = {|\n  +pluginGraphs: $ReadOnlyArray<{|\n    +pluginId: PluginId,\n    +weightedGraph: WeightedGraph,\n  |}>,\n  +ledger: Ledger,\n|};\n\n/**\n Iterates through the provided plugins, runs their `graph` and `identities`\n processes, and updates the ledger with any new IdentityProposals.\n \n Might mutate the ledger that is passed in.\n */\nexport async function graph(\n  input: GraphInput,\n  // Specifies which of the plugins in the GraphInput should be run.\n  // If omitted, all plugins in the GraphInput are run.\n  scope?: $ReadOnlyArray<PluginId>,\n  taskReporter: TaskReporter = new SilentTaskReporter()\n): Promise<GraphOutput> {\n  // Build Reference Detector\n  const rds = [];\n  for (const {pluginId, plugin, directoryContext} of input.plugins) {\n    const task = `reference detector for ${pluginId}`;\n    taskReporter.start(task);\n    const rd = await plugin.referenceDetector(directoryContext, taskReporter);\n    rds.push(rd);\n    taskReporter.finish(task);\n  }\n  rds.push(_hackyIdentityNameReferenceDetector(input.ledger));\n  const rd = new CascadingReferenceDetector(rds);\n  // Build graphs\n  const pluginGraphs = [];\n  for (const {pluginId, plugin, directoryContext} of input.plugins) {\n    if (!scope || scope.includes(pluginId)) {\n      const task = `generating graph for ${pluginId}`;\n      taskReporter.start(task);\n      pluginGraphs.push({\n        pluginId: pluginId,\n        weightedGraph: await plugin.graph(directoryContext, rd, taskReporter),\n      });\n      const identities = await plugin.identities(\n        directoryContext,\n        taskReporter\n      );\n      for (const identityProposal of identities) {\n        ensureIdentityExists(input.ledger, identityProposal);\n      }\n      taskReporter.finish(task);\n    }\n  }\n  return {\n    pluginGraphs,\n    ledger: input.ledger,\n  };\n}\n\n// Hack to support old-school (deprecated) \"initiatives files\":\n// We need to be able to parse references to usernames, e.g. \"@yalor\", so\n// we need a reference detector that will match these to identities in the\n// Ledger. This isn't a robust addressing scheme, since identities are re-nameable;\n// in v2 the initiatives plugin will be re-written to use identity node addresses instead.\n// This hack can be safely deleted once we no longer support initiatives files that refer\n// to identities by their names instead of their IDs.\nexport function _hackyIdentityNameReferenceDetector(\n  ledger: Ledger\n): ReferenceDetector {\n  const usernameToAddress = new Map(\n    ledger\n      .accounts()\n      .map((a) => [a.identity.name.toLowerCase(), a.identity.address])\n  );\n  function addressFromUrl(potentialUsername: string) {\n    const prepped = potentialUsername.replace(\"@\", \"\").toLowerCase();\n    return usernameToAddress.get(prepped);\n  }\n  return {addressFromUrl};\n}\n","// @flow\n\nimport {type CurrencyDetails} from \"../../../api/currencyConfig\";\nimport * as NullUtil from \"../../../util/null\";\nimport sortBy from \"../../../util/sortBy\";\nimport {toISO, type TimestampMs} from \"../../../util/timestamp\";\nimport {type IdentityId} from \"../../identity\";\nimport {type Distribution} from \"../distribution\";\nimport * as G from \"../grain\";\nimport {Ledger} from \"../ledger\";\n\nexport function distributionMarkdownSummary(\n  distribution: Distribution,\n  ledger: Ledger,\n  currencyDetails: CurrencyDetails\n): string {\n  const {name: currencyName, suffix: currencySuffix} = currencyDetails;\n  const distributionBalances: DistributionBalances = getDistributionBalances(\n    distribution\n  );\n  const totalDistributed: G.Grain = getTotalDistributed(distributionBalances);\n\n  const columnHeaders = `|          name          |    total    |     %     |`;\n  const divider = `| ---------------------- | ----------- | --------- |`;\n\n  return [\n    title(currencyName),\n    timeStamp(distribution.credTimestamp),\n    total(totalDistributed, currencySuffix),\n    policyAmounts(distribution, currencySuffix),\n    columnHeaders,\n    divider,\n    sortedIds(distributionBalances).map(row).join(`\\n`),\n  ].join(`\\n`);\n\n  function row(id: IdentityId) {\n    const {name} = ledger.account(id).identity;\n    const nameFormatted = formatCenter(name, 22);\n\n    const total = NullUtil.orElse(distributionBalances.get(id), G.ZERO);\n    const totalFormatted = formatCenter(G.format(total, 3, \"\"), 11);\n\n    const percentage = 100 * G.toFloatRatio(total, totalDistributed);\n    const percentageFormatted = formatCenter(percentage.toFixed(2) + \"%\", 9);\n\n    return `| ${nameFormatted} | ${totalFormatted} | ${percentageFormatted} |`;\n  }\n}\n\nfunction title(currencyName: string): string {\n  return `## ${currencyName.toUpperCase()} Distribution`;\n}\n\nfunction timeStamp(credTimeStamp: TimestampMs): string {\n  return `### ${toISO(credTimeStamp)}`;\n}\n\nfunction total(total: G.Grain, currencySuffix: string): string {\n  return `#### Total Distributed: ${G.formatAndTrim(total, currencySuffix)}`;\n}\n\nfunction policyAmounts(\n  distribution: Distribution,\n  currencySuffix: string\n): string {\n  return distribution.allocations\n    .map(({policy}) => {\n      const {policyType, budget} = policy;\n      return `#### ${policyType}: ${G.formatAndTrim(budget, currencySuffix)}`;\n    })\n    .join(`\\n`);\n}\n\n/**\n * Return ids sorted by balance.\n */\nfunction sortedIds(\n  distributionBalances: DistributionBalances\n): $ReadOnlyArray<IdentityId> {\n  return sortBy(\n    Array.from(distributionBalances.keys()),\n    (id) => -Number(distributionBalances.get(id))\n  );\n}\n\n/**\n * Center string in some whitespace for total length {len}.\n */\nexport function formatCenter(str: string, len: number): string {\n  return str.length >= len\n    ? str\n    : str.length < len - 1\n    ? formatCenter(` ${str} `, len)\n    : formatCenter(`${str} `, len);\n}\n\n/**\n * Given some distribution, return the total allocated to id across\n * all allocation policies.\n */\nexport type DistributionBalances = Map<IdentityId, G.Grain>;\nexport function getDistributionBalances(\n  distribution: Distribution\n): DistributionBalances {\n  const distributionBalances = new Map<IdentityId, G.Grain>();\n\n  distribution.allocations.map(({receipts}) => {\n    receipts.map(({amount, id}) => {\n      const existing = NullUtil.orElse(distributionBalances.get(id), G.ZERO);\n      distributionBalances.set(id, G.add(amount, existing));\n    });\n  });\n\n  return distributionBalances;\n}\n\n/**\n * Given DistributionBalances, return total grain distributed\n * across participants.\n */\nexport function getTotalDistributed(\n  distributionBalances: DistributionBalances\n): G.Grain {\n  let total: G.Grain = G.ZERO;\n  distributionBalances.forEach((amount) => {\n    total = G.add(total, amount);\n  });\n  return total;\n}\n","// @flow\n\nimport {Ledger, type PayoutAddress} from \"./ledger\";\nimport {type Distribution} from \"./distribution\";\nimport {getDistributionBalances} from \"./distributionSummary/distributionSummary.js\";\nimport {type Currency, type CurrencyKey, getCurrencyKey} from \"./currency.js\";\nimport {type IdentityId} from \"../identity\";\nimport * as NullUtil from \"../../util/null\";\nimport {type TimestampMs} from \"../../util/timestamp\";\nimport * as G from \"./grain\";\n\ntype Transfer = {|\n  payoutAddress: PayoutAddress,\n  amount: G.Grain,\n  memo: string,\n|};\n\nexport type PayoutDistributions = Array<[PayoutAddress, G.Grain]>;\nexport type PayoutAddressToId = Map<PayoutAddress, IdentityId>;\nexport type TransferredGrain = Array<Transfer>;\nexport type GrainIntegrationOutput = {|\n  fileName: string,\n  content: string,\n|};\n\nexport type PayoutResult = {|\n  // Amounts that are actually distributed by the integration.\n  // If Grain balances are tracked in the ledger, these will be recorded as\n  // transfers in the ledger to the \"sink\" Identity.\n  transferredGrain: TransferredGrain,\n  // output files and content\n  outputFile?: GrainIntegrationOutput,\n|};\n\nexport type IntegrationConfig = {|\n  // This determines whether contemporary grain balances are tracked by the ledger.\n  // `true` is effectively the current state of the ledger.\n  // `false` sets all grain balances to zero and disables transfers. This\n  // is utilized to enforce the existence of token balances outside of the\n  // ledger. Importantly, Grain Receipts from allocations are still tracked,\n  // because some grain distribution strategies rely on this information.\n  accountingEnabled: boolean,\n  // This enables a new ledger event where all distributions after this\n  // config is enabled should have a matching \"Integration\" event. If not,\n  // an interface should prompt admin interface users that they haven't\n  // distributed funds via a configured integration\n  processDistributions: boolean,\n  currency: Currency,\n|};\n\n/**\n * This function definition is implemented by Grain Integrations.\n * Grain integrations allow distributions to be executed programmatically\n * beyond the ledger. However, an integration might have some side-effects\n * that require the ledger to be updated, and it therefore has the option of\n * returning a list of of ledger operations. The ledger will update the ledger\n * if accounting is enabled. Otherwise, grain balances will be tracked\n * elsewhere.\n */\nexport type GrainIntegrationFunction = (\n  PayoutDistributions,\n  IntegrationConfig\n) => PayoutResult;\n\nexport type GrainIntegrationResult = {|\n  ledger: Ledger,\n  output?: GrainIntegrationOutput,\n  distributionCredTimestamp: TimestampMs,\n|};\n\n///////////////////\n// Helper functions\n///////////////////\n\n// TODO @topocount: Refactor interface using instance/config properties\n// after grainConfig is updated to include The payout currency details and\n// sink identity\nexport function executeGrainIntegration(\n  ledger: Ledger,\n  integration: GrainIntegrationFunction,\n  distribution: Distribution,\n  currency: Currency,\n  processDistributions: boolean,\n  sink?: IdentityId,\n  // TODO (@topocount) setup accounting config in ledger and remove this config\n  // which is just for proof-of-concept\n  accountingEnabled?: boolean = false\n): GrainIntegrationResult {\n  const {payoutDistributions, payoutAddressToId} = buildDistributionIndexes(\n    ledger,\n    distribution,\n    getCurrencyKey(currency)\n  );\n  // Need to receive actual allocations so users don't lose funds if\n  // decimals are truncated in L2 or in some other environment that must modify\n  // the fixed-point amount for some reason.\n  let result;\n  try {\n    result = integration(payoutDistributions, {\n      currency,\n      accountingEnabled,\n      processDistributions,\n    });\n    if (processDistributions) ledger.markDistributionExecuted(distribution.id);\n  } catch (e) {\n    throw new Error(`Grain Integration failed: ${e}`);\n  }\n  if (result && sink && accountingEnabled && processDistributions) {\n    const {transferredGrain} = result;\n    for (const {payoutAddress, amount, memo} of transferredGrain) {\n      const recipientId = payoutAddressToId.get(payoutAddress);\n      if (!recipientId)\n        throw new Error(`Invalid recipient address: ${payoutAddress}`);\n      ledger.transferGrain({\n        from: recipientId,\n        to: sink,\n        amount,\n        memo: `Integrated Distribution: ${memo}`,\n      });\n    }\n  }\n  return {\n    ledger,\n    output: result.outputFile,\n    distributionCredTimestamp: distribution.credTimestamp,\n  };\n}\n\nexport function buildDistributionIndexes(\n  ledger: Ledger,\n  distribution: Distribution,\n  currencyId: CurrencyKey\n): {\n  payoutDistributions: PayoutDistributions,\n  payoutAddressToId: PayoutAddressToId,\n} {\n  const payoutDistributionMap = new Map();\n  const payoutAddressToId = new Map();\n  const balances = getDistributionBalances(distribution);\n  for (const [id, amount] of balances.entries()) {\n    const {payoutAddresses, identity} = ledger.account(id);\n    const address = payoutAddresses.get(currencyId);\n    if (!address) continue;\n    // need to allow for identities that have since been merged to still claim\n    // funds if accounts are merged between a grain distribution and a\n    // grainIntegration call.\n    const total = NullUtil.orElse(payoutDistributionMap.get(address), G.ZERO);\n    payoutDistributionMap.set(address, G.add(amount, total));\n    payoutAddressToId.set(address, identity.id);\n  }\n\n  const payoutDistributions = Array.from(payoutDistributionMap.entries());\n\n  return {payoutDistributions, payoutAddressToId};\n}\n","// @flow\n\nimport {CredGraph} from \"../../core/credrank/credGraph\";\nimport {Ledger} from \"../../core/ledger/ledger\";\nimport type {CurrencyDetails} from \"../currencyConfig\";\nimport {type GrainConfig} from \"../grainConfig\";\nimport type {Distribution} from \"../../core/ledger/distribution\";\nimport {applyDistributions} from \"../../core/ledger/applyDistributions\";\nimport {type TimestampMs} from \"../../util/timestamp\";\nimport {\n  executeGrainIntegration,\n  type GrainIntegrationOutput,\n} from \"../../core/ledger/grainIntegration\";\n\nexport type GrainInput = {|\n  +credGraph: CredGraph,\n  +ledger: Ledger,\n  +grainConfig: GrainConfig,\n  +currencyDetails: CurrencyDetails,\n  allowMultipleDistributionsPerInterval?: boolean,\n|};\n\nexport type GrainOutput = {|\n  +distributions: $ReadOnlyArray<Distribution>,\n  +ledger: Ledger,\n|};\n\n// Similar to GrainIntegrationResult but excludes the ledger\n// since only the most recent ledger is relevant\nexport type GrainIntegrationMultiResult = {|\n  output?: GrainIntegrationOutput,\n  distributionCredTimestamp: TimestampMs,\n|};\n\nexport type GrainIntegrationResults = {|\n  +results: $ReadOnlyArray<GrainIntegrationMultiResult>,\n  // A top-level pointer to the most recently updated Ledger instance\n  +ledger: Ledger,\n|};\n\n/**\n  A primary SourceCred API that combines the given inputs into a list of\n  grain distributions.\n\n  May mutate the ledger that is passed in.\n */\nexport async function grain(input: GrainInput): Promise<GrainOutput> {\n  const distributions = applyDistributions(\n    input.grainConfig,\n    input.credGraph,\n    input.ledger,\n    +Date.now(),\n    input.allowMultipleDistributionsPerInterval || false\n  );\n  return {distributions, ledger: input.ledger};\n}\n\n/**\n * Marshall grainInput from a Grain Configuration file for use with\n * executeGrainIntegration function\n */\nexport function executeGrainIntegrationsFromGrainInput(\n  grainInput: GrainInput,\n  ledger: Ledger,\n  distributions: $ReadOnlyArray<Distribution>\n): GrainIntegrationResults {\n  const integrationCurrency = grainInput.currencyDetails.integrationCurrency;\n  const grainIntegration = grainInput.grainConfig.integration;\n  const results = [];\n  // track the latest ledger in the for-loop for the purposes of returning it\n  // at the top level, observing that any function may deep-copy\n  // the ledger (thus creating a new reference we'll need to track) and also\n  // supporting the case where the distributions parameter is an empty array\n  let ledgerResult = ledger;\n  if (integrationCurrency && grainIntegration) {\n    distributions.forEach((distribution) => {\n      const result = executeGrainIntegration(\n        ledgerResult,\n        grainIntegration.function,\n        distribution,\n        integrationCurrency,\n        false\n      );\n      const {output, distributionCredTimestamp, ledger: nextLedger} = result;\n      ledgerResult = nextLedger;\n      results.push({output, distributionCredTimestamp});\n    });\n  }\n  return {ledger: ledgerResult, results};\n}\n","// @flow\n\n/**\nReturns an array of arrays that contains all of the items in the original\narray parameter, but batched into arrays no larger than the batchSize.\nExample:\n  batch([1,2,3,4,5], 2) = [[1,2], [3,4], [5]]\n*/\nexport function batchArray<T>(\n  array: $ReadOnlyArray<T>,\n  batchSize: number\n): $ReadOnlyArray<$ReadOnlyArray<T>> {\n  if (batchSize < 1) throw new Error(\"BatchSize must be 1 or more.\");\n  const result = [];\n  const backlog = array.slice();\n  while (backlog.length) {\n    result.push(backlog.splice(0, batchSize));\n  }\n  return result;\n}\n\nexport type BatchIterator<T> = Iterator<T> & {\n  hasNext: () => boolean,\n  numBatchesCompleted: () => number,\n};\n\n/**\nReturns an iterator that will stop upon reaching the batchSize, and then can be\nreused again for more batches. Use the provided hasNext() method to know when\nthere are no more batches available.\nExample:\n  const result = [];\n  while (iterator.hasNext()) {\n    for (const item of iterator) {\n      // code to process item\n    }\n    // code to finalize batch\n  }\n */\nexport function batchIterator<T>(\n  iterator: Iterator<T> | Generator<T, void, void>,\n  batchSize: number\n): BatchIterator<T> {\n  if (batchSize < 1) throw new Error(\"BatchSize must be 1 or more.\");\n  let itemsCompletedInCurrentBatch = 0;\n  let queue = iterator.next();\n  let hasNext = !queue.done;\n  let batchesCompleted = 0;\n\n  const next = () => {\n    if (queue.done) return queue;\n    if (itemsCompletedInCurrentBatch >= batchSize) {\n      itemsCompletedInCurrentBatch = 0;\n      batchesCompleted++;\n      return {value: undefined, done: true};\n    }\n    itemsCompletedInCurrentBatch++;\n    const current = queue;\n    queue = iterator.next();\n    hasNext = !queue.done;\n    if (queue.done) batchesCompleted++;\n    return current;\n  };\n\n  const result = {\n    next,\n    hasNext: () => hasNext,\n    numBatchesCompleted: () => batchesCompleted,\n    [\"@@iterator\"]: () => this,\n    *[Symbol.iterator]() {\n      for (let r; !(r = next()).done; ) yield r.value;\n    },\n  };\n  return result;\n}\n","import stream from 'stream';\nimport os from 'os';\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _toArray(arr) {\n  return _arrayWithHoles(arr) || _iterableToArray(arr) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/,\n    reLeadingDot = /^\\./,\n    rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof commonjsGlobal == 'object' && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol$1 = root.Symbol,\n    splice = arrayProto.splice;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol$1 ? Symbol$1.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value) {\n  return isArray(value) ? value : stringToPath(value);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoize(function(string) {\n  string = toString(string);\n\n  var result = [];\n  if (reLeadingDot.test(string)) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result);\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Assign cache to `_.memoize`.\nmemoize.Cache = MapCache;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nvar lodash_get = get;\n\nfunction getProp(obj, path, defaultValue) {\n  return obj[path] === undefined ? defaultValue : obj[path];\n}\n\nfunction setProp(obj, path, value) {\n  var pathArray = Array.isArray(path) ? path : path.split('.');\n\n  var _pathArray = _toArray(pathArray),\n      key = _pathArray[0],\n      restPath = _pathArray.slice(1);\n\n  var newValue = pathArray.length > 1 ? setProp(obj[key] || {}, restPath, value) : value;\n  return Object.assign({}, obj, _defineProperty({}, key, newValue));\n}\n\nfunction unsetProp(obj, path) {\n  var pathArray = Array.isArray(path) ? path : path.split('.');\n\n  var _pathArray2 = _toArray(pathArray),\n      key = _pathArray2[0],\n      restPath = _pathArray2.slice(1);\n\n  if (_typeof(obj[key]) !== 'object') {\n    // This will never be hit in the current code because unwind does the check before calling unsetProp\n\n    /* istanbul ignore next */\n    return obj;\n  }\n\n  if (pathArray.length === 1) {\n    return Object.keys(obj).filter(function (prop) {\n      return prop !== key;\n    }).reduce(function (acc, prop) {\n      return Object.assign(acc, _defineProperty({}, prop, obj[prop]));\n    }, {});\n  }\n\n  return unsetProp(obj[key], restPath);\n}\n\nfunction flattenReducer(acc, arr) {\n  try {\n    // This is faster but susceptible to `RangeError: Maximum call stack size exceeded`\n    acc.push.apply(acc, _toConsumableArray(arr));\n    return acc;\n  } catch (err) {\n    // Fallback to a slower but safer option\n    return acc.concat(arr);\n  }\n}\n\nfunction fastJoin(arr, separator) {\n  var isFirst = true;\n  return arr.reduce(function (acc, elem) {\n    if (elem === null || elem === undefined) {\n      elem = '';\n    }\n\n    if (isFirst) {\n      isFirst = false;\n      return \"\".concat(elem);\n    }\n\n    return \"\".concat(acc).concat(separator).concat(elem);\n  }, '');\n}\n\nvar utils = {\n  getProp: getProp,\n  setProp: setProp,\n  unsetProp: unsetProp,\n  fastJoin: fastJoin,\n  flattenReducer: flattenReducer\n};\n\nvar getProp$1 = utils.getProp,\n    fastJoin$1 = utils.fastJoin,\n    flattenReducer$1 = utils.flattenReducer;\n\nvar JSON2CSVBase =\n/*#__PURE__*/\nfunction () {\n  function JSON2CSVBase(opts) {\n    _classCallCheck(this, JSON2CSVBase);\n\n    this.opts = this.preprocessOpts(opts);\n  }\n  /**\n   * Check passing opts and set defaults.\n   *\n   * @param {Json2CsvOptions} opts Options object containing fields,\n   * delimiter, default value, quote mark, header, etc.\n   */\n\n\n  _createClass(JSON2CSVBase, [{\n    key: \"preprocessOpts\",\n    value: function preprocessOpts(opts) {\n      var processedOpts = Object.assign({}, opts);\n      processedOpts.transforms = !Array.isArray(processedOpts.transforms) ? processedOpts.transforms ? [processedOpts.transforms] : [] : processedOpts.transforms;\n      processedOpts.delimiter = processedOpts.delimiter || ',';\n      processedOpts.eol = processedOpts.eol || os.EOL;\n      processedOpts.quote = typeof processedOpts.quote === 'string' ? processedOpts.quote : '\"';\n      processedOpts.escapedQuote = typeof processedOpts.escapedQuote === 'string' ? processedOpts.escapedQuote : \"\".concat(processedOpts.quote).concat(processedOpts.quote);\n      processedOpts.header = processedOpts.header !== false;\n      processedOpts.includeEmptyRows = processedOpts.includeEmptyRows || false;\n      processedOpts.withBOM = processedOpts.withBOM || false;\n      return processedOpts;\n    }\n    /**\n     * Check and normalize the fields configuration.\n     *\n     * @param {(string|object)[]} fields Fields configuration provided by the user\n     * or inferred from the data\n     * @returns {object[]} preprocessed FieldsInfo array\n     */\n\n  }, {\n    key: \"preprocessFieldsInfo\",\n    value: function preprocessFieldsInfo(fields) {\n      var _this = this;\n\n      return fields.map(function (fieldInfo) {\n        if (typeof fieldInfo === 'string') {\n          return {\n            label: fieldInfo,\n            value: fieldInfo.includes('.') || fieldInfo.includes('[') ? function (row) {\n              return lodash_get(row, fieldInfo, _this.opts.defaultValue);\n            } : function (row) {\n              return getProp$1(row, fieldInfo, _this.opts.defaultValue);\n            }\n          };\n        }\n\n        if (_typeof(fieldInfo) === 'object') {\n          var defaultValue = 'default' in fieldInfo ? fieldInfo.default : _this.opts.defaultValue;\n\n          if (typeof fieldInfo.value === 'string') {\n            return {\n              label: fieldInfo.label || fieldInfo.value,\n              value: fieldInfo.value.includes('.') || fieldInfo.value.includes('[') ? function (row) {\n                return lodash_get(row, fieldInfo.value, defaultValue);\n              } : function (row) {\n                return getProp$1(row, fieldInfo.value, defaultValue);\n              }\n            };\n          }\n\n          if (typeof fieldInfo.value === 'function') {\n            var label = fieldInfo.label || fieldInfo.value.name || '';\n            var field = {\n              label: label,\n              default: defaultValue\n            };\n            return {\n              label: label,\n              value: function value(row) {\n                var value = fieldInfo.value(row, field);\n                return value === null || value === undefined ? defaultValue : value;\n              }\n            };\n          }\n        }\n\n        throw new Error('Invalid field info option. ' + JSON.stringify(fieldInfo));\n      });\n    }\n    /**\n     * Create the title row with all the provided fields as column headings\n     *\n     * @returns {String} titles as a string\n     */\n\n  }, {\n    key: \"getHeader\",\n    value: function getHeader() {\n      var _this2 = this;\n\n      return fastJoin$1(this.opts.fields.map(function (fieldInfo) {\n        return _this2.processValue(fieldInfo.label);\n      }), this.opts.delimiter);\n    }\n    /**\n     * Preprocess each object according to the given transforms (unwind, flatten, etc.).\n     * @param {Object} row JSON object to be converted in a CSV row\n     */\n\n  }, {\n    key: \"preprocessRow\",\n    value: function preprocessRow(row) {\n      return this.opts.transforms.reduce(function (rows, transform) {\n        return rows.map(function (row) {\n          return transform(row);\n        }).reduce(flattenReducer$1, []);\n      }, [row]);\n    }\n    /**\n     * Create the content of a specific CSV row\n     *\n     * @param {Object} row JSON object to be converted in a CSV row\n     * @returns {String} CSV string (row)\n     */\n\n  }, {\n    key: \"processRow\",\n    value: function processRow(row) {\n      var _this3 = this;\n\n      if (!row) {\n        return undefined;\n      }\n\n      var processedRow = this.opts.fields.map(function (fieldInfo) {\n        return _this3.processCell(row, fieldInfo);\n      });\n\n      if (!this.opts.includeEmptyRows && processedRow.every(function (field) {\n        return field === undefined;\n      })) {\n        return undefined;\n      }\n\n      return fastJoin$1(processedRow, this.opts.delimiter);\n    }\n    /**\n     * Create the content of a specfic CSV row cell\n     *\n     * @param {Object} row JSON object representing the  CSV row that the cell belongs to\n     * @param {FieldInfo} fieldInfo Details of the field to process to be a CSV cell\n     * @returns {String} CSV string (cell)\n     */\n\n  }, {\n    key: \"processCell\",\n    value: function processCell(row, fieldInfo) {\n      return this.processValue(fieldInfo.value(row));\n    }\n    /**\n     * Create the content of a specfic CSV row cell\n     *\n     * @param {Any} value Value to be included in a CSV cell\n     * @returns {String} Value stringified and processed\n     */\n\n  }, {\n    key: \"processValue\",\n    value: function processValue(value) {\n      if (value === null || value === undefined) {\n        return undefined;\n      }\n\n      var valueType = _typeof(value);\n\n      if (valueType !== 'boolean' && valueType !== 'number' && valueType !== 'string') {\n        value = JSON.stringify(value);\n\n        if (value === undefined) {\n          return undefined;\n        }\n\n        if (value[0] === '\"') {\n          value = value.replace(/^\"(.+)\"$/, '$1');\n        }\n      }\n\n      if (typeof value === 'string') {\n        if (this.opts.excelStrings) {\n          if (value.includes(this.opts.quote)) {\n            value = value.replace(new RegExp(this.opts.quote, 'g'), \"\".concat(this.opts.escapedQuote).concat(this.opts.escapedQuote));\n          }\n\n          value = \"\\\"=\\\"\\\"\".concat(value, \"\\\"\\\"\\\"\");\n        } else {\n          if (value.includes(this.opts.quote)) {\n            value = value.replace(new RegExp(this.opts.quote, 'g'), this.opts.escapedQuote);\n          }\n\n          value = \"\".concat(this.opts.quote).concat(value).concat(this.opts.quote);\n        }\n      }\n\n      return value;\n    }\n  }]);\n\n  return JSON2CSVBase;\n}();\n\nvar JSON2CSVBase_1 = JSON2CSVBase;\n\nvar fastJoin$2 = utils.fastJoin,\n    flattenReducer$2 = utils.flattenReducer;\n\nvar JSON2CSVParser =\n/*#__PURE__*/\nfunction (_JSON2CSVBase) {\n  _inherits(JSON2CSVParser, _JSON2CSVBase);\n\n  function JSON2CSVParser(opts) {\n    var _this;\n\n    _classCallCheck(this, JSON2CSVParser);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(JSON2CSVParser).call(this, opts));\n\n    if (_this.opts.fields) {\n      _this.opts.fields = _this.preprocessFieldsInfo(_this.opts.fields);\n    }\n\n    return _this;\n  }\n  /**\n   * Main function that converts json to csv.\n   *\n   * @param {Array|Object} data Array of JSON objects to be converted to CSV\n   * @returns {String} The CSV formated data as a string\n   */\n\n\n  _createClass(JSON2CSVParser, [{\n    key: \"parse\",\n    value: function parse(data) {\n      var processedData = this.preprocessData(data);\n\n      if (!this.opts.fields) {\n        this.opts.fields = processedData.reduce(function (fields, item) {\n          Object.keys(item).forEach(function (field) {\n            if (!fields.includes(field)) {\n              fields.push(field);\n            }\n          });\n          return fields;\n        }, []);\n        this.opts.fields = this.preprocessFieldsInfo(this.opts.fields);\n      }\n\n      var header = this.opts.header ? this.getHeader() : '';\n      var rows = this.processData(processedData);\n      var csv = (this.opts.withBOM ? \"\\uFEFF\" : '') + header + (header && rows ? this.opts.eol : '') + rows;\n      return csv;\n    }\n    /**\n     * Preprocess the data according to the give opts (unwind, flatten, etc.)\n      and calculate the fields and field names if they are not provided.\n     *\n     * @param {Array|Object} data Array or object to be converted to CSV\n     */\n\n  }, {\n    key: \"preprocessData\",\n    value: function preprocessData(data) {\n      var _this2 = this;\n\n      var processedData = Array.isArray(data) ? data : [data];\n\n      if (!this.opts.fields && (processedData.length === 0 || _typeof(processedData[0]) !== 'object')) {\n        throw new Error('Data should not be empty or the \"fields\" option should be included');\n      }\n\n      if (this.opts.transforms.length === 0) return processedData;\n      return processedData.map(function (row) {\n        return _this2.preprocessRow(row);\n      }).reduce(flattenReducer$2, []);\n    }\n    /**\n     * Create the content row by row below the header\n     *\n     * @param {Array} data Array of JSON objects to be converted to CSV\n     * @returns {String} CSV string (body)\n     */\n\n  }, {\n    key: \"processData\",\n    value: function processData(data) {\n      var _this3 = this;\n\n      return fastJoin$2(data.map(function (row) {\n        return _this3.processRow(row);\n      }).filter(function (row) {\n        return row;\n      }), // Filter empty rows\n      this.opts.eol);\n    }\n  }]);\n\n  return JSON2CSVParser;\n}(JSON2CSVBase_1);\n\nvar JSON2CSVParser_1 = JSON2CSVParser;\n\n/*global Buffer*/\n// Named constants with unique integer values\nvar C = {};\n// Tokens\nvar LEFT_BRACE    = C.LEFT_BRACE    = 0x1;\nvar RIGHT_BRACE   = C.RIGHT_BRACE   = 0x2;\nvar LEFT_BRACKET  = C.LEFT_BRACKET  = 0x3;\nvar RIGHT_BRACKET = C.RIGHT_BRACKET = 0x4;\nvar COLON         = C.COLON         = 0x5;\nvar COMMA         = C.COMMA         = 0x6;\nvar TRUE          = C.TRUE          = 0x7;\nvar FALSE         = C.FALSE         = 0x8;\nvar NULL          = C.NULL          = 0x9;\nvar STRING        = C.STRING        = 0xa;\nvar NUMBER        = C.NUMBER        = 0xb;\n// Tokenizer States\nvar START   = C.START   = 0x11;\nvar STOP    = C.STOP    = 0x12;\nvar TRUE1   = C.TRUE1   = 0x21;\nvar TRUE2   = C.TRUE2   = 0x22;\nvar TRUE3   = C.TRUE3   = 0x23;\nvar FALSE1  = C.FALSE1  = 0x31;\nvar FALSE2  = C.FALSE2  = 0x32;\nvar FALSE3  = C.FALSE3  = 0x33;\nvar FALSE4  = C.FALSE4  = 0x34;\nvar NULL1   = C.NULL1   = 0x41;\nvar NULL2   = C.NULL2   = 0x42;\nvar NULL3   = C.NULL3   = 0x43;\nvar NUMBER1 = C.NUMBER1 = 0x51;\nvar NUMBER3 = C.NUMBER3 = 0x53;\nvar STRING1 = C.STRING1 = 0x61;\nvar STRING2 = C.STRING2 = 0x62;\nvar STRING3 = C.STRING3 = 0x63;\nvar STRING4 = C.STRING4 = 0x64;\nvar STRING5 = C.STRING5 = 0x65;\nvar STRING6 = C.STRING6 = 0x66;\n// Parser States\nvar VALUE   = C.VALUE   = 0x71;\nvar KEY     = C.KEY     = 0x72;\n// Parser Modes\nvar OBJECT  = C.OBJECT  = 0x81;\nvar ARRAY   = C.ARRAY   = 0x82;\n// Character constants\nvar BACK_SLASH =      \"\\\\\".charCodeAt(0);\nvar FORWARD_SLASH =   \"\\/\".charCodeAt(0);\nvar BACKSPACE =       \"\\b\".charCodeAt(0);\nvar FORM_FEED =       \"\\f\".charCodeAt(0);\nvar NEWLINE =         \"\\n\".charCodeAt(0);\nvar CARRIAGE_RETURN = \"\\r\".charCodeAt(0);\nvar TAB =             \"\\t\".charCodeAt(0);\n\nvar STRING_BUFFER_SIZE = 64 * 1024;\n\nfunction Parser() {\n  this.tState = START;\n  this.value = undefined;\n\n  this.string = undefined; // string data\n  this.stringBuffer = Buffer.alloc ? Buffer.alloc(STRING_BUFFER_SIZE) : new Buffer(STRING_BUFFER_SIZE);\n  this.stringBufferOffset = 0;\n  this.unicode = undefined; // unicode escapes\n  this.highSurrogate = undefined;\n\n  this.key = undefined;\n  this.mode = undefined;\n  this.stack = [];\n  this.state = VALUE;\n  this.bytes_remaining = 0; // number of bytes remaining in multi byte utf8 char to read after split boundary\n  this.bytes_in_sequence = 0; // bytes in multi byte utf8 char to read\n  this.temp_buffs = { \"2\": new Buffer(2), \"3\": new Buffer(3), \"4\": new Buffer(4) }; // for rebuilding chars split before boundary is reached\n\n  // Stream offset\n  this.offset = -1;\n}\n\n// Slow code to string converter (only used when throwing syntax errors)\nParser.toknam = function (code) {\n  var keys = Object.keys(C);\n  for (var i = 0, l = keys.length; i < l; i++) {\n    var key = keys[i];\n    if (C[key] === code) { return key; }\n  }\n  return code && (\"0x\" + code.toString(16));\n};\n\nvar proto = Parser.prototype;\nproto.onError = function (err) { throw err; };\nproto.charError = function (buffer, i) {\n  this.tState = STOP;\n  this.onError(new Error(\"Unexpected \" + JSON.stringify(String.fromCharCode(buffer[i])) + \" at position \" + i + \" in state \" + Parser.toknam(this.tState)));\n};\nproto.appendStringChar = function (char) {\n  if (this.stringBufferOffset >= STRING_BUFFER_SIZE) {\n    this.string += this.stringBuffer.toString('utf8');\n    this.stringBufferOffset = 0;\n  }\n\n  this.stringBuffer[this.stringBufferOffset++] = char;\n};\nproto.appendStringBuf = function (buf, start, end) {\n  var size = buf.length;\n  if (typeof start === 'number') {\n    if (typeof end === 'number') {\n      if (end < 0) {\n        // adding a negative end decreeses the size\n        size = buf.length - start + end;\n      } else {\n        size = end - start;\n      }\n    } else {\n      size = buf.length - start;\n    }\n  }\n\n  if (size < 0) {\n    size = 0;\n  }\n\n  if (this.stringBufferOffset + size > STRING_BUFFER_SIZE) {\n    this.string += this.stringBuffer.toString('utf8', 0, this.stringBufferOffset);\n    this.stringBufferOffset = 0;\n  }\n\n  buf.copy(this.stringBuffer, this.stringBufferOffset, start, end);\n  this.stringBufferOffset += size;\n};\nproto.write = function (buffer) {\n  if (typeof buffer === \"string\") buffer = new Buffer(buffer);\n  var n;\n  for (var i = 0, l = buffer.length; i < l; i++) {\n    if (this.tState === START){\n      n = buffer[i];\n      this.offset++;\n      if(n === 0x7b){ this.onToken(LEFT_BRACE, \"{\"); // {\n      }else if(n === 0x7d){ this.onToken(RIGHT_BRACE, \"}\"); // }\n      }else if(n === 0x5b){ this.onToken(LEFT_BRACKET, \"[\"); // [\n      }else if(n === 0x5d){ this.onToken(RIGHT_BRACKET, \"]\"); // ]\n      }else if(n === 0x3a){ this.onToken(COLON, \":\");  // :\n      }else if(n === 0x2c){ this.onToken(COMMA, \",\"); // ,\n      }else if(n === 0x74){ this.tState = TRUE1;  // t\n      }else if(n === 0x66){ this.tState = FALSE1;  // f\n      }else if(n === 0x6e){ this.tState = NULL1; // n\n      }else if(n === 0x22){ // \"\n        this.string = \"\";\n        this.stringBufferOffset = 0;\n        this.tState = STRING1;\n      }else if(n === 0x2d){ this.string = \"-\"; this.tState = NUMBER1; // -\n      }else{\n        if (n >= 0x30 && n < 0x40) { // 1-9\n          this.string = String.fromCharCode(n); this.tState = NUMBER3;\n        } else if (n === 0x20 || n === 0x09 || n === 0x0a || n === 0x0d) ; else {\n          return this.charError(buffer, i);\n        }\n      }\n    }else if (this.tState === STRING1){ // After open quote\n      n = buffer[i]; // get current byte from buffer\n      // check for carry over of a multi byte char split between data chunks\n      // & fill temp buffer it with start of this data chunk up to the boundary limit set in the last iteration\n      if (this.bytes_remaining > 0) {\n        for (var j = 0; j < this.bytes_remaining; j++) {\n          this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence - this.bytes_remaining + j] = buffer[j];\n        }\n\n        this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]);\n        this.bytes_in_sequence = this.bytes_remaining = 0;\n        i = i + j - 1;\n      } else if (this.bytes_remaining === 0 && n >= 128) { // else if no remainder bytes carried over, parse multi byte (>=128) chars one at a time\n        if (n <= 193 || n > 244) {\n          return this.onError(new Error(\"Invalid UTF-8 character at position \" + i + \" in state \" + Parser.toknam(this.tState)));\n        }\n        if ((n >= 194) && (n <= 223)) this.bytes_in_sequence = 2;\n        if ((n >= 224) && (n <= 239)) this.bytes_in_sequence = 3;\n        if ((n >= 240) && (n <= 244)) this.bytes_in_sequence = 4;\n        if ((this.bytes_in_sequence + i) > buffer.length) { // if bytes needed to complete char fall outside buffer length, we have a boundary split\n          for (var k = 0; k <= (buffer.length - 1 - i); k++) {\n            this.temp_buffs[this.bytes_in_sequence][k] = buffer[i + k]; // fill temp buffer of correct size with bytes available in this chunk\n          }\n          this.bytes_remaining = (i + this.bytes_in_sequence) - buffer.length;\n          i = buffer.length - 1;\n        } else {\n          this.appendStringBuf(buffer, i, i + this.bytes_in_sequence);\n          i = i + this.bytes_in_sequence - 1;\n        }\n      } else if (n === 0x22) {\n        this.tState = START;\n        this.string += this.stringBuffer.toString('utf8', 0, this.stringBufferOffset);\n        this.stringBufferOffset = 0;\n        this.onToken(STRING, this.string);\n        this.offset += Buffer.byteLength(this.string, 'utf8') + 1;\n        this.string = undefined;\n      }\n      else if (n === 0x5c) {\n        this.tState = STRING2;\n      }\n      else if (n >= 0x20) { this.appendStringChar(n); }\n      else {\n          return this.charError(buffer, i);\n      }\n    }else if (this.tState === STRING2){ // After backslash\n      n = buffer[i];\n      if(n === 0x22){ this.appendStringChar(n); this.tState = STRING1;\n      }else if(n === 0x5c){ this.appendStringChar(BACK_SLASH); this.tState = STRING1;\n      }else if(n === 0x2f){ this.appendStringChar(FORWARD_SLASH); this.tState = STRING1;\n      }else if(n === 0x62){ this.appendStringChar(BACKSPACE); this.tState = STRING1;\n      }else if(n === 0x66){ this.appendStringChar(FORM_FEED); this.tState = STRING1;\n      }else if(n === 0x6e){ this.appendStringChar(NEWLINE); this.tState = STRING1;\n      }else if(n === 0x72){ this.appendStringChar(CARRIAGE_RETURN); this.tState = STRING1;\n      }else if(n === 0x74){ this.appendStringChar(TAB); this.tState = STRING1;\n      }else if(n === 0x75){ this.unicode = \"\"; this.tState = STRING3;\n      }else{\n        return this.charError(buffer, i);\n      }\n    }else if (this.tState === STRING3 || this.tState === STRING4 || this.tState === STRING5 || this.tState === STRING6){ // unicode hex codes\n      n = buffer[i];\n      // 0-9 A-F a-f\n      if ((n >= 0x30 && n < 0x40) || (n > 0x40 && n <= 0x46) || (n > 0x60 && n <= 0x66)) {\n        this.unicode += String.fromCharCode(n);\n        if (this.tState++ === STRING6) {\n          var intVal = parseInt(this.unicode, 16);\n          this.unicode = undefined;\n          if (this.highSurrogate !== undefined && intVal >= 0xDC00 && intVal < (0xDFFF + 1)) { //<56320,57343> - lowSurrogate\n            this.appendStringBuf(new Buffer(String.fromCharCode(this.highSurrogate, intVal)));\n            this.highSurrogate = undefined;\n          } else if (this.highSurrogate === undefined && intVal >= 0xD800 && intVal < (0xDBFF + 1)) { //<55296,56319> - highSurrogate\n            this.highSurrogate = intVal;\n          } else {\n            if (this.highSurrogate !== undefined) {\n              this.appendStringBuf(new Buffer(String.fromCharCode(this.highSurrogate)));\n              this.highSurrogate = undefined;\n            }\n            this.appendStringBuf(new Buffer(String.fromCharCode(intVal)));\n          }\n          this.tState = STRING1;\n        }\n      } else {\n        return this.charError(buffer, i);\n      }\n    } else if (this.tState === NUMBER1 || this.tState === NUMBER3) {\n        n = buffer[i];\n\n        switch (n) {\n          case 0x30: // 0\n          case 0x31: // 1\n          case 0x32: // 2\n          case 0x33: // 3\n          case 0x34: // 4\n          case 0x35: // 5\n          case 0x36: // 6\n          case 0x37: // 7\n          case 0x38: // 8\n          case 0x39: // 9\n          case 0x2e: // .\n          case 0x65: // e\n          case 0x45: // E\n          case 0x2b: // +\n          case 0x2d: // -\n            this.string += String.fromCharCode(n);\n            this.tState = NUMBER3;\n            break;\n          default:\n            this.tState = START;\n            var result = Number(this.string);\n\n            if (isNaN(result)){\n              return this.charError(buffer, i);\n            }\n\n            if ((this.string.match(/[0-9]+/) == this.string) && (result.toString() != this.string)) {\n              // Long string of digits which is an ID string and not valid and/or safe JavaScript integer Number\n              this.onToken(STRING, this.string);\n            } else {\n              this.onToken(NUMBER, result);\n            }\n\n            this.offset += this.string.length - 1;\n            this.string = undefined;\n            i--;\n            break;\n        }\n    }else if (this.tState === TRUE1){ // r\n      if (buffer[i] === 0x72) { this.tState = TRUE2; }\n      else { return this.charError(buffer, i); }\n    }else if (this.tState === TRUE2){ // u\n      if (buffer[i] === 0x75) { this.tState = TRUE3; }\n      else { return this.charError(buffer, i); }\n    }else if (this.tState === TRUE3){ // e\n      if (buffer[i] === 0x65) { this.tState = START; this.onToken(TRUE, true); this.offset+= 3; }\n      else { return this.charError(buffer, i); }\n    }else if (this.tState === FALSE1){ // a\n      if (buffer[i] === 0x61) { this.tState = FALSE2; }\n      else { return this.charError(buffer, i); }\n    }else if (this.tState === FALSE2){ // l\n      if (buffer[i] === 0x6c) { this.tState = FALSE3; }\n      else { return this.charError(buffer, i); }\n    }else if (this.tState === FALSE3){ // s\n      if (buffer[i] === 0x73) { this.tState = FALSE4; }\n      else { return this.charError(buffer, i); }\n    }else if (this.tState === FALSE4){ // e\n      if (buffer[i] === 0x65) { this.tState = START; this.onToken(FALSE, false); this.offset+= 4; }\n      else { return this.charError(buffer, i); }\n    }else if (this.tState === NULL1){ // u\n      if (buffer[i] === 0x75) { this.tState = NULL2; }\n      else { return this.charError(buffer, i); }\n    }else if (this.tState === NULL2){ // l\n      if (buffer[i] === 0x6c) { this.tState = NULL3; }\n      else { return this.charError(buffer, i); }\n    }else if (this.tState === NULL3){ // l\n      if (buffer[i] === 0x6c) { this.tState = START; this.onToken(NULL, null); this.offset += 3; }\n      else { return this.charError(buffer, i); }\n    }\n  }\n};\nproto.onToken = function (token, value) {\n  // Override this to get events\n};\n\nproto.parseError = function (token, value) {\n  this.tState = STOP;\n  this.onError(new Error(\"Unexpected \" + Parser.toknam(token) + (value ? (\"(\" + JSON.stringify(value) + \")\") : \"\") + \" in state \" + Parser.toknam(this.state)));\n};\nproto.push = function () {\n  this.stack.push({value: this.value, key: this.key, mode: this.mode});\n};\nproto.pop = function () {\n  var value = this.value;\n  var parent = this.stack.pop();\n  this.value = parent.value;\n  this.key = parent.key;\n  this.mode = parent.mode;\n  this.emit(value);\n  if (!this.mode) { this.state = VALUE; }\n};\nproto.emit = function (value) {\n  if (this.mode) { this.state = COMMA; }\n  this.onValue(value);\n};\nproto.onValue = function (value) {\n  // Override me\n};\nproto.onToken = function (token, value) {\n  if(this.state === VALUE){\n    if(token === STRING || token === NUMBER || token === TRUE || token === FALSE || token === NULL){\n      if (this.value) {\n        this.value[this.key] = value;\n      }\n      this.emit(value);\n    }else if(token === LEFT_BRACE){\n      this.push();\n      if (this.value) {\n        this.value = this.value[this.key] = {};\n      } else {\n        this.value = {};\n      }\n      this.key = undefined;\n      this.state = KEY;\n      this.mode = OBJECT;\n    }else if(token === LEFT_BRACKET){\n      this.push();\n      if (this.value) {\n        this.value = this.value[this.key] = [];\n      } else {\n        this.value = [];\n      }\n      this.key = 0;\n      this.mode = ARRAY;\n      this.state = VALUE;\n    }else if(token === RIGHT_BRACE){\n      if (this.mode === OBJECT) {\n        this.pop();\n      } else {\n        return this.parseError(token, value);\n      }\n    }else if(token === RIGHT_BRACKET){\n      if (this.mode === ARRAY) {\n        this.pop();\n      } else {\n        return this.parseError(token, value);\n      }\n    }else{\n      return this.parseError(token, value);\n    }\n  }else if(this.state === KEY){\n    if (token === STRING) {\n      this.key = value;\n      this.state = COLON;\n    } else if (token === RIGHT_BRACE) {\n      this.pop();\n    } else {\n      return this.parseError(token, value);\n    }\n  }else if(this.state === COLON){\n    if (token === COLON) { this.state = VALUE; }\n    else { return this.parseError(token, value); }\n  }else if(this.state === COMMA){\n    if (token === COMMA) {\n      if (this.mode === ARRAY) { this.key++; this.state = VALUE; }\n      else if (this.mode === OBJECT) { this.state = KEY; }\n\n    } else if (token === RIGHT_BRACKET && this.mode === ARRAY || token === RIGHT_BRACE && this.mode === OBJECT) {\n      this.pop();\n    } else {\n      return this.parseError(token, value);\n    }\n  }else{\n    return this.parseError(token, value);\n  }\n};\n\nParser.C = C;\n\nvar jsonparse = Parser;\n\nvar Transform = stream.Transform;\n\nvar JSON2CSVTransform =\n/*#__PURE__*/\nfunction (_Transform) {\n  _inherits(JSON2CSVTransform, _Transform);\n\n  function JSON2CSVTransform(opts, transformOpts) {\n    var _this;\n\n    _classCallCheck(this, JSON2CSVTransform);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(JSON2CSVTransform).call(this, transformOpts)); // Inherit methods from JSON2CSVBase since extends doesn't\n    // allow multiple inheritance and manually preprocess opts\n\n    Object.getOwnPropertyNames(JSON2CSVBase_1.prototype).forEach(function (key) {\n      return _this[key] = JSON2CSVBase_1.prototype[key];\n    });\n    _this.opts = _this.preprocessOpts(opts);\n    _this._data = '';\n    _this._hasWritten = false;\n\n    if (_this._readableState.objectMode) {\n      _this.initObjectModeParse();\n    } else if (_this.opts.ndjson) {\n      _this.initNDJSONParse();\n    } else {\n      _this.initJSONParser();\n    }\n\n    if (_this.opts.withBOM) {\n      _this.push(\"\\uFEFF\");\n    }\n\n    if (_this.opts.fields) {\n      _this.opts.fields = _this.preprocessFieldsInfo(_this.opts.fields);\n\n      _this.pushHeader();\n    }\n\n    return _this;\n  }\n  /**\n   * Init the transform with a parser to process data in object mode.\n   * It receives JSON objects one by one and send them to `pushLine for processing.\n   */\n\n\n  _createClass(JSON2CSVTransform, [{\n    key: \"initObjectModeParse\",\n    value: function initObjectModeParse() {\n      var transform = this;\n      this.parser = {\n        write: function write(line) {\n          transform.pushLine(line);\n        },\n        getPendingData: function getPendingData() {\n          return undefined;\n        }\n      };\n    }\n    /**\n     * Init the transform with a parser to process NDJSON data.\n     * It maintains a buffer of received data, parses each line\n     * as JSON and send it to `pushLine for processing.\n     */\n\n  }, {\n    key: \"initNDJSONParse\",\n    value: function initNDJSONParse() {\n      var transform = this;\n      this.parser = {\n        _data: '',\n        write: function write(chunk) {\n          this._data += chunk.toString();\n\n          var lines = this._data.split('\\n').map(function (line) {\n            return line.trim();\n          }).filter(function (line) {\n            return line !== '';\n          });\n\n          var pendingData = false;\n          lines.forEach(function (line, i) {\n            try {\n              transform.pushLine(JSON.parse(line));\n            } catch (e) {\n              if (i === lines.length - 1) {\n                pendingData = true;\n              } else {\n                e.message = \"Invalid JSON (\".concat(line, \")\");\n                transform.emit('error', e);\n              }\n            }\n          });\n          this._data = pendingData ? this._data.slice(this._data.lastIndexOf('\\n')) : '';\n        },\n        getPendingData: function getPendingData() {\n          return this._data;\n        }\n      };\n    }\n    /**\n     * Init the transform with a parser to process JSON data.\n     * It maintains a buffer of received data, parses each as JSON \n     * item if the data is an array or the data itself otherwise\n     * and send it to `pushLine` for processing.\n     */\n\n  }, {\n    key: \"initJSONParser\",\n    value: function initJSONParser() {\n      var transform = this;\n      this.parser = new jsonparse();\n\n      this.parser.onValue = function (value) {\n        if (this.stack.length !== this.depthToEmit) return;\n        transform.pushLine(value);\n      };\n\n      this.parser._onToken = this.parser.onToken;\n\n      this.parser.onToken = function (token, value) {\n        transform.parser._onToken(token, value);\n\n        if (this.stack.length === 0 && !transform.opts.fields && this.mode !== jsonparse.C.ARRAY && this.mode !== jsonparse.C.OBJECT) {\n          this.onError(new Error('Data should not be empty or the \"fields\" option should be included'));\n        }\n\n        if (this.stack.length === 1) {\n          if (this.depthToEmit === undefined) {\n            // If Array emit its content, else emit itself\n            this.depthToEmit = this.mode === jsonparse.C.ARRAY ? 1 : 0;\n          }\n\n          if (this.depthToEmit !== 0 && this.stack.length === 1) {\n            // No need to store the whole root array in memory\n            this.value = undefined;\n          }\n        }\n      };\n\n      this.parser.getPendingData = function () {\n        return this.value;\n      };\n\n      this.parser.onError = function (err) {\n        if (err.message.includes('Unexpected')) {\n          err.message = \"Invalid JSON (\".concat(err.message, \")\");\n        }\n\n        transform.emit('error', err);\n      };\n    }\n    /**\n     * Main function that send data to the parse to be processed.\n     *\n     * @param {Buffer} chunk Incoming data\n     * @param {String} encoding Encoding of the incoming data. Defaults to 'utf8'\n     * @param {Function} done Called when the proceesing of the supplied chunk is done\n     */\n\n  }, {\n    key: \"_transform\",\n    value: function _transform(chunk, encoding, done) {\n      this.parser.write(chunk);\n      done();\n    }\n  }, {\n    key: \"_flush\",\n    value: function _flush(done) {\n      if (this.parser.getPendingData()) {\n        done(new Error('Invalid data received from stdin', this.parser.getPendingData()));\n      }\n\n      done();\n    }\n    /**\n     * Generate the csv header and pushes it downstream.\n     */\n\n  }, {\n    key: \"pushHeader\",\n    value: function pushHeader() {\n      if (this.opts.header) {\n        var header = this.getHeader();\n        this.emit('header', header);\n        this.push(header);\n        this._hasWritten = true;\n      }\n    }\n    /**\n     * Transforms an incoming json data to csv and pushes it downstream.\n     *\n     * @param {Object} data JSON object to be converted in a CSV row\n     */\n\n  }, {\n    key: \"pushLine\",\n    value: function pushLine(data) {\n      var _this2 = this;\n\n      var processedData = this.preprocessRow(data);\n\n      if (!this._hasWritten) {\n        this.opts.fields = this.opts.fields || this.preprocessFieldsInfo(Object.keys(processedData[0]));\n        this.pushHeader();\n      }\n\n      processedData.forEach(function (row) {\n        var line = _this2.processRow(row, _this2.opts);\n\n        if (line === undefined) return;\n\n        _this2.emit('line', line);\n\n        _this2.push(_this2._hasWritten ? _this2.opts.eol + line : line);\n\n        _this2._hasWritten = true;\n      });\n    }\n  }]);\n\n  return JSON2CSVTransform;\n}(Transform);\n\nvar JSON2CSVTransform_1 = JSON2CSVTransform;\n\nvar Transform$1 = stream.Transform;\nvar fastJoin$3 = utils.fastJoin;\n\nvar JSON2CSVAsyncParser =\n/*#__PURE__*/\nfunction () {\n  function JSON2CSVAsyncParser(opts, transformOpts) {\n    _classCallCheck(this, JSON2CSVAsyncParser);\n\n    this.input = new Transform$1(transformOpts);\n\n    this.input._read = function () {};\n\n    this.transform = new JSON2CSVTransform_1(opts, transformOpts);\n    this.processor = this.input.pipe(this.transform);\n  }\n\n  _createClass(JSON2CSVAsyncParser, [{\n    key: \"fromInput\",\n    value: function fromInput(input) {\n      if (this._input) {\n        throw new Error('Async parser already has an input.');\n      }\n\n      this._input = input;\n      this.input = this._input.pipe(this.processor);\n      return this;\n    }\n  }, {\n    key: \"throughTransform\",\n    value: function throughTransform(transform) {\n      if (this._output) {\n        throw new Error('Can\\'t add transforms once an output has been added.');\n      }\n\n      this.processor = this.processor.pipe(transform);\n      return this;\n    }\n  }, {\n    key: \"toOutput\",\n    value: function toOutput(output) {\n      if (this._output) {\n        throw new Error('Async parser already has an output.');\n      }\n\n      this._output = output;\n      this.processor = this.processor.pipe(output);\n      return this;\n    }\n  }, {\n    key: \"promise\",\n    value: function promise() {\n      var _this = this;\n\n      var returnCSV = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      return new Promise(function (resolve, reject) {\n        if (!returnCSV) {\n          _this.processor.on('finish', function () {\n            return resolve();\n          }).on('error', function (err) {\n            return reject(err);\n          });\n\n          return;\n        }\n\n        var csvBuffer = [];\n\n        _this.processor.on('data', function (chunk) {\n          return csvBuffer.push(chunk.toString());\n        }).on('finish', function () {\n          return resolve(fastJoin$3(csvBuffer, ''));\n        }).on('error', function (err) {\n          return reject(err);\n        });\n      });\n    }\n  }]);\n\n  return JSON2CSVAsyncParser;\n}();\n\nvar JSON2CSVAsyncParser_1 = JSON2CSVAsyncParser;\n\n/**\n * Performs the flattening of a data row recursively\n *\n * @param {String} separator Separator to be used as the flattened field name\n * @returns {Object => Object} Flattened object\n */\nfunction flatten() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$objects = _ref.objects,\n      objects = _ref$objects === void 0 ? true : _ref$objects,\n      _ref$arrays = _ref.arrays,\n      arrays = _ref$arrays === void 0 ? false : _ref$arrays,\n      _ref$separator = _ref.separator,\n      separator = _ref$separator === void 0 ? '.' : _ref$separator;\n\n  function step(obj, flatDataRow, currentPath) {\n    Object.keys(obj).forEach(function (key) {\n      var newPath = currentPath ? \"\".concat(currentPath).concat(separator).concat(key) : key;\n      var value = obj[key];\n\n      if (objects && _typeof(value) === 'object' && value !== null && !Array.isArray(value) && Object.prototype.toString.call(value.toJSON) !== '[object Function]' && Object.keys(value).length) {\n        step(value, flatDataRow, newPath);\n        return;\n      }\n\n      if (arrays && Array.isArray(value)) {\n        step(value, flatDataRow, newPath);\n        return;\n      }\n\n      flatDataRow[newPath] = value;\n    });\n    return flatDataRow;\n  }\n\n  return function (dataRow) {\n    return step(dataRow, {});\n  };\n}\n\nvar flatten_1 = flatten;\n\nvar setProp$1 = utils.setProp,\n    unsetProp$1 = utils.unsetProp,\n    flattenReducer$3 = utils.flattenReducer;\n\nfunction getUnwindablePaths(obj, currentPath) {\n  return Object.keys(obj).reduce(function (unwindablePaths, key) {\n    var newPath = currentPath ? \"\".concat(currentPath, \".\").concat(key) : key;\n    var value = obj[key];\n\n    if (_typeof(value) === 'object' && value !== null && !Array.isArray(value) && Object.prototype.toString.call(value.toJSON) !== '[object Function]' && Object.keys(value).length) {\n      unwindablePaths = unwindablePaths.concat(getUnwindablePaths(value, newPath));\n    } else if (Array.isArray(value)) {\n      unwindablePaths.push(newPath);\n      unwindablePaths = unwindablePaths.concat(value.map(function (arrObj) {\n        return getUnwindablePaths(arrObj, newPath);\n      }).reduce(flattenReducer$3, []).filter(function (item, index, arr) {\n        return arr.indexOf(item) !== index;\n      }));\n    }\n\n    return unwindablePaths;\n  }, []);\n}\n/**\n * Performs the unwind recursively in specified sequence\n *\n * @param {String[]} unwindPaths The paths as strings to be used to deconstruct the array\n * @returns {Object => Array} Array of objects containing all rows after unwind of chosen paths\n*/\n\n\nfunction unwind() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$paths = _ref.paths,\n      paths = _ref$paths === void 0 ? undefined : _ref$paths,\n      _ref$blankOut = _ref.blankOut,\n      blankOut = _ref$blankOut === void 0 ? false : _ref$blankOut;\n\n  function unwindReducer(rows, unwindPath) {\n    return rows.map(function (row) {\n      var unwindArray = lodash_get(row, unwindPath);\n\n      if (!Array.isArray(unwindArray)) {\n        return row;\n      }\n\n      if (!unwindArray.length) {\n        return unsetProp$1(row, unwindPath);\n      }\n\n      return unwindArray.map(function (unwindRow, index) {\n        var clonedRow = blankOut && index > 0 ? {} : row;\n        return setProp$1(clonedRow, unwindPath, unwindRow);\n      });\n    }).reduce(flattenReducer$3, []);\n  }\n\n  paths = Array.isArray(paths) ? paths : paths ? [paths] : undefined;\n  return function (dataRow) {\n    return (paths || getUnwindablePaths(dataRow)).reduce(unwindReducer, [dataRow]);\n  };\n}\n\nvar unwind_1 = unwind;\n\nvar Readable = stream.Readable;\nvar Parser$1 = JSON2CSVParser_1;\nvar AsyncParser = JSON2CSVAsyncParser_1;\nvar Transform$2 = JSON2CSVTransform_1; // Convenience method to keep the API similar to version 3.X\n\nvar parse = function parse(data, opts) {\n  return new JSON2CSVParser_1(opts).parse(data);\n};\n\nvar parseAsync = function parseAsync(data, opts, transformOpts) {\n  try {\n    if (!(data instanceof Readable)) {\n      transformOpts = Object.assign({}, transformOpts, {\n        objectMode: true\n      });\n    }\n\n    var asyncParser = new JSON2CSVAsyncParser_1(opts, transformOpts);\n    var promise = asyncParser.promise();\n\n    if (Array.isArray(data)) {\n      data.forEach(function (item) {\n        return asyncParser.input.push(item);\n      });\n      asyncParser.input.push(null);\n    } else if (data instanceof Readable) {\n      asyncParser.fromInput(data);\n    } else {\n      asyncParser.input.push(data);\n      asyncParser.input.push(null);\n    }\n\n    return promise;\n  } catch (err) {\n    return Promise.reject(err);\n  }\n};\n\nvar transforms = {\n  flatten: flatten_1,\n  unwind: unwind_1\n};\nvar json2csv = {\n  Parser: Parser$1,\n  AsyncParser: AsyncParser,\n  Transform: Transform$2,\n  parse: parse,\n  parseAsync: parseAsync,\n  transforms: transforms\n};\n\nexport default json2csv;\nexport { AsyncParser, Parser$1 as Parser, Transform$2 as Transform, parse, parseAsync, transforms };\n","// @flow\n\nimport type {AnalysisInput} from \"../analysis\";\nimport {epochGadget} from \"../../../core/credrank/nodeGadgets\";\nimport {NodeAddress, EdgeAddress} from \"../../../core/graph\";\nimport {batchIterator} from \"../../../util/batch\";\nimport {parse as serializeAsCsv} from \"json2csv\";\n\n/** Iterators that will yield CSV strings. The CSV contents will be batched in\ngroups for scalability. Each group will include headers. These strings can\neach be written to disk as a .csv file and then used to export the nodes\nand edges of a CredGraph into a Neo4j database using neo4j-admin.*/\nexport type Neo4jOutput = {|\n  nodes: Iterator<string> & {iterationsCompleted: () => number},\n  edges: Iterator<string> & {iterationsCompleted: () => number},\n|};\n\n// Used for batching nodes and edges.\n// This is mainly mitigating against the max string length in JS,\n// so hardcoding it makes sense for now.\nconst safeBatchSize = 500000;\n\nexport const computeNeo4jData = (input: AnalysisInput): Neo4jOutput => {\n  function* nodesCsvGenerator() {\n    const batchedNodes = batchIterator(input.credGraph.nodes(), safeBatchSize);\n    while (batchedNodes.hasNext()) {\n      const formattedNodes = [];\n      for (const node of batchedNodes) {\n        formattedNodes.push({\n          description: getNodeDescription(node, input.ledger),\n          cred: node.cred,\n          mint: node.mint,\n          \"address:ID\": reformatNodeAddress(node.address),\n          \"nodeType:LABEL\": reformatNodeAddress(node.address, 3),\n          \"plugin:LABEL\": reformatNodeAddress(node.address, 2),\n        });\n      }\n      yield (serializeAsCsv(formattedNodes): string);\n    }\n  }\n\n  function* edgesCsvGenerator() {\n    const batchedEdges = batchIterator(input.credGraph.edges(), safeBatchSize);\n    while (batchedEdges.hasNext()) {\n      const formattedEdges = [];\n      for (const edge of batchedEdges) {\n        formattedEdges.push({\n          reversed: edge.reversed,\n          transitionProbability: edge.transitionProbability,\n          credFlow: edge.credFlow,\n          address: reformatEdgeAddress(edge.address),\n          \":TYPE\": reformatEdgeAddress(edge.address, 3),\n          \"dst:END_ID\": reformatNodeAddress(edge.dst),\n          \"src:START_ID\": reformatNodeAddress(edge.src),\n        });\n      }\n      yield (serializeAsCsv(formattedEdges): string);\n    }\n  }\n\n  return {\n    nodes: generatorToCountingIterator(nodesCsvGenerator()),\n    edges: generatorToCountingIterator(edgesCsvGenerator()),\n  };\n};\n\nfunction reformatNodeAddress(address, partsToInclude = Infinity) {\n  const a = NodeAddress.toParts(address).slice(0, partsToInclude);\n  return a.join(\"/\");\n}\n\nfunction reformatEdgeAddress(address, partsToInclude = Infinity) {\n  const a = EdgeAddress.toParts(address).slice(0, partsToInclude);\n  return a.join(\"/\");\n}\n\nfunction getNodeDescription(node, ledger) {\n  if (NodeAddress.hasPrefix(node.address, epochGadget.prefix)) {\n    const {owner, epochStart} = epochGadget.fromRaw(node.address);\n    return `Participant: ${\n      ledger.account(owner).identity.name\n    }, Epoch Start: ${new Date(epochStart).toDateString()}`;\n  }\n  return node.description.replace(/[^a-zA-Z0-9/:[\\]() \\-.#]/g, \"\");\n}\n\nfunction generatorToCountingIterator(generator) {\n  let counter = 0;\n  const countingGenerator = (function* () {\n    let next = generator.next();\n    while (!next.done) {\n      counter++;\n      yield next.value;\n      next = generator.next();\n    }\n  })();\n  const result = {\n    iterationsCompleted: () => counter,\n    next: countingGenerator.next,\n    [\"@@iterator\"]: () => countingGenerator,\n    [Symbol.iterator]: () => countingGenerator,\n  };\n  return result;\n}\n","// @flow\n\nimport {computeNeo4jData, type Neo4jOutput} from \"./analysisUtils/neo4j\";\nimport {CredGraph} from \"../../core/credrank/credGraph\";\nimport {Ledger} from \"../../core/ledger/ledger\";\nimport {\n  computeCredAccounts,\n  type CredAccountData,\n} from \"../../core/ledger/credAccounts\";\n\n/** Input type for the analysis API */\nexport type AnalysisInput = {|\n  +credGraph: CredGraph,\n  +ledger: Ledger,\n  +featureFlags: {|\n    neo4j?: boolean,\n  |},\n|};\n\n/** Output type for the analysis API */\nexport type AnalysisOutput = {|\n  +accounts: CredAccountData,\n  +neo4j?: Neo4jOutput,\n|};\n\n/**\n  A primary SourceCred API that transforms the given inputs into useful data\n  analysis structures.\n */\nexport async function analysis(input: AnalysisInput): Promise<AnalysisOutput> {\n  const accounts = computeCredAccounts(input.ledger, input.credGraph);\n  const neo4j = input.featureFlags.neo4j ? computeNeo4jData(input) : undefined;\n\n  return {accounts, neo4j};\n}\n","// @flow\n\nimport type {PluginDeclaration} from \"../analysis/pluginDeclaration\";\nimport {declaration as githubDeclaration} from \"../plugins/github/declaration\";\nimport {declaration as discourseDeclaration} from \"../plugins/discourse/declaration\";\nimport {declaration as discordDeclaration} from \"../plugins/discord/declaration\";\nimport {declaration as initiativesDeclaration} from \"../plugins/initiatives/declaration\";\nimport {declaration as ethereumDeclaration} from \"../plugins/ethereum/declaration\";\nimport {type RawInstanceConfig} from \"./rawInstanceConfig\";\nimport {type PluginId, getPluginOwner} from \"./pluginId\";\nimport {DataStorage} from \"../core/storage\";\nimport {\n  ExternalPlugin,\n  ExternalPluginIdOwner,\n} from \"../plugins/external/plugin\";\n\nexport async function getPluginDeclaration(\n  pluginId: PluginId,\n  storage: DataStorage\n): Promise<PluginDeclaration> {\n  const mapping = {\n    \"sourcecred/github\": githubDeclaration,\n    \"sourcecred/discourse\": discourseDeclaration,\n    \"sourcecred/discord\": discordDeclaration,\n    \"sourcecred/initiatives\": initiativesDeclaration,\n    \"sourcecred/ethereum\": ethereumDeclaration,\n  };\n  if (mapping[pluginId.toString()]) return mapping[pluginId.toString()];\n  if (getPluginOwner(pluginId) === ExternalPluginIdOwner)\n    return await new ExternalPlugin({pluginId, storage}).declaration();\n  throw \"Bad declaration: \" + JSON.stringify(pluginId);\n}\n\nexport async function upgradeRawInstanceConfig(\n  raw: RawInstanceConfig,\n  storage: DataStorage\n): Promise<$ReadOnlyMap<PluginId, PluginDeclaration>> {\n  const bundledPlugins = new Map();\n  for (const id of raw.bundledPlugins) {\n    const plugin = await getPluginDeclaration(id, storage);\n    if (plugin == null) {\n      throw new Error(\"bad bundled declaration: \" + JSON.stringify(id));\n    }\n    bundledPlugins.set(id, plugin);\n  }\n  return bundledPlugins;\n}\n","// @flow\n\nimport {\n  type IntervalLength,\n  type Budget,\n  type BudgetPeriod,\n  intervalLengthParser,\n} from \"../core/mintBudget\";\nimport {\n  type PluginId,\n  parser as pluginIdParser,\n  fromString as pluginIdFromString,\n} from \"./pluginId\";\nimport {\n  type TimestampISO,\n  fromISO,\n  timestampISOParser,\n} from \"../util/timestamp\";\nimport * as C from \"../util/combo\";\nimport {getPluginDeclaration} from \"./bundledDeclarations\";\nimport {DataStorage} from \"../core/storage\";\n\n/**\n * This module contains logic for setting Cred minting budgets over time on a per-plugin basis.\n * As an example, suppose we want to limit the GitHub plugin to mint only 200 Cred per week,\n * and we want the Discord plugin to mint 100 Cred per Week until Jan 1, 2020 and 200 Cred per\n * week thereafter. We could do so with the following config:\n * ```json\n * {\n *   \"intervalLength\": \"WEEKLY\",\n *   \"plugins\": {\n *     \"sourcecred/github\": [\n *        {\"startTime\": \"2018-01-01\", \"budget\": 200}\n *     ],\n *     \"sourcecred/discord\": [\n *       {\"startTime\": \"2018-01-01\", \"budget\": 100},\n *       {\"startTime\": \"2020-01-01\", \"budget\": 200},\n *     ],\n *   }\n * }\n * ```\n */\n\ntype RawPluginBudgetConfig = {|\n  +intervalLength: IntervalLength,\n  +plugins: {[PluginId]: $ReadOnlyArray<RawBudgetPeriod>},\n|};\n\ntype RawBudgetPeriod = {|\n  +startTime: TimestampISO,\n  +budget: number,\n|};\n\nconst rawPeriodParser: C.Parser<RawBudgetPeriod> = C.object({\n  startTime: timestampISOParser,\n  budget: C.number,\n});\n\nexport const rawParser: C.Parser<RawPluginBudgetConfig> = C.object({\n  intervalLength: intervalLengthParser,\n  plugins: C.dict(C.array(rawPeriodParser), pluginIdParser),\n});\n\nfunction upgradeRawPeriod(p: RawBudgetPeriod): BudgetPeriod {\n  return {budgetValue: p.budget, startTimeMs: fromISO(p.startTime)};\n}\n\nexport async function upgrade(\n  config: RawPluginBudgetConfig,\n  storage: DataStorage\n): Promise<Budget> {\n  const entries = await Promise.all(\n    Object.keys(config.plugins).map(async (key) => {\n      const id = pluginIdFromString(key);\n      const declaration = await getPluginDeclaration(id, storage);\n      if (id == null) {\n        throw new Error(`No available plugin with id ${id}`);\n      }\n      const prefix = declaration.nodePrefix;\n      const periods = config.plugins[id].map(upgradeRawPeriod);\n      return {prefix, periods};\n    })\n  );\n  return {entries, intervalLength: config.intervalLength};\n}\n","// @flow\nimport * as pluginId from \"./pluginId\";\nimport * as P from \"../util/combo\";\n\nexport type RawInstanceConfig = {|\n  // Plugin identifier, like `sourcecred/identity`. Version number is\n  // implicit from the SourceCred version. This is a stopgap until we have\n  // a plugin system that admits external, dynamically loaded\n  // dependencies.\n  +bundledPlugins: $ReadOnlyArray<pluginId.PluginId>,\n|};\n\nexport const rawParser: P.Parser<RawInstanceConfig> = P.object({\n  bundledPlugins: P.array(pluginId.parser),\n});\n","// @flow\n\n// This module reimplements Node's `require(\"path\").posix.normalize`\n// function, so that it can be bundled in the browser.\n//\n// The code is copied directly from the Node implementation in\n// `lib/path.js` at Git commit e0395247c899af101f8a1f76a8554be1ff14040a.\n// The code being copied is published under the MIT License.\n//\n// The `normalize` function and its transitive dependencies are\n// included. Flow types have been added where necessary, and the code\n// has been run through Prettier. Declarations with `var` have been\n// changed to `let` or `const`. Added comments are marked with `NOTE`.\n// The rest of the code is verbatim except where noted.\n\n// NOTE(@wchargin): The following documentation comment is adapted from\n// the Node documentation in `doc/api/path.md` (at the aforementioned\n// Git commit).\n\n/**\n * Normalize the given POSIX path, resolving \"..\" and \".\" segments.\n *\n * When multiple, sequential forward slashes are found, they are\n * replaced by a single forward slash. A trailing forward slash is\n * preserved if present, but not added if absent.\n *\n * If the path is a zero-length string, \".\" is returned, representing\n * the current working directory.\n *\n * A `TypeError` is thrown if `path` is not a string.\n */\nexport default function normalize(path: string): string {\n  assertPath(path);\n\n  if (path.length === 0) return \".\";\n\n  const isAbsolute = path.charCodeAt(0) === CHAR_FORWARD_SLASH;\n  const trailingSeparator =\n    path.charCodeAt(path.length - 1) === CHAR_FORWARD_SLASH;\n\n  // Normalize the path\n  path = normalizeString(path, !isAbsolute, \"/\", isPosixPathSeparator);\n\n  if (path.length === 0 && !isAbsolute) path = \".\";\n  if (path.length > 0 && trailingSeparator) path += \"/\";\n\n  if (isAbsolute) return \"/\" + path;\n  return path;\n}\n\nconst CHAR_DOT: number = 46;\nconst CHAR_FORWARD_SLASH: number = 47;\n\nfunction assertPath(path: string) {\n  if (typeof path !== \"string\") {\n    // NOTE(@wchargin): The exact error text used here has been changed\n    // from the Node version to simplify the implementation.\n    throw new TypeError(\"Path must be a string. Received \" + String(path));\n  }\n}\n\nfunction isPosixPathSeparator(code: number): boolean {\n  return code === CHAR_FORWARD_SLASH;\n}\n\n// Resolves . and .. elements in a path with directory names\n// NOTE(@wchargin): This function does not do exactly what the preceding\n// comment (from the Node source) suggests. For instance, `/a/b` becomes\n// `a/b`. Caveat lector.\n// NOTE(@wchargin): PRECONDITION(A): `path` must not be empty.\n// NOTE(@wchargin): PRECONDITION(B): `separator` must be \"/\" or \"\\\\\".\n// NOTE(@wchargin): PRECONDITION(C): `isPathSeparator` must return\n//   `true` given `separator.charCodeAt(0)`.\n// NOTE(@wchargin): PRECONDITION(D): `isPathSeparator` must return\n//   `true` given `CHAR_FORWARD_SLASH`.\nfunction normalizeString(\n  path: string,\n  allowAboveRoot: boolean,\n  separator: string,\n  isPathSeparator: (code: number) => boolean\n): string {\n  // NOTE(@wchargin): INVARIANT(E): `res` does not end with `separator`.\n  //   Proof: By induction, at initialization and at every assignment to\n  //   `res`. The base case holds because `res` is empty and `separator`\n  //   is not, by PRECONDITION(B). Assignments will be justified inline.\n  // NOTE(@wchargin):  INVARIANT(F): `res` does not contain two\n  //   consecutive separators. Proof: By induction, at initialization and\n  //   at every assignment to `res`. The base case is immediate.\n  //   Assignments will be justified inline.\n  let res = \"\";\n  let lastSegmentLength = 0;\n  // NOTE(@wchargin): INVARIANT(G): `lastSlash` is always an integer,\n  //   and `i` is always an integer. Proof: By induction. The initial\n  //   values of each are integers. The only assignment to `i` is to\n  //   increment it (`++i` in the loop declaration), which preserves\n  //   integrality. The only reassignment to `lastSlash` is to assign it\n  //   the value of `i`, which is known by induction to be an integer.\n  // NOTE(@wchargin): INVARIANT(H): Once the loop index `i` is\n  //   initialized, it holds that `lastSlash <= i`. Proof: By induction,\n  //   at initialization of `i` and at every assignment to `i` or\n  //   `lastSlash`. The base case is clear: `i` is initialized to `0`,\n  //   at which point `lastSlash` is `-1`. The only assignment to `i` is\n  //   `++i`, which preserves the invariant. The only assignments to\n  //   `lastSlash` are to set its value to `i`, which also preserve the\n  //   invariant.\n  let lastSlash = -1;\n  let dots = 0;\n  let code: number;\n  // NOTE(@wchargin): INVARIANT(I): Loop invariant:\n  //   `path.slice(lastSlash + 1, i)` does not contain a `separator`\n  //   (once `i` has been initialized). We refer to this expression as\n  //   \"the slice\". Proof: By induction: at initialization of `i`, and\n  //   at every assignment to `lastSlash`, `i`, or `path`. The base case\n  //   is clear: initially, the slice has domain `(0, 0)`, so is empty.\n  //   Assignments will be justified inline.\n  // NOTE(@wchargin): LEMMA(J): If `lastSlash` is assigned the value `i`\n  //   and neither `lastSlash` nor `i` nor `path` is modified before the\n  //   next iteration of the loop, then INVARIANT(I) is preserved both\n  //   (a) at the assignment and (b) at the iteration boundary. Proof:\n  //   At the assignment, the slice has domain `(i + 1, i)`, so is\n  //   empty. After `++i`, the slice has domain `(i + 1, i + 1)`, which\n  //   is still empty. The empty string does not contain a `separator`,\n  //   because `separator` is non-empty by PRECONDITION(B). This is\n  //   sufficient to maintain the INVARIANT(I).\n  // NOTE(@wchargin): INVARIANT(K): At the top of the loop,\n  //   `lastSlash < i`. Proof: By cases on the iteration of the loop.\n  //   For the first iteration of the loop, `lastSlash === -1` and\n  //   `i === 0`. For subsequent iterations, note that INVARIANT(H) held\n  //   at the bottom of the previous iteration of the loop, before `i`\n  //   was incremented: that is, the previous value of `lastSlash` was\n  //   less than or equal to the previous value of `i`. Since then,\n  //   `lastSlash` has not been reassigned, and `i` has been\n  //   incremented, so it follows that `lastSlash <= i - 1`, and\n  //   therefore `lastSlash < i`.\n  for (let i = 0; i <= path.length; ++i) {\n    if (i < path.length) code = path.charCodeAt(i);\n    // NOTE(@wchargin): The following cast is required because `code`\n    //   could in principle be uninitialized. However, PRECONDITION(A)\n    //   requires that the input be non-empty, which means that the\n    //   above guard `if (i < path.length)` will at some point have\n    //   taken the `true` branch, which means that `code` will have been\n    //   assigned.\n    // NOTE(@wchargin): The `then`-branch has been changed from `break;`\n    //   to `return res;` to help Flow deduce that, after this block,\n    //   `code` must be initialized. (The change is semantics-preserving\n    //   because the statement after the loop is to `return res;`.)\n    else if (isPathSeparator((code: any))) return res;\n    else code = CHAR_FORWARD_SLASH;\n\n    if (isPathSeparator(code)) {\n      if (lastSlash === i - 1 || dots === 1) {\n        // NOOP\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (\n          res.length < 2 ||\n          lastSegmentLength !== 2 ||\n          res.charCodeAt(res.length - 1) !== CHAR_DOT ||\n          res.charCodeAt(res.length - 2) !== CHAR_DOT\n        ) {\n          if (res.length > 2) {\n            const lastSlashIndex = res.lastIndexOf(separator);\n            // NOTE(@wchargin): The `else`-branch of this `if`-statement\n            //   is not reachable. See that branch for a proof. (The\n            //   coverage pragma was added and is not present in the\n            //   original Node source.)\n            // istanbul ignore else\n            if (lastSlashIndex !== res.length - 1) {\n              if (lastSlashIndex === -1) {\n                // NOTE(@wchargin): JUSTIFICATION: This assignment\n                //   trivially preserves INVARIANT(E) and INVARIANT(F).\n                res = \"\";\n                lastSegmentLength = 0;\n              } else {\n                // NOTE(@wchargin): JUSTIFICATION: This assignment\n                // preserves INVARIANT(E):\n                //     - By control flow, we know that\n                //       `lastSlashIndex !== -1`.\n                //     - By definition of `lastIndexOf`, this means that\n                //       `res` contains a `separator` at index\n                //       `lastSlashIndex`.\n                //     - By INVARIANT(F), `res` does not contain two\n                //       consecutive `separator`s. Therefore, `res` does\n                //       not contain a `separator` at index\n                //       `lastSlashIndex - 1`.\n                //     - Therefore, the new value for `res` does not\n                //       contain a `separator` at `lastSlashIndex - 1`,\n                //       so it does not end with a `separator`.\n                // NOTE(@wchargin): JUSTIFICATION: This assignment\n                //   preserves INVARIANT(F). By INVARIANT(F), we know\n                //   inductively that `res` does not contain two\n                //   consecutive `separator`s. It is immediate that no\n                //   slice of `res` contains two consecutive\n                //   `separator`s.\n                res = res.slice(0, lastSlashIndex);\n                lastSegmentLength = res.length - 1 - res.lastIndexOf(separator);\n              }\n              // NOTE(@wchargin): JUSTIFICATION: This assignment\n              //   preserves INVARIANT(I) by LEMMA(J).\n              lastSlash = i;\n              dots = 0;\n              // NOTE(@wchargin): JUSTIFICATION: This loop boundary\n              //   preserves INVARIANT(I) by LEMMA(J).\n              continue;\n            } else {\n              // NOTE(@wchargin): This `else`-branch was added by\n              //   @wchargin; it is not present in the original Node\n              //   source. It is unreachable. Proof: INVARIANT(E)\n              //   indicates that `res` does not end in a `separator`,\n              //   which means that `lastSlashIndex !== res.length - 1`,\n              //   which is the guard for the enclosing `if`-statement.\n              throw new Error(\n                \"normalize: invariant violation: \" +\n                  JSON.stringify({path, allowAboveRoot, separator})\n              );\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            // NOTE(@wchargin): JUSTIFICATION: This assignment trivially\n            //   preserves INVARIANT(E) and INVARIANT(F).\n            res = \"\";\n            lastSegmentLength = 0;\n            // NOTE(@wchargin): JUSTIFICATION: This assignment preserves\n            //   INVARIANT(I) by LEMMA(J).\n            lastSlash = i;\n            dots = 0;\n            // NOTE(@wchargin): JUSTIFICATION: This loop boundary\n            //   preserves INVARIANT(I) by LEMMA(J).\n            continue;\n          }\n        }\n        if (allowAboveRoot) {\n          // NOTE(@wchargin): JUSTIFICATION: This assignment preserves\n          //   INVARIANT(E) because `separator` is either \"/\" or \"\\\\\" by\n          //   PRECONDITION(B), and so the new value of `res`, which\n          //   ends with \".\", does not end with `separator`.\n          // NOTE(@wchargin): JUSTIFICATION: This assignment preserves\n          //   INVARIANT(F). We know by INVARIANT(E) that `res` does not\n          //   end with a separator. Therefore, appending a `separator`\n          //   does not introduce two consecutive `separator`s, and\n          //   appending two copies of \".\" does not introduce two\n          //   consecutive separators because, by PRECONDITION(B),\n          //   `separator` is either \"/\" or \"\\\\\" and so does not contain\n          //   \".\".\n          if (res.length > 0) res += `${separator}..`;\n          // NOTE(@wchargin): JUSTIFICATION: This assignment preserves\n          //   INVARIANT(E) and INVARIANT(F) because `separator` is\n          //   either \"/\" or \"\\\\\" by PRECONDITION(B), and so does not\n          //   appear in the new value for `res` at all (either at the\n          //   end or twice consecutively).\n          else res = \"..\";\n          lastSegmentLength = 2;\n        }\n      } else {\n        // NOTE(@wchargin): JUSTIFICATION: This assignment preserves\n        // INVARIANT(D) and INVARIANT(E):\n        //   - By INVARIANT(K), `lastSlash` was less than `i` at the top\n        //     of the loop body. By control flow, neither `lastSlash`\n        //     nor `i` has since been reassigned, so it still holds that\n        //     `lastSlash < i`.\n        //   - At this point in the loop body, we have not assigned to\n        //     `lastSlash`.\n        //   - By control flow, we also have `lastSlash !== i - 1`.\n        //   - By INVARIANT(G), both `lastSlash` and `i` are integers.\n        //   - Therefore, `lastSlash < i - 1`, so `lastSlash + 1 < i`.\n        //     This indicates that the domain of the slice is nonempty;\n        //     we still must show that it is within the bounds of the\n        //     string being sliced.\n        //   - By the loop guard, `i <= path.length`.\n        //   - Therefore, `lastSlash + 1 < path.length`.\n        //   - Therefore, `path.slice(lastSlash + 1, i)` is nonempty.\n        //   - By INVARIANT(I), this slice does not contain a\n        //     `separator`.\n        //   - Because the slice is nonempty, the new value of `res`\n        //     will end in the last character of the slice, which is not a\n        //     `separator`, so INVARIANT(E) is preserved.\n        //   - Because `res` does not end with a separator, appending a\n        //     separator to `res` does not introduce two consecutive\n        //     separators. Because the slice does not contain a\n        //     separator, subsequently appending the slice also does not\n        //     introduce two consecutive separators, so INVARIANT(F) is\n        //     preserved.\n        if (res.length > 0) res += separator + path.slice(lastSlash + 1, i);\n        // NOTE(@wchargin): JUSTIFICATION: This assignment preserves\n        //   INVARIANT(E) and INVARIANT(F), because we know from\n        //   INVARIANT(I) that the slice does not contain a separator at\n        //   all, so the new value of `res` neither ends in a separator\n        //   nor contains two consecutive separators.\n        else res = path.slice(lastSlash + 1, i);\n        lastSegmentLength = i - lastSlash - 1;\n      }\n      // NOTE(@wchargin): JUSTIFICATION: This assignment preserves\n      //   INVARIANT(I) by LEMMA(J).\n      lastSlash = i;\n      dots = 0;\n      // NOTE(@wchargin): JUSTIFICATION: This loop boundary preserves\n      //   INVARIANT(I) by LEMMA(J).\n    } else if (code === CHAR_DOT && dots !== -1) {\n      ++dots;\n      // NOTE(@wchargin): JUSTIFICATION: This loop boundary preserves\n      //   INVARIANT(I). We know by that `path.slice(lastSlash + 1, i)`\n      //   does not contain a separator, by induction. We know from\n      //   control flow that `code` is `CHAR_DOT`, so `path[i]` is not a\n      //   separator. Thus, `path.slice(lastSlash + 1, i + 1)` does not\n      //   contain a separator, so INVARIANT(I) holds.\n    } else {\n      dots = -1;\n      // NOTE(@wchargin): JUSTIFICATION: This loop boundary preserves\n      // INVARIANT(I):\n      //   - We know that `path.slice(lastSlash + 1, i)` does not\n      //     contain a separator, by induction.\n      //   - We know from control flow that `!isPathSeparator(code)`.\n      //   - We also know from control flow that `code` is either\n      //     `path.charCodeAt(i)` or `CHAR_FORWARD_SLASH`.\n      //   - PRECONDITION(D) shows that `code` cannot be\n      //     `CHAR_FORWARD_SLASH`, because `!isPathSeparator(code)`, so\n      //     `code` must be `path.charCodeAt(i)`.\n      //   - PRECONDITION(C) shows that `code` cannot be\n      //     `separator.charCodeAt(0)`.\n      //   - This implies that `path[i]` is not `separator`.\n      //   - Thus, `path.slice(lastSlash + 1, i + 1)` does not contain a\n      //     separator, so INVARIANT(I) holds.\n    }\n  }\n  return res;\n}\n","// @flow\n\nimport {DataStorage, WritableDataStorage} from \"./index\";\nimport normalize from \"../../util/pathNormalize\";\nimport {join as pathJoin, isAbsolute} from \"path\";\nimport fetch from \"cross-fetch\";\n\n/**\n * This class serves as a simple wrapper for http GET requests using fetch.\n */\nexport class OriginStorage implements DataStorage {\n  _base: string;\n  constructor(base: string) {\n    this._base = normalize(base);\n  }\n\n  /**\n   * This get method will error if a non-200 or 300-level status was returned.\n   */\n  async get(resource: string): Promise<Uint8Array> {\n    const path = normalize(pathJoin(this._base, resource));\n    if (\n      !path.startsWith(this._base) &&\n      (path.startsWith(\"..\") || isAbsolute(path) || this._base !== \".\")\n    )\n      throw new Error(\n        `Path traversal is not allowed. ${path} is not a subpath of ${this._base}`\n      );\n    const result = await fetch(path);\n    if (!result.ok) {\n      const error = new Error(\n        `Error fetching ${resource}: ${result.status} ${result.statusText}`\n      );\n      error.number = result.status;\n      throw error;\n    }\n\n    return new Uint8Array(await result.arrayBuffer());\n  }\n}\n\nexport class PostableOriginStorage\n  extends OriginStorage\n  implements WritableDataStorage {\n  _headers: {[string]: string | number};\n\n  constructor(base: string, headers: {[string]: string | number}) {\n    super(base);\n    this._headers = headers;\n  }\n\n  async set(path: string, body: Uint8Array): Promise<void> {\n    let payload;\n    if (typeof window !== \"undefined\") {\n      payload = new Blob([body.buffer]);\n    } else {\n      payload = body.buffer;\n    }\n\n    await fetch(path, {\n      headers: this._headers,\n      method: \"POST\",\n      body: payload,\n    });\n  }\n}\n\nexport const createPostableLedgerStorage = (\n  base: string\n): PostableOriginStorage => {\n  return new PostableOriginStorage(base, {\n    Accept: \"text/plain\",\n    \"Content-Type\": \"text/plain\",\n  });\n};\n","// @flow\n\nimport type {GrainIntegrationFunction} from \"../core/ledger/grainIntegration\";\nimport * as C from \"../util/combo\";\n\nimport {csvIntegration} from \"@sourcecred/grain-integration-csv\";\n\nexport type GrainIntegration = {|\n  name: string,\n  function: GrainIntegrationFunction,\n|};\n\ntype AllowedDeclarations = {[pluginKey: string]: GrainIntegrationFunction};\n\nconst allowedDeclarations: AllowedDeclarations = {\n  \"csv\": csvIntegration,\n};\n\nexport function bundledGrainIntegrations(\n  integrationKey: string\n): GrainIntegrationFunction {\n  const integration = allowedDeclarations[integrationKey];\n  if (!integration)\n    throw new Error(\n      \"grain integration not found; enter a valid `integration` value in config/grain.json\"\n    );\n  return integration;\n}\n\nexport const parser: C.Parser<GrainIntegration> = C.fmap(\n  C.exactly([\"csv\"]),\n  (integrationKey) => ({\n    name: integrationKey,\n    function: bundledGrainIntegrations(integrationKey),\n  })\n);\n","// @flow\n\nimport * as C from \"../util/combo\";\nimport * as NullUtil from \"../util/null\";\nimport {\n  type AllocationPolicy,\n  type AllocationConfig,\n  policyConfigParser,\n  allocationConfigParser,\n} from \"../core/ledger/policies\";\nimport {type Name, parser as nameParser} from \"../core/identity/name\";\nimport {\n  type GrainIntegration,\n  parser as bundledGrainIntegrationParser,\n} from \"./bundledGrainIntegrations\";\n\nexport type RawGrainConfig = {|\n  +allocationPolicies: $ReadOnlyArray<AllocationConfig>,\n  +maxSimultaneousDistributions?: number,\n  +sinkIdentity?: Name,\n  +processDistributions?: boolean,\n  +integration?: GrainIntegration,\n|};\n\nexport type GrainConfig = {|\n  +allocationPolicies: $ReadOnlyArray<AllocationPolicy>,\n  +maxSimultaneousDistributions: number,\n  +sinkIdentity?: Name,\n  +processDistributions?: boolean,\n  +integration?: GrainIntegration,\n|};\n\nexport const rawParser: C.Parser<RawGrainConfig> = C.object(\n  {\n    allocationPolicies: C.array<AllocationConfig>(allocationConfigParser),\n  },\n  {\n    maxSimultaneousDistributions: C.number,\n    sinkIdentity: nameParser,\n    processDistributions: C.boolean,\n    integration: bundledGrainIntegrationParser,\n  }\n);\n\nexport const parser: C.Parser<GrainConfig> = C.fmap(\n  C.object(\n    {\n      allocationPolicies: C.array<AllocationPolicy>(policyConfigParser),\n    },\n    {\n      maxSimultaneousDistributions: C.number,\n      sinkIdentity: nameParser,\n      processDistributions: C.boolean,\n      integration: bundledGrainIntegrationParser,\n    }\n  ),\n  (config) => ({\n    ...config,\n    maxSimultaneousDistributions: NullUtil.orElse(\n      config.maxSimultaneousDistributions,\n      Infinity\n    ),\n  })\n);\n","// @flow\n\nimport {ReadOnlyInstance} from \"./instance\";\nimport {type CredrankInput} from \"../main/credrank\";\nimport {\n  type WeightedGraph,\n  type WeightedGraphJSON,\n  fromJSON as weightedGraphFromJSON,\n} from \"../../core/weightedGraph\";\nimport {type GraphInput} from \"../main/graph\";\nimport {type GrainInput} from \"../main/grain\";\nimport {type AnalysisInput} from \"../main/analysis\";\nimport {\n  type WeightsT,\n  parser as weightsParser,\n  empty as emptyWeights,\n} from \"../../core/weights\";\nimport {join as pathJoin} from \"path\";\nimport {\n  loadJson,\n  loadFileWithDefault,\n  loadJsonWithDefault,\n} from \"../../util/storage\";\nimport {\n  CredGraph,\n  parser as credGraphParser,\n} from \"../../core/credrank/credGraph\";\nimport {CredGrainView, credGrainViewParser} from \"../../core/credGrainView\";\nimport {Ledger} from \"../../core/ledger/ledger\";\nimport {\n  parser as dependenciesParser,\n  type DependenciesConfig,\n} from \"../dependenciesConfig\";\nimport {type Budget} from \"../../core/mintBudget\";\nimport {\n  rawParser as pluginBudgetParser,\n  upgrade as pluginBudgetUpgrader,\n} from \"../pluginBudgetConfig\";\nimport {\n  rawParser as rawConfigParser,\n  type RawInstanceConfig,\n} from \"../rawInstanceConfig\";\nimport {NetworkStorage} from \"../../core/storage/networkStorage\";\nimport {OriginStorage} from \"../../core/storage/originStorage\";\nimport {ZipStorage} from \"../../core/storage/zip\";\nimport {DataStorage} from \"../../core/storage\";\nimport {type GrainConfig, parser as grainConfigParser} from \"../grainConfig\";\nimport {\n  parser as currencyConfigParser,\n  type CurrencyDetails,\n} from \"../currencyConfig\";\nimport {defaultCurrencyConfig} from \"../currencyConfig\";\nimport {\n  type PersonalAttributionsConfig,\n  personalAttributionsConfigParser,\n} from \"../config/personalAttributionsConfig\";\nimport * as Combo from \"../../util/combo\";\n\nexport const getNetworkReadInstance = (base: string): ReadInstance =>\n  new ReadInstance(new NetworkStorage(base));\nexport const getRawGithubReadInstance = (\n  organization: string,\n  repository: string,\n  branch: string\n): ReadInstance =>\n  new ReadInstance(\n    new NetworkStorage(\n      `https://raw.githubusercontent.com/${organization}/${repository}/${branch}/`\n    )\n  );\nexport const getOriginReadInstance = (base: string): ReadInstance =>\n  new ReadInstance(new OriginStorage(base));\n\nconst DEPENDENCIES_PATH: $ReadOnlyArray<string> = [\n  \"config\",\n  \"dependencies.json\",\n];\nconst WEIGHT_OVERRIDES_PATH: $ReadOnlyArray<string> = [\n  \"config\",\n  \"weights.json\",\n];\nconst BUDGET_PATH: $ReadOnlyArray<string> = [\"config\", \"pluginBudgets.json\"];\nconst GRAIN_PATH: $ReadOnlyArray<string> = [\"config\", \"grain.json\"];\nconst CURRENCY_PATH: $ReadOnlyArray<string> = [\n  \"config\",\n  \"currencyDetails.json\",\n];\nconst PERSONAL_ATTRIBUTIONS_PATH: $ReadOnlyArray<string> = [\n  \"config\",\n  \"personalAttributions.json\",\n];\nconst RAW_INSTANCE_CONFIG_PATH: $ReadOnlyArray<string> = [\"sourcecred.json\"];\nconst LEDGER_PATH: $ReadOnlyArray<string> = [\"data\", \"ledger.json\"];\nconst CREDGRAPH_PATH: $ReadOnlyArray<string> = [\"output\", \"credGraph\"];\nconst CREDGRAINVIEW_PATH: $ReadOnlyArray<string> = [\"output\", \"credGrainView\"];\nconst GRAPHS_DIRECTORY: $ReadOnlyArray<string> = [\"output\", \"graphs\"];\nconst GRAPHS_PATH: $ReadOnlyArray<string> = [\"graph\"];\n\nconst JSON_SUFFIX: string = \".json\";\nconst ZIP_SUFFIX: string = \"\";\n\n/**\nThis is an Instance implementation that reads and writes using relative paths\non the given base URL. The base URL given should end with a trailing slash.\n */\nexport class ReadInstance implements ReadOnlyInstance {\n  _storage: DataStorage;\n  _zipStorage: ZipStorage;\n\n  constructor(storage: DataStorage) {\n    this._storage = storage;\n    this._zipStorage = new ZipStorage(this._storage);\n  }\n\n  async readGraphInput(): Promise<GraphInput> {\n    throw \"not yet implemented\";\n  }\n\n  async readCredrankInput(): Promise<CredrankInput> {\n    const [\n      pluginGraphs,\n      ledger,\n      weightOverrides,\n      dependencies,\n      pluginsBudget,\n      personalAttributions,\n    ] = await Promise.all([\n      this.readPluginGraphs(),\n      this.readLedger(),\n      this.readWeightOverrides(),\n      this.readDependencies(),\n      this.readPluginsBudget(),\n      this.readPersonalAttributions(),\n    ]);\n    return {\n      pluginGraphs,\n      ledger,\n      weightOverrides,\n      dependencies,\n      pluginsBudget,\n      personalAttributions,\n    };\n  }\n\n  async readGrainInput(): Promise<GrainInput> {\n    const [\n      credGraph,\n      ledger,\n      grainConfig,\n      currencyDetails,\n    ] = await Promise.all([\n      this.readCredGraph(),\n      this.readLedger(),\n      this.readGrainConfig(),\n      this.readCurrencyDetails(),\n    ]);\n    return {\n      credGraph,\n      ledger,\n      grainConfig,\n      currencyDetails,\n    };\n  }\n\n  async readAnalysisInput(): Promise<AnalysisInput> {\n    const [credGraph, ledger] = await Promise.all([\n      this.readCredGraph(),\n      this.readLedger(),\n    ]);\n    return {\n      credGraph,\n      ledger,\n      featureFlags: {},\n    };\n  }\n\n  async readWeightedGraphForPlugin(pluginId: string): Promise<WeightedGraph> {\n    const outputPath = pathJoin(\n      this.createPluginGraphDirectory(pluginId),\n      ...GRAPHS_PATH\n    );\n    const graphJSON = await loadJson(\n      this._zipStorage,\n      outputPath,\n      ((Combo.raw: any): Combo.Parser<WeightedGraphJSON>)\n    );\n    return weightedGraphFromJSON(graphJSON);\n  }\n\n  async readCredGraph(): Promise<CredGraph> {\n    const credGraphPath = pathJoin(...CREDGRAPH_PATH);\n    return await loadJson(\n      this._zipStorage,\n      credGraphPath + ZIP_SUFFIX,\n      credGraphParser\n    ).catch(() =>\n      loadJson(this._storage, credGraphPath + JSON_SUFFIX, credGraphParser)\n    );\n  }\n\n  async readCredGrainView(): Promise<CredGrainView> {\n    const path = pathJoin(...CREDGRAINVIEW_PATH);\n    return loadJson(\n      this._zipStorage,\n      path + ZIP_SUFFIX,\n      credGrainViewParser\n    ).catch(() =>\n      loadJson(this._storage, path + JSON_SUFFIX, credGrainViewParser)\n    );\n  }\n\n  async readLedger(): Promise<Ledger> {\n    const ledgerPath = pathJoin(...LEDGER_PATH);\n    return loadFileWithDefault(this._storage, ledgerPath, () =>\n      new Ledger().serialize()\n    ).then((result) => Ledger.parse(result));\n  }\n\n  async readGrainConfig(): Promise<GrainConfig> {\n    const grainConfigPath = pathJoin(...GRAIN_PATH);\n    return loadJson(this._storage, grainConfigPath, grainConfigParser);\n  }\n\n  async readCurrencyDetails(): Promise<CurrencyDetails> {\n    const currencyDetailsPath = pathJoin(...CURRENCY_PATH);\n    return loadJsonWithDefault(\n      this._storage,\n      currencyDetailsPath,\n      currencyConfigParser,\n      defaultCurrencyConfig\n    );\n  }\n\n  // Private Functions\n\n  async readRawInstanceConfig(): Promise<RawInstanceConfig> {\n    const pluginsConfigPath = pathJoin(...RAW_INSTANCE_CONFIG_PATH);\n    return loadJson(this._storage, pluginsConfigPath, rawConfigParser);\n  }\n\n  async readPersonalAttributions(): Promise<PersonalAttributionsConfig> {\n    const path = pathJoin(...PERSONAL_ATTRIBUTIONS_PATH);\n    return loadJsonWithDefault(\n      this._storage,\n      path,\n      personalAttributionsConfigParser,\n      () => []\n    );\n  }\n\n  async readPluginGraphs(): Promise<Array<WeightedGraph>> {\n    const instanceConfig = await this.readRawInstanceConfig();\n    const pluginNames = instanceConfig.bundledPlugins;\n    return await Promise.all(\n      pluginNames.map(async (name) => {\n        const outputDir = this.createPluginDirectory(GRAPHS_DIRECTORY, name);\n        const outputPath = pathJoin(outputDir, ...GRAPHS_PATH);\n        const graphJSON = await loadJson(\n          this._zipStorage,\n          outputPath + ZIP_SUFFIX,\n          ((Combo.raw: any): Combo.Parser<WeightedGraphJSON>)\n        ).catch(() =>\n          loadJson(\n            this._storage,\n            outputPath + JSON_SUFFIX,\n            ((Combo.raw: any): Combo.Parser<WeightedGraphJSON>)\n          )\n        );\n        return weightedGraphFromJSON(graphJSON);\n      })\n    );\n  }\n\n  async readWeightOverrides(): Promise<WeightsT> {\n    const weightsPath = pathJoin(...WEIGHT_OVERRIDES_PATH);\n    return loadJsonWithDefault(\n      this._storage,\n      weightsPath,\n      weightsParser,\n      emptyWeights\n    );\n  }\n\n  async readDependencies(): Promise<DependenciesConfig> {\n    const dependenciesPath = pathJoin(...DEPENDENCIES_PATH);\n    return loadJsonWithDefault(\n      this._storage,\n      dependenciesPath,\n      dependenciesParser,\n      () => []\n    );\n  }\n\n  async readPluginsBudget(): Promise<Budget | null> {\n    const budgetPath = pathJoin(...BUDGET_PATH);\n    const raw = await loadJsonWithDefault(\n      this._storage,\n      budgetPath,\n      pluginBudgetParser,\n      () => null\n    );\n    return raw ? await pluginBudgetUpgrader(raw, this._storage) : null;\n  }\n\n  createPluginDirectory(\n    components: $ReadOnlyArray<string>,\n    pluginId: string\n  ): string {\n    const idParts = pluginId.split(\"/\");\n    if (idParts.length !== 2) {\n      throw new Error(`Bad plugin name: ${pluginId}`);\n    }\n    const [pluginOwner, pluginName] = idParts;\n    const pathComponents = [...components, pluginOwner, pluginName];\n    return pathJoin(...pathComponents);\n  }\n\n  createPluginGraphDirectory(pluginId: string): string {\n    return this.createPluginDirectory(GRAPHS_DIRECTORY, pluginId);\n  }\n}\n","// @flow\n\nimport deepFreeze from \"deep-freeze\";\n\n// Exports for calling SourceCred code programmatically. Both the\n// structure and the contents of this API are experimental and subject\n// to change.\nimport * as discourseAddress from \"../../plugins/discourse/address\";\nimport * as discourseDeclaration from \"../../plugins/discourse/declaration\";\nimport * as discordDeclaration from \"../../plugins/discord/declaration\";\nimport * as discordUtils from \"../../plugins/discord/utils\";\n\nimport * as initiativesDeclaration from \"../../plugins/initiatives/declaration\";\nimport * as githubDeclaration from \"../../plugins/github/declaration\";\nimport * as githubEdges from \"../../plugins/github/edges\";\nimport * as githubNodes from \"../../plugins/github/nodes\";\nimport * as ethereumDeclaration from \"../../plugins/ethereum/declaration\";\nimport * as ethereumUtils from \"../../plugins/ethereum/utils\";\nimport {declarationParser} from \"../../analysis/pluginDeclaration\";\nimport {identityProposalsParser} from \"../../core/ledger/identityProposal\";\nimport {ConstructorPlugin} from \"../../plugins/external/plugin\";\nimport {coerce as coerceNameFromString} from \"../../core/identity/name\";\n\nimport * as address from \"../../core/address\";\nimport * as graph from \"../../core/graph\";\nimport * as weightedGraph from \"../../core/weightedGraph\";\nimport * as weights from \"../../core/weights\";\nimport * as graphToMarkovChain from \"../../core/algorithm/graphToMarkovChain\";\nimport * as markovChain from \"../../core/algorithm/markovChain\";\nimport * as credGraph from \"../../core/credrank/credGraph\";\nimport {CredGrainView} from \"../../core/credGrainView\";\nimport * as ledger from \"../../core/ledger/ledger\";\nimport * as ledgerUtils from \"../../core/ledger/utils\";\nimport * as grain from \"../../core/ledger/grain\";\nimport * as identity from \"../../core/identity\";\n\nimport * as manager from \"../ledgerManager\";\nimport * as storage from \"../../core/storage/github\";\nimport * as credrank from \"../main/credrank\";\nimport * as graphApi from \"../main/graph\";\nimport * as grainApi from \"../main/grain\";\nimport * as analysis from \"../main/analysis\";\nimport * as readInstance from \"../../api/instance/readInstance\";\n\nconst api = {\n  api: {\n    graph: graphApi,\n    credrank,\n    grain: grainApi,\n    analysis,\n  },\n  instance: {\n    readInstance,\n  },\n  core: {\n    address,\n    algorithm: {\n      markovChain,\n      graphToMarkovChain,\n    },\n    graph,\n    weightedGraph,\n    weights,\n    credGraph,\n    CredGrainView,\n  },\n  ledger: {\n    ledger,\n    identity,\n    grain,\n    utils: ledgerUtils,\n    manager,\n    storage,\n  },\n  plugins: {\n    ConstructorPlugin,\n    github: {\n      declaration: githubDeclaration,\n      edges: githubEdges,\n      nodes: githubNodes,\n    },\n    ethereum: {\n      declaration: ethereumDeclaration,\n      utils: ethereumUtils,\n    },\n    discourse: {\n      address: discourseAddress,\n      declaration: discourseDeclaration,\n    },\n    discord: {\n      declaration: discordDeclaration,\n      utils: discordUtils,\n    },\n    initiatives: {\n      declaration: initiativesDeclaration,\n    },\n    declarationParser,\n    identityProposalsParser,\n    coerceNameFromString,\n  },\n};\n\nexport default (deepFreeze(api): typeof api);\n","// @flow\n\nimport fs from \"fs-extra\";\n\n/**\n * Make a directory, if it doesn't already exist.\n */\nexport function mkdirx(path: string) {\n  try {\n    fs.mkdirSync(path);\n  } catch (e) {\n    if (e.code !== \"EEXIST\") {\n      throw e;\n    }\n  }\n}\n\n/**\n * Check if a directory is empty\n *\n * Will error if a path that resolves to anything other\n * than a directory is provided\n */\nexport function isDirEmpty(dirPath: string): boolean {\n  return fs.readdirSync(dirPath).length === 0;\n}\n","// @flow\n\n/**\n * Data types to describe a particular subset of GraphQL schemata.\n * Schemata represented by this module must satisfy these constraints:\n *\n *   - Every object must have an `id` field of primitive type.\n *   - Every field of an object must be either a primitive, a reference\n *     to a single (possibly nullable) object, or a _connection_ as\n *     described in the Relay cursor connections specification. In\n *     particular, no field may directly contain a list.\n *   - Interface types must be represented as unions of all their\n *     implementations.\n */\n\n// The name of a GraphQL type, like `Repository` or `Int`.\nexport type Typename = string;\n\n// The name of a GraphQL object field, like `name` or `pullRequests`.\nexport type Fieldname = string;\n\n// The database-wide unique ID of a GraphQL object.\nexport type ObjectId = string;\n\n// Description of a GraphQL schema. Types are represented as follows:\n//   - An object type is represented directly as an `OBJECT`.\n//   - A union type is represented directly as a `UNION`.\n//   - An interface type is represented as a `UNION` of all its\n//     implementations.\n//   - Scalars and enums may only occur as object fields, and are\n//     represented as `PRIMITIVE`s (except for `ID`s).\n//   - Connections are supported as object fields, but arbitrary lists\n//     are not.\n//\n// Primitive and enum fields on an object type may optionally be\n// annotated with their representations.\n//\n// To accommodate schemata where some object types do not have IDs,\n// objects may have \"nested\" fields of primitive or node-reference type.\n// These may be nested to depth exactly 1. Suppose that `Foo` is an\n// object type that includes `bar: Bar!`, but `Bar` is an object type\n// without an `id`. Then `Bar` may not be a first-class type, but `Foo`\n// may pull properties off of it using\n//\n//     bar: nested({x: primitive(), y: node(\"Baz\")});\n//\n// The property \"bar\" in the above example is called a _nested_\n// property, and its fields \"x\" and \"y\" are called _eggs_. (The nest\n// contains the eggs.)\nexport type Schema = {+[Typename]: NodeType};\nexport type NodeType =\n  | {|+type: \"SCALAR\", +representation: \"string\" | \"number\" | \"boolean\"|}\n  | {|+type: \"ENUM\", +values: {|+[string]: true|}|}\n  | {|+type: \"OBJECT\", +fields: {|+[Fieldname]: FieldType|}|}\n  | {|+type: \"UNION\", +clauses: {|+[Typename]: true|}|};\n\nexport type FieldType =\n  | IdFieldType\n  | PrimitiveFieldType\n  | NodeFieldType\n  | ConnectionFieldType\n  | NestedFieldType;\nexport type IdFieldType = {|+type: \"ID\"|};\nexport type PrimitiveFieldType = {|\n  +type: \"PRIMITIVE\",\n  +annotation: null | PrimitiveTypeAnnotation,\n|};\nexport type PrimitiveTypeAnnotation = {|\n  +nonNull: boolean,\n  +elementType: Typename,\n|};\nexport type NodeFieldType = {|\n  +type: \"NODE\",\n  +elementType: Typename,\n  +fidelity: Fidelity,\n|};\nexport type ConnectionFieldType = {|\n  +type: \"CONNECTION\",\n  +elementType: Typename,\n  +fidelity: Fidelity,\n|};\nexport type NestedFieldType = {|\n  +type: \"NESTED\",\n  +eggs: {+[Fieldname]: PrimitiveFieldType | NodeFieldType},\n|};\n\n// A field is _faithful_ if selecting its `__typename` and `id` will\n// always yield the correct `__typename` for the node of the given ID.\n// In theory, this should always be the case, but some remote schemas\n// are broken. For details, see:\n//\n//   - https://github.com/sourcecred/sourcecred/issues/996\n//   - https://github.com/sourcecred/sourcecred/issues/998\n//\n// For an unfaithful field, the `actualTypenames` property lists all the\n// types of objects that can _actually_ be returned when the field is\n// queried. (This set only affects generated Flow types, not runtime\n// semantics.) These must all be object types.\n//\n// It is always sound to represent an actually-faithful field as\n// unfaithful, but doing so may incur additional queries. Marking a type\n// as faithful should be seen as an optimization that may be performed\n// only when the server is abiding by its contract for that field.\nexport type Fidelity =\n  | {|+type: \"FAITHFUL\"|}\n  | {|+type: \"UNFAITHFUL\", actualTypenames: {|+[Typename]: true|}|};\n\nexport function faithful(): Fidelity {\n  return {type: \"FAITHFUL\"};\n}\n\nexport function unfaithful(\n  actualTypenames: $ReadOnlyArray<Typename>\n): Fidelity {\n  const actualTypenamesObject: {|[Typename]: true|} = ({}: any);\n  for (const t of actualTypenames) {\n    actualTypenamesObject[t] = true;\n  }\n  return {type: \"UNFAITHFUL\", actualTypenames: actualTypenamesObject};\n}\n\n// Every object must have exactly one `id` field, and it must have this\n// name.\nconst ID_FIELD_NAME = \"id\";\n\nexport function schema(types: {[Typename]: NodeType}): Schema {\n  function assertKind(\n    path,\n    elementTypename,\n    validKinds,\n    {isFidelity = false} = {}\n  ) {\n    const self =\n      (isFidelity ? \"unfaithful typenames list of \" : \"\") +\n      `field ${path.map((x) => JSON.stringify(x)).join(\"/\")}`;\n    const elementType = types[elementTypename];\n    if (elementType == null) {\n      throw new Error(`${self} has unknown type: \"${elementTypename}\"`);\n    }\n    if (!validKinds.includes(elementType.type)) {\n      throw new Error(\n        `${self} has invalid type \"${elementTypename}\" ` +\n          `of kind \"${elementType.type}\"`\n      );\n    }\n  }\n  function validateFidelity(path, fidelity) {\n    switch (fidelity.type) {\n      case \"FAITHFUL\":\n        break;\n      case \"UNFAITHFUL\":\n        for (const typename of Object.keys(fidelity.actualTypenames)) {\n          assertKind(path, typename, [\"OBJECT\"], {isFidelity: true});\n        }\n        break;\n      // istanbul ignore next: unreachable per Flow\n      default:\n        throw new Error((fidelity.type: empty));\n    }\n  }\n  const result = {};\n  for (const typename of Object.keys(types)) {\n    const type = types[typename];\n    switch (type.type) {\n      case \"SCALAR\":\n        result[typename] = {\n          type: \"SCALAR\",\n          representation: type.representation,\n        };\n        break;\n      case \"ENUM\":\n        result[typename] = {type: \"ENUM\", values: {...type.values}};\n        break;\n      case \"OBJECT\":\n        for (const fieldname of Object.keys(type.fields)) {\n          const field = type.fields[fieldname];\n          switch (field.type) {\n            case \"ID\":\n              // Nothing to check.\n              break;\n            case \"PRIMITIVE\":\n              if (field.annotation != null) {\n                assertKind(\n                  [typename, fieldname],\n                  field.annotation.elementType,\n                  [\"SCALAR\", \"ENUM\"]\n                );\n              }\n              break;\n            case \"NODE\":\n              assertKind([typename, fieldname], field.elementType, [\n                \"OBJECT\",\n                \"UNION\",\n              ]);\n              validateFidelity([typename, fieldname], field.fidelity);\n              break;\n            case \"CONNECTION\":\n              assertKind([typename, fieldname], field.elementType, [\n                \"OBJECT\",\n                \"UNION\",\n              ]);\n              validateFidelity([typename, fieldname], field.fidelity);\n              break;\n            case \"NESTED\":\n              for (const eggName of Object.keys(field.eggs)) {\n                const egg = field.eggs[eggName];\n                switch (egg.type) {\n                  case \"PRIMITIVE\":\n                    if (egg.annotation != null) {\n                      assertKind(\n                        [typename, fieldname, eggName],\n                        egg.annotation.elementType,\n                        [\"SCALAR\", \"ENUM\"]\n                      );\n                    }\n                    break;\n                  case \"NODE\":\n                    assertKind(\n                      [typename, fieldname, eggName],\n                      egg.elementType,\n                      [\"OBJECT\", \"UNION\"]\n                    );\n                    validateFidelity(\n                      [typename, fieldname, eggName],\n                      egg.fidelity\n                    );\n                    break;\n                  // istanbul ignore next: unreachable per Flow\n                  default:\n                    throw new Error((egg.type: empty));\n                }\n              }\n              break;\n            // istanbul ignore next: unreachable per Flow\n            default:\n              throw new Error((field.type: empty));\n          }\n        }\n        result[typename] = {type: \"OBJECT\", fields: {...type.fields}};\n        break;\n      case \"UNION\":\n        for (const clause of Object.keys(type.clauses)) {\n          const clauseType = types[clause];\n          if (clauseType == null) {\n            throw new Error(\n              `union has unknown clause: \"${typename}\"/\"${clause}\"`\n            );\n          }\n          if (clauseType.type !== \"OBJECT\") {\n            // The GraphQL spec doesn't permit unions of interfaces or\n            // other unions (or primitives). This is nice, because it\n            // means that we don't have to worry about ill-founded\n            // unions.\n            throw new Error(\n              `union has non-object type clause: \"${typename}\"/\"${clause}\"`\n            );\n          }\n        }\n        result[typename] = {type: \"UNION\", clauses: {...type.clauses}};\n        break;\n      // istanbul ignore next\n      default:\n        throw new Error((type.type: empty));\n    }\n  }\n  return result;\n}\n\nexport function scalar(\n  representation: \"string\" | \"number\" | \"boolean\"\n): NodeType {\n  return {type: \"SCALAR\", representation};\n}\n\nfunction enum_(values: $ReadOnlyArray<string>): NodeType {\n  const valuesObject: {|[string]: true|} = ({}: any);\n  for (const v of values) {\n    valuesObject[v] = true;\n  }\n  return {type: \"ENUM\", values: valuesObject};\n}\nexport {enum_ as enum};\n\nexport function object(fields: {[Fieldname]: FieldType}): NodeType {\n  for (const fieldname of Object.keys(fields)) {\n    const field = fields[fieldname];\n    if (fieldname === \"__typename\") {\n      throw new Error(\"reserved field name: \" + fieldname);\n    }\n    if (field.type === \"ID\" && fieldname !== ID_FIELD_NAME) {\n      throw new Error(`invalid ID field with name \"${fieldname}\"`);\n    }\n  }\n  if (fields[ID_FIELD_NAME] == null) {\n    throw new Error(`expected ID field with name \"${ID_FIELD_NAME}\"`);\n  }\n  if (fields[ID_FIELD_NAME].type !== \"ID\") {\n    throw new Error(`field \"${ID_FIELD_NAME}\" must be an ID field`);\n  }\n  // Workaround for <https://github.com/facebook/flow/issues/7128>.\n  const exactFields: {|[Fieldname]: FieldType|} = ({...fields}: any);\n  return {type: \"OBJECT\", fields: exactFields};\n}\n\nexport function union(clauses: $ReadOnlyArray<Typename>): NodeType {\n  const clausesMap: {|[Typename]: true|} = ({}: any);\n  for (const clause of clauses) {\n    if (clausesMap[clause] != null) {\n      throw new Error(`duplicate union clause: \"${clause}\"`);\n    }\n    clausesMap[clause] = true;\n  }\n  return {type: \"UNION\", clauses: clausesMap};\n}\n\nexport function id(): IdFieldType {\n  return {type: \"ID\"};\n}\n\nexport function primitive(\n  annotation?: PrimitiveTypeAnnotation\n): PrimitiveFieldType {\n  return {type: \"PRIMITIVE\", annotation: annotation || null};\n}\n\nexport function node(\n  elementType: Typename,\n  fidelity: Fidelity = faithful()\n): NodeFieldType {\n  return {type: \"NODE\", elementType, fidelity};\n}\n\nexport function connection(\n  elementType: Typename,\n  fidelity: Fidelity = faithful()\n): ConnectionFieldType {\n  return {type: \"CONNECTION\", elementType, fidelity};\n}\n\nexport function nonNull(elementType: Typename): PrimitiveTypeAnnotation {\n  return {nonNull: true, elementType};\n}\n\nexport function nullable(elementType: Typename): PrimitiveTypeAnnotation {\n  return {nonNull: false, elementType};\n}\n\nexport function nested(eggs: {\n  +[Fieldname]: PrimitiveFieldType | NodeFieldType,\n}): NestedFieldType {\n  return {type: \"NESTED\", eggs: {...eggs}};\n}\n","// @flow\n\n/**\n * GraphQL structured query data format.\n *\n * Main module exports:\n *   - lots of types for various GraphQL language constructs\n *   - the `build` object, providing a fluent builder API\n *   - the `stringify` object, and particularly `stringify.body`\n *   - the two layout strategies `multilineLayout` and `inlineLayout`\n */\n\nexport type Body = Definition[];\n\nexport type Definition = QueryDefinition | FragmentDefinition;\n\n// We only need opaque type handles; no need to embed the GraphQL type\n// system into Flow.\nexport type GraphQLType = string;\n\nexport type QueryDefinition = {|\n  +type: \"QUERY\",\n  +name: string,\n  +params: Parameter[],\n  +selections: Selection[],\n|};\nexport type Parameter = {|+name: string, +type: GraphQLType|};\n\nexport type FragmentDefinition = {|\n  +type: \"FRAGMENT\",\n  +name: string,\n  +typeCondition: GraphQLType,\n  +selections: Selection[],\n|};\n\nexport type Selection = Field | FragmentSpread | InlineFragment;\nexport type Field = {|\n  +type: \"FIELD\",\n  +alias: ?string,\n  +name: string,\n  +args: Arguments,\n  +selections: Selection[],\n|};\nexport type FragmentSpread = {|\n  +type: \"FRAGMENT_SPREAD\",\n  +fragmentName: string,\n|};\nexport type InlineFragment = {|\n  +type: \"INLINE_FRAGMENT\",\n  +typeCondition: ?GraphQLType,\n  +selections: Selection[],\n|};\n\nexport type Arguments = {[string]: Value};\nexport type Value =\n  | VariableValue\n  | LiteralValue\n  | EnumValue\n  | ListValue\n  | ObjectValue;\nexport type VariableValue = {|+type: \"VARIABLE\", +data: string|};\nexport type LiteralValue = {|\n  +type: \"LITERAL\",\n  +data: number | string | boolean | null,\n|};\nexport type EnumValue = {|+type: \"ENUM\", +data: string|};\nexport type ListValue = {|+type: \"LIST\", +data: Value[]|};\nexport type ObjectValue = {|+type: \"OBJECT\", +data: {[string]: Value}|};\n\nexport const build = {\n  query(\n    name: string,\n    params: Parameter[],\n    selections: Selection[]\n  ): QueryDefinition {\n    return {\n      type: \"QUERY\",\n      name,\n      params,\n      selections,\n    };\n  },\n\n  param(name: string, type: GraphQLType): Parameter {\n    return {name, type};\n  },\n\n  fragment(\n    name: string,\n    typeCondition: GraphQLType,\n    selections: Selection[]\n  ): FragmentDefinition {\n    return {\n      type: \"FRAGMENT\",\n      name,\n      typeCondition,\n      selections,\n    };\n  },\n\n  field(name: string, args: ?Arguments, selections: ?(Selection[])): Field {\n    return {\n      type: \"FIELD\",\n      alias: null,\n      name,\n      args: args || {},\n      selections: selections || [],\n    };\n  },\n\n  alias(newAlias: string, field: Field): Field {\n    return {\n      type: \"FIELD\",\n      alias: newAlias,\n      name: field.name,\n      args: field.args,\n      selections: field.selections,\n    };\n  },\n\n  fragmentSpread(fragmentName: string): FragmentSpread {\n    return {\n      type: \"FRAGMENT_SPREAD\",\n      fragmentName,\n    };\n  },\n\n  inlineFragment(\n    typeCondition: ?GraphQLType,\n    selections: Selection[]\n  ): InlineFragment {\n    return {\n      type: \"INLINE_FRAGMENT\",\n      typeCondition,\n      selections,\n    };\n  },\n\n  variable(name: string): VariableValue {\n    return {\n      type: \"VARIABLE\",\n      data: name,\n    };\n  },\n\n  literal(value: number | string | boolean | null): LiteralValue {\n    return {\n      type: \"LITERAL\",\n      data: value,\n    };\n  },\n\n  enumLiteral(value: string): EnumValue {\n    return {\n      type: \"ENUM\",\n      data: value,\n    };\n  },\n\n  list(data: Value[]): ListValue {\n    return {\n      type: \"LIST\",\n      data: data,\n    };\n  },\n\n  object(data: {[string]: Value}): ObjectValue {\n    return {\n      type: \"OBJECT\",\n      data: data,\n    };\n  },\n};\n\n/**\n * A strategy for stringifying a sequence of GraphQL language tokens.\n */\nexport interface LayoutStrategy {\n  // Lay out a group of tokens that should be treated atomically.\n  atom(line: string): string;\n\n  // Join groups of tokens. The elements should be the results of calls\n  // to `atom` (or other `join`s).\n  join(lines: string[]): string;\n\n  // Get a strategy for the next level of nesting. For instance, if this\n  // object lays out its result over multiple lines, then this method\n  // might produce a strategy with one extra level of indentation.\n  next(): LayoutStrategy;\n}\n\n/**\n * Create a layout strategy that lays out text over multiple lines,\n * indenting with the given tab string (such as \"\\t\" or \"  \").\n */\nexport function multilineLayout(tab: string): LayoutStrategy {\n  function strategy(indentLevel: number) {\n    return {\n      atom: (line: string) => {\n        const indentation = Array(indentLevel).fill(tab).join(\"\");\n        return indentation + line;\n      },\n      join: (xs: string[]) => xs.join(\"\\n\"),\n      next: () => strategy(indentLevel + 1),\n    };\n  }\n  return strategy(0);\n}\n\n/**\n * Create a layout strategy that lays out all text on one line.\n */\nexport function inlineLayout(): LayoutStrategy {\n  const result = {\n    atom: (line) => line,\n    join: (xs) => xs.join(\" \"),\n    next: () => result,\n  };\n  return result;\n}\n\n/*\n * Map a stringification function across a list, and join the results\n * with a formatter.\n */\nfunction formatList<T>(\n  values: T[],\n  subformatter: (value: T, ls: LayoutStrategy) => string,\n  ls: LayoutStrategy\n): string {\n  return ls.join(values.map((x) => subformatter(x, ls)));\n}\n\n/*\n * Map a stringification function across the values of an object, and\n * join the keys and their corresponding results with a formatter.\n */\nfunction formatObject<T>(\n  object: {[string]: T},\n  subformatter: (value: T, ls: LayoutStrategy) => string,\n  ls: LayoutStrategy\n): string {\n  function formatKey(k: string, ls: LayoutStrategy): string {\n    return ls.join([ls.atom(`${k}:`), subformatter(object[k], ls.next())]);\n  }\n  return formatList(Object.keys(object), formatKey, ls);\n}\n\nexport const stringify = {\n  body(body: Body, ls: LayoutStrategy): string {\n    return formatList(body, stringify.definition, ls);\n  },\n\n  definition(definition: Definition, ls: LayoutStrategy): string {\n    switch (definition.type) {\n      case \"QUERY\":\n        return stringify.queryDefinition(definition, ls);\n      case \"FRAGMENT\":\n        return stringify.fragmentDefinition(definition, ls);\n      // istanbul ignore next: unreachable per Flow\n      default:\n        throw new Error(`Unknown definition type: ${(definition.type: empty)}`);\n    }\n  },\n\n  queryDefinition(query: QueryDefinition, ls: LayoutStrategy): string {\n    const paramsPart = (() => {\n      if (query.params.length === 0) {\n        return \"\";\n      } else {\n        const items = formatList(\n          query.params,\n          stringify.parameter,\n          inlineLayout()\n        );\n        return `(${items})`;\n      }\n    })();\n    const selectionsPart = formatList(\n      query.selections,\n      stringify.selection,\n      ls.next()\n    );\n    return ls.join([\n      ls.atom(`query ${query.name}${paramsPart} {`),\n      selectionsPart,\n      ls.atom(\"}\"),\n    ]);\n  },\n\n  parameter(parameter: Parameter, ls: LayoutStrategy): string {\n    return ls.atom(`$${parameter.name}: ${parameter.type}`);\n  },\n\n  fragmentDefinition(fragment: FragmentDefinition, ls: LayoutStrategy): string {\n    const selectionsPart = formatList(\n      fragment.selections,\n      stringify.selection,\n      ls.next()\n    );\n    return ls.join([\n      ls.atom(`fragment ${fragment.name} on ${fragment.typeCondition} {`),\n      selectionsPart,\n      ls.atom(\"}\"),\n    ]);\n  },\n\n  selection(selection: Selection, ls: LayoutStrategy): string {\n    switch (selection.type) {\n      case \"FIELD\":\n        return stringify.field(selection, ls);\n      case \"FRAGMENT_SPREAD\":\n        return stringify.fragmentSpread(selection, ls);\n      case \"INLINE_FRAGMENT\":\n        return stringify.inlineFragment(selection, ls);\n      // istanbul ignore next: unreachable per Flow\n      default:\n        throw new Error(`Unknown selection type: ${(selection.type: empty)}`);\n    }\n  },\n\n  field(field: Field, ls: LayoutStrategy): string {\n    const aliasPart = (() => {\n      if (field.alias == null) {\n        return \"\";\n      } else {\n        return `${field.alias}: `;\n      }\n    })();\n    const argsPart = (() => {\n      if (Object.keys(field.args).length === 0) {\n        return \"\";\n      } else {\n        const args = formatObject(field.args, stringify.value, inlineLayout());\n        return `(${args})`;\n      }\n    })();\n    if (field.selections.length === 0) {\n      return ls.atom(`${field.name}${argsPart}`);\n    } else {\n      const selectionsPart = formatList(\n        field.selections,\n        stringify.selection,\n        ls.next()\n      );\n      return ls.join([\n        ls.atom(`${aliasPart}${field.name}${argsPart} {`),\n        selectionsPart,\n        ls.atom(\"}\"),\n      ]);\n    }\n  },\n\n  fragmentSpread(fs: FragmentSpread, ls: LayoutStrategy): string {\n    return ls.atom(`...${fs.fragmentName}`);\n  },\n\n  inlineFragment(fragment: InlineFragment, ls: LayoutStrategy): string {\n    const typeConditionPart =\n      fragment.typeCondition == null ? \"\" : ` on ${fragment.typeCondition}`;\n    const selectionsPart = formatList(\n      fragment.selections,\n      stringify.selection,\n      ls.next()\n    );\n    return ls.join([\n      ls.atom(`...${typeConditionPart} {`),\n      selectionsPart,\n      ls.atom(\"}\"),\n    ]);\n  },\n\n  value(value: Value, ls: LayoutStrategy): string {\n    switch (value.type) {\n      case \"VARIABLE\":\n        return stringify.variableValue(value, ls);\n      case \"LITERAL\":\n        return stringify.literalValue(value, ls);\n      case \"ENUM\":\n        return stringify.enumValue(value, ls);\n      case \"LIST\":\n        return stringify.listValue(value, ls);\n      case \"OBJECT\":\n        return stringify.objectValue(value, ls);\n      // istanbul ignore next: unreachable per Flow\n      default:\n        throw new Error(`Unknown value type: ${(value.type: empty)}`);\n    }\n  },\n\n  variableValue(value: VariableValue, ls: LayoutStrategy): string {\n    return ls.atom(`$${value.data}`);\n  },\n\n  literalValue(value: LiteralValue, ls: LayoutStrategy): string {\n    return ls.atom(JSON.stringify(value.data));\n  },\n\n  enumValue(value: EnumValue, ls: LayoutStrategy): string {\n    return ls.atom(value.data);\n  },\n\n  listValue(value: ListValue, ls: LayoutStrategy): string {\n    return ls.join([\n      ls.atom(\"[\"),\n      formatList(value.data, stringify.value, ls.next()),\n      ls.atom(\"]\"),\n    ]);\n  },\n\n  objectValue(value: ObjectValue, ls: LayoutStrategy): string {\n    return ls.join([\n      ls.atom(\"{\"),\n      formatObject(value.data, stringify.value, ls.next()),\n      ls.atom(\"}\"),\n    ]);\n  },\n};\n","// @flow\n\nimport deepFreeze from \"deep-freeze\";\nimport type Database, {BindingDictionary, Statement} from \"better-sqlite3\";\nimport stringify from \"json-stable-stringify\";\n\nimport dedent from \"../util/dedent\";\nimport * as MapUtil from \"../util/map\";\nimport * as NullUtil from \"../util/null\";\nimport * as Schema from \"./schema\";\nimport * as Queries from \"./queries\";\n\n/**\n * A local mirror of a subset of a GraphQL database.\n *\n * Clients should interact with this module as follows:\n *\n *   - Invoke the constructor to acquire a `Mirror` instance.\n *   - Invoke `registerObject` to register a root object of interest.\n *   - Invoke `update` to update all transitive dependencies.\n *   - Invoke `extract` to retrieve the data in structured form.\n *\n * See the relevant methods for documentation.\n */\n/*\n * NOTE(perf): The implementation of this class is not particularly\n * optimized. In particular, when we interact with SQLite, we compile\n * our prepared statements many times over the lifespan of an\n * instance. It may be beneficial to precompile them at instance\n * construction time.\n */\nexport class Mirror {\n  +_db: Database;\n  +_schema: Schema.Schema;\n  +_schemaInfo: SchemaInfo;\n  +_blacklistedIds: {|+[Schema.ObjectId]: true|};\n  +_guessTypename: (Schema.ObjectId) => Schema.Typename | null;\n\n  /**\n   * Create a GraphQL mirror using the given database connection and\n   * GraphQL schema.\n   *\n   * The connection must be to a database that either (a) is empty and\n   * unused, or (b) has been previously used for a GraphQL mirror with\n   * an identical GraphQL schema and options. The database attached to\n   * the connection must not be modified by any other clients. In other\n   * words, passing a connection to this constructor entails\n   * transferring ownership of the attached database to this module.\n   *\n   * If the database attached to the connection has been used with an\n   * incompatible GraphQL schema or an outdated version of this module,\n   * an error will be thrown and the database will remain unmodified.\n   *\n   * If a list of blacklisted IDs is provided, then any object with\n   * matching ID will be treated as `null` when it appears as the target\n   * of a node reference, nested node reference, or connection entry.\n   * This can be used to work around bugs in remote schemas.\n   *\n   * If `guessTypename` is provided, it should attempt to guess the\n   * typename of an object given its ID, returning `null` if no guess\n   * can be made. This will be used as a cross-check against results\n   * returned from the server to provide an early warning in cases where\n   * the results differ, potentially due to server-side contract\n   * violations. This option only affects console warnings, not the\n   * final state of the mirror.\n   */\n  constructor(\n    db: Database,\n    schema: Schema.Schema,\n    options?: {|\n      +blacklistedIds?: $ReadOnlyArray<Schema.ObjectId>,\n      +guessTypename?: (Schema.ObjectId) => Schema.Typename | null,\n    |}\n  ): void {\n    if (db == null) throw new Error(\"db: \" + String(db));\n    if (schema == null) throw new Error(\"schema: \" + String(schema));\n    const fullOptions = {\n      blacklistedIds: [],\n      guessTypename: () => null,\n      ...(options || {}),\n    };\n    this._db = db;\n    this._schema = schema;\n    this._schemaInfo = _buildSchemaInfo(this._schema);\n    this._blacklistedIds = (() => {\n      const result: {|[Schema.ObjectId]: true|} = ({}: any);\n      for (const id of fullOptions.blacklistedIds) {\n        result[id] = true;\n      }\n      return result;\n    })();\n    this._guessTypename = fullOptions.guessTypename;\n    this._initialize();\n  }\n\n  /**\n   * Embed the GraphQL schema into the database, initializing it for use\n   * as a mirror.\n   *\n   * This method should only be invoked once, at construction time.\n   *\n   * If the database has already been initialized with the same schema\n   * and version, no action is taken and no error is thrown. If the\n   * database has been initialized with a different schema or version,\n   * the database is left unchanged, and an error is thrown.\n   *\n   * A discussion of the database structure follows.\n   *\n   * ---\n   *\n   * Objects have three kinds of fields: connections, links, and\n   * primitives. The database likewise has a `connections` table,\n   * `links` table, and `primitives` table, each storing corresponding\n   * data for all GraphQL object types.\n   *\n   * In more detail:\n   *\n   *   - The `connections` table has a row for each `(id, fieldname)`\n   *     pair, where `fieldname` is the name of a connection field on the\n   *     object with the given ID. This stores metadata about the\n   *     connection: its total count, when it was last updated, etc. It\n   *     does not store the actual entries in the connection (the nodes\n   *     that the connection points to); `connection_entries` stores\n   *     these.\n   *\n   *   - The `links` table has a row for each `(id, fieldname)` pair,\n   *     where `fieldname` is the name of a link field on the object\n   *     with the given ID. This simply points to the referenced object.\n   *\n   *   - The `primitives` table has a row for each `(id, fieldname)`\n   *     pair, where `fieldname` is the name of a (non-ID) primitive\n   *     field on the object with the given ID. The `value` column holds\n   *     the JSON-stringified primitive value: so, for instance, the\n   *     JSON value `null` is represented as the SQL string 'null',\n   *     _not_ SQL NULL, while the JSON string \"null\" is represented as\n   *     the SQL string '\"null\"'. This is primarily to accommodate\n   *     storing booleans: SQLite has no boolean storage class, and we\n   *     cannot simply encode `true` and `false` as `1` and `0` because\n   *     we need to be able to distinguish between these respective\n   *     values when we read them back out. There are other ways to do\n   *     this more efficiently in both space and time (see discussion on\n   *     #883 for some options).\n   *\n   * These fields are type-specific, and so only exist once a node's\n   * typename is set.\n   *\n   * We refer to node and primitive data together as \"own data\", because\n   * this is the data that can be queried uniformly for all elements of\n   * a type; querying connection data, by contrast, requires the\n   * object-specific end cursor.\n   *\n   * Nested fields merit additional explanation. The nested field itself\n   * exists on the `primitives` table with SQL value NULL, 0, or 1 (as\n   * SQL integers, not strings). As with all other primitives, `NULL`\n   * indicates that the value has never been fetched. If the value has\n   * been fetched, it is 0 if the nested field itself was `null` on the\n   * GraphQL result, or 1 if it was present. This field lets us\n   * distinguish \"author: null\" from \"author: {user: null}\".\n   *\n   * The \"eggs\" of a nested field are treated as normal primitive or\n   * link values, whose fieldname is the nested fieldname and egg\n   * fieldname joined by a period. So, if object type `Foo` has nested\n   * field `bar: Schema.nested({baz: Schema.primitive()})`, then the\n   * `primitives` table will include a row with fieldname 'bar.baz'.\n   * Likewise, a row in the `links` table might have fieldname\n   * 'quux.zod'.\n   *\n   * All aforementioned tables are keyed by object ID. Each object also\n   * appears once in the `objects` table, which relates its ID,\n   * typename, and last own-data update. Each connection has its own\n   * last-update value, because connections can be updated independently\n   * of each other and of own-data. An object's typename may be `NULL`\n   * if we have only reached the object through edges of unfaithful\n   * type, in which case we will perform an extra query to definitively\n   * determine fetch the object's type before requesting its own data or\n   * connections.\n   *\n   * Note that any object in the database should have entries in the\n   * `connections`, `links`, and `primitives` tables for all relevant\n   * fields, even if the node has never been updated. This is for\n   * convenience of implementation: it means that the first fetch for a\n   * node is the same as subsequent fetches (a simple SQL `UPDATE`\n   * instead of first requiring an existence check).\n   *\n   * A table `network_log` logs all GraphQL requests made by this module\n   * and their corresponding responses, as well as the update created\n   * from the response. This is for debugging. For example, if a node in\n   * the database is corrupt in some way, inspecting the network log\n   * will show exactly which queries caused it to enter its broken\n   * state. In theory, it should be possible to replay the network log\n   * to re-create the database state exactly, though no tooling exists\n   * to do so automatically.\n   *\n   * Finally, a table `meta` is used to store metadata about the mirror\n   * itself. This is used to make sure that the mirror is not loaded\n   * with an incompatible version of the code or schema. It is never\n   * updated after it is first set.\n   */\n  _initialize() {\n    // The following version number must be updated if there is any\n    // change to the way in which a GraphQL schema is mapped to a SQL\n    // schema or the way in which the resulting SQL schema is\n    // interpreted. If you've made a change and you're not sure whether\n    // it requires bumping the version, bump it: requiring some extra\n    // one-time cache resets is okay; doing the wrong thing is not.\n    const blob = stringify({\n      version: \"MIRROR_v9\",\n      schema: this._schema,\n      options: {\n        blacklistedIds: this._blacklistedIds,\n      },\n    });\n    const db = this._db;\n    db.transaction(() => {\n      // We store the metadata in a singleton table `meta`, whose unique row\n      // has primary key `0`. Only the first ever insert will succeed; we\n      // are locked into the first config.\n      db.prepare(\n        dedent`\\\n          CREATE TABLE IF NOT EXISTS meta (\n              zero INTEGER PRIMARY KEY,\n              config TEXT NOT NULL\n          )\n        `\n      ).run();\n\n      const existingBlob: string | void = db\n        .prepare(\"SELECT config FROM meta\")\n        .pluck()\n        .get();\n      if (existingBlob === blob) {\n        // Already set up; nothing to do.\n        return;\n      } else if (existingBlob !== undefined) {\n        throw new Error(\n          \"Database already populated with \" +\n            \"incompatible schema, options, or version\"\n        );\n      }\n      db.prepare(\"INSERT INTO meta (zero, config) VALUES (0, ?)\").run(blob);\n\n      const tables = [\n        // Time is stored in milliseconds since 1970-01-01T00:00Z, with\n        // ECMAScript semantics (leap seconds ignored, exactly 86.4M ms\n        // per day, etc.).\n        //\n        // We use milliseconds rather than seconds because (a) this\n        // simplifies JavaScript interop to a simple `+new Date()` and\n        // `new Date(value)`, and (b) this avoids a lurking Year 2038\n        // problem by surfacing >32-bit values immediately. (We have\n        // over 200,000 years before the number of milliseconds since\n        // epoch is more than `Number.MAX_SAFE_INTEGER`.)\n        dedent`\\\n          CREATE TABLE updates (\n              rowid INTEGER PRIMARY KEY,\n              time_epoch_millis INTEGER NOT NULL\n          )\n        `,\n        dedent`\\\n          CREATE TABLE objects (\n              id TEXT NOT NULL PRIMARY KEY,\n              typename TEXT,\n              last_update INTEGER,\n              FOREIGN KEY(last_update) REFERENCES updates(rowid),\n              CHECK((last_update IS NOT NULL) <= (typename IS NOT NULL))\n          )\n        `,\n        dedent`\\\n          CREATE TABLE primitives (\n              rowid INTEGER PRIMARY KEY,\n              object_id TEXT NOT NULL,\n              fieldname TEXT NOT NULL,\n              value,  -- JSON string, or SQL 0 or 1 for nest fields\n              UNIQUE(object_id, fieldname),\n              FOREIGN KEY(object_id) REFERENCES objects(id)\n          )\n        `,\n        dedent`\\\n          CREATE UNIQUE INDEX idx_primitives__object_id__fieldname\n          ON primitives (object_id, fieldname)\n        `,\n        dedent`\\\n          CREATE TABLE links (\n              rowid INTEGER PRIMARY KEY,\n              parent_id TEXT NOT NULL,\n              fieldname TEXT NOT NULL,\n              child_id TEXT,\n              UNIQUE(parent_id, fieldname),\n              FOREIGN KEY(parent_id) REFERENCES objects(id),\n              FOREIGN KEY(child_id) REFERENCES objects(id)\n          )\n        `,\n        dedent`\\\n          CREATE UNIQUE INDEX idx_links__parent_id__fieldname\n          ON links (parent_id, fieldname)\n        `,\n        dedent`\\\n          CREATE TABLE connections (\n              rowid INTEGER PRIMARY KEY,\n              object_id TEXT NOT NULL,\n              fieldname TEXT NOT NULL,\n              last_update INTEGER,\n              -- Each of the below fields must be NULL if the connection\n              -- has never been updated.\n              total_count INTEGER,\n              has_next_page BOOLEAN,\n              -- The end cursor may be NULL if no items are in the connection;\n              -- this is a consequence of GraphQL and the Relay pagination spec.\n              -- (It may also be NULL if the connection was never updated.)\n              end_cursor TEXT,\n              CHECK((last_update IS NULL) = (total_count IS NULL)),\n              CHECK((last_update IS NULL) = (has_next_page IS NULL)),\n              CHECK((last_update IS NULL) <= (end_cursor IS NULL)),\n              UNIQUE(object_id, fieldname),\n              FOREIGN KEY(object_id) REFERENCES objects(id),\n              FOREIGN KEY(last_update) REFERENCES updates(rowid)\n          )\n        `,\n        dedent`\\\n          CREATE UNIQUE INDEX idx_connections__object_id__fieldname\n          ON connections (object_id, fieldname)\n        `,\n        dedent`\\\n          CREATE TABLE connection_entries (\n              rowid INTEGER PRIMARY KEY,\n              connection_id INTEGER NOT NULL,\n              idx INTEGER NOT NULL,  -- impose an ordering\n              child_id TEXT,\n              UNIQUE(connection_id, idx),\n              FOREIGN KEY(connection_id) REFERENCES connections(rowid),\n              FOREIGN KEY(child_id) REFERENCES objects(id)\n          )\n        `,\n        dedent`\\\n          CREATE INDEX idx_connection_entries__connection_id\n          ON connection_entries (connection_id)\n        `,\n        dedent`\\\n          CREATE TABLE network_log (\n              rowid INTEGER PRIMARY KEY,\n              query TEXT,\n              query_parameters TEXT,  -- stringified JSON object\n              request_time_epoch_millis INTEGER,\n              response TEXT,\n              response_time_epoch_millis INTEGER,\n              update_id INTEGER,\n              CHECK((query IS NULL) = (query_parameters IS NULL)),\n              CHECK((request_time_epoch_millis IS NULL) = (query IS NULL)),\n              CHECK((response_time_epoch_millis IS NULL) = (response IS NULL)),\n              FOREIGN KEY(update_id) REFERENCES updates(rowid)\n          )\n        `,\n      ];\n      for (const sql of tables) {\n        db.prepare(sql).run();\n      }\n    })();\n  }\n\n  /**\n   * Register a new update, representing one communication with the\n   * remote server. A unique ID will be created and returned.\n   */\n  _createUpdate(updateTimestamp: Date): UpdateId {\n    return this._db\n      .prepare(\"INSERT INTO updates (time_epoch_millis) VALUES (?)\")\n      .run(+updateTimestamp).lastInsertRowid;\n  }\n\n  /**\n   * Inform the GraphQL mirror of the existence of an object. The\n   * object's ID must be specified. The object's concrete type may also\n   * be specified, in which case it must be an OBJECT type in the\n   * GraphQL schema.\n   *\n   * If the object has previously been registered with the same type, no\n   * action is taken and no error is raised. If the object has\n   * previously been registered with a different type, an error is\n   * thrown, and the database is left unchanged.\n   */\n  registerObject(object: {|\n    +typename: null | Schema.Typename,\n    +id: Schema.ObjectId,\n  |}): void {\n    this._db.transaction(() => {\n      this._nontransactionallyRegisterObject(object);\n    })();\n  }\n\n  /**\n   * As `registerObject`, but do not enter any transactions. Other\n   * methods may call this method as a subroutine in a larger\n   * transaction.\n   *\n   * This internal method also permits registering an object without\n   * specifying its typename.\n   */\n  _nontransactionallyRegisterObject(\n    object: {|\n      +typename: null | Schema.Typename,\n      +id: Schema.ObjectId,\n    |},\n    guessMismatchMessage?: (guess: Schema.Typename) => string\n  ): void {\n    const db = this._db;\n    const {typename, id} = object;\n\n    if (guessMismatchMessage == null) {\n      guessMismatchMessage = (guess) => {\n        const s = JSON.stringify;\n        const message =\n          `object ${s(object.id)} ` +\n          `looks like it should have type ${s(guess)}, ` +\n          `not ${s(object.typename)}`;\n        return message;\n      };\n    }\n\n    const existingTypename = db\n      .prepare(\"SELECT typename FROM objects WHERE id = ?\")\n      .pluck()\n      .get(id);\n    if (existingTypename === typename) {\n      // Already registered, and no typename upgrade; nothing to do.\n      return;\n    } else if (existingTypename != null && typename == null) {\n      // Already registered, and already have typename; nothing to do.\n      return;\n    } else if (existingTypename === undefined) {\n      // OK: New registration.\n    } else if (existingTypename === null) {\n      // OK: Typename upgrade. Take the user-supplied type as reliable.\n      // We still need to add primitives, links, and connections rows.\n    } else {\n      // Not OK: Already had a typename, but it didn't match.\n      const s = JSON.stringify;\n      throw new Error(\n        `Inconsistent type for ID ${s(id)}: ` +\n          `expected ${s(existingTypename)}, got ${s(typename)}`\n      );\n    }\n\n    if (typename != null) {\n      if (this._schema[typename] == null) {\n        throw new Error(\"Unknown type: \" + JSON.stringify(typename));\n      }\n      if (this._schema[typename].type !== \"OBJECT\") {\n        throw new Error(\n          \"Cannot add object of non-object type: \" +\n            `${JSON.stringify(typename)} (${this._schema[typename].type})`\n        );\n      }\n\n      const guess = this._guessTypename(object.id);\n      if (guess != null && guess !== object.typename) {\n        console.warn(\"Warning: \" + guessMismatchMessage(guess));\n      }\n    }\n\n    if (existingTypename === undefined) {\n      this._db\n        .prepare(\n          dedent`\\\n            INSERT INTO objects (id, last_update, typename)\n            VALUES (:id, NULL, :typename)\n          `\n        )\n        .run({id, typename});\n    } else {\n      // Should be a typename upgrade.\n      const stmt = db.prepare(\n        dedent`\\\n          UPDATE objects SET typename = :typename\n          WHERE id = :id\n          AND typename IS NULL  -- sanity check\n          AND :typename IS NOT NULL  -- sanity check\n        `\n      );\n      _makeSingleUpdateFunction(stmt)({id, typename});\n    }\n\n    if (typename == null) {\n      // Can't add fields if typename not known.\n      return;\n    }\n    const addPrimitive = this._db.prepare(\n      dedent`\n        INSERT INTO primitives (object_id, fieldname, value)\n        VALUES (:id, :fieldname, NULL)\n      `\n    );\n    const addLink = this._db.prepare(\n      dedent`\\\n        INSERT INTO links (parent_id, fieldname, child_id)\n        VALUES (:id, :fieldname, NULL)\n      `\n    );\n    const addConnection = this._db.prepare(\n      // These fields are initialized to NULL because there has\n      // been no update and so they have no meaningful values:\n      // last_update, total_count, has_next_page, end_cursor.\n      dedent`\\\n        INSERT INTO connections (object_id, fieldname)\n        VALUES (:id, :fieldname)\n      `\n    );\n    const objectType = this._schemaInfo.objectTypes[typename];\n    for (const fieldname of objectType.primitiveFieldNames) {\n      addPrimitive.run({id, fieldname});\n    }\n    for (const fieldname of objectType.linkFieldNames) {\n      addLink.run({id, fieldname});\n    }\n    for (const parentFieldname of objectType.nestedFieldNames) {\n      addPrimitive.run({id, fieldname: parentFieldname});\n      const children = objectType.nestedFields[parentFieldname];\n      for (const childFieldname of Object.keys(children.primitives)) {\n        const fieldname = `${parentFieldname}.${childFieldname}`;\n        addPrimitive.run({id, fieldname});\n      }\n      for (const childFieldname of Object.keys(children.nodes)) {\n        const fieldname = `${parentFieldname}.${childFieldname}`;\n        addLink.run({id, fieldname});\n      }\n    }\n    for (const fieldname of objectType.connectionFieldNames) {\n      addConnection.run({id, fieldname});\n    }\n  }\n\n  /**\n   * Register an object corresponding to the provided `NodeFieldResult`,\n   * if any, returning the object's ID. If the provided value is `null`,\n   * no action is taken, no error is thrown, and `null` is returned.\n   *\n   * As with `registerObject`, an error is thrown if an object by the\n   * given ID already exists with a different typename.\n   *\n   * This method does not begin or end any transactions. Other methods\n   * may call this method as a subroutine in a larger transaction.\n   *\n   * See: `registerObject`.\n   */\n  _nontransactionallyRegisterNodeFieldResult(\n    result: NodeFieldResult,\n    context: () => string\n  ): Schema.ObjectId | null {\n    if (result == null) {\n      return null;\n    } else if (this._blacklistedIds[result.id]) {\n      return null;\n    } else {\n      // If queried via an unfaithful field, typename will be missing;\n      // in that case, register the object with unknown type (`null`).\n      const typename =\n        result.__typename === undefined ? null : result.__typename;\n      const id = result.id;\n      const object = {typename, id};\n      this._nontransactionallyRegisterObject(object, (guess) => {\n        const s = JSON.stringify;\n        const message =\n          `object ${s(object.id)} ` +\n          `looks like it should have type ${s(guess)}, ` +\n          `but the server claims that it has type ${s(object.typename)}`;\n        return `${context()}: ${message}`;\n      });\n      return object.id;\n    }\n  }\n\n  /**\n   * Find objects and connections that are not known to be up-to-date.\n   *\n   * An object's typename is up-to-date if it has ever been fetched from\n   * a faithful field reference or a direct typename query.\n   *\n   * An object is up-to-date if its own data has been loaded at least as\n   * recently as the provided date.\n   *\n   * A connection is up-to-date if it has been fetched at least as\n   * recently as the provided date, and at the time of fetching there\n   * were no more pages.\n   */\n  _findOutdated(since: Date): QueryPlan {\n    const db = this._db;\n    return db.transaction(() => {\n      const typenames: $PropertyType<QueryPlan, \"typenames\"> = db\n        .prepare(\n          dedent`\\\n            SELECT id AS id\n            FROM objects\n            WHERE typename IS NULL\n          `\n        )\n        .pluck()\n        .all();\n      const objects: $PropertyType<QueryPlan, \"objects\"> = db\n        .prepare(\n          dedent`\\\n            SELECT typename AS typename, id AS id\n            FROM objects\n            LEFT OUTER JOIN updates ON objects.last_update = updates.rowid\n            WHERE\n                typename IS NOT NULL\n                AND (\n                    objects.last_update IS NULL\n                    OR updates.time_epoch_millis < :timeEpochMillisThreshold\n                )\n          `\n        )\n        .all({timeEpochMillisThreshold: +since});\n      const connections: $PropertyType<QueryPlan, \"connections\"> = db\n        .prepare(\n          dedent`\\\n            SELECT\n                objects.typename AS objectTypename,\n                connections.object_id AS objectId,\n                connections.fieldname AS fieldname,\n                connections.last_update IS NULL AS neverUpdated,\n                connections.end_cursor AS endCursor\n            FROM connections\n            LEFT OUTER JOIN updates\n                ON connections.last_update = updates.rowid\n            JOIN objects\n                ON connections.object_id = objects.id\n            WHERE\n                objectTypename IS NOT NULL\n                AND (\n                    connections.has_next_page\n                    OR connections.last_update IS NULL\n                    OR updates.time_epoch_millis < :timeEpochMillisThreshold\n                )\n          `\n        )\n        .all({timeEpochMillisThreshold: +since})\n        .map((entry) => {\n          const result = {...entry};\n          if (result.neverUpdated) {\n            result.endCursor = undefined; // as opposed to `null`\n          }\n          delete result.neverUpdated;\n          return result;\n        });\n      return {typenames, objects, connections};\n    })();\n  }\n\n  /**\n   * Check whether the given query plan indicates that the mirror is\n   * already up to date and no further queries are required.\n   */\n  _isUpToDate(queryPlan: QueryPlan): boolean {\n    return (\n      queryPlan.typenames.length === 0 &&\n      queryPlan.objects.length === 0 &&\n      queryPlan.connections.length === 0\n    );\n  }\n\n  /**\n   * Create a GraphQL selection set to fetch data corresponding to the\n   * given query plan.\n   *\n   * The resulting GraphQL should be embedded into a top-level query.\n   *\n   * The result of this query is an `UpdateResult`.\n   *\n   * This function is pure: it does not interact with the database.\n   */\n  _queryFromPlan(\n    queryPlan: QueryPlan,\n    options: {|\n      // When fetching typenames for nodes originally referenced by\n      // unfaithful fields, how many typenames may we fetch at once?\n      +typenamesLimit: number,\n      // When fetching own-data for nodes of a given type, how many\n      // nodes may we fetch at once?\n      +nodesOfTypeLimit: number,\n      // For how many nodes may we fetch own-data at once, across all\n      // types?\n      +nodesLimit: number,\n      // How many connections may we fetch at top level?\n      +connectionLimit: number,\n      // When fetching entries in a connection, how many entities may we\n      // request at once? (What is the `first` argument?)\n      +connectionPageSize: number,\n    |}\n  ): Queries.Selection[] {\n    const fetchTypenamesFor = queryPlan.typenames.slice(\n      0,\n      options.typenamesLimit\n    );\n    const typenameBatches = [];\n    for (\n      let i = 0;\n      i < fetchTypenamesFor.length;\n      i += options.nodesOfTypeLimit\n    ) {\n      typenameBatches.push(\n        fetchTypenamesFor.slice(i, i + options.nodesOfTypeLimit)\n      );\n    }\n\n    // Group objects by type, so that we have to specify each type's\n    // fieldset fewer times (only once per `nodesOfTypeLimit` nodes\n    // instead of for every node).\n    const objectsByType: Map<Schema.Typename, Schema.ObjectId[]> = new Map();\n    for (const object of queryPlan.objects.slice(0, options.nodesLimit)) {\n      MapUtil.pushValue(objectsByType, object.typename, object.id);\n    }\n    const paginatedObjectsByType: Array<{|\n      +typename: Schema.Typename,\n      +ids: $ReadOnlyArray<Schema.ObjectId>,\n    |}> = [];\n    for (const [typename, allIds] of objectsByType.entries()) {\n      for (let i = 0; i < allIds.length; i += options.nodesOfTypeLimit) {\n        const ids = allIds.slice(i, i + options.nodesOfTypeLimit);\n        paginatedObjectsByType.push({typename, ids});\n      }\n    }\n\n    // Group connections by object, so that we only have to fetch the\n    // node once.\n    const connectionsByObject: Map<\n      Schema.ObjectId,\n      {|\n        +typename: Schema.Typename,\n        +connections: Array<{|\n          +fieldname: Schema.Fieldname,\n          +endCursor: EndCursor | void,\n        |}>,\n      |}\n    > = new Map();\n    for (const connection of queryPlan.connections.slice(\n      0,\n      options.connectionLimit\n    )) {\n      let existing = connectionsByObject.get(connection.objectId);\n      if (existing == null) {\n        existing = {typename: connection.objectTypename, connections: []};\n        connectionsByObject.set(connection.objectId, existing);\n      } else {\n        if (connection.objectTypename !== existing.typename) {\n          const s = JSON.stringify;\n          throw new Error(\n            `Query plan has inconsistent typenames for ` +\n              `object ${s(connection.objectId)}: ` +\n              `${s(existing.typename)} vs. ${s(connection.objectTypename)}`\n          );\n        }\n      }\n      existing.connections.push({\n        fieldname: connection.fieldname,\n        endCursor: connection.endCursor,\n      });\n    }\n\n    const b = Queries.build;\n\n    // Each top-level field other than `typenames` corresponds to either\n    // an object type (fetching own data for objects of that type) or a\n    // particular node (updating connections on that node). We alias\n    // each such field, which is necessary to ensure that their names\n    // are all unique. The names chosen are sufficient to identify which\n    // _kind_ of query the field corresponds to (type's own data vs\n    // node's connections), but do not need to identify the particular\n    // type or node in question. This is because all descendant\n    // selections are self-describing: they include the ID of any\n    // relevant objects.\n    return [].concat(\n      typenameBatches.map((typenames, i) => {\n        const name = `${_FIELD_PREFIXES.TYPENAMES}${i}`;\n        return b.alias(\n          name,\n          b.field(\n            \"nodes\",\n            {\n              ids: b.list(typenames.map((id) => b.literal(id))),\n            },\n            this._queryTypename()\n          )\n        );\n      }),\n      paginatedObjectsByType.map(({typename, ids}, i) => {\n        const name = `${_FIELD_PREFIXES.OWN_DATA}${i}`;\n        return b.alias(\n          name,\n          b.field(\"nodes\", {ids: b.list(ids.map((id) => b.literal(id)))}, [\n            b.inlineFragment(typename, this._queryOwnData(typename)),\n          ])\n        );\n      }),\n      MapUtil.mapToArray(\n        connectionsByObject,\n        ([id, {typename, connections}], i) => {\n          const name = `${_FIELD_PREFIXES.NODE_CONNECTIONS}${i}`;\n          return b.alias(\n            name,\n            b.field(\"node\", {id: b.literal(id)}, [\n              b.field(\"id\"),\n              b.inlineFragment(\n                typename,\n                [].concat(\n                  ...connections.map(({fieldname, endCursor}) =>\n                    this._queryConnection(\n                      typename,\n                      fieldname,\n                      endCursor,\n                      options.connectionPageSize\n                    )\n                  )\n                )\n              ),\n            ])\n          );\n        }\n      )\n    );\n  }\n\n  /**\n   * Ingest data given by an `UpdateResult`. This is porcelain over\n   * `_updateConnection` and `_updateOwnData`.\n   *\n   * See: `_findOutdated`.\n   * See: `_queryFromPlan`.\n   */\n  _updateData(updateId: UpdateId, queryResult: UpdateResult): void {\n    this._db.transaction(() => {\n      this._nontransactionallyUpdateData(updateId, queryResult);\n    })();\n  }\n\n  /**\n   * As `_updateData`, but do not enter any transactions. Other methods\n   * may call this method as a subroutine in a larger transaction.\n   */\n  _nontransactionallyUpdateData(\n    updateId: UpdateId,\n    queryResult: UpdateResult\n  ): void {\n    for (const topLevelKey of Object.keys(queryResult)) {\n      const rawValue:\n        | TypenamesUpdateResult\n        | OwnDataUpdateResult\n        | NodeConnectionsUpdateResult = queryResult[topLevelKey];\n      if (topLevelKey.startsWith(_FIELD_PREFIXES.TYPENAMES)) {\n        const updateRecord: TypenamesUpdateResult = (rawValue: any);\n        this._nontransactionallyUpdateTypenames(updateRecord);\n      } else if (topLevelKey.startsWith(_FIELD_PREFIXES.OWN_DATA)) {\n        const updateRecord: OwnDataUpdateResult = (rawValue: any);\n        this._nontransactionallyUpdateOwnData(updateId, updateRecord);\n      } else if (topLevelKey.startsWith(_FIELD_PREFIXES.NODE_CONNECTIONS)) {\n        const updateRecord: NodeConnectionsUpdateResult = (rawValue: any);\n        for (const fieldname of Object.keys(updateRecord)) {\n          if (fieldname === \"id\") {\n            continue;\n          }\n          this._nontransactionallyUpdateConnection(\n            updateId,\n            updateRecord.id,\n            fieldname,\n            updateRecord[fieldname]\n          );\n        }\n      } else {\n        throw new Error(\n          \"Bad key in query result: \" + JSON.stringify(topLevelKey)\n        );\n      }\n    }\n  }\n\n  /**\n   * Save the request query and query parameters to the database.\n   */\n  _logRequest(\n    body: Queries.Body,\n    variables: {+[string]: any},\n    timestamp: Date\n  ): NetworkLogId {\n    const query = Queries.stringify.body(body, Queries.inlineLayout());\n    const queryParameters = stringify(variables);\n\n    return this._db\n      .prepare(\n        dedent`\\\n          INSERT INTO network_log (\n              query, query_parameters, request_time_epoch_millis\n          )\n          VALUES (:query, :queryParameters, :requestTimestamp)\n        `\n      )\n      .run({\n        query,\n        queryParameters,\n        requestTimestamp: +timestamp,\n      }).lastInsertRowid;\n  }\n\n  /**\n   * Save the network response and response timestamp to the table row\n   * corresponding to the request that generated it.\n   */\n  _logResponse(\n    rowid: NetworkLogId,\n    jsonResponse: UpdateResult,\n    timestamp: Date\n  ): void {\n    const response = stringify(jsonResponse);\n\n    const stmt = this._db.prepare(\n      dedent`\\\n        UPDATE network_log\n        SET\n            response = :response,\n            response_time_epoch_millis = :responseTimestamp\n        WHERE rowid = :rowid\n      `\n    );\n    const saveResponse = _makeSingleUpdateFunction(stmt);\n    saveResponse({response, responseTimestamp: +timestamp, rowid});\n  }\n\n  /**\n   * Save the UpdateId in the table row corresponding to the network request\n   * that generated it.\n   */\n  _logRequestUpdateId(rowid: NetworkLogId, updateId: UpdateId): void {\n    const stmt = this._db.prepare(\n      dedent`\\\n        UPDATE network_log\n        SET\n            update_id = :updateId\n        WHERE rowid = :rowid\n      `\n    );\n    const saveUpdateId = _makeSingleUpdateFunction(stmt);\n    saveUpdateId({rowid, updateId});\n  }\n\n  /**\n   * Perform one step of the update loop: find outdated entities, fetch\n   * their updates, and feed the results back into the database.\n   *\n   * Returns a promise that resolves to `true` if any changes were made.\n   */\n  async _updateStep(\n    postQuery: ({\n      +body: Queries.Body,\n      +variables: {+[string]: any},\n    }) => Promise<any>,\n    options: {|\n      +nodesLimit: number,\n      +nodesOfTypeLimit: number,\n      +connectionPageSize: number,\n      +connectionLimit: number,\n      +since: Date,\n      +now: () => Date,\n    |}\n  ): Promise<boolean> {\n    const queryPlan = this._findOutdated(options.since);\n    if (this._isUpToDate(queryPlan)) {\n      return Promise.resolve(false);\n    }\n    const querySelections = this._queryFromPlan(queryPlan, {\n      // TODO(@wchargin): Expose `typenamesLimit` as an option and fix\n      // up callers.\n      typenamesLimit: options.nodesLimit,\n      nodesLimit: options.nodesLimit,\n      nodesOfTypeLimit: options.nodesOfTypeLimit,\n      connectionPageSize: options.connectionPageSize,\n      connectionLimit: options.connectionLimit,\n    });\n    const body = [Queries.build.query(\"MirrorUpdate\", [], querySelections)];\n    const variables = {};\n    const requestRowId = this._logRequest(body, variables, options.now());\n    const result: UpdateResult = await postQuery({body, variables});\n    this._logResponse(requestRowId, result, options.now());\n\n    this._db.transaction(() => {\n      const updateId = this._createUpdate(options.now());\n      this._logRequestUpdateId(requestRowId, updateId);\n      this._nontransactionallyUpdateData(updateId, result);\n    })();\n    return Promise.resolve(true);\n  }\n\n  /**\n   * Update this mirror with new information from a remote GraphQL\n   * server.\n   *\n   * The `postQuery` function should post a GraphQL query to the remote\n   * server and return the `data` contents of its response, rejecting if\n   * there are any errors. (Note that this requirement may change\n   * backward-incompatibly in future versions of this module, in the\n   * case that we wish to handle deletions without regenerating all\n   * data.)\n   *\n   * The options are as follows:\n   *\n   *   - `since`: Fetch all data that is not known to be up-to-date as\n   *     of the provided time. For instance, to fetch all objects more\n   *     than a day old, use `new Date(new Date() - 86400e3)`.\n   *\n   *   - `now`: Function to yield the current date, which will be used\n   *     as the modification time for any objects or connections updated\n   *     in this process. Should probably be `() => new Date()`.\n   *\n   *   - `connectionPageSize`: Maximum number of entries to fetch in any\n   *     given connection. Some providers have a hard limit of 100 on\n   *     this value.\n   *\n   *   - `connectionLimit`: Maximum number of connections to fetch in a\n   *     single query.\n   *\n   * See: `registerObject`.\n   * See: `extract`.\n   */\n  async update(\n    postQuery: ({\n      +body: Queries.Body,\n      +variables: {+[string]: any},\n    }) => Promise<any>,\n    options: {|\n      +nodesLimit: number,\n      +nodesOfTypeLimit: number,\n      +connectionPageSize: number,\n      +connectionLimit: number,\n      +since: Date,\n      +now: () => Date,\n    |}\n  ): Promise<void> {\n    while (await this._updateStep(postQuery, options));\n  }\n\n  /**\n   * Create a GraphQL selection set required to identify an object of\n   * the given declared type, which may be either an object type or a\n   * union type. This is the minimal required data whenever we find a\n   * reference to an object that we want to traverse later.\n   *\n   * The `fidelity` argument should be the fidelity of the field being\n   * traversed. If it is faithful, the object's typename will be queried\n   * as well; if it is unfaithful, the typename will not be requested.\n   *\n   * The resulting GraphQL should be embedded in the context of any node\n   * of the provided type. For instance, `_queryShallow(\"Issue\")`\n   * returns a selection set that might replace the `?` in any of the\n   * following queries:\n   *\n   *     repository(owner: \"foo\", name: \"bar\") {\n   *       issues(first: 1) {\n   *         nodes { ? }\n   *       }\n   *     }\n   *\n   *     nodes(ids: [\"issue#1\", \"issue#2\"]) { ? }\n   *\n   * The result of this query has type `NodeFieldResult`.\n   *\n   * This function is pure: it does not interact with the database.\n   */\n  _queryShallow(\n    typename: Schema.Typename,\n    fidelity: Schema.Fidelity\n  ): Queries.Selection[] {\n    const type = this._schema[typename];\n    if (type == null) {\n      // Should not be reachable via APIs.\n      throw new Error(\"No such type: \" + JSON.stringify(typename));\n    }\n    const b = Queries.build;\n    const typenameQuery = [];\n    switch (fidelity.type) {\n      case \"FAITHFUL\":\n        typenameQuery.push(b.field(\"__typename\"));\n        break;\n      case \"UNFAITHFUL\":\n        // Do not query typename.\n        break;\n      // istanbul ignore next\n      default:\n        throw new Error((fidelity.type: empty));\n    }\n    switch (type.type) {\n      case \"SCALAR\":\n        throw new Error(\n          \"Cannot create selections for scalar type: \" +\n            JSON.stringify(typename)\n        );\n      case \"ENUM\":\n        throw new Error(\n          \"Cannot create selections for enum type: \" + JSON.stringify(typename)\n        );\n      case \"OBJECT\":\n        return [...typenameQuery, b.field(\"id\")];\n      case \"UNION\":\n        return [\n          // Known issue: This selection set may be empty if the field\n          // is unfaithful and the union type has no clauses. This would\n          // emit an invalid GraphQL query; the GraphQL syntax requires\n          // at least one selection. However, empty union types are also\n          // disallowed in GraphQL, so this should not be a problem on a\n          // well-formed schema. Handling this properly would require\n          // transitively upward-pruning the query and seems unlikely to\n          // be worth it at this time.\n          ...typenameQuery,\n          ...this._schemaInfo.unionTypes[\n            typename\n          ].clauses.map((clause: Schema.Typename) =>\n            b.inlineFragment(clause, [b.field(\"id\")])\n          ),\n        ];\n      // istanbul ignore next\n      default:\n        throw new Error((type.type: empty));\n    }\n  }\n\n  /**\n   * Get the current value of the end cursor on a connection, or\n   * `undefined` if the object has never been fetched. If no object by\n   * the given ID is known, or the object does not have a connection of\n   * the given name, then an error is thrown.\n   *\n   * Note that `null` is a valid end cursor and is distinct from\n   * `undefined`.\n   */\n  _getEndCursor(\n    objectId: Schema.ObjectId,\n    fieldname: Schema.Fieldname\n  ): EndCursor | void {\n    const result: {|\n      +initialized: 0 | 1,\n      +endCursor: string | null,\n    |} | void = this._db\n      .prepare(\n        dedent`\\\n          SELECT\n              last_update IS NOT NULL AS initialized,\n              end_cursor AS endCursor\n          FROM connections\n          WHERE object_id = :objectId AND fieldname = :fieldname\n        `\n      )\n      // No need to worry about corruption in the form of multiple\n      // matches: there is a UNIQUE(object_id, fieldname) constraint.\n      .get({objectId, fieldname});\n    if (result === undefined) {\n      const s = JSON.stringify;\n      throw new Error(`No such connection: ${s(objectId)}.${s(fieldname)}`);\n    }\n    return result.initialized ? result.endCursor : undefined;\n  }\n\n  /**\n   * Create a GraphQL selection set to fetch elements from a collection,\n   * specified by its enclosing object type and the connection field\n   * name (for instance, \"Repository\" and \"issues\").\n   *\n   * If the connection has been queried before and you wish to fetch new\n   * elements, use an appropriate end cursor. Use `undefined` otherwise.\n   * Note that `null` is a valid end cursor and is distinct from\n   * `undefined`. Note that these semantics are compatible with the\n   * return value of `_getEndCursor`.\n   *\n   * If an end cursor for a particular node's connection was specified,\n   * then the resulting GraphQL should be embedded in the context of\n   * that node. For instance, if repository \"foo/bar\" has ID \"baz\" and\n   * an end cursor of \"c000\" on its \"issues\" connection, then the\n   * GraphQL emitted by `_queryConnection(\"issues\", \"c000\")` might\n   * replace the `?` in the following query:\n   *\n   *     node(id: \"baz\") { ? }\n   *\n   * If no end cursor was specified, then the resulting GraphQL may be\n   * embedded in the context of _any_ node with a connection of the\n   * appropriate fieldname. For instance, `_queryConnection(\"issues\")`\n   * emits GraphQL that may replace the `?` in either of the following\n   * queries:\n   *\n   *     node(id: \"baz\") { ? }  # where \"baz\" is a repository ID\n   *     repository(owner: \"foo\", name: \"bar\") { ? }\n   *\n   * Note, however, that this query will fetch nodes from the _start_ of\n   * the connection. It would be wrong to append these results onto an\n   * connection for which we have already fetched data.\n   *\n   * The result of this query has type `ConnectionFieldResult`.\n   *\n   * This function is pure: it does not interact with the database.\n   *\n   * See: `_getEndCursor`.\n   * See: `_updateConnection`.\n   */\n  _queryConnection(\n    typename: Schema.Typename,\n    fieldname: Schema.Fieldname,\n    endCursor: EndCursor | void,\n    connectionPageSize: number\n  ): Queries.Selection[] {\n    if (this._schema[typename] == null) {\n      throw new Error(\"No such type: \" + JSON.stringify(typename));\n    }\n    if (this._schema[typename].type !== \"OBJECT\") {\n      const s = JSON.stringify;\n      throw new Error(\n        `Cannot query connection on non-object type ${s(typename)} ` +\n          `(${this._schema[typename].type})`\n      );\n    }\n    const field = this._schemaInfo.objectTypes[typename].fields[fieldname];\n    if (field == null) {\n      const s = JSON.stringify;\n      throw new Error(\n        `Object type ${s(typename)} has no field ${s(fieldname)}`\n      );\n    }\n    if (field.type !== \"CONNECTION\") {\n      const s = JSON.stringify;\n      throw new Error(\n        `Cannot query non-connection field ${s(typename)}.${s(fieldname)} ` +\n          `(${field.type})`\n      );\n    }\n    const b = Queries.build;\n    const connectionArguments: Queries.Arguments = {\n      first: b.literal(connectionPageSize),\n    };\n    if (endCursor !== undefined) {\n      connectionArguments.after = b.literal(endCursor);\n    }\n    return [\n      b.field(fieldname, connectionArguments, [\n        b.field(\"totalCount\"),\n        b.field(\"pageInfo\", {}, [b.field(\"endCursor\"), b.field(\"hasNextPage\")]),\n        b.field(\n          \"nodes\",\n          {},\n          this._queryShallow(field.elementType, field.fidelity)\n        ),\n      ]),\n    ];\n  }\n\n  /**\n   * Ingest new entries in a connection on an existing object.\n   *\n   * The connection's last update will be set to the given value, which\n   * must be an existing update lest an error be thrown.\n   *\n   * If the object does not exist or does not have a connection by the\n   * given name, an error will be thrown.\n   *\n   * See: `_queryConnection`.\n   * See: `_createUpdate`.\n   */\n  _updateConnection(\n    updateId: UpdateId,\n    objectId: Schema.ObjectId,\n    fieldname: Schema.Fieldname,\n    queryResult: ConnectionFieldResult\n  ): void {\n    this._db.transaction(() => {\n      this._nontransactionallyUpdateConnection(\n        updateId,\n        objectId,\n        fieldname,\n        queryResult\n      );\n    })();\n  }\n\n  /**\n   * As `_updateConnection`, but do not enter any transactions. Other\n   * methods may call this method as a subroutine in a larger\n   * transaction.\n   */\n  _nontransactionallyUpdateConnection(\n    updateId: UpdateId,\n    objectId: Schema.ObjectId,\n    fieldname: Schema.Fieldname,\n    queryResult: ConnectionFieldResult\n  ): void {\n    const db = this._db;\n    const connectionId: number = this._db\n      .prepare(\n        dedent`\\\n          SELECT rowid FROM connections\n          WHERE object_id = :objectId AND fieldname = :fieldname\n        `\n      )\n      .pluck()\n      .get({objectId, fieldname});\n    // There is a UNIQUE(object_id, fieldname) constraint, so we don't\n    // have to worry about pollution due to duplicates. But it's\n    // possible that no such connection exists, indicating that the\n    // object has not been registered. This is an error.\n    if (connectionId === undefined) {\n      const s = JSON.stringify;\n      throw new Error(`No such connection: ${s(objectId)}.${s(fieldname)}`);\n    }\n    db.prepare(\n      dedent`\\\n          UPDATE connections\n          SET\n              last_update = :updateId,\n              total_count = :totalCount,\n              has_next_page = :hasNextPage,\n              end_cursor = :endCursor\n          WHERE rowid = :connectionId\n        `\n    ).run({\n      updateId,\n      totalCount: queryResult.totalCount,\n      hasNextPage: +queryResult.pageInfo.hasNextPage,\n      endCursor: queryResult.pageInfo.endCursor,\n      connectionId,\n    });\n    let nextIndex: number = db\n      .prepare(\n        dedent`\\\n          SELECT IFNULL(MAX(idx), 0) + 1 FROM connection_entries\n          WHERE connection_id = :connectionId\n        `\n      )\n      .pluck()\n      .get({connectionId});\n    const addEntry = db.prepare(\n      dedent`\\\n        INSERT INTO connection_entries (connection_id, idx, child_id)\n        VALUES (:connectionId, :idx, :childId)\n      `\n    );\n    for (const node of queryResult.nodes) {\n      const childId = this._nontransactionallyRegisterNodeFieldResult(\n        node,\n        () => {\n          const s = JSON.stringify;\n          return (\n            \"when processing \" +\n            `${s(fieldname)} connection of object ${s(objectId)}`\n          );\n        }\n      );\n      const idx = nextIndex++;\n      addEntry.run({connectionId, idx, childId});\n    }\n  }\n\n  /**\n   * Create a GraphQL selection set required to fetch the own-data\n   * (primitives and node references) of an object, but not its\n   * connection entries. The result depends only on the (concrete) type\n   * of the object, not its ID.\n   *\n   * The provided typename must correspond to an object type, not a\n   * union type; otherwise, an error will be thrown.\n   *\n   * The resulting GraphQL can be embedded into the context of any node\n   * with the provided typename. For instance, if there are issues with\n   * IDs \"#1\" and \"#2\", then `_queryOwnData(\"Issue\")` emits GraphQL\n   * that may replace the `?` in any of the following queries:\n   *\n   *     repository(owner: \"foo\", name: \"bar\") {\n   *       issues(first: 1) { ? }\n   *     }\n   *     nodes(ids: [\"#1\", \"#2\") { ... on Issue { ? } }\n   *     node(id: \"#1\") { ... on Issue { ? } }\n   *\n   * The result of this query has type `E`, where `E` is the element\n   * type of `OwnDataUpdateResult`. That is, it is an object with shape\n   * that depends on the provided typename: the name of each ID or\n   * primitive field is a key mapping to a primitive value, and the name\n   * of each node field is a key mapping to a `NodeFieldResult`.\n   * Additionally, the attribute \"__typename\" maps to the node's\n   * typename.\n   *\n   * This function is pure: it does not interact with the database.\n   */\n  _queryOwnData(typename: Schema.Typename): Queries.Selection[] {\n    const type = this._schema[typename];\n    if (type == null) {\n      throw new Error(`No such type: ${JSON.stringify(typename)}`);\n    }\n    if (type.type !== \"OBJECT\") {\n      throw new Error(\n        `Not an object type: ${JSON.stringify(typename)} (${type.type})`\n      );\n    }\n    const b = Queries.build;\n    return [\n      b.field(\"__typename\"),\n      ...Object.keys(type.fields)\n        .map((fieldname) => {\n          const field = type.fields[fieldname];\n          switch (field.type) {\n            case \"ID\":\n              return b.field(fieldname);\n            case \"PRIMITIVE\":\n              return b.field(fieldname);\n            case \"NODE\":\n              return b.field(\n                fieldname,\n                {},\n                this._queryShallow(field.elementType, field.fidelity)\n              );\n            case \"CONNECTION\":\n              // Not handled by this function.\n              return null;\n            case \"NESTED\":\n              return b.field(\n                fieldname,\n                {},\n                Object.keys(field.eggs).map((childFieldname) => {\n                  const childField = field.eggs[childFieldname];\n                  switch (childField.type) {\n                    case \"PRIMITIVE\":\n                      return b.field(childFieldname);\n                    case \"NODE\":\n                      return b.field(\n                        childFieldname,\n                        {},\n                        this._queryShallow(\n                          childField.elementType,\n                          childField.fidelity\n                        )\n                      );\n                    // istanbul ignore next\n                    default:\n                      throw new Error((childField.type: empty));\n                  }\n                })\n              );\n            // istanbul ignore next\n            default:\n              throw new Error((field.type: empty));\n          }\n        })\n        .filter(Boolean),\n    ];\n  }\n\n  /**\n   * Ingest own-data (primitive and link) updates for many objects of a\n   * fixed concrete type. Every object in the input list must have the\n   * same `__typename` attribute, which must be the name of a valid\n   * object type.\n   *\n   * See: `_queryOwnData`.\n   */\n  _updateOwnData(updateId: UpdateId, queryResult: OwnDataUpdateResult): void {\n    this._db.transaction(() => {\n      this._nontransactionallyUpdateOwnData(updateId, queryResult);\n    })();\n  }\n\n  /**\n   * As `_updateOwnData`, but do not enter any transactions. Other\n   * methods may call this method as a subroutine in a larger\n   * transaction.\n   */\n  _nontransactionallyUpdateOwnData(\n    updateId: UpdateId,\n    queryResult: OwnDataUpdateResult\n  ): void {\n    if (queryResult.length === 0) {\n      return;\n    }\n    const typename = queryResult[0].__typename;\n    if (this._schema[typename] == null) {\n      throw new Error(\"Unknown type: \" + JSON.stringify(typename));\n    }\n    if (this._schema[typename].type !== \"OBJECT\") {\n      throw new Error(\n        \"Cannot update data for non-object type: \" +\n          `${JSON.stringify(typename)} (${this._schema[typename].type})`\n      );\n    }\n\n    const db = this._db;\n    const objectType = this._schemaInfo.objectTypes[typename];\n\n    // First, make sure that all objects for which we're given own data\n    // actually exist and have the correct typename.\n    {\n      const checkTypename = db\n        .prepare(\"SELECT typename IS NOT NULL FROM objects WHERE id = ?\")\n        .pluck();\n      for (const entry of queryResult) {\n        const hasTypename = checkTypename.get(entry.id);\n        if (hasTypename == null) {\n          throw new Error(\n            \"Cannot update data for nonexistent node: \" +\n              JSON.stringify(entry.id)\n          );\n        }\n        if (!hasTypename) {\n          throw new Error(\n            \"Cannot update data before typename known: \" +\n              JSON.stringify(entry.id)\n          );\n        }\n        if (entry.__typename !== typename) {\n          const s = JSON.stringify;\n          throw new Error(\n            \"Result set has inconsistent typenames: \" +\n              `${s(typename)} vs. ${s(entry.__typename)}`\n          );\n        }\n      }\n    }\n\n    // Set each node's `lastUpdate` time.\n    {\n      const setLastUpdate: (objectId: Schema.ObjectId) => void = (() => {\n        const stmt = db.prepare(\n          dedent`\\\n            UPDATE objects SET last_update = :updateId\n            WHERE id = :objectId\n          `\n        );\n        const update = _makeSingleUpdateFunction(stmt);\n        return (objectId) => update({objectId, updateId});\n      })();\n      for (const entry of queryResult) {\n        setLastUpdate(entry.id);\n      }\n    }\n\n    // Update each node's primitive data.\n    //\n    // (This typedef would be in the following block statement but for\n    // facebook/flow#6961.)\n    declare opaque type ParameterName: string;\n    {\n      const parameterNameFor = {\n        topLevelField(fieldname: Schema.Fieldname): ParameterName {\n          return (([\"t\", fieldname].join(\"_\"): string): any);\n        },\n        nestedField(\n          nestFieldname: Schema.Fieldname,\n          eggFieldname: Schema.Fieldname\n        ): ParameterName {\n          return (([\n            \"n\",\n            String(nestFieldname.length),\n            nestFieldname,\n            eggFieldname,\n          ].join(\"_\"): string): any);\n        },\n      };\n      const updatePrimitive: ({|\n        +id: Schema.ObjectId,\n        +fieldname: string,\n        +value: string | 0 | 1,\n      |}) => void = _makeSingleUpdateFunction(\n        db.prepare(\n          dedent`\\\n            UPDATE primitives\n            SET value = :value\n            WHERE object_id = :id AND fieldname = :fieldname\n          `\n        )\n      );\n\n      for (const entry of queryResult) {\n        const primitives: {|\n          +id: Schema.ObjectId,\n          [ParameterName]: string | 0 | 1,\n        |} = {id: entry.id};\n\n        // Add top-level primitives.\n        for (const fieldname of objectType.primitiveFieldNames) {\n          const value: PrimitiveResult | NodeFieldResult | NestedFieldResult =\n            entry[fieldname];\n          const primitive: PrimitiveResult = (value: any);\n          if (primitive === undefined) {\n            const s = JSON.stringify;\n            throw new Error(\n              `Missing primitive ${s(fieldname)} on ${s(entry.id)} ` +\n                `of type ${s(typename)} (got ${(primitive: empty)})`\n            );\n          }\n          const jsonValue = JSON.stringify(primitive);\n          primitives[parameterNameFor.topLevelField(fieldname)] = jsonValue;\n          updatePrimitive({id: entry.id, fieldname, value: jsonValue});\n        }\n\n        // Add nested primitives.\n        for (const nestFieldname of objectType.nestedFieldNames) {\n          const nestValue:\n            | PrimitiveResult\n            | NodeFieldResult\n            | NestedFieldResult = entry[nestFieldname];\n          const topLevelNested: NestedFieldResult = (nestValue: any);\n          if (topLevelNested === undefined) {\n            const s = JSON.stringify;\n            throw new Error(\n              `Missing nested field ` +\n                `${s(nestFieldname)} on ${s(entry.id)} ` +\n                `of type ${s(typename)} (got ${(topLevelNested: empty)})`\n            );\n          }\n          primitives[parameterNameFor.topLevelField(nestFieldname)] =\n            topLevelNested == null ? 0 : 1;\n          updatePrimitive({\n            id: entry.id,\n            fieldname: nestFieldname,\n            value: topLevelNested == null ? 0 : 1,\n          });\n          const eggFields = objectType.nestedFields[nestFieldname].primitives;\n          for (const eggFieldname of Object.keys(eggFields)) {\n            const eggValue: PrimitiveResult | NodeFieldResult =\n              topLevelNested == null ? null : topLevelNested[eggFieldname];\n            const primitive: PrimitiveResult = (eggValue: any);\n            if (primitive === undefined) {\n              const s = JSON.stringify;\n              throw new Error(\n                `Missing nested field ` +\n                  `${s(nestFieldname)}.${s(eggFieldname)} ` +\n                  `on ${s(entry.id)} ` +\n                  `of type ${s(typename)} (got ${(primitive: empty)})`\n              );\n            }\n            const jsonValue = JSON.stringify(primitive);\n            primitives[\n              parameterNameFor.nestedField(nestFieldname, eggFieldname)\n            ] = jsonValue;\n            updatePrimitive({\n              id: entry.id,\n              fieldname: `${nestFieldname}.${eggFieldname}`,\n              value: jsonValue,\n            });\n          }\n        }\n      }\n    }\n\n    // Update each node's links.\n    {\n      const updateLink: ({|\n        +parentId: string,\n        +fieldname: string,\n        +childId: string | null,\n      |}) => void = (() => {\n        const stmt = db.prepare(\n          dedent`\\\n            UPDATE links SET child_id = :childId\n            WHERE parent_id = :parentId AND fieldname = :fieldname\n          `\n        );\n        return _makeSingleUpdateFunction(stmt);\n      })();\n\n      for (const entry of queryResult) {\n        // Add top-level links.\n        for (const fieldname of objectType.linkFieldNames) {\n          const value: PrimitiveResult | NodeFieldResult | NestedFieldResult =\n            entry[fieldname];\n          const link: NodeFieldResult = (value: any);\n          if (link === undefined) {\n            const s = JSON.stringify;\n            throw new Error(\n              `Missing node reference ${s(fieldname)} on ${s(entry.id)} ` +\n                `of type ${s(typename)} (got ${(link: empty)})`\n            );\n          }\n          const parentId = entry.id;\n          const childId = this._nontransactionallyRegisterNodeFieldResult(\n            link,\n            () =>\n              \"when setting \" +\n              `${typename}[${JSON.stringify(parentId)}].${fieldname}`\n          );\n          updateLink({parentId, fieldname, childId});\n        }\n\n        // Add nested links.\n        for (const nestFieldname of objectType.nestedFieldNames) {\n          const nestValue:\n            | PrimitiveResult\n            | NodeFieldResult\n            | NestedFieldResult = entry[nestFieldname];\n          const topLevelNested: NestedFieldResult = (nestValue: any);\n          // No need for an extra safety check that this is present: we\n          // handled that while covering primitive fields.\n          const childFields = objectType.nestedFields[nestFieldname].nodes;\n          for (const childFieldname of Object.keys(childFields)) {\n            const childValue: PrimitiveResult | NodeFieldResult =\n              topLevelNested == null ? null : topLevelNested[childFieldname];\n            const link: NodeFieldResult = (childValue: any);\n            if (link === undefined) {\n              const s = JSON.stringify;\n              throw new Error(\n                `Missing nested field ` +\n                  `${s(nestFieldname)}.${s(childFieldname)} ` +\n                  `on ${s(entry.id)} ` +\n                  `of type ${s(typename)} (got ${(link: empty)})`\n              );\n            }\n            const fieldname = `${nestFieldname}.${childFieldname}`;\n            const parentId = entry.id;\n            const childId = this._nontransactionallyRegisterNodeFieldResult(\n              link,\n              () =>\n                \"when setting \" +\n                `${typename}[${JSON.stringify(parentId)}].${fieldname}`\n            );\n            updateLink({parentId, fieldname, childId});\n          }\n        }\n      }\n    }\n\n    // Last-updates, primitives, and links all updated: we're done.\n  }\n\n  /**\n   * Create a GraphQL selection set required to fetch the typename of an\n   * object. The resulting GraphQL can be embedded in any node context.\n   *\n   * The result of this query has type `E`, where `E` is the element\n   * type of `TypenamesUpdateResult`.\n   *\n   * This function is pure: it does not interact with the database.\n   */\n  _queryTypename(): Queries.Selection[] {\n    const b = Queries.build;\n    return [b.field(\"__typename\"), b.field(\"id\")];\n  }\n\n  /**\n   * Ingest typenames for many object IDs.\n   *\n   * See: `_queryTypenames`.\n   */\n  _updateTypenames(queryResult: TypenamesUpdateResult): void {\n    this._db.transaction(() => {\n      this._nontransactionallyUpdateTypenames(queryResult);\n    })();\n  }\n\n  /**\n   * As `_updateTypenames`, but do not enter any transactions. Other\n   * methods may call this method as a subroutine in a larger\n   * transaction.\n   */\n  _nontransactionallyUpdateTypenames(queryResult: TypenamesUpdateResult): void {\n    for (const datum of queryResult) {\n      // Need to go through `registerObject` to ensure that primitives,\n      // links, and connections are initialized.\n      this._nontransactionallyRegisterObject({\n        id: datum.id,\n        typename: datum.__typename,\n      });\n    }\n  }\n\n  /**\n   * Extract a structured object and all of its transitive dependencies\n   * from the database.\n   *\n   * The result is an object whose keys are fieldnames, and whose values\n   * are:\n   *\n   *   - for \"__typename\": the object's GraphQL typename;\n   *   - for \"id\": the object's GraphQL ID;\n   *   - for primitive fields: the corresponding primitive value;\n   *   - for node reference fields: a reference to the corresponding\n   *     extracted object, which may be `null`;\n   *   - for connection fields: an in-order array of the corresponding\n   *     extracted objects, each of which may be `null`;\n   *   - for nested fields: an object with primitive and node reference\n   *     fields in the same form as above (note: nested objects do not\n   *     automatically have a \"__typename\" field).\n   *\n   * For instance, the result of `extract(\"issue:1\")` might be:\n   *\n   *     {\n   *       __typename: \"Issue\",\n   *       id: \"issue:1172\",\n   *       title: \"bug: holding <Space> causes CPU to overheat\",\n   *       body: \"We should fix this immediately.\",\n   *       author: {\n   *         __typename: \"User\",\n   *         id: \"user:admin\",\n   *         login: \"admin\",\n   *       },\n   *       comments: [\n   *         {\n   *           __typename: \"IssueComment\",\n   *           body: \"I depend on this behavior; please do not change it.\",\n   *           author: {\n   *             __typename: \"User\",\n   *             id: \"user:longtimeuser4\",\n   *             login: \"longtimeuser4\",\n   *           },\n   *         },\n   *         {\n   *           __typename: \"IssueComment\",\n   *           body: \"That's horrifying.\",\n   *           author: {\n   *             __typename: \"User\",\n   *             id: \"user:admin\",\n   *             login: \"admin\",\n   *           },\n   *         },\n   *       ],\n   *       timeline: [\n   *         {\n   *           __typename: \"Commit\",\n   *           messageHeadline: \"reinstate CPU warmer (fixes #1172)\",\n   *           author: {\n   *             date: \"2001-02-03T04:05:06-07:00\",\n   *             user: {\n   *               __typename: \"User\",\n   *               id: \"user:admin\",\n   *               login: \"admin\",\n   *             }\n   *           }\n   *         }\n   *       ],\n   *     }\n   *\n   * (Here, \"title\" is a primitive, the \"author\" field on an issue is a\n   * node reference, \"comments\" is a connection, and the \"author\" field\n   * on a commit is a nested object.)\n   *\n   * The returned structure may be circular.\n   *\n   * If a node appears more than one time in the result---for instance,\n   * the \"user:admin\" node above---all instances will refer to the same\n   * object. However, objects are distinct across calls to `extract`, so\n   * it is safe to deeply mutate the result of this function.\n   *\n   * The provided object ID must correspond to a known object, or an\n   * error will be thrown. Furthermore, all transitive dependencies of\n   * the object must have been at least partially loaded at some point,\n   * or an error will be thrown.\n   */\n  extract(rootId: Schema.ObjectId): mixed {\n    const db = this._db;\n    return db.transaction(() => {\n      // Pre-compute transitive dependencies into a temporary table.\n      db.prepare(\n        dedent`\\\n          CREATE TEMPORARY TABLE transitive_dependencies (\n              id TEXT NOT NULL PRIMARY KEY,\n              typename TEXT NOT NULL\n          )\n        `\n      ).run();\n\n      try {\n        db.prepare(\n          dedent`\\\n            WITH RECURSIVE\n            cte_direct_deps (parent_id, child_id) AS (\n                SELECT parent_id, child_id FROM links\n                WHERE child_id IS NOT NULL\n                UNION\n                SELECT DISTINCT\n                    connections.object_id AS parent_id,\n                    connection_entries.child_id AS child_id\n                FROM connections JOIN connection_entries\n                ON connections.rowid = connection_entries.connection_id\n                WHERE child_id IS NOT NULL\n            ),\n            cte_transitive_deps (id) AS (\n                VALUES (:rootId) UNION\n                SELECT cte_direct_deps.child_id\n                FROM cte_transitive_deps JOIN cte_direct_deps\n                ON cte_transitive_deps.id = cte_direct_deps.parent_id\n            )\n            INSERT INTO transitive_dependencies (id, typename)\n            SELECT objects.id AS id, objects.typename AS typename\n            FROM objects JOIN cte_transitive_deps\n            ON objects.id = cte_transitive_deps.id\n          `\n        ).run({rootId});\n\n        // Check to make sure all required objects and connections have\n        // been updated at least once.\n        {\n          const neverUpdatedEntry: void | {|\n            +id: Schema.ObjectId,\n            +fieldname: null | Schema.Fieldname,\n          |} = db\n            .prepare(\n              dedent`\\\n                SELECT objects.id AS id, NULL as fieldname\n                FROM transitive_dependencies\n                JOIN objects USING (id)\n                WHERE objects.last_update IS NULL\n                UNION ALL\n                SELECT objects.id AS id, connections.fieldname AS fieldname\n                FROM transitive_dependencies\n                JOIN objects\n                    USING (id)\n                LEFT OUTER JOIN connections\n                    ON objects.id = connections.object_id\n                WHERE\n                    connections.rowid IS NOT NULL\n                    AND connections.last_update IS NULL\n              `\n            )\n            .get();\n          if (neverUpdatedEntry !== undefined) {\n            const entry = neverUpdatedEntry;\n            const s = JSON.stringify;\n            const missingData: string =\n              entry.fieldname == null\n                ? \"own data\"\n                : `${s(entry.fieldname)} connection`;\n            throw new Error(\n              `${s(rootId)} transitively depends on ${s(entry.id)}, ` +\n                `but that object's ${missingData} has never been fetched`\n            );\n          }\n        }\n\n        // Constructing the result set inherently requires mutation,\n        // because the object graph can have cycles. We start by\n        // creating a record for each object, with just that object's\n        // typename and ID. Then, we link in primitives, node\n        // references, and connection entries.\n        const allObjects: Map<Schema.ObjectId, Object> = new Map();\n\n        // Initialize `allObjects`.\n        {\n          const getObjects = db.prepare(\n            \"SELECT id AS id, typename AS typename FROM transitive_dependencies\"\n          );\n          for (const object of getObjects.iterate()) {\n            allObjects.set(object.id, {\n              id: object.id,\n              __typename: object.typename,\n            });\n          }\n        }\n\n        // Fill in primitive data.\n        {\n          const getPrimitives = db.prepare(\n            dedent`\\\n              SELECT\n                object_id AS objectId,\n                fieldname AS name,\n                value AS value\n              FROM transitive_dependencies JOIN primitives\n              ON transitive_dependencies.id = primitives.object_id\n              -- Order by field name to ensure that nested fields appear\n              -- before their eggs: e.g., \"author\" before \"author.user\".\n              ORDER BY fieldname ASC\n            `\n          );\n          for (const field: {|\n            +objectId: Schema.ObjectId,\n            +name: Schema.Fieldname,\n            +value: string | 0 | 1,\n          |} of getPrimitives.iterate()) {\n            const object = NullUtil.get(allObjects.get(field.objectId));\n            if (field.value === 0) {\n              // Nested object is absent.\n              object[field.name] = null;\n            } else if (field.value === 1) {\n              // Nested object is present.\n              object[field.name] = {};\n            } else {\n              // Normal field, not nested object indicator.\n              const value = JSON.parse(field.value);\n              const parts = field.name.split(\".\");\n              switch (parts.length) {\n                case 1:\n                  object[field.name] = value;\n                  break;\n                case 2: {\n                  const [nestName, eggName] = parts;\n                  if (object[nestName] !== null) {\n                    object[nestName][eggName] = value;\n                  }\n                  break;\n                }\n                // istanbul ignore next: should not be possible\n                default:\n                  throw new Error(\n                    `Corruption: bad field name: ${JSON.stringify(field.name)}`\n                  );\n              }\n            }\n          }\n        }\n\n        // Add links.\n        {\n          const getLinks = db.prepare(\n            dedent`\\\n              SELECT\n                parent_id AS parentId,\n                fieldname AS fieldname,\n                child_id AS childId\n              FROM transitive_dependencies JOIN links\n              ON transitive_dependencies.id = links.parent_id\n            `\n          );\n          for (const link: {|\n            +parentId: Schema.ObjectId,\n            +fieldname: Schema.Fieldname,\n            +childId: Schema.ObjectId | null,\n          |} of getLinks.iterate()) {\n            const parent = NullUtil.get(allObjects.get(link.parentId));\n            const child =\n              link.childId == null\n                ? null\n                : NullUtil.get(allObjects.get(link.childId));\n            const {fieldname} = link;\n            const parts = fieldname.split(\".\");\n            switch (parts.length) {\n              case 1:\n                parent[fieldname] = child;\n                break;\n              case 2: {\n                const [nestName, eggName] = parts;\n                if (parent[nestName] !== null) {\n                  parent[nestName][eggName] = child;\n                }\n                break;\n              }\n              // istanbul ignore next: should not be possible\n              default:\n                throw new Error(\n                  `Corruption: bad link name: ${JSON.stringify(fieldname)}`\n                );\n            }\n          }\n        }\n\n        // Add connections.\n        {\n          const getConnectionData = db.prepare(\n            dedent`\\\n              SELECT\n                  objects.id AS parentId,\n                  connections.fieldname AS fieldname,\n                  connection_entries.connection_id IS NOT NULL AS hasContents,\n                  connection_entries.child_id AS childId\n              FROM transitive_dependencies\n              JOIN objects\n                  USING (id)\n              JOIN connections\n                  ON objects.id = connections.object_id\n              LEFT OUTER JOIN connection_entries\n                  ON connections.rowid = connection_entries.connection_id\n              ORDER BY\n                  objects.id, connections.fieldname, connection_entries.idx ASC\n            `\n          );\n          for (const datum: {|\n            +parentId: Schema.ObjectId,\n            +fieldname: Schema.Fieldname,\n            +hasContents: 0 | 1,\n            +childId: Schema.ObjectId | null,\n          |} of getConnectionData.iterate()) {\n            const parent = NullUtil.get(allObjects.get(datum.parentId));\n            if (parent[datum.fieldname] === undefined) {\n              parent[datum.fieldname] = [];\n            }\n            if (datum.hasContents) {\n              const child =\n                datum.childId == null\n                  ? null\n                  : NullUtil.get(allObjects.get(datum.childId));\n              parent[datum.fieldname].push(child);\n            }\n          }\n        }\n\n        const result = allObjects.get(rootId);\n        if (result === undefined) {\n          throw new Error(\"No such object: \" + JSON.stringify(rootId));\n        }\n        return result;\n      } finally {\n        this._db.prepare(\"DROP TABLE temp.transitive_dependencies\").run();\n      }\n    })();\n  }\n}\n\n/**\n * Decomposition of a schema, grouping types by their kind (object vs.\n * union) and object fields by their kind (primitive vs. link vs.\n * connection).\n *\n * All arrays contain elements in arbitrary order.\n */\ntype SchemaInfo = {|\n  +objectTypes: {|\n    +[Schema.Typename]: {|\n      +fields: {|+[Schema.Fieldname]: Schema.FieldType|},\n      +nestedFields: {|\n        +[Schema.Fieldname]: {|\n          +primitives: {|\n            +[Schema.Fieldname]: Schema.PrimitiveFieldType,\n          |},\n          +nodes: {|\n            +[Schema.Fieldname]: Schema.NodeFieldType,\n          |},\n        |},\n      |},\n      +primitiveFieldNames: $ReadOnlyArray<Schema.Fieldname>,\n      +linkFieldNames: $ReadOnlyArray<Schema.Fieldname>,\n      +connectionFieldNames: $ReadOnlyArray<Schema.Fieldname>,\n      +nestedFieldNames: $ReadOnlyArray<Schema.Fieldname>,\n      // There is always exactly one ID field, so it needs no\n      // special representation. (It's still included in the `fields`\n      // dictionary, though.)\n    |},\n  |},\n  +unionTypes: {|\n    +[Schema.Fieldname]: {|\n      +clauses: $ReadOnlyArray<Schema.Typename>,\n    |},\n  |},\n|};\n\nexport function _buildSchemaInfo(schema: Schema.Schema): SchemaInfo {\n  const result = {\n    objectTypes: (({}: any): {|\n      [Schema.Typename]: {|\n        +fields: {|+[Schema.Fieldname]: Schema.FieldType|},\n        +nestedFields: {|\n          [Schema.Fieldname]: {|\n            +primitives: {|\n              [Schema.Fieldname]: Schema.PrimitiveFieldType,\n            |},\n            +nodes: {|\n              [Schema.Fieldname]: Schema.NodeFieldType,\n            |},\n          |},\n        |},\n        +primitiveFieldNames: Array<Schema.Fieldname>,\n        +linkFieldNames: Array<Schema.Fieldname>,\n        +connectionFieldNames: Array<Schema.Fieldname>,\n        +nestedFieldNames: Array<Schema.Fieldname>,\n      |},\n    |}),\n    unionTypes: (({}: any): {|\n      [Schema.Fieldname]: {|\n        +clauses: $ReadOnlyArray<Schema.Typename>,\n      |},\n    |}),\n  };\n  for (const typename of Object.keys(schema)) {\n    const type = schema[typename];\n    switch (type.type) {\n      case \"SCALAR\":\n        // Nothing to do.\n        break;\n      case \"ENUM\":\n        // Nothing to do.\n        break;\n      case \"OBJECT\": {\n        const entry: {|\n          +fields: {|+[Schema.Fieldname]: Schema.FieldType|},\n          +nestedFields: $PropertyType<\n            $ElementType<\n              $PropertyType<typeof result, \"objectTypes\">,\n              Schema.Fieldname\n            >,\n            \"nestedFields\"\n          >,\n          +primitiveFieldNames: Array<Schema.Fieldname>,\n          +linkFieldNames: Array<Schema.Fieldname>,\n          +connectionFieldNames: Array<Schema.Fieldname>,\n          +nestedFieldNames: Array<Schema.Fieldname>,\n        |} = {\n          fields: type.fields,\n          nestedFields: ({}: any),\n          primitiveFieldNames: [],\n          linkFieldNames: [],\n          connectionFieldNames: [],\n          nestedFieldNames: [],\n        };\n        result.objectTypes[typename] = entry;\n        for (const fieldname of Object.keys(type.fields)) {\n          const field = type.fields[fieldname];\n          switch (field.type) {\n            case \"ID\":\n              break;\n            case \"PRIMITIVE\":\n              entry.primitiveFieldNames.push(fieldname);\n              break;\n            case \"NODE\":\n              entry.linkFieldNames.push(fieldname);\n              break;\n            case \"CONNECTION\":\n              entry.connectionFieldNames.push(fieldname);\n              break;\n            case \"NESTED\": {\n              entry.nestedFieldNames.push(fieldname);\n              const nestedFieldData: $ElementType<\n                $PropertyType<typeof entry, \"nestedFields\">,\n                Schema.Fieldname\n              > = {primitives: ({}: any), nodes: ({}: any)};\n              for (const eggFieldname of Object.keys(field.eggs)) {\n                const eggField = field.eggs[eggFieldname];\n                switch (eggField.type) {\n                  case \"PRIMITIVE\":\n                    nestedFieldData.primitives[eggFieldname] = eggField;\n                    break;\n                  case \"NODE\":\n                    nestedFieldData.nodes[eggFieldname] = eggField;\n                    break;\n                  // istanbul ignore next\n                  default:\n                    throw new Error((eggField.type: empty));\n                }\n              }\n              entry.nestedFields[fieldname] = nestedFieldData;\n              break;\n            }\n            // istanbul ignore next\n            default:\n              throw new Error((field.type: empty));\n          }\n        }\n        break;\n      }\n      case \"UNION\": {\n        const entry = {clauses: Object.keys(type.clauses)};\n        result.unionTypes[typename] = entry;\n        break;\n      }\n      // istanbul ignore next\n      default:\n        throw new Error((type.type: empty));\n    }\n  }\n  return result;\n}\n\ntype UpdateId = number;\ntype NetworkLogId = number;\n\n/**\n * A set of objects and connections that should be updated.\n */\ntype QueryPlan = {|\n  +typenames: $ReadOnlyArray<Schema.ObjectId>,\n  +objects: $ReadOnlyArray<{|\n    +typename: Schema.Typename,\n    +id: Schema.ObjectId,\n  |}>,\n  +connections: $ReadOnlyArray<{|\n    +objectTypename: Schema.Typename,\n    +objectId: Schema.ObjectId,\n    +fieldname: Schema.Fieldname,\n    +endCursor: EndCursor | void, // `undefined` if never fetched\n  |}>,\n|};\n\n/**\n * An `endCursor` of a GraphQL `pageInfo` object, denoting where the\n * cursor should continue reading the next page. This is `null` when the\n * cursor is at the beginning of the connection (i.e., when the\n * connection is empty, or when `first: 0` is provided).\n */\ntype EndCursor = string | null;\n\ntype PrimitiveResult = string | number | boolean | null;\ntype NodeFieldResult = {|\n  +__typename?: Schema.Typename, // omitted for queries via unfaithful fields\n  +id: Schema.ObjectId,\n|} | null;\ntype ConnectionFieldResult = {|\n  +totalCount: number,\n  +pageInfo: {|+hasNextPage: boolean, +endCursor: string | null|},\n  +nodes: $ReadOnlyArray<NodeFieldResult>,\n|};\ntype NestedFieldResult = {\n  +[Schema.Fieldname]: PrimitiveResult | NodeFieldResult,\n} | null;\n\n/**\n * Result describing only the typename of a set of nodes. Used when we\n * only have references to nodes via unfaithful fields.\n */\ntype TypenamesUpdateResult = $ReadOnlyArray<{|\n  +__typename: Schema.Typename,\n  +id: Schema.ObjectId,\n|}>;\nexport type _TypenamesUpdateResult = TypenamesUpdateResult; // for tests\n\n/**\n * Result describing own-data for many nodes of a given type. Whether a\n * value is a `PrimitiveResult` or a `NodeFieldResult` is determined by\n * the schema.\n *\n * This type would be exact but for facebook/flow#2977, et al.\n */\ntype OwnDataUpdateResult = $ReadOnlyArray<{\n  +__typename: Schema.Typename, // the same for all entries\n  +id: Schema.ObjectId,\n  +[nonConnectionFieldname: Schema.Fieldname]:\n    | PrimitiveResult\n    | NodeFieldResult\n    | NestedFieldResult,\n}>;\nexport type _OwnDataUpdateResult = OwnDataUpdateResult; // for tests\n\n/**\n * Result describing new elements for connections on a single node.\n *\n * This type would be exact but for facebook/flow#2977, et al.\n */\ntype NodeConnectionsUpdateResult = {\n  +id: Schema.ObjectId,\n  +[connectionFieldname: Schema.Fieldname]: ConnectionFieldResult,\n};\nexport type _NodeConnectionsUpdateResult = NodeConnectionsUpdateResult; // for tests\n\n/**\n * Result describing all kinds of updates. Each key's prefix determines\n * what type of results the corresponding value represents (see\n * constants below). No field prefix is a prefix of another, so this\n * characterization is complete.\n *\n * This type would be exact but for facebook/flow#2977, et al.\n *\n * See: `_FIELD_PREFIXES`.\n */\ntype UpdateResult = {\n  // The prefix of each key determines what type of results the value\n  // represents. See constants below.\n  +[string]:\n    | TypenamesUpdateResult\n    | OwnDataUpdateResult\n    | NodeConnectionsUpdateResult,\n};\n\nexport const _FIELD_PREFIXES: {|\n  NODE_CONNECTIONS: string,\n  OWN_DATA: string,\n  TYPENAMES: string,\n|} = deepFreeze({\n  /**\n   * A key of an `UpdateResult` has this prefix if and only if the\n   * corresponding value represents `TypenamesUpdateResult`s.\n   */\n  TYPENAMES: \"typenames_\",\n\n  /**\n   * A key of an `UpdateResult` has this prefix if and only if the\n   * corresponding value represents `OwnDataUpdateResult`s.\n   */\n  OWN_DATA: \"owndata_\",\n\n  /**\n   * A key of an `UpdateResult` has this prefix if and only if the\n   * corresponding value represents `NodeConnectionsUpdateResult`s.\n   */\n  NODE_CONNECTIONS: \"node_\",\n});\n\n/**\n * Convert a prepared statement into a JS function that executes that\n * statement and asserts that it makes exactly one change to the\n * database.\n *\n * The prepared statement must use only named parameters, not positional\n * parameters.\n *\n * The prepared statement must not return data (e.g., INSERT and UPDATE\n * are okay; SELECT is not).\n *\n * The statement is not executed inside an additional transaction, so in\n * the case that the assertion fails, the effects of the statement are\n * not rolled back by this function.\n *\n * This is useful when the statement is like `UPDATE ... WHERE id = ?`\n * and it is assumed that `id` is a primary key for a record already\n * exists---if either existence or uniqueness fails, this method will\n * raise an error quickly instead of leading to a corrupt state.\n *\n * For example, this code...\n *\n *     const setName: ({|+userId: string, +newName: string|}) => void =\n *       _makeSingleUpdateFunction(\n *         \"UPDATE users SET name = :newName WHERE id = :userId\"\n *       );\n *     setName({userId: \"user:foo\", newName: \"The Magnificent Foo\"});\n *\n * ...will update `user:foo`'s name, or throw an error if there is no\n * such user or if multiple users have this ID.\n */\nexport function _makeSingleUpdateFunction<Args: BindingDictionary>(\n  stmt: Statement\n): (Args) => void {\n  if (stmt.reader) {\n    throw new Error(\n      \"Cannot create update function for statement that returns data: \" +\n        stmt.source\n    );\n  }\n  return (args: Args) => {\n    const result = stmt.run(args);\n    if (result.changes !== 1) {\n      throw new Error(\n        \"Bad change count: \" +\n          JSON.stringify({source: stmt.source, args, changes: result.changes})\n      );\n    }\n  };\n}\n","// @flow\n\nimport * as Schema from \"../../graphql/schema\";\n\nexport default function schema(): Schema.Schema {\n  const s = Schema;\n  const types = {\n    DateTime: s.scalar(\"string\"),\n    GitObjectID: s.scalar(\"string\"),\n    GitTimestamp: s.scalar(\"string\"),\n    Int: s.scalar(\"number\"),\n    String: s.scalar(\"string\"),\n    URI: s.scalar(\"string\"),\n    PullRequestReviewState: s.enum([\n      \"PENDING\",\n      \"COMMENTED\",\n      \"APPROVED\",\n      \"CHANGES_REQUESTED\",\n      \"DISMISSED\",\n    ]),\n    ReactionContent: s.enum([\n      \"THUMBS_UP\",\n      \"THUMBS_DOWN\",\n      \"LAUGH\",\n      \"HOORAY\",\n      \"CONFUSED\",\n      \"HEART\",\n      \"ROCKET\",\n      \"EYES\",\n    ]),\n    Repository: s.object({\n      id: s.id(),\n      url: s.primitive(s.nonNull(\"URI\")),\n      name: s.primitive(s.nonNull(\"String\")),\n      owner: s.node(\"RepositoryOwner\"),\n      issues: s.connection(\"Issue\"),\n      pullRequests: s.connection(\"PullRequest\"),\n      defaultBranchRef: s.node(\"Ref\"),\n      createdAt: s.primitive(s.nonNull(\"DateTime\")),\n    }),\n    Issue: s.object({\n      id: s.id(),\n      url: s.primitive(s.nonNull(\"URI\")),\n      title: s.primitive(s.nonNull(\"String\")),\n      body: s.primitive(s.nonNull(\"String\")),\n      number: s.primitive(s.nonNull(\"Int\")),\n      author: s.node(\"Actor\"),\n      comments: s.connection(\"IssueComment\"),\n      reactions: s.connection(\"Reaction\"),\n      createdAt: s.primitive(s.nonNull(\"DateTime\")),\n    }),\n    PullRequest: s.object({\n      id: s.id(),\n      url: s.primitive(s.nonNull(\"URI\")),\n      title: s.primitive(s.nonNull(\"String\")),\n      body: s.primitive(s.nonNull(\"String\")),\n      number: s.primitive(s.nonNull(\"Int\")),\n      mergeCommit: s.node(\"Commit\"),\n      additions: s.primitive(s.nonNull(\"Int\")),\n      deletions: s.primitive(s.nonNull(\"Int\")),\n      author: s.node(\"Actor\"),\n      comments: s.connection(\"IssueComment\"), // yes, PRs have IssueComments\n      reviews: s.connection(\"PullRequestReview\"),\n      reactions: s.connection(\"Reaction\"),\n      createdAt: s.primitive(s.nonNull(\"DateTime\")),\n      baseRefName: s.primitive(s.nonNull(\"String\")),\n    }),\n    IssueComment: s.object({\n      id: s.id(),\n      url: s.primitive(s.nonNull(\"URI\")),\n      body: s.primitive(s.nonNull(\"String\")),\n      author: s.node(\"Actor\"),\n      reactions: s.connection(\"Reaction\"),\n      createdAt: s.primitive(s.nonNull(\"DateTime\")),\n    }),\n    PullRequestReview: s.object({\n      id: s.id(),\n      url: s.primitive(s.nonNull(\"URI\")),\n      body: s.primitive(s.nonNull(\"String\")),\n      author: s.node(\"Actor\"),\n      state: s.primitive(s.nonNull(\"PullRequestReviewState\")),\n      comments: s.connection(\"PullRequestReviewComment\"),\n      createdAt: s.primitive(s.nonNull(\"DateTime\")),\n    }),\n    PullRequestReviewComment: s.object({\n      id: s.id(),\n      url: s.primitive(s.nonNull(\"URI\")),\n      body: s.primitive(s.nonNull(\"String\")),\n      author: s.node(\"Actor\"),\n      reactions: s.connection(\"Reaction\"),\n      createdAt: s.primitive(s.nonNull(\"DateTime\")),\n    }),\n    Reaction: s.object({\n      id: s.id(),\n      content: s.primitive(s.nonNull(\"ReactionContent\")),\n      user: s.node(\"User\", s.unfaithful([\"User\", \"Organization\"])),\n      createdAt: s.primitive(s.nonNull(\"DateTime\")),\n    }),\n    Ref: s.object({\n      id: s.id(),\n      // Unlike most node references, this is guaranteed non-null (but\n      // we have no way to express that).\n      target: s.node(\"GitObject\"),\n    }),\n    GitObject: s.union([\"Blob\", \"Commit\", \"Tag\", \"Tree\"]),\n    Blob: s.object({\n      id: s.id(),\n      oid: s.primitive(s.nonNull(\"GitObjectID\")),\n    }),\n    Commit: s.object({\n      id: s.id(),\n      url: s.primitive(s.nonNull(\"URI\")),\n      oid: s.primitive(s.nonNull(\"GitObjectID\")),\n      message: s.primitive(s.nonNull(\"String\")),\n      author: /* GitActor */ s.nested({\n        // The GitHub schema indicates that `date` can be null, but does\n        // not indicate when this might be the case.\n        date: s.primitive(s.nullable(\"GitTimestamp\")),\n        user: s.node(\"User\", s.unfaithful([\"User\", \"Bot\"])),\n      }),\n      parents: s.connection(\"Commit\"),\n      // In contrast to the author.date, this is both nonNull and is\n      // specifically the authoredDate. Docs for author.date suggest that\n      // field might be the commiter date instead.\n      authoredDate: s.primitive(s.nonNull(\"GitTimestamp\")),\n    }),\n    Tag: s.object({\n      id: s.id(),\n      oid: s.primitive(s.nonNull(\"GitObjectID\")),\n    }),\n    Tree: s.object({\n      id: s.id(),\n      oid: s.primitive(s.nonNull(\"GitObjectID\")),\n    }),\n    Actor: s.union([\"User\", \"Bot\", \"Organization\"]), // actually an interface\n    RepositoryOwner: s.union([\"User\", \"Organization\"]), // actually an interface\n    User: s.object({\n      id: s.id(),\n      url: s.primitive(s.nonNull(\"URI\")),\n      login: s.primitive(s.nonNull(\"String\")),\n    }),\n    Bot: s.object({\n      id: s.id(),\n      url: s.primitive(s.nonNull(\"URI\")),\n      login: s.primitive(s.nonNull(\"String\")),\n    }),\n    Organization: s.object({\n      id: s.id(),\n      url: s.primitive(s.nonNull(\"URI\")),\n      login: s.primitive(s.nonNull(\"String\")),\n    }),\n  };\n  return s.schema(types);\n}\n","// @flow\n\nimport {type RepoId, repoIdToString} from \"./repoId\";\n\n/**\n * A derived ID to reference a cache layer.\n */\nexport opaque type CacheId: string = string;\n\n/**\n * Derives the CacheId for a RepoId.\n *\n * Returned `CacheId`s will be:\n * - Deterministic\n * - Unique for this plugin\n * - Lowercase\n * - Safe to use for filenames\n * - Distinct for semantically distinct inputs (input IDs that differ\n *   only in case may map to the same output, because GitHub does not\n *   permit collisions-modulo-case)\n */\nexport function cacheIdForRepoId(repoId: RepoId): CacheId {\n  // GitHub owner (user/organization) and repository names may be in\n  // mixed case, but GitHub prevents mixed-case collisions: e.g., if\n  // `foo` is a user then `Foo` cannot also be a user, and likewise for\n  // repositories. GitHub login names are DNS-safe (`[0-9A-Za-z-]` only)\n  // and so are filename-safe. Repository names have a slightly larger\n  // character set, including underscore, but are also filename-safe.\n  // Because login may not contain an underscore, it thus suffices to\n  // use an underscore as the delimiter. The resulting filename uses\n  // only `[0-9A-Za-z_.-]` and so is valid on all major filesystems.\n  const owner = repoId.owner.toLowerCase();\n  const name = repoId.name.toLowerCase();\n  if (owner.includes(\"_\")) {\n    throw new Error(\n      \"unexpected underscore in GitHub owner name would be ambiguous: \" +\n        repoIdToString(repoId)\n    );\n  }\n  return `github_${owner}_${name}`;\n}\n","// @flow\n\n// The outcome of a single attempt of a retryable operation.\nexport type AttemptOutcome<+T, +E> =\n  // The operation has terminated successfully.\n  | {|+type: \"DONE\", +value: T|}\n  // The operation has terminated with a fatal error.\n  | {|+type: \"FATAL\", +err: E|}\n  // The operation has encountered a transient error and should retry\n  // after a delay, if retries are still available.\n  | {|+type: \"RETRY\", +err: E|}\n  // The operation has exceeded its rate-limit budget and should wait\n  // until the given timestamp for that budget to be refreshed, then\n  // retry.\n  | {|+type: \"WAIT\", +until: Date, +err: E|};\n\n// The final result of executing an operation after retrying zero or more\n// times.\nexport type Result<+T, +E> =\n  // The operation terminated successfully.\n  | {|+type: \"DONE\", +value: T|}\n  // The operation encountered a fatal error, or tried to retry or wait\n  // more times than permitted by the policy.\n  | {|+type: \"FAILED\", +err: E|};\n\nexport type RetryPolicy = {|\n  // How long to wait before the first retry, in milliseconds. Defaults\n  // to 1000 (i.e., 1 second).\n  +initialDelayMs: number,\n  // The factor by which to increase the retry delay after each attempt.\n  // Defaults to 2.0.\n  +backoffRatio: number,\n  // The extreme factor by which delays may be subject to jitter. The\n  // actual jitter factor is chosen from the uniform distribution from\n  // `1.0` to `jitterRatio`. For example, if `jitterRatio` is `1.2` and\n  // the nominal delay for an attempt is `4.0` seconds, then the actual\n  // delay is chosen uniformly between `4.0` and `4.8` seconds. Jitter\n  // is not cumulative; the actual jitter factor is independent for each\n  // attempt. Defaults to `1.2`.\n  +jitterRatio: number,\n  // The number of times that a `RETRY` outcome will be honored before\n  // giving up. Note that if an operation always retries, it will\n  // execute `maxRetries + 1` times in total. Defaults to 3.\n  +maxRetries: number,\n  // The number of times that a `WAIT` outcome will be honored before\n  // giving up. Defaults to 1.\n  +maxWaits: number,\n|};\n\nfunction defaultPolicy(): RetryPolicy {\n  return {\n    initialDelayMs: 1000,\n    backoffRatio: 2.0,\n    jitterRatio: 1.2,\n    maxRetries: 3,\n    maxWaits: 1,\n  };\n}\n\nexport interface Io {\n  // Return a new `Date` object representing the current instant.\n  now(): Date;\n  // Return a promise that resolves after the given number of milliseconds.\n  sleepMs(ms: number): Promise<void>;\n  // Rolls an actual jitter factor given a maximum jitter ratio.\n  rollJitter(r: number): number;\n}\n\n/**\n * Run a retryable operation until it terminates or exhausts its retry\n * policy. If `attempt` ever rejects, this function also immediately\n * rejects with the same value.\n */\nexport default async function retry<T, E>(\n  attempt: () => Promise<AttemptOutcome<T, E>>,\n  policy?: $Shape<RetryPolicy>,\n  // istanbul ignore next: impure non-test implementation\n  io?: Io = realIo\n): Promise<Result<T, E>> {\n  const fullPolicy: RetryPolicy = {...defaultPolicy(), ...policy};\n  let nextRetryDelayMs = fullPolicy.initialDelayMs;\n  let retries = 0;\n  let waits = 0;\n  while (true) {\n    const outcome = await attempt();\n    switch (outcome.type) {\n      case \"DONE\":\n        return {type: \"DONE\", value: outcome.value};\n      case \"FATAL\":\n        return {type: \"FAILED\", err: outcome.err};\n      case \"RETRY\": {\n        if (retries >= fullPolicy.maxRetries) {\n          return {type: \"FAILED\", err: outcome.err};\n        }\n        retries++;\n        const delayMs =\n          nextRetryDelayMs * io.rollJitter(fullPolicy.jitterRatio);\n        await io.sleepMs(delayMs);\n        nextRetryDelayMs *= fullPolicy.backoffRatio;\n        break;\n      }\n      case \"WAIT\": {\n        if (waits >= fullPolicy.maxWaits) {\n          return {type: \"FAILED\", err: outcome.err};\n        }\n        waits++;\n        const now = io.now();\n        const delayMs = outcome.until - now;\n        if (delayMs < 0) {\n          const fmt = (d: Date): string => `@${(+d / 1000).toFixed(3)}`;\n          throw new Error(\n            `wait-until time in the past: ${fmt(outcome.until)} < ${fmt(now)}`\n          );\n        }\n        await io.sleepMs(delayMs);\n        break;\n      }\n      // istanbul ignore next: unreachable per flow\n      default:\n        throw new Error((outcome.type: empty));\n    }\n  }\n  // istanbul ignore next: unreachable\n  // ESLint knows that this next line is unreachable, but Flow doesn't. :-)\n  // eslint-disable-next-line no-unreachable\n  throw new Error(\"unreachable\");\n}\n\nconst realIo = {\n  // istanbul ignore next: impure non-test implementation\n  now(): Date {\n    return new Date();\n  },\n  // istanbul ignore next: impure non-test implementation\n  sleepMs(ms: number): Promise<void> {\n    return new Promise((resolve) => {\n      setTimeout(resolve, ms);\n    });\n  },\n  // istanbul ignore next: impure non-test implementation\n  rollJitter(r: number): number {\n    return 1 + Math.random() * (r - 1);\n  },\n};\n","// @flow\n/*\n * API to scrape data from a GitHub repo using the GitHub API. See the\n * docstring of the default export for more details.\n */\n\nimport Database from \"better-sqlite3\";\nimport fetch from \"isomorphic-fetch\";\n\nimport {type RepoId, repoIdToString} from \"./repoId\";\nimport {Mirror} from \"../../graphql/mirror\";\nimport * as Queries from \"../../graphql/queries\";\nimport {stringify, inlineLayout, type Body} from \"../../graphql/queries\";\nimport * as Schema from \"../../graphql/schema\";\nimport type {Repository} from \"./graphqlTypes\";\nimport schema from \"./schema\";\nimport {type GithubToken} from \"./token\";\nimport {cacheIdForRepoId} from \"./cacheId\";\nimport {type CacheProvider} from \"../../backend/cache\";\nimport retry, {type AttemptOutcome} from \"../../util/retry\";\n\ntype FetchRepoOptions = {|\n  +token: GithubToken,\n  +cache: CacheProvider,\n|};\n\n/**\n * Retrieve previously scraped data for a GitHub repo from cache.\n *\n * Note: the GithubToken requirement is planned to be removed.\n * See https://github.com/sourcecred/sourcecred/issues/1580\n *\n * @param {RepoId} repoId\n *    the GitHub repository to retrieve from cache\n * @param {GithubToken} token\n *    authentication token to be used for the GitHub API; generate a\n *    token at: https://github.com/settings/tokens\n * @return {Promise<Repository>}\n *    a promise that resolves to a JSON object containing the data\n *    scraped from the repository, with data format to be specified\n *    later\n */\nexport async function fetchGithubRepoFromCache(\n  repoId: RepoId,\n  {token, cache}: FetchRepoOptions\n): Promise<Repository> {\n  // TODO: remove the need for a GithubToken to resolve the ID.\n  // See https://github.com/sourcecred/sourcecred/issues/1580\n  const postQueryWithToken = (payload) => postQuery(payload, token);\n  const resolvedId: Schema.ObjectId = await resolveRepositoryGraphqlId(\n    postQueryWithToken,\n    repoId\n  );\n\n  const db = await cache.database(cacheIdForRepoId(repoId));\n  const mirror = new Mirror(db, schema(), {\n    guessTypename: _guessTypename,\n  });\n\n  return ((mirror.extract(resolvedId): any): Repository);\n}\n\n/**\n * Scrape data from a GitHub repo using the GitHub API.\n *\n * @param {RepoId} repoId\n *    the GitHub repository to be scraped\n * @param {GithubToken} token\n *    authentication token to be used for the GitHub API; generate a\n *    token at: https://github.com/settings/tokens\n * @return {Promise<object>}\n *    a promise that resolves to a JSON object containing the data\n *    scraped from the repository, with data format to be specified\n *    later\n */\nexport default async function fetchGithubRepo(\n  repoId: RepoId,\n  {token, cache}: FetchRepoOptions\n): Promise<Repository> {\n  const postQueryWithToken = (payload) => postQuery(payload, token);\n  const resolvedId: Schema.ObjectId = await resolveRepositoryGraphqlId(\n    postQueryWithToken,\n    repoId\n  );\n\n  // Key the cache file against the RepoId, but make sure that the\n  // name is valid and uniquely identifying even on case-insensitive\n  // filesystems (HFS, HFS+, APFS, NTFS) or filesystems preventing\n  // equals signs in file names.\n  const db: Database = await cache.database(cacheIdForRepoId(repoId));\n  const mirror = new Mirror(db, schema(), {\n    guessTypename: _guessTypename,\n  });\n  mirror.registerObject({typename: \"Repository\", id: resolvedId});\n\n  // These are arbitrary tuning parameters.\n  // TODO(#638): Design a configuration system for plugins.\n  const ttlSeconds = 60 * 60 * 12;\n  const nodesLimit = 100;\n  const connectionLimit = 100;\n\n  await mirror.update(postQueryWithToken, {\n    since: new Date(Date.now() - ttlSeconds * 1000),\n    now: () => new Date(),\n    // These properties are arbitrary tuning parameters.\n    nodesLimit,\n    connectionLimit,\n    // These values are the maxima allowed by GitHub.\n    nodesOfTypeLimit: 100,\n    connectionPageSize: 100,\n  });\n  return ((mirror.extract(resolvedId): any): Repository);\n}\n\n// GitHub object IDs are urlsafe-base64-encoded strings that decode to\n// ASCII strings of the form \"123:Typename4567[...]\", where the \"123\"\n// numbers are a function only of the typename and the \"4567\" numbers\n// are the object's database ID, and the \"[...]\" is either empty or a\n// further section like \":commithash\" for commits.\n//\n// See tests for `_guessTypename` for some example object IDs.\nconst GITHUB_ID_TYPENAME_PATTERN = /^[0-9]*:([a-z0-9_-]*[a-z_-])[0-9]+(?:[^a-z0-9_-].*)?$/i;\n\nexport function _guessTypename(\n  objectId: Schema.ObjectId\n): Schema.Typename | null {\n  const decodedId = Buffer.from(objectId, \"base64\").toString(\"utf-8\");\n  const match = decodedId.match(GITHUB_ID_TYPENAME_PATTERN);\n  return match ? match[1] : null;\n}\n\nconst GITHUB_GRAPHQL_SERVER = \"https://api.github.com/graphql\";\n\ntype GithubResponseError =\n  | {|+type: \"FETCH_ERROR\", error: Error|}\n  | {|+type: \"GRAPHQL_ERROR\", error: {errors: [{|type: string|}]}|}\n  | {|+type: \"RATE_LIMIT_EXCEEDED\", error: mixed|}\n  | {|+type: \"GITHUB_INTERNAL_EXECUTION_ERROR\", error: mixed|}\n  | {|+type: \"BAD_CREDENTIALS\", error: mixed|}\n  | {|+type: \"NO_DATA\", error: mixed|};\n\n// Fetch against the GitHub API with the provided options, returning a\n// promise that either resolves to the GraphQL result data or rejects\n// to a `GithubResponseError`.\nfunction tryGithubFetch(postBody: string, token: GithubToken): Promise<any> {\n  const fetchOptions = {\n    method: \"POST\",\n    body: postBody,\n    headers: {\n      Authorization: `bearer ${token}`,\n    },\n  };\n  return fetch(GITHUB_GRAPHQL_SERVER, fetchOptions).then(\n    (x) =>\n      x.json().then((x) => {\n        if (x.errors) {\n          if (\n            x.errors.length === 1 &&\n            x.errors[0].message.includes(\"it could be a GitHub bug\")\n          ) {\n            return Promise.reject(\n              ({\n                type: \"GITHUB_INTERNAL_EXECUTION_ERROR\",\n                error: x,\n              }: GithubResponseError)\n            );\n          } else if (\n            x.errors.length === 1 &&\n            x.errors[0].type === \"RATE_LIMITED\"\n          ) {\n            return Promise.reject(\n              ({type: \"RATE_LIMIT_EXCEEDED\", error: x}: GithubResponseError)\n            );\n          } else {\n            return Promise.reject(\n              ({type: \"GRAPHQL_ERROR\", error: x}: GithubResponseError)\n            );\n          }\n        }\n        if (x.data === undefined) {\n          if (x.message && x.message.includes(\"Bad credentials\")) {\n            return Promise.reject(\n              ({type: \"BAD_CREDENTIALS\", error: x}: GithubResponseError)\n            );\n          } else {\n            // See https://github.com/sourcecred/sourcecred/issues/350\n            return Promise.reject(\n              ({type: \"NO_DATA\", error: x}: GithubResponseError)\n            );\n          }\n        }\n        return Promise.resolve(x.data);\n      }),\n    (e) =>\n      Promise.reject(({type: \"FETCH_ERROR\", error: e}: GithubResponseError))\n  );\n}\n\nasync function errorDisposition(\n  e: GithubResponseError,\n  token: GithubToken\n): Promise<AttemptOutcome<empty, GithubResponseError>> {\n  if (\n    e.type === \"FETCH_ERROR\" ||\n    e.type === \"GRAPHQL_ERROR\" ||\n    e.type === \"BAD_CREDENTIALS\"\n  ) {\n    return {type: \"FATAL\", err: e};\n  }\n  if (e.type === \"GITHUB_INTERNAL_EXECUTION_ERROR\" || e.type === \"NO_DATA\") {\n    return {type: \"RETRY\", err: e};\n  }\n  if (e.type === \"RATE_LIMIT_EXCEEDED\") {\n    try {\n      const nominalRefreshTime = await quotaRefreshAt(token);\n      const refreshTime = _resolveRefreshTime(new Date(), nominalRefreshTime);\n      console.warn(\n        \"GitHub rate limit exceeded; waiting for refresh at \" +\n          refreshTime.toISOString()\n      );\n      return {type: \"WAIT\", until: refreshTime, err: e};\n    } catch (refreshError) {\n      // Fall back to waiting in 15-minute increments.\n      console.warn(\"GitHub rate limit exceeded; waiting 15 minutes\");\n      const delayMs = 15 * 60 * 1000;\n      return {type: \"WAIT\", until: new Date(Date.now() + delayMs), err: e};\n    }\n  }\n  throw new Error((e.type: empty));\n}\n\n/**\n * Determine the instant at which our GitHub quota will refresh.\n *\n * The returned promise may reject with a `GithubResponseError` or\n * string error message.\n */\nasync function quotaRefreshAt(token: GithubToken): Promise<Date> {\n  const b = Queries.build;\n  const query = b.query(\n    \"RateLimitReset\",\n    [],\n    [b.field(\"rateLimit\", {}, [b.field(\"resetAt\")])]\n  );\n  const postBody = JSON.stringify({\n    query: stringify.body([query], inlineLayout()),\n    variables: {},\n  });\n  const data = await tryGithubFetch(postBody, token);\n  const dateString = data.rateLimit.resetAt;\n  const result = new Date(dateString);\n  if (isNaN(result)) {\n    throw \"got NaN quota reset time: \" + JSON.stringify(data);\n  }\n  return result;\n}\n\n/**\n * Given a `resetAt` date response from GitHub, determine the actual\n * date until which we want to wait. We clamp to a reasonable range and\n * apply some padding.\n */\nexport function _resolveRefreshTime(now: Date, nominalRefreshTime: Date): Date {\n  let delayMs = +nominalRefreshTime - +now;\n  const [minDelayMs, maxDelayMs] = [0, 60 * 60 * 1000];\n  if (delayMs < minDelayMs || delayMs > maxDelayMs) {\n    const newDelayMs = Math.max(minDelayMs, Math.min(delayMs, maxDelayMs));\n    console.warn(\n      `clamping refresh delay from ${delayMs} ms to ${newDelayMs} ms`\n    );\n    delayMs = newDelayMs;\n  }\n  delayMs += 60 * 1000; // add 1 minute for padding around clock skew\n  return new Date(+now + delayMs);\n}\n\nasync function retryGithubFetch(\n  postBody: string,\n  token: GithubToken\n): Promise<any /* or rejects to GithubResponseError */> {\n  const policy = {\n    maxRetries: 5,\n    jitterRatio: 1.2,\n    // We wait in 15-minute intervals, and quotas reset every hour, so\n    // we shouldn't give up before waiting 4 times.\n    maxWaits: 4,\n  };\n  const retryResult = await retry(async () => {\n    try {\n      return {type: \"DONE\", value: await tryGithubFetch(postBody, token)};\n    } catch (errAny) {\n      const err: GithubResponseError = errAny;\n      return await errorDisposition(err, token);\n    }\n  }, policy);\n  switch (retryResult.type) {\n    case \"DONE\":\n      return retryResult.value;\n    case \"FAILED\":\n      throw retryResult.err;\n    default:\n      throw new Error((retryResult.type: empty));\n  }\n}\n\nexport async function postQuery(\n  {body, variables}: {+body: Body, +variables: mixed},\n  token: GithubToken\n): Promise<any> {\n  const postBody = JSON.stringify({\n    query: stringify.body(body, inlineLayout()),\n    variables: variables,\n  });\n  return retryGithubFetch(postBody, token).catch(\n    (error: GithubResponseError) => {\n      switch (error.type) {\n        case \"GITHUB_INTERNAL_EXECUTION_ERROR\":\n        case \"NO_DATA\":\n          console.error(\n            \"GitHub query failed! We're tracking these issues at \" +\n              \"https://github.com/sourcecred/sourcecred/issues/350.\\n\" +\n              \"If the error is a timeout or abuse rate limit, you can \" +\n              \"try loading a smaller repo, or trying again in a few minutes.\\n\" +\n              \"The actual failed response can be found below:\\n\" +\n              \"=================================================\"\n          );\n          console.error(error.error);\n          break;\n        case \"GRAPHQL_ERROR\":\n          error.error.errors.forEach((error) => {\n            if (error.type === \"NOT_FOUND\") {\n              console.error(\n                \"Unable to find the specified repository. Please check for typos \" +\n                  \"in the repository owner and name and confirm that you are using the correct token in \" +\n                  \"$SOURCECRED_GITHUB_TOKEN\"\n              );\n            } else {\n              console.error(\n                \"Unexpected GraphQL error: \" +\n                  JSON.stringify({postBody: postBody, error: error})\n              );\n            }\n          });\n          break;\n        case \"RATE_LIMIT_EXCEEDED\":\n          console.error(\n            \"You've exceeded your hourly GitHub rate limit.\\n\" +\n              \"You'll need to wait until it resets.\"\n          );\n          break;\n        case \"FETCH_ERROR\":\n          // Network error; no need for additional commentary.\n          break;\n        case \"BAD_CREDENTIALS\":\n          console.error(\n            \"An invalid token was supplied ($SOURCECRED_GITHUB_TOKEN). This is mostly likely caused by supplying a revoked token.\"\n          );\n          break;\n        default:\n          console.error(\n            \"Unexpected GitHub Error: \" +\n              JSON.stringify({postBody: postBody, error: error})\n          );\n      }\n      return Promise.reject(error);\n    }\n  );\n}\n\nasync function resolveRepositoryGraphqlId(\n  postQuery: ({+body: Body, +variables: mixed}) => Promise<any>,\n  repoId: RepoId\n): Promise<Schema.ObjectId> {\n  const b = Queries.build;\n  const payload = {\n    body: [\n      b.query(\n        \"ResolveRepositoryId\",\n        [b.param(\"owner\", \"String!\"), b.param(\"name\", \"String!\")],\n        [\n          b.field(\n            \"repository\",\n            {owner: b.variable(\"owner\"), name: b.variable(\"name\")},\n            [b.field(\"id\")]\n          ),\n        ]\n      ),\n    ],\n    variables: {owner: repoId.owner, name: repoId.name},\n  };\n  const data: {|+repository: null | {|+id: string|}|} = await postQuery(\n    payload\n  );\n  if (data.repository == null) {\n    throw new Error(\n      `No such repository: ${repoIdToString(repoId)} ` +\n        `(response data: ${JSON.stringify(data)})`\n    );\n  }\n  return data.repository.id;\n}\n","// @flow\n\nimport {Node, Parser} from \"commonmark\";\nimport {OPENTAG, CLOSETAG} from \"commonmark/lib/common\";\n\n/**\n * Extract maximal contiguous blocks of text from a Markdown string, in\n * source-appearance order.\n *\n * For the purposes of this method, code (of both the inline and block\n * varieties) is not considered text, and will not be included in the\n * output at all. HTML contents are similarly excluded.\n *\n * Normal text, emphasized/strong text, link text, and image alt text\n * all count as text and will be included. A block of text is not\n * required to have the same formatting: e.g., the Markdown document\n * given by `hello *there* [you](https://example.com)` without the\n * backticks has one contiguous block of text: `\"hello there you\"`.\n *\n * Softbreaks count as normal text, and render as a single space.\n * Hardbreaks break a contiguous block of text.\n *\n * Block-level elements, such as paragraphs, lists, and block quotes,\n * break contiguous blocks of text.\n *\n * See test cases for examples.\n */\nexport function textBlocks(string: string): string[] {\n  const ast = new Parser().parse(string);\n  deformat(ast);\n  coalesceText(ast);\n  const walker = ast.walker();\n  const results = [];\n  for (let step; (step = walker.next()); ) {\n    // $FlowIgnore[value-as-type]\n    const node: Node = step.node;\n    const type: NodeType = node.type;\n    if (type === \"text\") {\n      results.push(node.literal);\n    }\n  }\n  return results;\n}\n\n// Copied from:\n// https://github.com/DefinitelyTyped/DefinitelyTyped/blob/bd35c127a6fd869ab2844082ae41047668178b7f/types/commonmark/index.d.ts#L14-L15\ntype NodeType =\n  | \"text\"\n  | \"softbreak\"\n  | \"linebreak\"\n  | \"emph\"\n  | \"strong\"\n  | \"html_inline\"\n  | \"link\"\n  | \"image\"\n  | \"code\"\n  | \"document\"\n  | \"paragraph\"\n  | \"block_quote\"\n  | \"item\"\n  | \"list\"\n  | \"heading\"\n  | \"code_block\"\n  | \"html_block\"\n  | \"thematic_break\"\n  | \"custom_inline\"\n  | \"custom_block\";\n\n// $FlowIgnore[value-as-type]\nexport function deformat(ast: Node): void {\n  const walker = ast.walker();\n  // We ignore the contents of HTML \"code\" elements and their subtrees.\n  // This variable tracks how deep we are in such a tree. It is 0 if we\n  // are not in such a tree, 1 if we are in a \"code\" element, 2 if we\n  // are in an element inside a \"code\" element, etc.\n  let htmlDepth: number = 0;\n  const reOpenCodeTag = /^<code(?:$|[ >])/i;\n  const reOpenTag = new RegExp(`^(?:${OPENTAG})`);\n  const reCloseTag = new RegExp(`^(?:${CLOSETAG})`);\n\n  for (let step; (step = walker.next()); ) {\n    // $FlowIgnore[value-as-type]\n    const node: Node = step.node;\n    const type: NodeType = node.type;\n    if (htmlDepth > 0) {\n      if (type === \"html_inline\") {\n        if (reOpenTag.test(node.literal)) {\n          htmlDepth++;\n        } else if (reCloseTag.test(node.literal)) {\n          htmlDepth--;\n        }\n      }\n      // The AST walker gets into a broken state if you unlink a node\n      // that has children before those children have been visited. We\n      // only unlink when leaving a node, or when entering a node that\n      // has no children.\n      if (!step.entering || node.firstChild == null) {\n        node.unlink();\n        continue;\n      }\n    }\n    switch (type) {\n      case \"text\":\n        break;\n      case \"softbreak\": {\n        const space = new Node(\"text\", node.sourcepos);\n        space.literal = \" \";\n        node.insertBefore(space);\n        node.unlink();\n        break;\n      }\n      case \"linebreak\":\n        break;\n      case \"emph\":\n      case \"strong\":\n      case \"link\":\n      case \"image\":\n        if (!step.entering) {\n          // Splice out the node.\n          while (node.firstChild) {\n            node.insertBefore(node.firstChild);\n          }\n          node.unlink();\n        }\n        break;\n      case \"html_inline\":\n        if (reOpenCodeTag.test(node.literal)) {\n          htmlDepth++; // should have been 0 previously\n        }\n        node.unlink();\n        break;\n      case \"code\":\n      case \"document\":\n      case \"paragraph\":\n      case \"block_quote\":\n      case \"item\":\n      case \"list\":\n      case \"heading\":\n      case \"code_block\":\n      case \"html_block\":\n      case \"thematic_break\":\n      case \"custom_inline\":\n      case \"custom_block\":\n        break;\n      default:\n        throw new Error(\"unexpected type: \" + (type: empty));\n    }\n  }\n}\n\n// $FlowIgnore[value-as-type]\nexport function coalesceText(ast: Node): void {\n  const walker = ast.walker();\n  let acc = [];\n  let firstTextNode = null;\n  for (let step; (step = walker.next()); ) {\n    // $FlowIgnore[value-as-type]\n    const node: Node = step.node;\n    const type: NodeType = node.type;\n    if (type === \"text\") {\n      acc.push(node.literal);\n      if (firstTextNode == null) {\n        firstTextNode = node;\n      } else {\n        node.unlink();\n      }\n    } else if (firstTextNode != null) {\n      firstTextNode.literal = acc.join(\"\");\n      acc = [];\n      firstTextNode = null;\n    }\n  }\n}\n","// @flow\n\nimport {textBlocks} from \"./parseMarkdown\";\nimport {githubOwnerPattern, githubRepoPattern} from \"./repoId\";\n\nexport type ParsedReference = {|\n  // \"@user\" or \"#123\" or \"https://github.com/owner/name/...\"\n  +ref: string,\n  +refType: \"BASIC\" | \"PAIRED_WITH\",\n|};\n\n/**\n * Parse GitHub references from a Markdown document, such as an issue or\n * comment body. This will include references that span multiple lines\n * (across softbreaks), and exclude references that occur within code\n * blocks.\n */\nexport function parseReferences(body: string): ParsedReference[] {\n  // Note to maintainer: If it becomes necessary to encode references in a\n  // richer format, consider implementing the type signature described in\n  // https://github.com/sourcecred/sourcecred/pull/130#pullrequestreview-113849998\n  const blocks = textBlocks(body);\n  return [].concat.apply([], blocks.map(parseReferencesFromRawString));\n}\n\nfunction parseReferencesFromRawString(textBlock: string): ParsedReference[] {\n  return [\n    ...findNumericReferences(textBlock),\n    ...findRepoNumericReferences(textBlock),\n    ...findGithubUrlReferences(textBlock),\n    ...findUsernameReferences(textBlock),\n    ...findCommitReferences(textBlock),\n  ];\n}\n\nfunction findRepoNumericReferences(textBlock: string): ParsedReference[] {\n  const re = new RegExp(\n    `(?:\\\\W|^)((?:${githubOwnerPattern})/(?:${githubRepoPattern})#\\\\d+)(?=\\\\W|$)`,\n    \"gm\"\n  );\n  return findAllMatches(re, textBlock).map((x) => ({\n    refType: \"BASIC\",\n    ref: x[1],\n  }));\n}\n\nfunction findNumericReferences(textBlock: string): ParsedReference[] {\n  return findAllMatches(/(?:\\W|^)(#\\d+)(?=\\W|$)/gm, textBlock).map((x) => ({\n    refType: \"BASIC\",\n    ref: x[1],\n  }));\n}\n\nfunction findUsernameReferences(textBlock: string): ParsedReference[] {\n  const pairedWithPattern =\n    \"(?:\\\\W|^)(?:P|p)aired(?:-| )(?:w|W)ith:? \" +\n    `(@(?:${githubOwnerPattern}))(?=\\\\W|$)`;\n  const basicPattern = `(?:\\\\W|^)(@(?:${githubOwnerPattern}))(?=\\\\W|$)`;\n  const pairedWithRefs = findAllMatches(\n    new RegExp(pairedWithPattern, \"gm\"),\n    textBlock\n  ).map((x) => ({ref: x[1], refType: \"PAIRED_WITH\"}));\n  const basicRefs = findAllMatches(\n    new RegExp(basicPattern, \"gm\"),\n    textBlock\n  ).map((x) => ({ref: x[1], refType: \"BASIC\"}));\n  for (const {ref} of pairedWithRefs) {\n    const basicRefIndexToRemove = basicRefs.findIndex((x) => x.ref === ref);\n    if (basicRefIndexToRemove === -1) {\n      throw new Error(`Couldn't find BASIC ref for paired with ref: ${ref}`);\n    }\n    basicRefs.splice(basicRefIndexToRemove, 1);\n  }\n  return [...pairedWithRefs, ...basicRefs];\n}\n\nfunction findGithubUrlReferences(textBlock: string): ParsedReference[] {\n  const urlRegex = new RegExp(\n    \"\" +\n      /(?:\\W|^)/.source +\n      \"(\" +\n      /http(?:s)?:\\/\\/github.com\\//.source +\n      `(?:${githubOwnerPattern})` +\n      \"(?:\" +\n      /\\//.source +\n      `(?:${githubRepoPattern})` +\n      /\\/(?:issues|pull)\\//.source +\n      /(?:\\d+)/.source +\n      /(?:#(?:issue|issuecomment|pullrequestreview|discussion_r)-?(?:\\d+))?/\n        .source +\n      \")?\" +\n      \")\" +\n      /(?=[^\\w/-]|$)/.source,\n    \"gm\"\n  );\n  return findAllMatches(urlRegex, textBlock).map((match) => ({\n    refType: \"BASIC\",\n    ref: match[1],\n  }));\n}\n\nfunction findCommitReferences(textBlock: string): ParsedReference[] {\n  const hashReferences = findAllMatches(\n    /(?:\\W|^)([a-fA-F0-9]{40,})(?=\\W|$)/gm,\n    textBlock\n  ).map((x) => ({\n    refType: \"BASIC\",\n    ref: x[1].toLowerCase(),\n  }));\n  const commitUrlRegex = new RegExp(\n    \"\" +\n      /(?:\\W|^)/.source +\n      \"(\" +\n      /https?:\\/\\/github.com\\//.source +\n      `(?:${githubOwnerPattern})` +\n      /\\//.source +\n      `(?:${githubRepoPattern})` +\n      /\\/commit\\/([a-fA-F0-9]{40,})/.source +\n      \")\" +\n      /(?=[^\\w/]|$)/.source,\n    \"gm\"\n  );\n  const urlsAndHashes = findAllMatches(commitUrlRegex, textBlock).map((x) => ({\n    url: x[1].toLowerCase(),\n    hash: x[2].toLowerCase(),\n  }));\n  // Every urlReference will also generate a hash reference (because the\n  // url contains the hash).  So we manually remove the duplicates.\n  for (const {url, hash} of urlsAndHashes) {\n    const idxToRemove = hashReferences.findIndex(({ref}) => ref === hash);\n    if (idxToRemove === -1) {\n      throw new Error(`No matching hash for url reference: ${url}`);\n    }\n    hashReferences.splice(idxToRemove, 1);\n  }\n  const urlReferences = urlsAndHashes.map((x) => ({\n    refType: \"BASIC\",\n    ref: x.url,\n  }));\n  return [...hashReferences, ...urlReferences];\n}\n\nfunction findAllMatches(re: RegExp, s: string): any[] {\n  // modified from: https://stackoverflow.com/a/6323598\n  let m;\n  const matches = [];\n  do {\n    m = re.exec(s);\n    if (m) {\n      matches.push(m);\n    }\n  } while (m);\n  return matches;\n}\n","// @flow\n\nimport {githubOwnerPattern, githubRepoPattern} from \"./repoId\";\nconst urlBase = \"^https?://github\\\\.com\";\nconst repoUrl = `${urlBase}/(?:${githubOwnerPattern})/(?:${githubRepoPattern})/`;\n\nexport function reviewUrlToId(url: string): string {\n  const suffix = /pull\\/\\d+#pullrequestreview-(\\d+)$/;\n  const regex = new RegExp(repoUrl + suffix.source);\n  const result = regex.exec(url);\n  if (result == null) {\n    throw new Error(`Error parsing review url ${url}`);\n  }\n  return result[1];\n}\n\nexport function issueCommentUrlToId(url: string): string {\n  const suffix = /issues\\/\\d+#issuecomment-(\\d+)$/;\n  const regex = new RegExp(repoUrl + suffix.source);\n  const result = regex.exec(url);\n  if (result == null) {\n    throw new Error(`Error parsing issue comment url ${url}`);\n  }\n  return result[1];\n}\n\nexport function pullCommentUrlToId(url: string): string {\n  const suffix = /pull\\/\\d+#issuecomment-(\\d+)$/;\n  const regex = new RegExp(repoUrl + suffix.source);\n  const result = regex.exec(url);\n  if (result == null) {\n    throw new Error(`Error parsing pull comment url ${url}`);\n  }\n  return result[1];\n}\n\nexport function reviewCommentUrlToId(url: string): string {\n  const suffix = /pull\\/\\d+#discussion_r(\\d+)/;\n  const regex = new RegExp(repoUrl + suffix.source);\n  const result = regex.exec(url);\n  if (result == null) {\n    throw new Error(`Error parsing review comment url ${url}`);\n  }\n  return result[1];\n}\n","// @flow\n\nimport {type URL} from \"../../core/references\";\nimport {NodeAddress, type NodeAddressT} from \"../../core/graph\";\nimport {toCompat, fromCompat, type Compatible} from \"../../util/compat\";\nimport stringify from \"json-stable-stringify\";\nimport {parseReferences} from \"./parseReferences\";\nimport * as N from \"./nodes\";\nimport dedent from \"../../util/dedent\";\nimport {type TimestampMs} from \"../../util/timestamp\";\n\n// Workaround for https://github.com/facebook/flow/issues/6538\nimport type {\n  RepoAddress,\n  IssueAddress,\n  PullAddress,\n  ReviewAddress,\n  CommentAddress,\n  CommitAddress,\n  UserlikeAddress,\n} from \"./nodes\";\nimport * as T from \"./graphqlTypes\";\nimport * as MapUtil from \"../../util/map\";\nimport * as NullUtil from \"../../util/null\";\nimport {botSet} from \"./bots\";\n\nimport {\n  reviewUrlToId,\n  issueCommentUrlToId,\n  pullCommentUrlToId,\n  reviewCommentUrlToId,\n} from \"./urlIdParse\";\n\nconst COMPAT_INFO = {\n  type: \"sourcecred/github/relationalView\",\n  version: \"0.3.0\",\n};\n\nexport class RelationalView {\n  _repos: Map<N.RawAddress, RepoEntry>;\n  _issues: Map<N.RawAddress, IssueEntry>;\n  _pulls: Map<N.RawAddress, PullEntry>;\n  _comments: Map<N.RawAddress, CommentEntry>;\n  _commits: Map<N.RawAddress, CommitEntry>;\n  _reviews: Map<N.RawAddress, ReviewEntry>;\n  _userlikes: Map<N.RawAddress, UserlikeEntry>;\n  _mapReferences: Map<N.RawAddress, N.ReferentAddress[]>;\n  _mapReferencedBy: Map<N.RawAddress, N.TextContentAddress[]>;\n\n  constructor(): void {\n    this._repos = new Map();\n    this._issues = new Map();\n    this._pulls = new Map();\n    this._comments = new Map();\n    this._commits = new Map();\n    this._reviews = new Map();\n    this._userlikes = new Map();\n    this._mapReferences = new Map();\n    this._mapReferencedBy = new Map();\n  }\n\n  addRepository(repository: T.Repository): void {\n    // Warning: calling `addRepository` can put the RelationalView in an\n    // inconsistent state. for example, if called with a repo with\n    // issues [#1, #2, #3] and then with a repo with issues [#4, #5],\n    // then calls to `repo.issues()` will only give back issues 4 and 5\n    // (although issues 1, 2, and 3 will still be in the view).\n    this._addRepo(repository);\n    this._addReferences();\n  }\n\n  /**\n   * Mutate the RelationalView, by replacing all of the post bodies with\n   * empty strings. Usage of this method is a convenient hack to save space,\n   * as we don't currently use the bodies after the _addReferences step.\n   * Also removes commit messages.\n   */\n  compressByRemovingBody() {\n    for (const [address, post] of this._issues.entries()) {\n      const compressedPost = {...post, body: \"\"};\n      this._issues.set(address, compressedPost);\n    }\n\n    for (const [address, post] of this._pulls.entries()) {\n      const compressedPost = {...post, body: \"\"};\n      this._pulls.set(address, compressedPost);\n    }\n\n    for (const [address, post] of this._comments.entries()) {\n      const compressedPost = {...post, body: \"\"};\n      this._comments.set(address, compressedPost);\n    }\n\n    for (const [address, post] of this._reviews.entries()) {\n      const compressedPost = {...post, body: \"\"};\n      this._reviews.set(address, compressedPost);\n    }\n\n    for (const [address, post] of this._commits.entries()) {\n      const compressedPost = {...post, message: \"\"};\n      this._commits.set(address, compressedPost);\n    }\n  }\n\n  *repos(): Iterator<Repo> {\n    for (const entry of this._repos.values()) {\n      yield new Repo(this, entry);\n    }\n  }\n\n  repo(address: RepoAddress): ?Repo {\n    const entry = this._repos.get(N.toRaw(address));\n    return entry == null ? entry : new Repo(this, entry);\n  }\n\n  *issues(): Iterator<Issue> {\n    for (const entry of this._issues.values()) {\n      yield new Issue(this, entry);\n    }\n  }\n\n  issue(address: IssueAddress): ?Issue {\n    const entry = this._issues.get(N.toRaw(address));\n    return entry == null ? entry : new Issue(this, entry);\n  }\n\n  *pulls(): Iterator<Pull> {\n    for (const entry of this._pulls.values()) {\n      yield new Pull(this, entry);\n    }\n  }\n\n  pull(address: PullAddress): ?Pull {\n    const entry = this._pulls.get(N.toRaw(address));\n    return entry == null ? entry : new Pull(this, entry);\n  }\n\n  *comments(): Iterator<Comment> {\n    for (const entry of this._comments.values()) {\n      yield new Comment(this, entry);\n    }\n  }\n\n  comment(address: CommentAddress): ?Comment {\n    const entry = this._comments.get(N.toRaw(address));\n    return entry == null ? entry : new Comment(this, entry);\n  }\n\n  *commits(): Iterator<Commit> {\n    for (const entry of this._commits.values()) {\n      yield new Commit(this, entry);\n    }\n  }\n\n  commit(address: CommitAddress): ?Commit {\n    const entry = this._commits.get(N.toRaw(address));\n    return entry == null ? entry : new Commit(this, entry);\n  }\n\n  *reviews(): Iterator<Review> {\n    for (const entry of this._reviews.values()) {\n      yield new Review(this, entry);\n    }\n  }\n\n  review(address: ReviewAddress): ?Review {\n    const entry = this._reviews.get(N.toRaw(address));\n    return entry == null ? entry : new Review(this, entry);\n  }\n\n  *userlikes(): Iterator<Userlike> {\n    for (const entry of this._userlikes.values()) {\n      yield new Userlike(this, entry);\n    }\n  }\n\n  userlike(address: UserlikeAddress): ?Userlike {\n    const entry = this._userlikes.get(N.toRaw(address));\n    return entry == null ? entry : new Userlike(this, entry);\n  }\n\n  entity(address: N.StructuredAddress): ?Entity {\n    switch (address.type) {\n      case \"REPO\":\n        return this.repo(address);\n      case \"ISSUE\":\n        return this.issue(address);\n      case \"PULL\":\n        return this.pull(address);\n      case \"REVIEW\":\n        return this.review(address);\n      case \"COMMENT\":\n        return this.comment(address);\n      case \"USERLIKE\":\n        return this.userlike(address);\n      case \"COMMIT\":\n        return this.commit(address);\n      default:\n        throw new Error(`Unexpected address type: ${(address.type: empty)}`);\n    }\n  }\n\n  *referentEntities(): Iterator<ReferentEntity> {\n    yield* this.repos();\n    yield* this.issues();\n    yield* this.pulls();\n    yield* this.reviews();\n    yield* this.comments();\n    yield* this.commits();\n    yield* this.userlikes();\n  }\n\n  *textContentEntities(): Iterator<TextContentEntity> {\n    yield* this.issues();\n    yield* this.pulls();\n    yield* this.reviews();\n    yield* this.comments();\n    yield* this.commits();\n  }\n\n  *parentEntities(): Iterator<ParentEntity> {\n    yield* this.repos();\n    yield* this.issues();\n    yield* this.pulls();\n    yield* this.reviews();\n  }\n\n  *childEntities(): Iterator<ChildEntity> {\n    yield* this.issues();\n    yield* this.pulls();\n    yield* this.reviews();\n    yield* this.comments();\n  }\n\n  *authoredEntities(): Iterator<AuthoredEntity> {\n    yield* this.issues();\n    yield* this.pulls();\n    yield* this.reviews();\n    yield* this.comments();\n    yield* this.commits();\n  }\n\n  *entities(): Iterator<Entity> {\n    yield* this.repos();\n    yield* this.issues();\n    yield* this.pulls();\n    yield* this.reviews();\n    yield* this.comments();\n    yield* this.commits();\n    yield* this.userlikes();\n  }\n\n  *reactableEntities(): Iterator<ReactableEntity> {\n    yield* this.issues();\n    yield* this.pulls();\n    yield* this.comments();\n  }\n\n  toJSON(): RelationalViewJSON {\n    const rawJSON = {\n      repos: MapUtil.toObject(this._repos),\n      issues: MapUtil.toObject(this._issues),\n      pulls: MapUtil.toObject(this._pulls),\n      reviews: MapUtil.toObject(this._reviews),\n      comments: MapUtil.toObject(this._comments),\n      commits: MapUtil.toObject(this._commits),\n      userlikes: MapUtil.toObject(this._userlikes),\n      references: MapUtil.toObject(this._mapReferences),\n      referencedBy: MapUtil.toObject(this._mapReferencedBy),\n    };\n    return toCompat(COMPAT_INFO, rawJSON);\n  }\n\n  static fromJSON(compatJson: RelationalViewJSON): RelationalView {\n    const json = fromCompat(COMPAT_INFO, compatJson);\n    const rv = new RelationalView();\n    rv._repos = MapUtil.fromObject(json.repos);\n    rv._issues = MapUtil.fromObject(json.issues);\n    rv._pulls = MapUtil.fromObject(json.pulls);\n    rv._reviews = MapUtil.fromObject(json.reviews);\n    rv._comments = MapUtil.fromObject(json.comments);\n    rv._commits = MapUtil.fromObject(json.commits);\n    rv._userlikes = MapUtil.fromObject(json.userlikes);\n    rv._mapReferences = MapUtil.fromObject(json.references);\n    rv._mapReferencedBy = MapUtil.fromObject(json.referencedBy);\n    return rv;\n  }\n\n  _addRepo(json: T.Repository) {\n    const address: RepoAddress = {\n      type: N.REPO_TYPE,\n      owner: NullUtil.get(json.owner).login,\n      name: json.name,\n    };\n    const entry: RepoEntry = {\n      address,\n      url: json.url,\n      issues: expectAllNonNull(json, \"issues\", json.issues).map((x) =>\n        this._addIssue(address, x)\n      ),\n      pulls: expectAllNonNull(\n        json,\n        \"pullRequests\",\n        json.pullRequests\n      ).map((x) => this._addPull(address, x)),\n      timestampMs: +new Date(json.createdAt),\n    };\n    const raw = N.toRaw(address);\n    this._repos.set(raw, entry);\n    this._addCommitHistory(json);\n  }\n\n  _addCommitHistory(json: T.Repository) {\n    if (json.defaultBranchRef != null) {\n      const target = json.defaultBranchRef.target;\n      if (target != null && target.__typename === \"Commit\") {\n        this._addCommit(target);\n      } else if (target != null) {\n        throw new Error(\n          dedent`\\\n            Your repo doesn't have a commit as its defaultBranchRef's target. \\\n            Please file a bug reproducing this error. \\\n            https://github.com/sourcecred/sourcecred/issues\\\n          `\n        );\n      }\n    }\n  }\n\n  _addIssue(repo: RepoAddress, json: T.Issue): IssueAddress {\n    const address: IssueAddress = {\n      type: N.ISSUE_TYPE,\n      number: String(json.number),\n      repo,\n    };\n    const entry: IssueEntry = {\n      address,\n      url: json.url,\n      comments: expectAllNonNull(json, \"comments\", json.comments).map((x) =>\n        this._addComment(address, x)\n      ),\n      authors: this._addNullableAuthor(json.author),\n      body: json.body,\n      title: json.title,\n      reactions: expectAllNonNull(json, \"reactions\", json.reactions).map((x) =>\n        this._addReaction(x)\n      ),\n      timestampMs: +new Date(json.createdAt),\n    };\n    this._issues.set(N.toRaw(address), entry);\n    return address;\n  }\n\n  _addCommit(json: T.Commit): CommitAddress {\n    const commitStack = [json]; // reified recursion to avoid stack overflow\n    let originalAddress = null;\n    while (true) {\n      const json = commitStack.pop();\n      if (json == null) {\n        // End of stack.\n        break;\n      }\n      const address = {type: N.COMMIT_TYPE, id: json.id};\n      const rawAddress = N.toRaw(address);\n      if (originalAddress == null) {\n        originalAddress = address;\n      }\n      // This fast-return is critical, because a single commit may appear\n      // many times in the repository.\n      //\n      // For example, a repository with 1000 commits, each of which was\n      // created by merging a pull request, will include 1001 structural\n      // references to the root commit (one via the HEAD ref, and one\n      // along a parent-chain from each pull request), so the number of\n      // occurrences of commits can easily be quadratic in the number of\n      // actual commits.\n      //\n      // Furthermore, it can be exponential: consider merge commits like\n      //\n      //     HEAD\n      //     / \\\n      //    1A 1B\n      //    | X |\n      //    2A 2B\n      //    | X |\n      //    3A 3B\n      //     \\ /\n      //     root\n      //\n      // where each merge commit has two parents. The root commit is\n      // reachable along about 2^(n/2) paths.\n      //\n      // This check ensures that we process each commit edge only once.\n      if (this._commits.has(rawAddress)) {\n        continue;\n      }\n\n      const authors =\n        json.author == null ? [] : this._addNullableAuthor(json.author.user);\n      const entry: CommitEntry = {\n        address,\n        url: json.url,\n        authors,\n        message: json.message,\n        hash: json.oid,\n        timestampMs: +new Date(json.authoredDate),\n      };\n      this._commits.set(N.toRaw(address), entry);\n      for (const parent of json.parents) {\n        if (parent != null) {\n          commitStack.push(parent);\n        }\n      }\n    }\n    // must have gone through at least one loop iteration\n    return NullUtil.get(originalAddress);\n  }\n\n  _addPull(repo: RepoAddress, json: T.PullRequest): PullAddress {\n    const address: PullAddress = {\n      type: N.PULL_TYPE,\n      number: String(json.number),\n      repo,\n    };\n    const mergedAs =\n      json.mergeCommit == null ? null : this._addCommit(json.mergeCommit);\n\n    const entry: PullEntry = {\n      address,\n      url: json.url,\n      comments: expectAllNonNull(json, \"comments\", json.comments).map((x) =>\n        this._addComment(address, x)\n      ),\n      reviews: expectAllNonNull(json, \"reviews\", json.reviews).map((x) =>\n        this._addReview(address, x)\n      ),\n      authors: this._addNullableAuthor(json.author),\n      body: json.body,\n      title: json.title,\n      mergedAs,\n      additions: json.additions,\n      deletions: json.deletions,\n      reactions: expectAllNonNull(json, \"reactions\", json.reactions).map((x) =>\n        this._addReaction(x)\n      ),\n      timestampMs: +new Date(json.createdAt),\n    };\n    this._pulls.set(N.toRaw(address), entry);\n    return address;\n  }\n\n  _addReview(pull: PullAddress, json: T.PullRequestReview): ReviewAddress {\n    const address: ReviewAddress = {\n      type: N.REVIEW_TYPE,\n      id: reviewUrlToId(json.url),\n      pull,\n    };\n    const entry: ReviewEntry = {\n      address,\n      url: json.url,\n      state: json.state,\n      comments: expectAllNonNull(json, \"comments\", json.comments).map((x) =>\n        this._addComment(address, x)\n      ),\n      body: json.body,\n      authors: this._addNullableAuthor(json.author),\n      timestampMs: +new Date(json.createdAt),\n    };\n    this._reviews.set(N.toRaw(address), entry);\n    return address;\n  }\n\n  _addComment(\n    parent: IssueAddress | PullAddress | ReviewAddress,\n    json: T.IssueComment | T.PullRequestReviewComment\n  ): CommentAddress {\n    const id = (function () {\n      switch (parent.type) {\n        case N.ISSUE_TYPE:\n          return issueCommentUrlToId(json.url);\n        case N.PULL_TYPE:\n          return pullCommentUrlToId(json.url);\n        case N.REVIEW_TYPE:\n          return reviewCommentUrlToId(json.url);\n        default:\n          throw new Error(\n            `Unexpected comment parent type: ${(parent.type: empty)}`\n          );\n      }\n    })();\n    const address: CommentAddress = {type: N.COMMENT_TYPE, id, parent};\n    const entry: CommentEntry = {\n      address,\n      url: json.url,\n      authors: this._addNullableAuthor(json.author),\n      body: json.body,\n      reactions: expectAllNonNull(json, \"reactions\", json.reactions).map((x) =>\n        this._addReaction(x)\n      ),\n      timestampMs: +new Date(json.createdAt),\n    };\n    this._comments.set(N.toRaw(address), entry);\n    return address;\n  }\n\n  _addReaction(json: T.Reaction): ReactionRecord {\n    const authorAddresses = this._addNullableAuthor(json.user);\n    if (authorAddresses.length !== 1) {\n      throw new Error(\n        `Invariant violation: Reaction with id ${json.id} did not have 1 author`\n      );\n    }\n    const timestampMs = +new Date(json.createdAt);\n    return {content: json.content, user: authorAddresses[0], timestampMs};\n  }\n\n  _addNullableAuthor(json: null | T.Actor): UserlikeAddress[] {\n    if (json == null) {\n      return [];\n    } else {\n      const login = json.login;\n      const subtype = botSet().has(login) ? N.BOT_SUBTYPE : N.USER_SUBTYPE;\n      const address: UserlikeAddress = {\n        type: N.USERLIKE_TYPE,\n        subtype,\n        login,\n      };\n      const entry: UserlikeEntry = {address, url: json.url};\n      this._userlikes.set(N.toRaw(address), entry);\n      return [address];\n    }\n  }\n\n  /**\n   * Creates a Map<URL, NodeAddressT> for each ReferentEntity in this view.\n   * Note: duplicates are accepted within one view. However for any URL, the\n   * corresponding N.RawAddress should be the same, or we'll throw an error.\n   */\n  urlReferenceMap(): Map<URL, NodeAddressT> {\n    const refToAddress: Map<URL, NodeAddressT> = new Map();\n    for (const e: ReferentEntity of this.referentEntities()) {\n      const addr = N.toRaw(e.address());\n      const url = e.url();\n      const existing = refToAddress.get(url);\n      if (existing && existing !== addr) {\n        throw new Error(dedent`\\\n          An entry for ${url} already existed, but with a different NodeAddressT.\n          This is probably a bug with SourceCred. Please report it on GitHub.\n          Old: ${NodeAddress.toString(existing)}\n          New: ${NodeAddress.toString(addr)}\n        `);\n      }\n      refToAddress.set(url, addr);\n    }\n    return refToAddress;\n  }\n\n  _addReferences() {\n    // TODO(perf): _addReferences regenerates all refs from scratch\n    this._mapReferences = new Map();\n    this._mapReferencedBy = new Map();\n    // refToAddress maps a \"referencing string\" to the address that string refers to.\n    // There are 3 kinds of valid referencing strings:\n    // - A canonical URL pointing to a GitHub entity, e.g.\n    //   https://github.com/sourcecred/sourcecred/pull/416\n    // - A # followed by a number, such as #416\n    // - An @ followed by a login name, such as @decentralion\n    const refToAddress: Map<string, N.ReferentAddress> = new Map();\n    for (const e: ReferentEntity of this.referentEntities()) {\n      const a = e.address();\n      refToAddress.set(e.url(), a);\n      if (e instanceof Userlike) {\n        refToAddress.set(`@${e.login()}`, a);\n      }\n      if (e instanceof Issue || e instanceof Pull) {\n        refToAddress.set(`#${e.number()}`, a);\n        refToAddress.set(\n          `${e.parent().owner()}/${e.parent().name()}#${e.number()}`,\n          a\n        );\n      }\n      if (e instanceof Commit) {\n        refToAddress.set(e.hash(), a);\n      }\n    }\n    for (const e of this.textContentEntities()) {\n      const srcAddress = e.address();\n      const body = e instanceof Commit ? e.message() : e.body();\n      for (const {ref, refType} of parseReferences(body)) {\n        const refAddress = refToAddress.get(ref);\n        if (refAddress != null) {\n          switch (refType) {\n            case \"BASIC\":\n              this._addReference(srcAddress, refAddress);\n              break;\n            case \"PAIRED_WITH\":\n              if (refAddress.type !== N.USERLIKE_TYPE) {\n                throw new Error(\n                  `Invariant error: @-ref did not refer to userlike: ${stringify(\n                    refAddress\n                  )}`\n                );\n              }\n              const userlike = this.userlike(refAddress);\n              if (userlike == null) {\n                throw new Error(\n                  `Invariant error: nonexistent reference: ${stringify(\n                    refAddress\n                  )}`\n                );\n              }\n              this._addExtraAuthor(e, userlike);\n              break;\n            default:\n              throw new Error(`Unexpected refType: ${(refType: empty)}`);\n          }\n        }\n      }\n    }\n  }\n\n  _addReference(src: N.TextContentAddress, dst: N.ReferentAddress) {\n    const srcRaw = N.toRaw(src);\n    const referencesForSrc = this._mapReferences.get(srcRaw);\n    if (referencesForSrc == null) {\n      this._mapReferences.set(srcRaw, [dst]);\n    } else {\n      referencesForSrc.push(dst);\n    }\n    const dstRaw = N.toRaw(dst);\n    const referencedByForDst = this._mapReferencedBy.get(dstRaw);\n    if (referencedByForDst == null) {\n      this._mapReferencedBy.set(dstRaw, [src]);\n    } else {\n      referencedByForDst.push(src);\n    }\n  }\n\n  _addExtraAuthor(e: AuthoredEntity, extraAuthor: Userlike) {\n    for (const existingAuthor of e.authors()) {\n      if (existingAuthor.login() === extraAuthor.login()) {\n        return; // user can't author the same thing twice\n      }\n    }\n    e._entry.authors.push(extraAuthor.address());\n  }\n\n  *_referencedBy(e: ReferentEntity): Iterator<TextContentEntity> {\n    const refs = this._mapReferencedBy.get(N.toRaw(e.address()));\n    if (refs == null) {\n      return;\n    } else {\n      for (const address of refs) {\n        let entity: ?TextContentEntity;\n        switch (address.type) {\n          case \"ISSUE\":\n            entity = this.issue(address);\n            break;\n          case \"PULL\":\n            entity = this.pull(address);\n            break;\n          case \"REVIEW\":\n            entity = this.review(address);\n            break;\n          case \"COMMENT\":\n            entity = this.comment(address);\n            break;\n          case \"COMMIT\":\n            entity = this.commit(address);\n            break;\n          default:\n            throw new Error(\n              `Unexpected referrer address type: ${(address.type: empty)}`\n            );\n        }\n        if (entity == null) {\n          throw new Error(\n            `Invariant error: Reference from non-existent entity: ${stringify(\n              address\n            )}`\n          );\n        }\n        yield entity;\n      }\n    }\n  }\n\n  *_references(e: TextContentEntity): Iterator<ReferentEntity> {\n    const refs = this._mapReferences.get(N.toRaw(e.address()));\n    if (refs == null) {\n      return;\n    } else {\n      for (const address of refs) {\n        let entity: ?ReferentEntity;\n        switch (address.type) {\n          case \"REPO\":\n            entity = this.repo(address);\n            break;\n          case \"ISSUE\":\n            entity = this.issue(address);\n            break;\n          case \"PULL\":\n            entity = this.pull(address);\n            break;\n          case \"REVIEW\":\n            entity = this.review(address);\n            break;\n          case \"COMMENT\":\n            entity = this.comment(address);\n            break;\n          case \"COMMIT\":\n            entity = this.commit(address);\n            break;\n          case \"USERLIKE\":\n            entity = this.userlike(address);\n            break;\n          default:\n            throw new Error(\n              `Unexpected referent address type: ${(address.type: empty)}`\n            );\n        }\n        if (entity == null) {\n          throw new Error(\n            `Invariant error: Reference to non-existent entity: ${stringify(\n              address\n            )}`\n          );\n        }\n        yield entity;\n      }\n    }\n  }\n}\n\ntype ReactionRecord = {|\n  +content: T.ReactionContent,\n  +user: UserlikeAddress,\n  +timestampMs: TimestampMs,\n|};\n\ntype Entry =\n  | RepoEntry\n  | IssueEntry\n  | PullEntry\n  | ReviewEntry\n  | CommentEntry\n  | CommitEntry\n  | UserlikeEntry;\n\nexport class _Entity<+T: Entry> {\n  +_view: RelationalView;\n  +_entry: T;\n  constructor(view: RelationalView, entry: T) {\n    this._view = view;\n    this._entry = entry;\n  }\n  address(): $ElementType<T, \"address\"> {\n    // Relevant Flow bugs:\n    //   - https://github.com/facebook/flow/issues/6648\n    //   - https://github.com/facebook/flow/issues/6649\n    return ((this._entry: T).address: any);\n  }\n  url(): string {\n    return this._entry.url;\n  }\n  timestampMs(): number | null {\n    throw new Error(\"Not implemented.\");\n  }\n  description(): string {\n    throw new Error(\"Not implemented.\");\n  }\n}\n\ntype RepoEntry = {|\n  +address: RepoAddress,\n  +url: string,\n  +issues: IssueAddress[],\n  +pulls: PullAddress[],\n  +timestampMs: TimestampMs,\n|};\n\nexport class Repo extends _Entity<RepoEntry> {\n  constructor(view: RelationalView, entry: RepoEntry) {\n    super(view, entry);\n  }\n  name(): string {\n    return this._entry.address.name;\n  }\n  owner(): string {\n    return this._entry.address.owner;\n  }\n  *issues(): Iterator<Issue> {\n    for (const address of this._entry.issues) {\n      const issue = this._view.issue(address);\n      yield assertExists(issue, address);\n    }\n  }\n  *pulls(): Iterator<Pull> {\n    for (const address of this._entry.pulls) {\n      const pull = this._view.pull(address);\n      yield assertExists(pull, address);\n    }\n  }\n  referencedBy(): Iterator<TextContentEntity> {\n    return this._view._referencedBy(this);\n  }\n  timestampMs(): number {\n    return this._entry.timestampMs;\n  }\n  description(): string {\n    return `[${this.owner()}/${this.name()}](${this.url()})`;\n  }\n}\n\ntype IssueEntry = {|\n  +address: IssueAddress,\n  +title: string,\n  +body: string,\n  +url: string,\n  +comments: CommentAddress[],\n  +authors: UserlikeAddress[],\n  +reactions: ReactionRecord[],\n  +timestampMs: TimestampMs,\n|};\n\nexport class Issue extends _Entity<IssueEntry> {\n  constructor(view: RelationalView, entry: IssueEntry) {\n    super(view, entry);\n  }\n  parent(): Repo {\n    const address = this.address().repo;\n    const repo = this._view.repo(address);\n    return assertExists(repo, address);\n  }\n  number(): string {\n    return this._entry.address.number;\n  }\n  title(): string {\n    return this._entry.title;\n  }\n  body(): string {\n    return this._entry.body;\n  }\n  timestampMs(): number {\n    return this._entry.timestampMs;\n  }\n  description(): string {\n    return `[#${this.number()}](${this.url()}): ${this.title()}`;\n  }\n  *comments(): Iterator<Comment> {\n    for (const address of this._entry.comments) {\n      const comment = this._view.comment(address);\n      yield assertExists(comment, address);\n    }\n  }\n  authors(): Iterator<Userlike> {\n    return getAuthors(this._view, this._entry);\n  }\n  references(): Iterator<ReferentEntity> {\n    return this._view._references(this);\n  }\n  referencedBy(): Iterator<TextContentEntity> {\n    return this._view._referencedBy(this);\n  }\n  reactions(): $ReadOnlyArray<ReactionRecord> {\n    return this._entry.reactions;\n  }\n}\n\ntype PullEntry = {|\n  +address: PullAddress,\n  +title: string,\n  +body: string,\n  +url: string,\n  +comments: CommentAddress[],\n  +reviews: ReviewAddress[],\n  +mergedAs: ?CommitAddress,\n  +additions: number,\n  +deletions: number,\n  +authors: UserlikeAddress[],\n  +reactions: ReactionRecord[],\n  +timestampMs: TimestampMs,\n|};\n\nexport class Pull extends _Entity<PullEntry> {\n  constructor(view: RelationalView, entry: PullEntry) {\n    super(view, entry);\n  }\n  parent(): Repo {\n    const address = this.address().repo;\n    const repo = this._view.repo(address);\n    return assertExists(repo, address);\n  }\n  number(): string {\n    return this._entry.address.number;\n  }\n  title(): string {\n    return this._entry.title;\n  }\n  body(): string {\n    return this._entry.body;\n  }\n  additions(): number {\n    return this._entry.additions;\n  }\n  deletions(): number {\n    return this._entry.deletions;\n  }\n  mergedAs(): ?CommitAddress {\n    return this._entry.mergedAs;\n  }\n  timestampMs(): number {\n    return this._entry.timestampMs;\n  }\n  description(): string {\n    return `[#${this.number()}](${this.url()}): ${this.title()}`;\n  }\n  *reviews(): Iterator<Review> {\n    for (const address of this._entry.reviews) {\n      const review = this._view.review(address);\n      yield assertExists(review, address);\n    }\n  }\n  *comments(): Iterator<Comment> {\n    for (const address of this._entry.comments) {\n      const comment = this._view.comment(address);\n      yield assertExists(comment, address);\n    }\n  }\n  authors(): Iterator<Userlike> {\n    return getAuthors(this._view, this._entry);\n  }\n  references(): Iterator<ReferentEntity> {\n    return this._view._references(this);\n  }\n  referencedBy(): Iterator<TextContentEntity> {\n    return this._view._referencedBy(this);\n  }\n  reactions(): $ReadOnlyArray<ReactionRecord> {\n    return this._entry.reactions;\n  }\n}\n\ntype ReviewEntry = {|\n  +address: ReviewAddress,\n  +body: string,\n  +url: string,\n  +comments: CommentAddress[],\n  +state: T.PullRequestReviewState,\n  +authors: UserlikeAddress[],\n  +timestampMs: TimestampMs,\n|};\n\nexport class Review extends _Entity<ReviewEntry> {\n  constructor(view: RelationalView, entry: ReviewEntry) {\n    super(view, entry);\n  }\n  parent(): Pull {\n    const address = this.address().pull;\n    const pull = this._view.pull(address);\n    return assertExists(pull, address);\n  }\n  body(): string {\n    return this._entry.body;\n  }\n  state(): string {\n    return this._entry.state;\n  }\n  *comments(): Iterator<Comment> {\n    for (const address of this._entry.comments) {\n      const comment = this._view.comment(address);\n      yield assertExists(comment, address);\n    }\n  }\n  authors(): Iterator<Userlike> {\n    return getAuthors(this._view, this._entry);\n  }\n  timestampMs(): number {\n    return this._entry.timestampMs;\n  }\n  description(): string {\n    return `[review](${this.url()}) on ${this.parent().description()}`;\n  }\n  references(): Iterator<ReferentEntity> {\n    return this._view._references(this);\n  }\n  referencedBy(): Iterator<TextContentEntity> {\n    return this._view._referencedBy(this);\n  }\n}\n\ntype CommentEntry = {|\n  +address: CommentAddress,\n  +body: string,\n  +url: string,\n  +authors: UserlikeAddress[],\n  +reactions: ReactionRecord[],\n  +timestampMs: TimestampMs,\n|};\n\nexport class Comment extends _Entity<CommentEntry> {\n  constructor(view: RelationalView, entry: CommentEntry) {\n    super(view, entry);\n  }\n  parent(): Pull | Issue | Review {\n    const address = this.address().parent;\n    let parent: ?Pull | ?Issue | ?Review;\n    switch (address.type) {\n      case \"PULL\":\n        parent = this._view.pull(address);\n        break;\n      case \"ISSUE\":\n        parent = this._view.issue(address);\n        break;\n      case \"REVIEW\":\n        parent = this._view.review(address);\n        break;\n      default:\n        throw new Error(`Bad parent address type: ${(address.type: empty)}`);\n    }\n    return assertExists(parent, address);\n  }\n  body(): string {\n    return this._entry.body;\n  }\n  timestampMs(): number {\n    return this._entry.timestampMs;\n  }\n  description(): string {\n    return `[comment](${this.url()}) on ${this.parent().description()}`;\n  }\n  authors(): Iterator<Userlike> {\n    return getAuthors(this._view, this._entry);\n  }\n  references(): Iterator<ReferentEntity> {\n    return this._view._references(this);\n  }\n  referencedBy(): Iterator<TextContentEntity> {\n    return this._view._referencedBy(this);\n  }\n  reactions(): $ReadOnlyArray<ReactionRecord> {\n    return this._entry.reactions;\n  }\n}\n\ntype CommitEntry = {|\n  +address: CommitAddress,\n  +url: string,\n  +hash: string,\n  +authors: UserlikeAddress[],\n  +message: string,\n  +timestampMs: TimestampMs,\n|};\n\nexport class Commit extends _Entity<CommitEntry> {\n  constructor(view: RelationalView, entry: CommitEntry) {\n    super(view, entry);\n  }\n  authors(): Iterator<Userlike> {\n    return getAuthors(this._view, this._entry);\n  }\n  message(): string {\n    return this._entry.message;\n  }\n  references(): Iterator<ReferentEntity> {\n    return this._view._references(this);\n  }\n  referencedBy(): Iterator<TextContentEntity> {\n    return this._view._referencedBy(this);\n  }\n  hash(): string {\n    return this._entry.hash;\n  }\n  timestampMs(): number {\n    return this._entry.timestampMs;\n  }\n  description(): string {\n    const shortHash = this.hash().slice(0, 7);\n    const headline = this.message().split(\"\\n\")[0];\n    return `[${shortHash}](${this.url()}): ${headline}`;\n  }\n}\n\ntype UserlikeEntry = {|\n  +address: UserlikeAddress,\n  +url: string,\n|};\n\nexport class Userlike extends _Entity<UserlikeEntry> {\n  constructor(view: RelationalView, entry: UserlikeEntry) {\n    super(view, entry);\n  }\n  login(): string {\n    return this.address().login;\n  }\n  referencedBy(): Iterator<TextContentEntity> {\n    return this._view._referencedBy(this);\n  }\n  timestampMs(): null {\n    return null;\n  }\n  description(): string {\n    return `github/[@${this.login()}](${this.url()})`;\n  }\n}\n\nfunction assertExists<T>(item: ?T, address: N.StructuredAddress): T {\n  if (item == null) {\n    throw new Error(\n      `Invariant violation: Expected entity for ${stringify(address)}`\n    );\n  }\n  return item;\n}\n\nfunction* getAuthors(\n  view: RelationalView,\n  entry: IssueEntry | PullEntry | ReviewEntry | CommentEntry | CommitEntry\n) {\n  for (const address of entry.authors) {\n    const author = view.userlike(address);\n    yield assertExists(author, address);\n  }\n}\n\nexport type MatchHandlers<T> = {|\n  +repo: (x: Repo) => T,\n  +issue: (x: Issue) => T,\n  +pull: (x: Pull) => T,\n  +review: (x: Review) => T,\n  +comment: (x: Comment) => T,\n  +commit: (x: Commit) => T,\n  +userlike: (x: Userlike) => T,\n|};\nexport function match<T>(handlers: MatchHandlers<T>, x: Entity): T {\n  if (x instanceof Repo) {\n    return handlers.repo(x);\n  }\n  if (x instanceof Issue) {\n    return handlers.issue(x);\n  }\n  if (x instanceof Pull) {\n    return handlers.pull(x);\n  }\n  if (x instanceof Review) {\n    return handlers.review(x);\n  }\n  if (x instanceof Comment) {\n    return handlers.comment(x);\n  }\n  if (x instanceof Commit) {\n    return handlers.commit(x);\n  }\n  if (x instanceof Userlike) {\n    return handlers.userlike(x);\n  }\n  throw new Error(`Unexpected entity ${x}`);\n}\n\n/**\n * Invoke this function when the GitHub GraphQL schema docs indicate\n * that a connection provides a list of _nullable_ nodes, but we expect\n * them all to always be non-null.\n *\n * This will drop any `null` elements from the provided list, issuing a\n * warning to stderr if `null`s are found.\n */\nexport function expectAllNonNull<T>(\n  context: {+__typename: string, +id: string},\n  fieldname: string,\n  xs: $ReadOnlyArray<null | T>\n): Array<T> {\n  const result = [];\n  for (const x of xs) {\n    if (x !== null) {\n      result.push(x);\n    } else {\n      console.warn(\n        `${context.__typename}[${context.id}].${fieldname}: ` +\n          \"unexpected null value\"\n      );\n    }\n  }\n  return result;\n}\n\nexport type Entity = Repo | Issue | Pull | Review | Comment | Commit | Userlike;\nexport type AuthoredEntity = Issue | Pull | Review | Comment | Commit;\nexport type TextContentEntity = Issue | Pull | Review | Comment | Commit;\nexport type ParentEntity = Repo | Issue | Pull | Review;\nexport type ChildEntity = Issue | Pull | Review | Comment;\nexport type ReferentEntity =\n  | Repo\n  | Issue\n  | Pull\n  | Review\n  | Comment\n  | Commit\n  | Userlike;\nexport type ReactableEntity = Issue | Pull | Comment;\n\nexport opaque type AddressEntryMapJSON<T> = {[N.RawAddress]: T};\nexport opaque type RelationalViewJSON = Compatible<{|\n  +repos: AddressEntryMapJSON<RepoEntry>,\n  +issues: AddressEntryMapJSON<IssueEntry>,\n  +pulls: AddressEntryMapJSON<PullEntry>,\n  +reviews: AddressEntryMapJSON<ReviewEntry>,\n  +comments: AddressEntryMapJSON<CommentEntry>,\n  +commits: AddressEntryMapJSON<CommitEntry>,\n  +userlikes: AddressEntryMapJSON<UserlikeEntry>,\n  +references: AddressEntryMapJSON<N.ReferentAddress[]>,\n  +referencedBy: AddressEntryMapJSON<N.TextContentAddress[]>,\n|}>;\n","// @flow\n\nimport * as NullUtil from \"../../util/null\";\nimport {Graph} from \"../../core/graph\";\nimport {type WeightedGraph} from \"../../core/weightedGraph\";\nimport {type WeightsT, empty as emptyWeights} from \"../../core/weights\";\nimport * as GitNode from \"../git/nodes\";\nimport * as N from \"./nodes\";\nimport * as R from \"./relationalView\";\nimport {createEdge} from \"./edges\";\nimport {ReactionContent$Values as Reactions} from \"./graphqlTypes\";\n\nexport function createGraph(view: R.RelationalView): WeightedGraph {\n  const creator = new GraphCreator();\n  creator.addData(view);\n  return {graph: creator.graph, weights: creator.weights};\n}\n\nclass GraphCreator {\n  graph: Graph;\n  weights: WeightsT;\n\n  constructor() {\n    this.graph = new Graph();\n    this.weights = emptyWeights();\n  }\n\n  addData(view: R.RelationalView) {\n    for (const entity of view.entities()) {\n      const address = N.toRaw(entity.address());\n      this.graph.addNode({\n        address,\n        description: entity.description(),\n        timestampMs: entity.timestampMs(),\n      });\n    }\n\n    for (const child of view.childEntities()) {\n      this.addHasParent(child);\n    }\n\n    for (const authored of view.authoredEntities()) {\n      this.addAuthors(authored);\n    }\n\n    for (const pull of view.pulls()) {\n      const commit = pull.mergedAs();\n      if (commit != null) {\n        const commitTimestamp = NullUtil.get(view.commit(commit)).timestampMs();\n        this.graph.addEdge(\n          createEdge.mergedAs(pull.address(), commit, commitTimestamp)\n        );\n      } else {\n        const addr = N.toRaw(pull.address());\n        // Un-merged PRs do not mint cred.\n        this.weights.nodeWeights.set(addr, 0);\n      }\n    }\n\n    for (const commit of view.commits()) {\n      const gitCommitAddress: GitNode.CommitAddress = {\n        type: GitNode.COMMIT_TYPE,\n        hash: commit.hash(),\n      };\n      this.graph.addEdge(\n        createEdge.correspondsToCommit(\n          commit.address(),\n          gitCommitAddress,\n          commit.timestampMs()\n        )\n      );\n    }\n\n    for (const referrer of view.textContentEntities()) {\n      for (const referent of referrer.references()) {\n        this.graph.addEdge(\n          createEdge.references(\n            referrer.address(),\n            referent.address(),\n            referrer.timestampMs()\n          )\n        );\n      }\n    }\n\n    for (const reactable of view.reactableEntities()) {\n      for (const {content, user, timestampMs} of reactable.reactions()) {\n        // We only support unambiguously positive reactions for now\n        if (\n          content === Reactions.THUMBS_UP ||\n          content === Reactions.HEART ||\n          content === Reactions.HOORAY ||\n          content === Reactions.ROCKET\n        ) {\n          this.graph.addEdge(\n            createEdge.reacts(content, user, reactable.address(), timestampMs)\n          );\n        }\n      }\n    }\n  }\n\n  addAuthors(entity: R.AuthoredEntity) {\n    for (const author of entity.authors()) {\n      this.graph.addEdge(\n        createEdge.authors(\n          author.address(),\n          entity.address(),\n          entity.timestampMs()\n        )\n      );\n    }\n  }\n\n  addHasParent(child: R.Issue | R.Pull | R.Comment | R.Review) {\n    this.graph.addEdge(\n      createEdge.hasParent(\n        child.address(),\n        child.parent().address(),\n        child.timestampMs()\n      )\n    );\n  }\n}\n","//@flow\n\nimport type {NodeAddressT} from \"../graph\";\nimport type {ReferenceDetector, URL} from \"./referenceDetector\";\n\n/**\n * A reference detector which uses a pregenerated `Map<URL, NodeAddressT>` as a\n * lookup table.\n *\n * Note: this is sensitive to canonicalization issues because it's based on string\n * comparisons. For example:\n * - \"http://foo.bar/123\" != \"http://foo.bar/123#chapter-2\"\n * - \"http://foo.bar/?a=1&b=2\" != \"http://foo.bar/?b=2&a=1\"\n * - \"http://foo.bar/space+bar\" != \"http://foo.bar/space%20bar\"\n */\nexport class MappedReferenceDetector implements ReferenceDetector {\n  map: Map<URL, NodeAddressT>;\n\n  constructor(map: Map<URL, NodeAddressT>) {\n    this.map = map;\n  }\n\n  addressFromUrl(url: URL): ?NodeAddressT {\n    return this.map.get(url);\n  }\n}\n","// @flow\n\nimport dedent from \"../../util/dedent\";\nimport {type NodeAddressT, NodeAddress} from \"../../core/graph\";\nimport {MappedReferenceDetector, type URL} from \"../../core/references\";\nimport {RelationalView} from \"./relationalView\";\n\n/**\n * Builds a GithubReferenceDetector using multiple RelationalView.\n * As RelationalView should only be used for one repository at a time, you will\n * commonly want to compose several of them into one GithubReferenceDetector.\n *\n * Note: duplicates are normally expected. However for any URL, the corresponding\n * NodeAddressT should be the same, or we'll throw an error.\n */\nexport function fromRelationalViews(\n  views: $ReadOnlyArray<RelationalView>\n): GithubReferenceDetector {\n  const map: Map<URL, NodeAddressT> = new Map();\n  for (const view of views) {\n    for (const [url, addr] of view.urlReferenceMap().entries()) {\n      const existing = map.get(url);\n      if (existing && existing !== addr) {\n        throw new Error(dedent`\\\n          An entry for ${url} already existed, but with a different NodeAddressT.\n          This is probably a bug with SourceCred. Please report it on GitHub.\n          Old: ${NodeAddress.toString(existing)}\n          New: ${NodeAddress.toString(addr)}\n        `);\n      }\n      map.set(url, addr);\n    }\n  }\n  return new GithubReferenceDetector(map);\n}\n\nexport const GithubReferenceDetector = MappedReferenceDetector;\n","// @flow\n\nimport * as Combo from \"../../util/combo\";\nimport {type RepoId, stringToRepoId} from \"./repoId\";\n\nexport type GithubConfig = {|\n  +repoIds: $ReadOnlyArray<RepoId>,\n|};\n\n// eslint-disable-next-line no-unused-vars\ntype SerializedGithubConfig = {|\n  +repositories: $ReadOnlyArray<string>,\n|};\n// (^ for documentation purposes)\n\ntype JsonObject =\n  | string\n  | number\n  | boolean\n  | null\n  | JsonObject[]\n  | {[string]: JsonObject};\n\nexport const parser: Combo.Parser<GithubConfig> = (() => {\n  const C = Combo;\n  return C.object({\n    repoIds: C.rename(\n      \"repositories\",\n      C.array(C.fmap(C.string, stringToRepoId))\n    ),\n  });\n})();\n","// @flow\n\nimport {type IdentityProposal} from \"../../core/ledger/identityProposal\";\nimport {coerce, nameFromString} from \"../../core/identity/name\";\nimport {RelationalView, Userlike} from \"./relationalView\";\nimport {toRaw} from \"./nodes\";\n\nexport function _createIdentity(u: Userlike): IdentityProposal {\n  const alias = {\n    description: u.description(),\n    address: toRaw(u.address()),\n  };\n  function chooseType(u: Userlike) {\n    const subtype = u.address().subtype;\n    // TODO: We should let it infer ORGANIZATION or PROJECT types too,\n    // but at present we'll let the maintainer set this directly in the UI.\n    switch (subtype) {\n      case \"USER\": {\n        return \"USER\";\n      }\n      case \"BOT\": {\n        return \"BOT\";\n      }\n      default:\n        throw new Error(`unknown userlike subtype: ${(subtype: empty)}`);\n    }\n  }\n  return {\n    pluginName: nameFromString(\"github\"),\n    name: coerce(u.login()),\n    type: chooseType(u),\n    alias,\n  };\n}\n\nexport function createIdentities(\n  rv: RelationalView\n): $ReadOnlyArray<IdentityProposal> {\n  return Array.from(rv.userlikes()).map(_createIdentity);\n}\n","// @flow\n\nimport type {WritableDataStorage} from \"./index\";\nimport {join as pathJoin} from \"path\";\nimport normalize from \"../../util/pathNormalize\";\nimport fs from \"fs-extra\";\n\n/**\n * Disk Storage abstracts away low-level file I/O operations.\n */\nexport class DiskStorage implements WritableDataStorage {\n  +_basePath: string;\n\n  /**\n   * basePath will resolve to '.' if an empty string is passed in\n   */\n  constructor(basePath: string) {\n    this._basePath = normalize(basePath);\n  }\n\n  /**\n   * The `path` parameter must be relative to the `basePath` set at\n   * construction. Any I/O errors when attempting to read contents at the path\n   * will cause an error to be thrown.\n   */\n  async get(path: string): Promise<Uint8Array> {\n    const validPath = this._checkPathPrefix(path);\n    return fs.readFile(validPath);\n  }\n\n  /**\n   * The `path` parameter must be relative to the `basePath` set at\n   * construction. Any I/O errors when attempting to write contents at the path\n   * will cause an error to be thrown.\n   */\n  async set(path: string, contents: Uint8Array): Promise<void> {\n    const validPath = this._checkPathPrefix(path);\n    return fs.writeFile(validPath, contents);\n  }\n\n  /**\n   * `path` is a relative file path to the `basePath`. The normalized\n   * result cannot be above the instance's base path. This is ensures that any\n   * attempts at accessing the file system outside of the instance\n   * will cause an error to throw.\n   */\n  _checkPathPrefix(path: string): string {\n    const fullPath = normalize(pathJoin(this._basePath, path));\n    // Ensure normalized path isn't outside basePath\n    if (!(fullPath.startsWith(this._basePath) || this._basePath === \".\")) {\n      throw new Error(\n        \"Path construction error; possible path traversal attack\"\n      );\n    }\n    return fullPath;\n  }\n}\n","// @flow\n\nimport Database from \"better-sqlite3\";\nimport {join as pathJoin} from \"path\";\nimport fetchGithubRepo, {fetchGithubRepoFromCache} from \"./fetchGithubRepo\";\nimport type {CacheProvider} from \"../../backend/cache\";\nimport type {Plugin, PluginDirectoryContext} from \"../../api/plugin\";\nimport type {PluginDeclaration} from \"../../analysis/pluginDeclaration\";\nimport type {ReferenceDetector} from \"../../core/references\";\nimport {\n  type WeightedGraph,\n  merge as mergeWeightedGraph,\n} from \"../../core/weightedGraph\";\nimport {merge as mergeWeights} from \"../../core/weights\";\nimport {RelationalView} from \"./relationalView\";\nimport {createGraph} from \"./createGraph\";\nimport {declaration} from \"./declaration\";\nimport {fromRelationalViews as referenceDetectorFromRelationalViews} from \"./referenceDetector\";\nimport {parser, type GithubConfig} from \"./config\";\nimport {validateToken, type GithubToken} from \"./token\";\nimport {weightsForDeclaration} from \"../../analysis/pluginDeclaration\";\nimport {type TaskReporter} from \"../../util/taskReporter\";\nimport {repoIdToString} from \"./repoId\";\nimport {loadJson} from \"../../util/storage\";\nimport {createIdentities} from \"./createIdentities\";\nimport {DiskStorage} from \"../../core/storage/disk\";\nimport type {IdentityProposal} from \"../../core/ledger/identityProposal\";\n\nconst TOKEN_ENV_VAR_NAME = \"SOURCECRED_GITHUB_TOKEN\";\n\nasync function loadConfig(\n  dirContext: PluginDirectoryContext\n): Promise<GithubConfig> {\n  const dirname = dirContext.configDirectory();\n  const storage = new DiskStorage(dirname);\n  return loadJson(storage, \"config.json\", parser);\n}\n\n// Shim to interface with `fetchGithubRepo`; TODO: refactor that to just\n// take a directory.\nclass CacheProviderImpl implements CacheProvider {\n  _dirContext: PluginDirectoryContext;\n  constructor(dirContext: PluginDirectoryContext) {\n    this._dirContext = dirContext;\n  }\n  database(id: string): Promise<Database> {\n    const path = pathJoin(this._dirContext.cacheDirectory(), `${id}.db`);\n    return Promise.resolve(new Database(path));\n  }\n}\n\nfunction getTokenFromEnv(): GithubToken {\n  const rawToken = process.env[TOKEN_ENV_VAR_NAME];\n  if (rawToken == null) {\n    throw new Error(`No GitHub token provided: set ${TOKEN_ENV_VAR_NAME}`);\n  }\n  return validateToken(rawToken);\n}\n\nexport class GithubPlugin implements Plugin {\n  async declaration(): Promise<PluginDeclaration> {\n    return declaration;\n  }\n\n  async load(\n    ctx: PluginDirectoryContext,\n    reporter: TaskReporter\n  ): Promise<void> {\n    const cache = new CacheProviderImpl(ctx);\n    const token = getTokenFromEnv();\n    const config = await loadConfig(ctx);\n    for (const repoId of config.repoIds) {\n      const repoString = repoIdToString(repoId);\n      const task = `github: loading ${repoString}`;\n      reporter.start(task);\n      await fetchGithubRepo(repoId, {token, cache});\n      reporter.finish(task);\n    }\n  }\n\n  async graph(\n    ctx: PluginDirectoryContext,\n    rd: ReferenceDetector\n  ): Promise<WeightedGraph> {\n    const _ = rd; // TODO(#1808): not yet used\n    const cache = new CacheProviderImpl(ctx);\n    const token = getTokenFromEnv();\n    const config = await loadConfig(ctx);\n\n    const repositories = [];\n    for (const repoId of config.repoIds) {\n      repositories.push(await fetchGithubRepoFromCache(repoId, {token, cache}));\n    }\n    const wg = mergeWeightedGraph(\n      repositories.map((r) => {\n        const rv = new RelationalView();\n        rv.addRepository(r);\n        return createGraph(rv);\n      })\n    );\n    const pluginDefaultWeights = weightsForDeclaration(declaration);\n    const weights = mergeWeights([wg.weights, pluginDefaultWeights]);\n    return {graph: wg.graph, weights};\n  }\n\n  async referenceDetector(\n    ctx: PluginDirectoryContext\n  ): Promise<ReferenceDetector> {\n    const cache = new CacheProviderImpl(ctx);\n    const token = getTokenFromEnv();\n    const config = await loadConfig(ctx);\n\n    const rvs = [];\n    for (const repoId of config.repoIds) {\n      const repo = await fetchGithubRepoFromCache(repoId, {token, cache});\n      const rv = new RelationalView();\n      rv.addRepository(repo);\n      rvs.push(rv);\n    }\n    return referenceDetectorFromRelationalViews(rvs);\n  }\n\n  async identities(\n    ctx: PluginDirectoryContext\n  ): Promise<$ReadOnlyArray<IdentityProposal>> {\n    const cache = new CacheProviderImpl(ctx);\n    const token = getTokenFromEnv();\n    const config = await loadConfig(ctx);\n\n    let identities = [];\n    for (const repoId of config.repoIds) {\n      const repo = await fetchGithubRepoFromCache(repoId, {token, cache});\n      const rv = new RelationalView();\n      rv.addRepository(repo);\n      identities = [...identities, ...createIdentities(rv)];\n    }\n    return identities;\n  }\n}\n","// @flow\n\nexport type GithubToken = string;\n\n/**\n * Validates a token against know formatting.\n * Throws an error if it appears invalid.\n *\n * Personal access token\n * https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line\n *\n * Installation access token\n * https://developer.github.com/v3/apps/#create-a-new-installation-token\n */\nexport function validateToken(token: string): GithubToken {\n  const accessTokenRE = /^gh[pousr]_[A-Za-z0-9_]*$/;\n  const oldAccessTokenRE = /^[A-Fa-f0-9]{40}$/;\n  if (accessTokenRE.test(token) || oldAccessTokenRE.test(token)) {\n    return token;\n  }\n\n  // We're currently being lenient with installation tokens, since we're not completely\n  // sure on the exact format. We're only warning on unexpected values but leave it up\n  // to the GitHub API to reject the token if it's actually invalid.\n  const installationAccessTokenRE = /^(v\\d+)\\.([A-Za-z0-9_]+)$/;\n  const matches = installationAccessTokenRE.exec(token);\n  if (matches != null) {\n    const [_, version, hexCode] = matches;\n\n    if (version !== \"v1\") {\n      console.warn(\n        `Warning: GitHub installation access token has an unexpected version \"${version}\".`\n      );\n    }\n\n    if (hexCode.length !== 40) {\n      console.warn(\n        `Warning: GitHub installation access token has an unexpected hexadecimal component ` +\n          `length of ${hexCode.length}.`\n      );\n    }\n\n    return token;\n  }\n\n  throw new Error(\n    `The token supplied to $SOURCECRED_GITHUB_TOKEN doesn't match any format known to work.\\n` +\n      `Please verify the token \"${token}\" is correct, or report a bug if you think it should work.`\n  );\n}\n","// @flow\n\nconst htmlparser2 = require(\"htmlparser2\");\n\nimport {type TopicId} from \"./fetch\";\n\nexport type DiscoursePostReference = {|\n  +type: \"POST\",\n  +topicId: TopicId,\n  +postIndex: number,\n  +serverUrl: string,\n|};\n\nexport type DiscourseTopicReference = {|\n  +type: \"TOPIC\",\n  +topicId: TopicId,\n  +serverUrl: string,\n|};\n\nexport type DiscourseUserReference = {|\n  +type: \"USER\",\n  +username: string,\n  +serverUrl: string,\n|};\n\nexport type DiscourseReference =\n  | DiscoursePostReference\n  | DiscourseTopicReference\n  | DiscourseUserReference;\n\nexport type UrlString = string;\n/**\n * Parse the links from a Discourse post's cookedHtml, generating\n * an array of UrlStrings. All of the UrlStrings will contain the full\n * server URL (i.e. relative references are made absolute). The serverUrl\n * is required so that we can do this.\n */\nexport function parseLinks(cookedHtml: string, serverUrl: string): UrlString[] {\n  const links = [];\n  const httpRegex = /^https?:\\/\\//;\n  if (serverUrl[serverUrl.length - 1] === \"/\") {\n    // Strip trailing slash if it was provided, so we can concatenate\n    // strings below.\n    serverUrl = serverUrl.slice(0, serverUrl.length - 1);\n  }\n  if (!serverUrl.match(httpRegex)) {\n    throw new Error(`Invalid server url ${serverUrl}`);\n  }\n  const parser = new htmlparser2.Parser({\n    onopentag(name, attribs) {\n      if (name === \"a\") {\n        const href = attribs.href;\n        if (href != null) {\n          if (href.match(httpRegex)) {\n            links.push(href);\n          }\n          if (href[0] === \"/\") {\n            links.push(serverUrl + href);\n          }\n        }\n      }\n    },\n  });\n  parser.write(cookedHtml);\n  parser.end();\n  return links;\n}\n\nexport function linksToReferences(\n  links: $ReadOnlyArray<UrlString>\n): DiscourseReference[] {\n  const server = \"(https?://[\\\\w.-]+)\";\n  const topic = `(?:${server})/t/[\\\\w-]+/(\\\\d+)`;\n  const post = `(?:${topic})/(\\\\d+)`;\n  const params = \"(?:\\\\?[\\\\w-=]+)?\";\n\n  const topicRegex = new RegExp(`^(?:${topic})(?:${params})/?$`);\n  const postRegex = new RegExp(`^(?:${post})(?:${params})/?$`);\n  const userRegex = new RegExp(`^(?:${server})/u/([\\\\w-]+)(?:${params})/?$`);\n  const references: DiscourseReference[] = [];\n  for (const link of links) {\n    let match = null;\n    let decoded;\n    try {\n      decoded = decodeURI(link);\n    } catch (e) {\n      console.error(`${e}\\nFor URL: ${link}`);\n      continue;\n    }\n    if ((match = decoded.match(postRegex))) {\n      references.push({\n        type: \"POST\",\n        topicId: +match[2],\n        serverUrl: match[1],\n        postIndex: +match[3],\n      });\n    } else if ((match = decoded.match(topicRegex))) {\n      references.push({type: \"TOPIC\", topicId: +match[2], serverUrl: match[1]});\n    } else if ((match = decoded.match(userRegex))) {\n      references.push({\n        type: \"USER\",\n        username: match[2],\n        serverUrl: match[1],\n      });\n    }\n  }\n  return references;\n}\n","// @flow\n\nimport {EdgeAddress, type Node, type Edge} from \"../../core/graph\";\nimport {type PostId, type Post, type Topic, type LikeAction} from \"./fetch\";\nimport {\n  authorsPostEdgeType,\n  authorsTopicEdgeType,\n  postRepliesEdgeType,\n  topicContainsPostEdgeType,\n  topicHasLikedPostEdgeType,\n  likesEdgeType,\n  createsLikeEdgeType,\n  referencesTopicEdgeType,\n  referencesUserEdgeType,\n  referencesPostEdgeType,\n} from \"./declaration\";\nimport {userAddress, topicAddress, postAddress, likeAddress} from \"./address\";\nimport {\n  type DiscourseTopicReference,\n  type DiscourseUserReference,\n} from \"./references\";\n\nexport function userNode(serverUrl: string, username: string): Node {\n  const url = `${serverUrl}/u/${username}/`;\n  const description = `discourse/[@${username}](${url})`;\n  return {\n    address: userAddress(serverUrl, username),\n    description,\n    timestampMs: null,\n  };\n}\n\nexport function topicNode(serverUrl: string, topic: Topic): Node {\n  const url = `${serverUrl}/t/${String(topic.id)}`;\n  const description = `[${topic.title}](${url})`;\n  const address = topicAddress(serverUrl, topic.id);\n  return {address, description, timestampMs: topic.timestampMs};\n}\n\nexport function postNode(\n  serverUrl: string,\n  post: Post,\n  description: string\n): Node {\n  const address = postAddress(serverUrl, post.id);\n  return {timestampMs: post.timestampMs, address, description};\n}\n\nexport function likeNode(\n  serverUrl: string,\n  like: LikeAction,\n  postDescription: string\n): Node {\n  const address = likeAddress(serverUrl, like);\n  const description = ` by ${like.username} on ${postDescription}`;\n  return {timestampMs: like.timestampMs, address, description};\n}\n\nexport function authorsTopicEdge(serverUrl: string, topic: Topic): Edge {\n  const address = EdgeAddress.append(\n    authorsTopicEdgeType.prefix,\n    serverUrl,\n    topic.authorUsername,\n    String(topic.id)\n  );\n  return {\n    address,\n    timestampMs: topic.timestampMs,\n    src: userAddress(serverUrl, topic.authorUsername),\n    dst: topicAddress(serverUrl, topic.id),\n  };\n}\n\nexport function authorsPostEdge(serverUrl: string, post: Post): Edge {\n  const address = EdgeAddress.append(\n    authorsPostEdgeType.prefix,\n    serverUrl,\n    post.authorUsername,\n    String(post.id)\n  );\n  return {\n    address,\n    timestampMs: post.timestampMs,\n    src: userAddress(serverUrl, post.authorUsername),\n    dst: postAddress(serverUrl, post.id),\n  };\n}\n\nexport function topicContainsPostEdge(serverUrl: string, post: Post): Edge {\n  const address = EdgeAddress.append(\n    topicContainsPostEdgeType.prefix,\n    serverUrl,\n    String(post.topicId),\n    String(post.id)\n  );\n  return {\n    address,\n    timestampMs: post.timestampMs,\n    src: topicAddress(serverUrl, post.topicId),\n    dst: postAddress(serverUrl, post.id),\n  };\n}\n\nexport function topicHasLikedPostEdge(serverUrl: string, post: Post): Edge {\n  const address = EdgeAddress.append(\n    topicHasLikedPostEdgeType.prefix,\n    serverUrl,\n    String(post.topicId),\n    String(post.id)\n  );\n  return {\n    address,\n    timestampMs: post.timestampMs,\n    src: topicAddress(serverUrl, post.topicId),\n    dst: postAddress(serverUrl, post.id),\n  };\n}\n\nexport function postRepliesEdge(\n  serverUrl: string,\n  post: Post,\n  basePostId: PostId\n): Edge {\n  const address = EdgeAddress.append(\n    postRepliesEdgeType.prefix,\n    serverUrl,\n    String(post.id),\n    String(basePostId)\n  );\n  return {\n    address,\n    timestampMs: post.timestampMs,\n    src: postAddress(serverUrl, post.id),\n    dst: postAddress(serverUrl, basePostId),\n  };\n}\n\nexport function createsLikeEdge(serverUrl: string, like: LikeAction): Edge {\n  const address = EdgeAddress.append(\n    createsLikeEdgeType.prefix,\n    serverUrl,\n    like.username,\n    String(like.postId)\n  );\n  return {\n    address,\n    timestampMs: like.timestampMs,\n    src: userAddress(serverUrl, like.username),\n    dst: likeAddress(serverUrl, like),\n  };\n}\n\nexport function likesEdge(serverUrl: string, like: LikeAction): Edge {\n  const address = EdgeAddress.append(\n    likesEdgeType.prefix,\n    serverUrl,\n    like.username,\n    String(like.postId)\n  );\n  return {\n    address,\n    timestampMs: like.timestampMs,\n    src: likeAddress(serverUrl, like),\n    dst: postAddress(serverUrl, like.postId),\n  };\n}\n\nexport function referencesTopicEdge(\n  serverUrl: string,\n  post: Post,\n  reference: DiscourseTopicReference\n): Edge {\n  const address = EdgeAddress.append(\n    referencesTopicEdgeType.prefix,\n    serverUrl,\n    String(post.id),\n    String(reference.topicId)\n  );\n  const src = postAddress(serverUrl, post.id);\n  const dst = topicAddress(serverUrl, reference.topicId);\n  return {src, dst, timestampMs: post.timestampMs, address};\n}\n\nexport function referencesPostEdge(\n  serverUrl: string,\n  post: Post,\n  referredPostId: PostId\n): Edge {\n  const address = EdgeAddress.append(\n    referencesPostEdgeType.prefix,\n    serverUrl,\n    String(post.id),\n    String(referredPostId)\n  );\n  const src = postAddress(serverUrl, post.id);\n  const dst = postAddress(serverUrl, referredPostId);\n  return {src, dst, timestampMs: post.timestampMs, address};\n}\n\nexport function referencesUserEdge(\n  serverUrl: string,\n  post: Post,\n  reference: DiscourseUserReference\n): Edge {\n  const address = EdgeAddress.append(\n    referencesUserEdgeType.prefix,\n    serverUrl,\n    String(post.id),\n    reference.username\n  );\n  const src = postAddress(serverUrl, post.id);\n  const dst = userAddress(serverUrl, reference.username);\n  return {src, dst, timestampMs: post.timestampMs, address};\n}\n","// @flow\n\nimport {type NodeWeight} from \"../../core/weights\";\nimport * as C from \"../../util/combo\";\nimport * as MapUtil from \"../../util/map\";\nimport {orElse as either} from \"../../util/null\";\nimport {DEFAULT_TRUST_LEVEL_TO_WEIGHT} from \"./createGraph\";\nimport {type User} from \"./fetch\";\nimport {type CategoryId as MirrorCategoryId, type Tag} from \"./fetch\";\n\n// Expected to be an integer string, like \"1\" or \"123\"\nexport opaque type CategoryId: string = string;\n// No restrictions (can be more specific later if we investigate Discourse)\nexport opaque type TagId: string = string;\n\nexport function parseCategoryId(id: string): CategoryId {\n  const result = parseInt(id, 10);\n  if (Number.isNaN(result) || result.toString() !== id) {\n    throw new Error(`CategoryId should be a string integer; got ${id}`);\n  }\n  return id;\n}\n\n// parse out the opaque type\nexport function parseTagId(id: string): TagId {\n  return id;\n}\n\nexport type SerializedWeightsConfig = {|\n  /**\n   * Tags can be configured to confer specific like-weight multipliers when\n   * added to a Topic.\n   * If a tag does not have a configured weight, the defaultWeight is applied.\n   * An example configuration might look like:\n   * ```\n   * \"weights\": {\n   *   \"defaultTagWeight\": 1,\n   *   \"tagWeights\": {\n   *     \"foo\": 0,\n   *     \"bar\": 1.25,\n   *     \"baz\": 2\n   *   }\n   *   // categoryWeight configs...\n   * }\n   * ```\n   * where foo and bar are the names of tags used in discourse.\n   *\n   * When multiple tags are assigned to a topic, their weights are multiplied\n   * together to yield a total tag Weight multiplier. In our example configuration,\n   * if both foo and bar are added to a topic, likes on posts in the topic will\n   * have a weight of 0, (0 * 1.25 = 0), which means that no cred will be minted\n   * by those likes.\n   *\n   * If \"bar\" and \"baz\" are both added to another topic, the likes on all posts\n   * in that topic will carry a weight of 2.5 (1.25 * 2 = 2.5), which means that\n   * 2.5x as much cred will be minted by those likes.\n   */\n  +defaultTagWeight?: NodeWeight,\n  +tagWeights?: {|[TagId]: NodeWeight|},\n  /**\n   * Categories can be configured to confer a specific like-weight multiplier\n   * when added to a Topic.\n   * If a category does not have a configured weight, the defaultWeight is applied.\n   * An example configuration might look like:\n   * ```\n   * weights: {\n   *  \"defaultCategoryWeight\": 1,\n   *  \"categoryWeights\": {\n   *    \"5\": 0,\n   *    \"36\": 1.25\n   *  }\n   *  // tagWeight configs...\n   * }\n   * ```\n   * where \"5\" and \"36\" are the categoryIds in discourse.\n   *\n   * An easy way to find the categoryId for a given category is to browse to the\n   * categories section in discourse\n   * (e.g. https://discourse.sourcecred.io/categories).\n   * Then mousing over or clicking on a category will bring you to a url that\n   * has the shape https://exampleUrl.com/c/<category name>/<categoryId>\n   * Clicking on the community category in sourcecred navigates to\n   * https://discourse.sourcecred.io/c/community/26 for example, where the\n   * categoryId is 26\n   */\n  +defaultCategoryWeight?: NodeWeight,\n  +categoryWeights?: {|[CategoryId]: NodeWeight|},\n  /*\n   * Tags and Topic Category can be used in combination to create like-weight\n   * multipliers on Topics. This means that if any assigned tag or topic category\n   * is set to 0, all likes on that topic will mint zero cred.\n   */\n|};\n\nexport type WeightsConfig = {|\n  +defaultTagWeight: number,\n  +tagWeights: Map<TagId, number>,\n  +defaultCategoryWeight: number,\n  +categoryWeights: Map<CategoryId, number>,\n|};\n\nfunction upgrade(s: SerializedWeightsConfig): WeightsConfig {\n  return {\n    defaultTagWeight: either(s.defaultTagWeight, 1),\n    defaultCategoryWeight: either(s.defaultCategoryWeight, 1),\n    tagWeights: MapUtil.fromObject(s.tagWeights || {}),\n    categoryWeights: MapUtil.fromObject(s.categoryWeights || {}),\n  };\n}\n\nexport const serializedWeightsConfigParser: C.Parser<SerializedWeightsConfig> = C.object(\n  {},\n  {\n    defaultCategoryWeight: C.number,\n    defaultTagWeight: C.number,\n    categoryWeights: C.dict(\n      C.number,\n      C.fmap(C.delimited(\"//\"), parseCategoryId)\n    ),\n    tagWeights: C.dict(C.number, C.fmap(C.string, parseTagId)),\n  }\n);\n\nexport const weightsConfigParser: C.Parser<WeightsConfig> = C.fmap(\n  serializedWeightsConfigParser,\n  upgrade\n);\n\nexport function likeWeight(\n  weights: WeightsConfig,\n  user: ?User,\n  category: ?MirrorCategoryId,\n  tags: ?$ReadOnlyArray<Tag>\n): NodeWeight {\n  const trustLevel = user == null ? 0 : _trustLevelWeight(user.trustLevel);\n  const categoryWeight =\n    category == null ? 1 : _categoryWeight(category, weights);\n  const tagWeight = tags == null ? 1 : _weightFromTags(tags, weights);\n  return trustLevel * categoryWeight * tagWeight;\n}\n\nexport function _trustLevelWeight(trustLevel: number | null): NodeWeight {\n  if (trustLevel == null) {\n    // The null trust level shouldn't happen in practice, right now users who\n    // only like but never post will have null trust level (will be fixed by #2045).\n    // This means they could have trust level 1. But to be conservative, we treat anyone\n    // with a null trust level as if they have trust level 0.\n    // Possibly this could come up with deleted users too.\n    return DEFAULT_TRUST_LEVEL_TO_WEIGHT[\"0\"];\n  }\n\n  const key = String(trustLevel);\n  const weight = DEFAULT_TRUST_LEVEL_TO_WEIGHT[key];\n  if (weight == null) {\n    throw new Error(`invalid trust level: ${String(key)}`);\n  }\n  return weight;\n}\n\nexport function _categoryWeight(\n  category: MirrorCategoryId,\n  {categoryWeights, defaultCategoryWeight}: WeightsConfig\n): NodeWeight {\n  const weight = categoryWeights.get(category);\n  return weight == null ? defaultCategoryWeight : weight;\n}\n\nexport function _weightFromTags(\n  tags: $ReadOnlyArray<Tag>,\n  {tagWeights, defaultTagWeight}: WeightsConfig\n): NodeWeight {\n  const weightForTag = (tagId: TagId) =>\n    either(tagWeights.get(tagId), defaultTagWeight);\n  return tags.reduce((acc, tag) => acc * weightForTag(tag), 1);\n}\n","// @flow\n\nimport {Graph, type Node, type Edge} from \"../../core/graph\";\nimport {type NodeWeight} from \"../../core/weights\";\nimport {weightsForDeclaration} from \"../../analysis/pluginDeclaration\";\nimport {type WeightedGraph} from \"../../core/weightedGraph\";\nimport {\n  type PostId,\n  type TopicId,\n  type CategoryId,\n  type Tag,\n  type Post,\n} from \"./fetch\";\nimport {type ReadRepository} from \"./mirrorRepository\";\nimport {declaration} from \"./declaration\";\nimport {\n  type DiscourseReference,\n  parseLinks,\n  linksToReferences,\n} from \"./references\";\nimport * as NE from \"./nodesAndEdges\";\nimport {type DiscourseConfig} from \"./config\";\nimport {likeWeight} from \"./weights\";\n\nexport type GraphUser = {|\n  +node: Node,\n|};\n\nexport type GraphTopic = {|\n  +node: Node,\n  +hasAuthor: Edge,\n|};\n\nexport type GraphPost = {|\n  +topicContains: Edge,\n  +node: Node,\n  +hasAuthor: Edge,\n  +references: $ReadOnlyArray<Edge>,\n  +postReplies: Edge | null,\n|};\n\nexport type GraphLike = {|\n  +createsLike: Edge,\n  +likes: Edge,\n  +node: Node,\n  +weight: NodeWeight,\n|};\n\n/**\n * TopicHasLikedPost edges connect a Topic to the posts\n * in that topic that were liked, in proportion to the\n * total like weight of the post in question.\n *\n * See: https://github.com/sourcecred/sourcecred/issues/1896\n */\nexport type TopicHasLikedPost = {|\n  +edge: Edge,\n  +weight: number,\n|};\n\nexport type GraphData = {\n  +users: $ReadOnlyArray<Node>,\n  +topics: $ReadOnlyArray<GraphTopic>,\n  +posts: $ReadOnlyArray<GraphPost>,\n  +likes: $ReadOnlyArray<GraphLike>,\n  +topicHasLikedPosts: $ReadOnlyArray<TopicHasLikedPost>,\n};\n\n// TODO: Make this configurable.\n// For details on trust levels:\n// https://blog.discourse.org/2018/06/understanding-discourse-trust-levels/\nexport const DEFAULT_TRUST_LEVEL_TO_WEIGHT = Object.freeze({\n  \"0\": 0,\n  // Trust level 1 indicates little engagement (doesn't even require any posts)\n  // so I gave them a very small weight.\n  \"1\": 0.1,\n  // Trust level 2 in my mind indicates being a \"full member\" so it feels\n  // like a good anchor for a standard weight of 1.\n  \"2\": 1,\n  // Trust level 3 requires that you are highly active and have earned lots of\n  // likes, so feels trusted enough for some bonus minting.\n  \"3\": 1.25,\n  // Trust level 4 means you've been designated as high trust by the admins, so\n  // we give a bigger bonus. Could make this even larger (2?)\n  \"4\": 1.5,\n});\n\nexport function _createGraphData(\n  config: DiscourseConfig,\n  repo: ReadRepository\n): GraphData {\n  const {serverUrl} = config;\n  const users = repo.users().map((u) => NE.userNode(serverUrl, u.username));\n\n  const topicIdToCategory = new Map<TopicId, CategoryId>();\n  const topicIdToTags = new Map<TopicId, $ReadOnlyArray<Tag>>();\n  const topics: $ReadOnlyArray<GraphTopic> = repo.topics().map((topic) => {\n    const node = NE.topicNode(serverUrl, topic);\n    topicIdToCategory.set(topic.id, topic.categoryId);\n    topicIdToTags.set(topic.id, topic.tags);\n    const hasAuthor = NE.authorsTopicEdge(serverUrl, topic);\n    return {node, hasAuthor};\n  });\n\n  const findPostInTopic = repo.findPostInTopic.bind(repo);\n  const postIdToDescription = new Map();\n  const posts: $ReadOnlyArray<GraphPost> = repo.posts().map((post) => {\n    const topic = repo.topicById(post.topicId);\n    const topicTitle = topic != null ? topic.title : \"[unknown topic]\";\n    const url = serverUrl + \"/t/\" + post.topicId + \"/\" + post.indexWithinTopic;\n    const description = `[#${post.indexWithinTopic} on ${topicTitle}](${url})`;\n    postIdToDescription.set(post.id, description);\n    const node = NE.postNode(serverUrl, post, description);\n    const hasAuthor = NE.authorsPostEdge(serverUrl, post);\n\n    const references = _createReferenceEdges(serverUrl, post, findPostInTopic);\n\n    let postReplies = null;\n    let replyToPostIndex = post.replyToPostIndex;\n    if (replyToPostIndex == null && post.indexWithinTopic > 1) {\n      // The replyToPostIndex gets set to null if it is actually a reply to\n      // the topic's own post.\n      replyToPostIndex = 1;\n    }\n    if (replyToPostIndex != null) {\n      const parentId = repo.findPostInTopic(post.topicId, replyToPostIndex);\n      if (parentId != null) {\n        postReplies = NE.postRepliesEdge(serverUrl, post, parentId);\n      }\n    }\n\n    const topicContains = NE.topicContainsPostEdge(serverUrl, post);\n\n    return {node, hasAuthor, references, postReplies, topicContains};\n  });\n\n  const postIdToLikeWeight = new Map();\n  const likes: $ReadOnlyArray<GraphLike> = repo.likes().map((like) => {\n    const postDescription =\n      postIdToDescription.get(like.postId) || \"[unknown post]\";\n    const node = NE.likeNode(serverUrl, like, postDescription);\n    const createsLike = NE.createsLikeEdge(serverUrl, like);\n    const likes = NE.likesEdge(serverUrl, like);\n    const user = repo.findUser(like.username);\n    const post = repo.postById(like.postId);\n    const topicId = post ? post.topicId : null;\n    let weight = 0;\n    if (topicId) {\n      const categoryId = topicIdToCategory.get(topicId);\n      const tags = topicIdToTags.get(topicId);\n      weight = likeWeight(config.weights, user, categoryId, tags);\n    } else {\n      weight = likeWeight(config.weights, user);\n    }\n    // Update how much total like weight this post has, so that we can\n    // set up a hasLikedPost edge flowing cred from the topic\n    const existingWeight = postIdToLikeWeight.get(like.postId) || 0;\n    postIdToLikeWeight.set(like.postId, existingWeight + weight);\n\n    return {node, createsLike, likes, weight};\n  });\n\n  const topicHasLikedPosts = [];\n  for (const [postId, weight] of postIdToLikeWeight.entries()) {\n    if (weight === 0) {\n      // This could happen if all of the likes were from untrusted users\n      continue;\n    }\n    const post = repo.postById(postId);\n    if (post == null) {\n      // The like didn't correspond to a valid post--maybe a cache/deletion\n      // thing--let's ignore it.\n      continue;\n    }\n    const edge = NE.topicHasLikedPostEdge(serverUrl, post);\n    topicHasLikedPosts.push({edge, weight});\n  }\n  return {users, topics, posts, likes, topicHasLikedPosts};\n}\n\nexport function _graphFromData({\n  users,\n  topics,\n  posts,\n  likes,\n  topicHasLikedPosts,\n}: GraphData): WeightedGraph {\n  const g = new Graph();\n  const weights = weightsForDeclaration(declaration);\n  for (const user of users) {\n    g.addNode(user);\n  }\n  for (const topic of topics) {\n    g.addNode(topic.node);\n    g.addEdge(topic.hasAuthor);\n  }\n  for (const post of posts) {\n    g.addNode(post.node);\n    g.addEdge(post.topicContains);\n    g.addEdge(post.hasAuthor);\n    if (post.postReplies != null) {\n      g.addEdge(post.postReplies);\n    }\n    for (const reference of post.references) {\n      g.addEdge(reference);\n    }\n  }\n  for (const like of likes) {\n    g.addNode(like.node);\n    g.addEdge(like.createsLike);\n    g.addEdge(like.likes);\n    weights.nodeWeights.set(like.node.address, like.weight);\n  }\n\n  for (const {edge, weight} of topicHasLikedPosts) {\n    g.addEdge(edge);\n    weights.edgeWeights.set(edge.address, {forwards: weight, backwards: 0});\n  }\n  return {graph: g, weights};\n}\n\nexport function createGraph(\n  config: DiscourseConfig,\n  repo: ReadRepository\n): WeightedGraph {\n  const data = _createGraphData(config, repo);\n  return _graphFromData(data);\n}\n\nexport function _createReferenceEdges(\n  serverUrl: string,\n  post: Post,\n  findPostInTopic: (topicId: TopicId, indexWithinTopic: number) => ?PostId,\n  // This is available as a helper for testing, so we don't need to construct posts\n  // with fake html containing links.\n  _manualLinks: ?$ReadOnlyArray<string>\n): $ReadOnlyArray<Edge> {\n  const links = _manualLinks\n    ? _manualLinks\n    : parseLinks(post.cooked, serverUrl);\n  const references = linksToReferences(links);\n  const result = [];\n  for (const reference of references) {\n    const edge = _referenceEdge(serverUrl, post, reference, findPostInTopic);\n    if (edge != null) {\n      result.push(edge);\n    }\n  }\n  return result;\n}\n\nfunction _referenceEdge(\n  serverUrl: string,\n  post: Post,\n  reference: DiscourseReference,\n  findPostInTopic: (topicId: TopicId, indexWithinTopic: number) => ?PostId\n): Edge | null {\n  if (\n    reference.serverUrl != null &&\n    reference.serverUrl.toLowerCase() !== serverUrl.toLowerCase()\n  ) {\n    // Don't attempt to make cross-instance links for now, since we only\n    // load one Discourse forum in a given instance.\n    return null;\n  }\n  switch (reference.type) {\n    case \"TOPIC\": {\n      return NE.referencesTopicEdge(serverUrl, post, reference);\n    }\n    case \"POST\": {\n      const referredPostId = findPostInTopic(\n        reference.topicId,\n        reference.postIndex\n      );\n      if (referredPostId == null) {\n        // Maybe a bad link, or the post or topic was deleted.\n        return null;\n      }\n      return NE.referencesPostEdge(serverUrl, post, referredPostId);\n    }\n    case \"USER\": {\n      return NE.referencesUserEdge(serverUrl, post, reference);\n    }\n    default: {\n      throw new Error(`Unexpected reference type: ${(reference.type: empty)}`);\n    }\n  }\n}\n","// @flow\n\nimport type {Database} from \"better-sqlite3\";\nimport stringify from \"json-stable-stringify\";\nimport dedent from \"../../util/dedent\";\nimport type {\n  TopicId,\n  PostId,\n  Topic,\n  Post,\n  LikeAction,\n  User,\n  Tag,\n} from \"./fetch\";\nimport {type TimestampMs} from \"../../util/timestamp\";\nimport * as MapUtil from \"../../util/map\";\n\n// The version should be bumped any time the database schema is changed,\n// so that the cache will be properly invalidated.\nconst VERSION = \"discourse_mirror_v6\";\nconst DEFINITION_CHECK_KEY = \"definition_check\";\n\n/**\n * An interface for reading the local Discourse data.\n */\nexport interface ReadRepository {\n  /**\n   * Retrieve every Topic available.\n   *\n   * The order is unspecified.\n   */\n  topics(): $ReadOnlyArray<Topic>;\n\n  /**\n   * Retrieve every Post available.\n   *\n   * The order is unspecified.\n   */\n  posts(): $ReadOnlyArray<Post>;\n\n  /**\n   * Given a TopicId and a post number, find that numbered post within the topic.\n   *\n   * Returns undefined if no such post is available.\n   */\n  findPostInTopic(topicId: TopicId, indexWithinTopic: number): ?PostId;\n\n  /**\n   * Get usernames for all users.\n   *\n   * The order is unspecified.\n   */\n  users(): $ReadOnlyArray<User>;\n\n  /**\n   * Gets all of the like actions in the history.\n   */\n  likes(): $ReadOnlyArray<LikeAction>;\n\n  /**\n   * Gets the user with a given name, if they exist.\n   *\n   * Note: input username is case-insensitive.\n   */\n  findUser(username: string): ?User;\n\n  /**\n   * Gets a Topic by ID.\n   */\n  topicById(id: TopicId): ?Topic;\n\n  /**\n   * Gets a Post by ID.\n   */\n  postById(id: PostId): ?Post;\n}\n\nexport type SyncHeads = {|\n  /**\n   * The timestamp of the last time we've loaded category definition topics.\n   * Used for determining whether we should reload them during an update.\n   */\n  +definitionCheckMs: number,\n\n  /**\n   * The most recent bumpedMs timestamp of all topics.\n   * Used for determining what the most recent topic changes we have stored in\n   * our local mirror, and which we should fetch from the API during update.\n   */\n  +topicBumpMs: number,\n|};\n\nexport type AddResult = {|\n  +changes: number,\n  +lastInsertRowid: number,\n|};\n\n// Read-write interface the mirror uses internally.\nexport interface MirrorRepository extends ReadRepository {\n  addLike(like: LikeAction): AddResult;\n\n  addOrReplaceUser(user: User): AddResult;\n\n  addUserIfNotExists(user: User): AddResult;\n\n  /**\n   * For the given topic ID, retrieves the bumpedMs value.\n   * Returns null, when the topic wasn't found.\n   */\n  bumpedMsForTopic(id: TopicId): number | null;\n\n  /**\n   * Finds the SyncHeads values, used as input to skip\n   * already up-to-date content when mirroring.\n   */\n  syncHeads(): SyncHeads;\n\n  /**\n   * Idempotent insert/replace of a Topic, including all it's Posts.\n   *\n   * Note: this will insert new posts, update existing posts and delete old posts.\n   * As these are separate queries, we use a transaction here.\n   */\n  replaceTopicTransaction(topic: Topic, posts: $ReadOnlyArray<Post>): void;\n\n  /**\n   * Bumps the definitionCheckMs (from SyncHeads) to the provided timestamp.\n   */\n  bumpDefinitionTopicCheck(timestampMs: TimestampMs): void;\n}\n\nfunction toAddResult({\n  changes,\n  lastInsertRowid,\n}: {\n  changes: number,\n  lastInsertRowid: number,\n}): AddResult {\n  return {changes, lastInsertRowid};\n}\n\nexport class SqliteMirrorRepository\n  implements ReadRepository, MirrorRepository {\n  +_db: Database;\n\n  constructor(db: Database, serverUrl: string) {\n    if (db == null) throw new Error(\"db: \" + String(db));\n    this._db = db;\n    this._transaction(() => {\n      this._initialize(serverUrl);\n    });\n  }\n\n  _transaction(queries: () => void) {\n    const db = this._db;\n    if (db.inTransaction) {\n      throw new Error(\"already in transaction\");\n    }\n    try {\n      db.prepare(\"BEGIN\").run();\n      queries();\n      if (db.inTransaction) {\n        db.prepare(\"COMMIT\").run();\n      }\n    } finally {\n      if (db.inTransaction) {\n        db.prepare(\"ROLLBACK\").run();\n      }\n    }\n  }\n\n  _initialize(serverUrl: string) {\n    const db = this._db;\n    // We store the config in a singleton table `meta`, whose unique row\n    // has primary key `0`. Only the first ever insert will succeed; we\n    // are locked into the first config.\n    db.prepare(\n      dedent`\\\n        CREATE TABLE IF NOT EXISTS meta (\n            zero INTEGER PRIMARY KEY,\n            config TEXT NOT NULL\n        )\n      `\n    ).run();\n\n    const config = stringify({\n      version: VERSION,\n      serverUrl: serverUrl,\n    });\n\n    const existingConfig: string | void = db\n      .prepare(\"SELECT config FROM meta\")\n      .pluck()\n      .get();\n    if (existingConfig === config) {\n      // Already set up; nothing to do.\n      return;\n    } else if (existingConfig !== undefined) {\n      throw new Error(\n        \"Database already populated with incompatible server or version\"\n      );\n    }\n    db.prepare(\"INSERT INTO meta (zero, config) VALUES (0, ?)\").run(config);\n\n    const tables = [\n      dedent`\\\n        CREATE TABLE sync_heads (\n          key TEXT PRIMARY KEY,\n          timestamp_ms INTEGER NOT NULL\n        )`,\n      dedent`\\\n        CREATE TABLE users (\n          username TEXT PRIMARY KEY,\n          trust_level INTEGER\n        )`,\n      dedent`\\\n        CREATE TABLE topics (\n            id INTEGER PRIMARY KEY,\n            category_id TEXT NOT NULL,\n            title TEXT NOT NULL,\n            timestamp_ms INTEGER NOT NULL,\n            bumped_ms INTEGER NOT NULL,\n            author_username TEXT NOT NULL,\n            FOREIGN KEY(author_username) REFERENCES users(username)\n        )\n      `,\n      // TODO: If this bloats, consider making a separate tags table, and\n      // referencing topic_tags by integer id rather than full tag name.\n      dedent`\\\n        CREATE TABLE topic_tags (\n            topic_id INTEGER NOT NULL,\n            tag_name TEXT NOT NULL,\n            PRIMARY KEY(topic_id, tag_name),\n            FOREIGN KEY(topic_id) REFERENCES topics(id)\n      )\n      `,\n      dedent`\\\n        CREATE TABLE posts (\n            id INTEGER PRIMARY KEY,\n            timestamp_ms INTEGER NOT NULL,\n            author_username TEXT NOT NULL,\n            topic_id INTEGER NOT NULL,\n            trust_level INTEGER NOT NULL,\n            index_within_topic INTEGER NOT NULL,\n            reply_to_post_index INTEGER,\n            cooked TEXT NOT NULL,\n            FOREIGN KEY(topic_id) REFERENCES topics(id),\n            FOREIGN KEY(author_username) REFERENCES users(username)\n        )\n      `,\n      dedent`\\\n        CREATE TABLE likes (\n          username TEXT NOT NULL,\n          post_id INTEGER NOT NULL,\n          timestamp_ms INTEGER NOT NULL,\n          CONSTRAINT username_post PRIMARY KEY (username, post_id),\n          FOREIGN KEY(post_id) REFERENCES posts(id),\n          FOREIGN KEY(username) REFERENCES users(username)\n        )`,\n    ];\n    for (const sql of tables) {\n      db.prepare(sql).run();\n    }\n  }\n\n  syncHeads(): SyncHeads {\n    const res = this._db\n      .prepare(\n        dedent`\\\n          SELECT\n              (SELECT IFNULL(MAX(bumped_ms), 0) FROM topics) AS max_topic_bump,\n              (SELECT timestamp_ms FROM sync_heads WHERE key = :DEFINITION_CHECK_KEY) AS definition_check\n          `\n      )\n      .get({DEFINITION_CHECK_KEY});\n    return {\n      definitionCheckMs: res.definition_check || 0,\n      topicBumpMs: res.max_topic_bump,\n    };\n  }\n\n  topics(): $ReadOnlyArray<Topic> {\n    return this._db.transaction(() => {\n      const topics = this._db\n        .prepare(\n          dedent`\\\n            SELECT\n              id,\n              category_id,\n              title,\n              timestamp_ms,\n              bumped_ms,\n              author_username\n            FROM topics\n        `\n        )\n        .all()\n        .map((x) => ({\n          id: x.id,\n          categoryId: x.category_id,\n          title: x.title,\n          timestampMs: x.timestamp_ms,\n          bumpedMs: x.bumped_ms,\n          authorUsername: x.author_username,\n        }));\n\n      const tags = this._db\n        .prepare(\n          dedent`\\\n            SELECT\n              tag_name AS tagName,\n              topic_id AS topicId\n            FROM topic_tags\n            ORDER BY tagName\n        `\n        )\n        .all();\n      const idToTags: Map<TopicId, Tag[]> = new Map();\n      for (const {tagName, topicId} of tags) {\n        MapUtil.pushValue(idToTags, topicId, tagName);\n      }\n      return topics.map((t) => {\n        const tags = idToTags.get(t.id) || [];\n        return {...t, tags};\n      });\n    })();\n  }\n\n  topicById(id: TopicId): ?Topic {\n    const res = this._db\n      .prepare(\n        dedent`\\\n          SELECT\n            id,\n            category_id,\n            title,\n            timestamp_ms,\n            bumped_ms,\n            author_username,\n            topic_tags.tag_name AS tagName\n          FROM topics\n          LEFT OUTER JOIN topic_tags\n            ON topics.id = topic_tags.topic_id\n          WHERE id = :id\n          ORDER BY tagName\n        `\n      )\n      .all({id});\n\n    if (res.length === 0) {\n      return null;\n    }\n    const first = res[0];\n    const tags = first.tagName == null ? [] : res.map((x) => x.tagName);\n\n    return {\n      id: first.id,\n      categoryId: first.category_id,\n      tags,\n      title: first.title,\n      timestampMs: first.timestamp_ms,\n      bumpedMs: first.bumped_ms,\n      authorUsername: first.author_username,\n    };\n  }\n\n  posts(): $ReadOnlyArray<Post> {\n    return this._db\n      .prepare(\n        dedent`\\\n          SELECT\n            id,\n            timestamp_ms,\n            author_username,\n            topic_id,\n            trust_level,\n            index_within_topic,\n            reply_to_post_index,\n            cooked\n          FROM posts`\n      )\n      .all()\n      .map((x) => ({\n        id: x.id,\n        timestampMs: x.timestamp_ms,\n        authorUsername: x.author_username,\n        topicId: x.topic_id,\n        trustLevel: x.trust_level,\n        indexWithinTopic: x.index_within_topic,\n        replyToPostIndex: x.reply_to_post_index,\n        cooked: x.cooked,\n      }));\n  }\n\n  postById(id: PostId): ?Post {\n    const res = this._db\n      .prepare(\n        dedent`\\\n          SELECT\n            id,\n            timestamp_ms,\n            author_username,\n            topic_id,\n            trust_level,\n            index_within_topic,\n            reply_to_post_index,\n            cooked\n          FROM posts\n          WHERE id = :id`\n      )\n      .get({id});\n\n    if (!res) {\n      return null;\n    }\n\n    return {\n      id: res.id,\n      timestampMs: res.timestamp_ms,\n      authorUsername: res.author_username,\n      topicId: res.topic_id,\n      trustLevel: res.trust_level,\n      indexWithinTopic: res.index_within_topic,\n      replyToPostIndex: res.reply_to_post_index,\n      cooked: res.cooked,\n    };\n  }\n\n  users(): $ReadOnlyArray<User> {\n    return this._db\n      .prepare(\"SELECT username, trust_level FROM users\")\n      .all()\n      .map((x) => ({\n        username: x.username,\n        trustLevel: x.trust_level,\n      }));\n  }\n\n  findUser(username: string): ?User {\n    const user = this._db\n      .prepare(\n        dedent`\\\n          SELECT username, trust_level\n          FROM users\n          WHERE username = :username COLLATE NOCASE\n        `\n      )\n      .get({username});\n    if (user == null) {\n      return null;\n    }\n    return {username: user.username, trustLevel: user.trust_level};\n  }\n\n  likes(): $ReadOnlyArray<LikeAction> {\n    return this._db\n      .prepare(\"SELECT post_id, username, timestamp_ms FROM likes\")\n      .all()\n      .map((x) => ({\n        postId: x.post_id,\n        timestampMs: x.timestamp_ms,\n        username: x.username,\n      }));\n  }\n\n  findPostInTopic(topicId: TopicId, indexWithinTopic: number): ?PostId {\n    return this._db\n      .prepare(\n        dedent`\\\n          SELECT id\n          FROM posts\n          WHERE topic_id = :topic_id AND index_within_topic = :index_within_topic\n        `\n      )\n      .pluck()\n      .get({topic_id: topicId, index_within_topic: indexWithinTopic});\n  }\n\n  bumpDefinitionTopicCheck(timestampMs: TimestampMs): void {\n    this._db\n      .prepare(\n        dedent`\\\n          REPLACE INTO sync_heads (\n              key,\n              timestamp_ms\n          ) VALUES (\n              :key,\n              :timestamp_ms\n          )\n        `\n      )\n      .run({\n        key: DEFINITION_CHECK_KEY,\n        timestamp_ms: timestampMs,\n      });\n  }\n\n  addLike(like: LikeAction): AddResult {\n    this.addUserIfNotExists({username: like.username, trustLevel: null});\n    const res = this._db\n      .prepare(\n        dedent`\\\n          INSERT OR IGNORE INTO likes (\n              post_id,\n              timestamp_ms,\n              username\n          ) VALUES (\n              :post_id,\n              :timestamp_ms,\n              :username\n          )\n        `\n      )\n      .run({\n        post_id: like.postId,\n        timestamp_ms: like.timestampMs,\n        username: like.username,\n      });\n    return toAddResult(res);\n  }\n\n  replaceTopicTransaction(topic: Topic, posts: $ReadOnlyArray<Post>) {\n    this._transaction(() => {\n      this.addTopic(topic);\n      for (const post of posts) {\n        this.addPost(post);\n      }\n      this.deleteUnexpectedPosts(\n        topic.id,\n        posts.map((p) => p.id)\n      );\n    });\n  }\n\n  deleteUnexpectedPosts(topicId: TopicId, expected: PostId[]): number {\n    const res = this._db\n      .prepare(\n        dedent`\\\n          DELETE FROM posts\n          WHERE topic_id = ?\n          AND id NOT IN (${expected.map((_) => \"?\").join(\",\")})\n        `\n      )\n      .run(topicId, ...expected);\n    return res.changes;\n  }\n\n  bumpedMsForTopic(id: TopicId): number | null {\n    const res = this._db\n      .prepare(`SELECT bumped_ms FROM topics WHERE id = :id`)\n      .get({id});\n    return res != null ? res.bumped_ms : null;\n  }\n\n  addPost(post: Post): AddResult {\n    this.addOrReplaceUser({\n      username: post.authorUsername,\n      trustLevel: post.trustLevel,\n    });\n    const res = this._db\n      .prepare(\n        dedent`\\\n          REPLACE INTO posts (\n              id,\n              timestamp_ms,\n              author_username,\n              topic_id,\n              trust_level,\n              index_within_topic,\n              reply_to_post_index,\n              cooked\n          ) VALUES (\n              :id,\n              :timestamp_ms,\n              :author_username,\n              :topic_id,\n              :trust_level,\n              :index_within_topic,\n              :reply_to_post_index,\n              :cooked\n          )\n        `\n      )\n      .run({\n        id: post.id,\n        timestamp_ms: post.timestampMs,\n        reply_to_post_index: post.replyToPostIndex,\n        index_within_topic: post.indexWithinTopic,\n        topic_id: post.topicId,\n        trust_level: post.trustLevel,\n        author_username: post.authorUsername,\n        cooked: post.cooked,\n      });\n    return toAddResult(res);\n  }\n\n  addTopic(topic: Topic) {\n    this._db.transaction(() => {\n      this.addUserIfNotExists({\n        username: topic.authorUsername,\n        trustLevel: null,\n      });\n      this._db\n        .prepare(\n          dedent`\\\n            REPLACE INTO topics (\n                id,\n                category_id,\n                title,\n                timestamp_ms,\n                bumped_ms,\n                author_username\n            ) VALUES (\n                :id,\n                :category_id,\n                :title,\n                :timestamp_ms,\n                :bumped_ms,\n                :author_username\n            )\n        `\n        )\n        .run({\n          id: topic.id,\n          category_id: topic.categoryId,\n          title: topic.title,\n          timestamp_ms: topic.timestampMs,\n          bumped_ms: topic.bumpedMs,\n          author_username: topic.authorUsername,\n        });\n\n      this._db\n        .prepare(\n          dedent`\n            DELETE FROM topic_tags\n            WHERE topic_id = :id\n      `\n        )\n        .run({id: topic.id});\n\n      const addTag = this._db.prepare(\n        dedent`\n          INSERT INTO topic_tags (\n            tag_name,\n            topic_id\n          ) VALUES (\n            :tagName,\n            :id\n          )\n      `\n      );\n      for (const tagName of topic.tags) {\n        addTag.run({id: topic.id, tagName});\n      }\n    })();\n  }\n\n  addUserIfNotExists(user: User): AddResult {\n    const {trustLevel, username} = user;\n    const res = this._db\n      .prepare(\n        dedent`\\\n          INSERT OR IGNORE INTO users (\n            username,\n            trust_level\n          ) VALUES (\n            :username,\n            :trust_level\n          )`\n      )\n      .run({username, trust_level: trustLevel});\n    return toAddResult(res);\n  }\n\n  addOrReplaceUser(user: User): AddResult {\n    const {trustLevel, username} = user;\n    const res = this._db\n      .prepare(\n        dedent`\\\n          INSERT OR REPLACE INTO users (\n            username,\n            trust_level\n          ) VALUES (\n            :username,\n            :trust_level\n          )`\n      )\n      .run({username, trust_level: trustLevel});\n    return toAddResult(res);\n  }\n}\n","// @flow\n\nimport * as Combo from \"../../util/combo\";\nimport type {TaskReporter} from \"../../util/taskReporter\";\nimport type {Discourse, Topic, TopicLatest} from \"./fetch\";\nimport {MirrorRepository} from \"./mirrorRepository\";\n\nexport type MirrorOptions = {|\n  // Category definition topics don't show up in the list of bumped topics.\n  // We need to proactively check them. This sets the interval at which we\n  // should check.\n  +recheckCategoryDefinitionsAfterMs: number,\n|};\n\nconst optionsParserFields = {\n  recheckCategoryDefinitionsAfterMs: Combo.number,\n};\nexport const optionsParser: Combo.Parser<MirrorOptions> = Combo.object(\n  optionsParserFields\n);\nexport const optionsShapeParser: Combo.Parser<\n  $Shape<MirrorOptions>\n> = Combo.shape(optionsParserFields);\n\nconst defaultOptions: MirrorOptions = {\n  recheckCategoryDefinitionsAfterMs: 24 * 3600 * 1000, // 24h\n};\n\nfunction sortTopicByBumpedMs(a: TopicLatest, b: TopicLatest): number {\n  return a.bumpedMs - b.bumpedMs;\n}\n\n/**\n * Mirrors data from the Discourse API into a local sqlite db.\n *\n * This class allows us to persist a local copy of data from a Discourse\n * instance. We have it for reasons similar to why we have a GraphQL mirror for\n * GitHub; it allows us to avoid re-doing expensive IO every time we re-load\n * SourceCred. It also gives us robustness in the face of network failures (we\n * can keep however much we downloaded until the fault).\n *\n * As implemented, the Mirror will never update already-downloaded content,\n * meaning it will not catch edits or deletions. As such, it's advisable to\n * replace the cache periodically (perhaps once a week or month). We may\n * implement automatic cache invalidation in the future.\n *\n * Each Mirror instance is tied to a particular server. Trying to use a mirror\n * for multiple Discourse servers is not permitted; use separate Mirrors.\n */\nexport class Mirror {\n  +_options: MirrorOptions;\n  +_repo: MirrorRepository;\n  +_fetcher: Discourse;\n  +_serverUrl: string;\n\n  /**\n   * Construct a new Mirror instance.\n   *\n   * Takes a Database, which may be a pre-existing Mirror database. The\n   * provided DiscourseInterface will be used to retrieve new data from Discourse.\n   *\n   * A serverUrl is required so that we can ensure that this Mirror is only storing\n   * data from a particular Discourse server.\n   */\n  constructor(\n    repo: MirrorRepository,\n    fetcher: Discourse,\n    serverUrl: string,\n    options?: $Shape<MirrorOptions>\n  ) {\n    this._repo = repo;\n    this._fetcher = fetcher;\n    this._serverUrl = serverUrl;\n    this._options = {\n      ...defaultOptions,\n      ...(options || {}),\n    };\n  }\n\n  async update(reporter: TaskReporter) {\n    reporter.start(\"discourse\");\n    await this._updateTopicsV2(reporter);\n    await this._updateLikes(reporter);\n    reporter.finish(\"discourse\");\n  }\n\n  async _updateTopicsV2(reporter: TaskReporter) {\n    reporter.start(\"discourse/topics\");\n\n    const {\n      topicBumpMs: lastLocalTopicBumpMs,\n      definitionCheckMs: lastDefinitionCheckMs,\n    } = this._repo.syncHeads();\n\n    const startTime = Date.now();\n    const shouldCheckDefinitions =\n      startTime - lastDefinitionCheckMs >=\n      this._options.recheckCategoryDefinitionsAfterMs;\n\n    const bumpedTopics: TopicLatest[] = await this._fetcher.topicsBumpedSince(\n      lastLocalTopicBumpMs\n    );\n    const topicBumpsById: Map<number, number> = new Map(\n      bumpedTopics.map((t) => [t.id, t.bumpedMs])\n    );\n\n    // Make sure we have oldest first in our load queue.\n    bumpedTopics.sort(sortTopicByBumpedMs);\n\n    // Create a uniqueness filter.\n    const existingTopics = new Set();\n    const once = (tid) => {\n      if (existingTopics.has(tid)) return false;\n      existingTopics.add(tid);\n      return true;\n    };\n\n    // Add definition topics if the flag to do so is set.\n    const definitionTopicIds = shouldCheckDefinitions\n      ? await this._fetcher.categoryDefinitionTopicIds()\n      : [];\n\n    // Note: order is important here.\n    // Initial load should happen in order of bump date,\n    // reloads at the end are ok to be in random order.\n    const topicLoadQueue = [\n      ...bumpedTopics.map((t) => t.id),\n      ...definitionTopicIds,\n    ].filter(once);\n\n    for (const topicId of topicLoadQueue) {\n      const topicWithPosts = await this._fetcher.topicWithPosts(topicId);\n      if (topicWithPosts != null) {\n        const {topic, posts} = topicWithPosts;\n\n        // We find the bump by:\n        // 1. What fetcher's topicsBumpedSince tells us.\n        // 2. What the local DB contains (probably force updated a topic that wasn't bumped).\n        // 3. Fall back on creation date (category definition topics don't normally have bump dates at all).\n        const bumpedMs =\n          topicBumpsById.get(topicId) ||\n          this._repo.bumpedMsForTopic(topicId) ||\n          topic.timestampMs;\n        if (bumpedMs == null) {\n          throw new Error(`Missing bump date for topic ID: ${topic.id}`);\n        }\n        const mergedTopic: Topic = {\n          ...topic,\n          bumpedMs,\n        };\n        this._repo.replaceTopicTransaction(mergedTopic, posts);\n      }\n    }\n\n    if (shouldCheckDefinitions) {\n      // Note: use the start time as to avoid missing any changes\n      // between when we queries upstream and when we completed all tasks.\n      this._repo.bumpDefinitionTopicCheck(startTime);\n    }\n\n    reporter.finish(\"discourse/topics\");\n  }\n\n  async _updateLikes(reporter: TaskReporter) {\n    const addLike = (like) => {\n      try {\n        const res = this._repo.addLike(like);\n        return {doneWithUser: res.changes === 0};\n      } catch (e) {\n        console.warn(\n          `Warning: Encountered error '${e.message}' ` +\n            `on a like by ${like.username} ` +\n            `on post id ${like.postId}.`\n        );\n        return {doneWithUser: false};\n      }\n    };\n\n    // I don't want to hard code the expected page size, in case it changes upstream.\n    // However, it's helpful to have a good guess of what the page size is, because if we\n    // get a result which is shorter than the page size, we know we've hit the end of the\n    // user's history, so we don't need to query any more.\n    // So, we guess that the largest page size we've seen thus far is likely the page size,\n    // and if we see any shorter pages, we know we are done for that particular user.\n    // If we are wrong about the page size, the worst case is that we do an unnecessary\n    // query when we are actually already done with the user.\n    let possiblePageSize = 0;\n    // TODO(perf): In the best case (there are no new likes), this requires\n    // doing one query for every user who ever commented in the instance. This\n    // is a bit excessive. For each user, we could store when we last checked\n    // their likes, and when they last posted. Then we could only scan users\n    // who we either haven't scanned in the last week, or who have been active\n    // since our last scan. This would likely improve the performance of this\n    // section of the update significantly.\n\n    reporter.start(\"discourse/likes\");\n    for (const {username} of this._repo.users()) {\n      let offset = 0;\n      let upToDate = false;\n      while (!upToDate) {\n        const likeActions = await this._fetcher.likesByUser(username, offset);\n        if (likeActions == null) {\n          break;\n        }\n        possiblePageSize = Math.max(likeActions.length, possiblePageSize);\n        for (const like of likeActions) {\n          if (addLike(like).doneWithUser) {\n            upToDate = true;\n            break;\n          }\n        }\n        if (likeActions.length === 0 || likeActions.length < possiblePageSize) {\n          upToDate = true;\n        }\n        offset += likeActions.length;\n      }\n    }\n    reporter.finish(\"discourse/likes\");\n  }\n}\n","// @flow\n\nimport * as C from \"../../util/combo\";\nimport {optionsShapeParser, type MirrorOptions} from \"./mirror\";\nimport {\n  weightsConfigParser,\n  serializedWeightsConfigParser,\n  type WeightsConfig,\n  type SerializedWeightsConfig,\n} from \"./weights\";\n\nexport type SerializedDiscourseConfig = {|\n  +serverUrl: string,\n  +mirrorOptions?: $Shape<MirrorOptions>,\n  +weights?: SerializedWeightsConfig,\n|};\n\nexport type DiscourseConfig = {|\n  +serverUrl: string,\n  +weights: WeightsConfig,\n  +mirrorOptions?: $Shape<MirrorOptions>,\n|};\n\nconst serializedParser: C.Parser<SerializedDiscourseConfig> = C.object(\n  {\n    serverUrl: C.fmap(C.string, (serverUrl) => {\n      const httpRE = new RegExp(/^https?:\\/\\//);\n      if (!httpRE.test(serverUrl)) {\n        throw new Error(\n          \"expected server url to start with 'https://' or 'http://'\"\n        );\n      }\n      return serverUrl;\n    }),\n  },\n  {\n    mirrorOptions: optionsShapeParser,\n    weights: serializedWeightsConfigParser,\n  }\n);\n\nexport function upgrade(c: SerializedDiscourseConfig): DiscourseConfig {\n  return {\n    ...c,\n    weights: weightsConfigParser.parseOrThrow(c.weights || {}),\n  };\n}\n\nexport const parser: C.Parser<DiscourseConfig> = C.fmap(\n  serializedParser,\n  upgrade\n);\n","// @flow\n\n/**\n * Class for retrieving data from the Discourse API.\n *\n * The Discourse API implements the JSON endpoints for all functionality of the actual site.\n * As such, it tends to return a lot of information that we don't care about (in contrast\n * to a GraphQL API which would give us only what we ask for). As such, we implement a simple\n * interface over it, which both abstracts over calling the API, and does some post-processing\n * on the results to simplify it to data that is relevant for us.\n */\n\nimport fetch from \"isomorphic-fetch\";\nimport Bottleneck from \"bottleneck\";\nimport * as NullUtil from \"../../util/null\";\nimport {type TimestampMs} from \"../../util/timestamp\";\n\nexport type UserId = number;\nexport type PostId = number;\nexport type TopicId = number;\nexport type CategoryId = string;\nexport type Tag = string;\n\n/**\n * The \"view\" received from the Discourse API\n * when getting a topic by ID.\n *\n * This filters some relevant data like bumpedMs,\n * and the type separation makes this distinction clear.\n */\nexport type TopicView = {|\n  +id: TopicId,\n  +categoryId: CategoryId,\n  +tags: $ReadOnlyArray<Tag>,\n  +title: string,\n  +timestampMs: TimestampMs,\n  +authorUsername: string,\n|};\n\n/**\n * The \"latest\" format Topic from the Discourse API\n * when getting a list of sorted topics.\n *\n * This filters relevant data like authorUsername,\n * and the type separation makes this distinction clear.\n */\nexport type TopicLatest = {|\n  +id: TopicId,\n  +categoryId: CategoryId,\n  +tags: $ReadOnlyArray<Tag>,\n  +title: string,\n  +timestampMs: TimestampMs,\n  +bumpedMs: number,\n|};\n\n/**\n * A complete Topic object.\n */\nexport type Topic = {|\n  ...TopicView,\n  ...TopicLatest,\n|};\n\nexport type Post = {|\n  +id: PostId,\n  +topicId: TopicId,\n  // Which number post this was within the topic (starts at 1)\n  +indexWithinTopic: number,\n  // The indexWithinTopic of the post within the same topic that this post was a\n  // reply to. Will be `null` if this post was the first post, or if it was a\n  // reply to the first post.\n  +replyToPostIndex: number | null,\n  +timestampMs: TimestampMs,\n  // the Discourse trust level of the author of the post\n  +trustLevel: number,\n  +authorUsername: string,\n  // The post HTML for rendering.\n  +cooked: string,\n|};\n\nexport type TopicWithPosts = {|\n  +topic: TopicView,\n  // Guaranteed to contain all the Posts in the topic.\n  +posts: $ReadOnlyArray<Post>,\n|};\n\nexport type User = {|\n  +username: string,\n  +trustLevel: number | null,\n|};\n\nexport type LikeAction = {|\n  // The user who liked something\n  +username: string,\n  // The post being liked\n  +postId: PostId,\n  +timestampMs: TimestampMs,\n|};\n\n/**\n * Interface over the external Discourse API, structured to suit our particular needs.\n * We have an interface (as opposed to just an implementation) to enable easy mocking and\n * testing.\n */\nexport interface Discourse {\n  // Retrieve the Topic with Posts for a given id.\n  // Will resolve to null if the response status is 403 or 404. 403 because the\n  // topic may be hidden from the API user; 404 because we sometimes see\n  // 404s in prod and want to ignore those topic ids. (Not sure why it happens.)\n  // May reject if the status is not OK and is not 404 or 403.\n  topicWithPosts(id: TopicId): Promise<TopicWithPosts | null>;\n\n  /**\n   * Retrieves the like actions that were initiated by the target user.\n   * May be 404 on the server, which will return a null here.\n   */\n  likesByUser(\n    targetUsername: string,\n    offset: number\n  ): Promise<LikeAction[] | null>;\n\n  // Retrieves the User data for a specific username.\n  getUserData(username: string): Promise<User | null>;\n\n  // Gets the topic IDs for every \"about-x-category\" topic.\n  // Discourse calls this a \"definition\" topic.\n  categoryDefinitionTopicIds(): Promise<Set<TopicId>>;\n\n  /**\n   * Fetches Topics that have been bumped to a higher timestamp than `sinceMs`.\n   *\n   * Note: this will not be able to find \"about-x-category\" category definition topics.\n   * due to a hard-coded filter in the API.\n   * https://github.com/discourse/discourse/blob/594925b8965a26c512665371092fec3383320b58/app/controllers/list_controller.rb#L66\n   *\n   * Use categoryDefinitionTopicIds() to find those topics.\n   */\n  topicsBumpedSince(sinceMs: number): Promise<TopicLatest[]>;\n}\n\nconst MAX_API_REQUESTS_PER_MINUTE = 55;\n\nexport class Fetcher implements Discourse {\n  // We limit the rate of API requests, as documented here:\n  // https://meta.discourse.org/t/global-rate-limits-and-throttling-in-discourse/78612\n  // Note this limit is for admin API keys. If we change to user user API keys\n  // (would be convenient as the keys would be less sensitive), we will need to lower\n  // this rate limit by a factor of 3\n  // TODO: I've set the max requests per minute to 55 (below the stated limit\n  // of 60) to be a bit conservative, and avoid getting limited by the server.\n  // We could improve our throughput by increasing the requests per minute to the\n  // stated limit, and incorporating retry logic to account for the occasional 529.\n\n  +options: DiscourseFetchOptions;\n  +_fetchImplementation: typeof fetch;\n\n  constructor(\n    options: DiscourseFetchOptions,\n    // fetchImplementation shouldn't be provided by clients, but is convenient for testing.\n    fetchImplementation?: typeof fetch,\n    // Used to avoid going over the Discourse API rate limit\n    minTimeMs?: number\n  ) {\n    this.options = options;\n    const minTime = NullUtil.orElse(\n      minTimeMs,\n      (1000 * 60) / MAX_API_REQUESTS_PER_MINUTE\n    );\n    // n.b. the rate limiting isn't programmatically tested. However, it's easy\n    // to tell when it's broken: try to load a nontrivial Discourse server, and see\n    // if you get a 429 failure.\n    const limiter = new Bottleneck({minTime});\n    const unlimitedFetch = NullUtil.orElse(fetchImplementation, fetch);\n    this._fetchImplementation = limiter.wrap(unlimitedFetch);\n  }\n\n  async _fetchWithRetryOn520(\n    fullUrl: string,\n    fetchOptions: RequestOptions\n  ): Promise<Response> {\n    // We've started sporadically seeing 520 errors when hitting Discourse API\n    // endpoints. It's generally while fetching topics, but is always a\n    // different topic, so I think it's a rare/ephemeral bug on the Discourse\n    // side.\n    // We can just retry a few times if we get a 520 and it's unlikely to fail\n    // 3 times in a row.\n    // See https://github.com/sourcecred/sourcecred/issues/2491\n    let tries = 3;\n    while (tries > 0) {\n      tries--;\n      const response = await this._fetchImplementation(fullUrl, fetchOptions);\n      if (response.status !== 520) {\n        return response;\n      }\n    }\n    throw new Error(`repeated 520 errors on ${fullUrl}`);\n  }\n\n  _fetch(endpoint: string): Promise<Response> {\n    const {serverUrl} = this.options;\n    if (!endpoint.startsWith(\"/\")) {\n      throw new Error(`invalid endpoint: ${endpoint}`);\n    }\n    if (!serverUrl.startsWith(\"http\") || serverUrl.endsWith(\"/\")) {\n      throw new Error(`invalid server url: ${serverUrl}`);\n    }\n    const fetchOptions = {\n      method: \"GET\",\n      headers: {\n        Accept: \"application/json\",\n      },\n    };\n    const fullUrl = `${serverUrl}${endpoint}`;\n    return this._fetchWithRetryOn520(fullUrl, fetchOptions);\n  }\n\n  async categoryDefinitionTopicIds(): Promise<Set<TopicId>> {\n    const topicIdRE = new RegExp(\"/t/[\\\\w-]+/(\\\\d+)$\");\n    const urls: string[] = [];\n    const categoriesWithSubcategories: CategoryId[] = [];\n\n    // Root categories\n    const response = await this._fetch(\n      `/categories.json?show_subcategory_list=true`\n    );\n    failIfMissing(response);\n    failForNotOk(response);\n    const {categories: rootCategories} = (await response.json()).category_list;\n    for (const cat of rootCategories) {\n      if (cat.topic_url != null) {\n        urls.push(cat.topic_url);\n      }\n      if (cat.subcategory_ids) {\n        categoriesWithSubcategories.push(cat.id);\n      }\n    }\n\n    // Subcategories\n    for (const rootCatId of categoriesWithSubcategories) {\n      const subResponse = await this._fetch(\n        `/categories.json?show_subcategory_list=true&parent_category_id=${rootCatId}`\n      );\n      failIfMissing(subResponse);\n      failForNotOk(subResponse);\n      const {categories: subCategories} = (\n        await subResponse.json()\n      ).category_list;\n      for (const cat of subCategories) {\n        if (cat.topic_url != null) {\n          urls.push(cat.topic_url);\n        }\n      }\n    }\n\n    const ids = urls.map((url) => {\n      const match = topicIdRE.exec(url);\n      if (match == null) {\n        throw new Error(\n          `Encountered topic URL we failed to parse it's TopicId from: ${url}`\n        );\n      }\n      return Number(match[1]);\n    });\n\n    return new Set(ids);\n  }\n\n  async topicWithPosts(id: TopicId): Promise<TopicWithPosts | null> {\n    const response = await this._fetch(`/t/${id}.json`);\n    const {status} = response;\n    if (status === 403 || status === 404 || status === 410) {\n      // The topic is hidden, deleted, or otherwise missing.\n      // Example of a 404 topic: https://discourse.sourcecred.io/t/116\n      return null;\n    }\n    failForNotOk(response);\n    const json = await response.json();\n    const {posts_count: postCount} = json;\n    let posts = json.post_stream.posts.map(parsePost);\n    // Tags might be `undefined` if tags were disabled on the server.\n    // If so, set tags to an empty array.\n    const tags = json.tags || [];\n    const topic: TopicView = {\n      id: json.id,\n      categoryId: json.category_id.toString(),\n      title: json.title,\n      tags,\n      timestampMs: Date.parse(json.created_at),\n      authorUsername: json.details.created_by.username,\n    };\n\n    // This shouldn't could cause infinite loops when the API is weird.\n    // As requesting pages beyond the last page will produce a 404.\n    // Pagination here is 1-based, and we already had page 1.\n    let page = 2;\n    while (postCount > posts.length) {\n      const resNext = await this._fetch(`/t/${id}.json?page=${page}`);\n      failForNotOk(resNext);\n      const subPosts = (await resNext.json()).post_stream.posts.map(parsePost);\n      posts = [...posts, ...subPosts];\n      page++;\n    }\n\n    return {topic, posts};\n  }\n\n  async getUserData(username: string): Promise<User | null> {\n    const response = await this._fetch(`/users/${username}.json`);\n\n    if (response.status === 404) {\n      // The user probably no longer exists. This is expected, see #1440.\n      return null;\n    }\n\n    failIfMissing(response);\n    failForNotOk(response);\n\n    const json = await response.json();\n\n    return parseUser(json.user);\n  }\n\n  async likesByUser(\n    targetUsername: string,\n    offset: number\n  ): Promise<LikeAction[] | null> {\n    const response = await this._fetch(\n      `/user_actions.json?username=${targetUsername}&filter=1&offset=${offset}`\n    );\n    const {status} = response;\n    if (status === 404) {\n      // The user probably no longer exists. This is expected, see #1440.\n      return null;\n    }\n    failIfMissing(response);\n    failForNotOk(response);\n    const json = await response.json();\n    return json.user_actions.map(parseLike);\n  }\n\n  async topicsBumpedSince(sinceMs: number): Promise<TopicLatest[]> {\n    const topics: TopicLatest[] = [];\n    let lastUnpinnedTimestamp: number = Infinity;\n    let morePages: boolean = true;\n    let page: number = 0;\n\n    // Keep going till we've found timestamps older than sinceMs.\n    while (lastUnpinnedTimestamp >= sinceMs && morePages) {\n      const response = await this._fetch(\n        `/latest.json?order=activity&ascending=false&page=${page}`\n      );\n      failIfMissing(response);\n      failForNotOk(response);\n      const {topic_list: topicList} = await response.json();\n\n      // Having the same amount of results as expected by pagination, assume there's another page.\n      morePages = topicList.per_page === topicList.topics.length;\n\n      for (const jsonTopic of topicList.topics) {\n        const topic = parseLatestTopic(jsonTopic);\n\n        // Due to how pinning works, we may have some topics in here that weren't bumped past `sinceMs`.\n        // Filter those out now.\n        if (topic.bumpedMs > sinceMs) {\n          topics.push(topic);\n        }\n\n        // Make sure we ignore pinned topics for this value, as pinned topics move to the top,\n        // and are unhelpful in knowing whether we should fetch another page.\n        if (!jsonTopic.pinned) {\n          lastUnpinnedTimestamp = Math.min(\n            lastUnpinnedTimestamp,\n            topic.bumpedMs\n          );\n        }\n      }\n\n      page++;\n    }\n\n    return topics;\n  }\n}\n\nfunction failIfMissing(response: Response) {\n  if (response.status === 404) {\n    throw new Error(`404 Not Found on: ${response.url}; maybe bad serverUrl?`);\n  }\n  if (response.status === 403) {\n    throw new Error(`403 Forbidden: bad API username or key?`);\n  }\n  if (response.status === 410) {\n    throw new Error(`410 Gone`);\n  }\n}\n\nfunction failForNotOk(response: Response) {\n  if (!response.ok) {\n    throw new Error(`not OK status ${response.status} on ${response.url}`);\n  }\n}\n\n/**\n * Parses a \"latest\" topic.\n *\n * A \"latest\" topic, is a topic as returned by the /latest.json API call,\n * and has a distinct assumptions:\n * - bumped_at is always present.\n *\n * usernamesById map used to resolve these IDs to usernames.\n */\nfunction parseLatestTopic(json: any): TopicLatest {\n  if (json.bumped_at == null) {\n    throw new Error(\n      `Unexpected missing bumped_at field for /latest.json request for topic ID ${json.id}.`\n    );\n  }\n\n  return {\n    id: json.id,\n    categoryId: json.category_id.toString(),\n    tags: json.tags,\n    title: json.title,\n    timestampMs: Date.parse(json.created_at),\n    bumpedMs: Date.parse(json.bumped_at),\n  };\n}\n\nfunction parsePost(json: any): Post {\n  return {\n    id: json.id,\n    timestampMs: Date.parse(json.created_at),\n    indexWithinTopic: json.post_number,\n    replyToPostIndex: json.reply_to_post_number,\n    topicId: json.topic_id,\n    trustLevel: json.trust_level,\n    authorUsername: json.username,\n    cooked: json.cooked,\n  };\n}\n\nfunction parseUser(json: any): User {\n  return {\n    username: json.username,\n    trustLevel: json.trust_level,\n  };\n}\n\nfunction parseLike(json: any): LikeAction {\n  return {\n    username: json.target_username,\n    postId: json.post_id,\n    timestampMs: Date.parse(json.created_at),\n  };\n}\n\nexport type DiscourseFetchOptions = {|\n  serverUrl: string,\n|};\n","// @flow\n\nimport type {NodeAddressT} from \"../../core/graph\";\nimport type {ReferenceDetector, URL} from \"../../core/references\";\nimport type {ReadRepository} from \"./mirrorRepository\";\nimport {topicAddress, userAddress, postAddress} from \"./address\";\nimport {linksToReferences} from \"./references\";\n\n/**\n * Discourse ReferenceDetector detector that relies on database lookups.\n */\nexport class DiscourseReferenceDetector implements ReferenceDetector {\n  data: ReadRepository;\n\n  constructor(data: ReadRepository) {\n    this.data = data;\n  }\n\n  addressFromUrl(url: URL): ?NodeAddressT {\n    const [reference] = linksToReferences([url]);\n    if (!reference) {\n      return null;\n    }\n\n    switch (reference.type) {\n      case \"TOPIC\": {\n        // Just validating the topic exists.\n        if (this.data.topicById(reference.topicId)) {\n          return topicAddress(reference.serverUrl, reference.topicId);\n        }\n        break;\n      }\n\n      case \"POST\": {\n        // For posts, we need to convert from topicId + index to a post ID.\n        // We're using it to validate the topic and post index exist as well.\n        const postId = this.data.findPostInTopic(\n          reference.topicId,\n          reference.postIndex\n        );\n        if (postId) {\n          return postAddress(reference.serverUrl, postId);\n        }\n        break;\n      }\n\n      case \"USER\": {\n        // Look up the username to validate it exists, and make sure we use\n        // the result. As this should correct our capitalization. See #1479.\n        const user = this.data.findUser(reference.username);\n        if (user) {\n          return userAddress(reference.serverUrl, user.username);\n        }\n        break;\n      }\n\n      default: {\n        throw new Error(\n          `Unexpected reference type: ${(reference.type: empty)}`\n        );\n      }\n    }\n  }\n}\n","// @flow\n\nimport {type IdentityProposal} from \"../../core/ledger/identityProposal\";\nimport {type IdentityType} from \"../../core/identity\";\nimport {coerce, nameFromString} from \"../../core/identity/name\";\nimport {type ReadRepository} from \"./mirrorRepository\";\nimport {type User} from \"./fetch\";\nimport {userAddress} from \"./address\";\n\nfunction guessUserType(username: string): IdentityType {\n  if (username === \"system\" || username === \"discobot\") {\n    return \"BOT\";\n  }\n  return \"USER\";\n}\n\nexport function _createIdentity(\n  serverUrl: string,\n  user: User\n): IdentityProposal {\n  const {username} = user;\n  const url = `${serverUrl}/u/${username}/`;\n  const description = `discourse/[@${username}](${url})`;\n  const address = userAddress(serverUrl, username);\n  const alias = {description, address};\n  return {\n    pluginName: nameFromString(\"discourse\"),\n    name: coerce(username),\n    type: guessUserType(username),\n    alias,\n  };\n}\n\nexport function createIdentities(\n  serverUrl: string,\n  repo: ReadRepository\n): $ReadOnlyArray<IdentityProposal> {\n  return repo.users().map((u) => _createIdentity(serverUrl, u));\n}\n","// @flow\n\nimport Database from \"better-sqlite3\";\nimport {join as pathJoin} from \"path\";\n\nimport type {Plugin, PluginDirectoryContext} from \"../../api/plugin\";\nimport type {PluginDeclaration} from \"../../analysis/pluginDeclaration\";\nimport type {ReferenceDetector} from \"../../core/references\";\nimport type {WeightedGraph} from \"../../core/weightedGraph\";\nimport {createGraph} from \"./createGraph\";\nimport {declaration} from \"./declaration\";\nimport {parser, type DiscourseConfig} from \"./config\";\nimport {SqliteMirrorRepository} from \"./mirrorRepository\";\nimport {Fetcher} from \"./fetch\";\nimport {Mirror} from \"./mirror\";\nimport {DiscourseReferenceDetector} from \"./referenceDetector\";\nimport {type TaskReporter} from \"../../util/taskReporter\";\nimport {loadJson} from \"../../util/storage\";\nimport {DiskStorage} from \"../../core/storage/disk\";\nimport {createIdentities} from \"./createIdentities\";\nimport type {IdentityProposal} from \"../../core/ledger/identityProposal\";\n\nasync function loadConfig(\n  dirContext: PluginDirectoryContext\n): Promise<DiscourseConfig> {\n  const dirname = dirContext.configDirectory();\n  const storage = new DiskStorage(dirname);\n  return loadJson(storage, \"config.json\", parser);\n}\n\nasync function repository(\n  ctx: PluginDirectoryContext,\n  serverUrl: string\n): Promise<SqliteMirrorRepository> {\n  const path = pathJoin(ctx.cacheDirectory(), \"discourseMirror.db\");\n  const db = await new Database(path);\n  return new SqliteMirrorRepository(db, serverUrl);\n}\n\nexport class DiscoursePlugin implements Plugin {\n  async declaration(): Promise<PluginDeclaration> {\n    return declaration;\n  }\n\n  async load(\n    ctx: PluginDirectoryContext,\n    reporter: TaskReporter\n  ): Promise<void> {\n    const {serverUrl, mirrorOptions} = await loadConfig(ctx);\n    const repo = await repository(ctx, serverUrl);\n    const fetcher = new Fetcher({serverUrl});\n    const mirror = new Mirror(repo, fetcher, serverUrl, mirrorOptions);\n    await mirror.update(reporter);\n  }\n\n  async graph(\n    ctx: PluginDirectoryContext,\n    rd: ReferenceDetector\n  ): Promise<WeightedGraph> {\n    const _ = rd; // TODO(#1808): not yet used\n    const config = await loadConfig(ctx);\n    const repo = await repository(ctx, config.serverUrl);\n    return createGraph(config, repo);\n  }\n\n  async referenceDetector(\n    ctx: PluginDirectoryContext\n  ): Promise<ReferenceDetector> {\n    const config = await loadConfig(ctx);\n    const repo = await repository(ctx, config.serverUrl);\n    return new DiscourseReferenceDetector(repo);\n  }\n\n  async identities(\n    ctx: PluginDirectoryContext\n  ): Promise<$ReadOnlyArray<IdentityProposal>> {\n    const config = await loadConfig(ctx);\n    const repo = await repository(ctx, config.serverUrl);\n    return createIdentities(config.serverUrl, repo);\n  }\n}\n","// @flow\n\nimport * as NullUtil from \"../../util/null\";\nimport * as C from \"../../util/combo\";\nimport * as Model from \"./models\";\nimport {\n  type ReactionWeightConfig,\n  type RoleWeightConfig,\n  type ChannelWeightConfig,\n  type WeightConfig,\n} from \"./reactionWeights\";\n\nexport type {BotToken as DiscordToken} from \"./models\";\n\n/**\n * The serialized form of the Discord config.\n * If you are editing a config.json file, it should match this type.\n *\n * TODO: This type is kind of disorganized. It would be cleaner to have all the\n * weight configuration in single optional sub-object, I think. Consider\n * cleaning up before 0.8.0.\n */\nexport type DiscordConfigJson = $ReadOnlyArray<{|\n  // Id of the Discord server.\n  // To get the ID, go into your Discord settings and under \"Appearance\",\n  // go to the \"Advanced\" section and enable \"Developer Mode\".\n  // Then right click on the server icon and choose \"copy ID\".\n  +guildId: Model.Snowflake,\n  // An object mapping a reaction to a weight, as in:\n  // {\n  //   \"\": 16,\n  //   \"sourcecred:626763367893303303\": 32,\n  // }\n  // Note that server custom emojis have a snowflake identifier.\n  //\n  // You can get a custom emoji ID by right clicking the custom emoji and\n  // copying it's URL, with the ID being the image file name.\n  +reactionWeightConfig?: ReactionWeightConfig,\n  // An object mapping a role to a weight, as in:\n  // {\n  //   \"defaultWeight\": 0,\n  //   \"weights\": {\n  //     \"759191073943191613\": 0.5,\n  //     \"762085832181153872\": 1,\n  //     \"698296035889381403\": 1\n  //   }\n  // }\n  // Note that roles use a snowflake id only.\n  // defaultWeight is used to set weights for members who don't have a specified role\n  +roleWeightConfig?: RoleWeightConfig,\n  // An object mapping a channel or a channel category to a weight, as in:\n  // {\n  //   \"defaultWeight\": 0,\n  //   \"weights\": {\n  //     \"759191073943191613\": 0.25\n  //   }\n  // }\n  // Note that channels use a snowflake id only.\n  // If both a channel and a category weight apply to a channel, they will be multiplied\n  // defaultWeight is used to set weights for channels and categories that don't have a specified weight\n  // this means that defaultWeight^2 is used when neither a channel nor a category weight is specified\n  // we therefore only recommend a defaultWeight of 1 or 0\n  +channelWeightConfig?: ChannelWeightConfig,\n  // List of channels which are considered \"props channels\".\n  // In a props channel, we have an extra rule: if someone is mentioned in a message,\n  // we create a \"props\" edge to the mentioned user instead of a regular \"mentions\" edge.\n  // We can set a higher weight on these props edges, which allows us to flow Cred in a props\n  // mostly to the people receiving props, rather than to the author of the props message.\n  +propsChannels?: $ReadOnlyArray<Model.Snowflake>,\n  // Whether to include NSFW channels in cred distribution or not\n  +includeNsfwChannels?: boolean,\n  // This reduces graph size by replacing reaction nodes with message node weights.\n  +simplifyGraph?: boolean,\n|}>;\n\nconst parserJson: C.Parser<DiscordConfigJson> = C.array(\n  C.object(\n    {\n      guildId: C.delimited(\"//\"),\n      reactionWeightConfig: C.object(\n        {\n          weights: C.dict(C.number),\n          defaultWeight: C.number,\n          applyAveraging: C.boolean,\n        },\n        {\n          confidenceDampener: C.number,\n        }\n      ),\n    },\n    {\n      roleWeightConfig: C.object({\n        defaultWeight: C.number,\n        weights: C.dict(C.number, C.delimited(\"//\")),\n      }),\n      channelWeightConfig: C.object({\n        defaultWeight: C.number,\n        weights: C.dict(C.number, C.delimited(\"//\")),\n      }),\n      propsChannels: C.array(C.string),\n      includeNsfwChannels: C.boolean,\n      simplifyGraph: C.boolean,\n    }\n  )\n);\n\nexport type DiscordConfig = {|\n  +guildId: Model.Snowflake,\n  +weights: WeightConfig,\n  +propsChannels: $ReadOnlyArray<Model.Snowflake>,\n  +includeNsfwChannels: boolean,\n  +simplifyGraph: boolean,\n|};\nexport type DiscordConfigs = $ReadOnlyArray<DiscordConfig>;\n\n/**\n * Upgrade from the version on disk to the DiscordConfig.\n *\n * For now, this allows us to refactor to a cleaner internal type without breaking any existing users.\n * We may need this indefinitely if e.g. we decide to de-serialize the raw JSON into maps (since maps\n * can't be written directly to JSON).\n */\nexport function _upgrade(json: DiscordConfigJson): DiscordConfigs {\n  const defaultReactionWeights = {\n    defaultWeight: 1,\n    weights: {},\n    applyAveraging: false,\n  };\n  const defaultRoleWeights = {defaultWeight: 1, weights: {}};\n  const defaultChannelWeights = {defaultWeight: 1, weights: {}};\n  return json.map((config) => ({\n    guildId: config.guildId,\n    weights: {\n      roleWeights: NullUtil.orElse(config.roleWeightConfig, defaultRoleWeights),\n      emojiWeights: NullUtil.orElse(\n        config.reactionWeightConfig,\n        defaultReactionWeights\n      ),\n      channelWeights: NullUtil.orElse(\n        config.channelWeightConfig,\n        defaultChannelWeights\n      ),\n    },\n    propsChannels: config.propsChannels || [],\n    includeNsfwChannels: config.includeNsfwChannels || false,\n    simplifyGraph: config.simplifyGraph || false,\n  }));\n}\n\nexport const parser: C.Parser<DiscordConfigs> = C.fmap(parserJson, _upgrade);\n","// @flow\n\nimport fetch from \"isomorphic-fetch\";\nimport * as Model from \"./models\";\n\nexport interface DiscordApi {\n  guilds(): Promise<$ReadOnlyArray<Model.Guild>>;\n  emojis(guild: Model.Snowflake): Promise<$ReadOnlyArray<Model.Emoji>>;\n  channels(guild: Model.Snowflake): Promise<$ReadOnlyArray<Model.Channel>>;\n  roles(guild: Model.Snowflake): Promise<$ReadOnlyArray<Model.Role>>;\n  members(guild: Model.Snowflake): Promise<$ReadOnlyArray<Model.GuildMember>>;\n  messages(\n    channel: Model.Snowflake,\n    after: Model.Snowflake,\n    limit: number\n  ): Promise<$ReadOnlyArray<Model.Message>>;\n  reactions(\n    channel: Model.Snowflake,\n    message: Model.Snowflake,\n    emoji: Model.Emoji\n  ): Promise<$ReadOnlyArray<Model.Reaction>>;\n}\n\nconst fetcherDefaults: FetcherOptions = {\n  apiUrl: \"https://discordapp.com/api\",\n  token: null,\n  fetch,\n};\n\ntype FetcherOptions = {|\n  +apiUrl: string,\n  +fetch: typeof fetch,\n  +token: ?Model.BotToken,\n|};\n\nexport class Fetcher implements DiscordApi {\n  +_options: FetcherOptions;\n  _timeout: number;\n\n  constructor(opts?: $Shape<FetcherOptions>) {\n    this._options = {...fetcherDefaults, ...opts};\n    if (!this._options.token) {\n      throw new Error(\"A BotToken is required\");\n    }\n    this._timeout = 0;\n  }\n\n  _fetch(endpoint: string): Promise<Response> {\n    const {apiUrl, token} = this._options;\n    if (!token) {\n      throw new Error(\"A BotToken is required\");\n    }\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        Accept: \"application/json\",\n        Authorization: `Bot ${token}`,\n      },\n    };\n    const url = new URL(`${apiUrl}${endpoint}`).href;\n    return this._options.fetch(url, requestOptions);\n  }\n\n  async _wait() {\n    const currentTime = Date.now();\n    // if timeout hasn't passed, we wait until it does\n    if (currentTime < this._timeout) {\n      const restartDate = new Date(this._timeout);\n      const waitTime = this._timeout - currentTime;\n      console.warn(\n        `Discord Rate limit reached. Waiting for ${\n          waitTime / 1000\n        } seconds (until ${restartDate.toLocaleString()})`\n      );\n      await new Promise((resolve) => setTimeout(resolve, waitTime));\n    }\n  }\n\n  _checkRateLimit(res: Response) {\n    // The discord API returns this header to indicate how many requests remain\n    // before hitting a cooldown.\n    const rateLimitRemaining = Number(res.headers.get(\"x-ratelimit-remaining\"));\n\n    // The discord API returns this epoc time (in seconds) to let us know\n    // when we can continue.\n    const rateLimitReset = Number(res.headers.get(\"x-ratelimit-reset\")) * 1000;\n\n    // wait until the timeout passes  before attempting another query\n    if (rateLimitRemaining === 0) {\n      this._timeout = rateLimitReset;\n    }\n  }\n\n  async _fetchJson(endpoint: string): Promise<any> {\n    await this._wait();\n    const res = await this._fetch(endpoint);\n    failIfMissing(res);\n    failForNotOk(res);\n    this._checkRateLimit(res);\n    return await res.json();\n  }\n\n  async guilds(): Promise<$ReadOnlyArray<Model.Guild>> {\n    const guilds = await this._fetchJson(\"/users/@me/guilds\");\n    return guilds.map((x) => ({\n      id: x.id,\n      name: x.name,\n      permissions: x.permissions,\n    }));\n  }\n\n  async emojis(guild: Model.Snowflake): Promise<$ReadOnlyArray<Model.Emoji>> {\n    const emojis = await this._fetchJson(`/guilds/${guild}/emojis`);\n    return emojis.map((x) => ({\n      id: x.id,\n      name: x.name,\n    }));\n  }\n\n  async channels(\n    guild: Model.Snowflake\n  ): Promise<$ReadOnlyArray<Model.Channel>> {\n    const channels = await this._fetchJson(`/guilds/${guild}/channels`);\n    return channels.map((x) => ({\n      id: x.id,\n      parentId: x.parent_id,\n      name: x.name,\n      type: Model.channelTypeFromId(x.type),\n      nsfw: x.nsfw,\n    }));\n  }\n\n  async roles(guild: Model.Snowflake): Promise<$ReadOnlyArray<Model.Role>> {\n    const roles = await this._fetchJson(`/guilds/${guild}/roles`);\n    return roles.map((x) => ({\n      id: x.id,\n      name: x.name,\n    }));\n  }\n\n  async members(\n    guild: Model.Snowflake\n  ): Promise<$ReadOnlyArray<Model.GuildMember>> {\n    const limit = 1000;\n    let doneLoading = false;\n    let allMembers = [];\n    let after = \"0\";\n    while (!doneLoading) {\n      const newMembers: Array<Model.GuildMember> = await this._fetchJson(\n        `/guilds/${guild}/members?after=${after}&limit=${limit}`\n      );\n      if (newMembers.length < limit) {\n        doneLoading = true;\n      } else {\n        after = newMembers[newMembers.length - 1].user.id;\n      }\n      allMembers = [...allMembers, ...newMembers];\n    }\n    return allMembers.map((x) => ({\n      user: {\n        id: x.user.id,\n        username: x.user.username,\n        discriminator: x.user.discriminator,\n        bot: x.user.bot || x.user.system || false,\n      },\n      nick: x.nick || null,\n      roles: x.roles,\n    }));\n  }\n\n  async messages(\n    channel: Model.Snowflake,\n    after: Model.Snowflake,\n    limit: number\n  ): Promise<$ReadOnlyArray<Model.Message>> {\n    const messages = await this._fetchJson(\n      `/channels/${channel}/messages?after=${after}&limit=${limit}`\n    );\n    return messages.map((x) => ({\n      id: x.id,\n      channelId: channel,\n      authorId: x.author.id,\n      timestampMs: Date.parse(x.timestamp),\n      content: x.content,\n      reactionEmoji: (x.reactions || []).map((r) => r.emoji),\n      nonUserAuthor: x.webhook_id != null || false,\n      mentions: (x.mentions || []).map((user) => ({\n        userId: user.id,\n        count: Array.from(x.content.matchAll(`<@!?${user.id}>`)).length,\n      })),\n    }));\n  }\n\n  async reactions(\n    channel: Model.Snowflake,\n    message: Model.Snowflake,\n    emoji: Model.Emoji\n  ): Promise<$ReadOnlyArray<Model.Reaction>> {\n    let doneLoading = false;\n    let allReactingUsers: Array<Model.User> = [];\n    let after = \"0\";\n    const limit = 100;\n    const emojiRef = Model.emojiToRef(emoji);\n    while (!doneLoading) {\n      const newReactingUsers: Array<Model.User> = await this._fetchJson(\n        `/channels/${channel}/messages/${message}/reactions/${emojiRef}?after=${after}&limit=${limit}`\n      );\n      if (newReactingUsers.length < limit) {\n        doneLoading = true;\n      } else {\n        after = newReactingUsers[newReactingUsers.length - 1].id;\n      }\n      allReactingUsers = [...allReactingUsers, ...newReactingUsers];\n    }\n\n    return allReactingUsers.map((x) => ({\n      channelId: channel,\n      messageId: message,\n      emoji,\n      authorId: x.id,\n    }));\n  }\n}\n\nfunction failIfMissing(response: Response) {\n  if (response.status === 404) {\n    throw new Error(`404 Not Found on: ${response.url}; maybe bad serverUrl?`);\n  }\n  if (response.status === 403) {\n    throw new Error(`403 Forbidden: bad API username or key?\\n${response.url}`);\n  }\n  if (response.status === 410) {\n    throw new Error(`410 Gone`);\n  }\n}\n\nfunction failForNotOk(response: Response) {\n  if (!response.ok) {\n    throw new Error(`not OK status ${response.status} on ${response.url}`);\n  }\n}\n","// @flow\n\nimport {TaskReporter} from \"../../util/taskReporter\";\nimport {type DiscordApi} from \"./fetcher\";\nimport {SqliteMirrorRepository} from \"./mirrorRepository\";\nimport * as Model from \"./models\";\nimport type {DiscordConfig} from \"./config\";\nimport {channelWeight} from \"./reactionWeights\";\n\n// How many messages for each channel to reload.\nconst RELOAD_DEPTH = 50;\n\nexport class Mirror {\n  +_repo: SqliteMirrorRepository;\n  +_api: DiscordApi;\n  +config: DiscordConfig;\n\n  constructor(\n    repo: SqliteMirrorRepository,\n    api: DiscordApi,\n    config: DiscordConfig\n  ) {\n    this._repo = repo;\n    this._api = api;\n    this.config = config;\n  }\n\n  async update(reporter: TaskReporter) {\n    const guild = await this.validateGuildId();\n    reporter.start(`discord/${guild.name}`);\n    await this.addMembers();\n    const channels = await this.addTextChannels();\n    for (const channel of channels) {\n      reporter.start(`discord/${guild.name}/#${channel.name}`);\n      try {\n        await this.addMessages(channel.id, channel.parentId);\n      } catch (e) {\n        const warn = e?.message?.includes(\"403\")\n          ? \"Skipping private channel.\"\n          : e;\n        console.warn(warn);\n      }\n      reporter.finish(`discord/${guild.name}/#${channel.name}`);\n    }\n    reporter.finish(`discord/${guild.name}`);\n  }\n\n  async validateGuildId(): Promise<{|\n    +id: Model.Snowflake,\n    +name: string,\n    +permissions: number,\n  |}> {\n    const guilds = await this._api.guilds();\n    const guild = guilds.find((g) => g.id === this.config.guildId);\n    if (!guild) {\n      throw new Error(\n        `Couldn't find guild with ID ${this.config.guildId}\\nMaybe the bot has no access to it?`\n      );\n    }\n    // TODO: validate bot permissions\n    return guild;\n  }\n\n  async addMembers(): Promise<$ReadOnlyArray<Model.GuildMember>> {\n    const members = await this._api.members(this.config.guildId);\n    for (const member of members) {\n      this._repo.addMember(member);\n    }\n    return this._repo.members();\n  }\n\n  async addTextChannels(): Promise<$ReadOnlyArray<Model.Channel>> {\n    const channels = await this._api.channels(this.config.guildId);\n    for (const channel of channels) {\n      if (channel.type !== \"GUILD_TEXT\") continue;\n      if (\n        !channelWeight(\n          this.config.weights.channelWeights,\n          channel.id,\n          channel.parentId\n        )\n      )\n        continue;\n      if (!this.config.includeNsfwChannels && channel.nsfw) continue;\n      this._repo.addChannel(channel);\n    }\n    return this._repo.channels();\n  }\n\n  async addMessages(\n    channel: Model.Snowflake,\n    category?: Model.Snowflake,\n    messageLimit?: number\n  ): Promise<$ReadOnlyArray<Model.Message>> {\n    const loadStart = this._repo.nthMessageFromTail(channel, RELOAD_DEPTH);\n    // console.log(channel, (loadStart || {}).id);\n\n    const limit = messageLimit || 100;\n    let page: $ReadOnlyArray<Model.Message> = [];\n    let after: Model.Snowflake = loadStart ? loadStart.id : \"0\";\n    do {\n      page = await this._api.messages(channel, after, limit);\n      for (const message of page) {\n        after = after < message.id ? message.id : after;\n        this._repo.addMessage(message);\n        for (const emoji of message.reactionEmoji) {\n          const reactions = await this._api.reactions(\n            channel,\n            message.id,\n            emoji\n          );\n          for (const reaction of reactions) {\n            this._repo.addReaction(reaction);\n          }\n        }\n      }\n    } while (page.length >= limit);\n    return this._repo.messages(channel);\n  }\n}\n","// @flow\n\nimport Database from \"better-sqlite3\";\n\nimport type {Plugin, PluginDirectoryContext} from \"../../api/plugin\";\nimport type {PluginDeclaration} from \"../../analysis/pluginDeclaration\";\nimport {parser, type DiscordConfigs, type DiscordToken} from \"./config\";\nimport {declaration} from \"./declaration\";\nimport {join as pathJoin} from \"path\";\nimport {type TaskReporter} from \"../../util/taskReporter\";\nimport {Fetcher} from \"./fetcher\";\nimport {Mirror} from \"./mirror\";\nimport type {ReferenceDetector} from \"../../core/references\";\nimport {\n  type WeightedGraph,\n  merge as mergeGraphs,\n} from \"../../core/weightedGraph\";\nimport {merge as mergeWeights} from \"../../core/weights\";\nimport {weightsForDeclaration} from \"../../analysis/pluginDeclaration\";\nimport {createGraph} from \"./createGraph\";\nimport * as Model from \"./models\";\nimport {SqliteMirrorRepository} from \"./mirrorRepository\";\nimport {loadJson} from \"../../util/storage\";\nimport {DiskStorage} from \"../../core/storage/disk\";\nimport {createIdentities} from \"./createIdentities\";\nimport type {IdentityProposal} from \"../../core/ledger/identityProposal\";\n\nasync function loadConfig(\n  dirContext: PluginDirectoryContext\n): Promise<DiscordConfigs> {\n  const dirname = dirContext.configDirectory();\n  const storage = new DiskStorage(dirname);\n  return loadJson(storage, \"config.json\", parser);\n}\n\nconst TOKEN_ENV_VAR_NAME = \"SOURCECRED_DISCORD_TOKEN\";\n\nfunction getTokenFromEnv(): DiscordToken {\n  const rawToken = process.env[TOKEN_ENV_VAR_NAME];\n  if (rawToken == null) {\n    throw new Error(`No Discord token provided: set ${TOKEN_ENV_VAR_NAME}`);\n  }\n  return rawToken;\n}\n\nexport class DiscordPlugin implements Plugin {\n  async declaration(): Promise<PluginDeclaration> {\n    return declaration;\n  }\n\n  async load(\n    ctx: PluginDirectoryContext,\n    reporter: TaskReporter\n  ): Promise<void> {\n    const configs = await loadConfig(ctx);\n    const token = getTokenFromEnv();\n    const fetcher = new Fetcher({token});\n    for (const config of configs) {\n      const repo = await repository(ctx, config.guildId);\n      const mirror = new Mirror(repo, fetcher, config);\n      await mirror.update(reporter);\n    }\n  }\n\n  async graph(\n    ctx: PluginDirectoryContext,\n    rd: ReferenceDetector\n  ): Promise<WeightedGraph> {\n    const _ = rd; // TODO(#1808): not yet used\n    const configs = await loadConfig(ctx);\n    const weightedGraph = mergeGraphs(\n      await Promise.all(\n        configs.map(async (config) => {\n          const repo = await repository(ctx, config.guildId);\n          return createGraph(config, repo);\n        })\n      )\n    );\n\n    const declarationWeights = weightsForDeclaration(declaration);\n    // Add in the type-level weights from the plugin spec\n    const combinedWeights = mergeWeights([\n      weightedGraph.weights,\n      declarationWeights,\n    ]);\n    return {graph: weightedGraph.graph, weights: combinedWeights};\n  }\n\n  async referenceDetector(\n    _unused_ctx: PluginDirectoryContext\n  ): Promise<ReferenceDetector> {\n    // TODO: Implement Discord reference detection\n    // (low priority bc ppl rarely hardlink to Discord messages)\n    return {addressFromUrl: () => undefined};\n  }\n\n  async identities(\n    ctx: PluginDirectoryContext\n  ): Promise<$ReadOnlyArray<IdentityProposal>> {\n    const configs = await loadConfig(ctx);\n    return (\n      await Promise.all(\n        configs.map(async ({guildId}) => {\n          const repo = await repository(ctx, guildId);\n          return createIdentities(repo);\n        })\n      )\n    ).flat(1);\n  }\n}\n\nasync function repository(\n  ctx: PluginDirectoryContext,\n  guild: Model.Snowflake\n): Promise<SqliteMirrorRepository> {\n  const path = pathJoin(ctx.cacheDirectory(), `discordMirror-${guild}.db`);\n  const db = await new Database(path);\n  return new SqliteMirrorRepository(db, guild);\n}\n","// @flow\n\nimport {type URL} from \"../../core/references\";\nimport {type NodeWeight} from \"../../core/weights\";\nimport {type NodeAddressT, NodeAddress} from \"../../core/graph\";\nimport {type TimestampMs, type TimestampISO} from \"../../util/timestamp\";\nimport * as Timestamp from \"../../util/timestamp\";\nimport {type InitiativeId} from \"./initiative\";\nimport {nodeEntryTypes} from \"./declaration\";\n\n/**\n * Represents an \"inline contribution\" node. They're called entries and named\n * by type: contribution entry, reference entry, dependency entry.\n * The generalization of this is a node entry.\n */\n\n// Which field the NodeEntry appeared in.\nexport type NodeEntryField = \"DEPENDENCY\" | \"REFERENCE\" | \"CONTRIBUTION\";\n\n// A normalized NodeEntry type, guaranteed to have all relevant fields set.\nexport type NodeEntry = {|\n  // A single line description of what this contribution represents.\n  +title: string,\n  // A unique key to use as a suffix to the NodeAddress.\n  // The InitiativeFile and NodeEntryField will be prefixes, so it must be\n  // unique within one field's array of entries.\n  +key: string,\n  // URLs pointing to the contributors. Similar to the initiatives will use\n  // reference detection to create edges.\n  +contributors: $ReadOnlyArray<URL>,\n  // Timestamp for this node.\n  +timestampMs: TimestampMs,\n  // NodeWeight for this node.\n  +weight: NodeWeight | null,\n|};\n\n// A type with convenient default values for users to manually enter.\n// Should be inexact Flow type as with JSON sources you never know.\nexport type NodeEntryJson = $Shape<{\n  // Title is required, as this is essential for attribution.\n  +title: string,\n  // Key defaults to a url-friendly-slug of the title. Override it if you need\n  // to preserve a specific NodeAddress, or the slug produces duplicate keys.\n  +key: string,\n  // Defaults to an empty array.\n  +contributors: $ReadOnlyArray<URL>,\n  // Timestamp of this node, but in ISO format as it's more human friendly.\n  +timestampIso: TimestampISO,\n  // Defaults to null.\n  +weight: NodeWeight | null,\n}>;\n\nexport function addressForNodeEntry(\n  field: NodeEntryField,\n  id: InitiativeId,\n  key: string\n): NodeAddressT {\n  return NodeAddress.append(nodeEntryTypes[field].prefix, ...id, key);\n}\n\n/**\n * Takes a NodeEntryJson and normalizes it to a NodeEntry.\n *\n * Will throw when required fields are missing. Otherwise handles default\n * values and converting ISO timestamps.\n */\nexport function normalizeNodeEntry(\n  input: NodeEntryJson,\n  defaultTimestampMs: TimestampMs\n): NodeEntry {\n  if (!input.title) {\n    throw new TypeError(\n      `Title is required for an entry, received ${JSON.stringify(input)}`\n    );\n  }\n\n  return {\n    key: input.key || _titleSlug(input.title),\n    title: input.title,\n    timestampMs: input.timestampIso\n      ? Timestamp.fromISO(input.timestampIso)\n      : defaultTimestampMs,\n    contributors: input.contributors || [],\n    weight: input.weight || null,\n  };\n}\n\n/**\n * Creates a url-friendly-slug from the title of a NodeEntry. Useful for\n * generating a default key.\n *\n * Note: keys are not required to meet the formatting rules of this slug,\n * this is mostly for predictability and convenience of NodeAddresses.\n */\nexport function _titleSlug(title: string): string {\n  return String(title)\n    .toLowerCase()\n    .replace(/[^a-z0-9-_]+/g, \"-\")\n    .replace(/--+/g, \"-\")\n    .replace(/^-/, \"\")\n    .replace(/-$/, \"\");\n}\n","// @flow\n\nimport {type URL} from \"../../core/references\";\nimport {type TimestampMs} from \"../../util/timestamp\";\nimport {findDuplicates} from \"../../util/findDuplicates\";\nimport {\n  type NodeEntry,\n  type NodeEntryJson,\n  normalizeNodeEntry,\n} from \"./nodeEntry\";\n\n/**\n * A type which supports multiple ways of defining what edges an Initiative has.\n * Currently includes reference detected URLs and NodeEntries.\n * This is the normalized variant of EdgeSpecJson.\n */\nexport type EdgeSpec = {|\n  +urls: $ReadOnlyArray<URL>,\n  +entries: $ReadOnlyArray<NodeEntry>,\n|};\n\n// A type with convenient default values for users to manually enter.\n// Should be inexact Flow type as with JSON sources you never know.\nexport type EdgeSpecJson = $Shape<{\n  // Defaults to an empty array.\n  +urls: $ReadOnlyArray<URL>,\n  // Defaults to an empty array.\n  +entries: $ReadOnlyArray<NodeEntryJson>,\n}>;\n\n/**\n * Takes an EdgeSpecJson and normalizes it to an EdgeSpec.\n *\n * Will throw when required fields are missing or duplicate keys are found.\n * Otherwise handles default values and converting ISO timestamps.\n * Note: we allow the EdgeSpecJson to be undefined to easily support omitting\n * edges entirely, while still normalizing to an EdgeSpec.\n */\nexport function normalizeEdgeSpec(\n  spec: ?EdgeSpecJson,\n  defaultTimestampMs: TimestampMs\n): EdgeSpec {\n  const {urls, entries} = spec || {};\n  return _validateEdgeSpec({\n    urls: urls || [],\n    entries: (entries || []).map((x: NodeEntryJson) =>\n      normalizeNodeEntry(x, defaultTimestampMs)\n    ),\n  });\n}\n\n/**\n * A separate function to validate an EdgeSpec after it's normalized.\n * Normally you don't need to invoke this directly.\n */\nexport function _validateEdgeSpec(spec: EdgeSpec): EdgeSpec {\n  const duplicates = _findDuplicatesByKey(spec.entries);\n  if (duplicates.size) {\n    // The keys are duplicate and often generated by the normalize functions.\n    // So we need to offer more details to identify the duplicate entries.\n    const dupeList = Array.from(duplicates)\n      .map((e) => JSON.stringify(e))\n      .join(\"\\n  \");\n    throw new Error(\n      `Duplicate entry keys are not allowed, you may need to ` +\n        `set keys manually for:\\n  ${dupeList}`\n    );\n  }\n  return spec;\n}\n\n/**\n * Find the NodeEntries which have a duplicate key.\n */\nexport function _findDuplicatesByKey(\n  entries: $ReadOnlyArray<NodeEntry>\n): Set<NodeEntry> {\n  const duplicateKeys = findDuplicates(entries.map((e) => e.key));\n  // Having a set of keys is useful, but we want to know where these keys came from.\n  // Include all entries with a key that produces duplicates, even the first one.\n  return new Set(entries.filter((e) => duplicateKeys.has(e.key)));\n}\n","// @flow\n\n/**\n * Finds elements in the array which are included twice or more.\n * Uses a === comparison, not deep equality.\n */\nexport function findDuplicates<T>(items: $ReadOnlyArray<T>): Set<T> {\n  const encountered: Set<T> = new Set();\n  const duplicates: Set<T> = new Set();\n  for (const item of items) {\n    if (!encountered.has(item)) {\n      encountered.add(item);\n    } else {\n      duplicates.add(item);\n    }\n  }\n  return duplicates;\n}\n","// @flow\n\nimport {type URL} from \"../../core/references\";\nimport {type NodeAddressT, NodeAddress} from \"../../core/graph\";\nimport {type NodeWeight} from \"../../core/weights\";\nimport {type TimestampMs} from \"../../util/timestamp\";\nimport {type EdgeSpec} from \"./edgeSpec\";\nimport {initiativeNodeType} from \"./declaration\";\n\n// Composite ID, used as input for NodeAddressT.\nexport opaque type InitiativeId: string[] = string[];\n\n// Enforce that each ID has at least a sub-type and 1..n components.\nexport function createId(\n  subType: string,\n  requiredId: string,\n  ...rest: string[]\n): InitiativeId {\n  return [subType, requiredId, ...rest];\n}\n\nexport function addressFromId(id: InitiativeId): NodeAddressT {\n  return NodeAddress.append(initiativeNodeType.prefix, ...id);\n}\n\n// A before completion and after completion weight for Initiatives.\nexport type InitiativeWeight = {|\n  +incomplete: NodeWeight,\n  +complete: NodeWeight,\n|};\n\n/**\n * An intermediate representation of an Initiative.\n *\n * This makes the assumption a Champion cannot fail in championing.\n * Instead of a success status, they should be removed if unsuccessful.\n *\n * There is also no timestamp for completion or each edge.\n * It should be inferred from the node timestamps instead.\n * We can support accurate edge timestamps by interpreting wiki histories.\n * However the additional complexity and requirements put on the tracker\n * don't seem worthwhile right now.\n * Especially because cred can flow even before bounties are released.\n * See https://discourse.sourcecred.io/t/write-the-initiatives-plugin/269/6\n */\nexport type Initiative = {|\n  +id: InitiativeId,\n  +title: string,\n  +timestampMs: TimestampMs,\n  +weight?: InitiativeWeight,\n  +completed: boolean,\n  +dependencies: EdgeSpec,\n  +references: EdgeSpec,\n  +contributions: EdgeSpec,\n  +champions: $ReadOnlyArray<URL>,\n|};\n\n/**\n * Represents a source of Initiatives.\n */\nexport interface InitiativeRepository {\n  /**\n   * Gets an array of all Initiatives in this repository.\n   */\n  initiatives(): $ReadOnlyArray<Initiative>;\n}\n","// @flow\n\nimport {type URL} from \"../../core/references\";\nimport {type TimestampISO} from \"../../util/timestamp\";\nimport {type NodeAddressT, NodeAddress} from \"../../core/graph\";\nimport {type Compatible, fromCompat, toCompat} from \"../../util/compat\";\nimport {type InitiativeWeight, type InitiativeId, createId} from \"./initiative\";\nimport {type InitiativesDirectory} from \"./initiativesDirectory\";\nimport {type EdgeSpecJson} from \"./edgeSpec\";\nimport {initiativeNodeType} from \"./declaration\";\n\nexport const INITIATIVE_FILE_SUBTYPE = \"INITIATIVE_FILE\";\n\n/**\n * Represents a single Initiative using a file as source.\n *\n * Note: The file name will be used to derive the InitiativeId. So it doesn't\n * make sense to use this outside of the context of an InitiativesDirectory.\n */\nexport type InitiativeFile = InitiativeFileV020;\n\nexport type InitiativeFileV020 = {|\n  +title: string,\n  +timestampIso: TimestampISO,\n  +weight: InitiativeWeight,\n  +completed: boolean,\n  +contributions?: EdgeSpecJson,\n  +dependencies?: EdgeSpecJson,\n  +references?: EdgeSpecJson,\n  +champions?: $ReadOnlyArray<URL>,\n|};\n\nexport const upgradeFrom010 = (\n  file: InitiativeFileV010\n): InitiativeFileV020 => ({\n  ...file,\n  contributions: {urls: file.contributions},\n  dependencies: {urls: file.dependencies},\n  references: {urls: file.references},\n});\n\nexport type InitiativeFileV010 = {|\n  +title: string,\n  +timestampIso: TimestampISO,\n  +weight: InitiativeWeight,\n  +completed: boolean,\n  +dependencies?: $ReadOnlyArray<URL>,\n  +references?: $ReadOnlyArray<URL>,\n  +contributions?: $ReadOnlyArray<URL>,\n  +champions?: $ReadOnlyArray<URL>,\n|};\n\nconst upgrades = {\n  \"0.1.0\": upgradeFrom010,\n};\n\nexport const COMPAT_INFO = {\n  type: \"sourcecred/initiativeFile\",\n  version: \"0.2.0\",\n};\n\nexport function fromJSON(j: Compatible<any>): InitiativeFile {\n  return fromCompat(COMPAT_INFO, j, upgrades);\n}\n\nexport function toJSON(m: InitiativeFile): Compatible<InitiativeFile> {\n  return toCompat(COMPAT_INFO, m);\n}\n\n/**\n * When provided with the initiative NodeAddressT of an InitiativeFile this extracts\n * the URL from it. Or null when the address is not for an InitiativeFile.\n */\nexport function initiativeFileURL(address: NodeAddressT): string | null {\n  const initiativeFilePrefix = NodeAddress.append(\n    initiativeNodeType.prefix,\n    INITIATIVE_FILE_SUBTYPE\n  );\n\n  if (!NodeAddress.hasPrefix(address, initiativeFilePrefix)) {\n    return null;\n  }\n\n  const parts = NodeAddress.toParts(address);\n  const remoteUrl = parts[4];\n  const fileName = parts[5];\n  return `${remoteUrl}/${fileName}`;\n}\n\n// Creates the InitiativeId for an InitiativeFile.\nexport function initiativeFileId(\n  {remoteUrl}: InitiativesDirectory,\n  fileName: string\n): InitiativeId {\n  return createId(INITIATIVE_FILE_SUBTYPE, remoteUrl, fileName);\n}\n","// @flow\nimport * as C from \"../../util/combo\";\nimport {compatibleParser} from \"../../util/compat\";\nimport {COMPAT_INFO, upgradeFrom010} from \"./initiativeFile\";\nimport type {\n  InitiativeFile,\n  InitiativeFileV010,\n  InitiativeFileV020,\n} from \"./initiativeFile\";\nimport {_validateUrl} from \"./initiativesDirectory\";\nimport {fromISO, toISO} from \"../../util/timestamp\";\n\nconst URLParser = C.fmap(C.string, _validateUrl);\n\nconst TimestampParser = C.fmap(C.string, (t) => toISO(fromISO(t)));\n\nconst CommonFields = {\n  title: C.string,\n  timestampIso: TimestampParser,\n  weight: C.object({incomplete: C.number, complete: C.number}),\n  completed: C.boolean,\n};\n\nconst NodeEntryParser = C.object(\n  {\n    title: C.string,\n    timestampIso: TimestampParser,\n    // Conceputally should use URLParser, but we allow strings\n    // as part of a hack fix to https://github.com/sourcecred/sourcecred/issues/1807\n    contributors: C.array(C.string),\n  },\n  {\n    key: C.string,\n    weight: C.number,\n  }\n);\n\nconst EdgeSpecParser = C.object(\n  {},\n  {\n    urls: C.array(URLParser),\n    entries: C.array(NodeEntryParser),\n  }\n);\n\nconst Parse_020: C.Parser<InitiativeFileV020> = C.object(CommonFields, {\n  contributions: EdgeSpecParser,\n  dependencies: EdgeSpecParser,\n  references: EdgeSpecParser,\n  // Conceputally should use URLParser, but we allow strings\n  // as part of a hack fix to https://github.com/sourcecred/sourcecred/issues/1807\n  champions: C.array(C.string),\n});\n\nconst Parse_010: C.Parser<InitiativeFileV010> = (() => {\n  return C.object(CommonFields, {\n    contributions: C.array(URLParser),\n    dependencies: C.array(URLParser),\n    references: C.array(URLParser),\n    champions: C.array(URLParser),\n  });\n})();\n\nexport const parser: C.Parser<InitiativeFile> = compatibleParser(\n  COMPAT_INFO.type,\n  {\n    \"0.2.0\": Parse_020,\n    \"0.1.0\": C.fmap(Parse_010, upgradeFrom010),\n  }\n);\n","// @flow\n\nimport path from \"path\";\nimport fs from \"fs-extra\";\nimport globby from \"globby\";\nimport {type URL} from \"../../core/references\";\nimport {type NodeAddressT} from \"../../core/graph\";\nimport * as Timestamp from \"../../util/timestamp\";\nimport {normalizeEdgeSpec} from \"./edgeSpec\";\nimport {\n  type ReferenceDetector,\n  MappedReferenceDetector,\n} from \"../../core/references\";\nimport {\n  type Initiative,\n  type InitiativeRepository,\n  addressFromId,\n} from \"./initiative\";\nimport {\n  type InitiativeFile,\n  initiativeFileURL,\n  initiativeFileId,\n} from \"./initiativeFile\";\nimport {loadJson} from \"../../util/storage\";\nimport {DiskStorage} from \"../../core/storage/disk\";\nimport {parser as initiativeParser} from \"./parseInitiative\";\n\n/**\n * Represents an Initiatives directory.\n *\n * Initiative directories contain a set of InitiativeFiles in a `*.json` pattern.\n * Where the file name is the ID of that Initiative.\n * Additionally we require a `remoteUrl` for this directory. We expect this directory\n * to be something you can browse online. This allows us to create a ReferenceDetector.\n */\nexport type InitiativesDirectory = {|\n  +localPath: string,\n  +remoteUrl: string,\n|};\n\n/**\n * Opaque because we only want this file's functions to create these load results.\n * However we do allow anyone to consume it's properties.\n */\nexport opaque type LoadedInitiativesDirectory: {|\n  +referenceDetector: ReferenceDetector,\n  +initiatives: InitiativeRepository,\n|} = {|\n  +referenceDetector: ReferenceDetector,\n  +initiatives: InitiativeRepository,\n|};\n\n/**\n * Loads a given InitiativesDirectory.\n */\nexport async function loadDirectory(\n  dir: InitiativesDirectory\n): Promise<LoadedInitiativesDirectory> {\n  // Validate input.\n  const remoteUrl = _validateUrl(dir.remoteUrl);\n  const localPath = await _validatePath(dir.localPath);\n  const validatedDir: InitiativesDirectory = {remoteUrl, localPath};\n\n  // Load data.\n  const fileNames = await _findFiles(localPath);\n  const fileMap = await _readFiles(localPath, fileNames);\n  const initiatives = _convertToInitiatives(validatedDir, fileMap);\n  const refMap = _createReferenceMap(initiatives);\n\n  // Create output types.\n  const repository = ({initiatives: () => initiatives}: InitiativeRepository);\n  const referenceDetector = new MappedReferenceDetector(refMap);\n  return {\n    initiatives: repository,\n    referenceDetector,\n  };\n}\n\n// Checks the path exists and is a directory.\n// Returns the absolute path or throws.\nexport async function _validatePath(localPath: string): Promise<string> {\n  const absPath = path.resolve(localPath);\n  if (!(await fs.exists(absPath))) {\n    throw new Error(\n      `Provided initiatives directory does not exist at: ${absPath}`\n    );\n  }\n  if (!(await fs.lstat(absPath)).isDirectory()) {\n    throw new Error(\n      `Provided initiatives directory is not a directory at: ${absPath}`\n    );\n  }\n  return absPath;\n}\n\n// Gets all *.json filenames in the given directory.\nexport async function _findFiles(\n  localPath: string\n): Promise<$ReadOnlyArray<string>> {\n  const absoluteFileNames = await globby(path.join(localPath, \"*.json\"));\n  return absoluteFileNames.map((a) => path.basename(a));\n}\n\ntype NamesToInitiativeFiles = Map<string, InitiativeFile>;\n\n// Reads all given filenames in the given directory, validating them as compat.\nexport async function _readFiles(\n  localPath: string,\n  fileNames: $ReadOnlyArray<string>\n): Promise<NamesToInitiativeFiles> {\n  const map: NamesToInitiativeFiles = new Map();\n\n  // Sorting to be careful about predictability.\n  // The eventual output of $ReadOnlyArray<Initiative> is ordered, so we'll see\n  // the order matters for equality throughout the system.\n  const sortedFileNames = [...fileNames].sort();\n  for (const fileName of sortedFileNames) {\n    const storage = new DiskStorage(localPath);\n    const initiativeFile = await loadJson(storage, fileName, initiativeParser);\n    map.set(fileName, initiativeFile);\n  }\n\n  return map;\n}\n\n// Checks the provided URL will parse and has no trailing slashes, search or hash.\n// Returns the validated URL without trailing slashes or throws.\nexport function _validateUrl(remoteUrl: string): string {\n  try {\n    const url = new global.URL(remoteUrl);\n    if (url.search) {\n      throw `URL should not have a search component: ${url.search}`;\n    }\n    if (url.hash) {\n      throw `URL should not have a hash component: ${url.hash}`;\n    }\n    return url.toString().replace(/\\/+$/, \"\");\n  } catch (e) {\n    throw new Error(\n      `Provided initiatives directory URL was invalid: ${remoteUrl}\\n${e}`\n    );\n  }\n}\n\n// Converts the InitiativeFiles we've read to Initiatives.\nexport function _convertToInitiatives(\n  directory: InitiativesDirectory,\n  map: NamesToInitiativeFiles\n): $ReadOnlyArray<Initiative> {\n  const initiatives = [];\n  for (const [fileName, initiativeFile] of map.entries()) {\n    const {\n      timestampIso,\n      champions,\n      contributions,\n      dependencies,\n      references,\n      ...partialInitiativeFile\n    } = initiativeFile;\n\n    const timestampMs = Timestamp.fromISO(timestampIso);\n\n    const initiative: Initiative = {\n      ...partialInitiativeFile,\n      id: initiativeFileId(directory, fileName),\n      timestampMs,\n      champions: champions || [],\n      contributions: normalizeEdgeSpec(contributions, timestampMs),\n      dependencies: normalizeEdgeSpec(dependencies, timestampMs),\n      references: normalizeEdgeSpec(references, timestampMs),\n    };\n\n    initiatives.push(initiative);\n  }\n  return initiatives;\n}\n\n// Creates a reference map using `initiativeFileURL`.\nexport function _createReferenceMap(\n  initiatives: $ReadOnlyArray<Initiative>\n): Map<URL, NodeAddressT> {\n  const refs = new Map();\n  for (const {id} of initiatives) {\n    const address = addressFromId(id);\n    const url = initiativeFileURL(address);\n    if (!url) {\n      throw new Error(\"BUG: Initiative doesn't return an initiativeFileURL\");\n    }\n    refs.set(url, address);\n  }\n  return refs;\n}\n","// @flow\n\nimport * as C from \"../../util/combo\";\nimport {_validateUrl} from \"./initiativesDirectory\";\n\nexport type InitiativesConfig = {|\n  +remoteUrl: string,\n|};\n\nexport const parser: C.Parser<InitiativesConfig> = C.object({\n  remoteUrl: C.fmap(C.string, _validateUrl),\n});\n","// @flow\n\nimport {\n  type Edge,\n  type Node,\n  type EdgeAddressT,\n  type NodeAddressT,\n  EdgeAddress,\n  NodeAddress,\n} from \"../../core/graph\";\nimport type {ReferenceDetector, URL} from \"../../core/references\";\nimport {type WeightedGraph as WeightedGraphT} from \"../../core/weightedGraph\";\nimport * as WeightedGraph from \"../../core/weightedGraph\";\nimport type {NodeWeight} from \"../../core/weights\";\nimport type {EdgeSpec} from \"./edgeSpec\";\nimport {\n  type Initiative,\n  type InitiativeId,\n  type InitiativeRepository,\n  addressFromId,\n} from \"./initiative\";\nimport {\n  type NodeEntry,\n  type NodeEntryField,\n  addressForNodeEntry,\n} from \"./nodeEntry\";\nimport {\n  dependsOnEdgeType,\n  referencesEdgeType,\n  contributesToEdgeType,\n  championsEdgeType,\n  contributesToEntryEdgeType,\n} from \"./declaration\";\nimport {initiativeFileURL} from \"./initiativeFile\";\n\nfunction initiativeAddress(initiative: Initiative): NodeAddressT {\n  return addressFromId(initiative.id);\n}\n\nfunction initiativeNode(initiative: Initiative): Node {\n  const address = initiativeAddress(initiative);\n  const url = initiativeFileURL(address);\n  return {\n    address,\n    timestampMs: initiative.timestampMs,\n    description:\n      url == null ? initiative.title : `[${initiative.title}](${url})`,\n  };\n}\n\nfunction nodeFromEntry(\n  entry: NodeEntry,\n  parentId: InitiativeId,\n  field: NodeEntryField\n): Node {\n  const address = addressForNodeEntry(field, parentId, entry.key);\n  return {\n    address,\n    timestampMs: entry.timestampMs,\n    description: entry.title,\n  };\n}\n\nexport function initiativeWeight(initiative: Initiative): ?NodeWeight {\n  if (!initiative.weight) return;\n  return initiative.completed\n    ? initiative.weight.complete\n    : initiative.weight.incomplete;\n}\n\ntype EdgeFactoryT = (initiative: Initiative, other: NodeAddressT) => Edge;\n\nfunction edgeFactory(\n  prefix: EdgeAddressT,\n  fromInitiative: boolean\n): EdgeFactoryT {\n  return (initiative: Initiative, other: NodeAddressT): Edge => {\n    const iAddr = initiativeAddress(initiative);\n    const src = fromInitiative ? iAddr : other;\n    const dst = fromInitiative ? other : iAddr;\n    return {\n      address: EdgeAddress.append(\n        prefix,\n        ...NodeAddress.toParts(initiativeAddress(initiative)),\n        ...NodeAddress.toParts(other)\n      ),\n      timestampMs: initiative.timestampMs,\n      src,\n      dst,\n    };\n  };\n}\n\nconst depedencyEdge = edgeFactory(dependsOnEdgeType.prefix, true);\nconst referenceEdge = edgeFactory(referencesEdgeType.prefix, true);\nconst contributionEdge = edgeFactory(contributesToEdgeType.prefix, false);\nconst championEdge = edgeFactory(championsEdgeType.prefix, false);\n\nexport function createWeightedGraph(\n  repo: InitiativeRepository,\n  refs: ReferenceDetector\n): WeightedGraphT {\n  const wg = WeightedGraph.empty();\n  const {graph, weights} = wg;\n\n  for (const initiative of repo.initiatives()) {\n    // Adds the Initiative node.\n    const node = initiativeNode(initiative);\n    const weight = initiativeWeight(initiative);\n    graph.addNode(node);\n    if (weight) {\n      weights.nodeWeights.set(node.address, weight);\n    }\n\n    // Generic approach to adding edges when the reference detector has a hit.\n    const urlHandler = (\n      urls: $ReadOnlyArray<URL>,\n      createEdge: EdgeFactoryT\n    ) => {\n      for (const url of urls) {\n        const addr = refs.addressFromUrl(url);\n        if (!addr) {\n          console.warn(`initiative ${initiative.title}: no address for ${url}`);\n          continue;\n        }\n        graph.addEdge(createEdge(initiative, addr));\n      }\n    };\n\n    // Generic approach to handling EdgeSpecs.\n    const edgeSpecHandler = (\n      {urls, entries}: EdgeSpec,\n      createEdge: EdgeFactoryT,\n      field: NodeEntryField\n    ) => {\n      // Delegate handling the URLs.\n      urlHandler(urls, createEdge);\n\n      for (const entry of entries) {\n        // Add the NodeEntry contribution itself to the graph.\n        const entryNode = nodeFromEntry(entry, initiative.id, field);\n        graph.addNode(entryNode);\n        graph.addEdge(createEdge(initiative, entryNode.address));\n        if (entry.weight != null) {\n          weights.nodeWeights.set(entryNode.address, entry.weight);\n        }\n\n        // Add edges to the contributors.\n        for (const contributor of entry.contributors) {\n          const addr = refs.addressFromUrl(contributor);\n          if (!addr) {\n            console.warn(\n              `entry ${entry.title}: no address for contributor ${contributor}`\n            );\n            continue;\n          }\n          graph.addEdge({\n            address: EdgeAddress.append(\n              contributesToEntryEdgeType.prefix,\n              ...NodeAddress.toParts(entryNode.address),\n              ...NodeAddress.toParts(addr)\n            ),\n            timestampMs: entry.timestampMs,\n            src: addr,\n            dst: entryNode.address,\n          });\n        }\n      }\n    };\n\n    // Maps the edge types to it's fields.\n    edgeSpecHandler(initiative.dependencies, depedencyEdge, \"DEPENDENCY\");\n    edgeSpecHandler(initiative.references, referenceEdge, \"REFERENCE\");\n    edgeSpecHandler(initiative.contributions, contributionEdge, \"CONTRIBUTION\");\n    urlHandler(initiative.champions, championEdge);\n  }\n\n  return wg;\n}\n","// @flow\nimport type {Plugin, PluginDirectoryContext} from \"../../api/plugin\";\nimport type {PluginDeclaration} from \"../../analysis/pluginDeclaration\";\nimport {parser, type InitiativesConfig} from \"./config\";\nimport {declaration} from \"./declaration\";\nimport {join as pathJoin} from \"path\";\nimport type {ReferenceDetector} from \"../../core/references\";\nimport type {WeightedGraph} from \"../../core/weightedGraph\";\nimport {weightsForDeclaration} from \"../../analysis/pluginDeclaration\";\nimport {createWeightedGraph} from \"./createGraph\";\nimport {loadJson} from \"../../util/storage\";\nimport {loadDirectory as _loadDirectory} from \"./initiativesDirectory\";\nimport * as Weights from \"../../core/weights\";\nimport type {IdentityProposal} from \"../../core/ledger/identityProposal\";\nimport {DiskStorage} from \"../../core/storage/disk\";\n\nasync function loadConfig(\n  ctx: PluginDirectoryContext\n): Promise<InitiativesConfig> {\n  const storage = new DiskStorage(ctx.configDirectory());\n  return loadJson(storage, \"config.json\", parser);\n}\n\nfunction getDirectoryFromContext(ctx: PluginDirectoryContext): string {\n  return pathJoin(ctx.configDirectory(), \"initiatives\");\n}\n\nexport class InitiativesPlugin implements Plugin {\n  async declaration(): Promise<PluginDeclaration> {\n    return declaration;\n  }\n\n  // We dont need to load any data since all the initiative files are on disk\n  async load(): Promise<void> {}\n\n  async graph(\n    ctx: PluginDirectoryContext,\n    rd: ReferenceDetector\n  ): Promise<WeightedGraph> {\n    const {remoteUrl} = await loadConfig(ctx);\n    const localPath = getDirectoryFromContext(ctx);\n\n    const {initiatives} = await _loadDirectory({\n      remoteUrl,\n      localPath,\n    });\n\n    const {graph, weights} = createWeightedGraph(initiatives, rd);\n\n    const declarationWeights = weightsForDeclaration(declaration);\n    const combinedWeights = Weights.merge([weights, declarationWeights]);\n\n    return {graph, weights: combinedWeights};\n  }\n\n  async referenceDetector(\n    ctx: PluginDirectoryContext\n  ): Promise<ReferenceDetector> {\n    const {remoteUrl} = await loadConfig(ctx);\n    const localPath = getDirectoryFromContext(ctx);\n\n    const {referenceDetector} = await _loadDirectory({\n      remoteUrl,\n      localPath,\n    });\n\n    return referenceDetector;\n  }\n\n  async identities(): Promise<$ReadOnlyArray<IdentityProposal>> {\n    // Initiatives plugin is a consumer of identities, but not a producer.\n    return [];\n  }\n}\n","// @flow\n\nimport type {Plugin, PluginDirectoryContext} from \"../../api/plugin\";\nimport type {PluginDeclaration} from \"../../analysis/pluginDeclaration\";\nimport {\n  MappedReferenceDetector,\n  type ReferenceDetector,\n} from \"../../core/references\";\nimport {declaration} from \"./declaration\";\nimport {parser as ethJsonParser} from \"./ethAddress\";\nimport {loadJson} from \"../../util/storage\";\nimport {DiskStorage} from \"../../core/storage/disk\";\nimport {\n  empty as emptyWeightedGraph,\n  type WeightedGraph,\n} from \"../../core/weightedGraph\";\nimport {createIdentities} from \"./createIdentities\";\nimport type {IdentityProposal} from \"../../core/ledger/identityProposal\";\n\nasync function loadEthJson(ctx: PluginDirectoryContext) {\n  const storage = new DiskStorage(ctx.configDirectory());\n  return await loadJson(storage, \"ethereumAddresses.json\", ethJsonParser);\n}\n\nexport class EthereumPlugin implements Plugin {\n  async declaration(): Promise<PluginDeclaration> {\n    return declaration;\n  }\n\n  // We dont need to load any data since eth addresses are on disk\n  async load(): Promise<void> {}\n\n  // TODO: Implement weighted graph generation logic\n  async graph(\n    _unused_ctx: PluginDirectoryContext,\n    _unused_rd: ReferenceDetector\n  ): Promise<WeightedGraph> {\n    return emptyWeightedGraph();\n  }\n\n  // TODO: Implement referenceDetector generation logic\n  async referenceDetector(\n    _unused_ctx: PluginDirectoryContext\n  ): Promise<ReferenceDetector> {\n    const emptyReferenceDetector = new MappedReferenceDetector(new Map());\n    return emptyReferenceDetector;\n  }\n\n  async identities(\n    ctx: PluginDirectoryContext\n  ): Promise<$ReadOnlyArray<IdentityProposal>> {\n    const ethAddressJson = await loadEthJson(ctx);\n    return createIdentities(ethAddressJson);\n  }\n}\n","// @flow\n\nimport type {Plugin} from \"./plugin\";\nimport {type PluginId, getPluginOwner} from \"./pluginId\";\nimport {GithubPlugin} from \"../plugins/github/plugin\";\nimport {DiscoursePlugin} from \"../plugins/discourse/plugin\";\nimport {DiscordPlugin} from \"../plugins/discord/plugin\";\nimport {InitiativesPlugin} from \"../plugins/initiatives/plugin\";\nimport {EthereumPlugin} from \"../plugins/ethereum/plugin\";\nimport {\n  ExternalPlugin,\n  ExternalPluginIdOwner,\n} from \"../plugins/external/plugin\";\nimport {DiskStorage} from \"../core/storage/disk\";\n\n/**\n * Returns an object mapping owner-name pairs to CLI plugin\n * declarations; keys are like `sourcecred/github`.\n */\n// TODO(@decentralion): Fix the type signature here.\nexport function getPlugin(pluginId: PluginId): ?Plugin {\n  const mapping = {\n    \"sourcecred/github\": new GithubPlugin(),\n    \"sourcecred/discourse\": new DiscoursePlugin(),\n    \"sourcecred/discord\": new DiscordPlugin(),\n    \"sourcecred/initiatives\": new InitiativesPlugin(),\n    \"sourcecred/ethereum\": new EthereumPlugin(),\n  };\n  if (mapping[pluginId.toString()]) return mapping[pluginId.toString()];\n  if (getPluginOwner(pluginId) === ExternalPluginIdOwner)\n    return new ExternalPlugin({\n      pluginId,\n      storage: new DiskStorage(process.cwd()),\n    });\n}\n","// @flow\n\nimport * as P from \"../util/combo\";\nimport {Plugin} from \"./plugin\";\nimport {getPlugin} from \"./bundledPlugins\";\nimport {rawParser, type RawInstanceConfig} from \"./rawInstanceConfig\";\nimport * as pluginId from \"./pluginId\";\n\nexport type InstanceConfig = {|\n  +bundledPlugins: Map<pluginId.PluginId, Plugin>,\n|};\n\nfunction upgrade(raw: RawInstanceConfig): InstanceConfig {\n  const bundledPlugins = new Map();\n  for (const id of raw.bundledPlugins) {\n    const plugin = getPlugin(id);\n    if (plugin == null) {\n      throw new Error(\"bad bundled plugin: \" + JSON.stringify(id));\n    }\n    bundledPlugins.set(id, plugin);\n  }\n  return {bundledPlugins};\n}\n\nexport const parser: P.Parser<InstanceConfig> = rawParser.fmap(upgrade);\n","// @flow\n\nimport {Instance} from \"./instance\";\nimport {ReadInstance} from \"./readInstance\";\nimport type {CredrankOutput} from \"../main/credrank\";\nimport type {GraphInput, GraphOutput} from \"../main/graph\";\nimport type {AnalysisOutput} from \"../main/analysis\";\nimport type {Neo4jOutput} from \"../main/analysisUtils/neo4j\";\nimport {join as pathJoin} from \"path\";\nimport stringify from \"json-stable-stringify\";\nimport {\n  type WeightedGraph,\n  toJSON as weightedGraphToJSON,\n} from \"../../core/weightedGraph\";\nimport {loadJson} from \"../../util/storage\";\nimport {mkdirx} from \"../../util/disk\";\nimport {toISO} from \"../../util/timestamp\";\nimport {parser as configParser, type InstanceConfig} from \"../instanceConfig\";\nimport {Ledger} from \"../../core/ledger/ledger\";\nimport {type DependenciesConfig} from \"../dependenciesConfig\";\nimport {CredGraph} from \"../../core/credrank/credGraph\";\nimport {CredGrainView} from \"../../core/credGrainView\";\nimport {DiskStorage} from \"../../core/storage/disk\";\nimport {WritableZipStorage} from \"../../core/storage/zip\";\nimport {encode} from \"../../core/storage/textEncoding\";\nimport type {PluginDirectoryContext} from \"../plugin\";\nimport {type CredAccountData} from \"../../core/ledger/credAccounts\";\nimport {WritableDataStorage} from \"../../core/storage\";\nimport {type PersonalAttributionsConfig} from \"../config/personalAttributionsConfig\";\nimport type {GrainIntegrationMultiResult} from \"../main/grain\";\n\nconst DEPENDENCIES_PATH: $ReadOnlyArray<string> = [\n  \"config\",\n  \"dependencies.json\",\n];\n\nconst PERSONAL_ATTRIBUTIONS_PATH: $ReadOnlyArray<string> = [\n  \"config\",\n  \"personalAttributions.json\",\n];\nconst INSTANCE_CONFIG_PATH: $ReadOnlyArray<string> = [\"sourcecred.json\"];\nconst CREDGRAPH_PATH: $ReadOnlyArray<string> = [\"output\", \"credGraph\"];\nconst CREDGRAINVIEW_PATH: $ReadOnlyArray<string> = [\"output\", \"credGrainView\"];\nconst GRAPHS_PATH: $ReadOnlyArray<string> = [\"graph\"];\nconst LEDGER_PATH: $ReadOnlyArray<string> = [\"data\", \"ledger.json\"];\nconst ACCOUNTS_PATH: $ReadOnlyArray<string> = [\"output\", \"accounts.json\"];\nconst NEO4J_DIRECTORY: $ReadOnlyArray<string> = [\"output\", \"neo4j\"];\nconst GRAIN_INTEGRATION_DIRECTORY: $ReadOnlyArray<string> = [\n  \"output\",\n  \"grainIntegration\",\n];\n\nconst JSON_SUFFIX: string = \".json\";\nconst CSV_SUFFIX: string = \".csv\";\nconst ZIP_SUFFIX: string = \"\";\n\n/**\nThis is an Instance implementation that reads and writes using relative paths\non the local disk.\n */\nexport class LocalInstance extends ReadInstance implements Instance {\n  _baseDirectory: string;\n\n  _writableStorage: WritableDataStorage;\n  _writableZipStorage: WritableZipStorage;\n\n  constructor(baseDirectory: string) {\n    const storage = new DiskStorage(baseDirectory);\n\n    super(storage);\n    this._writableStorage = storage;\n    this._baseDirectory = baseDirectory;\n    this._writableZipStorage = new WritableZipStorage(storage);\n  }\n\n  //////////////////////////////\n  //  Interface Functions\n  //////////////////////////////\n\n  async readGraphInput(): Promise<GraphInput> {\n    const [instanceConfig, ledger] = await Promise.all([\n      this.readInstanceConfig(),\n      this.readLedger(),\n    ]);\n    const plugins = [];\n    for (const [pluginId, plugin] of instanceConfig.bundledPlugins.entries()) {\n      plugins.push({\n        pluginId,\n        plugin,\n        directoryContext: this.pluginDirectoryContext(pluginId),\n      });\n    }\n    return {\n      plugins,\n      ledger,\n    };\n  }\n\n  async writeGraphOutput(\n    graphOutput: GraphOutput,\n    shouldZip: boolean = true\n  ): Promise<void> {\n    await Promise.all([\n      this.writeLedger(graphOutput.ledger),\n      ...graphOutput.pluginGraphs.map(({pluginId, weightedGraph}) =>\n        this.writePluginGraph(pluginId, weightedGraph, shouldZip)\n      ),\n    ]);\n  }\n\n  async writeCredrankOutput(\n    credrankOutput: CredrankOutput,\n    shouldZip: boolean = true\n  ): Promise<void> {\n    await Promise.all([\n      this.writeLedger(credrankOutput.ledger),\n      this.writeCredGraph(credrankOutput.credGraph, shouldZip),\n      this.writeCredGrainView(credrankOutput.credGrainView, shouldZip),\n      this.writeDependenciesConfig(credrankOutput.dependencies),\n      this.writePersonalAttributionsConfig(credrankOutput.personalAttributions),\n    ]);\n  }\n\n  async writeAnalysisOutput(analysisOutput: AnalysisOutput): Promise<void> {\n    await Promise.all([\n      this.writeCredAccounts(analysisOutput.accounts),\n      this.writeNeo4jOutput(analysisOutput.neo4j),\n    ]);\n  }\n\n  async writeLedger(ledger: Ledger): Promise<void> {\n    const ledgerPath = pathJoin(...LEDGER_PATH);\n    return this._writableStorage.set(ledgerPath, encode(ledger.serialize()));\n  }\n\n  async writeGrainIntegrationOutput(\n    result: $Shape<GrainIntegrationMultiResult>\n  ): Promise<void> {\n    if (!result.output) {\n      return;\n    }\n    const {fileName, content} = result.output;\n    mkdirx(pathJoin(...GRAIN_INTEGRATION_DIRECTORY));\n    const credDateString = toISO(result.distributionCredTimestamp);\n    const grainIntegrationPath = pathJoin(\n      ...GRAIN_INTEGRATION_DIRECTORY,\n      credDateString + \"_\" + fileName\n    );\n    this._writableStorage.set(grainIntegrationPath, encode(content));\n  }\n\n  //////////////////////////////\n  //  Private Functions\n  //////////////////////////////\n\n  async readInstanceConfig(): Promise<InstanceConfig> {\n    const pluginsConfigPath = pathJoin(...INSTANCE_CONFIG_PATH);\n    return loadJson(this._storage, pluginsConfigPath, configParser);\n  }\n\n  createPluginDirectory(\n    components: $ReadOnlyArray<string>,\n    pluginId: string\n  ): string {\n    const idParts = pluginId.split(\"/\");\n    if (idParts.length !== 2) {\n      throw new Error(`Bad plugin name: ${pluginId}`);\n    }\n    const [pluginOwner, pluginName] = idParts;\n    const pathComponents = [...components, pluginOwner, pluginName];\n    let path = this._baseDirectory;\n    for (const pc of pathComponents) {\n      path = pathJoin(path, pc);\n      mkdirx(path);\n    }\n    return pathJoin(...pathComponents);\n  }\n\n  pluginDirectoryContext(pluginName: string): PluginDirectoryContext {\n    const cacheDir = this.createPluginDirectory([\"cache\"], pluginName);\n    const configDir = this.createPluginDirectory(\n      [\"config\", \"plugins\"],\n      pluginName\n    );\n    return {\n      configDirectory() {\n        return configDir;\n      },\n      cacheDirectory() {\n        return cacheDir;\n      },\n    };\n  }\n\n  async writeCredGraph(\n    credGraph: CredGraph,\n    shouldZip: boolean = true\n  ): Promise<void> {\n    const cgJson = stringify(credGraph.toJSON());\n    const outputPath =\n      pathJoin(...CREDGRAPH_PATH) + (shouldZip ? ZIP_SUFFIX : JSON_SUFFIX);\n    const storage = shouldZip\n      ? this._writableZipStorage\n      : this._writableStorage;\n    return storage.set(outputPath, encode(cgJson));\n  }\n\n  async writeCredGrainView(\n    credGrainView: CredGrainView,\n    shouldZip: boolean = true\n  ): Promise<void> {\n    const json = stringify(credGrainView.toJSON());\n    const outputPath =\n      pathJoin(...CREDGRAINVIEW_PATH) + (shouldZip ? ZIP_SUFFIX : JSON_SUFFIX);\n    const storage = shouldZip\n      ? this._writableZipStorage\n      : this._writableStorage;\n    return storage.set(outputPath, encode(json));\n  }\n\n  async writePluginGraph(\n    pluginId: string,\n    weightedGraph: WeightedGraph,\n    shouldZip: boolean = true\n  ): Promise<void> {\n    const serializedGraph = encode(\n      stringify(weightedGraphToJSON(weightedGraph))\n    );\n    const outputDir = this.createPluginGraphDirectory(pluginId);\n    const outputPath =\n      pathJoin(outputDir, ...GRAPHS_PATH) +\n      (shouldZip ? ZIP_SUFFIX : JSON_SUFFIX);\n    const storage = shouldZip\n      ? this._writableZipStorage\n      : this._writableStorage;\n    return storage.set(outputPath, serializedGraph);\n  }\n\n  async writeDependenciesConfig(\n    dependenciesConfig: DependenciesConfig\n  ): Promise<void> {\n    const dependenciesPath = pathJoin(...DEPENDENCIES_PATH);\n    return this._writableStorage.set(\n      dependenciesPath,\n      stringify(dependenciesConfig, {space: 4})\n    );\n  }\n\n  async writePersonalAttributionsConfig(\n    config: PersonalAttributionsConfig\n  ): Promise<void> {\n    const path = pathJoin(...PERSONAL_ATTRIBUTIONS_PATH);\n    return this._writableStorage.set(path, stringify(config, {space: 4}));\n  }\n\n  async writeCredAccounts(credAccounts: CredAccountData): Promise<void> {\n    const accountsPath = pathJoin(...ACCOUNTS_PATH);\n    return this._writableStorage.set(\n      accountsPath,\n      encode(stringify(credAccounts))\n    );\n  }\n\n  async writeNeo4jOutput(neo4jOutput: Neo4jOutput | void): Promise<void> {\n    if (!neo4jOutput) return;\n    mkdirx(pathJoin(...NEO4J_DIRECTORY));\n    await Promise.all([\n      this.writeFromIterator(\n        neo4jOutput.nodes,\n        NEO4J_DIRECTORY,\n        \"nodes_\",\n        CSV_SUFFIX,\n        false\n      ),\n      this.writeFromIterator(\n        neo4jOutput.edges,\n        NEO4J_DIRECTORY,\n        \"edges_\",\n        CSV_SUFFIX,\n        false\n      ),\n    ]);\n  }\n\n  async writeFromIterator(\n    iterator: Iterator<string>,\n    directory: $ReadOnlyArray<string>,\n    prefix: string,\n    suffix: string,\n    shouldZip: boolean\n  ): Promise<void> {\n    const promises = [];\n    const storage = shouldZip\n      ? this._writableZipStorage\n      : this._writableStorage;\n    let n = 1;\n    for (const str of iterator) {\n      const path = pathJoin(...directory, prefix + n + suffix);\n      promises.push(storage.set(path, encode(str)));\n      n++;\n    }\n    await Promise.all(promises);\n  }\n}\n","// @flow\n\nimport deepFreeze from \"deep-freeze\";\nimport cloneDeep from \"lodash.clonedeep\";\nimport base from \"./base\";\n// `cloneDeep` and `any` help get around\n// assignment constraints in both Flow and JS\nconst api: any = {...cloneDeep(base)};\n\n// Extended exports for calling SourceCred code programmatically\n// in a node environment. Both the structure and the contents of\n// this API are experimental and subject to change.\n\nimport {LocalInstance} from \"../../api/instance/localInstance\";\napi.instance.LocalInstance = LocalInstance;\n\nimport {GithubPlugin} from \"../../plugins/github/plugin\";\napi.plugins.github.GithubPlugin = GithubPlugin;\n\nimport {DiscordPlugin} from \"../../plugins/discord/plugin\";\napi.plugins.discord.DiscordPlugin = DiscordPlugin;\n\nimport {DiscoursePlugin} from \"../../plugins/discourse/plugin\";\napi.plugins.discourse.DiscoursePlugin = DiscoursePlugin;\n\nimport {InitiativesPlugin} from \"../../plugins/initiatives/plugin\";\napi.plugins.initiatives.InitiativesPlugin = InitiativesPlugin;\n\nexport default (deepFreeze(api): typeof api);\n"],"sourceRoot":""}